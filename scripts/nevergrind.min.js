!function(e,a,n,t,i,o,r,l,s,d,c,m,u,f,h,g,p,b,v,y,k,S,I,w,C,M,T,B,D,L,H,A,E){function G(){return new o({repeat:0,repeatDelay:1})}function q(){return new i.delayedCall(0,"")}function P(e){return 0==(e=(e+0).toFixed(1))[e.length-1]?((e=e.split("")).pop(),e.pop(),e=e.join("")):(e-=0).toFixed(1)}function Q(e){return"<span class='green'>"+e+"</span>"}function R(e){return"<span class='redfont'>"+e+"</span>"}function F(e){return"<span class='yellow'>"+e+"</span>"}function N(e){return"<span class='gold'>"+e+"</span>"}function j(e){return'<span class="magical">'+e+"</span>"}function z(e){return'<span class="rare">'+e+"</span>"}function Y(e){return'<span class="unique">'+e+"</span>"}function K(e){return'<span class="set">'+e+"</span>"}function W(e,a){var t="#4169e1",i=Xk;if(nevergrounds)o=bS.eq[i];else var o=bS[a][i];var r=Yy.job;0===o.rarity?NG.ttItemName.innerHTML=function(e){return'<span class="normal">'+e+"</span>"}(o.name):1===o.rarity?NG.ttItemName.innerHTML=j(o.name):2===o.rarity?NG.ttItemName.innerHTML=z(o.name):3===o.rarity?NG.ttItemName.innerHTML=Y(o.name):4===o.rarity?NG.ttItemName.innerHTML=K(o.name):5===o.rarity&&(NG.ttItemName.innerHTML=function(e){return'<span class="legendary">'+e+"</span>"}(o.name));var l="<div id='itemIcon'><div id='itemIconImg'></div></div>";if(!nevergrounds&&"item"===a){if(i>23){l+=("Cost: "+(s=Qv(e.parent().index()+24))+" Gold<br><br>").fontcolor("#00aa00")}if(i<=23&&!0===KI){var s=Qv(e.parent().index());l+=("Sale Value: "+s+" Gold<br><br>").fontcolor("#00aa00")}}if(1===o.quality&&(l+="<span class='exceptionalItem'>Exceptional Quality</span><br>"),2===o.quality&&(l+="<span class='eliteItem'>Elite Quality</span><br>"),o.req&&(o.req>Yy.level?l+=("Required Level: "+o.req+"<br><br>").fontcolor("#ff0000"):l+=("Required Level: "+o.req+"<br><br>").fontcolor("#ffffff")),nevergrounds?l+=ze("eq",i)+"<br>":l+=ze(a,i)+"<br>",sI=o.itemSlot,"shield"===o.type&&(l+=~~(100*Oe(o.yPos))+"% Block Rate<br>"),"cloth"===o.type&&(l+="Cloth Armor<br>"),"leather"===o.type){if("Necromancer"===r&&!o.weight||"Enchanter"===r&&!o.weight||"Magician"===r&&!o.weight||"Wizard"===r&&!o.weight)d=F("Leather Armor<br>");else d="Leather Armor<br>";l+=d}if("chain"===o.type){if("Necromancer"===r||"Enchanter"===r||"Magician"===r||"Wizard"===r||"Monk"===r&&!o.weight||"Druid"===r&&!o.weight)d=F("Chain Armor<br>");else d="Chain Armor<br>";l+=d}if("plate"===o.type){if("Druid"===r||"Monk"===r||"Necromancer"===r||"Enchanter"===r||"Magician"===r||"Wizard"===r||"Rogue"===r&&!o.weight||"Ranger"===r&&!o.weight||"Shaman"===r&&!o.weight)d=F("Plate Armor<br>");else d="Plate Armor<br>";l+=d}if("slashed"===o.type&&(Yy.oneHandSlash>=1?l+="One-Hand Slashing<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>":l+=F("One-Hand Slashing")+"<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>"),"cleaved"===o.type&&(Yy.twoHandSlash>=1?l+="Two-Hand Slashing<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>":l+=F("Two-Hand Slashing")+"<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>"),"crushed"===o.type&&(Yy.oneHandBlunt>=1?l+="One-Hand Blunt<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>":l+=F("One-Hand Blunt")+"<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>"),"smashed"!==o.type&&"staff"!==o.type||(Yy.twoHandBlunt>=1?l+="Two-Hand Blunt<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>":l+=F("Two-Hand Blunt")+"<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>"),"pierced"===o.type&&(Yy.piercing>=1?l+="Piercing<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>":l+=F("Piercing")+"<br>Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>"),"range"===o.type&&(l+="Damage: "+o.damage+" Delay: "+(o.delay/100).toPrecision(2)+"<br>"),l+="<br>",o.armor&&(l+=("+"+o.armor+" Armor<br>").fontcolor(t)),2===o.rarity&&(o.enhancedArmor&&(l+=("+"+o.enhancedArmor+"% Enhanced Armor<br>").fontcolor(t)),o.ias&&(l+=("+"+o.ias+"% Increased Attack Speed<br>").fontcolor(t))),o.weight&&(l+="Reduced Weight<br>".fontcolor(t)),o.hp&&(l+=("+"+o.hp+" Maximum Health<br>").fontcolor(t)),o.mp&&(l+=("+"+o.mp+" Maximum Mana<br>").fontcolor(t)),o.str>0&&(l+=("+"+o.str+" Strength<br>").fontcolor(t)),o.str<0&&(l+=(o.str+" Strength<br>").fontcolor(t)),o.sta&&(l+=("+"+o.sta+" Stamina<br>").fontcolor(t)),o.agi&&(l+=("+"+o.agi+" Agility<br>").fontcolor(t)),o.dex&&(l+=("+"+o.dex+" Dexterity<br>").fontcolor(t)),o.intel&&(l+=("+"+o.intel+" Intelligence<br>").fontcolor(t)),o.wis&&(l+=("+"+o.wis+" Wisdom<br>").fontcolor(t)),o.cha>0&&(l+=("+"+o.cha+" Charisma<br>").fontcolor(t)),o.cha<0&&(l+=(o.cha+" Charisma<br>").fontcolor(t)),o.allStats&&(l+=("+"+o.allStats+" All Attributes<br>").fontcolor(t)),o.hpRegen&&(l+=("+"+o.hpRegen+" Health Per Tick<br>").fontcolor(t)),o.mpRegen&&(l+=("+"+o.mpRegen+" Mana Per Tick<br>").fontcolor(t)),o.attack&&(l+=("+"+o.attack+" Attack<br>").fontcolor(t)),o.oneHandSlash&&(l+=("+"+o.oneHandSlash+" One-Hand Slashing<br>").fontcolor(t)),o.twoHandSlash&&(l+=("+"+o.twoHandSlash+" Two-Hand Slashing<br>").fontcolor(t)),o.oneHandBlunt&&(l+=("+"+o.oneHandBlunt+" One-Hand Blunt<br>").fontcolor(t)),o.twoHandBlunt&&(l+=("+"+o.twoHandBlunt+" Two-Hand Blunt<br>").fontcolor(t)),o.piercing&&(l+=("+"+o.piercing+" Piercing<br>").fontcolor(t)),o.handtohand&&(l+=("+"+o.handtohand+" Hand to Hand<br>").fontcolor(t)),o.offense&&(l+=("+"+o.offense+" Offense<br>").fontcolor(t)),o.dualWield&&(l+=("+"+o.dualWield+" Dual Wield<br>").fontcolor(t)),o.doubleAttack&&(l+=("+"+o.doubleAttack+" Double Attack<br>").fontcolor(t)),o.defense&&(l+=("+"+o.defense+" Defense<br>").fontcolor(t)),o.dodge&&"Monk"!==r&&(l+=("+"+o.dodge+" Dodge<br>").fontcolor(t)),o.dodge&&"Monk"===r&&(l+=("+"+o.dodge+" Block<br>").fontcolor(t)),o.parry&&(l+=("+"+o.parry+" Parry<br>").fontcolor(t)),o.riposte&&(l+=("+"+o.riposte+" Riposte<br>").fontcolor(t)),o.alteration&&"Bard"!==r&&(l+=("+"+o.alteration+" Alteration<br>").fontcolor(t)),o.abjuration&&"Bard"!==r&&(l+=("+"+o.abjuration+" Abjuration<br>").fontcolor(t)),o.evocation&&"Bard"!==r&&(l+=("+"+o.evocation+" Evocation<br>").fontcolor(t)),o.conjuration&&"Bard"!==r&&(l+=("+"+o.conjuration+" Conjuration<br>").fontcolor(t)),o.channeling&&"Bard"!==r&&(l+=("+"+o.channeling+" Channeling<br>").fontcolor(t)),o.alteration&&"Bard"===r&&(l+=("+"+o.alteration+" Singing<br>").fontcolor(t)),o.evocation&&"Bard"===r&&(l+=("+"+o.evocation+" Percussion<br>").fontcolor(t)),o.conjuration&&"Bard"===r&&(l+=("+"+o.conjuration+" Wind<br>").fontcolor(t)),o.abjuration&&"Bard"===r&&(l+=("+"+o.abjuration+" String<br>").fontcolor(t)),o.channeling&&"Bard"===r&&(l+=("+"+o.channeling+" Brass<br>").fontcolor(t)),o.allSkills&&(l+=("+"+o.allSkills+" All Skills<br>").fontcolor(t)),o.critChance&&(l+=("+"+o.critChance+" Critical Chance<br>").fontcolor(t)),o.critDamage&&(l+=("+"+o.critDamage+"% Critical Damage<br>").fontcolor(t)),o.phyMit&&(l+=("+"+o.phyMit+" Maximum Physical Reduction<br>").fontcolor(t)),o.magMit&&(l+=("+"+o.magMit+" Maximum Magic Reduction<br>").fontcolor(t)),o.resistPoison&&(l+=("+"+o.resistPoison+" Resist Poison<br>").fontcolor(t)),o.resistMagic&&(l+=("+"+o.resistMagic+" Resist Arcane<br>").fontcolor(t)),o.resistLightning&&(l+=("+"+o.resistLightning+" Resist Lightning<br>").fontcolor(t)),o.resistCold&&(l+=("+"+o.resistCold+" Resist Cold<br>").fontcolor(t)),o.resistFire&&(l+=("+"+o.resistFire+" Resist Fire<br>").fontcolor(t)),o.allResist&&(l+=("+"+o.allResist+" All Resistances<br>").fontcolor(t)),o.goldFind&&(l+=("+"+o.goldFind+"% Gold Gain<br>").fontcolor(t)),o.expFind&&(l+=("+"+o.expFind+"% Exp Gain<br>").fontcolor(t)),o.lightRadius>0&&(l+=("+"+o.lightRadius+" Magic Find<br>").fontcolor(t)),o.thorns&&(l+=("+"+o.thorns+" Thorn Damage<br>").fontcolor(t)),o.absorbPoison&&o.absorbMagic&&o.absorbLightning&&o.absorbCold&&o.absorbFire?l+=("Absorb "+o.absorbPoison+"% of All Magic Damage<br>").fontcolor(t):(o.absorbPoison&&(l+=("Absorb "+o.absorbPoison+"% of Poison Damage<br>").fontcolor(t)),o.absorbMagic&&(l+=("Absorb "+o.absorbMagic+"% of Arcane Damage<br>").fontcolor(t)),o.absorbLightning&&(l+=("Absorb "+o.absorbLightning+"% of Lightning Damage<br>").fontcolor(t)),o.absorbCold&&(l+=("Absorb "+o.absorbCold+"% of Cold Damage<br>").fontcolor(t)),o.absorbFire&&(l+=("Absorb "+o.absorbFire+"% of Fire Damage<br>").fontcolor(t))),o.hpKill&&(l+=("+"+o.hpKill+" Health Per Kill<br>").fontcolor(t)),o.mpKill&&(l+=("+"+o.mpKill+" Mana Per Kill<br>").fontcolor(t)),o.physicalDamage&&(l+=("+"+o.physicalDamage+" Physical Damage<br>").fontcolor(t)),o.poisonDamage&&(l+=("+"+o.poisonDamage+" Poison Damage<br>").fontcolor(t)),o.magicDamage&&(l+=("+"+o.magicDamage+" Arcane Damage<br>").fontcolor(t)),o.lightningDamage&&(l+=("+"+o.lightningDamage+" Lightning Damage<br>").fontcolor(t)),o.coldDamage&&(l+=("+"+o.coldDamage+" Cold Damage<br>").fontcolor(t)),o.fireDamage&&(l+=("+"+o.fireDamage+" Fire Damage<br>").fontcolor(t)),o.enhancePhysical&&(l+=("+"+o.enhancePhysical+"% Physical Damage<br>").fontcolor(t)),o.enhancePoison&&(l+=("+"+o.enhancePoison+"% Poison Damage<br>").fontcolor(t)),o.enhanceMagic&&(l+=("+"+o.enhanceMagic+"% Arcane Damage<br>").fontcolor(t)),o.enhanceLightning&&(l+=("+"+o.enhanceLightning+"% Lightning Damage<br>").fontcolor(t)),o.enhanceCold&&(l+=("+"+o.enhanceCold+"% Cold Damage<br>").fontcolor(t)),o.enhanceFire&&(l+=("+"+o.enhanceFire+"% Fire Damage<br>").fontcolor(t)),o.enhanceAll&&(l+=("+"+o.enhanceAll+"% All Magical Damage<br>").fontcolor(t)),o.fear&&o.stun&&o.cold&&o.silence?l+=("-"+o.fear+"% All Status Effect Durations<br>").fontcolor(t):(o.fear&&(l+=("-"+o.fear+"% Fear Duration<br>").fontcolor(t)),o.stun&&(l+=("-"+o.stun+"% Stun Duration<br>").fontcolor(t)),o.cold&&(l+=("-"+o.cold+"% Chill Duration<br>").fontcolor(t)),o.silence&&(l+=("-"+o.silence+"% Silence Duration<br>").fontcolor(t))),o.leech&&(l+=("+"+o.leech+" Life Leech<br>").fontcolor(t)),o.wraith&&(l+=("+"+o.wraith+" Mana Leech<br>").fontcolor(t)),o.runSpeed&&(l+=("+"+o.runSpeed+"% Run Speed<br>").fontcolor(t)),o.haste){l+=("Attack Haste +"+(d=o.haste/10*-1)+"<br>").fontcolor(t)}if(o.globalHaste){l+=("Skill Haste +"+(d=o.globalHaste/10*-1)+"<br>").fontcolor(t)}if(o.castingHaste){var d;l+=("Casting Haste +"+(d=o.castingHaste/10*-1)+"<br>").fontcolor(t)}o.upgrade>0&&(l+="<br>Upgrade Status: "+o.upgrade+"/10<br>"),o.proc&&(l+=("<br>"+o.proc+"<br>").fontcolor("#fff5aa")),o.flavorText&&(l+='<div class="flavorText">'+o.flavorText+"</div>"),4===o.rarity&&(l+="<div class='setTip'>"+function(e){var a="",n="</div>",t="<div class='setTitle'>",i=e.name;if(0===i.indexOf("Miner")){(o=sS.Miner)>=2&&(a+="<div>+6 Life Leech"+n,a+="<div>+6 Mana Leech"+n),o>=3&&(a+="<div>+25% All Resists"+n),a+=t+"Miner's Infamy"+n}else if(0===i.indexOf("Minotaur")){(o=sS.Minotaur)>=2&&(a+="<div>+15 Attack"+n),o>=3&&(a+="<div>+30 Strength"+n),o>=4&&(a+="<div>+12% Physical Damage"+n),a+=t+"Minotaur's Assault"+n}else if(0===i.indexOf("Golem")){(o=sS.Golem)>=2&&(a+="<div>+5 Defense"+n),o>=3&&(a+="<div>+50 Maximum Health"+n),o>=4&&(a+="<div>+25 Maximum Physical Reduction"+n),a+=t+"Golem's Avarice"+n}else if(0===i.indexOf("Martyr")){(o=sS.Martyr)>=2&&(a+="<div>+6 Piercing"+n),o>=3&&(a+="<div>+10 Health Per Kill"+n),o>=4&&(a+="<div>+15 Critical Chance"+n),a+=t+"Martyr's Sacrifice"+n}else if(0===i.indexOf("Bishop")){(o=sS.Bishop)>=2&&(a+="<div>+12 Wisdom"+n),o>=3&&(a+="<div>+4 Mana Per Tick"+n),o>=4&&(a+="<div>+30 All Resistances"+n),a+=t+"Bishop's Virtue"+n}else if(0===i.indexOf("Samurai")){(o=sS.Samurai)>=2&&(a+="<div>+6 Offense"+n),o>=3&&(a+="<div>+24 Lightning Damage"+n),o>=4&&(a+="<div>Skill Haste +15"+n),a+=t+"Samurai's Honor"+n}else if(0===i.indexOf("Emissary")){(o=sS.Emissary)>=2&&(a+="<div>+12 All Resistances"+n),o>=3&&(a+="<div>+15 Exp Gain"+n),o>=4&&(a+="<div>+7 All Skills"+n),a+=t+"Emissary's Judgment"+n}else if(0===i.indexOf("Sage")){(o=sS.Sage)>=2&&(a+="<div>+4 Health Per Tick"+n),o>=3&&(a+="<div>+7 Mana Per Kill"+n),o>=4&&(a+="<div>+25 All Attributes"+n),a+=t+"Eternal Sage"+n}else if(0===i.indexOf("Vagabond")){(o=sS.Vagabond)>=2&&(a+="<div>+8% Critical Damage"+n),o>=3&&(a+="<div>+15 Hand to Hand"+n),o>=4&&(a+="<div>Attack Haste +15"+n),a+=t+"Vagabond's Fate"+n}else if(0===i.indexOf("Vagrant")){(o=sS.Vagrant)>=2&&(a+="<div>+12 Thorn Damage"+n),o>=3&&(a+="<div>+35 Maximum Mana"+n),o>=4&&(a+="<div>+12% Fire Damage"+n),a+=t+"Vagrant's Weald"+n}else if(0===i.indexOf("Chancellor")){(o=sS.Chancellor)>=2&&(a+="<div>+35 Resist Poison"+n),o>=3&&(a+="<div>-30% Fear Duration"+n),o>=4&&(a+="<div>+12% Poison Damage"+n),a+=t+"Chancellor's Vestige"+n}else if(0===i.indexOf("Magnate")){(o=sS.Magnate)>=2&&(a+="<div>Casting Haste +8"+n),o>=3&&(a+="<div>+5% Lightning Damage"+n),o>=4&&(a+="<div>+20 Conjuration"+n),a+=t+"Magnate's Relic"+n}else if(0===i.indexOf("Orator")){(o=sS.Orator)>=2&&(a+="<div>+6 Alteration"+n),o>=3&&(a+="<div>-25% Stun Duration"+n),o>=4&&(a+="<div>+12% Arcane Damage"+n),a+=t+"Orator's Passion"+n}else if(0===i.indexOf("Wyvern")){(o=sS.Wyvern)>=2&&(a+="<div>+4% Fire Damage"+n),o>=3&&(a+="<div>+50 Resist Fire"+n),o>=4&&(a+="<div>+15 Critical Chance"+n),a+=t+"Wyvern's Heart"+n}else if(0===i.indexOf("Guardian")){(o=sS.Guardian)>=2&&(a+="<div>+10 Defense"+n),o>=3&&(a+="<div>+13 Health Per Tick"+n),o>=4&&(a+="<div>+15 All Resistances"+n),o>=5&&(a+="<div>+7 Life Leech"+n),o>=6&&(a+="<div>-75% All Status Effect Durations"+n,a+="<div>Pummel:"+n,a+="<div>Hits 5 Times"+n),a+=t+"Stalwart Guardian"+n}else if(0===i.indexOf("Duke")){(o=sS.Duke)>=2&&(a+="<div>-40% Fear Duration"+n),o>=3&&(a+="<div>+80 Maximum Health"+n),o>=4&&(a+="<div>Skill Haste +15"+n),o>=5&&(a+="<div>+15 Maximum Magic Reduction"+n),o>=6&&(a+="<div>+30% Arcane Damage"+n,a+="<div>Yaulp:"+n,a+="<div>Duration Increased 4 Seconds"+n),a+=t+"Duke of Prentia"+n}else if(0===i.indexOf("Augur")){(o=sS.Augur)>=2&&(a+="<div>+60 Maximum Health"+n),o>=3&&(a+="<div>+8 Mana Leech"+n),o>=4&&(a+="<div>+40 Intelligence"+n),o>=5&&(a+="<div>+25% Critical Damage"+n),o>=6&&(a+="<div>+40 Critical Chance"+n,a+="<div>Harm Touch:"+n,a+="<div>Cooldown Reduced 40 Seconds"+n),a+=t+"Lurid Augur"+n}else if(0===i.indexOf("Venova")){(o=sS.Venova)>=2&&(a+="<div>-25% Silence Duration"+n),o>=3&&(a+="<div>+15 Magic Find"+n),o>=4&&(a+="<div>Casting Haste +15"+n),o>=5&&(a+="<div>+60 Resist Arcane"+n),o>=6&&(a+="<div>+50 Alteration"+n,a+="<div>Guardian Angel:"+n,a+="<div>Angel Casts Expel Corruption"+n),a+=t+"Venova's Will"+n}else if(0===i.indexOf("Baron")){(o=sS.Baron)>=2&&(a+="<div>+75 Maximum Health"+n),o>=3&&(a+="<div>+2 All Skills"+n),o>=4&&(a+="<div>Attack Haste +15"+n),o>=5&&(a+="<div>Casting Haste +20"+n),o>=6&&(a+="<div>+15% All Damage"+n,a+="<div>Consonant Chain:"+n,a+="<div>All Damage Enhanced 15% On Chained Mobs"+n),a+=t+"Baron's Symphony"+n}else if(0===i.indexOf("Daimyo")){(o=sS.Daimyo)>=2&&(a+="<div>Absorb 8% of Lightning Damage"+n),o>=3&&(a+="<div>+25% Gold Gain"+n),o>=4&&(a+="<div>+25 Thorn Damage"+n),o>=5&&(a+="<div>Skill Haste +25"+n),o>=6&&(a+="<div>+60% Critical Damage"+n,a+="<div>Trueshot Arrow:"+n,a+="<div>Cooldown Reduced 6 Seconds"+n),a+=t+"Daimyo's Decree"+n}else if(0===i.indexOf("Bloodletter")){(o=sS.Bloodletter)>=2&&(a+="<div>+12 Health Per Kill"+n),o>=3&&(a+="<div>+10 Dual Wield"+n),o>=4&&(a+="<div>+75 Poison Damage"+n),o>=5&&(a+="<div>+60 Agility"+n),o>=6&&(a+="<div>+40 Life Leech"+n,a+="<div>Mirage Strike:"+n,a+="<div>Reduce Cooldown 3 Seconds"+n),a+=t+"Bloodletter's Pact"+n}else if(0===i.indexOf("Mendicant")){(o=sS.Mendicant)>=2&&(a+="<div>+75 Resist Cold"+n),o>=3&&(a+="<div>Casting Haste +15"+n),o>=4&&(a+="<div>+120 Maximum Health"+n),o>=5&&(a+="<div>+10 Health Per Tick"+n),o>=6&&(a+="<div>+30% Poison Damage"+n,a+="<div>Glacial Impact:"+n,a+="<div>Freezes Target For 5 Additional Seconds"+n),a+=t+"Mephitic Mendicant"+n}else if(0===i.indexOf("Friar")){(o=sS.Friar)>=2&&(a+="<div>+50 Attack"+n),o>=3&&(a+="<div>+20 Double Attack"+n),o>=4&&(a+="<div>+25 Riposte"+n),o>=5&&(a+="<div>Skill Haste +25"+n),o>=6&&(a+="<div>Attack Haste +50"+n,a+="<div>Windmill Kick:"+n,a+="<div>Cooldown Reduced 13 Seconds"+n),a+=t+"Solemn Friar"+n}else if(0===i.indexOf("Willow")){(o=sS.Willow)>=2&&(a+="<div>+5% Fire Damage"+n),o>=3&&(a+="<div>+2 All Skills"+n),o>=4&&(a+="<div>-15% All Status Effect Durations"+n),o>=5&&(a+="<div>+20 All Attributes"+n),o>=6&&(a+="<div>Casting Haste +50"+n,a+="<div>Root:"+n,a+="<div>Rooted Targets Take 30% Additional Damage"+n),a+=t+"Willow's Heart"+n}else if(0===i.indexOf("Wraith")){(o=sS.Wraith)>=2&&(a+="<div>+7 Mana Per Tick"+n),o>=3&&(a+="<div>+15 Mana Per Kill"+n),o>=4&&(a+="<div>Casting Haste +20"+n),o>=5&&(a+="<div>+15 Conjuration"+n),o>=6&&(a+="<div>+25 All Skills"+n,a+="<div>Drain Soul:"+n,a+="<div>Cooldown Reduced 6 Seconds"+n),a+=t+"Condemned Wraith"+n}else if(0===i.indexOf("Satyr")){(o=sS.Satyr)>=2&&(a+="<div>+15 Maximum Physical Reduction"+n),o>=3&&(a+="<div>+45 Intelligence"+n),o>=4&&(a+="<div>+125 Maximum Health"+n),o>=5&&(a+="<div>+32 All Resistances"+n),o>=6&&(a+="<div>+30% Arcane Damage"+n,a+="<div>Mystic Rune:"+n,a+="<div>Cooldown Reduced 10 Seconds"+n),a+=t+"Venerable Satyr"+n}else if(0===i.indexOf("Summoner")){(o=sS.Summoner)>=2&&(a+="<div>+12% Critical Damage"+n),o>=3&&(a+="<div>+10% Cold Damage"+n),o>=4&&(a+="<div>Casting Haste +24"+n),o>=5&&(a+="<div>+12% Lightning Damage"+n),o>=6&&(a+="<div>+50 Conjuration"+n,a+="<div>Psionic Storm:"+n,a+="<div>Cooldown Reduced 13 Seconds"+n),a+=t+"Occult Summoner"+n}else if(0===i.indexOf("Malefactor")){(o=sS.Malefactor)>=2&&(a+="<div>+35 Stamina"+n),o>=3&&(a+="<div>+10 Evocation"+n),o>=4&&(a+="<div>-40% Silence Duration"+n),o>=5&&(a+="<div>Casting Haste +21"+n),o>=6&&(a+="<div>+20% All Magical Damage"+n,a+="<div>Chain Lightning:"+n,a+="<div>Damage Enhanced 50%"+n),a+=t+"Arcane Malefactor"+n}else if(0===i.indexOf("Warlord")){(o=sS.Warlord)>=2&&(a+="<div>+45 Dexterity"+n),o>=3&&(a+="<div>+60 Strength"+n),o>=4&&(a+="<div>+300 Maximum Health"+n),o>=5&&(a+="<div>Attack Haste +40"+n),o>=6&&(a+="<div>+80% Critical Damage"+n,a+="<div>Intrepid Might:"+n,a+="<div>Invincibility Duration Doubled"+n),a+=t+"Mighty Warlord"+n}else if(0===i.indexOf("Assassin")){(o=sS.Assassin)>=2&&(a+="<div>+15 Maximum Magic Reduction"+n),o>=3&&(a+="<div>+24 Maximum Physical Reduction"+n),o>=4&&(a+="<div>+35 All Resistances"+n),o>=5&&(a+="<div>+100 Agility"+n),o>=6&&(a+="<div>+55 Critical Chance"+n,a+="<div>Sonic Strike:"+n,a+="<div>Stuns All Targets"+n),a+=t+"Deadly Assassin"+n}else if(0===i.indexOf("Grandmaster")){(o=sS.Grandmaster)>=2&&(a+="<div>+5 All Skills"+n),o>=3&&(a+="<div>+40 Magic Find"+n),o>=4&&(a+="<div>+25 Health Per Tick"+n),o>=5&&(a+="<div>+15% Physical Damage"+n),o>=6&&(a+="<div>+50 Life Leech"+n,a+="<div>Flying Kick:"+n,a+="<div>Stuns Target"+n),a+=t+"Honored Grandmaster"+n}else if(0===i.indexOf("Crusader")){(o=sS.Crusader)>=2&&(a+="<div>+50 Wisdom"+n),o>=3&&(a+="<div>+14 Mana Per Tick"+n),o>=4&&(a+="<div>Absorb 15% of Arcane Damage"+n),o>=5&&(a+="<div>-80% All Status Effect Durations"+n),o>=6&&(a+="<div>+35 All Skills"+n,a+="<div>Symbol of Marshan:"+n,a+="<div>Buffs Attack 30%"+n),a+=t+"Righteous Crusader"+n}else if(0===i.indexOf("Grave Lord")){(o=sS.GraveLord)>=2&&(a+="<div>+12 Offense"+n),o>=3&&(a+="<div>Absorb 12% of Cold Damage"+n),o>=4&&(a+="<div>+24 Life Leech"+n),o>=5&&(a+="<div>Attack Haste +40"+n),o>=6&&(a+="<div>+315 Poison Damage"+n,a+="<div>Slam:"+n,a+="<div>Double Swing"+n),a+=t+"Infernal Grave Lord"+n}else if(0===i.indexOf("Warder")){(o=sS.Warder)>=2&&(a+="<div>+20 Riposte"+n),o>=3&&(a+="<div>+10% Physical Damage"+n),o>=4&&(a+="<div>Absorb 25% of Fire Damage"+n),o>=5&&(a+="<div>+100 Dexterity"+n),o>=6&&(a+="<div>Skill Haste +50"+n,a+="<div>Blade Shield:"+n,a+="<div>Parry and Riposte Magic Attacks"+n),a+=t+"Deft Warder"+n}else if(0===i.indexOf("Virtuoso")){(o=sS.Virtuoso)>=2&&(a+="<div>+20 All Attributes"+n),o>=3&&(a+="<div>+40% Gold Gain"+n),o>=4&&(a+="<div>+20 Mana Per Tick"+n),o>=5&&(a+="<div>+30% Arcane Damage"+n),o>=6&&(a+="<div>+150 Charisma"+n,a+="<div>Great Leader:"+n,a+="<div>+Exp Find Enhances Arcane Damage 30%"+n),a+=t+"Adroit Virtuoso"+n}else if(0===i.indexOf("Hierophant")){(o=sS.Hierophant)>=2&&(a+="<div>+20 All Resistances"+n),o>=3&&(a+="<div>+24 Health Per Tick"+n),o>=4&&(a+="<div>+150 Thorn Damage"+n),o>=5&&(a+="<div>Absorb 10% of All Damage"+n),o>=6&&(a+="<div>+30% Maximum Health"+n,a+="<div>Treant Form:"+n,a+="<div>+Thorns Enhances All Damage 16%"+n),a+=t+"Floruit Hierophant"+n}else if(0===i.indexOf("High Priest")){(o=sS.HighPriest)>=2&&(a+="<div>+55 Wisdom"+n),o>=3&&(a+="<div>-70% Fear Duration"+n),o>=4&&(a+="<div>+150 Attack"+n),o>=5&&(a+="<div>+45 Critical Chance"+n),o>=6&&(a+="<div>+30% All Magical Damage"+n,a+="<div>The Prophet:"+n,a+="<div>+Attack Reduces Mob Resists 50%"+n),a+=t+"Extolled High Priest"+n}else if(0===i.indexOf("Oracle")){(o=sS.Oracle)>=2&&(a+="<div>+20 Health Per Kill"+n),o>=3&&(a+="<div>-90% Cold Duration"+n),o>=4&&(a+="<div>+20% Poison Damage"+n),o>=5&&(a+="<div>+30% Cold Damage"+n),o>=6&&(a+="<div>+30% All Healing Power"+n,a+="<div>The Cannibal:"+n,a+="<div>+HP Kill Increases All Regeneration 75%"+n),a+=t+"Mystical Oracle"+n}else if(0===i.indexOf("Warlock")){(o=sS.Warlock)>=2&&(a+="<div>+4 All Skills"+n),o>=3&&(a+="<div>+125 Attack"+n),o>=4&&(a+="<div>+35 All Resistances"+n),o>=5&&(a+="<div>+100 Intelligence"+n),o>=6&&(a+="<div>+30% All Magical Damage"+n,a+="<div>Ringwraith:"+n,a+="<div>Attack Enhances All Poison Damage 40%"+n),a+=t+"Profane Warlock"+n}else if(0===i.indexOf("Phantasmist")){(o=sS.Phantasmist)>=2&&(a+="<div>-45% Silence Duration"+n),o>=3&&(a+="<div>+32 Maximum Magic Reduction"+n),o>=4&&(a+="<div>Absorb 25% of Arcane Damage"+n),o>=5&&(a+="<div>Casting Haste +50"+n),o>=6&&(a+="<div>+60 All Attributes"+n,a+="<div>Apparition:"+n,a+="<div>Physical Damage Reduced 25%"+n),a+=t+"Candescent Phantasmist"+n}else if(0===i.indexOf("Arch Mage")){(o=sS.ArchMage)>=2&&(a+="<div>Absorb 10% of Fire Damage"+n),o>=3&&(a+="<div>+20 Conjuration"+n),o>=4&&(a+="<div>+20 Mana Per Tick"+n),o>=5&&(a+="<div>+45 All Resistances"+n),o>=6&&(a+="<div>+15% Maximum Mana and Health"+n,a+="<div>Conviction Aura:"+n,a+="<div>Lowers Mobs' Resists"+n),a+=t+"Recondite Arch Mage"+n}else if(0===i.indexOf("Sorcerer")){var o=sS.Sorcerer;o>=2&&(a+="<div>Absorb 10% of Cold Damage"+n),o>=3&&(a+="<div>+20 Evocation"+n),o>=4&&(a+="<div>+35 Critical Chance"+n),o>=5&&(a+="<div>+20% All Damage"+n),o>=6&&(a+="<div>Casting Haste +60"+n,a+="<div>Offhand Mastery:"+n,a+="<div>20% Shield Block"+n),a+=t+"Cosmic Sorcerer"+n}return a}(o)+"</div>",l+="<div class='setList'>"+function(e){function a(e,a,n,t){var i=e+a;return t===E?bS.eq[n].name===i?"<div>"+Q(i)+"</div>":"<div>"+R(i)+"</div>":bS.eq[n].name===i||bS.eq[t].name===i?"<div>"+Q(i)+"</div>":"<div>"+R(i)+"</div>"}var n="",t="";var i=e.name;0===i.indexOf("Miner")?(n+=a(t="Miner's ","Memento",1),n+=a(t,"Shard",2,3),n+=a(t,"Glimmer",2,3)):0===i.indexOf("Minotaur")?(n+=a(t="Minotaur's ","Gore",12,13),n+=a(t,"Horns",0),n+=a(t,"Hooves",11),n+=a(t,"Sprawl",4)):0===i.indexOf("Golem")?(n+=a(t="Golem's ","Crag",12,13),n+=a(t,"Ore",6),n+=a(t,"Shelf",4),n+=a(t,"Crust",10)):0===i.indexOf("Martyr")?(n+=a(t="Martyr's ","Manifesto",1),n+=a(t,"Shiv",12,13),n+=a(t,"Agony",7),n+=a(t,"Ideal",9)):0===i.indexOf("Bishop")?(n+=a(t="Bishop's ","Justice",12),n+=a(t,"Purity",9),n+=a(t,"Merit",10),n+=a(t,"Faith",2,3)):0===i.indexOf("Samurai")?(n+=a(t="Samurai's ","Devotion",0),n+=a(t,"Duty",6),n+=a(t,"Ardor",5),n+=a(t,"Fidelity",2,3)):0===i.indexOf("Emissary")?(n+=a(t="Emissary's ","Craft",14),n+=a(t,"Finesse",11),n+=a(t,"Poise",10),n+=a(t,"Dispute",7)):0===i.indexOf("Sage")?(n+=a(t="Sage's ","Acumen",8),n+=a(t,"Vision",0),n+=a(t,"Wit",12,13),n+=a(t,"Clamp",9)):0===i.indexOf("Vagabond")?(n+=a(t="Vagabond's ","Seal",2,3),n+=a(t,"Cinch",9),n+=a(t,"Survey",8),n+=a(t,"Voyage",11)):0===i.indexOf("Vagrant")?(n+=a(t="Vagrant's ","Timber",4),n+=a(t,"Copse",5),n+=a(t,"Slab",13),n+=a(t,"Branch",12,13)):0===i.indexOf("Chancellor")?(n+=a(t="Chancellor's ","Ceremony",6),n+=a(t,"Remorse",1),n+=a(t,"Qualm",10),n+=a(t,"Bias",13)):0===i.indexOf("Magnate")?(n+=a(t="Magnate's ","Lamp",14),n+=a(t,"Curio",2,3),n+=a(t,"Token",1),n+=a(t,"Sapphire",13)):0===i.indexOf("Orator")?(n+=a(t="Orator's ","Desire",9),n+=a(t,"Whisper",6),n+=a(t,"Shout",0),n+=a(t,"Entreat",7)):0===i.indexOf("Wyvern")?(n+=a(t="Wyvern's ","Scale",1),n+=a(t,"Wing",5),n+=a(t,"Tail",10),n+=a(t,"Eye",13)):0===i.indexOf("Guardian")?(n+=a(t="Guardian's ","Fortress",6),n+=a(t,"Parapet",7),n+=a(t,"Bastion",4),n+=a(t,"Wall",13),n+=a(t,"Moat",9),n+=a(t,"Merlon",0)):0===i.indexOf("Duke")?(n+=a(t="Duke's ","Laurel",1),n+=a(t,"Adoration",0),n+=a(t,"Ascension",5),n+=a(t,"Amity",8),n+=a(t,"Proclamation",4),n+=a(t,"Rule",10)):0===i.indexOf("Augur")?(n+=a(t="Augur's ","Skull",0),n+=a(t,"Harvester",12),n+=a(t,"Pustule",2,3),n+=a(t,"Sludge",11),n+=a(t,"Enmity",14),n+=a(t,"Rancor",10)):0===i.indexOf("Venova")?(n+=a(t="Venova's ","Halo",0),n+=a(t,"Martel",12),n+=a(t,"Wings",5),n+=a(t,"Eternity",2,3),n+=a(t,"Ascent",14),n+=a(t,"Silks",6)):0===i.indexOf("Baron")?(n+=a(t="Baron's ","Rhythm",11),n+=a(t,"Coda",7),n+=a(t,"Cadenza",1),n+=a(t,"Tenor",10),n+=a(t,"Sonata",8),n+=a(t,"Glissando",12,13)):0===i.indexOf("Daimyo")?(n+=a(t="Daimyo's ","Enso",0),n+=a(t,"Honne",7),n+=a(t,"Giri",12,13),n+=a(t,"Wabi",5),n+=a(t,"Miyabi",2,3),n+=a(t,"Yugen",14)):0===i.indexOf("Bloodletter")?(n+=a(t="Bloodletter's ","Lancet",12,13),n+=a(t,"Clot",2,3),n+=a(t,"Vial",1),n+=a(t,"Marrow",9),n+=a(t,"Spleen",6),n+=a(t,"Serum",7)):0===i.indexOf("Mendicant")?(n+=a(t="Mendicant's ","Effigy",13),n+=a(t,"Clover",2,3),n+=a(t,"Horseshoe",11),n+=a(t,"Albatross",4),n+=a(t,"Agimat",1),n+=a(t,"Sarimanok",14)):0===i.indexOf("Friar")?(n+=a(t="Friar's ","Penance",10),n+=a(t,"Candor",7),n+=a(t,"Gift",9),n+=a(t,"Sacrifice",6),n+=a(t,"Epiphany",8),n+=a(t,"Grace",11)):0===i.indexOf("Willow")?(n+=a(t="Willow's ","Gust",10),n+=a(t,"Calamity",12,13),n+=a(t,"Seed",2,3),n+=a(t,"Mildew",11),n+=a(t,"Frost",4),n+=a(t,"Flare",0)):0===i.indexOf("Wraith")?(n+=a(t="Wraith's ","Lust",9),n+=a(t,"Envy",14),n+=a(t,"Lesion",2,3),n+=a(t,"Pall",5),n+=a(t,"Flesh",8),n+=a(t,"Husk",6)):0===i.indexOf("Satyr")?(n+=a(t="Satyr's ","Chalice",13),n+=a(t,"Artifice",12,13),n+=a(t,"Turban",0),n+=a(t,"Satin",8),n+=a(t,"Opulence",1),n+=a(t,"Delusion",6)):0===i.indexOf("Summoner")?(n+=a(t="Summoner's ","Ember",14),n+=a(t,"Residue",4),n+=a(t,"Cinder",7),n+=a(t,"Furnace",6),n+=a(t,"Conduit",12),n+=a(t,"Gyre",2,3)):0===i.indexOf("Malefactor")?(n+=a(t="Malefactor's ","Ballast",8),n+=a(t,"Fuse",9),n+=a(t,"Coil",12,13),n+=a(t,"Resistor",11),n+=a(t,"Yttrium",13),n+=a(t,"Terminal",0)):0===i.indexOf("Warlord")?(n+=a(t="Warlord's ","Scowl",0),n+=a(t,"Disdain",4),n+=a(t,"Blitzkrieg",6),n+=a(t,"Defiance",7),n+=a(t,"Derision",8),n+=a(t,"Ferocity",10)):0===i.indexOf("Assassin")?(n+=a(t="Assassin's ","Guile",1),n+=a(t,"Helix",2,3),n+=a(t,"Slander",5),n+=a(t,"Deception",6),n+=a(t,"Hoax",8),n+=a(t,"Subversion",9)):0===i.indexOf("Grandmaster")?(n+=a(t="Grandmaster's ","Symmetry",0),n+=a(t,"Peace",5),n+=a(t,"Affinity",9),n+=a(t,"Consonance",10),n+=a(t,"Balance",11),n+=a(t,"Comity",14)):0===i.indexOf("Crusader")?(n+=a(t="Crusader's ","Cathexis",1),n+=a(t,"Allegiance",2,3),n+=a(t,"Fervor",4),n+=a(t,"Fealty",7),n+=a(t,"Vehemence",11),n+=a(t,"Aegis",13)):0===i.indexOf("Grave Lord")?(n+=a(t="Grave Lord's ","Deceit",0),n+=a(t,"Perfidy",2,3),n+=a(t,"Treachery",5),n+=a(t,"Cozen",6),n+=a(t,"Chicane",10),n+=a(t,"Crescent",12)):0===i.indexOf("Warder")?(n+=a(t="Warder's ","Zephyr",1),n+=a(t,"Reclaim",7),n+=a(t,"Preserve",11),n+=a(t,"Hailrend",12,13),n+=a(t,"Magmahew",12,13),n+=a(t,"Tempest",14)):0===i.indexOf("Virtuoso")?(n+=a(t="Virtuoso's ","Orotund",4),n+=a(t,"Bombast",6),n+=a(t,"Conceit",8),n+=a(t,"Plangent",9),n+=a(t,"Resonance",13),n+=a(t,"Fanfare",14)):0===i.indexOf("Hierophant")?(n+=a(t="Hierophant's ","Holocaust",2,3),n+=a(t,"Blizzard",4),n+=a(t,"Cyclone",5),n+=a(t,"Cataclysm",10),n+=a(t,"Cascade",11),n+=a(t,"Cloudburst",13)):0===i.indexOf("High Priest")?(n+=a(t="High Priest's ","Abstention",0),n+=a(t,"Mastery",1),n+=a(t,"Piety",2,3),n+=a(t,"Reverence",6),n+=a(t,"Humility",7),n+=a(t,"Constraint",9)):0===i.indexOf("Oracle")?(n+=a(t="Oracle's ","Sibyl",1),n+=a(t,"Ailment",4),n+=a(t,"Contagion",8),n+=a(t,"Malady",10),n+=a(t,"Fetish",13),n+=a(t,"Presage",14)):0===i.indexOf("Warlock")?(n+=a(t="Warlock's ","Doom",0),n+=a(t,"Carnage",2,3),n+=a(t,"Demise",5),n+=a(t,"Abomination",6),n+=a(t,"Nightmare",11),n+=a(t,"Nemesis",12,13)):0===i.indexOf("Phantasmist")?(n+=a(t="Phantasmist's ","Acumen",0),n+=a(t,"Catharsis",5),n+=a(t,"Sagacity",7),n+=a(t,"Serendipity",8),n+=a(t,"Insight",9),n+=a(t,"Kismet",13)):0===i.indexOf("Arch Mage")?(n+=a(t="Arch Mage's ","Periapt",2,3),n+=a(t,"Debacle",4),n+=a(t,"Squall",7),n+=a(t,"Calamity",8),n+=a(t,"Catastrophe",12),n+=a(t,"Mojo",14)):0===i.indexOf("Sorcerer")&&(n+=a(t="Sorcerer's ","Zodiac",1),n+=a(t,"Pulsar",2,3),n+=a(t,"Nebula",6),n+=a(t,"Equinox",9),n+=a(t,"Quasar",10),n+=a(t,"Pleiades",13));return n}(o)+"</div>"),NG.ttItemMsg.innerHTML=l,n.getElementById("itemIconImg").style.backgroundPosition=o.xPos+"px "+o.yPos+"px"}function O(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].attack;return e}function X(){var e=0;sS.Emissary>=3&&(e+=15);for(var a=0;a<=14;a++)e+=bS.eq[a].expFind;return e}function V(){var e=0;sS.Vagrant>=2&&(e+=12),sS.Daimyo>=4&&(e+=25),sS.Hierophant>=4&&(e+=150);for(var a=0;a<=14;a++)e+=bS.eq[a].thorns;return e}function _(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].magicDamage;return"Paladin"===Yy.job&&Yy.talent3>=20&&(e+=~~(ne()/18)),"Bard"===Yy.job&&BM&&Yy.talent1>=20&&(e+=~~(ne()/20)),e}function $(){function e(e){var a=bS.eq[e].name;"Vagabond's Seal"===a&&(l=1),"Miner's Shard"===a&&(i=1),"Miner's Glimmer"===a&&(o=1),"Bishop's Faith"===a&&(r=1),"Samurai's Fidelity"===a&&(s=1),"Magnate's Curio"===a&&(d=1),"Augur's Pustule"===a&&(c=1),"Venova's Eternity"===a&&(m=1),"Daimyo's Miyabi"===a&&(u=1),"Bloodletter's Clot"===a&&(f=1),"Mendicant's Clover"===a&&(h=1),"Willow's Seed"===a&&(g=1),"Wraith's Lesion"===a&&(p=1),"Summoner's Gyre"===a&&(b=1),"Hierophant's Holocaust"===a&&(v=1),"High Priest's Piety"===a&&(I=1),"Arch Mage's Periapt"===a&&(y=1),"Sorcerer's Pulsar"===a&&(k=1),"Warlock's Carnage"===a&&(S=1),"Grave Lord's Perfidy"===a&&(w=1),"Crusader's Allegiance"===a&&(C=1),"Assassin's Helix"===a&&(M=1)}function a(e){var a=bS.eq[e].name;"Minotaur's Gore"===a&&(T=1),"Golem's Crag"===a&&(B=1),"Martyr's Shiv"===a&&(D=1),"Vagrant's Branch"===a&&(L=1),"Baron's Glissando"===a&&(H=1),"Daimyo's Giri"===a&&(A=1),"Bloodletter's Lancet"===a&&(x=1),"Willow's Calamity"===a&&(E=1),"Satyr's Artifice"===a&&(G=1),"Malefactor's Coil"===a&&(q=1),"Warder's Hailrend"===a&&(P=1),"Warder's Magmahew"===a&&(Q=1),"Warlock's Nemesis"===a&&(R=1)}for(var n in sS)sS[n]=0;var t=0;if(4===bS.eq[t].rarity){"Minotaur's Horns"===(F=bS.eq[t].name)&&sS.Minotaur++,"Samurai's Devotion"===F&&sS.Samurai++,"Sage's Vision"===F&&sS.Sage++,"Orator's Shout"===F&&sS.Orator++,"Guardian's Merlon"===F&&sS.Guardian++,"Duke's Adoration"===F&&sS.Duke++,"Augur's Skull"===F&&sS.Augur++,"Venova's Halo"===F&&sS.Venova++,"Daimyo's Enso"===F&&sS.Daimyo++,"Willow's Flare"===F&&sS.Willow++,"Satyr's Turban"===F&&sS.Satyr++,"Malefactor's Terminal"===F&&sS.Malefactor++,"Phantasmist's Acumen"===F&&sS.Phantasmist++,"Warlock's Doom"===F&&sS.Warlock++,"High Priest's Abstention"===F&&sS.HighPriest++,"Grave Lord's Deceit"===F&&sS.GraveLord++,"Grandmaster's Symmetry"===F&&sS.Grandmaster++,"Warlord's Scowl"===F&&sS.Warlord++}if(t++,4===bS.eq[t].rarity){"Miner's Memento"===(F=bS.eq[t].name)&&sS.Miner++,"Martyr's Manifesto"===F&&sS.Martyr++,"Chancellor's Remorse"===F&&sS.Chancellor++,"Magnate's Token"===F&&sS.Magnate++,"Wyvern's Scale"===F&&sS.Wyvern++,"Duke's Laurel"===F&&sS.Duke++,"Baron's Cadenza"===F&&sS.Baron++,"Bloodletter's Vial"===F&&sS.Bloodletter++,"Mendicant's Agimat"===F&&sS.Mendicant++,"Satyr's Opulence"===F&&sS.Satyr++,"Sorcerer's Zodiac"===F&&sS.Sorcerer++,"Oracle's Sibyl"===F&&sS.Oracle++,"High Priest's Mastery"===F&&sS.HighPriest++,"Warder's Zephyr"===F&&sS.Warder++,"Crusader's Cathexis"===F&&sS.Crusader++,"Assassin's Guile"===F&&sS.Assassin++}t++;var i=0,o=0,r=0,l=0,s=0,d=0,c=0,m=0,u=0,f=0,h=0,g=0,p=0,b=0,v=0,y=0,k=0,S=0,I=0,w=0,C=0,M=0;if(4===bS.eq[t].rarity&&e(t),t++,4===bS.eq[t].rarity&&e(t),i&&sS.Miner++,l&&sS.Vagabond++,o&&sS.Miner++,r&&sS.Bishop++,s&&sS.Samurai++,d&&sS.Magnate++,c&&sS.Augur++,m&&sS.Venova++,u&&sS.Daimyo++,f&&sS.Bloodletter++,h&&sS.Mendicant++,g&&sS.Willow++,p&&sS.Wraith++,b&&sS.Summoner++,v&&sS.Hierophant++,I&&sS.HighPriest++,S&&sS.Warlock++,y&&sS.ArchMage++,k&&sS.Sorcerer++,w&&sS.GraveLord++,C&&sS.Crusader++,M&&sS.Assassin++,t++,4===bS.eq[t].rarity){"Golem's Shelf"===(F=bS.eq[t].name)&&sS.Golem++,"Minotaur's Sprawl"===F&&sS.Minotaur++,"Vagrant's Timber"===F&&sS.Vagrant++,"Guardian's Bastion"===F&&sS.Guardian++,"Duke's Proclamation"===F&&sS.Duke++,"Mendicant's Albatross"===F&&sS.Mendicant++,"Willow's Frost"===F&&sS.Willow++,"Summoner's Residue"===F&&sS.Summoner++,"Arch Mage's Debacle"===F&&sS.ArchMage++,"Hierophant's Blizzard"===F&&sS.Hierophant++,"Oracle's Ailment"===F&&sS.Oracle++,"Virtuoso's Orotund"===F&&sS.Virtuoso++,"Crusader's Fervor"===F&&sS.Crusader++,"Warlord's Disdain"===F&&sS.Warlord++}if(t++,4===bS.eq[t].rarity){"Samurai's Ardor"===(F=bS.eq[t].name)&&sS.Samurai++,"Vagrant's Copse"===F&&sS.Vagrant++,"Wyvern's Wing"===F&&sS.Wyvern++,"Duke's Ascension"===F&&sS.Duke++,"Venova's Wings"===F&&sS.Venova++,"Daimyo's Wabi"===F&&sS.Daimyo++,"Wraith's Pall"===F&&sS.Wraith++,"Hierophant's Cyclone"===F&&sS.Hierophant++,"Grave Lord's Treachery"===F&&sS.GraveLord++,"Grandmaster's Peace"===F&&sS.Grandmaster++,"Phantasmist's Catharsis"===F&&sS.Phantasmist++,"Warlock's Demise"===F&&sS.Warlock++,"Assassin's Slander"===F&&sS.Assassin++}if(t++,4===bS.eq[t].rarity){"Golem's Ore"===(F=bS.eq[t].name)&&sS.Golem++,"Samurai's Duty"===F&&sS.Samurai++,"Chancellor's Ceremony"===F&&sS.Chancellor++,"Orator's Whisper"===F&&sS.Orator++,"Guardian's Fortress"===F&&sS.Guardian++,"Venova's Silks"===F&&sS.Venova++,"Bloodletter's Spleen"===F&&sS.Bloodletter++,"Friar's Sacrifice"===F&&sS.Friar++,"Wraith's Husk"===F&&sS.Wraith++,"Satyr's Delusion"===F&&sS.Satyr++,"Summoner's Furnace"===F&&sS.Summoner++,"Sorcerer's Nebula"===F&&sS.Sorcerer++,"Warlock's Abomination"===F&&sS.Warlock++,"High Priest's Reverence"===F&&sS.HighPriest++,"Virtuoso's Bombast"===F&&sS.Virtuoso++,"Grave Lord's Cozen"===F&&sS.GraveLord++,"Assassin's Deception"===F&&sS.Assassin++,"Warlord's Blitzkrieg"===F&&sS.Warlord++}if(t++,4===bS.eq[t].rarity){"Martyr's Agony"===(F=bS.eq[t].name)&&sS.Martyr++,"Emissary's Dispute"===F&&sS.Emissary++,"Orator's Entreat"===F&&sS.Orator++,"Guardian's Parapet"===F&&sS.Guardian++,"Baron's Coda"===F&&sS.Baron++,"Daimyo's Honne"===F&&sS.Daimyo++,"Bloodletter's Serum"===F&&sS.Bloodletter++,"Friar's Candor"===F&&sS.Friar++,"Summoner's Cinder"===F&&sS.Summoner++,"Arch Mage's Squall"===F&&sS.ArchMage++,"Phantasmist's Sagacity"===F&&sS.Phantasmist++,"High Priest's Humility"===F&&sS.HighPriest++,"Warder's Reclaim"===F&&sS.Warder++,"Crusader's Fealty"===F&&sS.Crusader++,"Warlord's Defiance"===F&&sS.Warlord++}if(t++,4===bS.eq[t].rarity){"Sage's Acumen"===(F=bS.eq[t].name)&&sS.Sage++,"Vagabond's Survey"===F&&sS.Vagabond++,"Duke's Amity"===F&&sS.Duke++,"Baron's Sonata"===F&&sS.Baron++,"Friar's Epiphany"===F&&sS.Friar++,"Wraith's Flesh"===F&&sS.Wraith++,"Satyr's Satin"===F&&sS.Satyr++,"Malefactor's Ballast"===F&&sS.Malefactor++,"Arch Mage's Calamity"===F&&sS.ArchMage++,"Phantasmist's Serendipity"===F&&sS.Phantasmist++,"Oracle's Contagion"===F&&sS.Oracle++,"Virtuoso's Conceit"===F&&sS.Virtuoso++,"Assassin's Hoax"===F&&sS.Assassin++,"Warlord's Derision"===F&&sS.Warlord++}if(t++,4===bS.eq[t].rarity){"Martyr's Ideal"===(F=bS.eq[t].name)&&sS.Martyr++,"Bishop's Purity"===F&&sS.Bishop++,"Sage's Clamp"===F&&sS.Sage++,"Vagabond's Cinch"===F&&sS.Vagabond++,"Orator's Desire"===F&&sS.Orator++,"Guardian's Moat"===F&&sS.Guardian++,"Bloodletter's Marrow"===F&&sS.Bloodletter++,"Friar's Gift"===F&&sS.Friar++,"Wraith's Lust"===F&&sS.Wraith++,"Malefactor's Fuse"===F&&sS.Malefactor++,"Sorcerer's Equinox"===F&&sS.Sorcerer++,"Phantasmist's Insight"===F&&sS.Phantasmist++,"High Priest's Constraint"===F&&sS.HighPriest++,"Virtuoso's Plangent"===F&&sS.Virtuoso++,"Grandmaster's Affinity"===F&&sS.Grandmaster++,"Assassin's Subversion"===F&&sS.Assassin++}if(t++,4===bS.eq[t].rarity){"Emissary's Poise"===(F=bS.eq[t].name)&&sS.Emissary++,"Bishop's Merit"===F&&sS.Bishop++,"Chancellor's Qualm"===F&&sS.Chancellor++,"Wyvern's Tail"===F&&sS.Wyvern++,"Duke's Rule"===F&&sS.Duke++,"Augur's Rancor"===F&&sS.Augur++,"Baron's Tenor"===F&&sS.Baron++,"Friar's Penance"===F&&sS.Friar++,"Willow's Gust"===F&&sS.Willow++,"Golem's Crust"===F&&sS.Golem++,"Sorcerer's Quasar"===F&&sS.Sorcerer++,"Oracle's Malady"===F&&sS.Oracle++,"Hierophant's Cataclysm"===F&&sS.Hierophant++,"Grave Lord's Chicane"===F&&sS.GraveLord++,"Grandmaster's Consonance"===F&&sS.Grandmaster++,"Warlord's Ferocity"===F&&sS.Warlord++}if(t++,4===bS.eq[t].rarity){"Minotaur's Hooves"===(F=bS.eq[t].name)&&sS.Minotaur++,"Emissary's Finesse"===F&&sS.Emissary++,"Vagabond's Voyage"===F&&sS.Vagabond++,"Augur's Sludge"===F&&sS.Augur++,"Baron's Rhythm"===F&&sS.Baron++,"Mendicant's Horseshoe"===F&&sS.Mendicant++,"Friar's Grace"===F&&sS.Friar++,"Willow's Mildew"===F&&sS.Willow++,"Malefactor's Resistor"===F&&sS.Malefactor++,"Warlock's Nightmare"===F&&sS.Warlock++,"Hierophant's Cascade"===F&&sS.Hierophant++,"Warder's Preserve"===F&&sS.Warder++,"Crusader's Vehemence"===F&&sS.Crusader++,"Grandmaster's Balance"===F&&sS.Grandmaster++}t++;var T=0,B=0,D=0,L=0,H=0,A=0,x=0,E=0,G=0,q=0,P=0,Q=0,R=0;if(4===bS.eq[t].rarity){a(t);"Venova's Martel"===(F=bS.eq[t].name)&&sS.Venova++,"Bishop's Justice"===F&&sS.Bishop++,"Sage's Wit"===F&&sS.Sage++,"Augur's Harvester"===F&&sS.Augur++,"Summoner's Conduit"===F&&sS.Summoner++,"Arch Mage's Catastrophe"===F&&sS.ArchMage++,"Grave Lord's Crescent"===F&&sS.GraveLord++}if(t++,4===bS.eq[t].rarity){a(t);"Vagrant's Slab"===(F=bS.eq[t].name)&&sS.Vagrant++,"Chancellor's Bias"===F&&sS.Chancellor++,"Magnate's Sapphire"===F&&sS.Magnate++,"Wyvern's Eye"===F&&sS.Wyvern++,"Guardian's Wall"===F&&sS.Guardian++,"Mendicant's Effigy"===F&&sS.Mendicant++,"Satyr's Chalice"===F&&sS.Satyr++,"Malefactor's Yttrium"===F&&sS.Malefactor++,"Sorcerer's Pleiades"===F&&sS.Sorcerer++,"Phantasmist's Kismet"===F&&sS.Phantasmist++,"Oracle's Fetish"===F&&sS.Oracle++,"Hierophant's Cloudburst"===F&&sS.Hierophant++,"Virtuoso's Resonance"===F&&sS.Virtuoso++,"Crusader's Aegis"===F&&sS.Crusader++}if(T&&sS.Minotaur++,B&&sS.Golem++,D&&sS.Martyr++,L&&sS.Vagrant++,H&&sS.Baron++,A&&sS.Daimyo++,x&&sS.Bloodletter++,E&&sS.Willow++,G&&sS.Satyr++,q&&sS.Malefactor++,P&&sS.Warder++,Q&&sS.Warder++,R&&sS.Warlock++,t++,4===bS.eq[t].rarity){var F=bS.eq[t].name;"Emissary's Craft"===F&&sS.Emissary++,"Magnate's Lamp"===F&&sS.Magnate++,"Augur's Enmity"===F&&sS.Augur++,"Daimyo's Yugen"===F&&sS.Daimyo++,"Venova's Ascent"===F&&sS.Venova++,"Mendicant's Sarimanok"===F&&sS.Mendicant++,"Wraith's Envy"===F&&sS.Wraith++,"Summoner's Ember"===F&&sS.Summoner++,"Arch Mage's Mojo"===F&&sS.ArchMage++,"Oracle's Presage"===F&&sS.Oracle++,"Virtuoso's Fanfare"===F&&sS.Virtuoso++,"Warder's Tempest"===F&&sS.Warder++,"Grandmaster's Comity"===F&&sS.Grandmaster++}}function U(){"Game"===zy.view&&($(),zy.hpEquip=function(){var e=0;sS.Golem>=3&&(e+=50),sS.Duke>=3&&(e+=80),sS.Augur>=2&&(e+=60),sS.Baron>=2&&(e+=75),sS.Mendicant>=4&&(e+=120),sS.Satyr>=4&&(e+=125);for(var a=0;a<=14;a++)e+=bS.eq[a].hp;return e}(),zy.mpEquip=function(){var e=0;sS.Vagrant>=3&&(e+=35);for(var a=0;a<=14;a++)e+=bS.eq[a].mp;return e}(),zy.strEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].str;return sS.Minotaur>=3&&(e+=30),sS.Warlord>=3&&(e+=60),e}(),zy.staEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].sta;return sS.Malefactor>=2&&(e+=35),e}(),zy.agiEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].agi;return sS.Bloodletter>=5&&(e+=60),sS.Assassin>=5&&(e+=100),e}(),zy.dexEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].dex;return sS.Warlord>=2&&(e+=45),sS.Warder>=5&&(e+=100),e}(),zy.intelEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].intel;return sS.Augur>=4&&(e+=40),sS.Satyr>=3&&(e+=45),sS.Warlock>=5&&(e+=100),e}(),zy.wisEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].wis;return sS.Bishop>=2&&(e+=12),sS.Crusader>=2&&(e+=50),sS.HighPriest>=2&&(e+=55),e}(),zy.chaEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].cha;return sS.Virtuoso>=6&&(e+=150),e}(),zy.allStatsEquip=function(){var e=0;sS.Sage>=4&&(e+=25),sS.Willow>=5&&(e+=20),sS.Virtuoso>=2&&(e+=20),sS.Phantasmist>=6&&(e+=60);for(var a=0;a<=14;a++)e+=bS.eq[a].allStats;return e}(),zy.hpRegenEquip=function(){var e=0;sS.Sage>=2&&(e+=4),sS.Guardian>=3&&(e+=13),sS.Mendicant>=5&&(e+=10),sS.Grandmaster>=4&&(e+=25),sS.Hierophant>=3&&(e+=24);for(var a=0;a<=14;a++)e+=bS.eq[a].hpRegen;"Troll"==Yy.race&&(e+=.01*Yy.maxHp),"female"===Yy.gender&&(e+=dS.ceil(Yy.level/30)),!0===PT&&(e+=Yy.level/12+1),!0===DB&&(e+=Yy.level/10+2);var n=0;return sS.Oracle>=6&&(n+=.75),e*=1+n,dS.round(e)}(),zy.mpRegenEquip=function(){var e=0;sS.Bishop>=3&&(e+=4),sS.Wraith>=2&&(e+=7),sS.Crusader>=3&&(e+=14),sS.Virtuoso>=4&&(e+=20),sS.ArchMage>=4&&(e+=20);for(var a=0;a<=14;a++)e+=bS.eq[a].mpRegen;var n=0;return sS.Oracle>=6&&(n+=.75),e*=1+n}(),zy.armorEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].armor;return e}(),zy.attackEquip=O(),zy.oneHandSlashEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].oneHandSlash;return e}(),zy.twoHandSlashEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].twoHandSlash;return e}(),zy.oneHandBluntEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].oneHandBlunt;return e}(),zy.twoHandBluntEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].twoHandBlunt;return e}(),zy.piercingEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].piercing;return e}(),zy.handtohandEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].handtohand;return sS.Vagabond>=3&&(e+=15),e}(),zy.offenseEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].offense;return sS.Samurai>=2&&(e+=6),sS.GraveLord>=2&&(e+=12),e}(),zy.dualWieldEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].dualWield;return sS.Bloodletter>=3&&(e+=10),e}(),zy.doubleAttackEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].doubleAttack;return sS.Friar>=3&&(e+=20),e}(),zy.defenseEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].defense;return sS.Golem>=2&&(e+=5),sS.Guardian>=2&&(e+=10),e}(),zy.dodgeEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].dodge;return e}(),zy.parryEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].parry;return e}(),zy.riposteEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].riposte;return sS.Friar>=4&&(e+=25),sS.Warder>=2&&(e+=20),e}(),zy.alterationEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].alteration;return sS.Orator>=2&&(e+=6),sS.Venova>=6&&(e+=50),e}(),zy.evocationEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].evocation;return sS.Malefactor>=3&&(e+=10),sS.Sorcerer>=3&&(e+=20),e}(),zy.conjurationEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].conjuration;return sS.Magnate>=4&&(e+=20),sS.Wraith>=5&&(e+=15),sS.Summoner>=6&&(e+=50),sS.ArchMage>=3&&(e+=20),e}(),zy.abjurationEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].abjuration;return e}(),zy.channelingEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].channeling;return e}(),zy.allSkillsEquip=function(){var e=0;sS.Emissary>=4&&(e+=7),sS.Baron>=3&&(e+=2),sS.Willow>=3&&(e+=2),sS.Wraith>=6&&(e+=25),sS.Grandmaster>=2&&(e+=5),sS.Crusader>=6&&(e+=35),sS.Warlock>=2&&(e+=4);for(var a=0;a<=14;a++)e+=bS.eq[a].allSkills;return e}(),zy.critChanceEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].critChance;return sS.Wyvern>=4&&(e+=15),sS.Augur>=6&&(e+=40),sS.Martyr>=4&&(e+=15),sS.Assassin>=6&&(e+=55),sS.HighPriest>=5&&(e+=45),sS.Sorcerer>=4&&(e+=35),e}(),zy.critDamageEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].critDamage;return sS.Vagabond>=2&&(e+=8),sS.Augur>=5&&(e+=25),sS.Daimyo>=6&&(e+=60),sS.Summoner>=2&&(e+=12),sS.Warlord>=6&&(e+=80),e}(),zy.phyMitEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].phyMit;return sS.Golem>=4&&(e+=25),sS.Satyr>=2&&(e+=15),sS.Assassin>=3&&(e+=24),e}(),zy.magMitEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].magMit;return sS.Duke>=5&&(e+=15),sS.Assassin>=2&&(e+=15),sS.Phantasmist>=3&&(e+=32),e}(),zy.resistPoisonEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].resistPoison;return sS.Chancellor>=2&&(e+=35),e}(),zy.resistMagicEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].resistMagic;return sS.Venova>=5&&(e+=60),e}(),zy.resistLightningEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].resistLightning;return e}(),zy.resistColdEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].resistCold;return sS.Mendicant>=2&&(e+=75),e}(),zy.resistFireEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].resistFire;return sS.Wyvern>=3&&(e+=50),e}(),zy.allResistEquip=function(){var e=0;sS.Miner>=3&&(e+=25),sS.Bishop>=4&&(e+=30),sS.Emissary>=2&&(e+=12),sS.Guardian>=4&&(e+=15),sS.Satyr>=5&&(e+=32),sS.Assassin>=4&&(e+=35),sS.Hierophant>=2&&(e+=20),sS.Warlock>=4&&(e+=35),sS.ArchMage>=5&&(e+=45);for(var a=0;a<=14;a++)e+=bS.eq[a].allResist;return 2===zy.difficulty&&(e-=30),3===zy.difficulty&&(e-=75),"Monk"===Yy.job&&Yy.talent8>=20&&(e+=30),e}(),zy.goldFindEquip=function(){var e=0;sS.Daimyo>=3&&(e+=25),sS.Virtuoso>=3&&(e+=40);for(var a=0;a<=14;a++)e+=bS.eq[a].goldFind;return e}(),zy.expFindEquip=X(),zy.thornsEquip=V(),zy.absorbPoisonEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].absorbPoison;return sS.Hierophant>=5&&(e+=10),e>50&&(e=50),e}(),zy.absorbMagicEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].absorbMagic;return sS.Crusader>=4&&(e+=15),sS.Hierophant>=5&&(e+=10),sS.Phantasmist>=4&&(e+=25),e>50&&(e=50),e}(),zy.absorbLightningEquip=function(){var e=0;sS.Daimyo>=2&&(e+=8),sS.Hierophant>=5&&(e+=10);for(var a=0;a<=14;a++)e+=bS.eq[a].absorbLightning;return"Druid"===Yy.job&&Yy.talent4>=20&&(e+=15),e>50&&(e=50),e}(),zy.absorbColdEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].absorbCold;return sS.GraveLord>=3&&(e+=12),sS.Hierophant>=5&&(e+=10),sS.Sorcerer>=2&&(e+=10),"Druid"===Yy.job&&Yy.talent4>=20&&(e+=15),e>50&&(e=50),e}(),zy.absorbFireEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].absorbFire;return sS.Warder>=4&&(e+=25),sS.Hierophant>=5&&(e+=10),sS.ArchMage>=2&&(e+=10),"Druid"===Yy.job&&Yy.talent4>=20&&(e+=15),e>50&&(e=50),e}(),zy.hpKillEquip=function(){var e=0;sS.Martyr>=3&&(e+=10),sS.Bloodletter>=2&&(e+=12),sS.Oracle>=2&&(e+=20);for(var a=0;a<=14;a++)e+=bS.eq[a].hpKill;return e}(),zy.mpKillEquip=function(){var e=0;sS.Sage>=3&&(e+=7),sS.Wraith>=3&&(e+=15);for(var a=0;a<=14;a++)e+=bS.eq[a].mpKill;return e}(),zy.physicalDamageEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].physicalDamage;return e}(),zy.poisonDamageEquip=function(){var e=0;sS.Bloodletter>=4&&(e+=75),sS.GraveLord>=6&&(e+=315);for(var a=0;a<=14;a++)e+=bS.eq[a].poisonDamage;return"Rogue"===Yy.job&&Yy.talent11>=20&&(e+=~~(ne()/12)),e}(),zy.magicDamageEquip=_(),zy.lightningDamageEquip=function(){var e=0;sS.Samurai>=3&&(e+=24);for(var a=0;a<=14;a++)e+=bS.eq[a].lightningDamage;return e}(),zy.coldDamageEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].coldDamage;return e}(),zy.fireDamageEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].fireDamage;return e}(),zy.enhancePhysicalEquip=function(){var e=0;sS.Minotaur>=4&&(e+=12),sS.Baron>=6&&(e+=15),sS.Grandmaster>=5&&(e+=15),sS.Warder>=3&&(e+=10);for(var a=0;a<=14;a++)e+=bS.eq[a].enhancePhysical;return e}(),zy.enhancePoisonEquip=function(){var e=0;sS.Chancellor>=4&&(e+=12),sS.Mendicant>=6&&(e+=30),sS.Oracle>=4&&(e+=20),sS.Warlock>=6&&(e+=~~(.4*O()));for(var a=0;a<=14;a++)e+=bS.eq[a].enhancePoison;return e}(),zy.enhanceMagicEquip=function(){var e=0;sS.Orator>=4&&(e+=12),sS.Duke>=6&&(e+=30),sS.Satyr>=6&&(e+=30),sS.Virtuoso>=5&&(e+=30,sS.Virtuoso>=6&&(e+=~~(.3*X())));for(var a=0;a<=14;a++)e+=bS.eq[a].enhanceMagic;return e}(),zy.enhanceLightningEquip=function(){var e=0;sS.Magnate>=3&&(e+=5),sS.Summoner>=5&&(e+=12);for(var a=0;a<=14;a++)e+=bS.eq[a].enhanceLightning;return e}(),zy.enhanceColdEquip=function(){var e=0;sS.Summoner>=3&&(e+=10),sS.Oracle>=4&&(e+=20);for(var a=0;a<=14;a++)e+=bS.eq[a].enhanceCold;return e}(),zy.enhanceFireEquip=function(){var e=0;sS.Wyvern>=2&&(e+=4),sS.Vagrant>=4&&(e+=12),sS.Willow>=2&&(e+=5);for(var a=0;a<=14;a++)e+=bS.eq[a].enhanceFire;return e}(),zy.enhanceAllEquip=function(){var e=0;sS.Malefactor>=6&&(e+=20),sS.Baron>=6&&(e+=15),sS.HighPriest>=6&&(e+=30),sS.Warlock>=6&&(e+=30),sS.Sorcerer>=5&&(e+=20),sS.Hierophant>=6&&(e+=~~(.16*V()));for(var a=0;a<=14;a++)e+=bS.eq[a].enhanceAll;return e}(),zy.lightRadiusEquip=function(){var e=0;sS.Venova>=3&&(e+=15),sS.Grandmaster>=3&&(e+=40);for(var a=0;a<=14;a++)e+=bS.eq[a].lightRadius;return e}(),zy.runSpeedEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].runSpeed;return e}(),zy.hasteEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].haste;return sS.Vagabond>=4&&(e-=150),sS.Baron>=4&&(e-=150),sS.Friar>=6&&(e-=500),sS.Warlord>=5&&(e-=400),sS.GraveLord>=5&&(e-=400),e}(),zy.globalHasteEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].globalHaste;return sS.Samurai>=4&&(e-=150),sS.Duke>=4&&(e-=150),sS.Daimyo>=5&&(e-=250),sS.Friar>=5&&(e-=250),sS.Warder>=6&&(e-=500),e}(),zy.castingHasteEquip=function(){for(var e=0,a=0;a<=14;a++)e+=bS.eq[a].castingHaste;return sS.Magnate>=2&&(e-=80),sS.Venova>=4&&(e-=150),sS.Baron>=5&&(e-=200),sS.Mendicant>=3&&(e-=150),sS.Willow>=6&&(e-=500),sS.Wraith>=4&&(e-=200),sS.Summoner>=4&&(e-=240),sS.Malefactor>=5&&(e-=210),sS.Phantasmist>=5&&(e-=500),sS.Sorcerer>=6&&(e-=600),e}(),zy.fearEquip=function(){var e=0;sS.Chancellor>=3&&(e+=30),sS.Duke>=2&&(e+=40),sS.Guardian>=6&&(e+=75),sS.Willow>=4&&(e+=15),sS.Crusader>=5&&(e+=80),sS.HighPriest>=3&&(e+=70),"Bard"===Yy.job&&"March of Vithe"===bS.eq[13].name&&(e+=125),"Paladin"===Yy.job&&Yy.talent1>=20&&(e+=50);for(var a=0;a<=14;a++)e+=bS.eq[a].fear;return 2===zy.difficulty&&(e-=20),3===zy.difficulty&&(e-=50),e>75&&(e=75),e}(),zy.stunEquip=function(){var e=0;sS.Orator>=3&&(e+=25),sS.Guardian>=6&&(e+=75),sS.Willow>=4&&(e+=15),sS.Crusader>=5&&(e+=80);for(var a=0;a<=14;a++)e+=bS.eq[a].stun;return"Shadow Knight"===Yy.job&&Yy.talent5>=20&&(e+=50),2===zy.difficulty&&(e-=20),3===zy.difficulty&&(e-=50),e>75&&(e=75),e}(),zy.chillEquip=function(){var e=0;sS.Guardian>=6&&(e+=75),sS.Willow>=4&&(e+=15),sS.Crusader>=5&&(e+=80),sS.Oracle>=3&&(e+=90);for(var a=0;a<=14;a++)e+=bS.eq[a].cold;return 2===zy.difficulty&&(e-=20),3===zy.difficulty&&(e-=50),e>75&&(e=75),e}(),zy.silenceEquip=function(){var e=0;sS.Venova>=2&&(e+=25),sS.Malefactor>=4&&(e+=40),sS.Guardian>=6&&(e+=75),sS.Willow>=4&&(e+=15),sS.Crusader>=5&&(e+=80),sS.Phantasmist>=2&&(e+=45);for(var a=0;a<=14;a++)e+=bS.eq[a].silence;return 2===zy.difficulty&&(e-=20),3===zy.difficulty&&(e-=50),e>75&&(e=75),e}(),zy.leechEquip=function(){var e=0;sS.Miner>=2&&(e+=6),sS.Guardian>=5&&(e+=7),sS.Bloodletter>=6&&(e+=40),sS.Grandmaster>=6&&(e+=50),sS.GraveLord>=4&&(e+=24);for(var a=0;a<=14;a++)e+=bS.eq[a].leech;return e/100}(),zy.wraithEquip=function(){var e=0;sS.Miner>=2&&(e+=6),sS.Augur>=3&&(e+=8);for(var a=0;a<=14;a++)e+=bS.eq[a].wraith;return e}()),"Game"===zy.view&&(nevergrounds||ny())}function J(){var e=1;return"Ranger"===Yy.job||"Shaman"===Yy.job||"Rogue"===Yy.job?("plate"===bS.eq[0].type&&0===bS.eq[0].weight&&(e+=.05),"plate"===bS.eq[4].type&&0===bS.eq[4].weight&&(e+=.03),"plate"===bS.eq[6].type&&0===bS.eq[6].weight&&(e+=.05),"plate"===bS.eq[7].type&&0===bS.eq[7].weight&&(e+=.02),"plate"===bS.eq[8].type&&0===bS.eq[8].weight&&(e+=.02),"plate"===bS.eq[9].type&&0===bS.eq[9].weight&&(e+=.02),"plate"===bS.eq[10].type&&0===bS.eq[10].weight&&(e+=.03),"plate"===bS.eq[11].type&&0===bS.eq[11].weight&&(e+=.02)):"Monk"===Yy.job||"Druid"===Yy.job?("chain"===bS.eq[0].type&&0===bS.eq[0].weight&&(e+=.05),"chain"===bS.eq[4].type&&0===bS.eq[4].weight&&(e+=.03),"chain"===bS.eq[6].type&&0===bS.eq[6].weight&&(e+=.05),"chain"===bS.eq[7].type&&0===bS.eq[7].weight&&(e+=.02),"chain"===bS.eq[8].type&&0===bS.eq[8].weight&&(e+=.02),"chain"===bS.eq[9].type&&0===bS.eq[9].weight&&(e+=.02),"chain"===bS.eq[10].type&&0===bS.eq[10].weight&&(e+=.03),"chain"===bS.eq[11].type&&0===bS.eq[11].weight&&(e+=.02),"plate"===bS.eq[0].type&&(e+=.11,1===bS.eq[0].weight&&(e-=.06)),"plate"===bS.eq[4].type&&(e+=.07,1===bS.eq[4].weight&&(e-=.04)),"plate"===bS.eq[6].type&&(e+=.11,1===bS.eq[6].weight&&(e-=.06)),"plate"===bS.eq[7].type&&(e+=.05,1===bS.eq[7].weight&&(e-=.03)),"plate"===bS.eq[8].type&&(e+=.05,1===bS.eq[8].weight&&(e-=.03)),"plate"===bS.eq[9].type&&(e+=.05,1===bS.eq[9].weight&&(e-=.03)),"plate"===bS.eq[10].type&&(e+=.07,1===bS.eq[10].weight&&(e-=.04)),"plate"===bS.eq[11].type&&(e+=.05,1===bS.eq[11].weight&&(e-=.03))):"Necromancer"!==Yy.job&&"Enchanter"!==Yy.job&&"Magician"!==Yy.job&&"Wizard"!==Yy.job||("leather"===bS.eq[0].type&&0===bS.eq[0].weight&&(e+=.05),"leather"===bS.eq[4].type&&0===bS.eq[4].weight&&(e+=.03),"leather"===bS.eq[6].type&&0===bS.eq[6].weight&&(e+=.05),"leather"===bS.eq[7].type&&0===bS.eq[7].weight&&(e+=.02),"leather"===bS.eq[8].type&&0===bS.eq[8].weight&&(e+=.02),"leather"===bS.eq[9].type&&0===bS.eq[9].weight&&(e+=.02),"leather"===bS.eq[10].type&&0===bS.eq[10].weight&&(e+=.03),"leather"===bS.eq[11].type&&0===bS.eq[11].weight&&(e+=.02),"chain"===bS.eq[0].type&&(e+=.11,1===bS.eq[0].weight&&(e-=.06)),"chain"===bS.eq[4].type&&(e+=.07,1===bS.eq[4].weight&&(e-=.04)),"chain"===bS.eq[6].type&&(e+=.11,1===bS.eq[6].weight&&(e-=.06)),"chain"===bS.eq[7].type&&(e+=.05,1===bS.eq[7].weight&&(e-=.03)),"chain"===bS.eq[8].type&&(e+=.05,1===bS.eq[8].weight&&(e-=.03)),"chain"===bS.eq[9].type&&(e+=.05,1===bS.eq[9].weight&&(e-=.03)),"chain"===bS.eq[10].type&&(e+=.07,1===bS.eq[10].weight&&(e-=.04)),"chain"===bS.eq[11].type&&(e+=.05,1===bS.eq[11].weight&&(e-=.03)),"plate"===bS.eq[0].type&&(e+=.18,1===bS.eq[0].weight&&(e-=.07)),"plate"===bS.eq[4].type&&(e+=.12,1===bS.eq[4].weight&&(e-=.05)),"plate"===bS.eq[6].type&&(e+=.18,1===bS.eq[6].weight&&(e-=.07)),"plate"===bS.eq[7].type&&(e+=.09,1===bS.eq[7].weight&&(e-=.04)),"plate"===bS.eq[8].type&&(e+=.09,1===bS.eq[8].weight&&(e-=.04)),"plate"===bS.eq[9].type&&(e+=.09,1===bS.eq[9].weight&&(e-=.04)),"plate"===bS.eq[10].type&&(e+=.12,1===bS.eq[10].weight&&(e-=.05)),"plate"===bS.eq[11].type&&(e+=.09,1===bS.eq[11].weight&&(e-=.04))),e}function Z(e){return(e-=70)<0&&(e=0),e}function ee(){return dS.random()<Se()}function ae(){for(var e=zy.armorEquip,a=!1,n=0;n<=4;n++)Wy[n].conflagrationTicks>0&&(a=!0);!0===a&&(e*=.25);var t=3.5*Ee()+e+nk;return"Monk"===Yy.job&&(t=3.5*Ee()+1.5*e+nk),t<1&&(t=1),dS.round(t)}function ne(){var e=0,a=bS.eq[12];e=(e="slashed"===a.type?2.5*Ce():"cleaved"===a.type?2.5*Me():"pierced"===a.type?2.5*De():"punched"===a.type?2.5*Le():"crushed"===a.type?2.5*Te():2.5*Be())+1.5*He()+2.2*Z(te())+zy.attackEquip+ak,sS.Minotaur>=2&&(e+=15),sS.Friar>=2&&(e+=50),sS.HighPriest>=4&&(e+=150),sS.Warlock>=3&&(e+=125);var n=0;return!0===NC&&(n+=15,"Shaman"===Yy.job&&Yy.talent11>=1&&(n+=5.8*ra()/100*15)),"Bard"===Yy.job&&!0===zM&&(n+=1.68*Je()),sS.Crusader>=6&&cM&&(n+=30),e+=e*(n/100),dS.round(e)}function te(){var e=Yy.str+zy.strEquip+Oy+zy.allStatsEquip;return e<1&&(e=1),e}function ie(){var e=Yy.sta+zy.staEquip+Xy+zy.allStatsEquip;return e<1&&(e=1),e}function oe(){var e=Yy.agi+zy.agiEquip+Uy+zy.allStatsEquip;return e<1&&(e=1),e}function re(){var e=Yy.dex+zy.dexEquip+$y+zy.allStatsEquip;return e<1&&(e=1),e}function le(){var e=Yy.wis+zy.wisEquip+_y+zy.allStatsEquip;return e<1&&(e=1),e}function se(){var e=Yy.intel+zy.intelEquip+Vy+zy.allStatsEquip;return e<1&&(e=1),e}function de(){var e=Yy.cha+zy.chaEquip+Jy+zy.allStatsEquip;return e<1&&(e=1),e}function ce(){var e=Yy.svpoison+zy.resistPoisonEquip+ik+zy.allResistEquip;return e>0&&(Wy[0].name&&!0===Wy[0].convictionAura||Wy[1].name&&!0===Wy[1].convictionAura||Wy[2].name&&!0===Wy[2].convictionAura||Wy[3].name&&!0===Wy[3].convictionAura||Wy[4].name&&!0===Wy[4].convictionAura)&&(e*=.5),e>300&&(e=300),iC&&(e=350),dS.round(e)}function me(){var e=Yy.svmagic+zy.resistMagicEquip+ok+zy.allResistEquip;e>0&&(Wy[0].name&&!0===Wy[0].convictionAura||Wy[1].name&&!0===Wy[1].convictionAura||Wy[2].name&&!0===Wy[2].convictionAura||Wy[3].name&&!0===Wy[3].convictionAura||Wy[4].name&&!0===Wy[4].convictionAura)&&(e*=.5);var a=300;return"Bard"===Yy.job&&Yy.talent6>=20&&(a=340),e>a&&(e=a),iC&&(e=350),dS.round(e)}function ue(){var e=Yy.svlightning+zy.resistLightningEquip+rk+zy.allResistEquip;e>0&&(Wy[0].name&&!0===Wy[0].convictionAura||Wy[1].name&&!0===Wy[1].convictionAura||Wy[2].name&&!0===Wy[2].convictionAura||Wy[3].name&&!0===Wy[3].convictionAura||Wy[4].name&&!0===Wy[4].convictionAura)&&(e*=.5);var a=300;return"Bard"===Yy.job&&Yy.talent6>=20&&(a=340),e>a&&(e=a),iC&&(e=350),dS.round(e)}function fe(){var e=Yy.svcold+zy.resistColdEquip+lk+zy.allResistEquip;e>0&&(Wy[0].name&&!0===Wy[0].convictionAura||Wy[1].name&&!0===Wy[1].convictionAura||Wy[2].name&&!0===Wy[2].convictionAura||Wy[3].name&&!0===Wy[3].convictionAura||Wy[4].name&&!0===Wy[4].convictionAura)&&(e*=.5);var a=300;return"Bard"===Yy.job&&Yy.talent6>=20&&(a=340),e>a&&(e=a),iC&&(e=350),dS.round(e)}function he(){var e=Yy.svfire+zy.resistFireEquip+sk+zy.allResistEquip;e>0&&(Wy[0].name&&!0===Wy[0].convictionAura||Wy[1].name&&!0===Wy[1].convictionAura||Wy[2].name&&!0===Wy[2].convictionAura||Wy[3].name&&!0===Wy[3].convictionAura||Wy[4].name&&!0===Wy[4].convictionAura)&&(e*=.5);var a=300;return"Bard"===Yy.job&&Yy.talent6>=20&&(a=340),e>a&&(e=a),iC&&(e=350),dS.round(e)}function ge(e){var a=0,n=0;return e<-.3&&e>=-.8?(n=e-(a=-.3),a+=n*=.5):e<-.8&&e>=-1.3?(a=-.55,n=e+.8,a+=n*=.2):e<-1.3?(a=-.65,n=e+1.3,a+=n*=.1):a=e,a<-.8&&(a=-.8),a}function pe(){var e=ve(),a=bS.eq[12].delay*(e+1);return a<nI&&(a=nI),!0===JC&&(a=500),a}function be(){var e=ve(),a=bS.eq[13].delay*(e+1);return a<nI&&(a=nI),!0===JC&&(a=500),a}function ve(e){var a=(tk+zy.hasteEquip)/1e3;return!0===uB&&(a-=.4),"Cleric"===Yy.job&&!0===yT&&(a-=1.6*na()/100),"Shaman"===Yy.job&&!0===KT&&(a-=1.75*ia()/100),!0===Lk&&"Bard"===Yy.job&&(a=~~(1.5*a)),!0===OI&&(a/=2),e?a:a=ge(a)}function ye(e){var a=(dk+zy.globalHasteEquip)/1e3;"Paladin"===Yy.job?Yy.talent8>=20&&(a-=.2):"Ranger"===Yy.job&&Yy.talent10>=20&&(a-=.75*oa()/100),e||(a=ge(a));var n=1500*zy.speed*(a+1);n*=J();for(var t,i=100,o=0;o<=4;o++)Wy[o].name&&1==Wy[o].concussiveAura&&!1===Wy[o].charmStatus&&(t=1);return t&&(i+=30),!0===OI&&(i+=30),i>150&&(i=150),n*=i/100}function ke(e,a){e*=zy.speed;var n=(ck+zy.castingHasteEquip)/1e3;!0===II&&(e*=.4),"Cleric"===Yy.job?(Yy.talent2>=1&&(n-=1.4*Ue()/100),!0===GT&&(e/=2)):"Enchanter"===Yy.job?Yy.talent10>=20&&(n-=.35):"Magician"===Yy.job?Yy.talent11>=20&&(n-=.35):"Wizard"===Yy.job&&Yy.talent9>=20&&(n-=.35),a||(n=ge(n));var t=e*(n+1);J();t*=J();for(var i=!1,o=0;o<=4;o++)Wy[o].name&&1==Wy[o].disruptionAura&&!1===Wy[o].charmStatus&&(i=!0);return 1==i&&(t*=1.3),t}function Se(e){var a=zy.critChanceEquip/100;return a+=.05+Z(re())/800,Kw&&(a+=.5),e?100*a:a=function(e){var a=0,n=0;return e>.3&&e<=.8?(n=e-(a=.3),a+=n*=.5):e>.8&&e<=1.3?(n=e-(a=.55),a+=n*=.2):e>1.3?(n=e-(a=.65),a+=n*=.1):a=e,a>.8&&(a=.8),a}(a)+zy.coldBloodBonus}function Ie(){var e=dS.round(Z(oe())/9);return e+=mk+zy.phyMitEquip}function we(){var e=dS.round(Z(le())/11);return e+=uk+zy.magMitEquip}function Ce(){var e=Yy.oneHandSlash;return e>0&&(e+=zy.oneHandSlashEquip+zy.allSkillsEquip),e}function Me(){var e=Yy.twoHandSlash;return e>0&&(e+=zy.twoHandSlashEquip+zy.allSkillsEquip),e}function Te(){var e=Yy.oneHandBlunt;return e>0&&(e+=zy.oneHandBluntEquip+zy.allSkillsEquip),e}function Be(){var e=Yy.twoHandBlunt;return e>0&&(e+=zy.twoHandBluntEquip+zy.allSkillsEquip),e}function De(){var e=Yy.piercing;return e>0&&(e+=zy.piercingEquip+zy.allSkillsEquip,sS.Martyr>=2&&(e+=6)),e}function Le(){var e=Yy.handtohand;return e>0&&(e+=zy.handtohandEquip+zy.allSkillsEquip),e}function He(){var e=Yy.offense;return e>0&&(e+=zy.offenseEquip+zy.allSkillsEquip),e}function Ae(){var e=Yy.dualWield;return e>0&&(e+=zy.dualWieldEquip+zy.allSkillsEquip),e}function xe(){var e=Yy.doubleAttack;return e>0&&(e+=zy.doubleAttackEquip+zy.allSkillsEquip),e}function Ee(){var e=Yy.defense;e>0&&(e+=zy.defenseEquip+zy.allSkillsEquip);for(var a=!1,n=0;n<=4;n++)Wy[n].name&&!0===Wy[n].shreddingAura&&!1===Wy[n].charmStatus&&(a=!0);return 1==a&&(e=~~(.2*e)),e}function Ge(){var e=Yy.dodge;return e>0&&(e+=zy.dodgeEquip+zy.allSkillsEquip),e}function qe(){var e=Yy.parry;return e>0&&(e+=zy.parryEquip+zy.allSkillsEquip),e}function Pe(){var e=Yy.riposte;return e>0&&(e+=zy.riposteEquip+zy.allSkillsEquip),e}function Qe(){var e=Yy.alteration;return e>0&&(e+=zy.alterationEquip+zy.allSkillsEquip),e}function Re(){var e=Yy.evocation;return e>0&&(e+=zy.evocationEquip+zy.allSkillsEquip),e}function Fe(){var e=Yy.conjuration;return e>0&&(e+=zy.conjurationEquip+zy.allSkillsEquip),e}function Ne(){var e=Yy.abjuration;return e>0&&(e+=zy.abjurationEquip+zy.allSkillsEquip),e}function je(){var e=Yy.channeling;return e>0&&(e+=zy.channelingEquip+zy.allSkillsEquip),e}function ze(e,a){var n="";return"eq"===e&&(n=bS.eq[a]),"item"===e&&(n=bS.item[a]),"bank"===e&&(n=bS.bank[a]),"neck"===n.itemSlot?"Necklace":"ring"===n.itemSlot?"Ring":"helmet"===n.itemSlot?"Helmet":"shoulders"===n.itemSlot?"Shoulders":"back"===n.itemSlot?"Back":"chest"===n.itemSlot?"Chest":"bracers"===n.itemSlot?"Bracers":"gloves"===n.itemSlot?"Gloves":"belt"===n.itemSlot?"Belt":"legs"===n.itemSlot?"Legs":"boots"===n.itemSlot?"Boots":"weapons"===n.itemSlot?"Weapon":"shield"===n.itemSlot?"shield"===n.type?"Shield":"Spellcaster Off-Hand":"range"===n.itemSlot?"range"===n.type?"Bow":"Trinket":void 0}function Ye(){if(Yy.dodge>0){var e=(3+Ge()/25)*(1+Z(oe())/330);return"Rogue"===Yy.job&&Yy.talent9>=20&&(e+=8),e}return 0}function Ke(){if(Yy.parry>0){var e=(3+dualWieldBonus+qe()/25)*(1+Z(oe())/330);return"Ranger"===Yy.job&&Yy.talent3>=20&&(e+=12),e}return 0}function We(){if(Yy.riposte>0){var e=(3+dualWieldBonus+Pe()/25)*(1+Z(oe())/330);return"Ranger"===Yy.job&&Yy.talent3>=20&&(e+=12),e}return 0}function Oe(e){var a=0;if("shield"===bS.eq[13].type||e!==E){if(e!==E)n=e;else var n=bS.eq[13].yPos;a=.1,-64===n&&(a=.12),-128===n&&(a=.14),-192===n&&(a=.16),-256===n&&(a=.18),-320===n&&(a=.2),-384===n&&(a=.22),-448===n&&(a=.24)}return sS.Sorcerer>=6&&(a=.2),a}function Xe(){var e=0;if(Yy.dualWield>0){var a=bS.eq[12].type;e="smashed"===a||"crushed"===a?0:5}return e}function Ve(){if(Yy.dualWield>0){var e=1+.27*Ae();return"Ranger"===Yy.job&&Yy.talent11>=20&&(e+=12),e>100&&(e=100),e}return 0}function _e(){if(Yy.doubleAttack>0){var e=1+.16*xe();return"Ranger"===Yy.job&&Yy.talent11>=20&&(e+=12),e>100&&(e=100),e}return 0}function $e(){var e=Yy.talent1;return e>0&&(Yy.talent2>=20&&e++,Yy.talent3>=20&&e++,Yy.talent4>=20&&(e+=2)),e}function Ue(){var e=Yy.talent2;return e>0&&(Yy.talent1>=20&&e++,Yy.talent3>=20&&e++,Yy.talent4>=20&&(e+=2)),e}function Je(){var e=Yy.talent3;return e>0&&(Yy.talent1>=20&&e++,Yy.talent2>=20&&e++,Yy.talent4>=20&&(e+=2)),e}function Ze(){var e=Yy.talent4;return e>0&&(Yy.talent1>=20&&e++,Yy.talent2>=20&&e++,Yy.talent3>=20&&(e+=2)),e}function ea(){var e=Yy.talent5;return e>0&&(Yy.talent6>=20&&e++,Yy.talent7>=20&&e++,Yy.talent8>=20&&(e+=2)),e}function aa(){var e=Yy.talent6;return e>0&&(Yy.talent5>=20&&e++,Yy.talent7>=20&&e++,Yy.talent8>=20&&(e+=2)),e}function na(){var e=Yy.talent7;return e>0&&(Yy.talent5>=20&&e++,Yy.talent6>=20&&e++,Yy.talent8>=20&&(e+=2)),e}function ta(){var e=Yy.talent8;return e>0&&(Yy.talent5>=20&&e++,Yy.talent6>=20&&e++,Yy.talent7>=20&&(e+=2)),e}function ia(){var e=Yy.talent9;return e>0&&(Yy.talent10>=20&&e++,Yy.talent11>=20&&e++,Yy.talent12>=20&&(e+=2)),e}function oa(){var e=Yy.talent10;return e>0&&(Yy.talent9>=20&&e++,Yy.talent11>=20&&e++,Yy.talent12>=20&&(e+=2)),e}function ra(){var e=Yy.talent11;return e>0&&(Yy.talent9>=20&&e++,Yy.talent10>=20&&e++,Yy.talent12>=20&&(e+=2)),e}function la(){var e=Yy.talent12;return e>0&&(Yy.talent9>=20&&e++,Yy.talent10>=20&&e++,Yy.talent11>=20&&(e+=2)),e}function sa(){return zy.difficulty-1}function da(){for(var e=0;e<=2;e++)bS.Q[e]={ButcherblockMountains:0,CastleMistmoore:0,Crushbone:0,DagnorsCauldron:0,EstateofUnrest:0,GreaterFaydark:0,KedgeKeep:0,LesserFaydark:0,SteamfontMountains:0,Befallen:0,Beholders:0,Blackburrow:0,CazicThule:0,ClanRunnyeye:0,EastCommonlands:0,EastKarana:0,EverfrostPeaks:0,HighpassHold:0,InnothuleSwamp:0,KithicorForest:0,LakeRathetear:0,LavastormMountains:0,LowerGuk:0,MistyThicket:0,NagafensLair:0,Najena:0,NektulosForest:0,NorthKarana:0,NorthRo:0,OasisofMarr:0,OceanofTears:0,PermafrostKeep:0,QeynosHills:0,RatheMountains:0,SouthKarana:0,SouthRo:0,SoluseksEye:0,SplitpawLair:0,TheFeerrott:0,UpperGuk:0,WestCommonlands:0,WestKarana:0,ErudsCrossing:0,ToxxuliaForest:0,PlaneofFear:0,PlaneofHate:0,repeatCm3:0,repeatCt3:0,repeatKk3:0,repeatNl3:0,repeatLg3:0,repeatKk4:0,repeatNl4:0,repeatPk4:0,repeatCB:0,repeatER:0,CM1:0,CM2:0,CM3:0,CM4:0,CM5:0,CM6:0,CB1:0,CB2:0,CB3:0,CB4:0,CB5:0,ER1:0,ER2:0,ER3:0,ER4:0,ER5:0,GF1:0,KK1:0,KK2:0,KK3:0,KK4:0,KK5:0,KK6:0,KK7:0,KK8:0,LF1:0,LF2:0,BF1:0,BF2:0,BF3:0,BF4:0,BB1:0,BB2:0,BB3:0,BB4:0,CT1:0,CT2:0,CT3:0,CT4:0,CT5:0,LG1:0,LG2:0,LG3:0,LG4:0,LG5:0,LG6:0,NL1:0,NL2:0,NL3:0,NL4:0,NL5:0,NL6:0,NL7:0,NL8:0,NL9:0,NL10:0,NL11:0,NL12:0,NJ1:0,NJ2:0,NJ3:0,NJ4:0,NJ5:0,NR1:0,NR2:0,PF1:0,PF2:0,PF3:0,PF4:0,PF5:0,PF6:0,PF7:0,PF8:0,PF9:0,PF10:0,PF11:0,PF12:0,PF13:0,PF14:0,PF15:0,PF16:0,PF17:0,PF18:0,PF19:0,PF20:0,PF21:0,PF22:0,PH1:0,PH2:0,PH3:0,PH4:0,PH5:0,PH6:0,PH7:0,PH8:0,PH9:0,PH10:0,PH11:0,PH12:0,PH13:0,PK1:0,PK2:0,PK3:0,PK4:0,PK5:0,PK6:0,PK7:0,PK8:0,PK9:0,UG1:0,UG2:0,UG3:0,UG4:0}}function ca(){var e=zy.difficulty-1;bS.Q[e].CB4<2&&(bS.Q[e].CB4=0),bS.Q[e].CB5<2&&(bS.Q[e].CB5=0),3===bS.Q[e].Najena&&(bS.Q[e].NJ4<2&&(bS.Q[e].NJ4=0),bS.Q[e].NJ5<2&&(bS.Q[e].NJ5=0)),2===bS.Q[e].CazicThule&&(bS.Q[e].CT4<2&&(bS.Q[e].CT4=0),bS.Q[e].CT5<2&&(bS.Q[e].CT5=0)),bS.Q[e].CastleMistmoore>=3&&(bS.Q[e].CM5<2&&(bS.Q[e].CM5=0),bS.Q[e].CM6<2&&(bS.Q[e].CM6=0)),bS.Q[e].LowerGuk<2&&(bS.Q[e].LG4<2&&(bS.Q[e].LG4=0),bS.Q[e].LG5<2&&(bS.Q[e].LG5=0)),2===bS.Q[e].LowerGuk&&(bS.Q[e].LG5<2&&(bS.Q[e].LG5=0),bS.Q[e].LG6<2&&(bS.Q[e].LG6=0)),bS.Q[e].LowerGuk>=3&&(bS.Q[e].LG4<2&&(bS.Q[e].LG4=0),bS.Q[e].LG5<2&&(bS.Q[e].LG5=0)),1===bS.Q[e].NagafensLair&&(bS.Q[e].NL5<2&&(bS.Q[e].NL5=0),bS.Q[e].NL6<2&&(bS.Q[e].NL6=0)),2===bS.Q[e].NagafensLair&&(bS.Q[e].NL4<2&&(bS.Q[e].NL4=0),bS.Q[e].NL5<2&&(bS.Q[e].NL5=0)),bS.Q[e].NagafensLair>=4&&(bS.Q[e].NL9<2&&(bS.Q[e].NL9=0),bS.Q[e].NL10<2&&(bS.Q[e].NL10=0),bS.Q[e].NL11<2&&(bS.Q[e].NL11=0)),3===bS.Q[e].PermafrostKeep&&(bS.Q[e].PK4<2&&(bS.Q[e].PK4=0),bS.Q[e].PK5<2&&(bS.Q[e].PK5=0)),bS.Q[e].PermafrostKeep>=4&&(bS.Q[e].PK7<2&&(bS.Q[e].PK7=0),bS.Q[e].PK8<2&&(bS.Q[e].PK8=0)),bS.Q[e].KedgeKeep>=3&&(bS.Q[e].KK4<2&&(bS.Q[e].KK4=0),bS.Q[e].KK5<2&&(bS.Q[e].KK5=0))}function ma(){Lmy={autoAttackOption:"On",normalFilter:"None",magicFilter:"None",rareFilter:"None",uniqueFilter:"None",setFilter:"None",C0:"",C1:"",C2:"",C3:"",C4:"",C5:"",C6:"",C7:"",C8:"",C9:"",C10:"",C11:"",C12:"",C13:"",C14:"",C15:"",C16:"",C17:"",C18:"",C19:"",C20:"",window3X:0,window3Y:603,chatIdX:0,chatIdY:0,window1X:20,window1Y:20,questJournalX:20,questJournalY:20,battleReportX:490,battleReportY:0,myhpbardivX:5,myhpbardivY:5,spellbardivX:593,spellbardivY:580,mobBarX:394,mobBarY:0,pethpbardivX:5,pethpbardivY:120}}function ua(){NG={mymp:mS.getElementById("mymp"),myhp:mS.getElementById("myhp"),myexpbarvalue:mS.getElementById("myexpbarvalue"),errorMsg:mS.getElementById("errorMsg"),chatId:mS.getElementById("chatId"),combatId:mS.getElementById("combatId"),myexpbarId:mS.getElementById("myexpbarId"),gameView:mS.getElementById("gameView"),window2:mS.getElementById("window2"),mob0:mS.getElementById("mob0"),mob1:mS.getElementById("mob1"),mob2:mS.getElementById("mob2"),mob3:mS.getElementById("mob3"),mob4:mS.getElementById("mob4"),mob5:mS.getElementById("mob5"),eWin:mS.getElementById("eWin"),eWin2:mS.getElementById("eWin2"),eWin3:mS.getElementById("eWin3"),cWin:mS.getElementById("cWin"),cWin2:mS.getElementById("cWin2"),cWin3:mS.getElementById("cWin3"),window2:mS.getElementById("window2"),window1:mS.getElementById("window1"),spellblind:mS.getElementById("spellblind"),statContent:mS.getElementById("statContent"),mobTraits:mS.getElementById("mobTraits"),eWin2:mS.getElementById("eWin2"),ttBank:mS.getElementById("ttBank"),ttBankName:mS.getElementById("ttBankName"),chat1:mS.getElementById("chat1"),chat2:mS.getElementById("chat2"),ttBankMsg:mS.getElementById("ttBankMsg"),ttItem:mS.getElementById("ttItem"),ttItemName:mS.getElementById("ttItemName"),ttItemMsg:mS.getElementById("ttItemMsg"),mobIcons0:mS.getElementById("mobIcons0"),mobIcons1:mS.getElementById("mobIcons1"),mobIcons2:mS.getElementById("mobIcons2"),mobIcons3:mS.getElementById("mobIcons3"),mobIcons4:mS.getElementById("mobIcons4"),tooltip:mS.getElementById("tooltip"),tooltipname:mS.getElementById("tooltipname"),tooltipmsg:mS.getElementById("tooltipmsg"),chatId:mS.getElementById("chatId"),combatId:mS.getElementById("combatId"),combatLog:mS.getElementById("combatLog"),chatLog:mS.getElementById("chatLog"),myexpbarId:mS.getElementById("myexpbarId"),spellbardiv:mS.getElementById("spellbardiv"),petImage:mS.getElementById("petImage"),mobBar:mS.getElementById("mobBar"),mobName:mS.getElementById("mobName"),mobLevel:mS.getElementById("mobLevel"),mobPlate:mS.getElementById("mobPlate"),myhpbardiv:mS.getElementById("myhpbardiv"),chaosflux:ba("chaosflux"),gaspingembrace:ba("gaspingembrace"),cajolingwhispers:ba("cajolingwhispers"),colorshift:ba("colorshift"),mesmerize:ba("mesmerize"),discordantbarrier:ba("discordantbarrier"),shiftlessdeeds:ba("shiftlessdeeds"),enchantweapon:ba("enchantweapon"),adorninggrace:ba("adorninggrace"),alacrity:ba("alacrity"),gravityflux:ba("gravityflux"),mysticrune:ba("mysticrune"),tashania:ba("tashania"),clarity:ba("clarity"),enthrall:ba("enthrall"),chargedbolts:ba("chargedbolts"),frostnova:ba("frostnova"),magicmissiles:ba("magicmissiles"),fireball:ba("fireball"),deepfreeze:ba("deepfreeze"),chainlightning:ba("chainlightning"),glacialspike:ba("glacialspike"),iceblock:ba("iceblock"),icecomet:ba("icecomet"),counterspell:ba("counterspell"),harnessEther:ba("harnessEther"),meteor:ba("meteor"),mirrorimages:ba("mirrorimages"),icebolt:ba("icebolt"),viziersshielding:ba("viziersshielding"),firestorm:ba("firestorm"),frozenorb:ba("frozenorb"),burnout:ba("burnout"),manashield:ba("manashield"),psionicstorm:ba("psionicstorm"),reclaimelements:ba("reclaimelements"),elementalfury:ba("elementalfury"),armageddon:ba("armageddon"),stasisfield:ba("stasisfield"),alteredstate:ba("alteredstate"),lavabolt:ba("lavabolt"),earthelemental:ba("earthelemental"),airelemental:ba("airelemental"),fireelemental:ba("fireelemental"),frostelemental:ba("frostelemental"),shieldoflava:ba("shieldoflava"),phantomplate:ba("phantomplate"),elementalarmor:ba("elementalarmor"),cascadingdarkness:ba("cascadingdarkness"),invokefear:ba("invokefear"),drainsoul:ba("drainsoul"),feigndeath:ba("feigndeath"),augmentdeath:ba("augmentdeath"),igniteblood:ba("igniteblood"),corpseexplosion:ba("corpseexplosion"),bondofdeath:ba("bondofdeath"),diamondskin:ba("diamondskin"),asystole:ba("asystole"),detonatesoul:ba("detonatesoul"),howlingterror:ba("howlingterror"),bonespirit:ba("bonespirit"),archshielding:ba("archshielding"),feigndeath:ba("feigndeath"),invokedeath:ba("invokedeath"),scourge:ba("scourge"),shmhealing:ba("shmhealing"),togorsinsects:ba("togorsinsects"),cannibalize:ba("cannibalize"),enstill:ba("enstill"),poisonnova:ba("poisonnova"),affliction:ba("affliction"),reclaimblood:ba("reclaimblood"),glacialimpact:ba("glacialimpact"),devouringplague:ba("devouringplague"),froststrike:ba("froststrike"),calloftheancients:ba("calloftheancients"),guardianspirit:ba("guardianspirit"),shmsow:ba("shmsow"),talismanofaltuna:ba("talismanofaltuna"),smite:ba("smite"),soundofforce:ba("soundofforce"),superiorhealing:ba("superiorhealing"),bindingearth:ba("bindingearth"),expelcorruption:ba("expelcorruption"),searingrevelation:ba("searingrevelation"),martyrsblessing:ba("martyrsblessing"),guardianangel:ba("guardianangel"),holywrath:ba("holywrath"),markofjudgement:ba("markofjudgement"),benediction:ba("benediction"),resolution:ba("resolution"),armoroffaith:ba("armoroffaith"),divinesanctuary:ba("divinesanctuary"),symbolofnaltron:ba("symbolofnaltron"),dronesofdoom:ba("dronesofdoom"),druhealing:ba("druhealing"),engulfingroots:ba("engulfingroots"),driftingdeath:ba("driftingdeath"),lightningblast:ba("lightningblast"),earthquake:ba("earthquake"),hurricane:ba("hurricane"),sylvangrasp:ba("sylvangrasp"),volcano:ba("volcano"),tornado:ba("tornado"),starfire:ba("starfire"),skinlikenature:ba("skinlikenature"),shieldofspikes:ba("shieldofspikes"),chloroplast:ba("chloroplast"),drusow:ba("drusow"),chordsofdissonance:ba("chordsofdissonance"),chantofbattle:ba("chantofbattle"),accelerando:ba("accelerando"),hymnofrestoration:ba("hymnofrestoration"),songofthesirens:ba("songofthesirens"),elementalrhythms:ba("elementalrhythms"),lucidlullaby:ba("lucidlullaby"),consonantchain:ba("consonantchain"),dissension:ba("dissension"),chorusofclarity:ba("chorusofclarity"),anthemdearms:ba("anthemdearms"),euphonichymn:ba("euphonichymn"),shieldofsongs:ba("shieldofsongs"),desperatedirge:ba("desperatedirge"),boastfulbellow:ba("boastfulbellow"),rangerkickId:ba("rangerkickId"),rapidshotId:ba("rapidshotId"),countershotId:ba("countershotId"),trueshotarrowId:ba("trueshotarrowId"),volleyshotId:ba("volleyshotId"),lighthealingId:ba("lighthealingId"),faerieflameId:ba("faerieflameId"),igniteId:ba("igniteId"),snareId:ba("snareId"),wardersrift:ba("wardersrift"),weaponshieldId:ba("weaponshieldId"),shieldofbramblesId:ba("shieldofbramblesId"),thistlecoatId:ba("thistlecoatId"),feetlikecatId:ba("feetlikecatId"),rangersowId:ba("rangersowId"),rangertrackId:ba("rangertrackId"),shdslamId:ba("shdslamId"),crescentcleaveId:ba("crescentcleaveId"),deathstrikeId:ba("deathstrikeId"),gaspingfrenzyId:ba("gaspingfrenzyId"),harmtouchId:ba("harmtouchId"),resistcoldId:ba("resistcoldId"),addmonsterId:ba("addmonsterId"),shdlifetapId:ba("shdlifetapId"),doomingdarknessId:ba("doomingdarknessId"),heatbloodId:ba("heatbloodId"),strengthendeadId:ba("strengthendeadId"),shdfearId:ba("shdfearId"),siphonstrengthId:ba("siphonstrengthId"),shdfeigndeathId:ba("shdfeigndeathId"),shadowvortexId:ba("shadowvortexId"),shdfeigndeathId:ba("shdfeigndeathId"),vampiricembraceId:ba("vampiricembraceId"),summondeadId:ba("summondeadId"),palslamId:ba("palslamId"),rebukeId:ba("rebukeId"),purgeId:ba("purgeId"),vengeanceId:ba("vengeanceId"),layhandsId:ba("layhandsId"),greaterhealingId:ba("greaterhealingId"),holymightId:ba("holymightId"),palrootId:ba("palrootId"),ardentjudgment:ba("ardentjudgment"),yaulpId:ba("yaulpId"),cleanseId:ba("cleanseId"),flashoflightId:ba("flashoflightId"),valorId:ba("valorId"),spiritarmorId:ba("spiritarmorId"),divineprovidenceId:ba("divineprovidenceId"),symbolofryltanId:ba("symbolofryltanId"),tigerstrikeId:ba("tigerstrikeId"),eaglestrikeId:ba("eaglestrikeId"),cheetahstrikeId:ba("cheetahstrikeId"),cobrastrikeId:ba("cobrastrikeId"),dragonstrikeId:ba("dragonstrikeId"),cranekickId:ba("cranekickId"),windmillkickId:ba("windmillkickId"),ancestralflurryId:ba("ancestralflurryId"),flyingkickId:ba("flyingkickId"),chakrablastId:ba("chakrablastId"),feigndeathId:ba("feigndeathId"),mendId:ba("mendId"),stonefistsId:ba("stonefistsId"),intimidationId:ba("intimidationId"),innerpeaceId:ba("innerpeaceId"),shadowstrikeId:ba("shadowstrikeId"),sonicstrikeId:ba("sonicstrikeId"),hyperstrikeId:ba("hyperstrikeId"),widowstrikeId:ba("widowstrikeId"),miragestrikeId:ba("miragestrikeId"),lacerateId:ba("lacerateId"),backstabId:ba("backstabId"),staggershotId:ba("staggershotId"),lobotomizeId:ba("lobotomizeId"),prowlinggashId:ba("prowlinggashId"),evadeId:ba("evadeId"),coldbloodId:ba("coldbloodId"),flashpowderId:ba("flashpowderId"),illusivemistId:ba("illusivemistId"),ancientwillId:ba("ancientwillId"),warriorkickId:ba("warriorkickId"),slamId:ba("slamId"),avengingstrikeId:ba("avengingstrikeId"),hemorrhageId:ba("hemorrhageId"),shockwaveId:ba("shockwaveId"),pummelId:ba("pummelId"),subjugateId:ba("subjugateId"),decisiveblowId:ba("decisiveblowId"),absorbspellId:ba("absorbspellId"),frenziedrampageId:ba("frenziedrampageId"),enrageId:ba("enrageId"),furiousscornId:ba("furiousscornId"),triageId:ba("triageId"),bulwarkId:ba("bulwarkId"),intrepidmightId:ba("intrepidmightId"),secondwindId:ba("secondwindId"),divineaegisId:ba("divineaegisId"),ancestralrampageId:ba("ancestralrampageId"),tunaresglowId:ba("tunaresglowId"),karanasinfusionId:ba("karanasinfusionId"),sanguinetormentId:ba("sanguinetormentId"),granitevisageId:ba("granitevisageId"),shortcircuitId:ba("shortcircuitId"),runId:ba("runId"),toggleattackId:ba("toggleattackId"),addmonsterId:ba("addmonsterId")},$NG={window3:e("#window3"),gameView:e("#gameView"),toggleattackId:e("#toggleattackId"),chaosflux:e("#chaosflux"),gaspingembrace:e("#gaspingembrace"),cajolingwhispers:e("#cajolingwhispers"),colorshift:e("#colorshift"),mesmerize:e("#mesmerize"),discordantbarrier:e("#discordantbarrier"),shiftlessdeeds:e("#shiftlessdeeds"),enchantweapon:e("#enchantweapon"),adorninggrace:e("#adorninggrace"),alacrity:e("#alacrity"),gravityflux:e("#gravityflux"),mysticrune:e("#mysticrune"),tashania:e("#tashania"),clarity:e("#clarity"),enthrall:e("#enthrall"),chargedbolts:e("#chargedbolts"),frostnova:e("#frostnova"),magicmissiles:e("#magicmissiles"),fireball:e("#fireball"),deepfreeze:e("#deepfreeze"),chainlightning:e("#chainlightning"),glacialspike:e("#glacialspike"),iceblock:e("#iceblock"),icecomet:e("#icecomet"),counterspell:e("#counterspell"),harnessEther:e("#harnessEther"),meteor:e("#meteor"),mirrorimages:e("#mirrorimages"),icebolt:e("#icebolt"),viziersshielding:e("#viziersshielding"),firestorm:e("#firestorm"),frozenorb:e("#frozenorb"),burnout:e("#burnout"),manashield:e("#manashield"),psionicstorm:e("#psionicstorm"),reclaimelements:e("#reclaimelements"),elementalfury:e("#elementalfury"),armageddon:e("#armageddon"),stasisfield:e("#stasisfield"),alteredstate:e("#alteredstate"),lavabolt:e("#lavabolt"),earthelemental:e("#earthelemental"),airelemental:e("#airelemental"),fireelemental:e("#fireelemental"),frostelemental:e("#frostelemental"),shieldoflava:e("#shieldoflava"),phantomplate:e("#phantomplate"),elementalarmor:e("#elementalarmor"),cascadingdarkness:e("#cascadingdarkness"),invokefear:e("#invokefear"),drainsoul:e("#drainsoul"),feigndeath:e("#feigndeath"),augmentdeath:e("#augmentdeath"),igniteblood:e("#igniteblood"),corpseexplosion:e("#corpseexplosion"),bondofdeath:e("#bondofdeath"),diamondskin:e("#diamondskin"),asystole:e("#asystole"),detonatesoul:e("#detonatesoul"),howlingterror:e("#howlingterror"),bonespirit:e("#bonespirit"),archshielding:e("#archshielding"),feigndeath:e("#feigndeath"),invokedeath:e("#invokedeath"),scourge:e("#scourge"),shmhealing:e("#shmhealing"),togorsinsects:e("#togorsinsects"),cannibalize:e("#cannibalize"),enstill:e("#enstill"),poisonnova:e("#poisonnova"),affliction:e("#affliction"),reclaimblood:e("#reclaimblood"),glacialimpact:e("#glacialimpact"),devouringplague:e("#devouringplague"),froststrike:e("#froststrike"),calloftheancients:e("#calloftheancients"),guardianspirit:e("#guardianspirit"),shmsow:e("#shmsow"),talismanofaltuna:e("#talismanofaltuna"),smite:e("#smite"),soundofforce:e("#soundofforce"),superiorhealing:e("#superiorhealing"),bindingearth:e("#bindingearth"),expelcorruption:e("#expelcorruption"),searingrevelation:e("#searingrevelation"),martyrsblessing:e("#martyrsblessing"),guardianangel:e("#guardianangel"),holywrath:e("#holywrath"),markofjudgement:e("#markofjudgement"),benediction:e("#benediction"),resolution:e("#resolution"),armoroffaith:e("#armoroffaith"),divinesanctuary:e("#divinesanctuary"),symbolofnaltron:e("#symbolofnaltron"),dronesofdoom:e("#dronesofdoom"),druhealing:e("#druhealing"),engulfingroots:e("#engulfingroots"),driftingdeath:e("#driftingdeath"),lightningblast:e("#lightningblast"),earthquake:e("#earthquake"),hurricane:e("#hurricane"),sylvangrasp:e("#sylvangrasp"),volcano:e("#volcano"),tornado:e("#tornado"),starfire:e("#starfire"),skinlikenature:e("#skinlikenature"),shieldofspikes:e("#shieldofspikes"),chloroplast:e("#chloroplast"),drusow:e("#drusow"),chordsofdissonance:e("#chordsofdissonance"),chantofbattle:e("#chantofbattle"),accelerando:e("#accelerando"),hymnofrestoration:e("#hymnofrestoration"),songofthesirens:e("#songofthesirens"),elementalrhythms:e("#elementalrhythms"),lucidlullaby:e("#lucidlullaby"),consonantchain:e("#consonantchain"),dissension:e("#dissension"),chorusofclarity:e("#chorusofclarity"),anthemdearms:e("#anthemdearms"),euphonichymn:e("#euphonichymn"),shieldofsongs:e("#shieldofsongs"),desperatedirge:e("#desperatedirge"),boastfulbellow:e("#boastfulbellow"),rangerkickId:e("#rangerkickId"),rapidshotId:e("#rapidshotId"),countershotId:e("#countershotId"),trueshotarrowId:e("#trueshotarrowId"),volleyshotId:e("#volleyshotId"),lighthealingId:e("#lighthealingId"),faerieflameId:e("#faerieflameId"),igniteId:e("#igniteId"),snareId:e("#snareId"),wardersrift:e("#wardersrift"),weaponshieldId:e("#weaponshieldId"),shieldofbramblesId:e("#shieldofbramblesId"),thistlecoatId:e("#thistlecoatId"),feetlikecatId:e("#feetlikecatId"),rangersowId:e("#rangersowId"),rangertrackId:e("#rangertrackId"),shdslamId:e("#shdslamId"),crescentcleaveId:e("#crescentcleaveId"),deathstrikeId:e("#deathstrikeId"),gaspingfrenzyId:e("#gaspingfrenzyId"),harmtouchId:e("#harmtouchId"),resistcoldId:e("#resistcoldId"),addmonsterId:e("#addmonsterId"),shdlifetapId:e("#shdlifetapId"),doomingdarknessId:e("#doomingdarknessId"),heatbloodId:e("#heatbloodId"),strengthendeadId:e("#strengthendeadId"),shdfearId:e("#shdfearId"),siphonstrengthId:e("#siphonstrengthId"),shdfeigndeathId:e("#shdfeigndeathId"),shadowvortexId:e("#shadowvortexId"),shdfeigndeathId:e("#shdfeigndeathId"),vampiricembraceId:e("#vampiricembraceId"),summondeadId:e("#summondeadId"),palslamId:e("#palslamId"),rebukeId:e("#rebukeId"),purgeId:e("#purgeId"),vengeanceId:e("#vengeanceId"),layhandsId:e("#layhandsId"),greaterhealingId:e("#greaterhealingId"),holymightId:e("#holymightId"),palrootId:e("#palrootId"),ardentjudgment:e("#ardentjudgment"),yaulpId:e("#yaulpId"),cleanseId:e("#cleanseId"),flashoflightId:e("#flashoflightId"),valorId:e("#valorId"),spiritarmorId:e("#spiritarmorId"),divineprovidenceId:e("#divineprovidenceId"),symbolofryltanId:e("#symbolofryltanId"),tigerstrikeId:e("#tigerstrikeId"),eaglestrikeId:e("#eaglestrikeId"),cheetahstrikeId:e("#cheetahstrikeId"),cobrastrikeId:e("#cobrastrikeId"),dragonstrikeId:e("#dragonstrikeId"),cranekickId:e("#cranekickId"),windmillkickId:e("#windmillkickId"),ancestralflurryId:e("#ancestralflurryId"),flyingkickId:e("#flyingkickId"),chakrablastId:e("#chakrablastId"),feigndeathId:e("#feigndeathId"),mendId:e("#mendId"),stonefistsId:e("#stonefistsId"),intimidationId:e("#intimidationId"),innerpeaceId:e("#innerpeaceId"),shadowstrikeId:e("#shadowstrikeId"),sonicstrikeId:e("#sonicstrikeId"),hyperstrikeId:e("#hyperstrikeId"),widowstrikeId:e("#widowstrikeId"),miragestrikeId:e("#miragestrikeId"),lacerateId:e("#lacerateId"),backstabId:e("#backstabId"),staggershotId:e("#staggershotId"),lobotomizeId:e("#lobotomizeId"),prowlinggashId:e("#prowlinggashId"),evadeId:e("#evadeId"),coldbloodId:e("#coldbloodId"),flashpowderId:e("#flashpowderId"),illusivemistId:e("#illusivemistId"),ancientwillId:e("#ancientwillId"),warriorkickId:e("#warriorkickId"),slamId:e("#slamId"),avengingstrikeId:e("#avengingstrikeId"),hemorrhageId:e("#hemorrhageId"),shockwaveId:e("#shockwaveId"),pummelId:e("#pummelId"),subjugateId:e("#subjugateId"),decisiveblowId:e("#decisiveblowId"),absorbspellId:e("#absorbspellId"),frenziedrampageId:e("#frenziedrampageId"),enrageId:e("#enrageId"),furiousscornId:e("#furiousscornId"),triageId:e("#triageId"),bulwarkId:e("#bulwarkId"),intrepidmightId:e("#intrepidmightId"),zoneSelectButton:e(".zoneSelectButton"),cityBG:e(".cityBG"),city:e(".city"),trainingButton:e(".trainingButton"),enterWorld2:e("#worldMap, #options, #myhpbarbg, #mympbarbg, #mympbarId"),enterWorld1:e("#mympbarbg, #mympbarId, #myhpbardiv, #myhpbarbg, #pethbarId, #window2dawn, #window2zoneday, #window2scrollsky"),allChButtons:e("#enterworld, #characterslot1, #characterslot2, #characterslot3, #characterslot4, #characterslot5, #characterslot6, #characterslot7, #characterslot8, #characterslot9, #characterslot10, #characterslot11, #characterslot12, #characterslot13, #characterslot14, #characterslot15, #characterslot16"),NCbuttons:e(".NCbuttons"),spellblind:e("#spellblind"),characterslot1:e("#characterslot1"),characterslot2:e("#characterslot2"),characterslot3:e("#characterslot3"),characterslot4:e("#characterslot4"),characterslot5:e("#characterslot5"),characterslot6:e("#characterslot6"),characterslot7:e("#characterslot7"),characterslot8:e("#characterslot8"),characterslot9:e("#characterslot9"),characterslot10:e("#characterslot10"),characterslot11:e("#characterslot11"),characterslot12:e("#characterslot12"),characterslot13:e("#characterslot13"),characterslot14:e("#characterslot14"),characterslot15:e("#characterslot15"),characterslot16:e("#characterslot16"),myButtons:e(".buttons, .NCbuttons"),window2:e("#window2"),ttItem:e("#ttItem"),mobName:e("#mobName"),equipmentBG:e(".equipmentBG"),bankBG:e(".bankBG"),inventoryBG:e(".inventoryBG"),inventory:e(".inventory"),bank:e(".bank"),spacers:e(".spacers"),buttonreset:e("#window3a .NCbuttons, #window3a .nonglobal"),racelist:e(".racelist"),joblist:e(".joblist"),eWin:e("#eWin"),eWin2:e("#eWin2"),eWin3:e("#eWin3"),chatId:e("#chatId"),combatId:e("#combatId"),mob5:e("#mob5"),myexpbarId:e("#myexpbarId"),window2:e("#window2"),petImage:e("#petImage"),mobBar:e("#mobBar"),parryblock:e("#parryblock"),mptypeId:e("#mptypeId"),strId:e("#strId"),staId:e("#staId"),agiId:e("#agiId"),dexId:e("#dexId"),wisId:e("#wisId"),intId:e("#intId"),chaId:e("#chaId"),svpoisonId:e("#svpoisonId"),svmagicId:e("#svmagicId"),svlightningId:e("#svlightningId"),svcoldId:e("#svcoldId"),svfireId:e("#svfireId")}}function fa(e,a){if("Off"!==kw.showCombatLog){for(;NG.combatLog.childNodes.length>100;)NG.combatLog.removeChild(NG.combatLog.firstChild);var n="";a!==E&&(n=0===a?"white":1===a?"red":2===a?"yellow":3===a?"blue1":4===a?"blue2":5===a?"darkgreen":6===a?"green3":7===a?"purple":8===a?"yellow2":"grey");var t=mS.createElement("div");n!==E&&(t.className=n),t.innerHTML=e,NG.combatLog.appendChild(t),!1===_S&&(NG.combatLog.scrollTop=NG.combatLog.scrollHeight)}}function ha(e,a){if("Off"!==kw.showCombatLog){for(;NG.chatLog.childNodes.length>10;)NG.chatLog.removeChild(NG.chatLog.firstChild);var n="";a!==E&&(n=0===a?"white":1===a?"red":2===a?"yellow":3===a?"blue1":4===a?"blue2":5===a?"darkgreen":6===a?"green3":7===a?"purple":8===a?"yellow2":"grey");var t=mS.createElement("div");n!==E&&(t.className=n),t.innerHTML=e,NG.chatLog.appendChild(t),!1===_S&&(NG.chatLog.scrollTop=NG.chatLog.scrollHeight)}}function ga(){vS=new H,bH=0,vH=0,AI=0,xI=0,EI=0,GI=0,qI=0,PI=0,QI=0,RI=0,FI=0,NI=0,jI=0,zI=0,YI=0}function pa(e){if("string"==typeof e)mS.getElementById(e).style.display="block";else for(var a=e.length,n=0;n<a;n++){var t=mS.getElementById(e[n]);null!==t&&(t.style.display="block")}}function ba(e){return null!=n.getElementById(e)&&mS.getElementById(e)}function va(e){if(0===e)return 0;e||(e=Yy.level);for(var a=zy.levelMax,n=0,t=e+1,i=1;i<=98;i++)t>i&&(n+=a[i-1]);return n}function ya(){for(var e=!1,a=0;a<=4;a++)0===Wy[a].attackStatus&&(e=!0);return e}function ka(){"Monk"===Yy.job&&(Yy.mp+=lC?6:3),Yy.mp>100&&(Yy.mp=100),zy.drawMyMp()}function Sa(e){var a=dS.ceil(dS.round(e/6))+5;Yy.mp+=a,!0===lC&&(Yy.mp+=a),Yy.mp>Yy.maxMp&&(Yy.mp=Yy.maxMp),zy.drawMyMp()}function Ia(){var e=Le();"Monk"===Yy.job?("punched"===bS.eq[12].type&&(bS.eq[12].damage=2+~~(.1*e),bS.eq[12].delay=3e3-~~(2*e)),"punched"===bS.eq[13].type&&(bS.eq[13].damage=2+~~(.1*e),bS.eq[13].delay=3e3-~~(2*e))):("punched"===bS.eq[12].type&&(bS.eq[12].damage=1+~~(.03*e),bS.eq[12].delay=3e3),"punched"===bS.eq[13].type&&(bS.eq[13].damage=1+~~(.03*e),bS.eq[13].delay=3e3))}function wa(){!0===zk&&(Yy.hp=zy.maxHpFunct(),zy.drawMyHp(),"Warrior"===Yy.job||"Monk"===Yy.job||"Rogue"===Yy.job?ny():(Yy.mp=zy.maxMpFunct(),zy.drawMyMp()))}function Ca(){if(!0===VI)return!1;var a=!1;if(0===pH){(n=mS.getElementById("travelId")).className="buttonsManage",n.style.backgroundPosition="-80px 0",e("#worldMap").css("top",-900),pH=1,a=!0}if("block"===e("#bank").css("display")&&(e("#bank").css("display","none"),a=!0),parseInt(e("#options").css("top"),10)>=0){(n=mS.getElementById("optionsId")).className="buttonsManage",n.style.backgroundPosition="-120px 0",e("#options").css("top",-900),a=!0}if(0===hw&&(fy(),a=!0),0==hH){(n=mS.getElementById("charsheetId")).className="buttonsManage",n.style.backgroundPosition="0 0",e("#window1").css("display","none"),hH=1,a=!0}if(0==gH){var n=mS.getElementById("inventoryId");n.className="buttonsManage",n.style.backgroundPosition="-40px 0",e("#inventoryWindow").css("display","none"),gH=1,a=!0}return!0===KI&&Fa(!1),Ma(),$NG.ttItem.css("display","none"),mS.getElementById("goldInputWrap").style.display="none",a}function Ma(){cS.killDelayedCallsTo("#battleReport"),cS.to("#battleReport",.5,{scale:0,opacity:0,ease:pS.sout,onComplete:function(){mS.getElementById("battleReportContent").innerHTML="",cS.set("#battleReport",{visibility:"hidden"})}})}function Ta(e){!0!==VI&&(e||Ca(),!0===TM&&Fi(),"Arcane Missiles"!==iH&&"Ice Block"!==iH&&(0===sH&&fa("You cancel your spell."),VS.length>0&&(VS.shift(),Ry()),sH=1,cI.kill(),NG.spellbardiv.style.display="none",Ba()))}function Ba(){Yk.kill(),Wk&&(mS.getElementById(Wk).parentNode.style.border="2px solid #111"),Aw=!1,xw="",Wk=""}function Da(){for(var a=e("#window3a li").filter(":visible"),n=0;n<=23;n++)Lmy["C"+n]=a.eq(n).attr("id")}function La(){function a(e){i.push(e)}for(var n=e("#window3a"),t=0;t<=23;t++)if(""!==Lmy["C"+t]){if("addmonsterId"===(l=Lmy["C"+t])||"toggleattackId"===l||"runId"===l||"halflinghideId"===l||"secondwindId"===l||"divineaegisId"===l||"ancestralrampageId"===l||"tunaresglowId"===l||"karanasinfusionId"===l||"sanguinetormentId"===l||"granitevisageId"===l||"shortcircuitId"===l)Lmy["C"+t]="";else{l=e("#"+Lmy["C"+t]).clone(!0,!0);e("#"+Lmy["C"+t]).remove(),l.appendTo(n)}}i=(n=patchVersion).split("-");if(0===parseInt(i[0],10)&&parseInt(i[1],10)<=6){var i=[],o=e("#window3a");a("addmonsterId"),a("toggleattackId"),a("runId"),"Warrior"===Yy.job?(a("avengingstrikeId"),a("slamId"),a("warriorkickId"),a("hemorrhageId"),a("shockwaveId"),a("pummelId"),a("subjugateId"),a("decisiveblowId"),a("absorbspellId"),a("frenziedrampageId"),a("enrageId"),a("furiousscornId"),a("triageId"),a("bulwarkId"),a("intrepidmightId")):"Monk"===Yy.job?(a("tigerstrikeId"),a("eaglestrikeId"),a("cheetahstrikeId"),a("cobrastrikeId"),a("dragonstrikeId"),a("cranekickId"),a("windmillkickId"),a("ancestralflurryId"),a("flyingkickId"),a("chakrablastId"),a("feigndeathId"),a("mendId"),a("stonefistsId"),a("intimidationId"),a("innerpeaceId")):"Rogue"===Yy.job?(a("roguehideId"),a("shadowstrikeId"),a("sonicstrikeId"),a("hyperstrikeId"),a("widowstrikeId"),a("miragestrikeId"),a("lacerateId"),a("backstabId"),a("staggershotId"),a("lobotomizeId"),a("prowlinggashId"),a("evadeId"),a("coldbloodId"),a("flashpowderId"),a("illusivemistId"),a("ancientwillId")):"Paladin"===Yy.job?(a("layhandsId"),a("purgeId"),a("palslamId"),a("rebukeId"),a("vengeanceId"),a("greaterhealingId"),a("holymightId"),a("valorId"),a("palrootId"),a("ardentjudgment"),a("spiritarmorId"),a("yaulpId"),a("cleanseId"),a("divineprovidenceId"),a("flashoflightId"),a("symbolofryltanId")):"Ranger"===Yy.job?(a("rangertrackId"),a("rapidshotId"),a("rangerkickId"),a("countershotId"),a("trueshotarrowId"),a("volleyshotId"),a("lighthealingId"),a("faerieflameId"),a("igniteId"),a("thistlecoatId"),a("snareId"),a("feetlikecatId"),a("shieldofbramblesId"),a("wardersrift"),a("rangersowId"),a("weaponshieldId")):"Shadow Knight"===Yy.job?(a("harmtouchId"),a("crescentcleaveId"),a("shdslamId"),a("deathstrikeId"),a("gaspingfrenzyId"),a("summondeadId"),a("shdlifetapId"),a("doomingdarknessId"),a("heatbloodId"),a("vampiricembraceId"),a("strengthendeadId"),a("resistcoldId"),a("shdfearId"),a("siphonstrengthId"),a("shdfeigndeathId"),a("shadowvortexId")):"Bard"===Yy.job?(a("rangertrackId"),a("chordsofdissonance"),a("chantofbattle"),a("accelerando"),a("hymnofrestoration"),a("songofthesirens"),a("boastfulbellow"),a("elementalrhythms"),a("lucidlullaby"),a("consonantchain"),a("dissension"),a("chorusofclarity"),a("anthemdearms"),a("euphonichymn"),a("shieldofsongs"),a("desperatedirge")):"Druid"===Yy.job?(a("rangertrackId"),a("starfire"),a("dronesofdoom"),a("druhealing"),a("skinlikenature"),a("tornado"),a("engulfingroots"),a("shieldofspikes"),a("driftingdeath"),a("drusow"),a("lightningblast"),a("earthquake"),a("chloroplast"),a("hurricane"),a("sylvangrasp"),a("volcano")):"Cleric"===Yy.job?(a("smite"),a("soundofforce"),a("superiorhealing"),a("resolution"),a("bindingearth"),a("expelcorruption"),a("searingrevelation"),a("martyrsblessing"),a("armoroffaith"),a("guardianangel"),a("divinesanctuary"),a("holywrath"),a("markofjudgement"),a("symbolofnaltron"),a("benediction")):"Shaman"===Yy.job?(a("froststrike"),a("scourge"),a("shmhealing"),a("calloftheancients"),a("guardianspirit"),a("togorsinsects"),a("cannibalize"),a("enstill"),a("poisonnova"),a("shmsow"),a("affliction"),a("reclaimblood"),a("glacialimpact"),a("talismanofaltuna"),a("devouringplague")):"Necromancer"===Yy.job?(a("bonespirit"),a("cascadingdarkness"),a("invokefear"),a("drainsoul"),a("archshielding"),a("feigndeath"),a("augmentdeath"),a("igniteblood"),a("corpseexplosion"),a("bondofdeath"),a("diamondskin"),a("asystole"),a("detonatesoul"),a("howlingterror"),a("invokedeath")):"Enchanter"===Yy.job?(a("chaosflux"),a("gaspingembrace"),a("cajolingwhispers"),a("colorshift"),a("mesmerize"),a("discordantbarrier"),a("shiftlessdeeds"),a("enchantweapon"),a("adorninggrace"),a("alacrity"),a("gravityflux"),a("mysticrune"),a("tashania"),a("clarity"),a("enthrall")):"Magician"===Yy.job?(a("lavabolt"),a("earthelemental"),a("airelemental"),a("fireelemental"),a("frostelemental"),a("shieldoflava"),a("firestorm"),a("phantomplate"),a("frozenorb"),a("burnout"),a("manashield"),a("elementalarmor"),a("psionicstorm"),a("reclaimelements"),a("elementalfury"),a("armageddon"),a("stasisfield"),a("alteredstate")):"Wizard"===Yy.job&&(a("icebolt"),a("chargedbolts"),a("frostnova"),a("magicmissiles"),a("viziersshielding"),a("fireball"),a("deepfreeze"),a("chainlightning"),a("glacialspike"),a("iceblock"),a("icecomet"),a("counterspell"),a("harnessEther"),a("meteor"),a("mirrorimages")),"Human"===Yy.race?a("secondwindId"):"Erudite"===Yy.race?a("divineaegisId"):"Barbarian"===Yy.race?a("ancestralrampageId"):"Wood Elf"===Yy.race?a("tunaresglowId"):"Half Elf"===Yy.race?a("karanasinfusionId"):"Dark Elf"===Yy.race?a("sanguinetormentId"):"Dwarf"===Yy.race?a("granitevisageId"):"Gnome"===Yy.race?a("shortcircuitId"):"Halfling"===Yy.race&&a("halflinghideId"),"Shaman"!==Yy.job&&"Necromancer"!==Yy.job&&"Shadow Knight"!==Yy.job&&"Magician"!==Yy.job||a("togglepetattackId"),i.reverse();for(var t=0,r=i.length;t<r;t++){var l=e("#"+i[t]).clone(!0,!0);e("#"+i[t]).remove(),l.prependTo(o)}}Ha()}function Ha(){var a=e(".buttons:hidden, .NCbuttons:hidden"),n=a.clone();a.remove();var t=e(".spacers:visible").first();n.insertBefore(t)}function Aa(){function a(a,n){e("#"+a).css({display:"block",float:"left"}),n>0&&e("#window3a").filter(":visible").children().length>24&&e("#Comspace"+n).css("display","none")}e(".NCbuttons, .nonglobal").css("display","none"),e(".allskill, .spacers").css("display","inline-block"),e("#addmonsterId, #runId, #toggleattackId").css("display","block"),"Warrior"===Yy.job&&(e(".warskill").css("display","none"),a("avengingstrikeId",0),Yy.level>=2&&a("slamId",1),Yy.level>=3&&a("warriorkickId",2),Yy.level>=5&&a("enrageId",3),Yy.level>=7&&a("pummelId",4),Yy.level>=9&&a("subjugateId",5),Yy.level>=11&&a("furiousscornId",6),Yy.level>=13&&a("triageId",7),Yy.level>=15&&a("decisiveblowId",8),Yy.level>=17&&a("hemorrhageId",9),Yy.level>=20&&a("absorbspellId",10),Yy.level>=24&&a("intrepidmightId",11),Yy.level>=28&&a("bulwarkId",12),Yy.level>=32&&a("frenziedrampageId",13),Yy.level>=38&&a("shockwaveId",14)),"Monk"===Yy.job&&(e(".mnkskill").css("display","none"),a("tigerstrikeId",0),Yy.level>=2&&a("cranekickId",1),Yy.level>=3&&a("eaglestrikeId",2),Yy.level>=5&&a("feigndeathId",3),Yy.level>=7&&a("windmillkickId",4),Yy.level>=9&&a("stonefistsId",5),Yy.level>=11&&a("mendId",6),Yy.level>=13&&a("intimidationId",7),Yy.level>=15&&a("innerpeaceId",8),Yy.level>=17&&a("cheetahstrikeId",9),Yy.level>=20&&a("cobrastrikeId",10),Yy.level>=24&&a("chakrablastId",11),Yy.level>=28&&a("flyingkickId",12),Yy.level>=32&&a("ancestralflurryId",13),Yy.level>=38&&a("dragonstrikeId",14)),"Rogue"===Yy.job&&(e(".rogskill").css("display","none"),a("shadowstrikeId",0),a("roguehideId",1),Yy.level>=2&&a("lacerateId",2),Yy.level>=3&&a("evadeId",3),Yy.level>=5&&a("sonicstrikeId",4),Yy.level>=7&&a("backstabId",5),Yy.level>=9&&a("coldbloodId",6),Yy.level>=11&&a("flashpowderId",7),Yy.level>=13&&a("hyperstrikeId",8),Yy.level>=15&&a("illusivemistId",9),Yy.level>=17&&a("staggershotId",10),Yy.level>=20&&a("widowstrikeId",11),Yy.level>=24&&a("lobotomizeId",12),Yy.level>=28&&a("ancientwillId",13),Yy.level>=32&&a("miragestrikeId",14),Yy.level>=38&&a("prowlinggashId",15)),"Paladin"===Yy.job&&(e(".palskill").css("display","none"),a("purgeId",0),a("layhandsId",1),Yy.level>=2&&a("palslamId",2),Yy.level>=3&&a("rebukeId",3),Yy.level>=6&&a("vengeanceId",4),Yy.level>=9&&a("greaterhealingId",5),Yy.level>=11&&a("holymightId",6),Yy.level>=13&&a("valorId",7),Yy.level>=15&&a("ardentjudgment",8),Yy.level>=17&&a("spiritarmorId",9),Yy.level>=19&&a("palrootId",10),Yy.level>=21&&a("yaulpId",11),Yy.level>=24&&a("cleanseId",12),Yy.level>=28&&a("divineprovidenceId",13),Yy.level>=32&&a("flashoflightId",14),Yy.level>=38&&a("symbolofryltanId",15)),"Ranger"===Yy.job&&(e(".rngskill").css("display","none"),a("rapidshotId",0),a("rangertrackId",1),Yy.level>=2&&a("rangerkickId",2),Yy.level>=3&&a("countershotId",3),Yy.level>=6&&a("trueshotarrowId",4),Yy.level>=9&&a("lighthealingId",5),Yy.level>=11&&a("faerieflameId",6),Yy.level>=13&&a("igniteId",7),Yy.level>=15&&a("thistlecoatId",8),Yy.level>=17&&a("snareId",9),Yy.level>=19&&a("feetlikecatId",10),Yy.level>=21&&a("shieldofbramblesId",11),Yy.level>=24&&a("wardersrift",12),Yy.level>=28&&a("rangersowId",13),Yy.level>=32&&a("volleyshotId",14),Yy.level>=38&&a("weaponshieldId",15)),"Shadow Knight"===Yy.job&&(e(".shdskill").css("display","none"),a("crescentcleaveId",0),a("harmtouchId",1),Yy.level>=2&&a("shdslamId",2),Yy.level>=3&&a("deathstrikeId",3),Yy.level>=6&&a("gaspingfrenzyId",4),Yy.level>=9&&(a("summondeadId",5),a("togglepetattackId",6)),Yy.level>=11&&a("shdlifetapId",7),Yy.level>=13&&a("doomingdarknessId",8),Yy.level>=15&&a("shdfearId",9),Yy.level>=17&&a("siphonstrengthId",10),Yy.level>=19&&a("heatbloodId",11),Yy.level>=21&&a("vampiricembraceId",12),Yy.level>=24&&a("strengthendeadId",13),Yy.level>=28&&a("resistcoldId",14),Yy.level>=32&&a("shdfeigndeathId",15),Yy.level>=38&&a("shadowvortexId",16)),"Bard"===Yy.job&&(e(".brdskill").css("display","none"),a("chordsofdissonance",0),a("rangertrackId",1),Yy.level>=2&&a("chantofbattle",2),Yy.level>=3&&a("accelerando",3),Yy.level>=5&&a("hymnofrestoration",4),Yy.level>=7&&a("songofthesirens",5),Yy.level>=9&&a("boastfulbellow",6),Yy.level>=11&&a("elementalrhythms",7),Yy.level>=13&&a("lucidlullaby",8),Yy.level>=15&&a("consonantchain",9),Yy.level>=17&&a("dissension",10),Yy.level>=20&&a("chorusofclarity",11),Yy.level>=24&&a("anthemdearms",12),Yy.level>=28&&a("euphonichymn",13),Yy.level>=32&&a("shieldofsongs",14),Yy.level>=38&&a("desperatedirge",15)),"Cleric"===Yy.job&&(e(".clrskill").css("display","none"),a("smite",0),Yy.level>=2&&a("soundofforce",1),Yy.level>=3&&a("superiorhealing",2),Yy.level>=5&&a("resolution",3),Yy.level>=7&&a("bindingearth",4),Yy.level>=9&&a("expelcorruption",5),Yy.level>=11&&a("searingrevelation",6),Yy.level>=13&&a("martyrsblessing",7),Yy.level>=15&&a("armoroffaith",8),Yy.level>=17&&a("guardianangel",9),Yy.level>=20&&a("divinesanctuary",10),Yy.level>=24&&a("holywrath",11),Yy.level>=28&&a("markofjudgement",12),Yy.level>=32&&a("symbolofnaltron",13),Yy.level>=38&&a("benediction",14)),"Druid"===Yy.job&&(e(".druskill").css("display","none"),a("starfire",0),a("rangertrackId",1),Yy.level>=2&&a("dronesofdoom",2),Yy.level>=3&&a("druhealing",3),Yy.level>=5&&a("skinlikenature",4),Yy.level>=7&&a("tornado",5),Yy.level>=9&&a("engulfingroots",6),Yy.level>=11&&a("shieldofspikes",7),Yy.level>=13&&a("driftingdeath",8),Yy.level>=15&&a("drusow",9),Yy.level>=17&&a("lightningblast",10),Yy.level>=20&&a("earthquake",11),Yy.level>=24&&a("chloroplast",12),Yy.level>=28&&a("hurricane",13),Yy.level>=32&&a("sylvangrasp",14),Yy.level>=38&&a("volcano",15)),"Shaman"===Yy.job&&(e(".shmskill").css("display","none"),a("froststrike",0),Yy.level>=2&&a("scourge",1),Yy.level>=3&&a("shmhealing",2),Yy.level>=5&&a("calloftheancients",3),Yy.level>=7&&(a("guardianspirit",4),a("togglepetattackId",5)),Yy.level>=9&&a("togorsinsects",6),Yy.level>=11&&a("cannibalize",7),Yy.level>=13&&a("poisonnova",8),Yy.level>=15&&a("shmsow",9),Yy.level>=17&&a("enstill",10),Yy.level>=20&&a("affliction",11),Yy.level>=24&&a("reclaimblood",12),Yy.level>=28&&a("glacialimpact",13),Yy.level>=32&&a("talismanofaltuna",14),Yy.level>=38&&a("devouringplague",15)),"Necromancer"===Yy.job&&(e(".necskill").css("display","none"),a("bonespirit",0),Yy.level>=2&&(a("invokedeath",1),a("togglepetattackId",2)),Yy.level>=3&&a("cascadingdarkness",3),Yy.level>=5&&a("invokefear",4),Yy.level>=7&&a("drainsoul",5),Yy.level>=9&&a("archshielding",6),Yy.level>=11&&a("feigndeath",7),Yy.level>=13&&a("augmentdeath",8),Yy.level>=15&&a("igniteblood",9),Yy.level>=17&&a("corpseexplosion",10),Yy.level>=20&&a("bondofdeath",11),Yy.level>=24&&a("diamondskin",12),Yy.level>=28&&a("asystole",13),Yy.level>=32&&a("detonatesoul",14),Yy.level>=38&&a("howlingterror",15)),"Enchanter"===Yy.job&&(e(".encskill").css("display","none"),a("chaosflux",0),Yy.level>=2&&a("gaspingembrace",1),Yy.level>=3&&a("cajolingwhispers",2),Yy.level>=5&&a("colorshift",3),Yy.level>=7&&a("mesmerize",4),Yy.level>=9&&a("discordantbarrier",5),Yy.level>=11&&a("shiftlessdeeds",6),Yy.level>=13&&a("enchantweapon",7),Yy.level>=15&&a("adorninggrace",8),Yy.level>=17&&a("alacrity",9),Yy.level>=20&&a("gravityflux",10),Yy.level>=24&&a("mysticrune",11),Yy.level>=28&&a("tashania",12),Yy.level>=32&&a("clarity",13),Yy.level>=38&&a("enthrall",14)),"Magician"===Yy.job&&(e(".magskill").css("display","none"),a("lavabolt",0),Yy.level>=2&&(a("togglepetattackId",1),a("earthelemental",2),a("airelemental",3),a("fireelemental",4),a("frostelemental",5)),Yy.level>=3&&a("shieldoflava",6),Yy.level>=5&&a("firestorm",7),Yy.level>=7&&a("phantomplate",8),Yy.level>=9&&a("frozenorb",9),Yy.level>=11&&a("burnout",10),Yy.level>=13&&a("manashield",11),Yy.level>=15&&a("elementalarmor",12),Yy.level>=17&&a("psionicstorm",13),Yy.level>=20&&a("reclaimelements",14),Yy.level>=24&&a("elementalfury",15),Yy.level>=28&&a("armageddon",16),Yy.level>=32&&a("stasisfield",17),Yy.level>=38&&a("alteredstate",18)),"Wizard"===Yy.job&&(e(".wizskill").css("display","none"),a("icebolt",0),Yy.level>=2&&a("chargedbolts",1),Yy.level>=3&&a("frostnova",2),Yy.level>=5&&a("magicmissiles",3),Yy.level>=7&&a("viziersshielding",4),Yy.level>=9&&a("fireball",5),Yy.level>=11&&a("deepfreeze",6),Yy.level>=13&&a("chainlightning",7),Yy.level>=15&&a("glacialspike",8),Yy.level>=17&&a("iceblock",9),Yy.level>=20&&a("icecomet",10),Yy.level>=24&&a("counterspell",11),Yy.level>=28&&a("harnessEther",12),Yy.level>=32&&a("meteor",13),Yy.level>=38&&a("mirrorimages",14)),"Human"===Yy.race&&a("secondwindId",19),"Erudite"===Yy.race&&a("divineaegisId",19),"Barbarian"===Yy.race&&a("ancestralrampageId",19),"Wood Elf"===Yy.race&&a("tunaresglowId",19),"Half Elf"===Yy.race&&a("karanasinfusionId",19),"Dark Elf"===Yy.race&&a("sanguinetormentId",19),"Dwarf"===Yy.race&&a("granitevisageId",19),"Gnome"===Yy.race&&a("shortcircuitId",19),"Halfling"===Yy.race&&"Rogue"!==Yy.job&&a("halflinghideId",19),Yn()}function xa(){for(var e=0;e<=4;e++)NG["mobIcons"+e].style.display="none"}function Ea(){xa();for(var a=0;a<=4;a++)e("#mobIcons"+a).empty()}function Ga(e){(xS||GS)&&"On"===kw.debugMode&&"Game"===zy.view&&fa(e,2)}function qa(e){for(var a=!1,n=0,t=musicAssets.length;n<t;n++)-1===musicStrings[n].indexOf(e)||(a=!0);if(!1===a){var i=(musicAssetsNumber>9&&(musicAssetsNumber=0),musicAssetsNumber++);musicStrings[i]=e,musicAssets[i]=mS.createElement("audio"),musicAssets[i].src=KS+e+"."+SH}}function Pa(e){if(!1===HS&&!0===IH&&(!0===yH||!0===kH)){qa(e);var a=mS.getElementById("bgmusic");a.setAttribute("type","audio/"+SH),a.src=KS+e+"."+SH;var n=kw.musicStatus/100*.5*1;a.volume=n,a.play()}}function Qa(e,a,n,t){function i(e){var a=100*r*(1-.2*e);a<0&&(a=0),o.volume=a/100,e++,a>0&&cS.delayedCall(.1,i,[e])}if(!1===HS){if("blankAudio"===e)return;if(!0===IH&&(!0===yH||!0===kH)){var o=new Audio(YS+e+"."+SH);o.setAttribute("type","audio/"+SH),o.src=YS+e+"."+SH,t||(t=1);var r=dS.round(kw.soundStatus/100*.5*t*100)/100;o.volume=r,o.play(),n>0&&kw.soundStatus>0&&cS.delayedCall(n/1e3,i,[0])}}}function Ra(){var e=qn();"Edenburg"===e&&"Game"===zy.view?Pa("Blackmoor Tides"):"Aspen Grove"===e?Pa("Ireland's Coast (Travelog Edition - Live)"):"Artremia"===e?Pa("Salt Marsh Birds"):"Fenwoven"===e&&Pa("Snowland Loop")}function Fa(a){Ba(),VI=!1,!1!==a&&Qa("button_2");Aw=!1,Wk="",Fk.kill(),$NG.trainingButton.css("border","1px solid #111"),Qk="",e("#trainingOptions").css("left",-700),e("#trainOK").css("left",-700),$I=!1,UI=!1,JI=!0,e("#upgradeConfirm").css("left",-700),e("#upgradeOK").text("Ok"),e("#upgradeCANCEL").text("Cancel"),e("#merchantContainer").css("left",-700),e("#questWrap").css("left",-900),ZI=!1,aw=!1}function Na(a){"window1"===a&&(Lmy.window1X=parseInt(e("#window1").css("left")),Lmy.window1Y=parseInt(e("#window1").css("top"))),"inventoryWindow"===a&&(Lmy.inventoryWindowX=parseInt(e("#inventoryWindow").css("left")),Lmy.inventoryWindowY=parseInt(e("#inventoryWindow").css("top"))),"questJournal"===a&&(Lmy.questJournalX=parseInt(e("#questJournal").css("left")),Lmy.questJournalY=parseInt(e("#questJournal").css("top"))),"mobBar"===a&&(Lmy.mobBarX=parseInt(e("#mobBar").css("left")),Lmy.mobBarY=parseInt(e("#mobBar").css("top"))),"myhpbardiv"===a&&(Lmy.myhpbardivX=parseInt(e("#myhpbardiv").css("left")),Lmy.myhpbardivY=parseInt(e("#myhpbardiv").css("top"))),"pethpbardiv"===a&&(Lmy.pethpbardivX=parseInt(e("#pethpbardiv").css("left")),Lmy.pethpbardivY=parseInt(e("#pethpbardiv").css("top"))),"spellbardiv"===a&&(Lmy.spellbardivX=parseInt(e("#spellbardiv").css("left")),Lmy.spellbardivY=parseInt(e("#spellbardiv").css("top")))}function ja(){$NG.racelist.removeClass("classDisabled ccActive ccDisabled").addClass("ccDisabled");var a="humanId";"Human"==Yy.race&&(Yy.str=75,Yy.sta=75,Yy.dex=75,Yy.agi=75,Yy.intel=75,Yy.wis=75,Yy.cha=75),"Erudite"==Yy.race&&(Yy.str=60,Yy.sta=70,Yy.dex=70,Yy.agi=70,Yy.intel=107,Yy.wis=83,Yy.cha=70,a="eruditeId"),"Barbarian"==Yy.race&&(Yy.str=103,Yy.sta=95,Yy.dex=70,Yy.agi=82,Yy.intel=60,Yy.wis=92,Yy.cha=55,a="barbarianId"),"High Elf"==Yy.race&&(Yy.str=55,Yy.sta=65,Yy.dex=70,Yy.agi=85,Yy.intel=92,Yy.wis=95,Yy.cha=80,a="highelfId"),"Wood Elf"==Yy.race&&(Yy.str=65,Yy.sta=65,Yy.dex=80,Yy.agi=95,Yy.intel=75,Yy.wis=80,Yy.cha=75,a="woodelfId"),"Dark Elf"==Yy.race&&(Yy.str=60,Yy.sta=65,Yy.dex=75,Yy.agi=90,Yy.intel=99,Yy.wis=83,Yy.cha=60,a="darkelfId"),"Half Elf"==Yy.race&&(Yy.str=70,Yy.sta=70,Yy.dex=85,Yy.agi=90,Yy.intel=75,Yy.wis=60,Yy.cha=75,a="halfelfId"),"Dwarf"==Yy.race&&(Yy.str=90,Yy.sta=90,Yy.dex=90,Yy.agi=70,Yy.intel=60,Yy.wis=83,Yy.cha=45,a="dwarfId"),"Gnome"==Yy.race&&(Yy.str=60,Yy.sta=70,Yy.dex=85,Yy.agi=85,Yy.intel=98,Yy.wis=67,Yy.cha=60,a="gnomeId"),"Halfling"==Yy.race&&(Yy.str=70,Yy.sta=75,Yy.dex=90,Yy.agi=95,Yy.intel=67,Yy.wis=80,Yy.cha=50,a="halflingId"),"Troll"==Yy.race&&(Yy.str=108,Yy.sta=109,Yy.dex=75,Yy.agi=83,Yy.intel=52,Yy.wis=60,Yy.cha=40,a="trollId"),"Ogre"==Yy.race&&(Yy.str=130,Yy.sta=123,Yy.dex=70,Yy.agi=70,Yy.intel=60,Yy.wis=67,Yy.cha=37,a="ogreId"),mS.getElementById(a).className="raceClassButtonsOff racelist strongShadow ccActive",function(){$NG.joblist.removeClass("classDisabled ccActive ccDisabled").addClass("ccDisabled");var a=Yy.race;"Erudite"==a&&e("#warriorId, #monkId, #rogueId, #rangerId, #bardId, #druidId, #shamanId").addClass("classDisabled");"Barbarian"==a&&e("#monkId, #paladinId, #rangerId, #skId, #bardId, #clericId, #druidId, #necromancerId, #enchanterId, #magicianId, #wizardId").addClass("classDisabled");"High Elf"==a&&e("#warriorId, #monkId, #rogueId, #rangerId, #skId, #bardId, #druidId, #shamanId, #necromancerId").addClass("classDisabled");"Wood Elf"==a&&e("#monkId, #paladinId, #skId, #clericId, #shamanId, #necromancerId, #enchanterId, #magicianId, #wizardId").addClass("classDisabled");"Dark Elf"==a&&e("#monkId, #paladinId, #shamanId, #bardId, #druidId").addClass("classDisabled");"Half Elf"==a&&e("#clericId, #shamanId, #necromancerId, #enchanterId, #magicianId, #wizardId").addClass("classDisabled");"Dwarf"==a&&e("#monkId, #rangerId, #skId, #bardId, #druidId, #shamanId, #necromancerId, #enchanterId, #magicianId, #wizardId").addClass("classDisabled");"Gnome"==a&&e("#rangerId, #bardId, #druidId, #shamanId").addClass("classDisabled");"Halfling"==a&&e("#skId, #bardId, #shamanId, #necromancerId, #enchanterId, #magicianId, #wizardId").addClass("classDisabled");"Troll"==a&&e("#monkId, #rogueId, #paladinId, #rangerId, #bardId, #clericId, #druidId, #necromancerId, #enchanterId, #magicianId, #wizardId").addClass("classDisabled");"Ogre"==a&&e("#monkId, #rogueId, #paladinId, #rangerId, #bardId, #clericId, #druidId, #necromancerId, #enchanterId, #magicianId, #wizardId").addClass("classDisabled");var n=Yy.job;if("Warrior"===n&&e("#warriorId").hasClass("classDisabled"))return void Oa();if("Monk"===n&&e("#monkId").hasClass("classDisabled"))return void Ya();if("Rogue"===n&&e("#rogueId").hasClass("classDisabled"))return void Ya();if("Paladin"===n&&e("#paladinId").hasClass("classDisabled"))return void Ya();if("Ranger"===n&&e("#rangerId").hasClass("classDisabled"))return void Ya();if("Shadow Knight"===n&&e("#skId").hasClass("classDisabled"))return void Ya();if("Bard"===n&&e("#bardId").hasClass("classDisabled"))return void Ya();if("Cleric"===n&&e("#clericId").hasClass("classDisabled"))return void Ya();if("Druid"===n&&e("#druidId").hasClass("classDisabled"))return void Ya();if("Shaman"===n&&e("#shamanId").hasClass("classDisabled"))return void Ya();if("Necromancer"===n&&e("#necromancerId").hasClass("classDisabled"))return void Ya();if("Enchanter"===n&&e("#enchanterId").hasClass("classDisabled"))return void Ya();if("Magician"===n&&e("#magicianId").hasClass("classDisabled"))return void Ya();if("Wizard"===n&&e("#wizardId").hasClass("classDisabled"))return void Ya();"Warrior"===n&&Ya();"Monk"===n&&Ka();"Rogue"===n&&Wa();"Paladin"===n&&Oa();"Ranger"===n&&Xa();"Shadow Knight"===n&&Va();"Bard"===n&&_a();"Cleric"===n&&$a();"Druid"===n&&Ua();"Shaman"===n&&Ja();"Necromancer"===n&&Za();"Enchanter"===n&&en();"Magician"===n&&an();"Wizard"===n&&nn()}()}function za(){Yy.race="Human",ja(),mS.getElementById("creationInfo").innerHTML="Humans live in the city of Edenburg. Humans are a balanced, innovative race highly regarded for their ability to adapt to any situation. As a result they can play every existing class.<br><br>Racial skill: Second Wind provides an adrenaline boost, restoring your health and mana. Second Wind also  enhances all of your damage and reduces all damage received."}function Ya(a){!0!==e("#warriorId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Warriors are defensive melee specialists. They have stun skills, attack debuffs, and defensive abilities that make them difficult to kill. They receive the highest natural hit point bonus among all classes. Warriors use fury as a resource to power their skills. You gain fury every time you take damage.<br><br>Class orientation:<br>Defensive Melee, Plate Armor<br><br>Skill List:<br>Kick, Slam, Avenging Blow, Enrage, Pummel, Subjugate, Furious Scorn, Triage, Decisive Blow, Hemorrhage, Absorb Spell, Intrepid Might, Bulwark, Frenzied Rampage, Shockwave",Yy.job="Warrior",bk=5,vk=15,yk=0,kk=0,Sk=0,wk=5,Ik=0,tn("warriorId",a))}function Ka(){!0!==e("#monkId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Monks are offensive melee specialists. Monks combine attacks that generate spirit with attacks that expend spirit for deadly combinations. Their finishing moves, when executed properly, deliver overwhelming damage. Unlike most classes, monks can always rely on their bare fists in combat. Monks use spirit as a resource to power their skills. You gain spirit every time you use a skill that generates spirit.<br><br>Class orientation:<br>Offensive Melee, Healing, Leather Armor<br><br>Skill List:<br>Tiger Strike, Crane Kick, Eagle Strike, Feign Death, Windmill Kick, Stone Fist Reversal, Intimidation, Inner Peace, Cheetah Strike, Cobra Strike, Chakra Blast, Flying Kick, Ancestral Flurry, Dragon Strike",Yy.job="Monk",bk=10,vk=10,yk=0,kk=0,Sk=5,wk=0,Ik=0,tn("monkId"))}function Wa(){!0!==e("#rogueId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Rogues are offensive melee specialists. In addition to their excellent melee damage, they also have good crowd control skills that stun, blind, and silence. Rogues rely on building technique points to deliver powerful combo finishers. You gain technique points every time you use a skill that generates technique points.<br><br>Class orientation:<br>Offensive Melee, Control, Chain Armor<br><br>Skill List:<br>Shadow Strike, Lacerate, Evade, Sonic Strike, Backstab, Cold Blood, Flash Powder, Hyper Strike, Illusive Mist, Stagger Shot, Widow Strike, Lobotomize, Ancient Will, Mirage Strike, Prowling Gash",Yy.job="Rogue",bk=0,vk=0,yk=0,kk=0,Sk=15,wk=10,Ik=0,tn("rogueId"))}function Oa(){!0!==e("#paladinId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Paladins are defensive hybrids with a combination of melee and spells. Their stuns, healing, and ability to lay hands makes them difficult to kill. Several of their skills make them proficient at fighting undead mobs. Many of their skills are shared with warriors and clerics. Paladins unlock spells at level 9.<br><br>Class orientation:<br>Defensive Hybrid Melee, Plate Armor<br><br>Skill List:<br>Lay Hands, Slam, Rebuke, Purge, Vengeance, Greater Healing, Holy Might, Valor, Ardent Judgment, Spirit Armor, Root, Yaulp, Fervent Prayer, Divine Providence, Flash of Light, Symbol of Marshan",Yy.job="Paladin",bk=5,vk=10,yk=10,kk=0,Sk=0,wk=5,Ik=0,tn("paladinId"))}function Xa(){!0!==e("#rangerId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Rangers are offensive hybrids with a combination of melee and spells. Rangers rely on bows to do most of their damage, though they use swords and spells as well. Among all classes, rangers have the best tracking, which helps find rare monsters. Their spells provide added utility including some damage, healing, and some crowd control. Many of their skills are shared with warriors and druids. Rangers unlock spells at level 9.<br><br>Class orientation:<br>Offensive Hybrid Melee, Chain Armor<br><br>Skill List:<br>Track, Kick, Rapid Shot, Counter Shot, Trueshot Arrow, Light Healing, Faerie Flame, Ignite, Thistlecoat, Snare, Shield of Brambles, Warder's Rift, Spirit of the Wolf, Volley Shot, Weapon Shield",Yy.job="Ranger",bk=5,vk=5,yk=10,kk=0,Sk=10,wk=0,Ik=0,tn("rangerId"))}function Va(){!0!==e("#skId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Shadow knights are balanced hybrids with pets that use a combination of melee and spells. Shadow Knights summon a skeleton pet to fight by their side. They have a skill called harm touch to instantly inflict large amounts of damage. They wield several powerful spells to aid them in battle, such as fear and life drain. Many of their skills are shared with warriors and necromancers. Shadow Knights unlock spells at level 9.<br><br>Class orientation:<br>Balanced Hybrid Melee, Pet, Plate Armor<br><br>Skill List:<br>Harm Touch, Crescent Strike, Death Strike, Gasping Frenzy, Summon Dead, Life Tap, Dooming Darkness, Fear, Siphon Strength, Heat Blood, Vampiric Embrace, Strengthen Dead, Resist Cold, Feign Death, Shadow Vortex",Yy.job="Shadow Knight",bk=5,vk=10,yk=0,kk=10,Sk=0,wk=5,Ik=0,tn("skId"))}function _a(){!0!==e("#bardId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Bards are utility hybrids that use the power of their songs to defeat their foes. Bard songs offer a lot of variety and can be used to achieve victory in a wide variety of circumstances. Their songs can lull monsters to sleep, inflict magical damage, slow your targets, and even charm a monster to fight for you. Bards also have a weak version of the tracking skill, which helps find rare monsters.<br><br>Class orientation:<br>Utility Hybrid, Pet, Plate Armor<br><br>Skill List:<br>Track, Chords of Dissonance, Chant of Battle, Accelerando, Hymn of Restoration, Song of the Sirens, Boastful Bellow, Elemental Rhythms, Lucid Lullaby, Consonant Chain, Dissension, Chorus of Clarity, Anthem De Arms, Euphonic Hymn, Shield of Songs, and Desperate Dirge",Yy.job="Bard",bk=0,vk=5,yk=5,kk=5,Sk=5,wk=0,Ik=10,tn("bardId"))}function $a(){!0!==e("#clericId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Clerics are defensive healers that have the best healing potential in the game. Clerics focus on stuns, buffs, healing, and magical damage to succeed in battle. They also have crowd control and utility spells to survive tough situations. They have several spells that punish undead and summoned minions.<br><br>Class orientation:<br>Defensive Healer, Plate Armor<br><br>Skill List:<br>Smite, Sound of Force, Superior Healing, Resolution, Binding Earth, Expel Corruption, Searing Revelation, Martyr's Blessing, Armor of Faith, Guardian Angel, Divine Sanctuary, Holy Wrath, Mark of Judgment, Symbol of Yentus, Benediction",Yy.job="Cleric",bk=0,vk=5,yk=15,kk=5,Sk=0,wk=0,Ik=0,tn("clericId"))}function Ua(){!0!==e("#druidId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Druids are offensive healers that command the forces of nature to achieve victory. Though they have strong healing skills, they are known for their ability to summon earthquakes, tornados, hurricanes, volcanos, and other natural phenomenon to assist them in battle. They also have strong root spells that twist vines around your opponents' feet, leaving them unable to physically attack. Druids also have the tracking skill which helps find rare monsters.<br><br>Class orientation:<br>Offensive Healer, Area Effect, Leather Armor<br><br>Skill List:<br>Track, Starfire, Drones of Doom, Greater Healing, Skin Like Nature, Tornado, Engulfing Roots, Shield of Spikes, Drifting Death, Spirit of the Wolf, Lightning Blast, Earthquake, Chloroplast, Hurricane, Sylvan Creep, Volcano",Yy.job="Druid",bk=0,vk=5,yk=15,kk=5,Sk=0,wk=0,Ik=0,tn("druidId"))}function Ja(){!0!==e("#shamanId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Shamans are utility healers that focus on ancient voodoo magic, regeneration, poison, and disease. Among the healers they have the most vicious damage over time spells. They can summon a guardian spirit to fight by their side, though they are among the weakest pets in the game. Shamans bring a lot of utility to the table as well, with slows, freezes, and the ability to cannibalize for on-demand mana recovery.<br><br>Class orientation:<br>Utility Healer, Pet, Chain Armor<br><br>Skill List:<br>Frost Strike, Scourge, Greater Healing, Call of the Ancients, Guardian Spirit, Togor's Insects, Cannibalize, Poison Nova, Spirit of the Wolf, Enstill, Affliction, Reclaim Blood, Glacial Impact, Talisman of Trogmaar, Devouring Plague",Yy.job="Shaman",bk=0,vk=5,yk=15,kk=5,Sk=0,wk=0,Ik=0,tn("shamanId"))}function Za(){!0!==e("#necromancerId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Necromancer are dark spellcasters that focus on re-animating the dead and commanding them in battle. They also specialize in damage-over-time spells, which are the best among all classes. They have the best fear spells in the game and the ability to explode monsters, whether they are alive or dead.<br><br>Class orientation:<br>Damage-over-Time Spellcaster, Pet, Cloth Armor<br><br>Skill List:<br>Bone Spirit, Invoke Death, Cascading Darkness, Invoke Fear, Drain Soul, Arch Shielding, Feign Death, Augment Death, Ignite Blood, Corpse Explosion, Bond of Death, Diamond Skin, Asystole, Detonate Soul, Howling Terror",Yy.job="Necromancer",bk=0,vk=0,yk=5,kk=15,Sk=5,wk=0,Ik=0,tn("necromancerId"))}function en(){!0!==e("#enchanterId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Enchanters are utility spellcasters that focus on charming monsters to fight for them in battle. They tilt the tables in battle by using mesmerize spells to control additional monsters and powerful stuns to keep them on the defensive. Slows and haste buffs help stack the odds in your favor. They can even enchant their weapon with magic to do additional damage. <br><br>Class orientation:<br>Utility Spellcaster, Pet, Cloth Armor<br><br>Skill List:<br>Chaos Flux, Gasping Embrace, Cajoling Whispers, Color Shift, Mesmerize, Discordant Barrier, Shiftless Deeds, Enchant Weapon, Adorning Grace, Alacrity, Gravity Flux, Mystic Rune, Tashania, Clarity, Enthrall",Yy.job="Enchanter",bk=0,vk=0,yk=5,kk=5,Sk=5,wk=0,Ik=10,tn("enchanterId"))}function an(){!0!==e("#magicianId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Magicians are offensive spellcasters that focus on pet mastery. They have the ability to summon four different elemental types: earth, air, fire, and frost. Each elemental has its own strengths and abilities. In addition, Magicians have an array of powerful spells at their disposal including firestorm, frozen orb, psionic storm, and a stasis field for crowd control.<br><br>Class orientation:<br>Offensive Spellcaster, Pet, Cloth Armor<br><br>Skill List:<br>Lava Bolt, Earth Elemental, Air Elemental, Fire Elemental, Frost Elemental, Shield of Lava, Firestorm, Phantom Plate, Frozen Orb, Burnout, Mana Shield, Elemental Armor, Psionic Storm, Reclaim Elements, Elemental Fury, Armageddon, Stasis Field, Altered State",Yy.job="Magician",bk=0,vk=0,yk=5,kk=15,Sk=5,wk=0,Ik=0,tn("magicianId"))}function nn(){!0!==e("#wizardId").hasClass("classDisabled")&&(mS.getElementById("creationInfo").innerHTML="Wizards are offensive spellcasters that focus on directing powerful spells on single or multiple targets. Wizards have an arsenal of powerful spells including ice comet, Arcane Missiles, meteor, and chain lightning. They also have a few utility spells to help them keep their targets at bay including frost nova, mirror images, and deep freeze. Their direct spellpower is second to none, but they are the most fragile class.<br><br>Class orientation:<br>Offensive Spellcaster, Pure Damage, Cloth Armor<br><br>Skill List:<br>Ice Bolt, Charged Bolts, Frost Nova, Arcane Missiles, Vizier's Shielding, Fireball, Deep Freeze, Chain Lightning, Glacial Spike, Ice Block, Ice Comet, Counterspell, Harness Ether, Meteor, Mirror Images",Yy.job="Wizard",bk=0,vk=0,yk=5,kk=15,Sk=5,wk=0,Ik=0,tn("wizardId"))}function tn(e,a){rn(),$NG.joblist.removeClass("ccActive").addClass("ccDisabled"),mS.getElementById(e).className="raceClassButtonsOff joblist strongShadow ccActive",vn(),Yy.level=1,zy.staEquip=0,Xy=0,zy.allStatsEquip=0,zy.hpEquip=0,Zy=0,zy.mpEquip=0,zy.intelEquip=0,Vy=0,zy.wisEquip=0,_y=0,Yy.hp=zy.maxHpFunct(),Yy.maxHp=Yy.hp,Yy.mp=zy.maxMpFunct(),Yy.maxMp=Yy.mp}function on(e){mS.getElementById("creationInfo").innerHTML="Males receive a bonus to strength and stamina.",Yy.gender="Male",Ck=5,Mk=5,Gwis=0,mS.getElementById("maleId").className="genderButtonsOff strongShadow ccActive",mS.getElementById("femaleId").className="genderButtonsOff strongShadow ccDisabled",rn()}function rn(){mS.getElementById("ccSTR").innerHTML=(Yy.str+"").fontcolor("#eeeecc"),mS.getElementById("ccSTA").innerHTML=(Yy.sta+"").fontcolor("#eeeecc"),mS.getElementById("ccAGI").innerHTML=(Yy.agi+"").fontcolor("#eeeecc"),mS.getElementById("ccDEX").innerHTML=(Yy.dex+"").fontcolor("#eeeecc"),mS.getElementById("ccWIS").innerHTML=(Yy.wis+"").fontcolor("#eeeecc"),mS.getElementById("ccINT").innerHTML=(Yy.intel+"").fontcolor("#eeeecc"),mS.getElementById("ccCHA").innerHTML=(Yy.cha+"").fontcolor("#eeeecc"),mS.getElementById("ccStr").innerHTML=function(){if(parseInt(Ck+bk)<=0)e="";if(parseInt(Ck+bk)>0)var e=" +"+parseInt(Ck+bk);return e}(),mS.getElementById("ccSta").innerHTML=function(){if(parseInt(Mk+vk)<=0)e="";if(parseInt(Mk+vk)>0)var e=" +"+parseInt(Mk+vk);return e}(),mS.getElementById("ccAgi").innerHTML=function(){if(wk<=0)e="";if(wk>0)var e=" +"+wk;return e}(),mS.getElementById("ccDex").innerHTML=function(){if(Sk<=0)e="";if(Sk>0)var e=" +"+Sk;return e}(),mS.getElementById("ccWis").innerHTML=function(){if(parseInt(Gwis+yk)<=0)e="";if(parseInt(Gwis+yk)>0)var e=" +"+parseInt(Gwis+yk);return e}(),mS.getElementById("ccInt").innerHTML=function(){if(kk<=0)e="";if(kk>0)var e=" +"+kk;return e}(),mS.getElementById("ccCha").innerHTML=function(){if(Ik<=0)e="";if(Ik>0)var e=" +"+Ik;return e}()}function ln(e,a,n){"physical"!==a&&a&&(!0!==xS&&!0!==GS&&!0!==AS||"High"===kw.videoSetting&&(zw[e][a].name!==Wy[e].image?function(e,a,n){var t="#0f0";"magic"===a?t="#f0f":"lightning"===a?t="#fff":"fire"===a?t="#f80":"cold"===a&&(t="#0ff"),zw[e][a].name=Wy[e].image,cS.set(zw[e][a],{easel:{tint:t,tintAmount:.5}}),ln(e,a,n)}(e,a,n):(Qw[e][a].kill(),zw[e][a].alpha=1,Qw[e][a]=cS.delayedCall(n,function(){zw[e][a].alpha=0}))))}function sn(){for(var e=1;e<=15;e++){var a=mS.getElementById("characterslot"+e);null!==a&&(a.className="characterDisabled ")}}function dn(){Qa("button_2"),sn(),Yy.difficulty=1,Yy.lastName="",Yy.level=1,Yy.exp=0,Yy.oneHandSlash=0,Yy.twoHandSlash=0,Yy.oneHandBlunt=0,Yy.twoHandBlunt=0,Yy.piercing=0,Yy.handtohand=1,Yy.defense=1,Yy.offense=1,Yy.dualWield=0,Yy.doubleAttack=0,Yy.dodge=0,Yy.riposte=0,Yy.parry=0,Yy.alteration=0,Yy.evocation=0,Yy.conjuration=0,Yy.abjuration=0,Yy.channeling=0,Yy.svpoison=10,Yy.svmagic=10,Yy.svlightning=10,Yy.svcold=10,Yy.svfire=10,Yy.str+=bk+Ck,Yy.sta+=vk+Mk,Yy.wis+=yk+Gwis,Yy.intel+=kk,Yy.dex+=Sk,Yy.agi+=wk,Yy.playtime=0,Yy.deaths=0,Yy.mobsSlain=0,Yy.escapes=0,Yy.totalGold=0,Yy.uniquesFound=0,Yy.raresFound=0,Yy.magicFound=0,Yy.upgrades=0,Yy.raresSlain=0,Yy.championsSlain=0,Yy.epicQuests=0,Yy.quests=0,Yy.comboOverall=0,Yy.comboPermafrost=0,Yy.comboKedgeKeep=0,Yy.comboSolB=0,Yy.comboMistmoore=0,Yy.comboLowerGuk=0,Yy.comboCazicThule=0,Yy.comboPlaneofFear=0,Yy.comboPlaneofHate=0;for(n=1;n<=12;n++)Yy["talent"+n]=0;"Warrior"!==Yy.job&&"Ranger"!==Yy.job&&"Paladin"!==Yy.job&&"Shadow Knight"!==Yy.job||(Yy.oneHandSlash=1,Yy.twoHandSlash=1,Yy.oneHandBlunt=1,Yy.twoHandBlunt=1),"Rogue"!==Yy.job&&"Warrior"!==Yy.job&&"Ranger"!==Yy.job||(Yy.oneHandSlash=1,Yy.piercing=1,Yy.oneHandBlunt=1),"Bard"===Yy.job&&(Yy.oneHandSlash=1,Yy.piercing=1,Yy.oneHandBlunt=1),"Cleric"!==Yy.job&&"Shaman"!==Yy.job&&"Monk"!==Yy.job||(Yy.oneHandBlunt=1,Yy.twoHandBlunt=1),"Monk"===Yy.job&&(Yy.dualWield=1),"Necromancer"!==Yy.job&&"Enchanter"!==Yy.job&&"Magician"!==Yy.job&&"Wizard"!==Yy.job||(Yy.piercing=1,Yy.twoHandBlunt=1,Yy.oneHandBlunt=1),"Druid"===Yy.job&&(Yy.oneHandBlunt=1,Yy.twoHandBlunt=1,Yy.oneHandSlash=1),"Bard"!==Yy.job&&"Ranger"!==Yy.job&&"Necromancer"!==Yy.job&&"Enchanter"!==Yy.job&&"Magician"!==Yy.job&&"Druid"!==Yy.job&&"Shadow Knight"!==Yy.job&&"Shaman"!==Yy.job&&"Wizard"!==Yy.job&&"Paladin"!==Yy.job&&"Cleric"!==Yy.job||(Yy.alteration=1,Yy.evocation=1,Yy.conjuration=1,Yy.abjuration=1,Yy.channeling=1),Yy.zone="Edenburg","Human"===Yy.race&&(Yy.svpoison=Yy.svpoison+5,Yy.svlightning=Yy.svlightning+5),"Barbarian"===Yy.race&&(Yy.svcold=Yy.svcold+10),"Dwarf"===Yy.race&&(Yy.svpoison=Yy.svpoison+5,Yy.svmagic=Yy.svmagic+5),"Erudite"===Yy.race&&(Yy.svfire=Yy.svfire+5,Yy.svmagic=Yy.svmagic+5,Yy.svlightning=Yy.svlightning-5),"Halfling"===Yy.race&&(Yy.svpoison=Yy.svpoison+5,Yy.svlightning=Yy.svlightning-5),"Gnome"===Yy.race&&(Yy.svlightning=Yy.svlightning+10),"Troll"===Yy.race&&(Yy.svfire=Yy.svfire-10),"Ogre"===Yy.race&&(Yy.svmagic=Yy.svmagic-5),"High Elf"!==Yy.race&&"Wood Elf"!==Yy.race&&"Dark Elf"!==Yy.race&&"Half Elf"!==Yy.race||(Yy.svfire=Yy.svfire+5,Yy.svcold=Yy.svcold+5);var a=Yy.zone;Yy.zoneN=a,Yy.zoneH=a,Yy.subzone=0,Yy.subzoneN=0,Yy.subzoneH=0,wa(),"Warrior"!==Yy.job&&"Monk"!==Yy.job&&"Rogue"!==Yy.job||(Yy.maxMp=100,Yy.mp=0);for(var n=0;n<=23;n++)Lmy["C"+n]="";!0===e("#normalId").hasClass("ccActive")?Yy.hardcoreMode="false":Yy.hardcoreMode="true",function(){Nn("Creating Character..."),mS.getElementById("ccBg").style.display="none",e.ajax({data:{run:"createCharacter",my:Yy}}).done(function(a){""!==a?(mS.getElementById("ccBg").style.display="block",Nn(a)):(zn(),cS.to("#ccBg",.5,{opacity:0,onComplete:function(){this.target.css("display","none"),e("#characterSelectScreen").css({display:"block",opacity:0}),cS.to("#characterSelectScreen",.5,{opacity:1})}}))}).fail(function(){xy("Unable to communicate with the server.<br>Please try again later.")})}()}function cn(){e("#window3a").swappable({items:".buttons, .NCbuttons, .spacers",cursorAt:{top:-5},distance:12,placeholder:"placeHolder",helper:"clone",opacity:1,start:function(){Qa("button_2"),hI=!0},stop:function(){Da(),hI=!1,e("#window3a li").css({boxShadow:"1px 0 #000 inset, 0 1px 0 #000 inset, 0 -1px #000 inset, -1px 0 #000 inset"}),Ha()}}),e("#window3a").disableSelection()}function mn(){var e="",a="PlaneofFear";return bS.Q[2][a]>1?("Warrior"===Yy.job&&(e="Warlord"),"Rogue"===Yy.job&&(e="Assassin"),"Monk"===Yy.job&&(e="Grandmaster"),"Bard"===Yy.job&&(e="Virtuoso"),"Ranger"===Yy.job&&(e="Warder"),"Paladin"===Yy.job&&(e="Crusader"),"Shadow Knight"===Yy.job&&(e="Grave Lord"),"Druid"===Yy.job&&(e="Hierophant"),"Cleric"===Yy.job&&(e="High Priest"),"Shaman"===Yy.job&&(e="Oracle"),"Necromancer"===Yy.job&&(e="Warlock"),"Enchanter"===Yy.job&&(e="Phantasmist"),"Magician"===Yy.job&&(e="Arch Mage"),"Wizard"===Yy.job&&(e="Sorcerer")):bS.Q[1][a]>1?("Warrior"===Yy.job&&(e="Myrmidon"),"Rogue"===Yy.job&&(e="Blackguard"),"Monk"===Yy.job&&(e="Master"),"Bard"===Yy.job&&(e="Troubadour"),"Ranger"===Yy.job&&(e="Outrider"),"Paladin"===Yy.job&&(e="Knight"),"Shadow Knight"===Yy.job&&(e="Revenant"),"Druid"===Yy.job&&(e="Preserver"),"Cleric"===Yy.job&&(e="Templar"),"Shaman"===Yy.job&&(e="Luminary"),"Necromancer"===Yy.job&&(e="Defiler"),"Enchanter"===Yy.job&&(e="Beguiler"),"Magician"===Yy.job&&(e="Conjurer"),"Wizard"===Yy.job&&(e="Evoker")):bS.Q[0][a]>1&&("Warrior"===Yy.job&&(e="Champion"),"Rogue"===Yy.job&&(e="Rake"),"Monk"===Yy.job&&(e="Disciple"),"Bard"===Yy.job&&(e="Minstrel"),"Ranger"===Yy.job&&(e="Pathfinder"),"Paladin"===Yy.job&&(e="Cavalier"),"Shadow Knight"===Yy.job&&(e="Reaver"),"Druid"===Yy.job&&(e="Wanderer"),"Cleric"===Yy.job&&(e="Vicar"),"Shaman"===Yy.job&&(e="Mystic"),"Necromancer"===Yy.job&&(e="Heretic"),"Enchanter"===Yy.job&&(e="Illusionist"),"Magician"===Yy.job&&(e="Elementalist"),"Wizard"===Yy.job&&(e="Channeler")),e}function un(){var e=1e3,a=bS.eq[12];"slashed"!==a.type&&"pierced"!==a.type&&"crushed"!==a.type&&"punched"!==a.type||(e=500),nI=e}function fn(){var e={poison:zy.poisonDamageEquip,magic:_(),lightning:zy.lightningDamageEquip,cold:zy.coldDamageEquip,fire:zy.fireDamageEquip},a="poison",n=e.poison;for(var t in e)e[t]>n&&(a=t,n=e[t]);return a}function hn(e,a,n){gI="slashed"===bS.eq[12].type||"crushed"===bS.eq[12].type||"punched"===bS.eq[12].type||"pierced"===bS.eq[12].type?~~(bS.eq[12].damage/pe()*12400):~~(bS.eq[12].damage/pe()*6066),bI=bS.eq[14].damage<=1?0:~~(bS.eq[14].damage/bS.eq[14].delay*6066)}function gn(){e("#icebolt").css("backgroundPosition","-300% 0"),Yy.talent1>=20&&(mType="lightning",e("#icebolt").css("backgroundPosition","-400% 0")),Yy.talent10>=20&&(mType="fire",e("#icebolt").css("backgroundPosition","-700% 0"))}function pn(){vI[112]=mS.createElement("img"),vI[113]=mS.createElement("img"),vI[212]=mS.createElement("audio"),vI[213]=mS.createElement("audio");for(var e=12;e<=13;e++){var a=vI[100+e];a.src="/classic/images1/blank.png";var n=bS.eq[e].name;"Ebony Blade"===n||"Spriggan's Blade"===n?a.src="/classic/images1/rootImage.png":"Baezil's Vortex"===n||"Rathmonan's Vortex"===n?a.src="/classic/images1/lightningNova.png":"Flamebellow"===n?a.src="/classic/images1/fireNova.png":"Scimitar of the Mistwalker"===n||"Scimitar of the Grovecaller"===n||"Jysin's Blade of the Darkwind"===n?(vI[114]=mS.createElement("img"),vI[114].src="/classic/images1/a white wolf.png"):"Plankton Laced Greatsword"===n?(a.src="/classic/images1/frostNova.png",vI[200+e].src=YS+"novaice."+SH):"Megnemon's Glacial Crook"===n&&(a.src="/classic/images1/glacialSpike.png",vI[200+e].src=YS+"icespike1."+SH)}}function bn(){var a=sy("neverworks",8,640,384,400,161,!0);a.x=640,a.y=384,a.alpha=0,a.image.onload=function(){var n=a.getBounds();a.cache(n.x,n.y,n.width,n.height),t1=new uS.Text("presented by","15px Arial","#fff"),t1.set({x:640,y:150,textAlign:"center",alpha:0}),Nw[8].addChild(t1),cS.to(t1,1,{alpha:1}),cS.set(a,{easel:{saturation:0},rotation:345,scaleX:1,scaleY:1}),cS.to(a,2,{delay:1,rotation:363,onComplete:function(){cS.to(a,.25,{delay:1,rotation:360})}}),cS.to(a,1,{delay:1,alpha:1,onComplete:function(){var n=a.getBounds();a.cache(n.x,n.y,n.width,n.height),cS.to(a,1.5,{easel:{saturation:1},delay:.5,ease:pS.lin,onComplete:function(){cS.to(a,.5,{delay:1.5,alpha:0,onComplete:function(){oy(8,a),function(){function a(a,n){"Intro"===zy.view&&cS.to("#credits",.5,{opacity:0,onComplete:function(){e("#creditTitle").text(a),e("#creditName").text(n),cS.to("#credits",.5,{delay:.5,opacity:1})}}),"Intro"===zy.view&&""!==a||e("#credits").remove()}mS.getElementById("introText2").style.display="none",canWorldMap=new uS.Bitmap("/classic/images1/worldMap.jpg"),canWorldMap.image.onload=function(){canWorldMap.setTransform(640,384,1,1,0,0,0,640,384),canWorldMap.alpha=0,Nw[8].addChild(canWorldMap),cS.to(canWorldMap,60,{scaleX:2,scaleY:2,x:1120,y:200,ease:pS.lin,repeat:-1,yoyo:!0}),cS.to(canWorldMap,2,{alpha:1,ease:pS.sout}),Ry("The world of Vandamor. It has been more than 500 years since the Imperial Shattering, a period of global war throughout the world.<br><br>The outcome of the Great War led to a long-standing period of relative peace, cooperation, and prosperity among all of the nations.<br><br>However, in recent times, unusual levels of antagonism have concerned each nation's leaders. Some believe the chaos has been precipitated by the Gods themselves.<br><br>In ancient times the Gods were known to meddle in the national affairs of Vandamor. They stood to gain by acquiring more followers. The more worshippers a deity has, the more powerful their influence becomes.<br><br>Due to the period of relative calm, the people of Vandamor have been inculcated with complacency. A great hero is needed, in this chaotic time, to persevere, and re-establish peace in the world.<br><br>You have enlisted in the Edenburg Training Detachment to help quell the recent incursions. Edenburg is the capital of the human nation and a key port city in the old Imperial system.<br><br>Your adventure begins with Edenburg's perimeter under siege by orcs."),mS.getElementById("introClick").style.display="block"};for(var n=["Producer","Joe Leonard","Lead Artist","Jocelyn Sarvida","Composer","Matthew Pablo","UI Artist","Tan Kwok Yeow","UI Artist","J.W. Bjerk","Programmer","Joe Leonard","Artist","Fedor Sosnin","Writer","Joe Leonard","Testing","Stephen Mullers","Consulting","Chris Chegwidden","",""],t=0;n.length>0;)cS.delayedCall(t,a,[n.shift(),n.shift()]),t+=6}()}}),cS.to(t1,.5,{delay:1.5,alpha:0,onComplete:function(){oy(8,t1)}})}})}})}}function vn(){oI=Yy.job.replace(/ /g,""),(wH={}).hpTier=function(){var e=4.5;return"Paladin"===Yy.job||"Shadow Knight"===Yy.job||"Ranger"===Yy.job||"Bard"===Yy.job||"Monk"===Yy.job?e=3.8:"Cleric"===Yy.job||"Shaman"===Yy.job||"Druid"===Yy.job||"Rogue"===Yy.job?e=2.5:"Necromancer"!==Yy.job&&"Enchanter"!==Yy.job&&"Magician"!==Yy.job&&"Wizard"!==Yy.job||(e=2),e}(),wH.mpTier=function(){var e=2;return"Cleric"===Yy.job||"Shaman"===Yy.job||"Druid"===Yy.job?e=3.8:"Necromancer"!==Yy.job&&"Enchanter"!==Yy.job&&"Magician"!==Yy.job&&"Wizard"!==Yy.job||(e=4.5),e}(),wH.mpClass=function(){var e="melee";return"Necromancer"===Yy.job||"Enchanter"===Yy.job||"Magician"===Yy.job||"Wizard"===Yy.job||"Bard"===Yy.job?e="intCaster":"Shadow Knight"===Yy.job?e="intHybrid":"Druid"===Yy.job||"Cleric"===Yy.job||"Shaman"===Yy.job?e="wisCaster":"Ranger"!==Yy.job&&"Paladin"!==Yy.job||(e="wisHybrid"),e}(),wH.jobType=function(){var e="melee";return"Ranger"!==Yy.job&&"Shadow Knight"!==Yy.job&&"Paladin"!==Yy.job||(e="hybrid"),"Druid"!==Yy.job&&"Cleric"!==Yy.job&&"Shaman"!==Yy.job||(e="healer"),"Necromancer"!==Yy.job&&"Enchanter"!==Yy.job&&"Magician"!==Yy.job&&"Wizard"!==Yy.job||(e="caster"),e}(),wH.DoneCD=oI+"DoneCD",wH.Cooldowns=oI+"Cooldowns",wH.SkillMap=oI+"SkillMap",wH.PhyEnh=oI+"PhyEnh",wH.MagEnh=oI+"MagEnh",wH.DotEnh=oI+"DotEnh",wH.CheckSkills="check"+oI+"Skills"}function yn(){if(""!=Yy.name&&null!=Yy.name){if(!0!==e("#enterworld").hasClass("disabled")){zy.view="Game",startTime=new H,"Bard"===Yy.job&&(mS.getElementById("spellbarlabel").innerHTML="SINGING"),vn(),function(){Yy.hp<=0&&("Warrior"!==Yy.job&&"Monk"!==Yy.job&&"Rogue"!==Yy.job||(Yy.mp=0));0==Yy.mapX&&(delete Yy.mapX,delete Yy.mapY);"Shaman"===Yy.job&&0===Yy.piercing&&(Yy.piercing=1);Lmy.autoAttackOption===E&&(Lmy.autoAttackOption=Yy.autoAttackOption);Lmy.normalFilter===E&&(Lmy.normalFilter="None");Lmy.magicFilter===E&&(Lmy.magicFilter="None");Lmy.rareFilter===E&&(Lmy.rareFilter="None");Lmy.uniqueFilter===E&&(Lmy.uniqueFilter="None");Lmy.setFilter===E&&(Lmy.setFilter="None");Yy.comboOverall===E&&(Yy.comboOverall=0);Yy.zoneN===E&&(Yy.zoneN="Aspen Grove");Yy.zoneH===E&&(Yy.zoneH=Yy.zoneN);Yy.subzoneN===E&&(Yy.subzoneN=0);Yy.subzoneH===E&&(Yy.subzoneH=0);""===Yy.subzone&&(Yy.subzone=0);""===Yy.subzoneN&&(Yy.subzoneN=0);""===Yy.subzoneH&&(Yy.subzoneH=0);Yy.quests===E&&(Yy.quests=0);Lmy.C0===E&&(Lmy.C0=Yy.C0);Lmy.C1===E&&(Lmy.C1=Yy.C1);Lmy.C2===E&&(Lmy.C2=Yy.C2);Lmy.C3===E&&(Lmy.C3=Yy.C3);Lmy.C4===E&&(Lmy.C4=Yy.C4);Lmy.C5===E&&(Lmy.C5=Yy.C5);Lmy.C6===E&&(Lmy.C6=Yy.C6);Lmy.C7===E&&(Lmy.C7=Yy.C7);Lmy.C8===E&&(Lmy.C8=Yy.C8);Lmy.C9===E&&(Lmy.C9=Yy.C9);Lmy.C10===E&&(Lmy.C10=Yy.C10);Lmy.C11===E&&(Lmy.C11=Yy.C11);Lmy.C12===E&&(Lmy.C12=Yy.C12);Lmy.C13===E&&(Lmy.C13=Yy.C13);Lmy.C14===E&&(Lmy.C14=Yy.C14);Lmy.C15===E&&(Lmy.C15=Yy.C15);Lmy.C16===E&&(Lmy.C16=Yy.C16);Lmy.C17===E&&(Lmy.C17=Yy.C17);Lmy.C18===E&&(Lmy.C18=Yy.C18);Lmy.C19===E&&(Lmy.C19=Yy.C19);Lmy.C20===E&&(Lmy.C20=Yy.C20);Lmy.C21===E&&(Lmy.C21=Yy.C21);Lmy.C22===E&&(Lmy.C22=Yy.C22);Lmy.C23===E&&(Lmy.C23=Yy.C23);Lmy.window3X===E&&(Lmy.window3X=Yy.window3X);Lmy.window3Y===E&&(Lmy.window3Y=Yy.window3Y);Lmy.window6X===E&&(Lmy.window6X=Yy.window6X);Lmy.window6Y===E&&(Lmy.window6Y=Yy.window6Y);Lmy.window1X===E&&(Lmy.window1X=20);Lmy.window1Y===E&&(Lmy.window1Y=20);Lmy.questJournalX===E&&(Lmy.questJournalX=20);Lmy.questJournalY===E&&(Lmy.questJournalY=20);Lmy.inventoryWindowX===E&&(Lmy.inventoryWindowX=640);Lmy.inventoryWindowY===E&&(Lmy.inventoryWindowY=20);Lmy.bankX===E&&(Lmy.bankX=20);Lmy.bankY===E&&(Lmy.bankY=20);kw.soundStatus===E&&(kw.soundStatus=Yy.soundStatus);kw.musicStatus===E&&(kw.musicStatus=Yy.musicStatus);kw.tooltipMode===E&&(kw.tooltipMode=Yy.monsterAvoidance);kw.videoSetting===E&&(kw.videoSetting="High");kw.hideMenu===E&&(kw.hideMenu="Off");kw.chatMyHit===E&&(kw.chatMyHit="Off");kw.showCombatLog===E&&(kw.showCombatLog="On");kw.debugMode===E&&(kw.debugMode="Off");kw.fastDestroy===E&&(kw.fastDestroy="On");kw.gold===E&&(kw.gold=0);kw.lastCharacter===E&&(kw.lastCharacter=1);Yy.mob0!==E&&(delete Yy.mob0,delete Yy.mob1,delete Yy.mob2,delete Yy.mob3,delete Yy.mob4,delete Yy.server);Yy.monsterAvoidance!==E&&delete Yy.monsterAvoidance;Yy.weatherStatus!==E&&delete Yy.weatherStatus;Yy.soundStatus!==E&&delete Yy.soundStatus;Yy.musicStatus!==E&&delete Yy.musicStatus;Yy.autoAttackOption!==E&&delete Yy.autoAttackOption;Yy.randomEvents!==E&&delete Yy.randomEvents;Yy.scriptedEvents!==E&&delete Yy.scriptedEvents;Yy.NC0!==E&&delete Yy.NC0;Yy.NC1!==E&&delete Yy.NC1;Yy.NC2!==E&&delete Yy.NC2;Yy.NC3!==E&&delete Yy.NC3;Yy.NC4!==E&&delete Yy.NC4;Yy.NC5!==E&&delete Yy.NC5;Yy.NC6!==E&&delete Yy.NC6;Yy.NC7!==E&&delete Yy.NC7;Yy.NC8!==E&&delete Yy.NC8;Yy.NC9!==E&&delete Yy.NC9;Yy.C0!==E&&delete Yy.C0;Yy.C1!==E&&delete Yy.C1;Yy.C2!==E&&delete Yy.C2;Yy.C3!==E&&delete Yy.C3;Yy.C4!==E&&delete Yy.C4;Yy.C5!==E&&delete Yy.C5;Yy.C6!==E&&delete Yy.C6;Yy.C7!==E&&delete Yy.C7;Yy.C8!==E&&delete Yy.C8;Yy.C9!==E&&delete Yy.C9;Yy.C10!==E&&delete Yy.C10;Yy.C11!==E&&delete Yy.C11;Yy.C12!==E&&delete Yy.C12;Yy.C13!==E&&delete Yy.C13;Yy.C14!==E&&delete Yy.C14;Yy.C15!==E&&(delete Yy.C15,delete Yy.C16,delete Yy.C17,delete Yy.C18,delete Yy.C19,delete Yy.C20,delete Yy.C21,delete Yy.C22,delete Yy.C23);Yy.Misc0!==E&&delete Yy.Misc0;Yy.Misc1!==E&&delete Yy.Misc1;Yy.Misc2!==E&&delete Yy.Misc2;Yy.Misc3!==E&&delete Yy.Misc3;Yy.Misc4!==E&&delete Yy.Misc4;Yy.window3X!==E&&delete Yy.window3X;Yy.window3Y!==E&&delete Yy.window3Y;Yy.window6X!==E&&delete Yy.window6X;Yy.window6Y!==E&&delete Yy.window6Y;kw.autoHide!==E&&delete kw.autoHide;Yy.hardcoreMode||(Yy.hardcoreMode=!1);!0===Yy.hardcoreMode&&(Yy.hardcoreMode="true");!1===Yy.hardcoreMode&&(Yy.hardcoreMode="false");Yy.setFound===E&&(Yy.setFound=0);Yy.story===E&&(Yy.story="Intro");Yy.patch===E&&(Yy.patch=patchVersion);Yy.talent1===E&&(Yy.talent1=0);Yy.talent2===E&&(Yy.talent2=0);Yy.talent3===E&&(Yy.talent3=0);Yy.talent4===E&&(Yy.talent4=0);Yy.talent5===E&&(Yy.talent5=0);Yy.talent6===E&&(Yy.talent6=0);Yy.talent7===E&&(Yy.talent7=0);Yy.talent8===E&&(Yy.talent8=0);Yy.talent9===E&&(Yy.talent9=0);Yy.talent10===E&&(Yy.talent10=0);Yy.talent11===E&&(Yy.talent11=0);Yy.talent12===E&&(Yy.talent12=0);Yy.lastName===E&&(Yy.lastName="");Yy.comboPlaneofFear===E&&(Yy.comboPlaneofFear=0);Yy.comboPlaneofHate===E&&(Yy.comboPlaneofHate=0);if(bS.Q[0].repeatCB===E)for(e=0;e<=2;e++)bS.Q[e].repeatCB=0,bS.Q[e].repeatER=0;if(bS.Q[0].PlaneofFear===E)for(e=0;e<=2;e++)bS.Q[e].PlaneofFear=0,bS.Q[e].PlaneofHate=0;if(bS.Q[0].repeatCm3===E)for(e=0;e<=2;e++)bS.Q[e].repeatCm3=0,bS.Q[e].repeatCt3=0,bS.Q[e].repeatKk3=0,bS.Q[e].repeatNl3=0,bS.Q[e].repeatLg3=0,bS.Q[e].repeatKk4=0,bS.Q[e].repeatNl4=0,bS.Q[e].KK6=0,bS.Q[e].KK7=0,bS.Q[e].KK8=0,bS.Q[e].NL7=0,bS.Q[e].NL8=0,bS.Q[e].NL9=0,bS.Q[e].NL10=0,bS.Q[e].NL11=0,bS.Q[e].NL12=0;if(bS.Q[0].KK6===E)for(e=0;e<=2;e++)bS.Q[e].KK6=0,bS.Q[e].KK7=0,bS.Q[e].KK8=0;if(bS.Q[0].CM1===E)for(e=0;e<=2;e++)bS.Q[e].CM1=0,bS.Q[e].CM2=0,bS.Q[e].CM3=0,bS.Q[e].CM4=0,bS.Q[e].CM5=0,bS.Q[e].CM6=0,bS.Q[e].CB1=0,bS.Q[e].CB2=0,bS.Q[e].CB3=0,bS.Q[e].CB4=0,bS.Q[e].CB5=0,bS.Q[e].ER1=0,bS.Q[e].ER2=0,bS.Q[e].ER3=0,bS.Q[e].ER4=0,bS.Q[e].ER5=0,bS.Q[e].GF1=0,bS.Q[e].KK1=0,bS.Q[e].KK2=0,bS.Q[e].KK3=0,bS.Q[e].KK4=0,bS.Q[e].KK5=0,bS.Q[e].LF1=0,bS.Q[e].LF2=0,bS.Q[e].BF1=0,bS.Q[e].BF2=0,bS.Q[e].BF3=0,bS.Q[e].BF4=0,bS.Q[e].BB1=0,bS.Q[e].BB2=0,bS.Q[e].BB3=0,bS.Q[e].BB4=0,bS.Q[e].CT1=0,bS.Q[e].CT2=0,bS.Q[e].CT3=0,bS.Q[e].CT4=0,bS.Q[e].CT5=0,bS.Q[e].LG1=0,bS.Q[e].LG2=0,bS.Q[e].LG3=0,bS.Q[e].LG4=0,bS.Q[e].LG5=0,bS.Q[e].LG6=0,bS.Q[e].NL1=0,bS.Q[e].NL2=0,bS.Q[e].NL3=0,bS.Q[e].NL4=0,bS.Q[e].NL5=0,bS.Q[e].NL6=0,bS.Q[e].NJ1=0,bS.Q[e].NJ2=0,bS.Q[e].NJ3=0,bS.Q[e].NJ4=0,bS.Q[e].NJ5=0,bS.Q[e].NR1=0,bS.Q[e].NR2=0,bS.Q[e].PF1=0,bS.Q[e].PF2=0,bS.Q[e].PF3=0,bS.Q[e].PF4=0,bS.Q[e].PF5=0,bS.Q[e].PF6=0,bS.Q[e].PF7=0,bS.Q[e].PF8=0,bS.Q[e].PF9=0,bS.Q[e].PF10=0,bS.Q[e].PF11=0,bS.Q[e].PF12=0,bS.Q[e].PF13=0,bS.Q[e].PF14=0,bS.Q[e].PF15=0,bS.Q[e].PF16=0,bS.Q[e].PF17=0,bS.Q[e].PF18=0,bS.Q[e].PF19=0,bS.Q[e].PF20=0,bS.Q[e].PF21=0,bS.Q[e].PF22=0,bS.Q[e].PH1=0,bS.Q[e].PH2=0,bS.Q[e].PH3=0,bS.Q[e].PH4=0,bS.Q[e].PH5=0,bS.Q[e].PH6=0,bS.Q[e].PH7=0,bS.Q[e].PH8=0,bS.Q[e].PH9=0,bS.Q[e].PH10=0,bS.Q[e].PH11=0,bS.Q[e].PH12=0,bS.Q[e].PH13=0,bS.Q[e].PK1=0,bS.Q[e].PK2=0,bS.Q[e].PK3=0,bS.Q[e].PK4=0,bS.Q[e].PK5=0,bS.Q[e].PK6=0,bS.Q[e].PK7=0,bS.Q[e].PK8=0,bS.Q[e].PK9=0,bS.Q[e].UG1=0,bS.Q[e].UG2=0,bS.Q[e].UG3=0,bS.Q[e].UG4=0;if(bS.Q[0].repeatPk4===E)for(e=0;e<=2;e++)bS.Q[e].repeatPk4=1;Yy.title===E&&(Yy.title="");Yy.difficulty===E&&(Yy.difficulty=1);for(e=0;e<=125;e++)bS.bank[e].cold===E&&(bS.bank[e].cold=0),bS.bank[e].silence===E&&(bS.bank[e].silence=0),bS.bank[e].leech===E&&(bS.bank[e].leech=0),bS.bank[e].wraith===E&&(bS.bank[e].wraith=0),bS.bank[e].req===E&&(bS.bank[e].req=0),(bS.bank[e].enhanceAll===E||isNaN(bS.bank[e].enhanceAll))&&(bS.bank[e].enhanceAll=0),bS.bank[e].quality===E&&(bS.bank[e].quality=0),bS.bank[e].lightRadius<0&&(bS.bank[e].lightRadius=0);for(e=0;e<=23;e++)bS.item[e].cold===E&&(bS.item[e].cold=0),bS.item[e].silence===E&&(bS.item[e].silence=0),bS.item[e].leech===E&&(bS.item[e].leech=0),bS.item[e].wraith===E&&(bS.item[e].wraith=0),bS.item[e].req===E&&(bS.item[e].req=0),(bS.item[e].enhanceAll===E||isNaN(bS.item[e].enhanceAll))&&(bS.item[e].enhanceAll=0),bS.item[e].quality===E&&(bS.item[e].quality=0),bS.item[e].lightRadius<0&&(bS.item[e].lightRadius=0);for(var e=0;e<=14;e++)bS.eq[e].cold===E&&(bS.eq[e].cold=0),bS.eq[e].silence===E&&(bS.eq[e].silence=0),bS.eq[e].leech===E&&(bS.eq[e].leech=0),bS.eq[e].wraith===E&&(bS.eq[e].wraith=0),bS.eq[e].req===E&&(bS.eq[e].req=0),(bS.eq[e].enhanceAll===E||isNaN(bS.eq[e].enhanceAll))&&(bS.eq[e].enhanceAll=0),bS.eq[e].quality===E&&(bS.eq[e].quality=0),bS.eq[e].lightRadius<0&&(bS.eq[e].lightRadius=0);Yy.championsSlain===E&&(Yy.championsSlain=0);Yy.subzone===E&&(Yy.subzone=1);var a=(Yy.patch+"").split("-"),n=1*a[0],t=1*a[1],i=1*a[2];n<=0&&t<=8&&i<=67&&(Gv(),DS=!0)}(),function(){var e,a=!1;if(tw>0&&""!==Yy.job){"Warrior"===Yy.job?e=["slice","tremor","flshhit6","flshhit5","flshhit3","energyshield","shoutFemale","warCry","warriorShout","spellCastHeal2","spellDoneBuff","flshhit4"]:"Monk"===Yy.job?e=["flshhit3","flshhit4","flshhit5","flshhit6","flshhit7","death_mb","death_fl","novaice","spellCastHeal3","quickness","lightning2","handofgod","spellCastEvoke2","sanctuary","drakesat","holylight"]:"Rogue"===Yy.job?e=["fade","bash","flshhit3","chillblood","spellDoneBoom","cloak","quickness","stab","handofgod","cobra","summon","slice","fall_hit"]:"Shadow Knight"===Yy.job?(e=["slice","skeleton_die","skeleton_att","skeleton_hit"],a=!0):"Paladin"===Yy.job?(e=["holybolt","lightning2","zeal","handofgod","fanaticism","cleansing","spellCastHeal3"],a=!0):"Ranger"===Yy.job?(e=["arrow3","arrowhit","bowdraw","novaelec","explode1","explode2","explode3","lightning2"],a=!0):"Bard"===Yy.job?e=["might","dissonance","quickness","prayer","fanaticism","holybolt","sanctuary","spellDoneBuff","confuse","spellDoneHeal","clarity","decrepify","shieldofsongs","dirge","spellDoneBuff","handofgod","flshhit4"]:"Druid"===Yy.job?(e=["windcast","lightning1","lightning2","lightning3","earthquakeloop1","earthquakeloop2","blue3","explode1","explode2","explode3"],a=!0):"Cleric"===Yy.job?(e=["spellCastHeal3","redemption","handofgod","dirge","bolthammercast","handofgodbolt"],a=!0):"Shaman"===Yy.job?(e=["poisonnova","wolf_att2","wolf_die2","wolf_hit2"],a=!0):"Necromancer"===Yy.job?(e=["skeleton_die","skeleton_att","skeleton_hit","bonespirit","corpseexplode4","confuse","corpseexplodecast"],a=!0):"Enchanter"===Yy.job?(e=["fall_hit","novaice"],a=!0):"Magician"===Yy.job?(e=["elem_die3","elem_att3","elem_hit3","infernoloop","icespike1","icespike2","icespike3","energyshield","zap1","zap2","zap3","blue3","poisonnova","lightning1","lightning2","lightning3","explode1","explode2","explode3","novaelec","fade"],a=!0):"Wizard"===Yy.job&&(e=["zap1","zap2","zap3","explode1","explode2","explode3","chargedbolt","novaice","icebolt1","icebolt2","icebolt3","lightning1","lightning2","lightning3","icespike1","shivers","meteorlaunch","handofgod","teleport","summon"],a=!0),e.push("levelup2","button_2","equipRing","equipAccessory","equipWeapon","equipShield","equipPlate","equipChain","equipLeather","endquest","shldblk"),"Wood Elf"===Yy.race&&e.push("fade"),!0===a&&e.push("spellDoneSlam","spellDoneBuff","spellDoneBoom","spellDoneFlames","spellDoneHeal","spellDoneHarm","spellCastEvoke1","spellCastEvoke2","spellCastDot","spellCastAbjure"),e.push("flshhit1","flshhit2","kick","blockBlunt","blockSword");for(var n=0,t=e.length;n<t;n++)vI[n+250]=mS.createElement("audio"),vI[n+250].src=YS+e[n]+"."+SH}}(),pn(),mS.getElementById("tooltipname").style.display="block",NG.mobTraits.innerHTML="",function(){var a="";"Warrior"===Yy.job&&(a='<li class="buttons nonglobal" id="avengingstrikeId"></li><li class="buttons warskill" id="slamId"></li><li class="buttons warskill" id="warriorkickId"></li><li class="buttons warskill" id="hemorrhageId"></li><li class="buttons warskill" id="shockwaveId"></li><li class="buttons nonglobal" id="pummelId"></li><li class="buttons nonglobal" id="subjugateId"></li><li class="buttons nonglobal" id="decisiveblowId"></li><li class="buttons warskill" id="absorbspellId"></li><li class="buttons nonglobal" id="frenziedrampageId"></li><li class="buttons nonglobal" id="enrageId"></li><li class="buttons warskill" id="furiousscornId"></li><li class="buttons warskill" id="triageId"></li><li class="buttons warskill" id="bulwarkId"></li><li class="buttons nonglobal" id="intrepidmightId"></li>'),"Monk"===Yy.job&&(a='<li class="buttons mnkskill" id="tigerstrikeId"></li><li class="buttons mnkskill" id="eaglestrikeId"></li><li class="buttons mnkskill" id="cheetahstrikeId"></li><li class="buttons mnkskill" id="cobrastrikeId"></li><li class="buttons mnkskill" id="dragonstrikeId"></li><li class="buttons mnkskill" id="cranekickId"></li><li class="buttons mnkskill" id="windmillkickId"></li><li class="buttons mnkskill" id="ancestralflurryId"></li><li class="buttons mnkskill" id="flyingkickId"></li><li class="buttons mnkskill" id="chakrablastId"></li><li class="buttons nonglobal" id="feigndeathId"></li><li class="buttons nonglobal" id="mendId"></li><li class="buttons nonglobal" id="stonefistsId"></li><li class="buttons nonglobal" id="intimidationId"></li><li class="buttons nonglobal" id="innerpeaceId"></li>'),"Rogue"===Yy.job&&(a='<li class="buttons rogskill" id="shadowstrikeId"></li><li class="buttons rogskill" id="sonicstrikeId"></li><li class="buttons rogskill" id="hyperstrikeId"></li><li class="buttons rogskill" id="widowstrikeId"></li><li class="buttons rogskill" id="miragestrikeId"></li><li class="buttons rogskill" id="lacerateId"></li><li class="buttons rogskill" id="backstabId"></li><li class="NCbuttons" id="roguehideId"></li><li class="buttons rogskill" id="staggershotId"></li><li class="buttons rogskill" id="lobotomizeId"></li><li class="buttons rogskill" id="prowlinggashId"></li><li class="buttons nonglobal" id="evadeId"></li><li class="buttons nonglobal" id="coldbloodId"></li><li class="buttons nonglobal" id="flashpowderId"></li><li class="buttons nonglobal" id="illusivemistId"></li><li class="buttons nonglobal" id="ancientwillId"></li>'),"Paladin"===Yy.job&&(a='<li class="buttons palskill" id="purgeId"></li><li class="buttons palskill" id="palslamId"></li><li class="buttons palskill" id="rebukeId"></li><li class="buttons palskill" id="vengeanceId"></li><li class="buttons nonglobal" id="layhandsId"></li><li class="buttons palskill" id="greaterhealingId"></li><li class="buttons palskill" id="holymightId"></li><li class="buttons palskill" id="palrootId"></li><li class="NCbuttons" id="valorId"></li><li class="NCbuttons" id="spiritarmorId"></li><li class="NCbuttons" id="divineprovidenceId"></li><li class="NCbuttons" id="symbolofryltanId"></li><li class="buttons palskill" id="ardentjudgment"></li><li class="buttons palskill" id="yaulpId"></li><li class="buttons palskill" id="cleanseId"></li><li class="buttons palskill" id="flashoflightId"></li>'),"Ranger"===Yy.job&&(a='<li class="buttons rngskill" id="rapidshotId"></li><li class="buttons rngskill" id="rangerkickId"></li><li class="buttons nonglobal" id="countershotId"></li><li class="buttons rngskill" id="trueshotarrowId"></li><li class="buttons rngskill" id="volleyshotId"></li><li class="buttons rngskill" id="lighthealingId"></li><li class="buttons rngskill" id="faerieflameId"></li><li class="NCbuttons" id="rangertrackId"></li><li class="NCbuttons" id="thistlecoatId"></li><li class="NCbuttons" id="feetlikecatId"></li><li class="NCbuttons" id="shieldofbramblesId"></li><li class="NCbuttons" id="rangersowId"></li><li class="buttons rngskill" id="igniteId"></li><li class="buttons rngskill" id="snareId"></li><li class="buttons rngskill" id="wardersrift"></li><li class="buttons nonglobal" id="weaponshieldId"></li>'),"Shadow Knight"===Yy.job&&(a='<li class="buttons shdskill" id="crescentcleaveId"></li><li class="buttons shdskill" id="shdslamId"></li><li class="buttons shdskill" id="deathstrikeId"></li><li class="buttons shdskill" id="gaspingfrenzyId"></li><li class="buttons nonglobal" id="harmtouchId"></li><li class="buttons shdskill" id="shdlifetapId"></li><li class="buttons shdskill" id="doomingdarknessId"></li><li class="buttons shdskill" id="heatbloodId"></li><li class="NCbuttons" id="summondeadId"></li><li class="NCbuttons" id="vampiricembraceId"></li><li class="NCbuttons" id="resistcoldId"></li><li class="buttons nonglobal" id="togglepetattackId"></li><li class="buttons nonglobal" id="strengthendeadId"></li><li class="buttons shdskill" id="shdfearId"></li><li class="buttons shdskill" id="siphonstrengthId"></li><li class="buttons shdskill" id="shdfeigndeathId"></li><li class="buttons shdskill" id="shadowvortexId"></li>'),"Bard"===Yy.job&&(a='<li class="buttons brdskill" id="chordsofdissonance"></li><li class="buttons brdskill" id="chantofbattle"></li><li class="buttons brdskill" id="accelerando"></li><li class="buttons brdskill" id="hymnofrestoration"></li><li class="buttons brdskill" id="songofthesirens"></li><li class="buttons brdskill" id="boastfulbellow"></li><li class="buttons brdskill" id="elementalrhythms"></li><li class="buttons brdskill" id="lucidlullaby"></li><li class="buttons brdskill" id="consonantchain"></li><li class="buttons brdskill" id="dissension"></li><li class="NCbuttons" id="rangertrackId"></li><li class="buttons brdskill" id="chorusofclarity"></li><li class="buttons brdskill" id="anthemdearms"></li><li class="buttons brdskill" id="euphonichymn"></li><li class="buttons brdskill" id="shieldofsongs"></li><li class="buttons brdskill" id="desperatedirge"></li>'),"Cleric"===Yy.job&&(a='<li class="buttons clrskill" id="smite"></li><li class="buttons clrskill" id="soundofforce"></li><li class="buttons clrskill" id="superiorhealing"></li><li class="buttons clrskill" id="bindingearth"></li><li class="buttons clrskill" id="expelcorruption"></li><li class="buttons clrskill" id="searingrevelation"></li><li class="buttons clrskill" id="martyrsblessing"></li><li class="NCbuttons" id="resolution"></li><li class="NCbuttons" id="armoroffaith"></li><li class="NCbuttons" id="divinesanctuary"></li><li class="NCbuttons" id="symbolofnaltron"></li><li class="buttons nonglobal" id="guardianangel"></li><li class="buttons clrskill" id="holywrath"></li><li class="buttons clrskill" id="markofjudgement"></li><li class="buttons clrskill" id="benediction"></li>'),"Druid"===Yy.job&&(a='<li class="buttons druskill" id="starfire"></li><li class="buttons druskill" id="dronesofdoom"></li><li class="buttons druskill" id="druhealing"></li><li class="buttons druskill" id="tornado"></li><li class="buttons druskill" id="engulfingroots"></li><li class="buttons druskill" id="driftingdeath"></li><li class="buttons druskill" id="lightningblast"></li><li class="NCbuttons" id="rangertrackId"></li><li class="NCbuttons" id="skinlikenature"></li><li class="NCbuttons" id="shieldofspikes"></li><li class="NCbuttons" id="drusow"></li><li class="NCbuttons" id="chloroplast"></li><li class="buttons druskill" id="earthquake"></li><li class="buttons druskill" id="hurricane"></li><li class="buttons druskill" id="sylvangrasp"></li><li class="buttons druskill" id="volcano"></li>'),"Shaman"===Yy.job&&(a='<li class="buttons shmskill" id="froststrike"></li><li class="buttons shmskill" id="scourge"></li><li class="buttons shmskill" id="shmhealing"></li><li class="buttons shmskill" id="togorsinsects"></li><li class="buttons nonglobal" id="togglepetattackId"></li><li class="buttons shmskill" id="cannibalize"></li><li class="buttons shmskill" id="enstill"></li><li class="buttons shmskill" id="poisonnova"></li><li class="NCbuttons" id="calloftheancients"></li><li class="NCbuttons" id="guardianspirit"></li><li class="NCbuttons" id="shmsow"></li><li class="NCbuttons" id="talismanofaltuna"></li><li class="buttons shmskill" id="affliction"></li><li class="buttons shmskill" id="reclaimblood"></li><li class="buttons shmskill" id="glacialimpact"></li><li class="buttons shmskill" id="devouringplague"></li>'),"Necromancer"===Yy.job&&(a='<li class="buttons necskill" id="bonespirit"></li><li class="buttons necskill" id="cascadingdarkness"></li><li class="buttons necskill" id="invokefear"></li><li class="buttons necskill" id="drainsoul"></li><li class="buttons necskill" id="feigndeath"></li><li class="buttons nonglobal" id="togglepetattackId"></li><li class="NCbuttons" id="invokedeath"></li><li class="NCbuttons" id="archshielding"></li><li class="buttons necskill" id="augmentdeath"></li><li class="buttons necskill" id="igniteblood"></li><li class="buttons necskill" id="corpseexplosion"></li><li class="buttons necskill" id="bondofdeath"></li><li class="buttons necskill" id="diamondskin"></li><li class="buttons necskill" id="asystole"></li><li class="buttons necskill" id="detonatesoul"></li><li class="buttons necskill" id="howlingterror"></li>'),"Enchanter"===Yy.job&&(a='<li class="buttons encskill" id="chaosflux"></li><li class="buttons encskill" id="gaspingembrace"></li><li class="buttons encskill" id="cajolingwhispers"></li><li class="buttons encskill" id="colorshift"></li><li class="buttons encskill" id="mesmerize"></li><li class="buttons encskill" id="shiftlessdeeds"></li><li class="buttons encskill" id="alacrity"></li><li class="buttons encskill" id="gravityflux"></li><li class="buttons encskill" id="mysticrune"></li><li class="buttons encskill" id="tashania"></li><li class="NCbuttons" id="discordantbarrier"></li><li class="NCbuttons" id="enchantweapon"></li><li class="NCbuttons" id="adorninggrace"></li><li class="NCbuttons" id="clarity"></li><li class="buttons encskill" id="enthrall"></li>'),"Magician"===Yy.job&&(a='<li class="buttons magskill" id="lavabolt"></li><li class="buttons magskill" id="firestorm"></li><li class="buttons magskill" id="frozenorb"></li><li class="buttons magskill" id="burnout"></li><li class="NCbuttons" id="earthelemental"></li><li class="NCbuttons" id="airelemental"></li><li class="NCbuttons" id="fireelemental"></li><li class="NCbuttons" id="frostelemental"></li><li class="NCbuttons" id="shieldoflava"></li><li class="NCbuttons" id="phantomplate"></li><li class="NCbuttons" id="elementalarmor"></li><li class="buttons magskill" id="manashield"></li><li class="buttons magskill" id="psionicstorm"></li><li class="buttons nonglobal" id="togglepetattackId"></li><li class="buttons magskill" id="reclaimelements"></li><li class="buttons magskill" id="elementalfury"></li><li class="buttons magskill" id="armageddon"></li><li class="buttons magskill" id="stasisfield"></li><li class="buttons magskill" id="alteredstate"></li>'),"Wizard"===Yy.job&&(a='<li class="buttons wizskill" id="icebolt"></li><li class="buttons wizskill" id="chargedbolts"></li><li class="buttons wizskill" id="frostnova"></li><li class="NCbuttons" id="viziersshielding"></li><li class="buttons wizskill" id="magicmissiles"></li><li class="buttons wizskill" id="fireball"></li><li class="buttons wizskill" id="deepfreeze"></li><li class="buttons wizskill" id="chainlightning"></li><li class="buttons wizskill" id="glacialspike"></li><li class="buttons wizskill" id="iceblock"></li><li class="buttons wizskill" id="icecomet"></li><li class="buttons nonglobal" id="counterspell"></li><li class="buttons nonglobal" id="harnessEther"></li><li class="buttons wizskill" id="meteor"></li><li class="buttons wizskill" id="mirrorimages"></li>'),a+='<li class="spacers" id="Comspace1"></li><li class="spacers" id="Comspace2"></li><li class="spacers" id="Comspace3"></li><li class="spacers" id="Comspace4"></li><li class="spacers" id="Comspace5"></li><li class="spacers" id="Comspace6"></li><li class="spacers" id="Comspace7"></li><li class="spacers" id="Comspace8"></li><li class="spacers" id="Comspace9"></li><li class="spacers" id="Comspace10"></li><li class="spacers" id="Comspace11"></li><li class="spacers" id="Comspace12"></li><li class="spacers" id="Comspace13"></li><li class="spacers" id="Comspace14"></li><li class="spacers" id="Comspace15"></li><li class="spacers" id="Comspace16"></li><li class="spacers" id="Comspace17"></li><li class="spacers" id="Comspace18"></li><li class="spacers" id="Comspace19"></li><li class="spacers" id="Comspace20"></li>',e("#window3a").append(a),cn();var n="";"Halfling"===Yy.race?"Rogue"!==Yy.job&&(n+='<li class="NCbuttons racebuttons" id="halflinghideId"></li>'):"Human"===Yy.race?n+='<li class="buttons nonglobal racebuttons" id="secondwindId"></li>':"Erudite"===Yy.race?n+='<li class="buttons nonglobal racebuttons" id="divineaegisId"></li>':"Barbarian"===Yy.race?n+='<li class="buttons nonglobal racebuttons" id="ancestralrampageId"></li>':"Wood Elf"===Yy.race?n+='<li class="buttons nonglobal racebuttons" id="tunaresglowId"></li>':"Half Elf"===Yy.race?n+='<li class="buttons nonglobal racebuttons" id="karanasinfusionId"></li>':"Dark Elf"===Yy.race?n+='<li class="buttons nonglobal racebuttons" id="sanguinetormentId"></li>':"Dwarf"===Yy.race?n+='<li class="buttons nonglobal racebuttons" id="granitevisageId"></li>':"Gnome"===Yy.race&&(n+='<li class="buttons nonglobal racebuttons" id="shortcircuitId"></li>'),""!==n&&e("#window6a").append(n)}(),Yy.title=mn(),zy.difficulty=RS.difficulty,mw=Ln(qn()),$NG.enterWorld2.css("display","block"),mS.getElementById("myhpbardiv").style.visibility="visible",e("#enterworld").addClass("disabled"),$NG.enterWorld1.css({display:"block",opacity:1}),mS.getElementById("worldMap").style.top="-900px",pH=1,zy.oldExp=Yy.exp,Fn(0),pw=!1;var a=new Image;a.src="/classic/images1/sprite"+Yy.job+"3.png",a.onload=function(){pw=!0},Xn(),Rn();var n=e('<div id="myName" class="strongShadow">').html(Yy.name+" "+Yy.lastName);e("#myhpbardiv").append(n);var t="#0066cc",i="#003388";"Monk"===Yy.job||"Rogue"===Yy.job?(t="#cc0",i="#880"):"Warrior"===Yy.job&&(t="#cc6600",i="#883300"),Hw=new uS.Stage(mS.getElementById("mympbarId")),TweenLite.ticker.addEventListener("tick",Hw.update,Hw);var o=new uS.Graphics;o.lf([i,t,t,i],[0,.3,.7,1],0,0,0,14).drawRect(0,0,192,14),Cw=new uS.Shape(o),Hw.addChild(Cw);!0===xS&&1,(Mw=new uS.Text("","12px Arial","#fff")).set({x:96,y:8,textAlign:"center",textBaseline:"middle"}),Mw.shadow=new uS.Shadow("#000",1,1,0),Hw.addChild(Mw),$NG.buttonreset.css("display","none"),U(),HI=fn(),un(),racialSkillId="","Human"===Yy.race&&(racialSkillId="secondwindId"),"Erudite"===Yy.race&&(racialSkillId="divineaegisId"),"Barbarian"===Yy.race&&(racialSkillId="ancestralrampageId"),"Wood Elf"===Yy.race&&(racialSkillId="tunaresglowId"),"Half Elf"===Yy.race&&(racialSkillId="karanasinfusionId"),"Dark Elf"===Yy.race&&(racialSkillId="sanguinetormentId"),"Dwarf"===Yy.race&&(racialSkillId="granitevisageId"),"Gnome"===Yy.race&&(racialSkillId="shortcircuitId"),"Halfling"===Yy.race&&(racialSkillId="halflinghideId"),hn(),Ia(),dualWieldBonus=Xe(),SI=Oe(),"Wizard"===Yy.job&&gn(),Yy.patch=patchVersion,"On"===kw.hideMenu&&(mS.getElementById("window5Id").style.opacity=0),Zn(),"Rogue"===Yy.job||"Monk"===Yy.job?rI="TP":"Warrior"===Yy.job&&(rI="Fury"),function(){var e=qn();"Aspen Grove"===e||"Braxxen's Bastille"===e||"Kordata Marshlands"===e||"Arcturin's Crypt"===e?iI=2:"Artremia"===e||"Fahlnir Citadel"===e||"Kordata Ruins"===e||"Temple of Prenssor"===e?iI=3:"Fenwoven"!==e&&"Viston's Redoubt"!==e&&"Galeblast Fortress"!==e&&"Ashenflow Peak"!==e&&"Dire Sanctum"!==e&&"Nimgaul"!==e||(iI=4)}(),ua(),$NG.addmonsterId.css("background-image","url('images1/sprite"+Yy.job+"3.png')").css({backgroundPosition:"0 0"}),e("#toggleattackId").css("background-image","url('images1/sprite"+Yy.job+"3.png')").css({backgroundPosition:"-100% 0"}),e("#addmonsterId").css("background-image","url('images1/sprite"+Yy.job+"3.png')").css({backgroundPosition:"0 -200%"}),e("#runId").css("background-image","url('images1/sprite"+Yy.job+"3.png')").css({backgroundPosition:"-100% -200%"}),function(){for(var a=["warriorkickId","slamId","avengingstrikeId","hemorrhageId","shockwaveId","pummelId","subjugateId","decisiveblowId","absorbspellId","frenziedrampageId","enrageId","furiousscornId","triageId","bulwarkId","intrepidmightId"],n=[],t=3;t<=17;t++)n.push(t+"00");var i=["192","512","1024","448","256","384","704","1088","320","832","576","640"];"Monk"===Yy.job&&(a=["tigerstrikeId","eaglestrikeId","cheetahstrikeId","cobrastrikeId","dragonstrikeId","cranekickId","windmillkickId","ancestralflurryId","flyingkickId","chakrablastId","feigndeathId","mendId","stonefistsId","intimidationId","innerpeaceId"],i=["256","960","1088","768","576","320","704","448","192","512","640","1024"]);"Rogue"===Yy.job&&(a=["shadowstrikeId","sonicstrikeId","hyperstrikeId","widowstrikeId","miragestrikeId","lacerateId","backstabId","staggershotId","lobotomizeId","prowlinggashId","evadeId","coldbloodId","flashpowderId","illusivemistId","ancientwillId","roguehideId"],n.push("200"),i=["512","832","256","448","192","576","896","640","320","1024","384","768"]);"Paladin"===Yy.job&&(a=["palslamId","rebukeId","purgeId","vengeanceId","layhandsId","greaterhealingId","holymightId","palrootId","ardentjudgment","yaulpId","cleanseId","flashoflightId","valorId","spiritarmorId","divineprovidenceId","symbolofryltanId"],n.push("200"),i=["192","448","512","960","256","384","704","1088","320","576","768","896"]);"Shadow Knight"===Yy.job&&(a=["shdslamId","crescentcleaveId","deathstrikeId","gaspingfrenzyId","harmtouchId","shdlifetapId","doomingdarknessId","heatbloodId","strengthendeadId","shdfearId","siphonstrengthId","shdfeigndeathId","shadowvortexId","summondeadId","vampiricembraceId","resistcoldId"],n.push("200"),i=["256","320","128","960","192","512","448","576","384","1024","768","640"]);"Ranger"===Yy.job&&(a=["rangerkickId","rapidshotId","countershotId","trueshotarrowId","volleyshotId","lighthealingId","faerieflameId","igniteId","snareId","wardersrift","weaponshieldId","thistlecoatId","feetlikecatId","shieldofbramblesId","rangersowId","rangertrackId"],n.push("200"),i=["192","896","704","768","320","384","576","640","256","960","1088","448"]);"Bard"===Yy.job&&(a=["chordsofdissonance","chantofbattle","accelerando","hymnofrestoration","songofthesirens","boastfulbellow","elementalrhythms","lucidlullaby","consonantchain","dissension","chorusofclarity","anthemdearms","euphonichymn","shieldofsongs","desperatedirge"],i=["256","384","896","960","192","576","832","1088","448","512","704","1024"]);"Druid"===Yy.job&&(a=["starfire","dronesofdoom","druhealing","tornado","engulfingroots","driftingdeath","lightningblast","earthquake","hurricane","sylvangrasp","volcano","skinlikenature","shieldofspikes","drusow","chloroplast"],i=["256","320","448","896","384","640","704","768","192","512","576","832"]);"Cleric"===Yy.job&&(a=["smite","soundofforce","superiorhealing","bindingearth","expelcorruption","searingrevelation","martyrsblessing","guardianangel","holywrath","markofjudgement","benediction","resolution","armoroffaith","divinesanctuary","symbolofnaltron"],i=["192","896","384","704","256","576","960","640","448","512","768","832"]);"Shaman"===Yy.job&&(a=["froststrike","scourge","shmhealing","togorsinsects","cannibalize","enstill","poisonnova","affliction","reclaimblood","glacialimpact","devouringplague","calloftheancients","guardianspirit","shmsow","talismanofaltuna"],i=["192","384","512","768","256","576","640","832","896","960","1024","704"]);"Necromancer"===Yy.job&&(a=["bonespirit","cascadingdarkness","invokefear","drainsoul","feigndeath","augmentdeath","igniteblood","corpseexplosion","bondofdeath","diamondskin","asystole","detonatesoul","howlingterror","invokedeath","archshielding"],i=["384","576","704","960","1024","512","640","896","192","256","320","832"]);"Enchanter"===Yy.job&&(a=["chaosflux","gaspingembrace","cajolingwhispers","colorshift","mesmerize","shiftlessdeeds","alacrity","gravityflux","mysticrune","tashania","enthrall","discordantbarrier","enchantweapon","adorninggrace","clarity"],i=["192","384","896","704","320","512","960","576","256","448","640","768"]);"Magician"===Yy.job&&(a=["lavabolt","firestorm","frozenorb","burnout","manashield","psionicstorm","reclaimelements","elementalfury","armageddon","stasisfield","alteredstate","shieldoflava","phantomplate","elementalarmor","earthelemental","airelemental","fireelemental","frostelemental"],n.push("1700"),n.push("1700"),n.push("1700"),i=["192","896","256","704","1088","384","576","640","960","320","1024","512"]);"Wizard"===Yy.job&&(a=["icebolt","chargedbolts","frostnova","magicmissiles","fireball","deepfreeze","chainlightning","glacialspike","iceblock","icecomet","counterspell","harnessEther","meteor","mirrorimages","viziersshielding"],i=["256","384","576","1024","192","512","640","768","1088","448","896","960"]);for(var o="<style type='text/css'>",t=0;t<a.length;t++){var r=0;"countershotId"===a[t]&&(r=-300),15===t&&(r=-100),16===t&&(r=-200),17===t&&(r=-300),o+="#"+a[t]+"{ background: url('images1/sprite"+Yy.job+"3.png') -"+n[t]+"% "+r+"%; }"}"Bard"!==Yy.job&&"Druid"!==Yy.job||(o+="#rangertrackId{ background: url('images1/spriteTrack2.png') 0 0; }");"Rogue"===Yy.job&&"Halfling"===Yy.race&&(o+="#halflinghideId{ background: url('images1/spriteHalfling2.png') 0 0; }");for(t=1;t<=12;t++){var l=-192;(t-1)%4==0&&(l=0),"Magician"===Yy.job&&5===t&&(l=-128),o+="#talent"+t+"{ background: url('images1/sprite"+Yy.job+"3.png') -"+i[t-1]+"px "+l+"px; }"}o+="</style>",e("head").append(o)}(),$NG.equipmentBG.css("background","url('"+jS+"')").css({backgroundPosition:"0 0"}),kw.lastCharacter=fH,1===Yy.level&&0===Yy.exp&&(Yy.maxHp=zy.maxHpFunct(),Yy.hp=Yy.maxHp),"Long"!==kw.tooltipMode&&e("#tooltipmsg").css("display","none"),e("#createWindowId, #characterSelectScreen, #currencyIndicator").remove();var r=new uS.Graphics;r.beginFill("#f00").drawRect(0,0,1280,768).endFill(),spellCurtain=new uS.Shape(r),spellCurtainStage.addChild(spellCurtain),spellCurtain.alpha=0;0===bS.Q[sa()].GreaterFaydark&&"Edenburg"===qn()&&(zy.view="Intro",mS.getElementById("gameView").style.display="none",Pa("Blackmoor Colossus"),bn()),Zv()>0&&(cS.to("#talentNotify",.5,{startAt:{opacity:1},opacity:.5,ease:pS.lin,repeat:-1,yoyo:!0}),ow=!0),zy.leechRatio=.24,zy.wraithRatio=.16,2===zy.difficulty?(zy.leechRatio=.12,zy.wraithRatio=.08):3===zy.difficulty&&(zy.leechRatio=.04,zy.wraithRatio=.025),e("#tooltipname, #ttItemName, .buttonsManage, .buttonsManageOff").css("display","block"),e(".shadows").attr("src","/classic/images1/mobShadow.png"),function(){var e="/classic/images1/";vI[115]=mS.createElement("img"),vI[115].src=e+"spriteMobs2.png",vI[116]=mS.createElement("img"),vI[116].src=jS,vI[117]=mS.createElement("img"),vI[117].src=e+"NGbutton.png",vI[118]=mS.createElement("img"),vI[118].src=e+"classPlate.png",vI[119]=mS.createElement("img"),vI[119].src=e+"rock380-430.jpg",vI[120]=mS.createElement("img"),vI[120].src=e+"win5.png",vI[121]=mS.createElement("img"),vI[121].src=e+"ng_logo_532x428.png",vI[122]=mS.createElement("img"),vI[122].src=e+"entername.png",vI[122]=mS.createElement("img"),vI[122].src=e+"ccFrame.png",vI[123]=mS.createElement("img"),vI[123].src=e+"statFrame.png",vI[124]=mS.createElement("img"),vI[124].src=e+"blank.png",vI[125]=mS.createElement("img"),vI[125].src=e+"worldMap.jpg",vI[126]=mS.createElement("img"),vI[126].src=e+"raceButtons.png",vI[127]=mS.createElement("img"),vI[127].src=e+"myhpbardiv.png",vI[128]=mS.createElement("img"),vI[128].src=e+"bossPlate.png",vI[129]=mS.createElement("img"),vI[129].src=e+"championPlate.png",vI[130]=mS.createElement("img"),vI[130].src=e+"rarePlate.png",vI[131]=mS.createElement("img"),vI[131].src=e+"normalPlate.png",vI[132]=mS.createElement("img"),vI[132].src=e+"statButton.png",vI[133]=mS.createElement("img"),vI[133].src=e+"greyButton.png",vI[134]=mS.createElement("img"),vI[134].src=e+"equipment.png",vI[135]=mS.createElement("img"),vI[135].src=e+"stats.png",vI[136]=mS.createElement("img"),vI[136].src=e+"tile.png",vI[137]=mS.createElement("img"),vI[137].src=e+"wideHead.png",vI[139]=mS.createElement("img"),vI[139].src=e+"itemtt.png",vI[140]=mS.createElement("img"),vI[140].src=e+"portal.png",vI[141]=mS.createElement("img"),vI[141].src=e+"portraits.png",vI[142]=mS.createElement("img"),vI[142].src=e+"greenparticle200.png",vI[143]=mS.createElement("img"),vI[143].src=e+"magentaparticle200.png",vI[144]=mS.createElement("img"),vI[144].src=e+"yellowparticle200.png",vI[145]=mS.createElement("img"),vI[145].src=e+"glacialSpike.png",vI[146]=mS.createElement("img"),vI[146].src=e+"fireball.png",vI[147]=mS.createElement("img"),vI[147].src=e+"bossPlate.png",vI[148]=mS.createElement("img"),vI[148].src=e+"mobShadow.png",vI[201]=mS.createElement("audio"),vI[201].src=YS+"button_2."+SH;for(var a=[],n=["blue","purple","orange","red","magenta","green","white","teal","yellow"],t=0;t<n.length;t++)a.push(n[t]+"particle50");for(var t=150,i=a.length+150;t<i;t++)vI[t]=mS.createElement("img"),vI[t].src="/classic/images1/"+a[t-150]+".png"}(),NS||(B.onbeforeunload=function(){return"Are you sure you want to leave the game? Use /camp to save your game!"})}}else Nn("You should create a character first.")}function kn(e){e===E&&(e=5e3),v(function(){B.onbeforeunload=null,t.reload()},e)}function Sn(){e("#hardcoreId").removeClass("ccActive ccDisabled").addClass("ccDisabled"),e("#normalId").removeClass("ccActive ccDisabled").addClass("ccActive"),Yy.hardcoreMode=!1}function In(a){if(!0!==e("#characterslot"+a).hasClass("disabled")){if(fH=a,null===localStorage.getItem("Lmy"+(FS+fH)))ma();else{var n=localStorage.getItem("Lmy"+(FS+fH));Lmy=L.parse(n)}for(var t=1;t<=16;t++)mS.getElementById("characterslot"+t).className="characterDisabled";e("#characterslot"+a).removeClass().addClass("characterActive "+("Shadow Knight"!==e("#myjob"+fH).text()?e("#myjob"+fH).text():"ShadowKnight")),wn(!0)}}function wn(a){0===Pn()&&(!function(){var e=qn();"Plane of Hate"!==e&&"Plane of Strife"!==e&&"Howling Thicket"!==e&&"Glenmont Grove"!==e&&"Dagnor's Cauldron"!==e&&"Beholder's Maze"!==e&&"East Karana"!==e&&"Highpass Hold"!==e&&"Lake Rathetear"!==e&&"Lavastorm Mountains"!==e&&"North Karana"!==e&&"Ocean of Tears"!==e&&"Oasis of Marr"!==e&&"Rathe Mountains"!==e&&"South Karana"!==e&&"West Karana"!==e&&"Erud's Crossing"!==e&&"Kithicor Forest"!==e&&"South Ro"!==e&&"Clan Runnyeye"!==e&&"Solusek's Eye"!==e&&"Splitpaw Lair"!==e&&"Butcherblock Mountains"!==e&&"Everfrost Peaks"!==e&&"Steamfont Mountains"!==e&&"Qeynos Hills"!==e&&"Misty Thicket"!==e&&"East Commonlands"!==e&&"Nektulos Forest"!==e&&"Innothule Swamp"!==e&&"The Feerrott"!==e&&"Toxxulia Forest"!==e&&"Erudin"!==e&&"Oggok"!==e&&"Grobb"!==e&&"Kelethin"!==e&&"Kaladim"!==e&&"Ak'Anon"!==e&&"Neriak"!==e&&"Qeynos"!==e&&"Felwithe"!==e&&"Halas"!==e&&"Surefall Glade"!==e&&"Castle Mistmoore"!==e&&"Crushbone"!==e&&"Estate of Unrest"!==e&&"Greater Faydark"!==e&&"Kedge Keep"!==e&&"Lesser Faydark"!==e&&"Befallen"!==e&&"Blackburrow"!==e&&"Cazic-Thule"!==e&&"Upper Guk"!==e&&"Lower Guk"!==e&&"Nagafen's Lair"!==e&&"Najena"!==e&&"North Ro"!==e&&"Kordata Tunnels"!==e&&"Kordata Frontier"!==e&&"Ripongen Stronghold"!==e&&"Ripongen Redoubt"!==e&&"Viston Redoubt"!==e&&"Permafrost Keep"!==e&&"Plane of Fear"!==e&&"Kordata Stronghold"!==e&&"Plane of Corruption"!==e&&"Plane of Chaos"!==e||(1===Yy.difficulty?(Yy.zone="Edenburg",Yy.subzone=0):2===Yy.difficulty?(Yy.zoneN="Edenburg",Yy.subzoneN=0):(Yy.zoneH="Edenburg",Yy.subzoneH=0))}(),mS.getElementById("zoneIndicator").textContent=qn()),a&&(Yy.difficulty=1,RS.difficulty=1),function(){var a=Pn();0===a?e("#zoneIndicator").html(qn()):e("#zoneIndicator").html(qn()+" "+a)}(),e("#normalLabel, #nightmareLabel, #hellLabel").css({color:"#888",display:"none"});var n=e("#characterslot"+fH).data("hardcoreMode");1*e("#characterslot"+fH).data("hell")>=2?e("#normalLabel, #nightmareLabel, #hellLabel").css("display","inline-block"):1*e("#characterslot"+fH).data("nightmare")>=2&&e("#normalLabel, #nightmareLabel").css("display","inline-block"),function(a){1===a?e("#normalLabel").css("color","#fff"):2===a?e("#nightmareLabel").css("color","#fff"):e("#hellLabel").css("color","#fff")}(RS.difficulty),mS.getElementById("enterworld").className="true"===n?"strongShadow NGhardcore":"strongShadow NGgradient"}function Cn(){ew++}function Mn(){--ew<=0&&(ew=0,"equipment"===yS&&function(e,a){var t=n.getElementById(e);null!==t&&(bS.eq[a].name?(t.src=jS,t.style.left=bS.eq[a].xPos+"px",t.style.top=bS.eq[a].yPos+"px"):t.src="/classic/images1/blank.png")}(IS,SS),"inventory"===yS&&Cy(SS),"bank"===yS&&function(e){var a=n.getElementById("bank"+e);null!==a&&(bS.bank[e].name?(a.src=jS,a.style.left=bS.bank[e].xPos+"px",a.style.top=bS.bank[e].yPos+"px"):a.src="/classic/images1/blank.png")}(SS),"equipment"===kS&&function(e,a){var t=n.getElementById(e);null!==t&&(bS.eq[a].name?(t.src=jS,t.style.left=bS.eq[a].xPos+"px",t.style.top=bS.eq[a].yPos+"px"):t.src="/classic/images1/blank.png")}(CS,wS),"inventory"===kS&&My(wS),"bank"===kS&&function(e){var a=n.getElementById("bank"+e);null!==a&&(bS.bank[e].name?(a.src=jS,a.style.left=bS.bank[e].xPos+"px",a.style.top=bS.bank[e].yPos+"px"):a.src="/classic/images1/blank.png")}(wS),"equipment"!==yS&&"equipment"!==kS||(U(),zy.maxHpFunct(),zy.maxMpFunct(),zy.drawMyHp(),zy.drawMyMp(),Hn(),pn(),HI=fn(),un(),hn(),dualWieldBonus=Xe(),SI=Oe(),ny()),Ey(e("#"+IS)))}function Tn(){e.ajax({url:"/classic/php/game1.php",data:{run:"camp"}}).done(function(e){B.onbeforeunload=null,t.reload()})}function Bn(){gS.Lmy(),gS.my()}function Dn(){cS.to("#deletecharfade",.25,{opacity:0,onComplete:function(){mS.getElementById("deletecharfade").style.display="none"}}),e("#deletecharconfirm,#deleteConfirm,#deleteCancel").animate({opacity:0},250,function(){e(this).css("display","none")}),e("#enterworld, #characterslot1, #characterslot2, #characterslot3, #characterslot4, #characterslot5, #characterslot6, #characterslot7, #characterslot8, #characterslot9, #characterslot10, #characterslot11,#characterslot12,#characterslot13,#characterslot14,#characterslot15,#characterslot16").removeClass("disabled")}function Ln(e){var a=!1;return"Greenthorn Cavern"!==e&&"Riven Grotto"!==e&&"Braxxen's Bastille"!==e&&"Arcturin's Crypt"!==e&&"Galeblast Fortress"!==e&&"Ashenflow Peak"!==e&&"Dire Sanctum"!==e&&"Nimgaul"!==e&&"Dire Sanctum"!==e||(a=!0),a}function Hn(){var e="/classic/images1/";"slashed"===bS.eq[12].type?(vI[109]=mS.createElement("img"),vI[109].src=e+"slashed.png"):"crushed"===bS.eq[12].type?(vI[107]=mS.createElement("img"),vI[107].src=e+"crushed.png"):"pierced"===bS.eq[12].type?(vI[105]=mS.createElement("img"),vI[105].src=e+"pierced.png"):"punched"===bS.eq[12].type?(vI[103]=mS.createElement("img"),vI[103].src=e+"punched.png"):"smashed"===bS.eq[12].type||"staff"===bS.eq[12].type?(vI[101]=mS.createElement("img"),vI[101].src=e+"smashed.png"):"cleaved"===bS.eq[12].type&&(vI[100]=mS.createElement("img"),vI[100].src=e+"cleaved.png"),"crushed"===bS.eq[13].type?(vI[106]=mS.createElement("img"),vI[106].src=e+"crushedL.png"):"pierced"===bS.eq[13].type?(vI[104]=mS.createElement("img"),vI[104].src=e+"piercedL.png"):"punched"===bS.eq[13].type?(vI[102]=mS.createElement("img"),vI[102].src=e+"punched.png"):"slashed"===bS.eq[13].type&&(vI[108]=mS.createElement("img"),vI[108].src=e+"slashedL.png")}function An(a){e(a).each(function(){e("<img/>")[0].src=this})}function xn(e){var a=90*aI,n=a+90;n>e&&(n=e);for(var t=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"],i=dS.ceil(e/90),o="",r=0;r<12;r++){var l="bankTab bankTabDisabled";r>=i&&(l="bankTab bankTabLocked"),r===aI&&(l="bankTab bankTabActive"),o+="<div class='"+l+"'>"+t[r]+"</div>"}mS.getElementById("bankTabWrap").innerHTML=o;for(var o="",r=a;r<n;r++)o+="<li class='bankBG' id='bank"+r+"BG'>BANK",bS.bank[r].name?o+="<img id='bank"+r+"' src='"+jS+"' class='bank' style='left:"+bS.bank[r].xPos+"px;top:"+bS.bank[r].yPos+"px'>":o+="<img id='bank"+r+"' src='images1/blank.png' class='bank'>";mS.getElementById("bankContainer").innerHTML=o}function En(){var e="dungeonA",a=qn();"Salubrin Forest"===a&&(e="forestA"),"Tendolin Meadows"!==a&&"Kordata Marshlands"!==a&&"Lanfeld Outpost"!==a||(e="forestB"),"Viston's Redoubt"!==a&&"Galeblast Fortress"!==a&&"Kordata Ruins"!==a&&"Fahlnir Citadel"!==a||(e="desertB"),KI?(Ra(),v(function(){Ra()},100)):function(e){if(!1===HS){if("blankAudio"===e)return;if(!0===IH&&(!0===yH||!0===kH)){var a=mS.getElementById("bgamb1");a.setAttribute("type","audio/"+SH),a.src=KS+e+"."+SH;var n=kw.musicStatus/100*.2*1;a.volume=n,a.play(),v(function(){var a=mS.getElementById("bgamb2");a.setAttribute("type","audio/"+SH),a.src=KS+e+"."+SH;var n=kw.musicStatus/100*.2*1;a.volume=n,a.play()},4e3)}}}(e)}function Gn(a,n){if(pL="",$NG.mobBar.css("visibility","hidden"),NG.mobName.textContent="",NG.mobLevel.textContent="",NG.mobTraits.innerHTML="",1===zy.difficulty?(Yy.zone=a,Yy.subzone=n):2===zy.difficulty?(Yy.zoneN=a,Yy.subzoneN=n):(Yy.zoneH=a,Yy.subzoneH=n),mw=Ln(a),!pH){var t=mS.getElementById("travelId");t.className="buttonsManage",t.style.backgroundPosition="-80px 0",pH=1}for(var i=0;i<=4;i++)Gw[i].style.display="none",Gw[i].style.opacity=0,Nw[i].removeAllChildren(),Fw[i].style.top="0px",Fw[i].style.left="0px",qw[i].style.color="#00FA9A",qw[i].innerHTML="";e("#window2dawn, #window2zoneday").css({display:"block",opacity:0}).animate({opacity:1},0,"easeOutQuad"),gy(),mS.getElementById("questJournal").style.display="none",hw=1,Rn()}function qn(){if("Main"!==zy.view)return 1===zy.difficulty?Yy.zone:2===zy.difficulty?Yy.zoneN:Yy.zoneH;var a;return(a=1===RS.difficulty?e("#characterslot"+fH).data("zone"):2===RS.difficulty?e("#characterslot"+fH).data("zoneN"):e("#characterslot"+fH).data("zoneH"))===E?"":a}function Pn(){if("Game"===zy.view)return 1===RS.difficulty?Yy.subzone:2===RS.difficulty?Yy.subzoneN:Yy.subzoneH;var a;return(a=1===RS.difficulty?e("#characterslot"+fH).data("subzone"):2===RS.difficulty?e("#characterslot"+fH).data("subzoneN"):e("#characterslot"+fH).data("subzoneH"))===E?"":a}function Qn(){mS.getElementById("bgmusic").pause()}function Rn(){function a(e){d.width()<100?e<300&&cS.delayedCall(.1,a,[++e]):s.width(d.width()).height(d.height())}"Intro"!==zy.view&&Qn();for(l=0;l<=4;l++)Wy[l].name="";mS.getElementById("bgamb1").pause(),mS.getElementById("bgamb2").pause(),VS=[],e("#townPortal").remove(),OS=!1,e("#lore").css("display","none"),function(e){if("string"==typeof e)mS.getElementById(e).style.visibility="hidden";else for(var a=e.length,n=0;n<a;n++)mS.getElementById(e[n]).style.visibility="hidden"}(["window3","chatId","combatId","window5Id","window6"]),mS.getElementById("errorMsg").innerHTML="",cS.set("#questNotify,#mapNotify",{opacity:0}),Fa(),Ta(),zk=!1,e("#characterSelectScreen").css("display","none"),fa("Loading... please wait."),fk=1;for(l=0;l<=4;l++)Wy[l].attackStatus=1;var n=[],t="blank.png";KI=!1;var i=qn();if("Fahlnir Citadel"===i&&(t="fahlnir1.jpg",2===Pn()&&(t="fahlnir2.jpg"),3===Pn()&&(t="fahlnir3.jpg"),n=["a dark elf female","a dark elf female plate","a gargoyle","a dark elf male","an imp","a shadowed man","a dark elf male plate","a dark elf matron"]),"Lanfeld Outpost"===i&&(t="lanfeld1.jpg",2===Pn()&&(t="lanfeld2.jpg"),3===Pn()&&(t="lanfeld3.jpg"),n=["an orc","grimden"]),"Arcturin's Crypt"===i&&(t="arcturin1.jpg",2===Pn()&&(t="arcturin2.jpg"),3===Pn()&&(t="arcturin3.jpg"),n=["a faerie","a werewolf","a male zombie","a terror","a ghoul","a beetle","a mummy","a skeleton","a dark skeleton","a female zombie","a fungus","garanel rucksif"]),"Salubrin Forest"===i&&(t="salubrin.jpg",n=["a wolf","an orc","a faerie","a wisp","a skeleton"]),"Viston's Redoubt"===i&&(t="viston1.jpg",2===Pn()&&(t="viston2.jpg"),3===Pn()&&(t="viston3.jpg"),4===Pn()&&(t="viston4.jpg"),n=["a gargoyle","a dhampyre","an imp","a bat","a vampire female","a werewolf","phinigel autropos","a purple dragon"]),"Tendolin Meadows"===i&&(t="tendolin.jpg",n=["a faerie","a brown spider","a wolf","a mummy","a faerie","a shadowed man","a skeleton","a heart spider","an orc"]),"Riven Grotto"===i&&(t="riven1.jpg",2===Pn()&&(t="riven2.jpg"),3===Pn()&&(t="riven3.jpg"),n=["a rat","a dark elf female plate","a human male","a human female","a wisp","a male zombie","a mummy","a dark elf male","a skeleton","a dark skeleton","a ghoul","a female zombie"]),"Greenthorn Cavern"===i&&(t="greenthorn1.jpg",2===Pn()&&(t="greenthorn2.jpg"),3===Pn()&&(t="greenthorn3.jpg"),n=["a gnoll"]),"Temple of Prenssor"===i&&(t="prenssor1.jpg",2===Pn()&&(t="prenssor2.jpg"),3===Pn()&&(t="prenssor3.jpg"),n=["a clay golem","a gorilla","a lizardman","a steel golem","a stone golem","avatar of fear"]),"Kordata Ruins"===i&&(t="ruins1.jpg",2===Pn()&&(t="ruins3.jpg"),3===Pn()&&(t="ruins2.jpg"),n=["a gargoyle","an anuran","a heart spider","a faerie","an evil eye round"]),"Ashenflow Peak"===i&&(t="ashenflow1.jpg",2===Pn()&&(t="ashenflow2.jpg"),3===Pn()&&(t="ashenflow3.jpg"),4===Pn()&&(t="ashenflow4.jpg"),n=["a kobold","an imp","a jungle spider","a bat","a beetle","a fire elemental","a brown spider","a heart spider","a red goblin","a fire giant","a red dragon"]),"Braxxen's Bastille"===i&&(t="braxxen1.jpg",2===Pn()&&(t="braxxen2.jpg"),3===Pn()&&(t="braxxen3.jpg"),n=["an anuran","a heart spider","a red goblin","a skeleton","a human male","a human female","a terror","a dark elf male","braxxen","a dark elf female"]),"Galeblast Fortress"===i&&(t="galeblast1.jpg",2===Pn()&&(t="galeblast2.jpg"),3===Pn()&&(t="galeblast3.jpg"),4===Pn()&&(t="galeblast4.jpg"),n=["a white wolf","a blue goblin","an ice giant","a white spider","a blue dragon"]),"Kordata Marshlands"===i&&(t="marshland1.jpg",2===Pn()&&(t="marshland2.jpg"),3===Pn()&&(t="marshland3.jpg"),n=["a fungus","a dark skeleton","a heart spider"]),"Nimgaul"===i&&(t="nimgaul.jpg",n=["a male zombie","a female zombie","a ghoul","an evil eye round","a faerie","an anuran","a white spider","an imp","a terror","a gorilla","a mummy","a wisp","a fungus","a vampire female","a clay golem","a stone golem","a steel golem","dracoliche","cazic"]),"Dire Sanctum"===i&&(t="sanctum.jpg",n=["a stone golem","a female zombie","a vampire female","a dhampyre","a gargoyle","a dark elf male","a mummy","a ghoul","a terror","a rat","a skeleton","dracoliche","maestro","innoruuk"]),"Edenburg"===i){o="a human female.png";KI=!0,t="edenburg.jpg",o="edenburg.png",n=["edenburg"],cw="Miranda Crossheart"}if("Aspen Grove"===i){o="a halfling male.png";KI=!0,t="aspenGrove.jpg",o="aspenGrove.png",n=["aspenGrove"],cw="Rendo Surefoot"}if("Artremia"===i){o="a wood elf female.png";KI=!0,t="artremia.jpg",o="artremia.png",n=["artremia"],cw="Valeska Windcrest"}if("Fenwoven"===i){var o="a barbarian male.png";KI=!0,t="fenwoven.jpg",o="fenwoven.png",n=["fenwoven"],cw="Arwen Reinhardt"}if(!0===KI){!function(){var e="";e+='<div id="cityWindow" class="strongShadow"><div id="cityTitle">SHOP</div><div id="shopList"><div id="merchant" class="cityButtons">Merchant</div><div id="upgrade" class="cityButtons">Upgrade Item</div><div id="training" class="cityButtons">Training</div><div id="bankId" class="cityButtons">Bank</div><div id="talentsId" class="cityButtons">Reset Talents</div><div id="exitCity" class="cityButtons">Exit</div></div><div id="cityGold" class="strongShadow"><div id="goldIcon" class="goldIcon">0</div></div><div id="cityCrystal" class="strongShadow"><div id="cityCrystalIcon" class="crystalIcon"></div><span id="cityCrystalAmount">0</span></div>',e+='</div><div id="cityNPCdiv"><img id="cityNPCshadow" src="/classic/images1/mobShadow.png"><div id="cityNPCname" class="strongShadow"></div><img id="cityNPC" src="/classic/images1/blank.png"></div><div id="trainingOptions" class="strongShadow"><div id="training1"><div class="trainSkill2 trainingButton">One-Hand Slashing</div><div class="trainSkill2 trainingButton">Two-Hand Slashing</div><div class="trainSkill2 trainingButton">One-Hand Blunt</div><div class="trainSkill2 trainingButton">Two-Hand Blunt</div><div class="trainSkill trainingButton">Piercing</div><div class="trainSkill2 trainingButton">Hand to Hand</div><div class="trainSkill trainingButton">Offense</div><div class="trainSkill trainingButton">Dual Wield</div><div class="trainSkill2 trainingButton">Double Attack</div></div><div id="training2"><div class="trainSkill trainingButton">Defense</div><div class="trainSkill trainingButton">Dodge</div><div class="trainSkill trainingButton">Parry</div><div class="trainSkill trainingButton">Riposte</div><div class="trainSkill trainingButton">Alteration</div><div class="trainSkill trainingButton">Evocation</div><div class="trainSkill trainingButton">Conjuration</div><div class="trainSkill trainingButton">Abjuration</div><div class="trainSkill trainingButton">Channeling</div></div></div><div id="trainOK" class="strongShadow">TRAIN</div><div id="upgradeConfirm" class="strongShadow"><div id="upgradePrompt">Upgrade An Item</div><div id="upgradeConfirm2">Attempt to upgrade?</div><div id="upgradeOK">Ok</div><div id="upgradeCANCEL">CCancel</div></div><div id="blackOverlay"></div><div id="upgradeWrap"><div id="upgradeBar"></div></div><div id="merchantContainer"><ul id="itemsForSale"></ul><div id="buyOK" class="strongShadow">BUY</div><div id="sellOK" class="strongShadow">SELL</div></div>',mS.getElementById("cityWrap").innerHTML=e,ua()}(),mS.getElementById("cityNPCdiv").style.display="none";for(var r="",l=24;l<=43;l++)r+="<li class='cityBG' id='city"+(l-24)+"BG'><img src='images1/blank.png' id='inv"+l+"' class='city'></li>";mS.getElementById("itemsForSale").innerHTML=r,ua(),Xn();var s=e("#cityNPCdiv"),d=e("#cityNPC");mS.getElementById("bankGoldAmount").textContent=kw.gold,mS.getElementById("cityNPCdiv").style.display="block",mS.getElementById("cityNPCname").textContent=cw,e("#cityWindow").css("left",10),e("#trainOK,#trainingOptions").css("left",-700),e("#cityNPC").attr("src","images1/blank.png"),e("#cityNPC").attr("src","images1/"+o),mS.getElementById("cityNPCdiv").style.bottom="-100px",cS.set("#cityNPC",{rotationY:0}),a(0),$NG2.bankBG.css("background","url('"+jS+"')").css({backgroundPosition:"0 0"}),Qn()}var c=n.length;yI=[];for(l=0;l<c;l++)yI[l]=mS.createElement("img"),yI[l].src="images1/"+n[l]+".png";dw=0,e("#window2zoneday").attr("src","/classic/backgrounds/"+t),!0===KI?($NG2.city.attr("src",jS),$NG2.cityBG.css("background","url('"+jS+"')").css({backgroundPosition:"0 0"}),mS.getElementById("cityGold").innerHTML="<div id='goldIcon' class='goldIcon'></div> "+Yy.gold,e("#inventoryGoldAmount").text(Yy.gold),e("#cityTitle").html(qn())):e("#bankContainer,#cityWrap").empty(),Kn(new H),function(){function a(){"none"===e("#curtainfade").css("display")?cS.to(i,1,{opacity:0}):cS.delayedCall(1,a)}cS.set("#curtainfade",{display:"block",opacity:1}),e("#bglogo").attr("src","images1/ng_logo_532x428.png"),cS.from("#bglogo",1,{opacity:0,ease:pS.lin});var n=dS.ceil(79*dS.random());"Salubrin Forest"===qn()&&1===Yy.difficulty&&0===Yy.exp&&(n=10);var t="Many flying creatures enjoy increased lightning resistance and immunity to root spells.";2===n&&(t="Trolls enjoy a bonus to passive hit point regeneration, but they start with low fire resistance."),3===n&&(t="When you equip items with magic find, you are more likely to find rare treasures."),4===n&&(t="Many undead creatures are weak against fire attacks."),5===n&&(t="Giants are dangerous foes with a lot of hit points. They are tougher than their level indicates."),6===n&&(t="All halflings can hide, which prevents them from being ambushed while choosing a battle."),7===n&&(t="Monks are the only class that start with the ability to dual wield."),8===n&&(t="Beware that some foes are more deadly than their level may indicate."),9===n&&(t="Any class can wear any type of equipment, but there are penalties for wearing armor too heavy for your class. Run chance, casting speed, and global cooldown speed are all affected."),10===n&&(t="Killing multiple monsters without leaving combat yields bonus experience and increased magic find."),11===n&&(t="In addition to their natural super strength and stamina, ogres are also immune to stuns."),12===n&&(t="Dexterity affects your critical hit chance, your critical hit damage, and the weapon effect chance."),13===n&&(t="Stamina affects how many hit points you have. Some classes benefit more than others."),14===n&&(t="Agility reduces the amount of physical damage inflicted every time you are hit."),15===n&&(t="Males enjoy a minor boost to strength and stamina, while females have enhanced wisdom and passive health regeneration."),16===n&&(t="Some skills, like Shadow Knight's Gasping Frenzy, do more damage when your hit points are lower. The results may surprise you."),17===n&&(t="Few classes make any use of charisma in battle. Though many bards and enchanters manage to put their charm to good use."),18===n&&(t="You can unlock a total of 110 talent points by completing quests and leveling up. This allows for a wide variety of talent distribution strategies."),19===n&&(t="Some creatures will blind you in combat. When you are blind you cannot change targets and you will miss some attacks."),20===n&&(t="Some deadly foes know how to cast fear, a powerful spell that fills your mind with terror."),21===n&&(t="Many monsters cast deadly elemental magic that inflicts serious damage. Try to find armor with good resistances to aid you in such battles."),22===n&&(t="Conflagration will reduce your armor in addition to the damage it inflicts."),23===n&&(t="All passive health regeneration is reduced while you suffer from envenom."),24===n&&(t="Engulfing Darkness reduces your chance of successfully running from battle."),25===n&&(t="You receive a passive bonus to parry and riposte while dual wielding."),26===n&&(t="Unlike most magic spells, Static Field does damage based on your current health value."),27===n&&(t="Root is a deadly spell that temporarily disables running from battle."),28===n&&(t="If you're looking to spend your gold, improve your best equipment to +10 quality for powerful bonuses."),29===n&&(t="Wisdom affects healing magic power, magic regeneration, and magic damage reduction."),30===n&&(t="Strength affects the power of your melee attacks and skills."),31===n&&(t="Higher intelligence helps you learn your skills faster."),32===n&&(t="Your character data is automatically saved at key intervals. Camping is a surefire way to save your progress."),33===n&&(t="Bards play most of their songs without much strain, but some songs drain their mana due to their difficulty."),34===n&&(t="You can enable combat spam in the options. This allows you to see all skill damage messages in the combat log."),35===n&&(t="You must invest twenty points into a talent to receive its bonuses. Points from bonuses do not count."),36===n&&(t="Some classes have additional ways to escape from battle. Monk's Feign Death and Rogue's Evade are just two examples."),37===n&&(t="Some foes attack faster than others. Even though two foes may appear the same, one may be more dangerous in battle."),38===n&&(t="Paladins, Rangers, and Shadow Knights cannot use spells until level 9."),39===n&&(t="You cannot riposte, parry, or dodge special attacks like kick, backstab, bash, or shadow kick."),40===n&&(t="If you are casting when your target dies, most spells will automatically cancel. However, spells that do not require a primary target will continue casting."),41===n&&(t="Higher channeling makes it easier to complete spells while taking hits."),42===n&&(t="High level foes are more likely to disrupt your channeled spells."),43===n&&(t="Many kick abilities have a chance to disrupt channeled spells."),44===n&&(t="Some skills may be used when you are stunned and even feared."),45===n&&(t="When your pet is rooted, they are less likely to take hits for you."),46===n&&(t="At the merchant you can hold the CTRL key and left-click an item in your inventory to sell items more quickly."),47===n&&(t="Summoned pets are magical creatures that enjoy immunity to many spells."),48===n&&(t="If you root your target your pet will take all of the hits for you."),49===n&&(t="Monks generate spirit every time they land a critical hit."),50===n&&(t="Every button on your combat window can be dragged to a new location on your toolbar by holding left-click."),51===n&&(t="Higher conjuration will give your pets more hit points."),52===n&&(t="Intelligence increases magical damage for all classes except for Bards. Their songs are enhanced by charisma."),53===n&&(t="You don't have to use the mouse all the time. Try using the number keys instead! Check the options for hotkey details."),54===n&&(t="Some attacks hit multiple targets, like Ranger's Volley Shot or Monk's Dragon Strike. Sometimes monster positioning can affect your damage output."),55===n&&(t="Some bard songs have a longer duration than others. Accelerando extends the length of all songs started while it is active."),56===n&&(t="Bard songs take a few moments to begin. Don't change to another song until you see it begin!"),57===n&&(t="Some bard songs drain your mana. Be careful about using these songs too often or you may become exhausted."),58===n&&(t="Enchanters and bards have the ability to charm a target to fight for them in battle. This skill can be dangerous, but also very rewarding."),59===n&&(t="Charisma extends the duration of many key bard and enchanter skills."),60===n&&(t="Clerics can cast a spell called Benediction, which is the most powerful stun in the game. It stuns all targets except your current target."),61===n&&(t="The chance to run from battle increases every time you fail."),62===n&&(t="Some mobs can cast Iron Maiden, a powerful short-duration damage shield. Thankfully, DoT spells are not affected."),63===n&&(t="It's a good idea to use a defensive skill when a foe uses enrage, frenzy, or amplify magic."),64===n&&(t="Some mobs will use defensive abilities like barrier and sanctuary. You may want to save your big cooldowns until it wears off."),65===n&&(t="Collect set items to unlock powerful bonuses."),66===n&&(t="Cleric's Mark of Judgement is a unique ability. While it is active, healing spells will damage all mobs. Certain other spells will benefit as well."),67===n&&(t="Frozen enemies take 25% more damage. Try to use your highest damage skills while your opponents are frozen."),68===n&&(t="The Wizard and the Magician can use a special type of freeze called an encasement. When you hit an encased mob the formation will shatter for a 50% damage bonus, though the freeze effect will end."),69===n&&(t="All flying mobs are immune to spells that immobilize them in place. Wizard's Frost Nova and all types of Root spells will have no effect."),70===n&&(t="Rangers, Paladins, Clerics, Druids, and Shaman are wisdom-based casters. This means that their mana pool is increased by their wisdom."),71===n&&(t="Bards, Necromancers, Enchanters, Magicians and Wizards are intelligence-based casters. This means that their mana pool is increased by their intelligence."),72===n&&(t="Fighting more mobs at once increases your magic find. The more mobs the better!"),73===n&&(t="Hell and Nightmare difficulties drop your elemental and status resistances."),74===n&&(t="Monks automatically receive a 50% armor bonus for all armor they equip."),75===n&&(t="Rogues' backstab attack is unique due to its dependence on high agility for high damage."),76===n&&(t="Any class is free to equip any type of armor, but your run speed, skill speed, and casting speed all suffer as a result."),77===n&&(t="You can use the bank to swap items between characters. Rare treasures never have to go to waste."),78===n&&(t="To cancel a non-channeled spell, hit the space bar or simply click the cast bar. You can also use space bar to close all open windows!"),79===n&&(t="Agility helps dodge, parry, and riposte work more often.");var i=mS.getElementById("loadingmessage");i.innerHTML=t,fa(t);var o=new TimelineLite,r=new SplitText("#loadingmessage",{type:"words,chars"}).chars,l=dS.random();l>.75?o.staggerFrom(r,.25,{rotationX:90,ease:pS.lin},.033):l>.5?o.staggerFrom(r,.25,{rotationY:90,ease:pS.lin},.033):l>.25?o.staggerFrom(r,.25,{scale:0,ease:pS.lin},.033):o.staggerFrom(r,.25,{y:40,opacity:0,ease:pS.Qout},.033),cS.to(i,8,{startAt:{opacity:.25,visibility:"hidden",scale:.8},scale:1,visibility:"visible",force3D:"auto"}),cS.to(i,1,{opacity:1}),cS.to(i,0,{color:"#fff"}),cS.delayedCall(4,a)}()}function Fn(e){e===E&&(e=2);var a=va(),n=va(Yy.level-1),t=~~((Yy.exp-n)/(a-n)*498);if(!1===HS&&"High"===kw.videoSetting){NG.myexpbarvalue.innerHTML='<span id="myexpbarvalue1">'+zy.oldExp+"</span> / "+a+" XP";var i=mS.getElementById("myexpbarvalue1"),o={};o.exp=zy.oldExp,cS.to(NG.myexpbarId,e,{width:t,force3D:"auto"}),cS.to(o,e,{exp:Yy.exp,onUpdate:function(){i.textContent=~~o.exp}})}else NG.myexpbarId.style.width=t+"px",NG.myexpbarvalue.innerHTML='<span id="myexpbarvalue1">'+Yy.exp+"</span> / "+a+" XP"}function Nn(a,n,t,i){-1!==a.indexOf("Quest Completed")&&("Salubrin Forest"===qn()?3===bS.Q[sa()].GreaterFaydark&&(zy.showPortal=!0):"Nimgaul"!==qn()&&(zy.showPortal=!0)),i===E&&(i=3500),i/=1e3;var o=mS.createElement("span");if(o.className="QMsg",o.innerHTML=a+"<br>",NG.errorMsg.appendChild(o),cS.delayedCall(i,function(){Wi(o)}),n>0)r=e("#questNotify");if(t>0)var r=e("#mapNotify");(n||t)&&(cS.to(r,.5,{startAt:{opacity:1},opacity:.5,ease:pS.lin,repeat:-1,yoyo:!0}),"On"===kw.hideMenu&&cS.to(mS.getElementById("window5Id"),0,{startAt:{opacity:1},delay:8,opacity:0}))}function jn(){if(zy.view="Main",tw=0,iw=0,cS.delayedCall(1.5,function(){!0!==pageDoneLoading&&!0!==e("#enterworld").hasClass("disabled")&&(pageDoneLoading=!0)}),null!==localStorage.getItem("GLB")){var a=localStorage.getItem("GLB");kw=L.parse(a)}e("#deleteConfirm").removeClass("disabled"),foundCharacter=!1;$NG.allChButtons.removeClass("disabled"),sn();zn(),pa(["currencyIndicator","leftPaneBG"])}function zn(){e("#leftPaneBG").length&&(Nn("Loading account data"),mS.getElementById("zoneIndicator").textContent="",e.ajax({data:{run:"loadAllCharacters"}}).done(function(a){a.email.toLowerCase();foundCharacter=!1;tw=0;for(n=1;n<=16;n++)mS.getElementById("characterslot"+n).style.display="none";for(var n in a.chars){var t=a.chars[n],o=mS.getElementById("characterslot"+n),r=t.name,l=t.level,s=t.race,d=t.job,c=1*t.difficulty,m=t.zone,u=t.zoneN,f=t.zoneH,h=1*t.subzone,g=1*t.subzoneN,p=1*t.subzoneH,b=t.hardcoreMode,v=1*t.timestamp,y='<div class="yellow glowYellow nomouse">'+r+'</div><div class="nomouse">'+l+" "+s+' <span id="myjob'+n+'">'+d+"</div>";0===v&&(y+='<div class="nomouse yellow"></div>'),o.innerHTML=y,e("#characterslot"+n).data({difficulty:c,zone:m,zoneN:u,zoneH:f,subzone:h,subzoneN:g,subzoneH:p,hardcoreMode:b}),o.style.display="inline-block",iw=16-++tw,foundCharacter=!0}pa(["leftPaneBG"]),mS.getElementById("createWindowId").style.display="block",mS.getElementById("currencyIndicator").style.display="block",mS.getElementById("characterSelectScreen").style.display="block",mS.getElementById("characterSelectScreen").style.opacity=1,cS.to("#characterSelectScreen",.5,{opacity:1,ease:pS.lin,onComplete:function(){zy.view="Main"}}),mS.getElementById("enterWorldWrap").style.display=0===tw?"none":"block",$n(),e.ajax({url:"/classic/php/loadData1.php",data:{run:"loadGlb"}}).done(function(a){var n=a.split("|");n.pop(),kw.chatMyHit=n.shift(),kw.hideMenu=n.shift(),kw.musicStatus=1*n.shift(),kw.soundStatus=1*n.shift(),kw.tooltipMode=n.shift(),kw.videoSetting=n.shift(),kw.showCombatLog=n.shift(),kw.debugMode=n.shift(),kw.gold=1*n.shift(),kw.hcgold=1*n.shift();n.shift(),n.shift(),n.shift(),n.shift();if(kw.ks=1*n.shift(),kw.account=n.shift(),kw.confirmed=1*n.shift(),e("#logout").html("[ "+kw.account.split("")[0].toUpperCase()+kw.account.slice(1)+"&nbsp;Logout&nbsp;]"),mS.getElementById("bgmusic").volume=dS.round(kw.musicStatus/100*.5*1*100)/100,"Main"!==zy.view&&"Create"!==zy.view||Pa("Soliloquy (2013)"),RS.glb=!0,!kw.confirmed){var t=e("#sendEmailConfirmation");i.to(t,1,{color:"#ff0000",repeat:-1,yoyo:!0}),t.css("display","block").on("click",function(){var a=e(this);cS.set(a,{color:"#00ff00"}),a.off("click").text("Confirmation Email Sent!"),i.to(a,1,{alpha:0,delay:2,onComplete:function(){a.remove()}}),e.ajax({data:{run:"sendEmailConfirmation"}}).fail(function(e){Tv()})})}}).fail(function(){Nn("Server Error! Failed to load global values.")}),e("#normalLabel, #nightmareLabel, #hellLabel").css("display","none")}).fail(function(){Nn("Failed to contact server.")}),e.ajax({data:{run:"checkDifficulty"}}).done(function(a){for(var n=1,t=a.length+1;n<t;n++){var i=a.shift(),o={nightmare:0,hell:0};if(i.nightmare){var r=L.parse(i.nightmare);o.nightmare=r.PlaneofFear}if(i.hell){var l=L.parse(i.hell);o.hell=l.PlaneofFear}e("#characterslot"+n).data({nightmare:o.nightmare,hell:o.hell})}wn(),v(function(){wn(!0)},500)}))}function Yn(){e("#window3a li").css({backgroundSize:"900px 200px"}),e(".spacers, .placeHolder").css({backgroundSize:"50px 50px"}),"Human"===Yy.race?e("#secondwindId").css({backgroundSize:"50px 100px"}):"Erudite"===Yy.race?e("#divineaegisId").css({backgroundSize:"50px 100px"}):"Barbarian"===Yy.race?e("#ancestralrampageId").css({backgroundSize:"50px 100px"}):"Wood Elf"===Yy.race?e("#tunaresglowId").css({backgroundSize:"50px 100px"}):"Half Elf"===Yy.race?e("#karanasinfusionId").css({backgroundSize:"50px 100px"}):"Dark Elf"===Yy.race?e("#sanguinetormentId").css({backgroundSize:"50px 100px"}):"Dwarf"===Yy.race?e("#granitevisageId").css({backgroundSize:"50px 100px"}):"Gnome"===Yy.race?e("#shortcircuitId").css({backgroundSize:"50px 100px"}):"Halfling"===Yy.race&&e("#halflinghideId").css({backgroundSize:"50px 100px"}),"Druid"!==Yy.job&&"Bard"!==Yy.job||e("#rangertrackId").css({backgroundSize:"50px 100px"}),e("#togglepetattackId").css({backgroundSize:"50px 100px"})}function Kn(e){"Rogue"===Yy.job&&$NG.shadowstrikeId.css("background-image","url('images1/spriteRogue3.png')").css({backgroundPosition:"-300% 0"}),"Paladin"===Yy.job&&$NG.palslamId.css("background-image","url('images1/spritePaladin3.png')").css({backgroundPosition:"-300% 0"});var a=new H-e;if(NS){cS.delayedCall(1,Wn)}else a<=3e3||dw<1||!1===uw||!1===pw?a>=2e4?(cS.delayedCall(1,fa,["Warning: Failed to load images in less than 20 seconds. Loading zone anyway.",1]),Wn()):cS.delayedCall(.5,Kn,[e]):Wn()}function Wn(a){if("Intro"!==zy.view){Fn(),KI&&iy(),zy.view="Game",function(e){if("string"==typeof e)mS.getElementById(e).style.visibility="visible";else for(var a=e.length,n=0;n<a;n++)mS.getElementById(e[n]).style.visibility="visible"}(["window3","chatId","combatId","window5Id","window6"]),dw=0,fa(0===Pn()?"You have entered "+qn()+".":"You have entered "+qn()+" "+Pn()+"."),!0===KI?e("#QindicatorWrap").css("display","none"):e("#QindicatorWrap").css("display","block"),e(".dot").remove(),mS.getElementById("introText2").style.display="block",!0===KI||kw.ks>=6?(mS.getElementById("inventoryGoldOk").style.display="block",xv()):mS.getElementById("inventoryGoldOk").style.display="none",Av(E,Pn(),!0),mS.getElementById("zoneSelectWrap").innerHTML="",ny();for(var t=0;t<=4;t++)Gw[t].style.display="none",Gw[t].style.opacity=0,Nw[t].removeAllChildren(),Fw[t].style.top="0px",Fw[t].style.left="0px",qw[t].style.color="#00FA9A",qw[t].innerHTML="";Lmy.window3Y<0&&(Lmy.window3Y=603),e("#window1").css({top:Lmy.window1Y,left:Lmy.window1X}),e("#inventoryWindow").css({top:Lmy.inventoryWindowY,left:Lmy.inventoryWindowX}),e("#questJournal").css({top:Lmy.questJournalY,left:Lmy.questJournalX}),e("#mobBar").css({top:Lmy.mobBarY,left:Lmy.mobBarX}),e("#myhpbardiv").css({top:Lmy.myhpbardivY,left:Lmy.myhpbardivX}),e("#pethpbardiv").css({top:Lmy.pethpbardivY,left:Lmy.pethpbardivX}),e("#spellbardiv").css({top:Lmy.spellbardivY,left:Lmy.spellbardivX});var i=qn();mw=Ln(i),cS.set(".buttonsManage, .buttonsManageOff",{opacity:1,display:"block"}),e("#window3a").css("display","block");var o=1;a&&(o=0,Nw[8].removeAllChildren(),Pa("Blackmoor Tides")),cS.to("#curtainfade",o,{opacity:0,ease:pS.lin,onComplete:function(){cS.set("#curtainfade",{display:"none"})}}),Aa(),La(),gS.my(),Vn(),_n(),function(){for(var e=0;e<1080;e++){var a=n.getElementById("bank"+e);if(null!==a){var t=bS.bank[e];t.name?(a.src=jS,a.style.left=t.xPos+"px",a.style.top=t.yPos+"px"):a.src="/classic/images1/blank.png"}}}(),ua(),cn(),!1===qk&&(Jn(),ha("Hit Enter to begin chatting",3),ha("Type /help for chat commands",3),ha("You have joined [1. General Chat]",3),iS=cS.to("",4,{repeat:-1,onRepeat:function(){!function(){if(!1===Nk&&4!==Pn()&&0===dw&&!0===uw&&!0===pw&&Yy.level>19&&!1===KI&&!0===ya()&&!1===zH.d.addmonsterId){var e=mI;if(dS.random()*e<1&&Ab()<3&&3!==Wy[2].rare){var a=9e4,n=1;2===Yy.difficulty?(a=7e4,dS.random()>.66&&(n=2)):3===Yy.difficulty&&(a=5e4,dS.random()>.33&&(n=2)),Jk=0,Tk=!1,Nk=!0,cS.delayedCall(a/1e3,function(){Nk=!1}),1===n?(Nn("Ambush!"),mi(n)):2===n&&(Nn("Double Ambush!"),mi(n))}}var t=ya(),i=Yy.level/24;for(!1===t&&(i+=zy.maxHpFunct()/3.3),i+=zy.hpRegenEquip,(Wy[0].envenomTicks>0||Wy[1].envenomTicks>0||Wy[2].envenomTicks>0||Wy[3].envenomTicks>0||Wy[4].envenomTicks>0)&&(i=~~(i/2)),zy.popupHeal(dS.ceil(i)),!0===zy.petAlive&&(!1===t&&(ND+=dS.ceil(FD/3.3)),(ND+=~~(RD/3))>FD&&(ND=FD)),r=0;r<=4;r++)""!==Wy[r].name&&0===Wy[r].afflictionTickCount&&0===Wy[r].widowStrikeTickCount&&0===Wy[r].scourgeTickCount&&(Wy[r].hp+=~~(Wy[r].level/5)),"Enchanter"===Yy.job&&Yy.talent8>=20&&!0===Wy[hT].charmStatus&&(Wy[hT].hp+=~~(Wy[hT].maxHp/20)),Wy[r].hp>Wy[r].maxHp&&(Wy[r].hp=Wy[r].maxHp);if(zy.drawMyHp(),!0===BB&&Yy.talent2>=20){fo();for(var o=!1,r=0;r<=4;r++)if(Wy[r].name){o=!0;var l=yc(Ne()/2.6,.8);Ru(r,"red",50,12,50,20,"easeInOutQuad"),zy.myMagicDamage("fire",l,r,ee(),"Magma Burst")}o&&Qa("explode2")}}()}}),oS=cS.to("",3,{repeat:-1,onRepeat:function(){!function(){var e=startTime;startTime=new H,Yy.playtime+=startTime-e;for(var a=0;a<=4;a++)Wy[a].mp+=1,Wy[a].mp>20&&(Wy[a].mp=20);var n=Yy.job;if("Monk"!==n&&"Rogue"!==n){var t=ya();if("Warrior"!==n){Yy.maxMp=zy.maxMpFunct();var i=Yy.level/16;!1===t&&(i+=zy.maxMpFunct()/3.3),"Bard"===n&&!0===iT&&(i+=Qe()/35*(1+5.3*na()/100)),"Enchanter"===n&&!0===TB&&(i+=Qe()/25),i+=zy.mpRegenEquip,i+=Z(le())/22,"High Elf"===Yy.race&&(i+=.01*Yy.maxMp),"Necromancer"===n&&Yy.talent10>=20&&(i*=1.6);var o=0;"Magician"===n&&Yy.talent9>=20&&(o=65),i*=1+o/100,zy.popupMana(dS.ceil(i))}else!1===t&&(Yy.mp-=2,Yy.mp<0&&(Yy.mp=0),zy.drawMyMp())}}()}})),qk=!0,zk=!0,zy.drawMyMp(),zy.drawMyHp(),ca(),Yn(),"Shadow Knight"!==Yy.job&&"Shaman"!==Yy.job&&"Necromancer"!==Yy.job&&"Magician"!==Yy.job||e("#togglepetattackId").css({backgroundSize:"50px 100px"}),mI=function(){var e=300,a=qn();"Kordata Marshlands"!==a&&"Greenthorn Cavern"!==a&&"Riven Grotto"!==a&&"Lanfeld Outpost"!==a||(e=225,Yy.level<4&&(e=100));"Braxxen's Bastille"!==a&&"Arcturin's Crypt"!==a&&"Galeblast Fortress"!==a||(e=190,Yy.level<8&&(e=40));"Fahlnir Citadel"!==a&&"Temple of Prenssor"!==a||(e=165,Yy.level<20&&(e=20));"Viston's Redoubt"!==a&&"Ashenflow Peak"!==a&&"Kordata Ruins"!==a&&"Dire Sanctum"!==a&&"Nimgaul"!==a||(e=140,Yy.level<35&&(e=10));return e}(),vS=new H,En(),"Off"===kw.showCombatLog&&e("#chatId, #combatId").css("display","none"),!0===HS&&(e("#chatId, #combatId").css("display","none"),kw.showCombatLog="Off",e("#window3").css("left",390),e("#mobBar").css({top:0,left:394}),e("#pethpbardiv").css({top:120,left:5})),e("#battleReport").css({left:"auto",right:490,top:0}),DS&&Yy.level>1&&cS.delayedCall(2,function(){Nn("Warning: The latest server update forced a talent reset."),cS.delayedCall(2,function(){Nn("Please redistribute your talents.")})})}else cS.delayedCall(.033,Wn,[!0])}function On(e){e&&cS.fromTo(e,.25,{boxShadow:"0px 200px rgba(255,0,0,.5) inset"},{boxShadow:"0px 200px rgba(128,0,0,.5) inset",repeat:38,yoyo:!0,ease:pS.lin,onComplete:function(){cS.to(e,.25,{boxShadow:"0px 200px rgba(128,0,0,0) inset"})}})}function Xn(){$NG2={bankBG:e(".bankBG"),bank:e(".bank"),inventoryBG:e(".inventoryBG"),inventory:e(".inventory"),city:e(".city"),cityBG:e(".cityBG"),allEquipment:e(".equipment,.inventory,.bank,.city"),equipmentBG:e(".equipmentBG")}}function Vn(){for(var e=["helmet","neck","ring1","ring2","shoulders","back","chest","bracers","gloves","belt","legs","boots","weapon1","weapon2","range"],a=0;a<=14;a++){var t=n.getElementById(e[a]);if(null!=t){var i=bS.eq[a];i.name?(t.src=jS,t.style.left=i.xPos+"px",t.style.top=i.yPos+"px"):t.src="/classic/images1/blank.png"}}}function _n(){for(var e=0,a=bS.item.length;e<a;e++){var t=n.getElementById("inv"+e);if(null!==t){var i=bS.item[e];i.name?(t.src=jS,t.style.left=i.xPos+"px",t.style.top=i.yPos+"px"):t.src="/classic/images1/blank.png"}}}function $n(){e("#createcharacter").remove();a='<div id="createcharacter" class="strongShadow NGgradient">Create Character</div>';if(e("#showCrystalWrap").after(a),e("#deletecharacter").remove(),tw>0){var a='<div id="deletecharacter" class="strongShadow NGgradient">Delete Character</div>';e("#characterSlotPanel").before(a)}pa("leftPaneBG"),mS.getElementById("logout").style.display="block",tw>0&&In(1)}function Un(){zy.lockScreen(),e("#logout").html("Logging Out"),Nn("Logging out...");try{FB.getLoginStatus(function(e){e.authResponse&&FB.logout(function(e){})})}catch(e){}try{gapi.auth2.getAuthInstance().signOut().then(function(){})}catch(e){}localStorage.removeItem("email"),localStorage.removeItem("token"),v(function(){e.ajax({data:{run:"logout"}}).done(function(a){Nn("Logout successful");for(var n=1;n<16;n++)e("#characterslot"+n).css("display","none");e("#createcharacter, #deletecharacter").remove(),e("#enterWorldWrap").css("display","none"),e("#logout").html(""),e("#loginPassword").val(""),t.reload()}).fail(function(){Nn("Logout failed."),e("#logout").html("[ "+kw.account.split("")[0].toUpperCase()+kw.account.slice(1)+"&nbsp;Logout&nbsp;]")})},1e3)}function Jn(){e.ajax({data:{run:"checkSessionActive"}}).done(function(e){e||"Main"!==zy.view&&(xy("Your session has timed out."),v(function(){Tn()},5e3))})}function Zn(){e.ajax({url:"/classic/php/ping.php",data:{my:Yy,zone:qn()}}).done(function(e){function a(e){"Main"!==zy.view&&(xy(2222===e?"The server is going down for maintenance.":"You have been disconnected from the server. Logging out."),v(function(){B.onbeforeunload=null,Un()},5e3))}var n=1*e;isNaN(e)?a():1111===n?a():2222===n?a(2222):n>=3&&(xy("Multiple logins detected. Logging out."),v(function(){Un()},5e3)),v(function(){Zn()},2e4)}).fail(function(){Tv()})}function et(){function e(){_k.kill(),qi("runId",!1),Ei("runId","-100% -200%")}if(!(Yy.hp<=0||!0===US))if(1!==fk)if(0!==fk||!1!==ya())if(0!==sH)if(!0===KI||NS)tt();else if(3!==Wy[2].rare){if("Halfling"!==Yy.race){if(0===_w)return void xy("You are stunned!");if(0===Vw)return void xy("You are stunned!");if(0===Xw)return void xy("You are rooted!")}if(!0!==zH.d.runId){Ep();var a=6e3;0===Wy[0].engulfingDarknessTicks&&0===Wy[1].engulfingDarknessTicks&&0===Wy[2].engulfingDarknessTicks&&0===Wy[3].engulfingDarknessTicks||(a*=2),qi("runId",!0),Ei("runId","-100% -300%"),"Halfling"!==Yy.race?(_k.kill(),_k=cS.to("",a/1e3,{repeat:-1,onRepeat:e})):(_k.kill(),a-=1,_k=cS.to("",a/1e3,{repeat:-1,onRepeat:e})),jy(mS.getElementById("runId"),a/1e3,"runId"),fa("You attempt to run for your life."),Vk=cS.delayedCall(3,function(){if(!1!==ya()){if("Halfling"!==Yy.race){if(0===_w)return void fa("You cannot run while stunned!");if(0===Vw)return void fa("You cannot run while feared!");if(0===Xw)return void fa("You cannot run while rooted!")}if(nt()>200*dS.random())return fa("You manage to escape this time!"),0===zy.autoAttackStatus&&Si(),void tt();Uk+=10;var e=at();fa(Wy[e].name+" blocks your path!")}})}}else xy("You cannot run from "+Wy[2].name+"!");else xy("You cannot run while casting a spell!");else tt();else fa("There's nothing to run away from!")}function at(){for(var e=0,a=0,n=0;n<=4;n++)Wy[n].name&&Wy[n].level>e&&(a=n,e=Wy[n].level);return a}function nt(){var e=at();if(Wy[e].level<=Yy.level)a=dS.round(35+2*(Yy.level-Wy[e].level));if(Wy[e].level>Yy.level)a=dS.round(35-5*(Wy[e].level-Yy.level));if(Wy[e].level-5>=Yy.level)var a=15;a>75&&(a=75),(a+=dS.round(Z(oe()))/8)>=100&&(a=100),(!0===Wy[e].snareStatus||!0===Wy[e].chillStatus||Wy[e].rootStatus>0||Wy[e].doomingDarknessTickCount>0||Wy[e].cascadingDarknessTickCount>0)&&(a+=4),!0===NC&&(a+=8),!0===PM&&(a+=10);a+=dS.round(25-Yy.level/2);for(var n=!1,t=0;t<=4;t++)Wy[t].name&&1==Wy[t].ensnaringAura&&(n=!0);return 1==n&&(a*=.66),a+=Uk,a+=zy.runSpeedEquip}function tt(){qi("addmonsterId",!0),Ei("addmonsterId","0 -300%"),$S.kill(),$S=cS.delayedCall(3,rv),jy(mS.getElementById("addmonsterId"),3,"addmonsterId"),ca(),NG.mobTraits.innerHTML="",sH=1,0===zy.autoAttackStatus&&Si(),Jk=1,eL.kill(),nS.kill(),tS.kill(),VL.kill(),pL="";for(a=0;a<=4;a++)Wy[a].attackStatus=1;Uk=0,TC.kill(),RC.kill(),!0===TM&&Fi(),"Bard"!==Yy.job&&"Enchanter"!==Yy.job||""===qD||(fT.kill(),Wy[hT].charmStatus=!1,qD="",e("#pethpbardiv").css("display","none"));for(var a=0;a<=4;a++)Wy[a].doomingDarknessInterval.kill(),Wy[a].heatBloodInterval.kill(),Wy[a].slowTimer.kill(),Wy[a].consonantChain=0,Wy[a].euphonicHymn=0,Wy[a].martyr=!1,Wy[a].togorsInsectsTimeout.kill(),Wy[a].slowStatus=!1,Wy[a].regenStatus=!0,Wy[a].attack.kill(),Wy[a].spellActive.kill(),Wy[a].thornsTimer.kill(),Wy[a].thornsActive=1,Wy[a].lavaShieldActive=1,Wy[a].runeHp=0,Wy[a].rare=1,Wy[a].castingStatus=!1,Wy[a].widowStrikeInterval.kill(),Wy[a].widowStrikeTickCount=0,Wy[a].hemorrhageInterval.kill(),Wy[a].furiousScorn=0,Wy[a].faerieFlameTickInterval.kill(),Wy[a].snareStatus=!1,Wy[a].dazeTimer.kill(),Wy[a].dazeStatus=!1,e(".freezeIcon"+a).remove(),Wy[a].shatterStatus=!1,Wy[a].frozenStatus=!1,Wy[a].name="",Wy[a].ID=0,e("#fearIcon"+a).remove(),e("#iceIcon"+a).remove(),e("#rootIcon"+a+",#rootBuffIcon"+a).remove(),Cg(a),qw[a].style.color="#00fa9a",qw[a].innerHTML="",Wy[a].riftStatus=!1,e("#orbIcon"+a).remove(),it(a);cI.kill(),NG.spellbardiv.style.display="none",sH=1,lH=1,e("#mobBar").css("visibility","hidden"),fk=1,Yy.escapes+=1,Ea(),Vt(),gS.my(),zy.showPortal&&Fy()}function it(e,a){cS.killTweensOf(Gw[e]),cS.killChildTweensOf(Gw[e]),e===E&&(e=bL),Wy[e].attack.kill(),!0===a&&ln(2,"lightning",.5),cS.to(Gw[e],.5,{opacity:0,ease:pS.cout,onComplete:function(){Nw[e].removeAllChildren(),Gw[e].style.display="none"}})}function ot(){if("Cleric"===Yy.job&&Yy.talent2>=20&&!1===wI)!function(){wI=!0;cS.delayedCall(300,function(){wI=!1}),Lu("yellow"),Qa("spellDoneBuff"),Bi("Miracle","Miracle",3e5,-448),Yy.hp=.4*zy.maxHpFunct(),fa("You have been saved by a Miracle!",3),zy.drawMyHp()}();else{Vk.kill(),YL.kill(),iS.kill(),oS.kill(),lS.kill(),rS.kill(),0===zy.autoAttackStatus&&Si(),$w.kill(),lC=!1,Uw.kill(),Jw.kill(),oC=!1,Zw.kill(),Zw.kill(),eC.kill(),rC=!1,nC.kill(),dC=!1,aC.kill(),cC=!1,Ek=!1,LC=0,xC.kill(),HC=0,AC=1,vC=0,yC.kill(),SC=!1,"Warrior"===Yy.job&&(wC.kill(),Yo()),TC.kill(),Kw=!1,BC.kill(),Ww=!1,RC.kill(),OC.kill(),KC=!1,XC.kill(),VC=!1,$C.kill(),VC=!1,ZC.kill(),JC=!1,tM.kill(),eM=!1,rM.kill(),iM=!1,lM=!1,uM.kill(),cM=!1,!0===pM&&(hM.kill(),pM=!1),!0===yM&&(bM.kill(),yM=!1),!0===IM&&(CM.kill(),IM=!1),!0===zy.petAlive&&(pb(),ND=0),xM.kill(),AM.kill(),qM.kill(),GM.kill(),RM.kill(),QM.kill(),jM.kill(),NM.kill(),KM.kill(),YM.kill(),XM.kill(),$M.kill(),_M.kill(),nT.kill(),uT.kill(),tT.kill(),rT.kill(),oT.kill(),lT.kill(),sT.kill(),dT.kill(),cT.kill(),fT.kill(),AM.kill(),BM=!1,DM=0,LM=0,HM=0,EM=!1,qM.kill(),QM.kill(),PM=!1,NM.kill(),FM=!1,YM.kill(),zM=!1,WM=0,OM=0,_M.kill(),VM=!1,UM=0,JM=0,ZM=0,eT=0,iT=!1,mT=!1,dT.kill(),PT=!1,vT.kill(),gT=!1,ST.kill(),yT=!1,DT.kill(),IT=!1,GT=!1,qT.kill(),AT.kill(),LT=!1,KT=!1,JT.kill(),aB.kill(),ZT=!1,II=!1,lB.kill(),nB=!1,uB=!1,bB.kill(),fB=!1,CB.kill(),wB=!1,vB=!1,AB.kill(),DB=!1,rM.kill(),xB=!1,PB.kill(),qB=!1,RB=!1,VB=0,Wy[hT].charmStatus=!1,qD="",e("#pethpbardiv").css("display","none"),YL.kill(),_w=1,$L.kill(),JL=1,UL.kill(),ZL=1,XL.kill(),Ow=1,OL.kill(),Xw=1,qi("runId",!1),Ei("runId","-100% -200%"),KL.kill(),Vw=1,cS.set(mS.getElementById("spellblind"),{opacity:0,background:"transparent"}),WL.kill(),zy.blindStatus=1,_L.kill(),aH=!1,VL.kill(),eH=1,XI=!1;for(a=0;a<=4;a++)Wy[a].widowStrikeInterval.kill(),Wy[a].widowStrikeTickCount=0,Wy[a].lacerate=0,Wy[a].hemorrhageInterval.kill(),Wy[a].furiousScorn=0,Wy[a].faerieFlameTickInterval.kill(),Wy[a].snareStatus=!1,Wy[a].blindStatus=!1,Wy[a].dazeTimer.kill(),Wy[a].dazeStatus=!1,Wy[a].doomingDarknessInterval.kill(),Wy[a].heatBloodInterval.kill(),Wy[a].slowTimer.kill(),Wy[a].consonantChain=0,Wy[a].euphonicHymn=0,Wy[a].martyr=!1,Wy[a].togorsInsectsTimeout.kill(),Wy[a].slowStatus=!1,Wy[a].regenStatus=!0,Wy[a].attack.kill(),Wy[a].thornsTimer.kill(),Wy[a].spellActive.kill(),Wy[a].dotActive.kill(),Wy[a].castingStatus=!1,Wy[a].thornsActive=1,Wy[a].lavaShieldActive=1,Wy[a].runeHp=0,Wy[a].envenomTicks=0,Wy[a].engulfingDarknessTicks=0,Wy[a].staticFieldTicks=0,Wy[a].blizzardTicks=0,Wy[a].conflagrationTicks=0,Wy[a].rare=1,Wy[a].shatterStatus=!1,Wy[a].silenced=!1,Wy[a].frozenStatus=!1,Wy[a].name="",Wy[a].ID=0,e("#fearIcon"+a).remove(),e(".freezeIcon"+a).remove(),e("#iceIcon"+a).remove(),e("#orbIcon"+a).remove(),e("#boastfulIcon"+a).remove(),Wy[a].riftStatus=!1;if(e("#hurricaneImage,#hurricaneImage2").stop(!0,!0).remove(),xD.kill(),OI=!1,fk=1,e(".buffIcons").remove(),function(){for(var e=0;e<=4;e++)mobEnvenomTimer[e].kill(),mobEngulfingDarknessTimer[e].kill(),mobStaticFieldTimer[e].kill(),mobBlizzardTimer[e].kill(),mobConflagrationTimer[e].kill(),mobsEnvenomTimer[e].kill(),mobsEngulfingDarknessTimer[e].kill(),mobsStaticFieldTimer[e].kill(),mobsBlizzardTimer[e].kill(),mobsConflagrationTimer[e].kill(),mobFearTimers[e].kill(),mobGlobeOfDarknessTimers[e].kill(),mobMindNumbTimers[e].kill(),mobWeakenTimers[e].kill(),mobYawnTimers[e].kill(),MthornsTimers[e].kill(),MlavaTimers[e].kill(),MenrageTimers[e].kill(),MflurryTimers[e].kill(),MamplifyMagicTimers[e].kill(),MsanctuaryTimers[e].kill(),MbarrierTimers[e].kill(),MironMaidenTimers[e].kill(),mobsSilenceTimer[e].kill();$B.kill(),JB.kill(),ZB.kill(),eD.kill(),aD.kill(),nD.kill(),tD.kill(),iD.kill(),oD.kill(),rD.kill(),UB.kill(),lD.kill(),sD.kill(),dD.kill(),cD.kill(),mD.kill(),uD.kill(),fD.kill(),hD.kill(),gD.kill(),pD.kill(),bD.kill(),vD.kill(),yD.kill(),kD.kill(),SD.kill(),ID.kill(),!0===lC&&(lC=!1);!0===iC&&(iC=!1);Jw.kill(),oC=!1,!0===sC&&Zw.kill();!0===rC&&(eC.kill(),rC=!1);!0===dC&&(nC.kill(),dC=!1);aC.kill(),cC=!1,ED.kill(),wD.kill(),CD.kill(),MD.kill(),TD.kill(),BD.kill(),DD.kill(),LD.kill(),HD.kill(),AD.kill()}(),Ea(),$w.kill(),lC=!1,oC=!1,Uw.kill(),Zw.kill(),Zw.kill(),fI.kill(),rC=!1,cC=!1,dC=!1,Oy=0,Xy=0,Vy=0,_y=0,$y=0,Uy=0,Jy=0,Zy=0,ek=0,ak=0,nk=0,ik=0,ok=0,rk=0,lk=0,sk=0,dk=0,ck=0,tk=0,mk=0,uk=0,HI=fn(),un(),!0===zk){ny(),NG.spellbardiv.style.display="none",cI.kill(),sH=1,lH=1;for(var a=0;a<=4;a++)qw[a].style.color="#00FA9A",qw[a].innerHTML="";0===zy.autoAttackStatus&&Si(),cv("#b22222"),cS.to(spellCurtain,.1,{alpha:.7});var n='<span class="deathCapital">Y</span>OU <span class="deathCapital">H</span>AVE <span class="deathCapital">D</span>IED<br><div id="battleReportOK"><span class="deathCapital">R</span>ESURRECT</div> ';if("true"===Yy.hardcoreMode)n='<span class="deathCapital">Y</span>OUR <span class="deathCapital">D</span>EEDS <span class="deathCapital">W</span>ILL<br><span class="deathCapital">B</span>E <span class="deathCapital">R</span>EMEMBERED',Yy.deaths+=1,cS.pauseAll(),B.onbeforeunload=null;else{var t=0,i=Yy.level;i>=1&&i<10&&(t=dS.ceil(.05*Yy.gold)),i>=10&&i<20&&(t=dS.ceil(.1*Yy.gold)),i>=20&&i<30&&(t=dS.ceil(.15*Yy.gold)),i>=30&&(t=dS.ceil(.2*Yy.gold)),t>zy.difficulty*i*100&&(t=zy.difficulty*i*100);var o=va(i-1),r=va()-o,l=0;i>=6&&(l=~~(r*(i/98*.2)));var s=Yy.exp-o;l>s&&(l=s),zy.lostExp=l,zy.lostGold=t,zy.oldExp=Yy.exp,l>0&&i>=6&&e.ajax({url:"/classic/php/game1.php",data:{run:"updateExpGold",lastName:Yy.lastName,title:Yy.title,level:Yy.level,job:Yy.job,race:Yy.race,exp:-1*l,gold:-1*t,name:Yy.name}}).done(function(e){Yy.exp-=l,Yy.gold-=t}).fail(function(e){Tv()}),Yy.deaths+=1,Bn()}e("#deathScreen").html(n).css("display","block");var d="death_mb";"Female"===Yy.gender&&(d="death_fl"),Qa(d),"block"===e("#worldMap").css("display")&&gy(),cS.delayedCall(.1,function(){zy.drawMyHp()}),gS.my(),"true"===Yy.hardcoreMode&&(zy.hardcoreDeathStatus=!0)}U()}}function rt(){var e=Yy.piercing,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Rogue"===a){if(e>=400)return!1}else if("Necromancer"===a||"Wizard"===a||"Magician"===a||"Enchanter"===a){if(e>=150)return!1}else if(e>=360)return!1;return Yy.piercing+=1,ny(),fa("Your piercing has increased! ("+(e+1)+")",4),!0}function lt(){var e=Yy.oneHandBlunt,a=Yy.job;if(e>=5*Yy.level)return!1;if("Necromancer"===a||"Wizard"===a||"Magician"===a||"Enchanter"===a){if(e>=150)return!1}else if("Monk"===a||"Rogue"===a){if(e>=400)return!1}else if("Druid"===a||"Cleric"===a){if(e>=300)return!1}else if(e>=360)return!1;return Yy.oneHandBlunt+=1,ny(),fa("Your one-hand blunt has increased! ("+(e+1)+")",4),!0}function st(){var e=Yy.twoHandBlunt,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Necromancer"===a||"Wizard"===a||"Magician"===a||"Enchanter"===a){if(e>=150)return!1}else if("Monk"===a){if(e>=400)return!1}else if("Druid"===a||"Cleric"===a){if(e>=300)return!1}else if(e>=360)return!1;return Yy.twoHandBlunt+=1,ny(),fa("Your two-hand blunt has increased! ("+(e+1)+")",4),!0}function dt(){var e=Yy.oneHandSlash,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Druid"===a){if(e>=300)return!1}else if("Rogue"===a){if(e>=400)return!1}else if(e>=360)return!1;return Yy.oneHandSlash+=1,ny(),fa("Your one-hand slashing has increased! ("+(e+1)+")",4),!0}function ct(){var e=Yy.twoHandSlash;Yy.job;return!(e<1)&&(!(e>=5*Yy.level)&&(!(e>=360)&&(Yy.twoHandSlash+=1,ny(),fa("Your two-hand slashing has increased! ("+(e+1)+")",4),!0)))}function mt(){var e=Yy.handtohand,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Monk"!==a){if(e>=100)return!1}else if(e>=400)return!1;return Yy.handtohand+=1,Ia(),ny(),fa("Your hand to hand has increased! ("+(e+1)+")",4),!0}function ut(){var e=Yy.defense,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Warrior"===a){if(e>=240)return!1}else if("Monk"===a){if(e>=230)return!1}else if("Paladin"===a||"Shadow Knight"===a){if(e>=210)return!1}else if("Ranger"===a||"Rogue"===a||"Cleric"===a||"Druid"===a||"Shaman"===a||"Bard"===a){if(e>=200)return!1}else if(e>=150)return!1;return Yy.defense+=1,ny(),fa("Your defense has increased! ("+(e+1)+")",4),!0}function ft(){var e=Yy.offense,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Monk"===a||"Rogue"===a){if(e>=240)return!1}else if("Warrior"===a||"Ranger"===a){if(e>=220)return!1}else if("Paladin"===a||"Shadow Knight"===a||"Bard"===a||"Cleric"===a||"Shaman"===a||"Druid"===a){if(e>=200)return!1}else if(e>=150)return!1;return Yy.offense+=1,ny(),fa("Your offense has increased! ("+(e+1)+")",4),!0}function ht(){var e=Yy.dualWield,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Monk"===a){if(e>=250)return!1}else if(e>=210)return!1;return Yy.dualWield+=1,ny(),fa("Your dual wield has increased! ("+(e+1)+")",4),!0}function gt(){var e=Yy.doubleAttack,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Warrior"===a||"Ranger"===a){if(e>=220)return!1}else if("Monk"===a||"Rogue"===a){if(e>=240)return!1}else if(e>=200)return!1;return Yy.doubleAttack+=1,ny(),fa("Your double attack has increased! ("+(e+1)+")",4),!0}function pt(){var e=Yy.dodge,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Monk"===a){if(e>=200)return!1}else if("Rogue"===a){if(e>=175)return!1}else if("Ranger"===a||"Warrior"===a){if(e>=140)return!1}else if("Paladin"===a||"Shadow Knight"===a||"Bard"===a){if(e>=125)return!1}else if(75===e)return!1;return Yy.dodge+=1,ny(),fa("Your dodge has increased! ("+(e+1)+")",4),!0}function bt(){var e=Yy.parry,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Ranger"===a){if(e>=185)return!1}else if("Paladin"===a||"Shadow Knight"===a){if(e>=175)return!1}else if("Bard"===a){if(e>=75)return!1}else if(e>=200)return!1;return Yy.parry+=1,ny(),"Monk"!==a?fa("Your parry has increased! ("+(e+1)+")",4):fa("Your block has increased! ("+(e+1)+")",4),!0}function vt(){var e=Yy.riposte,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Paladin"===a||"Shadow Knight"===a){if(e>=175)return!1}else if("Ranger"===a){if(e>=150)return!1}else if("Bard"===a){if(e>=75)return!1}else if(e>=200)return!1;return Yy.riposte+=1,ny(),fa("Your riposte has increased! ("+(e+1)+")",4),!0}function yt(){var e=Yy.alteration,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Cleric"===a||"Shaman"===a||"Enchanter"===a){if(e>=400)return!1}else if("Bard"===a){if(e>=390)return!1}else if("Necromancer"===a||"Magician"===a||"Wizard"===a){if(e>=380)return!1}else if("Druid"===a){if(e>=375)return!1}else if(e>=350)return!1;return Yy.alteration+=1,ny(),"Bard"!==a?fa("Your alteration has increased! ("+(e+1)+")",4):fa("Your singing has increased! ("+(e+1)+")",4),!0}function kt(){var e=Yy.abjuration,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("hybrid"===wH.jobType){if(e>=350)return!1}else if("Bard"===a){if(e>=390)return!1}else if("Wizard"===a||"Necromancer"===a||"Magician"===a){if(e>=390)return!1}else if("Druid"===a){if(e>=375)return!1}else if(e>=400)return!1;return Yy.abjuration+=1,ny(),"Bard"!==a?fa("Your abjuration has increased! ("+(e+1)+")",4):fa("Your string instrument skill has increased! ("+(e+1)+")",4),!0}function St(){var e=Yy.conjuration,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Necromancer"===a||"Magician"===a){if(e>=400)return!1}else if("Bard"===a){if(e>=390)return!1}else if("Enchanter"===a||"Wizard"===a){if(e>=380)return!1}else if("Shaman"===a||"Druid"===a){if(e>=375)return!1}else if(e>=350)return!1;return Yy.conjuration+=1,ny(),"Bard"!==a?fa("Your conjuration has increased! ("+(e+1)+")",4):fa("Your wind instrument skill has increased! ("+(e+1)+")",4),!0}function It(){var e=Yy.evocation,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Wizard"===a){if(e>=400)return!1}else if("Bard"===a){if(e>=390)return!1}else if("Enchanter"===a||"Necromancer"===a||"Magician"===a){if(e>=380)return!1}else if("Shaman"===a||"Druid"===a){if(e>=375)return!1}else if(e>=350)return!1;return Yy.evocation+=1,ny(),"Bard"!==a?fa("Your evocation has increased! ("+(e+1)+")",4):fa("Your percussion instrument skill has increased! ("+(e+1)+")",4),!0}function wt(){var e=Yy.channeling,a=Yy.job;if(e<1)return!1;if(e>=5*Yy.level)return!1;if("Bard"===a){if(e>=390)return!1}else if("Shaman"===a||"Druid"===a||"Cleric"===a){if(e>=380)return!1}else if("Ranger"===a||"Paladin"===a||"Shadow Knight"===a){if(e>=350)return!1}else if(e>=400)return!1;return Yy.channeling+=1,ny(),"Bard"!==a?fa("Your channeling has increased! ("+(e+1)+")",4):fa("Your brass instrument skill has increased! ("+(e+1)+")",4),!0}function Ct(){function e(a){a>0&&(qt(!0),cS.delayedCall(.15,function(){e(--a)}))}function e(a){a>0&&(qt(!0),cS.delayedCall(.15,function(){e(--a)}))}function e(a){a>0&&(qt(!0),cS.delayedCall(.15,function(){e(--a)}))}function e(a){a>0&&(qt(!0),cS.delayedCall(.15,function(){e(--a)}))}function e(a){a>0&&(qt(!0),cS.delayedCall(.15,function(){e(--a)}))}if(nS.kill(),1!==fk){if(0===sH||!0===Wy[bL].charmStatus||1===zy.autoAttackStatus||"Ice Block"===iH)return nS=cS.delayedCall(.1,Ct),void ki(.1);if(0===fk&&0===zy.autoAttackStatus&&("slashed"===bS.eq[12].type?Pb()>Yy.oneHandSlash&&dt():"crushed"===bS.eq[12].type?Pb()>Yy.oneHandBlunt&&lt():"cleaved"===bS.eq[12].type?Pb()>Yy.twoHandSlash&&ct():"smashed"===bS.eq[12].type||"staff"===bS.eq[12].type?Pb()>Yy.twoHandBlunt&&st():"pierced"===bS.eq[12].type?Pb()>Yy.piercing&&rt():"punched"===bS.eq[12].type&&Pb()>Yy.handtohand&&mt(),Yy.offense<5*Yy.level&&Pb()>Yy.offense&&ft(),Yy.doubleAttack<5*Yy.level&&Pb()>Yy.doubleAttack&&gt()),qt(!0),"Cleric"===Yy.job){if(Yy.talent5>=1){a=dS.ceil(ea()/4);e(a)}}else if("Shaman"===Yy.job){if(Yy.talent11>=1){a=dS.ceil(ra()/5.8);e(a)}}else if("Enchanter"===Yy.job){if(Yy.talent8>=1){a=dS.ceil(ta()/4);e(a)}}else if("Ranger"===Yy.job){if(Yy.talent3>=1){a=dS.ceil(Je()/5.8);e(a)}}else if("Warrior"===Yy.job&&Yy.talent8>=20){var a;e(a=5)}if(""!==bS.eq[12].proc&&0===zy.autoAttackStatus&&Wy[bL].name){var n=Z(re())/8;n>50&&(n=50);400*dS.random()+n>380&&Bt(12)}if(Yy.doubleAttack>=1&&100*dS.random()<_e()&&(rS=cS.delayedCall(.25,function(){qt(!0,0,!0)})),0===fk)if(!1===Ak){t=pe()/1e3;nS=cS.delayedCall(t,Ct),ki(t)}else{var t=LI/1e3;nS=cS.delayedCall(t,Ct),ki(t)}}}function Mt(){if(tS.kill(),1!==fk)if(!0!==Wy[bL].charmStatus&&0!==sH&&1!==zy.autoAttackStatus&&"cleaved"!==bS.eq[12].type&&"smashed"!==bS.eq[12].type&&"staff"!==bS.eq[12].type&&"shield"!==bS.eq[13].itemSlot){if(0===fk&&Pb()>Yy.dualWield&&ht(),100*dS.random()<Ve()){if(0===fk&&0===zy.autoAttackStatus&&("slashed"===bS.eq[13].type?Pb()>Yy.oneHandSlash&&dt():"crushed"===bS.eq[13].type?Pb()>Yy.oneHandBlunt&&lt():"pierced"===bS.eq[13].type?Pb()>Yy.piercing&&rt():"punched"===bS.eq[13].type&&Pb()>Yy.handtohand&&mt()),qt(!1),""!==bS.eq[13].proc&&0===zy.autoAttackStatus&&Wy[bL].name){var e=Z(re())/8;e>50&&(e=50);400*dS.random()+e>380&&Bt(13)}Yy.doubleAttack>=1&&100*dS.random()<_e()&&(lS=cS.delayedCall(.25,function(){qt(!1,0,!0)}))}0===fk&&(tS=!1===Ak?cS.delayedCall(be()/1e3,Mt):cS.delayedCall(LI/1e3,Mt))}else tS=cS.delayedCall(.1,Mt)}function Tt(a,n,t){function i(e,a){if(e<=5)if(!1===ya())cS.delayedCall(.5,i,[e,a]);else{var o=~~(dS.random()*n)+t;zy.petPhysical(o,bL,"physical",!0),dS.random()>.6&&cS.delayedCall(.1,function(){var e=~~(dS.random()*n)+t;zy.petPhysical(e,bL,"physical",!0)}),Qa("wolf_att2"),cS.delayedCall(1.5,i,[++e,a]),cS.to(hk[a],.25,{startAt:{rotationY:0},left:Gw[bL].offsetLeft,onComplete:function(){cS.to(this.target,1,{startAt:{rotationY:180},left:-50,onComplete:function(){cS.set(this.target,{rotationY:0})}})}})}else cS.to(hk[a],.5,{opacity:0,onComplete:function(){hk[a].remove()}})}a||(a="Grovecaller"),zy.familiarName=a,n||(n=255),t||(t=125),Ru(bL,"white"),fa(Yy.name+" summons a familiar of the "+a+".",3),Qa("spellCastAbjure"),hk[++gk]=e('<img id="mistwalkerId'+gk+'">').css({position:"absolute",bottom:50,left:-50,opacity:0,width:400}).attr("src","/classic/images1/a white wolf.png").appendTo($NG.eWin2),cS.to(hk[gk],.5,{opacity:1}),cS.delayedCall(.25*dS.random()+.5,i,[0,gk])}function Bt(a){function n(){Gt(bL,"orange","explode"+~~(3*dS.random()+1)),zy.myMagicDamage("fire",85+~~(25*dS.random()),bL,l," is struck by a hydra bolt",s)}function t(){Eo("yellow");for(var e=0;e<=4;e++)Wy[e].name&&zy.myMagicDamage("magic",~~(100*dS.random()+250),e,l,"'s skin shreds as swords rain down",s)}function i(e,a){Yy.hp<=0?wi("blessingOfNatureIcon"+a):(e++,zy.popupHeal(17),e<6?cS.delayedCall(1,function(){i(e,a)}):wi("blessingOfNatureIcon"+a))}function o(e,a){Yy.hp<=0?wi("barrierOfForceIcon"+a):(e++,zy.popupMana(21),e<6&&cS.delayedCall(1,function(){o(e,a)}))}function r(){du(4,4,2,50),Qa("earthquakeloop2",0,500);for(var e=0;e<=4;e++)Wy[e].name&&(zy.myMagicDamage("physical",~~(75*dS.random()+215),e,ee(),"Tremor",!0),Ht(e))}var l=!1,s=!0,d=bS.eq[a].name;if(5===bS.eq[a].rarity)if("Falzitherin's Claw"===d)Ru(bL,"green"),fa(Wy[bL].name+" is blasted by noxious vapors.",3),Pm(bL,yc(195,.9),"Noxious Vapors","poison",9,1e3,"spellCastDot");else if("Seething Myrmidon's Gavel"===d)Gt(bL,"orange"),zy.myMagicDamage("fire",787,bL,l," is struck by a sudden burst of flames",s);else if("Plankton Laced Greatsword"===d){Qa("novaice"),fo("frostNova");for(h=0;h<=4;h++)if(Wy[h].name){var c=yc(458,.85);zy.myMagicDamage("cold",c,h,ee(),"Vile Plankton")!==E&&hu(h,7e3,-288)}}else if("Jysin's Blade of the Darkwind"===d)Tt("Darkwind",367,231);else if("Sword of Truth"===d)Gt(bL,"teal"),ao(bL,3e3,-32),zy.myMagicDamage("lightning",~~(375*dS.random()+275),bL,l," is blasted by crackling ether",s);else if("Indocolite Revenant Thresher"===d)Gt(bL,"purple"),zy.myMagicDamage("poison",~~(111*dS.random()+499),bL,l," is crushed by despondence",s),Wy[bL].snareStatus=!0;else if("Grove Walker's Scimitar"===d)Ru(bL,"green"),fa(Wy[bL].name+" is blasted by fungal spores.",3),Pm(bL,yc(211,.85),"Fungal Spores","poison",9,1e3,"spellCastDot");else if("Odious Spear of Fate"===d)Ru(bL,"purple"),fa(Wy[bL].name+" is beset by a plague.",3),Pm(bL,yc(176,.8),"Odious Plague","poison",13,1e3,"spellCastDot");else if("Painmurder Mallet"===d)Gt(bL,"magenta"),zy.myMagicDamage("magic",777,bL,l," is blasted by psychic energy",s);else if("Executioner's Thunderclap"===d)Gt(bL,"yellow"),ao(bL,2100,-32),zy.myMagicDamage("lightning",yc(555,.5),bL,l," is zapped by a ripple of static",s);else if("Megnemon's Glacial Crook"===d)zy.glacialSpikeFinish(!0);else if("Carbilloth's Rainbow Ire"===d){var m="green",u="poison",f=100*dS.random();f>.8?(m="magenta",u="magic"):f>.6?(m="orange",u="fire"):f>.4?(m="yellow",u="lightning"):f>.2&&(m="teal",u="cold"),Gt(bL,m),zy.myMagicDamage(u,yc(999,.66),bL,l," is blasted by rainbow hues",s)}else"Heart of Burning Embers"===d?(Gt(bL,"orange"),zy.myMagicDamage("fire",520,bL,l," is blasted by a pyroclastic flow",s),Pm(bL,yc(162,.75),"Pyroclastic Flow","fire",6,1e3,"spellDoneFlames"),Ru(bL,"orange")):"Sanctified Gavel of Pharmakos"===d&&(Ru(bL,"white"),Li("Kelpie Haze",bL,"snareIcon",0,-32),Wy[bL].snareStatus=!0);else if(4===bS.eq[a].rarity)"Hallowed Gavel of Pharmakos"===d||("Satyr's Artifice"===d?(Gt(bL,"magenta"),zy.myMagicDamage("magic",505,bL,l," is struck by a crackling litany",s)):"Bloodletter's Lancet"===d?(Gt(bL,"red"),zy.myMagicDamage("magic",45,bL,l,"'s blood is siphoned",s),zy.popupHeal(45)):"Daimyo's Giri"===d?(Gt(bL,"red"),zy.myMagicDamage("fire",~~(50*dS.random()+270),bL,l," is struck by a sudden burst of flames",s)):"Baron's Glissando"===d?(Gt(bL,"magenta"),ao(bL,2500,-32),zy.myMagicDamage("magic",~~(175*dS.random()+175),bL,l," is barraged by a sonic force",s)):"Venova's Martel"===d?(Ru(bL,"white"),fa(Wy[bL].name+" is engulfed in the wrath of holy light.",3),Pm(bL,yc(165,.8),"Primal Corruption","magic",7,1e3,"spellDoneFlames")):"Augur's Harvester"===d?(Qm(bL,12,1e3),Gt(bL,"red"),zy.myMagicDamage("fire",yc(333,.5),bL,l,"'s wounds sizzle",s)):"Warder's Hailrend"===d?(Gt(bL,"teal"),ou(bL),zy.myMagicDamage("cold",255,bL,l," is blasted by a hailstorm",s),zy.myMagicDamage("lightning",yc(410,.25),bL,l," is struck by lightning")):"Warder's Magmahew"===d&&(Gt(bL,"red"),zy.myMagicDamage("fire",341,bL,l," is charred by searing magma",s),ao(bL,2400,-32)));else if("Short Sword of the Ykesha"===d||"Short Sword of the Crokyn"===d||"Ykeshan Broad Axe"===d||"Crokyn Broad Axe"===d)Gt(bL,"magenta"),zy.myMagicDamage("magic",150,bL,l," is struck by the force of Crokyn",s);else if("Ebony Blade"===d||"Spriggan's Blade"===d){if(zy.myMagicDamage("magic",dS.ceil(10+Yy.level),bL,l," is entangled in roots",s),!0===Gb(bL))return void fa(Wy[bL].name+" is immune to Root.",1);if(!0===ac(bL))return void fa(Wy[bL].name+" resisted Root.",1);fa(Wy[bL].name+" is rooted.",3),Cg(bL),Wy[bL].rootStatus=3,e("#rootIcon"+bL+",#rootBuffIcon"+bL).remove(),kv(bL,!0),Li("Root",bL,"rootBuffIcon",0,0,0,"root")}else if("Crystalline Scimitar"===d||"Iceshard Scimitar"===d)Gt(bL,"blue"),zy.myMagicDamage("cold",44,bL,l," is blasted by frost",s);else if("Ghoulbane"===d||"Soulgrinder"===d)!0===fb(bL)&&(Gt(bL,"magenta"),zy.myMagicDamage("magic",150,bL,l," is blasted by holy power",s));else if("Bladed Thulian Claws"===d||"Bladed Prenssor Claws"===d)Gt(bL,"red"),zy.myMagicDamage("fire",75,bL,l,"'s flesh blisters",s);else if("Screaming Mace"===d||"Howling Mace"===d)Gt(bL,"magenta"),zy.myMagicDamage("magic",38,bL,l," is struck by a lupine blast",s);else if("Cold Iron Morning Star"===d)Gt(bL,"blue"),zy.myMagicDamage("cold",33,bL,l," is struck by the frigid north",s);else if("Stormeye"===d)Gt(bL,"yellow"),zy.myMagicDamage("lightning",179,bL,l," is thunderstruck",s);else if("The Jade Tan Do"===d||"The Witch Doctor"===d)Gt(bL,"green"),zy.myMagicDamage("poison",22,bL,l,"'s flesh rots",s);else if("Sacrificial Dagger"===d)Gt(bL,"magenta"),fa("Sacrificial blood restores your mind.".fontcolor("#1e90ff")),zy.popupMana(14);else if("Trident of the Seven Seas"===d||"Trident of Edenburg"===d)Gt(bL,"yellow"),zy.myMagicDamage("lightning",109,bL,l," is struck by a thunderbolt",s);else if("Serrated Bone Dirk"===d||"Serrated Bone Cinquedeas"===d)Gt(bL,"magenta"),zy.myMagicDamage("magic",22,bL,l,"'s life force is drained",s),zy.popupHeal(22);else if("Gigantic Zweihander"===d||"Gigantic Frostreaper"===d)Gt(bL,"blue"),zy.myMagicDamage("cold",143,bL,l," is struck by the arctic winds of Fenwoven",s);else if("Lamentation Blade"===d)Gt(bL,"magenta"),zy.myMagicDamage("magic",195,bL,l," is struck by death and despair",s);else if("Blighthammer"===d)Gt(bL,"green"),zy.myMagicDamage("poison",175,bL,l," is wrought by a deathly plague",s);else if("Mroon's Toy"===d){Gt(bL,"yellow");for(var a=bL,h=0;h<=5;h++)zy.myMagicDamage("lightning",dS.ceil(50*dS.random())+1,a,l," is pummeled by a hail of lightning",s)}else if("The Salamander"===d){Gt(bL,"red");for(var a=bL,h=0;h<=2;h++)zy.myMagicDamage("fire",dS.ceil(40*dS.random())+80,a,l," is singed by a hydra bolt",s)}else if("Kreizenn's Flame"===d||"Clastocaust's Flame"===d)Gt(bL,"orange"),zy.myMagicDamage("fire",100,bL,l," skin erupts in flame",s);else if("Scimitar of the Mistwalker"===d||"Scimitar of the Grovecaller"===d)Tt();else if("Fluxbladed Axe"===d)Gt(bL,"magenta"),zy.myMagicDamage("magic",150,bL,l," is struck by fluxing strands of chaos",s);else if("Hexfire"===d||"Hydraclash"===d)n(),cS.delayedCall(.5,n),cS.delayedCall(1,n);else if("Baezil's Vortex"===d||"Rathmonan's Vortex"===d){fo("lightningNova"),Qa("novaelec");for(h=0;h<=4;h++)Wy[h].name&&zy.myMagicDamage("lightning",75+~~(75*dS.random()),h,l," is struck by a lightning nova",s)}else if("Moonfall"===d)Mp(!0),cS.delayedCall(2.5,function(){for(var e=0;e<=4;e++)Wy[e].name&&zy.myMagicDamage("fire",~~(100*dS.random()+400),e,l," is struck by a meteor",s)});else if("Truesight Hammer"===d){Gt(bL,"purple");b=133;-1!==Wy[bL].name.indexOf(" pet")&&(b*=5),zy.myMagicDamage("magic",b,bL,l," is slammed by holy light",s)}else if("Earthshaker"===d){du(4,4,2,50),Qa("earthquakeloop2",0,500);for(h=0;h<=4;h++)Wy[h].name&&(zy.myMagicDamage("physical",~~(50*dS.random()+175),h,ee(),"Tremor",!0),Ht(h))}else if("Dawnfire, Morning Star of Light"===d||"Venova's Dawn"===d){Gt(bL,"purple");b=195;!0===fb(bL)&&(b*=3),zy.myMagicDamage("magic",b,bL,l," is slammed by holy light",s)}else if("Gold Plated Koshigatana"===d){Gt(bL,"purple");b=175;-1!==Wy[bL].name.indexOf(" pet")&&(b*=5),zy.myMagicDamage("magic",b,bL,l," is slammed by holy light",s)}else if("Soul Leech, Dark Sword of Blood"===d||"Dark Sword of Tolloth"===d)Gt(bL,"purple"),zy.myMagicDamage("magic",75,bL,l,"'s life is drained",s),zy.popupHeal(75);else if("Bladestorm, Katana of Steel Sleet"===d||"Emperor's Katana of Resolve"===d)t(),cS.delayedCall(2,t),cS.delayedCall(4,t);else if("Blight, Hammer of the Scourge"===d||"Blight, Hammer of Vedria"===d)Ru(bL,"green"),fa(Wy[bL].name+" sweats and shivers, looking feverish.",3),Pm(bL,yc(75,.9),"Scourge","magic",8,1e3);else if("Barbarian Spiritist's Hammer"===d)Gt(bL,"blue"),zy.myMagicDamage("cold",421+~~(20*dS.random()),bL,l," staggers as spirits of frost impact",s);else if("Gallantine's Gleaming Bastard Sword"===d)Gt(bL,"yellow","holybolt"),Ht(bL),zy.myMagicDamage("magic",275+~~(25*dS.random()),bL,l," is jolted by gleaming light",s);else if("Nature Walker's Scimitar"===d||"Nature Covenant's Scimitar"===d)Ru(bL,"yellow"),fa(Wy[bL].name+" is gripped by nature's wrath.",3),Pm(bL,yc(55,.8),"Wrath of Nature","lightning",6,1e3);else if("Claw of Phara Dar"===d||"Claw of Szarthax"===d||"Claw of Darafar"===d){Sr(),nS.kill();b=LI/1e3;nS=cS.delayedCall(b,Ct),tS.kill(),tS=cS.delayedCall(b,Mt),ki(b),Ak=!0,xk.kill(),xk=cS.delayedCall(2,function(){Ak=!1})}else if("Singing Short Sword"===d||"Harmonic Short Sword"===d)"Bard"===Yy.job&&(jl(),Lk=!0,Hk.kill(),Hk=cS.delayedCall(12,function(){Lk=!1}));else if("Earthcaller"===d||"Artremian Blade"===d)Ru(bL,"green"),fa(Wy[bL].name+" is consumed by the embracing earth.",3),Pm(bL,yc(35,.8),"Earthcall","magic",9,1e3);else if("Smoldering Cudgel"===d||"Singed Cudgel"===d)Gt(bL,"orange"),zy.myMagicDamage("fire",454+~~(25*dS.random()),bL,l," is singed by blazing fire",s);else if("Star of the Guardian"===d)Ms(),xT+=1;else if("Celestial Fists"===d||"Fists of Qiromir"===d){Sr(),nS.kill();b=LI/1e3;nS=cS.delayedCall(b,Ct),tS.kill(),tS=cS.delayedCall(b,Mt),ki(b),Ak=!0,xk.kill(),xk=cS.delayedCall(2.5,function(){Ak=!1})}else if("Scythe of the Shadowed Soul"===d||"Scythe of the Reaper"===d||"Waking Nightmare"===d)Ru(bL,"purple"),fa(Wy[bL].name+" is gripped by shadows of fear and terror.",3),Pm(bL,yc(75,.9),"Torment of Shadows","magic",9,1e3);else if("Razor Fang of Xygoz"===d||"Razor Fang of Sartuz"===d){Lu("yellow"),fa(Yy.name+" is surrounded by an aura of nature.",3);Bi("Blessing of Nature","blessingOfNatureIcon"+(p=Lt()),6e3,-32);i(0,p)}else if("Spear of Fate"===d||"Spear of the Ancients"===d)Ru(bL,"purple"),fa(Wy[bL].name+" is consumed by the raging spirits of the land.",3),Pm(bL,12,"Curse of the Spirits","magic",12,1e3);else if("Nightfall"===d){a=bL;Qa("spellDoneHeal"),rH=560+~~(40*dS.random()),fa(Wy[a].name+" is engulfed in darkness.",3);var g=dS.ceil(rH/20);Wy[a].doomingDarknessTickCount=1,Wy[a].doomingDarknessTick=g,Wy[a].doomingDarknessInterval.kill(),Wy[a].doomingDarknessInterval=cS.to("",1,{repeat:-1,onRepeat:function(){Wd("magic",a)}}),Li("Dooming Darkness",a,"doomingDarknessIcon",2e4,-32),Ru(a,"magenta")}else if("Palladius' Axe of Slaughter"===d||"Wenerva's Axe of Slaughter"===d)Gt(bL,"white","hammer"),Wy[bL].runeHp=0,e("#MruneIcon"+bL).remove(),zy.myMagicDamage("magic",~~(40*dS.random()+350),bL,l," is shattered by divine force",s);else if("Curse of Ghalentus"===d||"Innoruuk's Curse"===d)Ru(bL,"purple"),fa(Wy[bL].name+"'s soul is consumed.",3),Pm(bL,yc(75,.8),"Soul Consumption","magic",8,1e3);else if("Fiery Defender"===d)Gt(bL,"orange"),ao(bL,2500,-32),zy.myMagicDamage("fire",235+~~(20*dS.random()),bL,l," is burnt by the wrath of the heavens",s);else if("Jagged Blade of War"===d||"Serrated Blade of War"===d)Gt(bL,"red"),zy.myMagicDamage("fire",375,bL,l,"'s soul is consumed by the fury of Accostine",s);else if("Flamebellow"===d||"Flamebelcher"===d){Qa("poisonnova"),fo("fireNova",!1);for(h=0;h<=4;h++)Wy[h].name&&zy.myMagicDamage("fire",375+~~(50*dS.random()),h,l," is burned by a wall of fire",s)}else if("Staff of the Four"===d||"Ornate Prism Staff"===d){Fr(),xT=355;var p=Lt();Bi("Ornate Prism Staff","barrierOfForceIcon"+p,6e3,-32),o(0,p)}else if("Staff of the Serpent"===d||"Staff of Sentoth"===d){Sr(),nS.kill();var b=LI/1e3;nS=cS.delayedCall(b,Ct),tS.kill(),tS=cS.delayedCall(b,Mt),ki(b),Ak=!0,xk.kill(),xk=cS.delayedCall(4,function(){Ak=!1})}else if("Hierophant's Crook"===d)r(),cS.delayedCall(2.5,r),cS.delayedCall(5,r);else if("Shatterfrost"===d){if(""!==Wy[a=bL].name){var v=2e3;v*=eo(),zy.myMagicDamage("cold",310+~~(25*dS.random()),bL,l," is slammed by a hail of ice",s),_g(a,v,-256)}}else if("Earth Shifter"===d){du(6,8,4,50),Qa("earthquakeloop2",0,500);for(var y=3+~~(4*dS.random()),h=0;h<y;h++){a=gb();zy.myMagicDamage("physical",~~(100*dS.random()+375),a,ee(),"Tremor"),Ht(a)}}else"The Cranium Basher"===d?(Ru(bL,"yellow"),fa(Yy.name+" is cursed by amplify damage.",3),zy.amplifyDamageStatus=!0):"Blackstar, Mace of Night"===d||"Blackstar Mace of Slagnon"===d?(Lu("yellow"),fa(Yy.name+" is surrounded by the blessing of the Blackstar.",3),zy.popupHeal(75+~~(50*dS.random()))):"Hammer of the Dragonborn"===d&&(Ru(bL,"orange"),fa(Wy[bL].name+" is engulfed in corrupted dragon's breath.",3),Pm(bL,yc(175,.8),"Primal Corruption","fire",5,1e3,"spellDoneFlames"))}function Dt(e,a,n,t,i,o,r,l){function s(a){Yy.hp<=0?wi(d):(a++,l?zy.popupMana(e):zy.popupHeal(e),a<n&&(WS[d]=cS.delayedCall(1,function(){s(a)})))}if(l===E&&(l=!1),!0!==l||"Warrior"!==Yy.job&&"Rogue"!==Yy.job&&"Monk"!==Yy.job){e===E&&(e=1),n===E&&(n=1),t===E&&(t=0),i===E&&(i=1),o===E&&(o=!1);var d=a.replace(/ /g,"")+"Icon";if(o&&(d=a.replace(/ /g,"")+Lt()+"Icon"),"object"==typeof WS[d]?!1===o&&WS[d].kill():WS[d]=q(),"bypass"!==r){var c=1e3*n;r===E?Bi(a,d,c,t):Ti(a,d,c,t)}s(0)}}function Lt(){return++CH>999999999&&(CH=0),CH}function Ht(e){!0===Wy[e].castingStatus&&(Wy[e].spellActive.kill(),Wy[e].castingStatus=!1,fa(Wy[e].name+"'s spell has been interrupted."))}function At(e){return!0===HS?~~(.3*e):e}function xt(e,n,t){return e+n*dS.cos(t*a.PI/180)}function Et(e,n,t){return e+n*dS.sin(t*a.PI/180)}function Gt(e,a,n,t,i,o){function r(e){var a=ry(d,5,l,s,1,1,!0);if(dS.random()>.5)var n=l+dS.random()*i-i/2,m=s+dS.random()*i/2-i/4;else var u=360*dS.random(),n=xt(l,i/2,u),m=Et(s,i/4,u);cS.to(a,o,{x:n,y:m,scaleX:0,scaleY:0,ease:c,onComplete:function(){oy(5,a)}}),e<t&&r(++e)}e===E&&(e=bL),a||(a="white"),t===E&&(t=At(50)),i||(i=800),o||(o=.5);var l=Gw[e].offsetLeft+Wy[e].cX-12,s=Gw[e].offsetTop+Wy[e].cY-12,d=ly(a+"particle50"),c=Quad.easeOut;r(0),n?"blank"!==n&&Qa(n):Qa("spellDoneBoom")}function qt(e,a,n){if(""!==Wy[bL].name&&1!==zy.autoAttackStatus&&0!==_w&&0!==Vw){var t=bL,i=bS.eq[12].type,o=Yy.job;if(!0===e)if("smashed"===i||"staff"===i||"cleaved"===i){r=yc((1+ne()/4500)*(10*bS.eq[12].damage),.5);0===aS&&zy.drawMyMp(10)}else{r=yc((1+ne()/4500)*(10*bS.eq[12].damage),.2);0===aS&&zy.drawMyMp(5)}else{if("cleaved"===i||"smashed"===i||"staff"===i)return;var r=yc((1+ne()/4500)*(10*bS.eq[13].damage),.2);0===aS&&zy.drawMyMp(5)}if(a>0)"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX;Wy[e].name&&fp(a,600,1,"darkTremor")}(t),Nt(t,e),zy.myPhysicalDamage(r,t,"Gasping Frenzy"),Yy.level>8&&(zy.popupMana(dS.ceil(r/20)),zy.drawMyMp());else{var l=!1;if(n||!0!==e||("Cleric"===o?Yy.talent5>=1&&(l=!0):"Shaman"===o?Yy.talent11>=1&&(l=!0):"Ranger"===o?Yy.talent3>=1&&(l=!0):"Warrior"===o&&Yy.talent8>=20&&(l=!0)),!0===l){var s=hb();Nt(s,e);d="You "+bS.eq[12].type;!1===e&&(d="You "+bS.eq[13].type),zy.myPhysicalDamage(r,s,d)}else{Nt(t,e);var d="You "+bS.eq[12].type;!1===e&&(d="You "+bS.eq[13].type),zy.myPhysicalDamage(r,t,d)}}if("Monk"===o&&ka(),!0===zy.gaspingFrenzyStatus){zy.gaspingFrenzyStatus=!1;var a=800,c=Yy.maxHp,m=Yy.hp/c;m<.8&&(a=1200),m<.6&&(a=1800),m<.4&&(a=2600),m<.2&&(a=3800)}a>0&&(a-=200,cS.delayedCall(.2,function(){qt(!0,a)}))}}function Pt(e){var a=Wy[e].str,n=0;return Wy[e].enrage&&(n=40),Wy[e].siphonStrength&&(n=-12),Wy[e].furiousScorn&&(n=-15),Wy[e].weaken&&(n=-20),Wy[e].scourgeStatus&&(n=-12),Wy[e].asystoleStatus&&(n=-8),Wy[e].gaspingEmbraceStatus&&(n=-12),n<-25&&(n=-25),a*=1+n/100,dS.round(a)}function Qt(e,a,n,t,i,o){i||(i=!1);var r=e*a,l=[];return!0!==t?(l[0]="<span class='green'>"+zy.myPhysicalDamage(r,0,n,!1,i,o||1)+"</span>",l[1]="<span class='green'>"+zy.myPhysicalDamage(e,0,n,!1,i,o||2)+"</span>"):(l[0]=zy.myPhysicalDamage(r,0,n,!1,i,o||1),l[1]=zy.myPhysicalDamage(e,0,n,!1,i,o||2)),l}function Rt(e,a,n,t){var i=e*a,o=[];return o[0]="<span class='green'>"+zy.myMagicDamage(n,i,0,!1,t,!1,!0)+"</span>",o[1]="<span class='green'>"+zy.myMagicDamage(n,e,0,!1,t,!1,!0)+"</span>",o}function Ft(e,a,n,t){var i=e*a,o=[];return o[0]="<span class='green'>"+zy.myDotDamage(i,0,n,t,!0)+"</span>",o[1]="<span class='green'>"+zy.myDotDamage(e,0,n,t,!0)+"</span>",o}function Nt(e,a){if(1!==Wy[e].attackStatus&&""!==Wy[e].name&&!0!==Wy[e].charmStatus&&(0!==Yy.dualWield||!1!==a)){var n=0;n=!0===a?Gw[e].offsetLeft+Wy[e].cX+100:Gw[e].offsetLeft+Wy[e].cX-100;var t=Gw[e].offsetTop+Wy[e].cY-100;!0===a?"slashed"===bS.eq[12].type||"cleaved"===bS.eq[12].type||"crushed"===bS.eq[12].type||"smashed"===bS.eq[12].type||"staff"===bS.eq[12].type?(-192===bS.eq[12].yPos&&-576===bS.eq[12].xPos?function(e,a){if("High"!==kw.videoSetting)return;var n=ly(bS.eq[12].type,200,200),t=ry(n,5,e,a,0,0);cS.to(t,.125,{x:e-200,scaleY:1,scaleX:1,ease:pS.sin}),cS.to(t,.125,{scaleY:0,scaleX:0,y:a+200,ease:pS.sout,delay:.125,onComplete:function(){oy(5,t)}});var i=ry(n,5,e,a-25,0,0);cS.to(i,.125,{x:e-200,scaleY:1,scaleX:1,ease:pS.sin}),cS.to(i,.125,{scaleY:0,scaleX:0,y:a+175,ease:pS.sout,delay:.125,onComplete:function(){oy(5,i)}});var o=ry(n,5,e,a+25,0,0);cS.to(o,.125,{x:e-200,scaleY:1,scaleX:1,ease:pS.sin}),cS.to(o,.125,{scaleY:0,scaleX:0,y:a+225,ease:pS.sout,delay:.125,onComplete:function(){oy(5,o)}})}(n,t):function(e,a){if("High"!==kw.videoSetting)return;var n=bS.eq[12].type;"staff"===bS.eq[12].type&&(n="smashed");var t=sy(n,5,e,a,0,0);t.image.onload=function(){cS.to(t,.125,{x:e-200,scaleX:1,scaleY:1,ease:pS.sin}),cS.to(t,.125,{scaleX:0,scaleY:0,y:a+200,ease:pS.sout,delay:.125,onComplete:function(){oy(5,t)}})}}(n,t),Qa("smashed"===bS.eq[12].type||"staff"===bS.eq[12].type?"kickHit":"weapon"+bS.eq[12].type)):"pierced"===bS.eq[12].type?(!function(e,a){if("High"!==kw.videoSetting)return;var n=sy(bS.eq[12].type,5,e,a,0,200);n.image.onload=function(){cS.to(n,.1,{x:e-200,scaleX:1}),cS.to(n,.1,{scaleX:.25,ease:pS.Qin,delay:.1,onComplete:function(){oy(5,n)}})}}(n,t+60*dS.random()-30),Qa("weaponslashed")):"punched"===bS.eq[12].type&&(!function(e,a){if("High"!==kw.videoSetting)return;var n=sy(bS.eq[12].type,5,e,a,60,60,!0);n.image.onload=function(){cS.to(n,.1,{scaleX:1.6,scaleY:1.6,rotation:90,ease:pS.sin,onComplete:function(){cS.to(n,.2,{scaleX:0,scaleY:0,rotation:180,ease:pS.sout,onComplete:function(){oy(5,n)}})}})}}(n-100+10*dS.random()+5,t+(30*dS.random()+35)),Qa("weapon"+bS.eq[12].type)):"slashed"===bS.eq[13].type||"crushed"===bS.eq[13].type?(-192===bS.eq[13].yPos&&-576===bS.eq[13].xPos?function(e,a){if("High"!==kw.videoSetting)return;var n=ly(bS.eq[13].type+"L",200,200),t=ry(n,5,e,a,0,0);cS.to(t,.125,{scaleX:1,scaleY:1,ease:pS.sin}),cS.to(t,.125,{scaleX:0,scaleY:0,x:e+200,y:a+200,ease:pS.sout,delay:.125,onComplete:function(){oy(5,t)}});var i=ry(n,5,e,a-25,0,0);cS.to(i,.125,{scaleX:1,scaleY:1,ease:pS.sin}),cS.to(i,.125,{scaleX:0,scaleY:0,x:e+200,y:a+175,ease:pS.sout,delay:.125,onComplete:function(){oy(5,i)}});var o=ry(n,5,e,a+25,0,0);cS.to(o,.125,{scaleX:1,scaleY:1,ease:pS.sin}),cS.to(o,.125,{scaleY:0,scaleX:0,x:e+200,y:a+225,ease:pS.sout,delay:.125,onComplete:function(){oy(5,o)}})}(n,t):function(e,a){if("High"!==kw.videoSetting)return;var n=sy(bS.eq[13].type+"L",5,e,a,0,0);n.image.onload=function(){cS.to(n,.125,{scaleX:1,scaleY:1,ease:pS.sin}),cS.to(n,.125,{scaleX:.25,scaleY:.25,x:e+200,y:a+200,ease:pS.sout,delay:.125,onComplete:function(){oy(5,n)}})}}(n,t),Qa("smashed"===bS.eq[13].type||"staff"===bS.eq[13].type?"kickHit":"weapon"+bS.eq[13].type)):"pierced"===bS.eq[13].type?(!function(e,a){if("High"!==kw.videoSetting)return;var n=sy(bS.eq[13].type+"L",5,e,a,0,200);n.image.onload=function(){cS.to(n,.1,{scaleX:1}),cS.to(n,.1,{x:e+150,scaleX:.25,ease:pS.Qin,delay:.1,onComplete:function(){oy(5,n)}})}}(n,t+60*dS.random()-30),Qa("weaponslashed")):"punched"===bS.eq[13].type&&(!function(e,a){if("High"!==kw.videoSetting)return;var n=sy(bS.eq[13].type,5,e,a,60,60,!0);n.image.onload=function(){cS.to(n,.1,{scaleX:1.6,scaleY:1.6,rotation:90,onComplete:function(){cS.to(n,.2,{scaleX:0,scaleY:0,rotation:180,onComplete:function(){oy(5,n)}})}})}}(n+10*dS.random()+15,t+(30*dS.random()+35)),Qa("weapon"+bS.eq[13].type))}}function jt(){sB=!0,dB.kill(),dB=cS.delayedCall(5,function(){sB=!1,zy.checkNecromancerSkills()}),zy.checkNecromancerSkills()}function zt(e){var a=0;return a+=Wy[e].maxHp/100,0===Wy[e].rare?a*=1.25:2===Wy[e].rare?a*=1.5:3===Wy[e].rare&&(a/=9),1===Yy.difficulty?a*=2:2===Yy.difficulty&&(a*=3),~~a}function Yt(){NG.tooltip.style.visibility="hidden","Long"===kw.tooltipMode&&(NG.tooltipmsg.style.display="block")}function Kt(){du(100,4,2,5),function(){for(var e=0;e<=4;e++)Wy[e].attack.kill()}(),zw[2].lightning.alpha=0,cS.set(zw[2].lightning,{easel:{tint:"#fff",tintAmount:1}});(new Audio).src="/classic/sound1/explode1."+SH;(new Audio).src="/classic/sound1/explode2."+SH;(new Audio).src="/classic/sound1/explode3."+SH;(new Image).src="images1/tremorFG.png";(new Image).src="images1/tremorBG.png",mS.getElementById("intro").style.display="none",mS.getElementById("intro").style.opacity=0,function(e){function a(n){Qa("explode"+~~(3*dS.random()+1)),Gt(2,"white",0,60,2e3*dS.random()+1e3,3),++n<e&&cS.delayedCall(.25,a,[n])}a(0)}(26),function(){B.onbeforeunload=null,Pa("Heroic Demise (2013 - With Choir)");var e=new uS.Bitmap("/classic/backgrounds/nimgaul.jpg");Nw[8].addChild(e),e.image.onload=function(){var a=e.getBounds();e.cache(a.x,a.y,a.width,a.height),cS.set(e,{easel:{colorize:"#fab660",colorizeAmount:.9}});var n=mn(),t="CONGRATULATIONS!<br><br>YOU HAVE DEFEATED NALATOS!<br><br>YOU SHALL NOW BE KNOWN AS<br>"+(n=n.toUpperCase())+" "+Yy.name.toUpperCase();0===sa()?t+="<br><br>YOUR ADVENTURES CONTINUE IN NIGHTMARE":1===sa()?t+="<br><br>YOUR ADVENTURES CONTINUE IN HELL":2===sa()&&(t+="<br><br>YOU HAVE MASTERED NEVERGRIND<br>PLAYING AS THE "+Yy.job.toUpperCase()+"!"),t+="<br><br><button id='resetGame'>OK</button>",mS.getElementById("introText2").innerHTML=t}}(),cS.to(zw[2].lightning,7,{alpha:1,onComplete:function(){du(2,100,50,1),function(e){function a(i){var o=sy("tremorFG",5,n-200,t-50,0,0,!0);cS.to(o,3,{scaleX:8,scaleY:2,alpha:0,onComplete:function(){oy(5,o)}});var r=sy("tremorBG",7,n-200,t-50,0,0,!0);cS.to(r,3,{scaleX:8,scaleY:2,alpha:0,onComplete:function(){oy(7,r)}}),i<e&&cS.delayedCall(.016,a,[++i])}var n=Gw[2].offsetLeft+Wy[2].cX,t=Gw[2].offsetTop+Wy[2].cY;a(0)}(10),Qa("cazic_die"),mv("#fff",1,1),Gw[2].style.visibility="hidden",Gt(2,"white",0,300,2e3,5),cS.delayedCall(.25,function(){Gt(2,"white",0,300,2e3,4.75)}),cS.delayedCall(.5,function(){Gt(2,"white",0,300,2e3,4.5)}),cS.delayedCall(2,function(){cS.to("#gameView",5,{opacity:0,onComplete:function(){mS.getElementById("gameView").style.display="none",mS.getElementById("intro").style.display="block",cS.to("#intro",1,{delay:1,opacity:1})}})})}})}function Wt(){if(0===fk){for(var a=""!==mS.getElementById("QindicatorHead").textContent,n=0;n<=4;n++)if(Wy[n].hp<=0&&Wy[n].name){n,!0===a&&(!function(e){2===zy.difficulty&&25;3===zy.difficulty&&44;var a=zy.difficulty-1,n="slashed";"Monk"!==Yy.job&&"Necromancer"!==Yy.job&&"Enchanter"!==Yy.job&&"Magician"!==Yy.job&&"Wizard"!==Yy.job||(n="staff");"Rogue"===Yy.job&&(n="pierced");"Shaman"!==Yy.job&&"Druid"!==Yy.job&&"Cleric"!==Yy.job||(n="crushed");"Paladin"!==Yy.job&&"Shadow Knight"!==Yy.job||(n="cleaved");"Monk"!==Yy.job&&"Druid"!==Yy.job||"leather";"Ranger"!==Yy.job&&"Shaman"!==Yy.job&&"Rogue"!==Yy.job||"chain";"Necromancer"!==Yy.job&&"Enchanter"!==Yy.job&&"Magician"!==Yy.job&&"Wizard"!==Yy.job||"cloth";var t=qn();if("Fahlnir Citadel"===t){if(bS.Q[a].CastleMistmoore<2&&("a pledge familiar"===Wy[e].name&&bS.Q[a].CM1<8&&(bS.Q[a].CM1++,Hv(1)),"an initiate familiar"===Wy[e].name&&bS.Q[a].CM2<7&&(bS.Q[a].CM2++,Hv(2)),"a glyphed familiar"===Wy[e].name&&bS.Q[a].CM3<6&&(bS.Q[a].CM3++,Hv(3)),bS.Q[a].CM1>=8&&bS.Q[a].CM2>=7&&bS.Q[a].CM3>=6&&"Lieutenant Xagorn"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].CastleMistmoore=2,bS.Q[a].CM1=0,bS.Q[a].CM2=0,void(bS.Q[a].CM3=0);if(2===bS.Q[a].CastleMistmoore&&("a glyphed guard"===Wy[e].name&&bS.Q[a].CM1<8&&(bS.Q[a].CM1++,Hv(1)),"a glyphed sentry"===Wy[e].name&&bS.Q[a].CM2<6&&(bS.Q[a].CM2++,Hv(2)),"a glyphed custodian"===Wy[e].name&&bS.Q[a].CM3<6&&(bS.Q[a].CM3++,Hv(3)),"a negotiator"===Wy[e].name&&bS.Q[a].CM4<4&&(bS.Q[a].CM4++,Hv(4)),bS.Q[a].CM1>=8&&bS.Q[a].CM2>=6&&bS.Q[a].CM3>=6&&bS.Q[a].CM4>=4&&"Dragoon Reklyn"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].CastleMistmoore=3,bS.Q[a].CM1=0,bS.Q[a].CM2=0,bS.Q[a].CM3=0,void(bS.Q[a].CM4=0);if((3===bS.Q[a].CastleMistmoore||bS.Q[a].CastleMistmoore>3&&!bS.Q[a].repeatCm3)&&("a deathly harbinger"===Wy[e].name&&bS.Q[a].CM1<7&&(bS.Q[a].CM1++,Hv(1)),"a dark ritualist"===Wy[e].name&&bS.Q[a].CM2<7&&(bS.Q[a].CM2++,Hv(2)),"a shadowy sage"===Wy[e].name&&bS.Q[a].CM3<7&&(bS.Q[a].CM3++,Hv(3)),"a leering gargoyle"===Wy[e].name&&bS.Q[a].CM4<7&&(bS.Q[a].CM4++,Hv(4)),"Countess Varnia"===Wy[e].name&&bS.Q[a].CM5<2&&(bS.Q[a].CM5=2,Hv(5)),"Zigruben"===Wy[e].name&&bS.Q[a].CM6<2&&(bS.Q[a].CM6=2,Hv(6)),bS.Q[a].CM1>=7&&bS.Q[a].CM2>=7&&bS.Q[a].CM3>=7&&bS.Q[a].CM4>=7&&bS.Q[a].CM5>=2&&bS.Q[a].CM6>=2&&!bS.Q[a].repeatCm3))return Qa("endquest"),Yy.quests++,Nn("Quest Completed!"),bS.Q[a].CastleMistmoore=4,U(),void(bS.Q[a].repeatCm3=1)}if("Lanfeld Outpost"===t){if(bS.Q[a].Crushbone<2&&("an orc pawn"===Wy[e].name&&bS.Q[a].CB1<8&&(bS.Q[a].CB1++,Hv(1)),"an orc centurion"===Wy[e].name&&bS.Q[a].CB2<4&&(bS.Q[a].CB2++,Hv(2)),"an orc slaver"===Wy[e].name&&bS.Q[a].CB3<4&&(bS.Q[a].CB3++,Hv(3)),bS.Q[a].CB1>=8&&bS.Q[a].CB2>=4&&bS.Q[a].CB3>=4))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].Crushbone=2,bS.Q[a].CB1=0,bS.Q[a].CB2=0,void(bS.Q[a].CB3=0);if(2===bS.Q[a].Crushbone&&("an orc oracle"===Wy[e].name&&bS.Q[a].CB1<7&&(bS.Q[a].CB1++,Hv(1)),"an orc legionnaire"===Wy[e].name&&bS.Q[a].CB2<7&&(bS.Q[a].CB2++,Hv(2)),"an orc lookout"===Wy[e].name&&bS.Q[a].CB3<7&&(bS.Q[a].CB3++,Hv(3)),bS.Q[a].CB1>=7&&bS.Q[a].CB2>=7&&bS.Q[a].CB3>=7&&"an orc warlord"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].Crushbone=3,bS.Q[a].CB1=0,bS.Q[a].CB2=0,void(bS.Q[a].CB3=0);if(bS.Q[a].Crushbone>=3&&("an orc scoutsman"===Wy[e].name&&bS.Q[a].CB1<10&&(bS.Q[a].CB1++,Hv(1)),"an orc royal guard"===Wy[e].name&&bS.Q[a].CB2<8&&(bS.Q[a].CB2++,Hv(2)),"an orc emissary"===Wy[e].name&&bS.Q[a].CB3<6&&(bS.Q[a].CB3++,Hv(3)),"Chief Grimden"===Wy[e].name&&(bS.Q[a].CB5=2,Yy.epicQuests++),bS.Q[a].CB1>=10&&bS.Q[a].CB2>=8&&bS.Q[a].CB3>=6&&bS.Q[a].CB5>=2)){if(Qa("endquest"),Yy.quests++,Nn("Quest Completed!"),3===bS.Q[a].Crushbone){Nn("Quest Reward: "+(i="Permanent +1 Talent Point".fontcolor("#dd7711")),0,0,8e3),Ry("Chief Grimden was driven to madness by the Idol of Chaos. We must investigate this matter further. I hereby relieve you of your duties to the Edenburg Training Detachment for a special duty.<br><br>Inquire about the Idols of Chaos at "+N("Aspen Grove")+". Speak to Rendo Surefoot, a quirky, yet resourceful halfling reknowned for his occult knowledge. Good luck on your mission, "+Yy.name+".")}return Qn(),bS.Q[a].Crushbone++,bS.Q[a].repeatCB=1,void U()}}if("Arcturin's Crypt"===t){if(bS.Q[a].EstateofUnrest<2&&("a death beetle"===Wy[e].name&&bS.Q[a].ER1<8&&(bS.Q[a].ER1++,Hv(1)),"a tormented dead"===Wy[e].name&&bS.Q[a].ER2<6&&(bS.Q[a].ER2++,Hv(2)),"a lumbering mummy"===Wy[e].name&&bS.Q[a].ER3<4&&(bS.Q[a].ER3++,Hv(3)),bS.Q[a].ER1>=8&&bS.Q[a].ER2>=6&&bS.Q[a].ER3>=4))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].EstateofUnrest=2,bS.Q[a].ER1=0,bS.Q[a].ER2=0,void(bS.Q[a].ER3=0);if(2===bS.Q[a].EstateofUnrest&&("a dry bone skeleton"===Wy[e].name&&bS.Q[a].ER1<10&&(bS.Q[a].ER1++,Hv(1)),"a crazed ghoul"===Wy[e].name&&bS.Q[a].ER2<8&&(bS.Q[a].ER2++,Hv(2)),"a nymph"===Wy[e].name&&bS.Q[a].ER3<6&&(bS.Q[a].ER3++,Hv(3)),bS.Q[a].ER1>=10&&bS.Q[a].ER2>=8&&bS.Q[a].ER3>=6&&"Arch Duke of Artremia"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].EstateofUnrest=3,bS.Q[a].ER1=0,bS.Q[a].ER2=0,void(bS.Q[a].ER3=0);if(bS.Q[a].EstateofUnrest>=3&&("a mortuary fungus"===Wy[e].name&&bS.Q[a].ER1<8&&(bS.Q[a].ER1++,Hv(1)),"a dusty werewolf"===Wy[e].name&&bS.Q[a].ER2<8&&(bS.Q[a].ER2++,Hv(2)),"a cephalid subverter"===Wy[e].name&&bS.Q[a].ER3<5&&(bS.Q[a].ER3++,Hv(3)),"a festering hag"===Wy[e].name&&bS.Q[a].ER4<5&&(bS.Q[a].ER4++,Hv(4)),bS.Q[a].ER1>=8&&bS.Q[a].ER2>=8&&bS.Q[a].ER3>=5&&bS.Q[a].ER4>=5&&"Arcturin, the Lich King"===Wy[e].name)){if(Qa("endquest"),Yy.quests++,Yy.epicQuests++,Nn("Quest Completed!"),3===bS.Q[a].EstateofUnrest){Nn("Quest Reward: "+(i="Permanent +1 Talent Point".fontcolor("#dd7711")),0,0,8e3),Ry("My halfling instincts are never wrong! Once again you have found another Idol of Chaos. I happen to know that Nalatos cannot enchant more than three idols at once or it will spread his powers too thin.<br><br>I am not aware of any other suspicious activity in Vandamor. Perhaps it would be worth investigating in nearby "+N("Artremia")+". Valeska Windcrest is a resourceful wood elf who may be able to assist you. If she doesn't have any useful information, she'll know someone who will.")}return Qn(),bS.Q[a].EstateofUnrest++,bS.Q[a].repeatER=1,void U()}}if("Salubrin Forest"===t){if(bS.Q[a].GreaterFaydark<2&&"an orc pawn"===Wy[e].name){if(bS.Q[a].GF1++,!(bS.Q[a].GF1<4))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].GreaterFaydark=3,void(bS.Q[a].GF1=0);Hv(1)}if(3===bS.Q[a].GreaterFaydark&&"an orc"===Wy[e].image){if(bS.Q[a].GF1++,!(bS.Q[a].GF1<10))return Qa("endquest"),Nn("Quest Completed!<br>"),Yy.quests++,bS.Q[a].GreaterFaydark=4,Nn("You received a reward from the Soldiers of Rinara!",0,0,8e3),Vv(5,"weapons",n,2),void cS.delayedCall(10,Nn,["Use the Map [M] to travel to other zones and find quests. Zones are unlocked as your level increases.",0,1,8e3]);Hv(1)}}if("Viston's Redoubt"===t){if(bS.Q[a].KedgeKeep<2&&("a peering gargoyle"===Wy[e].name&&bS.Q[a].KK1<8&&(bS.Q[a].KK1++,Hv(1)),"a fettered defiler"===Wy[e].name&&bS.Q[a].KK2<8&&(bS.Q[a].KK2++,Hv(2)),"a dread werewolf"===Wy[e].name&&bS.Q[a].KK3<8&&(bS.Q[a].KK3++,Hv(3)),bS.Q[a].KK1>=8&&bS.Q[a].KK2>=8&&bS.Q[a].KK3>=8&&"Sari Portentia"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].KedgeKeep=2,bS.Q[a].KK1=0,bS.Q[a].KK2=0,void(bS.Q[a].KK3=0);if(2===bS.Q[a].KedgeKeep&&("a brooding imp"===Wy[e].name&&bS.Q[a].KK1<8&&(bS.Q[a].KK1++,Hv(1)),"a manacled spoiler"===Wy[e].name&&bS.Q[a].KK2<8&&(bS.Q[a].KK2++,Hv(2)),"a lusting werewolf"===Wy[e].name&&bS.Q[a].KK3<5&&(bS.Q[a].KK3++,Hv(3)),"a bloodthirsty bat"===Wy[e].name&&bS.Q[a].KK4<5&&(bS.Q[a].KK4++,Hv(4)),bS.Q[a].KK1>=8&&bS.Q[a].KK2>=8&&bS.Q[a].KK3>=5&&bS.Q[a].KK4>=5&&"Shardok"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].KedgeKeep=3,bS.Q[a].KK1=0,bS.Q[a].KK2=0,bS.Q[a].KK3=0,void(bS.Q[a].KK4=0);if((3===bS.Q[a].KedgeKeep||bS.Q[a].KedgeKeep>3&&!bS.Q[a].repeatKk3)&&("a pained seether"===Wy[e].name&&bS.Q[a].KK1<10&&(bS.Q[a].KK1++,Hv(1)),"a soul destroyer"===Wy[e].name&&bS.Q[a].KK2<10&&(bS.Q[a].KK2++,Hv(2)),"a vampire bat"===Wy[e].name&&bS.Q[a].KK3<8&&(bS.Q[a].KK3++,Hv(3)),"Artun Desmoni"===Wy[e].name&&bS.Q[a].KK4<2&&(bS.Q[a].KK4=2,Hv(4)),"Korman Valen"===Wy[e].name&&bS.Q[a].KK5<2&&(bS.Q[a].KK5=2,Hv(5)),bS.Q[a].KK1>=10&&bS.Q[a].KK2>=10&&bS.Q[a].KK3>=8&&bS.Q[a].KK4>=2&&bS.Q[a].KK5>=2&&!bS.Q[a].repeatKk3))return Qa("endquest"),Yy.quests++,bS.Q[a].KK1=0,bS.Q[a].KK2=0,bS.Q[a].KK3=0,bS.Q[a].KK4=0,bS.Q[a].KK5=0,Nn("Quest Completed!"),bS.Q[a].KedgeKeep=4,U(),void(bS.Q[a].repeatKk3=1);if(bS.Q[a].KedgeKeep>=4&&("a sinew punisher"===Wy[e].name&&bS.Q[a].KK6<18&&(bS.Q[a].KK6++,Hv(1)),"Blood Guardian"===Wy[e].name&&bS.Q[a].KK7<12&&(bS.Q[a].KK7++,Hv(2)),bS.Q[a].KK6>=18&&bS.Q[a].KK7>=12&&"Revenant Viston"===Wy[e].name))return Qa("endquest"),4===bS.Q[a].KedgeKeep?(bS.Q[a].KedgeKeep=5,Yy.quests++):bS.Q[a].KedgeKeep++,bS.Q[a].KK8=2,bS.Q[a].repeatKk4=1,Nn("Quest Completed!"),bS.Q[a].KedgeKeep++,Yy.epicQuests++,void Qn()}if("Tendolin Meadows"===t&&bS.Q[a].LesserFaydark<2&&("a pixie trickster"===Wy[e].name||"a pixie prankster"===Wy[e].name)&&("a pixie trickster"===Wy[e].name&&bS.Q[a].LF1<10&&(bS.Q[a].LF1++,Hv(1)),"a pixie prankster"===Wy[e].name&&bS.Q[a].LF2<5&&(bS.Q[a].LF2++,Hv(2)),bS.Q[a].LF1>=10&&bS.Q[a].LF2>=5&&bS.Q[a].LesserFaydark<2))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].LesserFaydark=2,Nn("You received a reward from Miranda Crossheart!",0,0,8e3),void Vv(5,"weapons",0,2);if("Riven Grotto"===t){if(bS.Q[a].Befallen<2&&("a necro neophyte"===Wy[e].name&&bS.Q[a].BF1<6&&(bS.Q[a].BF1++,Hv(1)),"a necro initiate"===Wy[e].name&&bS.Q[a].BF2<6&&(bS.Q[a].BF2++,Hv(2)),"a dread bone"===Wy[e].name&&bS.Q[a].BF3<6&&(bS.Q[a].BF3++,Hv(3)),bS.Q[a].BF1>=6&&bS.Q[a].BF2>=6&&bS.Q[a].BF3>=6))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].Befallen=2,bS.Q[a].BF1=0,bS.Q[a].BF2=0,void(bS.Q[a].BF3=0);if(2===bS.Q[a].Befallen&&("an ice boned skeleton"===Wy[e].name&&bS.Q[a].BF1<8&&(bS.Q[a].BF1++,Hv(1)),"a necro acolyte"===Wy[e].name&&bS.Q[a].BF2<8&&(bS.Q[a].BF2++,Hv(2)),"a ghoul"===Wy[e].name&&bS.Q[a].BF3<5&&(bS.Q[a].BF3++,Hv(3)),bS.Q[a].BF1>=8&&bS.Q[a].BF2>=8&&bS.Q[a].BF3>=5&&"Dark Priest Nymda"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].Befallen=3,bS.Q[a].BF1=0,bS.Q[a].BF2=0,void(bS.Q[a].BF3=0);if(3===bS.Q[a].Befallen&&("an elf skeleton"===Wy[e].name&&bS.Q[a].BF1<9&&(bS.Q[a].BF1++,Hv(1)),"a burnt zombie"===Wy[e].name&&bS.Q[a].BF2<7&&(bS.Q[a].BF2++,Hv(2)),"a dread corpse"===Wy[e].name&&bS.Q[a].BF3<7&&(bS.Q[a].BF3++,Hv(3)),bS.Q[a].BF1>=9&&bS.Q[a].BF2>=7&&bS.Q[a].BF3>=7&&"The Black Seer"===Wy[e].name))return Qa("endquest"),Yy.quests++,bS.Q[a].Befallen=4,Nn("Quest Completed!"),void U()}if("Greenthorn Cavern"===t){if(bS.Q[a].Blackburrow<2&&("a gnoll pup"===Wy[e].name&&bS.Q[a].BB1<8&&(bS.Q[a].BB1++,Hv(1)),"a scrawny gnoll"===Wy[e].name&&bS.Q[a].BB2<6&&(bS.Q[a].BB2++,Hv(2)),"a gnoll scout"===Wy[e].name&&bS.Q[a].BB3<4&&(bS.Q[a].BB3++,Hv(3)),bS.Q[a].BB1>=8&&bS.Q[a].BB2>=6&&bS.Q[a].BB3>=4))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].Blackburrow=2,bS.Q[a].BB1=0,bS.Q[a].BB2=0,void(bS.Q[a].BB3=0);if(2===bS.Q[a].Blackburrow&&("a gnoll shaman"===Wy[e].name&&bS.Q[a].BB1<8&&(bS.Q[a].BB1++,Hv(1)),"a patrolling gnoll"===Wy[e].name&&bS.Q[a].BB2<8&&(bS.Q[a].BB2++,Hv(2)),"a gnoll sergeant"===Wy[e].name&&bS.Q[a].BB3<6&&(bS.Q[a].BB3++,Hv(3)),bS.Q[a].BB1>=8&&bS.Q[a].BB2>=8&&bS.Q[a].BB3>=6&&"Furrpaw Barxen"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].Blackburrow=3,bS.Q[a].BB1=0,bS.Q[a].BB2=0,void(bS.Q[a].BB3=0);if(3===bS.Q[a].Blackburrow&&("an elite gnoll guard"===Wy[e].name&&bS.Q[a].BB1<12&&(bS.Q[a].BB1++,Hv(1)),"a gnoll tactician"===Wy[e].name&&bS.Q[a].BB2<8&&(bS.Q[a].BB2++,Hv(2)),"a gnoll commander"===Wy[e].name&&bS.Q[a].BB3<4&&(bS.Q[a].BB3++,Hv(3)),bS.Q[a].BB1>=12&&bS.Q[a].BB2>=8&&bS.Q[a].BB3>=4&&"Viceroy Tanaden"===Wy[e].name))return Qa("endquest"),Yy.quests++,bS.Q[a].Blackburrow=4,Nn("Quest Completed!"),void U()}if("Temple of Prenssor"===t){if(bS.Q[a].CazicThule<2&&("a lizard disciple"===Wy[e].name&&bS.Q[a].CT1<8&&(bS.Q[a].CT1++,Hv(1)),"a lizard page"===Wy[e].name&&bS.Q[a].CT2<6&&(bS.Q[a].CT2++,Hv(2)),"a lizard defender"===Wy[e].name&&bS.Q[a].CT3<4&&(bS.Q[a].CT3++,Hv(3)),bS.Q[a].CT1>=8&&bS.Q[a].CT2>=6&&bS.Q[a].CT3>=4&&"Soprenti the Anointed"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].CazicThule=2,bS.Q[a].CT1=0,bS.Q[a].CT2=0,void(bS.Q[a].CT3=0);if(2===bS.Q[a].CazicThule&&("a lizard herald"===Wy[e].name&&bS.Q[a].CT1<10&&(bS.Q[a].CT1++,Hv(1)),"a lizard protector"===Wy[e].name&&bS.Q[a].CT2<8&&(bS.Q[a].CT2++,Hv(2)),"a lizard justicar"===Wy[e].name&&bS.Q[a].CT3<6&&(bS.Q[a].CT3++,Hv(3)),"Sartuth the Possessed"===Wy[e].name&&bS.Q[a].CT4<2&&(bS.Q[a].CT4=2,Hv(4)),"Merszas the Divine"===Wy[e].name&&bS.Q[a].CT5<2&&(bS.Q[a].CT5=2,Hv(5)),bS.Q[a].CT1>=10&&bS.Q[a].CT2>=8&&bS.Q[a].CT3>=6&&bS.Q[a].CT4>=2&&bS.Q[a].CT5>=2))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].CazicThule=3,bS.Q[a].CT1=0,bS.Q[a].CT2=0,bS.Q[a].CT3=0,bS.Q[a].CT4=0,void(bS.Q[a].CT5=0);if((3===bS.Q[a].CazicThule||bS.Q[a].CazicThule>3&&!bS.Q[a].repeatCt3)&&("a lizard zealot"===Wy[e].name&&bS.Q[a].CT1<10&&(bS.Q[a].CT1++,Hv(1)),"a lizard crusader"===Wy[e].name&&bS.Q[a].CT2<10&&(bS.Q[a].CT2++,Hv(2)),"a lizard champion"===Wy[e].name&&bS.Q[a].CT3<8&&(bS.Q[a].CT3++,Hv(3)),bS.Q[a].CT1>=10&&bS.Q[a].CT2>=10&&bS.Q[a].CT3>=8&&"Sentoth, Lord of Rapture"===Wy[e].name)){if(Qa("endquest"),Yy.quests++,Yy.epicQuests++,Nn("Quest Completed!"),bS.Q[a].repeatCt3=1,3===bS.Q[a].CazicThule){Nn("Quest Reward: "+(i="Permanent +1 Talent Point".fontcolor("#dd7711")),0,0,8e3),Ry(Yy.name+", I don't believe it! Surely you have been anointed by the Gods. Despite the odds you have triumphed once again. You have collected all of the Idols of Chaos, denying Nalatos's influence in our world.<br><br>Head north to Fenwoven, where a wise shaman named Arwen lives. Only he will know what to do with the Idols of Chaos. The Barbarian race have unique knowledge about this due to their proximity to Ashenflow Peak in their homeland.")}return Qn(),bS.Q[a].CazicThule++,void U()}}if("Kordata Ruins"===t){if(bS.Q[a].LowerGuk<2&&("an anuran tir knight"===Wy[e].name&&bS.Q[a].LG1<10&&(bS.Q[a].LG1++,Hv(1)),"a lem anuran wizard"===Wy[e].name&&bS.Q[a].LG2<8&&(bS.Q[a].LG2++,Hv(2)),"an amn anuran wizard"===Wy[e].name&&bS.Q[a].LG3<6&&(bS.Q[a].LG3++,Hv(3)),"an anuran assassin"===Wy[e].name&&bS.Q[a].LG4<2&&(bS.Q[a].LG4=2,Hv(4)),"an anuran supplier"===Wy[e].name&&bS.Q[a].LG5<2&&(bS.Q[a].LG5=2,Hv(5)),bS.Q[a].LG1>=10&&bS.Q[a].LG2>=8&&bS.Q[a].LG3>=6&&bS.Q[a].LG4>=2&&bS.Q[a].LG5>=2))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].LowerGuk=2,bS.Q[a].LG1=0,bS.Q[a].LG2=0,bS.Q[a].LG3=0,bS.Q[a].LG4=0,void(bS.Q[a].LG5=0);if(2===bS.Q[a].LowerGuk&&("a pul anuran knight"===Wy[e].name&&bS.Q[a].LG1<8&&(bS.Q[a].LG1++,Hv(1)),"a dol anuran wizard"===Wy[e].name&&bS.Q[a].LG2<8&&(bS.Q[a].LG2++,Hv(2)),"a vex anuran wizard"===Wy[e].name&&bS.Q[a].LG3<6&&(bS.Q[a].LG3++,Hv(3)),"a ber anuran knight"===Wy[e].name&&bS.Q[a].LG4<6&&(bS.Q[a].LG4++,Hv(4)),"a frenzied anuran"===Wy[e].name&&bS.Q[a].LG5<2&&(bS.Q[a].LG5=2,Hv(5)),"an anuran sentinel"===Wy[e].name&&bS.Q[a].LG6<2&&(bS.Q[a].LG6=2,Hv(6)),bS.Q[a].LG1>=8&&bS.Q[a].LG2>=8&&bS.Q[a].LG3>=6&&bS.Q[a].LG4>=6&&bS.Q[a].LG5>=2&&bS.Q[a].LG6>=2))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].LowerGuk=3,bS.Q[a].LG1=0,bS.Q[a].LG2=0,bS.Q[a].LG3=0,bS.Q[a].LG4=0,bS.Q[a].LG5=0,void(bS.Q[a].LG6=0);if((3===bS.Q[a].LowerGuk||bS.Q[a].LowerGuk>3&&!bS.Q[a].repeatLg3)&&("a mal anuran knight"===Wy[e].name&&bS.Q[a].LG1<12&&(bS.Q[a].LG1++,Hv(1)),"a zod anuran wizard"===Wy[e].name&&bS.Q[a].LG2<10&&(bS.Q[a].LG2++,Hv(2)),"a zod anuran knight"===Wy[e].name&&bS.Q[a].LG3<8&&(bS.Q[a].LG3++,Hv(3)),"King Froaki"===Wy[e].name&&bS.Q[a].LG4<2&&(bS.Q[a].LG4=2,Hv(4)),"the anuran arch magus"===Wy[e].name&&bS.Q[a].LG5<2&&(bS.Q[a].LG5=2,Hv(5)),bS.Q[a].LG1>=12&&bS.Q[a].LG2>=10&&bS.Q[a].LG3>=8&&bS.Q[a].LG4>=2&&bS.Q[a].LG5>=2&&!bS.Q[a].repeatLg3))return Qa("endquest"),Yy.quests++,bS.Q[a].LowerGuk=4,Nn("Quest Completed!"),U(),void(bS.Q[a].repeatLg3=1)}if("Ashenflow Peak"===t){if(bS.Q[a].NagafensLair<2&&("a greater kobold"===Wy[e].name&&bS.Q[a].NL1<8&&(bS.Q[a].NL1++,Hv(1)),"a greater kobold shaman"===Wy[e].name&&bS.Q[a].NL2<8&&(bS.Q[a].NL2++,Hv(2)),"an ashenflow kobold"===Wy[e].name&&bS.Q[a].NL3<5&&(bS.Q[a].NL3++,Hv(3)),"an ashenflow kobold shaman"===Wy[e].name&&bS.Q[a].NL4<5&&(bS.Q[a].NL4++,Hv(4)),"a kobold noble"===Wy[e].name&&bS.Q[a].NL5<2&&(bS.Q[a].NL5=2,Hv(5)),"an ashenflow kobold king"===Wy[e].name&&bS.Q[a].NL6<2&&(bS.Q[a].NL6=2,Hv(6)),bS.Q[a].NL1>=8&&bS.Q[a].NL2>=8&&bS.Q[a].NL3>=5&&bS.Q[a].NL4>=5&&bS.Q[a].NL5>=2&&bS.Q[a].NL6>=2))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].NagafensLair=2,bS.Q[a].NL1=0,bS.Q[a].NL2=0,bS.Q[a].NL3=0,bS.Q[a].NL4=0,bS.Q[a].NL5=0,void(bS.Q[a].NL6=0);if(2===bS.Q[a].NagafensLair&&("a sonic bat"===Wy[e].name&&bS.Q[a].NL1<10&&(bS.Q[a].NL1++,Hv(1)),"a lava beetle"===Wy[e].name&&bS.Q[a].NL2<8&&(bS.Q[a].NL2++,Hv(2)),"a lava duct crawler"===Wy[e].name&&bS.Q[a].NL3<8&&(bS.Q[a].NL3++,Hv(3)),"a noxious spider"===Wy[e].name&&bS.Q[a].NL4<2&&(bS.Q[a].NL4=2,Hv(4)),"a stone spider"===Wy[e].name&&bS.Q[a].NL5<2&&(bS.Q[a].NL5=2,Hv(5)),bS.Q[a].NL1>=10&&bS.Q[a].NL2>=8&&bS.Q[a].NL3>=8&&bS.Q[a].NL4>=2&&bS.Q[a].NL5>=2))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].NagafensLair=3,bS.Q[a].NL1=0,bS.Q[a].NL2=0,bS.Q[a].NL3=0,bS.Q[a].NL4=0,void(bS.Q[a].NL5=0);if((3===bS.Q[a].NagafensLair||bS.Q[a].NagafensLair>3&&!bS.Q[a].repeatNl3)&&("a lava guardian"===Wy[e].name&&bS.Q[a].NL1<10&&(bS.Q[a].NL1++,Hv(1)),"an imp protector"===Wy[e].name&&bS.Q[a].NL2<15&&(bS.Q[a].NL2++,Hv(2)),bS.Q[a].NL1>=10&&bS.Q[a].NL2>=15&&"General Ovext"===Wy[e].name))return Qa("endquest"),Yy.quests++,bS.Q[a].NL1=0,bS.Q[a].NL2=0,Nn("Quest Completed!"),bS.Q[a].NagafensLair<4&&(bS.Q[a].NagafensLair=4),U(),void(bS.Q[a].repeatNl3=1);if(bS.Q[a].NagafensLair>=4&&("a fire giant warrior"===Wy[e].name&&bS.Q[a].NL7<12&&(bS.Q[a].NL7++,Hv(1)),"a fire giant wizard"===Wy[e].name&&bS.Q[a].NL8<8&&(bS.Q[a].NL8++,Hv(2)),"King Argentus"===Wy[e].name&&bS.Q[a].NL9<2&&(bS.Q[a].NL9=2,Hv(3)),"Duke Carthenage"===Wy[e].name&&bS.Q[a].NL10<2&&(bS.Q[a].NL10=2,Hv(4)),"Battle Mage Turento"===Wy[e].name&&bS.Q[a].NL11<2&&(bS.Q[a].NL11=2,Hv(5)),"Highlord Szarthax"===Wy[e].name&&bS.Q[a].NL12<1&&(bS.Q[a].NL12=2,Yy.epicQuests++,Qn()),bS.Q[a].NL7>=12&&bS.Q[a].NL8>=8&&bS.Q[a].NL9>=2&&bS.Q[a].NL10>=2&&bS.Q[a].NL11>=2&&bS.Q[a].NL12>=1&&!bS.Q[a].repeatNl4&&"Highlord Szarthax"===Wy[e].name)){if(Qa("endquest"),4===bS.Q[a].NagafensLair&&(Yy.quests++,Ry("Amazing! You fell Highlord Szarthax, the most fearsome dragon in all of Vandamor. It looks like the portal isn't here, but there's a secret tunnel at the back of his lair.<br><br>It looks like this tunnel leads to a long forgotten city, now called "+N("Dire Sanctum")+", that was buried beneath the volcano. Quite a hiding spot for a well guarded dimensional portal! The portal must be inside.")),Nn("Quest Completed!"),4===bS.Q[a].NagafensLair){var i="Permanent +1 Talent Point".fontcolor("#dd7711");Nn("Quest Reward: "+i,0,0,8e3)}return bS.Q[a].NagafensLair++,void(bS.Q[a].repeatNl4=1)}}if("Braxxen's Bastille"===t){if(bS.Q[a].Najena<2&&("a goblin warrior"===Wy[e].name&&bS.Q[a].NJ1<10&&(bS.Q[a].NJ1++,Hv(1)),"a greater skeleton"===Wy[e].name&&bS.Q[a].NJ2<6&&(bS.Q[a].NJ2++,Hv(2)),"an anuran guard"===Wy[e].name&&bS.Q[a].NJ3<4&&(bS.Q[a].NJ3++,Hv(3)),bS.Q[a].NJ1>=10&&bS.Q[a].NJ2>=6&&bS.Q[a].NJ3>=4&&"Grippywor"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].Najena=2,bS.Q[a].NJ1=0,bS.Q[a].NJ2=0,void(bS.Q[a].NJ3=0);if(2===bS.Q[a].Najena&&("a goblin officer"===Wy[e].name&&bS.Q[a].NJ1<10&&(bS.Q[a].NJ1++,Hv(1)),"a necromancer"===Wy[e].name&&bS.Q[a].NJ2<8&&(bS.Q[a].NJ2++,Hv(2)),"an anuran torturer"===Wy[e].name&&bS.Q[a].NJ3<6&&(bS.Q[a].NJ3++,Hv(3)),bS.Q[a].NJ1>=10&&bS.Q[a].NJ2>=8&&bS.Q[a].NJ3>=6&&"Munin"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].Najena=3,bS.Q[a].NJ1=0,bS.Q[a].NJ2=0,void(bS.Q[a].NJ3=0);if(3===bS.Q[a].Najena&&("a magician"===Wy[e].name&&bS.Q[a].NJ1<10&&(bS.Q[a].NJ1++,Hv(1)),"a cephalid subverter"===Wy[e].name&&bS.Q[a].NJ2<8&&(bS.Q[a].NJ2++,Hv(2)),"a goblin captain"===Wy[e].name&&bS.Q[a].NJ3<8&&(bS.Q[a].NJ3++,Hv(3)),"Burzina"===Wy[e].name&&(bS.Q[a].NJ4=2,Hv(4)),"Braxxen"===Wy[e].name&&(bS.Q[a].NJ5=2,Hv(5)),bS.Q[a].NJ1>=10&&bS.Q[a].NJ2>=8&&bS.Q[a].NJ3>=8&&bS.Q[a].NJ4>=2&&bS.Q[a].NJ5>=2))return Qa("endquest"),Yy.quests++,bS.Q[a].Najena=4,Nn("Quest Completed!"),void U()}if("Galeblast Fortress"===t){if(bS.Q[a].PermafrostKeep<2&&("an ice goblin"===Wy[e].name&&bS.Q[a].PK1<8&&(bS.Q[a].PK1++,Hv(1)),"a goblin evoker"===Wy[e].name&&bS.Q[a].PK2<6&&(bS.Q[a].PK2++,Hv(2)),"a dire wolf"===Wy[e].name&&bS.Q[a].PK3<6&&(bS.Q[a].PK3++,Hv(3)),bS.Q[a].PK1>=8&&bS.Q[a].PK2>=6&&bS.Q[a].PK3>=6&&"an ice goblin keymaster"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].PermafrostKeep=2,bS.Q[a].PK1=0,bS.Q[a].PK2=0,void(bS.Q[a].PK3=0);if(2===bS.Q[a].PermafrostKeep&&("a goblin wizard"===Wy[e].name&&bS.Q[a].PK1<7&&(bS.Q[a].PK1++,Hv(1)),"an elite goblin guard"===Wy[e].name&&bS.Q[a].PK2<7&&(bS.Q[a].PK2++,Hv(2)),"a goblin preacher"===Wy[e].name&&bS.Q[a].PK3<7&&(bS.Q[a].PK3++,Hv(3)),bS.Q[a].PK1>=7&&bS.Q[a].PK2>=7&&bS.Q[a].PK3>=7&&"a goblin excavator"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].PermafrostKeep=3,bS.Q[a].PK1=0,bS.Q[a].PK2=0,void(bS.Q[a].PK3=0);if(3===bS.Q[a].PermafrostKeep&&("a goblin sage"===Wy[e].name&&bS.Q[a].PK1<10&&(bS.Q[a].PK1++,Hv(1)),"an elite honor guard"===Wy[e].name&&bS.Q[a].PK2<10&&(bS.Q[a].PK2++,Hv(2)),"an ice giant youth"===Wy[e].name&&bS.Q[a].PK3<5&&(bS.Q[a].PK3++,Hv(3)),"Pontiff Krindletin"===Wy[e].name&&bS.Q[a].PK4<2&&(bS.Q[a].PK4=2,Hv(4)),"Magnate Dinbopp"===Wy[e].name&&bS.Q[a].PK5<2&&(bS.Q[a].PK5=2,Hv(5)),bS.Q[a].PK1>=10&&bS.Q[a].PK2>=10&&bS.Q[a].PK3>=5&&bS.Q[a].PK4>=2&&bS.Q[a].PK5>=2))return Qa("endquest"),Yy.quests++,bS.Q[a].PermafrostKeep<4&&(bS.Q[a].PermafrostKeep=4),bS.Q[a].PK1=0,bS.Q[a].PK2=0,bS.Q[a].PK3=0,bS.Q[a].PK4=0,bS.Q[a].PK5=0,Nn("Quest Completed!"),void U();if(bS.Q[a].PermafrostKeep>=4&&("an ice giant champion"===Wy[e].name&&bS.Q[a].PK1<4&&(bS.Q[a].PK1++,Hv(1)),"an ice giant warder"===Wy[e].name&&bS.Q[a].PK2<4&&(bS.Q[a].PK2++,Hv(2)),"an ice giant preserver"===Wy[e].name&&bS.Q[a].PK3<4&&(bS.Q[a].PK3++,Hv(3)),"an ice giant"===Wy[e].name&&bS.Q[a].PK4<3&&(bS.Q[a].PK4++,Hv(4)),"an ice giant magus"===Wy[e].name&&bS.Q[a].PK5<2&&(bS.Q[a].PK5++,Hv(5)),"an ice giant priest"===Wy[e].name&&bS.Q[a].PK6<2&&(bS.Q[a].PK6++,Hv(6)),"Margrave Kalgresh the Usurper"===Wy[e].name&&(bS.Q[a].PK7=2,Hv(7)),"Vizier Kongumen Divorn"===Wy[e].name&&(bS.Q[a].PK8=2,Hv(8)),bS.Q[a].PK1>=4&&bS.Q[a].PK2>=4&&bS.Q[a].PK3>=4&&bS.Q[a].PK4>=3&&bS.Q[a].PK5>=2&&bS.Q[a].PK6>=2&&bS.Q[a].PK7>=2&&bS.Q[a].PK8>=2&&"Matron Maelentia"===Wy[e].name))return Qa("endquest"),bS.Q[a].PK9=2,Nn("Quest Completed!"),4===bS.Q[a].PermafrostKeep?(bS.Q[a].PermafrostKeep=5,Yy.quests++,Ry("Blizzards of Shendova, you have triumphed against Matron Maelentia! The underground caverns of Ashenflow Peak are now accessible.<br><br>Make your way toward the lair of Highlord Szarthax, the deadly fire dragon.")):bS.Q[a].PermafrostKeep++,bS.Q[a].repeatPk4=1,Yy.epicQuests++,void Qn()}if("Nimgaul"===t&&bS.Q[a].PlaneofFear<=2&&("a wailing banshee"===Wy[e].name&&bS.Q[a].PF1<3&&(bS.Q[a].PF1++,Hv(1)),"a festering dreg"===Wy[e].name&&bS.Q[a].PF2<3&&(bS.Q[a].PF2++,Hv(2)),"a lurid nymph"===Wy[e].name&&bS.Q[a].PF3<3&&(bS.Q[a].PF3++,Hv(3)),"a peering menace"===Wy[e].name&&bS.Q[a].PF4<3&&(bS.Q[a].PF4++,Hv(4)),"an accursed slattern"===Wy[e].name&&bS.Q[a].PF5<3&&(bS.Q[a].PF5++,Hv(5)),"a brooding fungus"===Wy[e].name&&bS.Q[a].PF6<3&&(bS.Q[a].PF6++,Hv(6)),"a cursed marionette"===Wy[e].name&&bS.Q[a].PF7<3&&(bS.Q[a].PF7++,Hv(7)),"a tremulant imp"===Wy[e].name&&bS.Q[a].PF8<3&&(bS.Q[a].PF8++,Hv(8)),"a deranged gorilla"===Wy[e].name&&bS.Q[a].PF9<3&&(bS.Q[a].PF9++,Hv(9)),"a boreal spider"===Wy[e].name&&bS.Q[a].PF10<3&&(bS.Q[a].PF10++,Hv(10)),"a cephalid enticer"===Wy[e].name&&bS.Q[a].PF11<3&&(bS.Q[a].PF11++,Hv(11)),"a panicked anuran"===Wy[e].name&&bS.Q[a].PF12<3&&(bS.Q[a].PF12++,Hv(12)),"a chaos punisher"===Wy[e].name&&bS.Q[a].PF13<3&&(bS.Q[a].PF13++,Hv(13)),"a chaos enforcer"===Wy[e].name&&bS.Q[a].PF14<3&&(bS.Q[a].PF14++,Hv(14)),"a pustulant vessel"===Wy[e].name&&bS.Q[a].PF15<3&&(bS.Q[a].PF15++,Hv(15)),"a shrieking wisp"===Wy[e].name&&bS.Q[a].PF16<3&&(bS.Q[a].PF16++,Hv(16)),"a sorrow slitherer"===Wy[e].name&&bS.Q[a].PF17<3&&(bS.Q[a].PF17++,Hv(17)),"Guardian of Misery"===Wy[e].name&&(bS.Q[a].PF18=2,Hv(18)),"Guardian of Strife"===Wy[e].name&&(bS.Q[a].PF19=2,Hv(19)),"Guardian of Ruin"===Wy[e].name&&(bS.Q[a].PF20=2,Hv(20)),"Falzitherin"===Wy[e].name&&(bS.Q[a].PF21=2,Hv(21),Yy.epicQuests++,Qn()),"Nalatos, God of Chaos"===Wy[e].name&&(bS.Q[a].PF22=2,Yy.epicQuests++,Qn()),bS.Q[a].PF1>=3&&bS.Q[a].PF2>=3&&bS.Q[a].PF3>=3&&bS.Q[a].PF4>=3&&bS.Q[a].PF5>=3&&bS.Q[a].PF6>=3&&bS.Q[a].PF7>=3&&bS.Q[a].PF8>=3&&bS.Q[a].PF9>=3&&bS.Q[a].PF10>=3&&bS.Q[a].PF11>=3&&bS.Q[a].PF12>=3&&bS.Q[a].PF13>=3&&bS.Q[a].PF14>=3&&bS.Q[a].PF15>=3&&bS.Q[a].PF16>=3&&bS.Q[a].PF17>=3&&bS.Q[a].PF18>=1&&bS.Q[a].PF19>=1&&bS.Q[a].PF20>=1&&bS.Q[a].PF21>=1&&bS.Q[a].PF22>=1&&"Nalatos, God of Chaos"===Wy[e].name))return Qa("endquest"),bS.Q[a].PlaneofFear<2?(bS.Q[a].PlaneofFear=2,Yy.quests++):bS.Q[a].PlaneofFear++,void Nn("Quest Completed!");if("Dire Sanctum"===t&&bS.Q[a].PlaneofHate<=2&&("a toiling drudge"===Wy[e].name&&bS.Q[a].PH1<4&&(bS.Q[a].PH1++,Hv(1)),"a slavering corpse"===Wy[e].name&&bS.Q[a].PH2<4&&(bS.Q[a].PH2++,Hv(2)),"a fetid vagabond"===Wy[e].name&&bS.Q[a].PH3<4&&(bS.Q[a].PH3++,Hv(3)),"an impulse servant"===Wy[e].name&&bS.Q[a].PH4<4&&(bS.Q[a].PH4++,Hv(4)),"a servant of corruption"===Wy[e].name&&bS.Q[a].PH5<4&&(bS.Q[a].PH5++,Hv(5)),"an embalmed vagrant"===Wy[e].name&&bS.Q[a].PH6<4&&(bS.Q[a].PH6++,Hv(6)),"a ghastly indulger"===Wy[e].name&&bS.Q[a].PH7<5&&(bS.Q[a].PH7++,Hv(7)),"an infected rodent"===Wy[e].name&&bS.Q[a].PH8<5&&(bS.Q[a].PH8++,Hv(8)),"a flittering menace"===Wy[e].name&&bS.Q[a].PH9<5&&(bS.Q[a].PH9++,Hv(9)),"a hallowed harbinger"===Wy[e].name&&bS.Q[a].PH10<5&&(bS.Q[a].PH10++,Hv(10)),"a cephalid sorcerer"===Wy[e].name&&bS.Q[a].PH11<5&&(bS.Q[a].PH11++,Hv(11)),"Vixen Sarmina"===Wy[e].name&&bS.Q[a].PH12<1&&(bS.Q[a].PH12=2,Hv(12),Yy.epicQuests++,Qn()),"Sanctum Guardian Ghalentus"===Wy[e].name&&bS.Q[a].PH13<1&&(bS.Q[a].PH13=2,Yy.epicQuests++,Qn()),bS.Q[a].PH1>=4&&bS.Q[a].PH2>=4&&bS.Q[a].PH3>=4&&bS.Q[a].PH4>=4&&bS.Q[a].PH5>=4&&bS.Q[a].PH6>=4&&bS.Q[a].PH7>=5&&bS.Q[a].PH8>=5&&bS.Q[a].PH9>=5&&bS.Q[a].PH10>=5&&bS.Q[a].PH11>=5&&bS.Q[a].PH12>=1&&bS.Q[a].PH13>=1&&"Sanctum Guardian Ghalentus"===Wy[e].name))return Qa("endquest"),bS.Q[a].PlaneofHate<2?(bS.Q[a].PlaneofHate=2,Yy.quests++,Ry("By the Gods, you have done it! With Ghalentus out of the way, the portal has been left unguarded! Use your Idols of Chaos to cross over to Nimgaul, the astral plane of Chaos.")):bS.Q[a].PlaneofHate++,void Nn("Quest Completed!");if("Kordata Marshlands"===t){if(bS.Q[a].UpperGuk<2&&("an anuran sur warrior"===Wy[e].name&&bS.Q[a].UG1<9&&(bS.Q[a].UG1++,Hv(1)),"an anuran sur knight"===Wy[e].name&&bS.Q[a].UG2<6&&(bS.Q[a].UG2++,Hv(2)),"an anuran sur shaman"===Wy[e].name&&bS.Q[a].UG3<6&&(bS.Q[a].UG3++,Hv(3)),bS.Q[a].UG1>=9&&bS.Q[a].UG2>=6&&bS.Q[a].UG3>=6))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].UpperGuk=2,bS.Q[a].UG1=0,bS.Q[a].UG2=0,void(bS.Q[a].UG3=0);if(2===bS.Q[a].UpperGuk&&("a fungus breeder"===Wy[e].name&&bS.Q[a].UG1<8&&(bS.Q[a].UG1++,Hv(1)),"an anuran tir shaman"===Wy[e].name&&bS.Q[a].UG2<8&&(bS.Q[a].UG2++,Hv(2)),"an anuran priest"===Wy[e].name&&bS.Q[a].UG3<6&&(bS.Q[a].UG3++,Hv(3)),bS.Q[a].UG1>=8&&bS.Q[a].UG2>=8&&bS.Q[a].UG3>=6&&"the anuran warden"===Wy[e].name))return Qa("endquest"),Nn("Quest Completed!"),Yy.quests++,bS.Q[a].UpperGuk=3,bS.Q[a].UG1=0,bS.Q[a].UG2=0,void(bS.Q[a].UG3=0);if(3===bS.Q[a].UpperGuk&&("an anuran tonta knight"===Wy[e].name&&bS.Q[a].UG1<12&&(bS.Q[a].UG1++,Hv(1)),"an anuran summoner"===Wy[e].name&&bS.Q[a].UG2<8&&(bS.Q[a].UG2++,Hv(2)),"an anuran fal shaman"===Wy[e].name&&bS.Q[a].UG3<8&&(bS.Q[a].UG3++,Hv(3)),bS.Q[a].UG1>=12&&bS.Q[a].UG2>=8&&bS.Q[a].UG3>=8&&"Prince Kerpple"===Wy[e].name))Qa("endquest"),Yy.quests++,bS.Q[a].UpperGuk=4,Nn("Quest Completed!"),U()}}(n),gS.quests()),Qa(Wy[n].audio3);dS.ceil(60*dS.random()-30),dS.ceil(40*dS.random()-20);!1===Wy[n].charmStatus&&fa("You have slain "+Wy[n].name+"!"),!0===Wy[n].charmStatus&&pb();Gw[n].offsetLeft,Gw[n].offsetTop,Wy[n].imageWidth,Wy[n].imageHeight;Cg(n),2===n&&2===bS.Q[sa()].PlaneofFear&&"Nalatos, God of Chaos"===Wy[n].name?(Kt(),zy.view="Ending"):it(n,!0);var t=0;if(Wy[n].gold&&(t=dS.round(Wy[n].gold+Wy[n].gold*(zy.goldFindEquip/100)))>0&&(fa("You have found "+t+" gold.",5),Yy.gold=dS.ceil(Yy.gold+t),Yy.totalGold+=dS.ceil(t)),Yy.mobsSlain+=1,0===Wy[n].rare&&(Yy.raresSlain+=1),e("#mobIcons"+n).empty(),zy.hpKillEquip>0&&zy.popupHeal(dS.ceil(zy.hpKillEquip)),zy.mpKillEquip>0&&"Warrior"!==Yy.job&&"Monk"!==Yy.job&&"Rogue"!==Yy.job&&function(){var e=zy.mpKillEquip;zy.popupMana(dS.ceil(e))}(),"Shaman"===Yy.job&&Yy.talent3>=20&&Wy[n].rootStatus>0){var i=yc((Qe()-50)/8,.75);zy.popupHeal(i),zy.popupMana(i)}if(!1===KI)if(0===Wy[n].rare)Vv(n);else if(1===Wy[n].rare&&dS.random()<.111)Vv(n);else if(2===Wy[n].rare)Vv(n),Vv(n);else if(3===Wy[n].rare){var o=3+~~(3*dS.random());"Revenant Viston"!==Wy[n].name&&"Falzitherin"!==Wy[n].name&&"Chief Grimden"!==Wy[n].name&&"Arcturin, the Lich King"!==Wy[n].name&&"Sentoth, Lord of Rapture"!==Wy[n].name&&"Vixen Sarmina"!==Wy[n].name||(o-=1);for(var r=0;r<=o;r++)Vv(n)}if(Wy[n].name="",Wy[n].rare=1,Wy[n].rootStatus=0,!0===mB){var l=dS.ceil(Wy[n].maxHp/50);zy.popupMana(l)}var s=Yy.level,d=Wy[n].level,c=s-d,m=1;m=c>30?0:c>20?.2:c>15?.4:c>10?.6:c>5?.8:c>2?.9:1;var u=1,f=0,h=0,g=Wy[n].xp;if(bH>1&&Yy.level-Wy[n].level<30){var p=bH;p>100&&(p=100),u+=f=p/66.66}"Halfling"===Yy.race&&(u+=.05),u+=zy.expFindEquip/100,zy.oldExp=Yy.exp,Wy[n].xp=Wy[n].xp*m,h=dS.round(f*Wy[n].xp),function(e,a,n){var t=Gw[e].offsetTop+Wy[e].cY/2;t<100&&(t=100);var i=Gw[e].offsetLeft+Wy[e].cX;if("Low"!==kw.videoSetting){var o=gi();pi(o,a+"x CHAIN COMBO!","#FFD700",16,t,i),cS.to(text[o],1.75,{y:"-=100",onComplete:function(){text[o].text=""}}),n>0&&cS.delayedCall(.6,function(){var e=gi();pi(e,"+"+n+" BONUS EXP!","#FFD700",16,t,i),cS.to(text[e],1.75,{y:"-=100",onComplete:function(){text[e].text=""}})})}}(n,bH,h),Wy[n].xp=99===s||0===m?0:dS.round(Wy[n].xp*u),e.ajax({url:"/classic/php/game1.php",data:{run:"updateExpGold",lastName:Yy.lastName,title:Yy.title,level:s,job:Yy.job,race:Yy.race,mobExp:g,Slot:n,exp:Wy[n].xp,gold:t,name:Yy.name}}).done(function(e){var a=1*e;a&&(Yy.exp+=a,Yy.exp>103835784&&(Yy.exp=103835784),fa("You have earned "+a+" experience!",2),WI+=a,Hp(),Fn())}).fail(function(e){Tv()})}if(Yy.gold>999999999&&(Yy.gold=999999999),e("#inventoryGoldAmount").text(Yy.gold),ny(),Yy.title=mn(),Av(E,Pn(),!0),Ab()>0)return fk=0,void(""===Wy[bL].name&&(qi("addmonsterId",!0),Ei("addmonsterId","0 -300%"),$S.kill(),$S=cS.delayedCall(.5,rv),jy(mS.getElementById("addmonsterId"),.5,"addmonsterId"),by(),Nn("Combo Rating: "+Xt()+"!",0,0,1500)));RC.kill(),sH=1,lH=1,pL="";for(n=0;n<=4;n++)Wy[n].attackStatus=1,Wy[n].name="",Wy[n].ID=0,Wy[n].hp=0;if(VL.kill(),nS.kill(),tS.kill(),eL.kill(),0===zy.autoAttackStatus&&Si(),$NG.mobBar.css("visibility","hidden").attr("class","nameplateBlack"),NG.mobName.textContent=Wy[bL].name,NG.mobLevel.textContent=Wy[bL].level,NG.mobTraits.innerHTML="",fk=1,Ea(),Ta(!0),Vt(),qi("addmonsterId",!0),Ei("addmonsterId","0 -300%"),$S.kill(),$S=cS.delayedCall(2,rv),jy(mS.getElementById("addmonsterId"),2,"addmonsterId"),gS.my(),zy.showPortal&&Fy(),zy.lastDrop){var s=zy.lastDrop,b=zy.lastDrop.replace(/ /g,"_");b=b.replace(/'/g,"%27"),zy.lastDrop="",cS.delayedCall(1.5,function(){fa("While you're resting, check out <a target='_blank' href='https://nevergrind.com/wiki/index.php?title="+b+"'>"+s+"</a> on the wiki.")})}}}function Ot(){var e=8*bH/((new H-vS)/1e3);return e>2&&(e=2),e}function Xt(){return~~(vH+vH*Ot())}function Vt(){MS=(new H-vS)/1e3,TS=(AI/MS).toFixed(1),vH=Xt();var a=("Chain Combo: "+bH).fontcolor("#ffff00");a+=("<br>Combo Rating: "+vH).fontcolor("#ffff00"),a+=("<br>Time Bonus: "+P(100*Ot())+"%").fontcolor("#ffff00"),a+=("<br>Experience Earned: "+WI).fontcolor("#ffff00"),a+=("<br><br>Hits: "+EI+"<br>Total Damage: "+AI).fontcolor("#ffffdd"),a+=("<br>DPS: "+TS+"<br>").fontcolor("#ee4444"),GI&&(a+=("<br>Physical Damage: "+GI+" -  "+(GI/AI*100).toFixed(1)+"%").fontcolor("#ffffdd")),qI&&(a+=("<br>Poison Damage: "+qI+" -  "+(qI/AI*100).toFixed(1)+"%").fontcolor("#00ff00")),PI&&(a+=("<br>Arcane Damage: "+PI+" -  "+(PI/AI*100).toFixed(1)+"%").fontcolor("#ff00ff")),QI&&(a+=("<br>Lightning Damage: "+QI+" -  "+(QI/AI*100).toFixed(1)+"%").fontcolor("#ffff00")),RI&&(a+=("<br>Cold Damage: "+RI+" -  "+(RI/AI*100).toFixed(1)+"%").fontcolor("#0088ff")),FI&&(a+=("<br>Fire Damage: "+FI+" -  "+(FI/AI*100).toFixed(1)+"%").fontcolor("#ff0000")),NI&&(a+=("<br>Pet Damage: "+NI+" -  "+(NI/AI*100).toFixed(1)+"%").fontcolor("#ffffdd")),jI&&(a+=("<br>Damage Shield Damage: "+jI+" -  "+(jI/AI*100).toFixed(1)+"%").fontcolor("#ffffdd")),xI&&(a+=("<br><br>Damage Received: "+xI).fontcolor("#ffffdd")+("<br>DRS: "+(xI/MS).toFixed(1)).fontcolor("#ee4444")),"Game"===zy.view&&(mS.getElementById("battleReportContent").innerHTML=a,AI>0&&(cS.killDelayedCallsTo("#battleReport"),cS.to("#battleReport",.5,{delay:2,scale:1,opacity:1,visibility:"visible",ease:pS.Bout}))),!0===TM&&Fi(),function(){var e=qn(),a=vH;"Galeblast Fortress"===e&&a>Yy.comboPermafrost&&(Yy.comboPermafrost=a);"Viston's Redoubt"===e&&a>Yy.comboKedgeKeep&&(Yy.comboKedgeKeep=a);"Ashenflow Peak"===e&&a>Yy.comboSolB&&(Yy.comboSolB=a);"Fahlnir Citadel"===e&&a>Yy.comboMistmoore&&(Yy.comboMistmoore=a);"Kordata Ruins"===e&&a>Yy.comboLowerGuk&&(Yy.comboLowerGuk=a);"Temple of Prenssor"===e&&a>Yy.comboCazicThule&&(Yy.comboCazicThule=a);"Dire Sanctum"===e&&a>Yy.comboPlaneofHate&&(Yy.comboPlaneofHate=a);"Nimgaul"===e&&a>Yy.comboPlaneofFear&&(Yy.comboPlaneofFear=a);a>Yy.comboOverall&&(Yy.comboOverall=a)}(),e.ajax({url:"/classic/php/game1.php",data:{run:"updateCombo",rating:vH,name:Yy.name}}).fail(function(e){Tv()})}function _t(a,n){function t(){var e=Wy[a];if(!0!==e.stunStatus&&!0!==e.fearStatus&&!0!==e.sleepStatus&&!0!==e.frozenStatus&&!0!==e.stasisFieldStatus&&!(e.hp<=0||Yy.hp<=0||0!==fk)){var n=Pt(a),t=dS.ceil(dS.random()*n+n/6);if(!0===e.enrage&&(t+=dS.ceil(e.level/2)),Yy.dodge>=1&&(Pb()>Yy.dodge&&pt(),100*dS.random()<Ye()&&1===Vw&&1===_w))return fa(e.name+" tries to hit you, but you dodged!"),void("Paladin"===Yy.job&&Yy.talent4>=20&&Wl(a));if(1===Vw&&1===_w){if(SI&&dS.random()<SI)return Qa("shldblk"),void fa("Your shield blocks the attack!");if(Yy.parry>=1&&(Pb()>Yy.parry&&bt(),100*dS.random()<Ke()&&1===Vw&&1===_w)){if(fa("Monk"===Yy.job?"You block the attack!":"You parry the attack!"),"Ranger"===Yy.job&&Yy.level>=6){var i=10;!0===e.snareStatus&&(i+=7),!0===NC&&(i+=7),i>100*dS.random()&&(kI+=50),Yy.talent4>=20&&Dt(9,"Strands of Ether",6,-64,1,!0)}return Qa("slashed"===bS.eq[12].type||"pierced"===bS.eq[12].type||"cleaved"===bS.eq[12].type?"blockSword":"blockBlunt"),nS.kill(),nS=cS.delayedCall(.25,Ct),ki(.25),void("Paladin"===Yy.job&&Yy.talent4>=20&&Wl(a))}if(Yy.riposte>=1&&(Pb()>Yy.riposte&&vt(),100*dS.random()<We()||!0===YC))return void ni(a)}if(!0!==e.fallingStatus){if(!0===e.drainStatus){var o=.8;"Vixen Sarmina"===e.name&&(o=.5),dS.random()>o&&function(e){var a=5*Wy[e].level+dS.random()*Wy[e].level;!0===Wy[e].ampMagicStatus&&(a+=.5*a);Wy[e].hp+=~~a,zy.popupHealSlot(~~a,e),Wy[e].hp>Wy[e].maxHp&&(Wy[e].hp=Wy[e].maxHp);zy.drawMonsterHp(e),fa(Wy[e].name+" drains the life force from your blood!");for(var n=0;n<=9;n++)!function(e){var a=sy("yellowparticle50",6,640,720,25,25),n=Gw[e].offsetLeft+Wy[e].cX-12,t=Gw[e].offsetTop+Wy[e].cY-12;a.image.onload=function(){cS.to(a,.5,{x:n,y:t,onComplete:function(){oy(6,a)}})}}(e)}(a)}e.rootStatus>0&&!0===e.silenceStatus||ti(t,a,"hits")}}}var i=Wy[a];if(!0!==i.stunStatus&&!0!==i.fearStatus&&!0!==i.sleepStatus&&!0!==i.frozenStatus&&!0!==i.stasisFieldStatus&&!0!==i.fallingStatus&&!0!==PC&&!0!==KI){if(!(i.hp<=0||Yy.hp<=0||1===i.attackStatus)){zy.checkForDeadMonsters(),Wy[a].attack.kill();var o=Ab();if(!1===i.charmStatus){if(o<5){if(!0===i.summoner)return 0===i.wolf?void lv(a):0===i.skeleton?void sv(a):0===i.elemental?void dv(a):void sv(a);if(0===i.wolf)return void lv(a);if(0===i.skeleton)return void sv(a);if(0===i.elemental)return void dv(a)}if(0===i.harmTouch)return void function(a){if(Yy.hp<=0||0!==fk)return;hv("red",25,10,a),fi(a,0,ei(a));var n=dS.ceil(4*Wy[a].level)+10;if(!0===DC)return void fa("Harm Touch has no effect on you.",1);if(!1===Wy[a].charmStatus)xT>0?(Qa("blockBlunt"),xT-=n,"Cleric"===Yy.job&&(fa("Your guardian angel absorbs the blow."),xT<=0&&e("#guardianAngelIcon").remove()),"Necromancer"===Yy.job&&(fa("Your diamond skin absorbs the blow."),xT<=0&&e("#diamondSkinIcon").remove()),"Enchanter"===Yy.job&&(fa("Your mystic rune absorbs the blow."),xT<=0&&e("#shieldHpIcon").remove()),"Paladin"===Yy.job&&(fa("Your protective bubble absorbs the blow."),xT<=0&&e("#yaulpShieldIcon").remove()),"Bard"===Yy.job&&(fa("Your shield of songs absorbs the blow."),xT<=0&&e("#shieldOfSongsIcon").remove())):(Yy.hp-=n,xI+=n,fa(Wy[a].name+" harm touches YOU for "+n+" damage.",1)),ny(),zy.drawMyHp(),mv("#f00",.7,1.25);else{if(bL===hT)return;var t=zy.myMagicDamage("magic",n,bL,!1,"Harm Touch");fa(Wy[a].name+" harm touches "+Wy[bL].name+" for "+t+" damage.",3),zy.checkForDeadMonsters()}"Warrior"===Yy.job&&Sa(n);if(Wy[a].harmTouch=1,Rb(a),Qa("spellDoneHarm"),"Nalatos, God of Chaos"===Wy[a].name||"ghastly indulger"===Wy[a].name){var i=45e3;2===zy.difficulty&&(i=35e3),3===zy.difficulty&&(i=25e3),cS.delayedCall(i/1e3,function(){"Nalatos, God of Chaos"!==Wy[a].name&&"ghastly indulger"!==Wy[a].name||(Wy[a].harmTouch=0)})}}(a);if(!0===i.silenceStatus&&0===sH&&!1===DC)return void function(e){if(Wy[e].silenceStatus=!1,Qa("handofgod"),"Gnome"!==Yy.race){fa(Wy[e].name+" silences you!");var a=2500;Hi("Silence","silenceIcon",a=~~(a*(1-zy.silenceEquip/100)),-768),cI.kill(),NG.spellbardiv.style.display="none",sH=1,XI=!0,cS.delayedCall(a/1e3,function(){XI=!1})}else fa("You resist silence!",1);if(hv("white",25,15,e),fi(e,0,2e3),mv("white",.7,1),3===Wy[2].rare){var n=45e3;3===zy.difficulty&&(n=3e4),cS.delayedCall(n/1e3,function(){3===Wy[2].rare&&(Wy[2].silenceStatus=!0)})}}(a)}if(0!==i.rune)if(0!==i.thorns)if(0!==i.lavaShield)if(0!==i.resolution){if(!0===i.enrageStatus&&!1===i.flurry&&i.rootStatus<=0){if((r=100*dS.random())>70)return void function(e){var a=Wy[e].ID;fa(Wy[e].name+" enrages!"),Qa("spellDoneFlames",0,0,.5),MenrageTimers[e].kill(),MenrageTimers[e]=cS.delayedCall(20,function(){wi("MenrageIcon"+e)}),Ai("Enrage","MenrageIcon"+e,2e4,-544,e),hv("purple",26,20,e),Wy[e].enrageStatus=!1,Wy[e].enrage=!0,Wy[e].enrageTimer=cS.delayedCall(20,function(){!function(e,a){a===Wy[e].ID&&!0===ya()&&Wy[e].name&&fa(Wy[e].name+"'s enrage fades.");Wy[e].enrage=!1}(e,a)}),fi(e,0,2e3)}(a)}if(!0===i.flurryStatus&&i.rootStatus<=0||"Bard"===Yy.job&&Yy.talent10>=20&&!0===i.charmStatus){r=100*dS.random();if(!1===i.flurry&&("Vixen Sarmina"===i.name&&(r=100),r>70))return void function(e){if(fa(Wy[e].name+" unleashes a vicious flurry!"),Qa("spellDoneFlames",0,0,.5),Ai("Flurry","MflurryIcon"+e,4e3,-608,e),hv("red",26,45,e),Wy[e].flurryStatus=!1,Wy[e].flurry=!0,Wy[e].flurryTimer=cS.delayedCall(4,function(){Wy[e].flurry=!1}),fi(e,0,1500),"Vixen Sarmina"===Wy[2].name){var a=3e4;3===zy.difficulty&&(a=2e4),cS.delayedCall(a/1e3,function(){"Vixen Sarmina"===Wy[2].name&&(Wy[2].flurryStatus=!0)})}}(a)}if(!0===i.ampMagicStatus&&!1===i.flurry){if((r=100*dS.random())>70)return void function(e){var a=Wy[e].ID;fa(Wy[e].name+" channels amplified magic!"),Qa("spellCastEvoke1",0,0,.5),MamplifyMagicTimers[e].kill(),MamplifyMagicTimers[e]=cS.delayedCall(20,function(){wi("MamplifyMagicIcon"+e)}),Ai("Amplify Magic","MamplifyMagicIcon"+e,2e4,-640,e),hv("magenta",26,12,e),Wy[e].ampMagicStatus=!1,Wy[e].ampMagic=!0,Wy[e].castFreq-=1,Wy[e].ampMagicTimer=cS.delayedCall(20,function(){!function(e,a){a===Wy[e].ID&&!0===ya()&&Wy[e].name&&(fa(Wy[e].name+"'s amplified magic fades."),Wy[e].intel-=dS.ceil(Wy[e].level/2),Wy[e].castFreq+=1);Wy[e].ampMagic=!1}(e,a)}),Wy[e].intel+=dS.ceil(Wy[e].level/2),fi(e,0,2500)}(a)}if(!0===i.sanctuaryStatus&&!1===i.flurry&&bL===a){if((r=100*dS.random())>70)return void function(e){var a=Wy[e].ID;fa(Wy[e].name+" is shielded by a translucent shell."),Qa("spellDoneBuff",0,0,.5),MsanctuaryTimers[e].kill(),MsanctuaryTimers[e]=cS.delayedCall(20,function(){wi("MsanctuaryIcon"+e)}),Ai("Sanctuary","MsanctuaryIcon"+e,2e4,-672,e),hv("white",26,12,e),Wy[e].sanctuaryStatus=!1,Wy[e].sanctuary=!0,Wy[e].sanctuaryTimer=cS.delayedCall(20,function(){!function(e,a){a===Wy[e].ID&&!0===ya()&&Wy[e].name&&fa(Wy[e].name+"'s sanctuary fades.");Wy[e].sanctuary=!1}(e,a)}),fi(e,0,2500)}(a)}if(!0===i.layHands&&i.hp/i.maxHp<.25&&dS.random()>.75)!function(e){fa(Wy[e].name+" begins to cast a spell",3),Qa("spellCastHeal",0,0,.5),!0===ya()&&(Wy[e].castingStatus=!0,fv("teal",25,e,3),Wy[e].spellActive=cS.delayedCall(3,function(){!function(e){if(Yb(e),Qa("spellDoneHeal",0,0,.5),Yy.hp<=0||0!==fk)return;if(Wy[e].castingStatus=!1,Wy[e].layHands=!1,"Matron Maelentia"===Wy[e].name){fa(Wy[e].name+" uses complete heal.",3);a=~~(Wy[e].maxHp/2)}else{fa(Wy[e].name+" uses Lay Hands.",3);var a=~~(.75*Wy[e].maxHp)}Wy[e].hp+=a,zy.popupHealSlot(a,e),Wy[e].hp>Wy[e].maxHp&&(Wy[e].hp=Wy[e].maxHp);zy.drawMonsterHp(e)}(e)}),fi(e,0,3e3))}(a);else{if(!0===i.ironMaidenStatus&&!1===i.flurry&&bL===a){An(["images1/ironMaidenIcon.png"]);r=100*dS.random();if("Sanctum Guardian Ghalentus"===i.name&&(r=100),r>70)return void function(e){var a=Wy[e].ID;fa(Wy[e].name+" is shielded by an iron maiden!",1),"High"===kw.videoSetting&&function(e){if(Wy[e].hp<=0)return;var a=dS.ceil(Gw[e].offsetTop+Wy[e].cY),n=dS.ceil(Gw[e].offsetLeft+Wy[e].cX),t=Vi(n,a,0,0,"ironMaidenIcon");t.opacity=.75,NG.eWin2.appendChild(t),cS.to(t,.5,{height:400,width:400,opacity:.75,top:a-200,left:n-200,force3D:"auto",ease:pS.bout}),cS.to(t,6,{rotation:720,force3D:"auto",ease:pS.lin}),cS.delayedCall(5.5,function(){cS.to(t,.5,{scale:0,ease:pS.lin,onComplete:function(){Wi(t)}})})}(e);if(Qa("spellDoneBuff",0,0,.5),MironMaidenTimers[e].kill(),MironMaidenTimers[e]=cS.delayedCall(6,function(){wi("MironMaidenIcon"+e)}),Ai("Iron Maiden","MironMaidenIcon"+e,1e4,-576,e),hv("yellow",26,45,e),Wy[e].ironMaidenStatus=!1,Wy[e].ironMaiden=!0,Wy[e].ironMaidenTimer=cS.delayedCall(6,function(){!function(e){a===Wy[e].ID&&!0===ya()&&Wy[e].name&&fa(Wy[e].name+"'s iron maiden fades.",1),Wy[e].ironMaiden=!1}(e)}),fi(e,0,2500),"Sanctum Guardian Ghalentus"===Wy[2].name){var n=45e3;2===zy.difficulty&&(n=35e3),3===zy.difficulty&&(n=25e3),cS.delayedCall(n/1e3,function(){"Sanctum Guardian Ghalentus"===Wy[2].name&&(Wy[2].ironMaidenStatus=!0)})}}(a)}if(!0===i.barrierStatus&&!1===i.flurry&&bL===a){var r;if((r=100*dS.random())>70)return void function(e){var a=Wy[e].ID;fa(Wy[e].name+" is bolstered by a defensive barrier!"),Qa("spellDoneBuff",0,0,.5),MbarrierTimers[e].kill(),MbarrierTimers[e]=cS.delayedCall(20,function(){wi("MbarrierIcon"+e)}),Ai("Barrier","MbarrierIcon"+e,2e4,-704,e),hv("blue",26,12,e),Wy[e].barrierStatus=!1,Wy[e].barrier=!0,Wy[e].barrierTimer=cS.delayedCall(20,function(){!function(e,a){a===Wy[e].ID&&!0===ya()&&Wy[e].name&&fa(Wy[e].name+"'s barrier fades.");Wy[e].barrier=!1}(e,a)}),fi(e,0,2500)}(a)}var l=G(),s=dS.ceil(dS.random()*i.castFreq);if(!0===i.charmStatus||"Cleric"===Yy.job&&Yy.talent10>=20&&dS.random()>.76){if(bL===hT&&"Cleric"!==Yy.job)return void ai(a);if(!0===i.dazeStatus){if(3>dS.ceil(7*dS.random()))return fa(i.name+" is blinded by darkness."),void ai(a)}p=!1;if(s===i.castFreq&&"Cleric"!==Yy.job)return void si(a,m,p);"Cleric"===Yy.job&&(hT=a);f=152+244*a-i.imageWidth/2;return hT<bL?(cS.set(Fw[a],{rotationY:180}),l.to(Gw[a],.2,{left:"+=30"}).to(Gw[a],.2,{left:"+=35",bottom:"-=20"}).to(Gw[a],.2,{left:"-=20"}).to(Gw[a],.2,{left:f,bottom:ZS})):(cS.set(Fw[a],{rotationY:0}),l.to(Gw[a],.2,{left:"-=30"}).to(Gw[a],.2,{left:"-=35",bottom:"-=20"}).to(Gw[a],.2,{left:"+=20"}).to(Gw[a],.2,{left:f,bottom:ZS})),ai(a),cS.delayedCall(.5,function(){$t(a)}),void Ut(a)}if(!0===zy.petAlive){h=100*dS.random();!0===oL&&(h-=15);var d=!1,c=50;Yy.talent8>=20&&(c=43),"Shadow Knight"===Yy.job&&h>75&&(d=!0),"Necromancer"===Yy.job&&h>50&&(d=!0),"Magician"===Yy.job&&h>c&&(d=!0),"Shaman"===Yy.job&&h>85&&(d=!0),i.rootStatus>0&&(d=!0),ND<=0&&(d=!1);m=!1;if(!0===d){var m=!0;if(s===i.castFreq)return i.rootStatus<=0&&Cg(a),void si(a,m,p);var u=lL/2,f=152+244*a-i.imageWidth/2;return Jt(a),i.rootStatus>0&&!1===i.castingStatus?Gw[5].offsetLeft+u>130+320*a?l.to(Gw[a],.2,{left:"+=5"}).to(Gw[a],.2,{left:"+=5",bottom:"-=5"}).to(Gw[a],.2,{left:"-=5"}).to(Gw[a],.2,{left:f,bottom:ZS}):l.to(Gw[a],.2,{left:"-=5"}).to(Gw[a],.2,{left:"-=5",bottom:"-=5"}).to(Gw[a],.2,{left:"+=5"}).to(Gw[a],.2,{left:f,bottom:ZS}):Gw[5].offsetLeft+u>130+320*a?l.to(Gw[a],.2,{left:"+=35"}).to(Gw[a],.2,{left:"+=25",bottom:"-=20"}).to(Gw[a],.2,{left:"-=25"}).to(Gw[a],.2,{left:f,bottom:ZS}):l.to(Gw[a],.2,{left:"-=35"}).to(Gw[a],.2,{left:"-=25",bottom:"-=20"}).to(Gw[a],.2,{left:"+=25"}).to(Gw[a],.2,{left:f,bottom:ZS}),cS.delayedCall(.5,function(){var e=Wy[a];if(""!==qD&&e.name){var n=dS.ceil(dS.random()*Pt(a)*(1-zD/4/100));(n+=dS.ceil(n*(.75*e.level/100)))<.3*e.level&&(n=dS.ceil(.3*e.level)),n=Nb(n),ND-=n,fa(e.name+" hits "+qD+" for "+n+" damage."),zy.drawMyHp(),"a fire elemental pet"===PD&&Tb(a),dS.random()>.8&&("Magician"===Yy.job&&Qa("elem_hit3"),"Necromancer"!==Yy.job&&"Shadow Knight"!==Yy.job||Qa("skeleton_hit"),"Shaman"===Yy.job&&Qa("wolf_hit2")),ND<=0&&!0===zy.petAlive&&pb()}}),void ai(a)}}if(("Bard"===Yy.job||"Enchanter"===Yy.job)&&""!==qD&&Wy[hT].hp>0){var h=100*dS.random(),d=!1,g=0;if("Bard"===Yy.job?Yy.talent12>=20&&(g=10):Yy.talent5>=20&&(g=16),h>50-g&&(d=!0),!0===d){var p=!0;if(s===i.castFreq)return i.rootStatus<=0&&Cg(a),void si(a,m,p);var b=dS.ceil(dS.random()*Pt(a)*zy.mobDefense(hT));b+=dS.ceil(b*(.75*i.level/100));f=152+244*a-i.imageWidth/2;return Jt(a),!1===i.doubleAttack&&(hT>a?l.to(Gw[a],.2,{left:"+=30"}).to(Gw[a],.2,{left:"+=35",bottom:"-=20"}).to(Gw[a],.2,{left:"-=20"}).to(Gw[a],.2,{left:f,bottom:ZS}):l.to(Gw[a],.2,{left:"-=30"}).to(Gw[a],.2,{left:"-=35",bottom:"-=20"}).to(Gw[a],.2,{left:"+=20"}).to(Gw[a],.2,{left:f,bottom:ZS})),b<.3*i.level&&(b=dS.ceil(.3*i.level)),Wy[hT].hp-=b,fa(i.name+" hits "+qD+" for "+b+" damage."),zy.drawMyHp(),zy.slotDamage(b,hT),zy.checkForDeadMonsters(),ai(a),void(!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove(),_t(hT)))}}if(i.rootStatus>0&&(s=i.castFreq),s!==i.castFreq){if(i.name){if(Jt(a),i.rootStatus<=0){var f=152+244*a-i.imageWidth/2,v=(dS.round(30*dS.random()-70),dS.round(f+100*dS.random()-50)),y=dS.round(f+60*dS.random()-30);Zt(a),tlMob[a]=G(),tlMob[a].to(Gw[a],.5,{bezier:{curviness:3,values:[{left:v,bottom:71,scale:1.1},{left:y,bottom:62,scale:1.2}]},force3D:"auto",onComplete:function(){Zt(a),t()}}).to(Gw[a],.4,{left:f,bottom:ZS,ease:pS.Qinout,force3D:"auto",scale:1})}ai(a)}}else si(a,m,p)}}else!function(e){fa(pL+"'s skin glows with divine protection.",3),Qa("spellDoneBuff",0,0,.5),Ai("Resolution","MresolutionIcon"+e,0,-512,e),Wy[e].resolution=1,Wy[e].resolutionStatus=!0,hv("yellow",25,20,e),Wy[e].maxHp+=20*Wy[e].intel,Wy[e].hp+=20*Wy[e].intel,Wy[e].def+=~~(.12*Wy[e].intel),fi(e,0,2e3),zy.drawMonsterHp(e)}(a);else!function(e){fa(pL+"'s is surrounded by a shield of lava.",3),Qa("spellDoneBuff",0,0,.5),MlavaTimers[e].kill(),MlavaTimers[e]=cS.delayedCall(30,function(){wi("MlavaIcon"+e)}),Ai("Lava Shield","MlavaIcon"+e,3e4,-480,e),hv("orange",25,20,e),Wy[e].lavaShield=1,Wy[e].lavaShieldActive=0,Wy[e].lavaShieldTimer=cS.delayedCall(30,function(){!function(e){Wy[e].lavaShieldActive=1}(e)}),fi(e,0,ei(e))}(a);else!function(e){fa(pL+"'s skin is covered in thorns.",3),Qa("spellDoneBuff",0,0,.5),MthornsTimers[e].kill(),MthornsTimers[e]=cS.delayedCall(40,function(){wi("MthornsIcon"+e)}),Ai("Thorns","MthornsIcon"+e,4e4,-448,e),hv("green",25,20,e),Wy[e].thorns=1,Wy[e].thornsActive=0,Wy[e].thornsTimer=cS.delayedCall(40,function(){!function(e){Wy[e].thornsActive=1}(e)}),fi(e,0,ei(e))}(a);else!function(e){fa(pL+"'s skin shimmers with power.",3),Qa("spellDoneBuff",0,0,.5),Ai("Rune","MruneIcon"+e,0,-416,e),Wy[e].rune=1,hv("teal",25,25,e),Wy[e].runeHp=20+10*Wy[e].intel,fi(e,0,ei(e))}(a)}}else Wy[a].attack=cS.delayedCall(.1,function(){_t(a)})}function $t(e){if(Wy[hT].name&&Wy[bL].name&&!0!==Wy[bL].charmStatus){var a=dS.ceil(dS.random()*Pt(e));zy.petPhysical(a,bL,"hits")}}function Ut(e){function a(n,t){n<t&&($t(e),cS.delayedCall(.05,function(){a(++n,t)}))}"Enchanter"===Yy.job&&Yy.talent8>0&&!0===uB&&a(0,dS.ceil(Yy.talent8/4))}function Jt(e){Wy[e].attackNow=!0,cS.delayedCall(.5,function(){Wy[e].attackNow=!1})}function Zt(e){cS.set(Fw[e],{rotationY:180*~~(2*dS.random())})}function ei(e){var a=Wy[e].speed+function(e){var a=0,n=Wy[e];a+=n.consonantChain,(!0===n.snareStatus||!0===n.chillStatus)&&(a+=1e3);Qe();!0===n.slowStatus&&(a+=2e3);!0===n.shiftlessStatus&&(a+=1500);for(var t=!1,i=0;i<=4;i++)Wy[i].name&&1==Wy[i].zealousAura&&(t=!0);1==t&&!1===n.charmStatus&&(a-=500);!0===n.charmStatus&&(!0===uB&&(a-=1200),!0===zM&&(a-=1e3));!0===n.flurry&&(a=-2500);a<-2500&&(a=-2500);a>3e3&&(a=3e3);return a}(e);return a<500&&(a=500),a}function ai(e){var a=100*dS.random(),n=.8*Wy[e].level;!1===Wy[e].doubleAttack?Wy[e].level>5&&n>a?(Wy[e].charmStatus,Wy[e].doubleAttack=!0,fi(e,0,100)):(Wy[e].charmStatus,fi(e,0,ei(e))):(!0===Wy[e].charmStatus&&Ga("Charmed pet double attacks with delay: "+ei(e)),Wy[e].doubleAttack=!1,fi(e,0,ei(e)))}function ni(e){function a(){Qa("slashed"===n||"pierced"===n||"cleaved"===n?"blockSword":"blockBlunt")}var n=bS.eq[12].type,t=dS.round((dS.random()*(10*bS.eq[12].damage)+dS.random()*(Yy.level/3))*(ne()/1500)+7*dS.random());if("cleaved"!==n&&"smashed"!==n&&"staff"!==n||t<Yy.level/2.6&&(t=dS.ceil(Yy.level/2.6)),!1===ee())Wy[e].runeHp>0?(Wy[e].runeHp-=t,zy.slotDamage(t,e),a()):(fa("You riposte for "+t+" damage."),Wy[e].hp-=t,zy.slotDamage(t,e),a());else{var i=dS.ceil(t+t*zy.criticalDamage());Wy[e].runeHp>0?(Wy[e].runeHp-=i,zy.slotDamageCrit(i,e),a()):(fa("You riposte for "+i+" damage."),Wy[e].hp-=i,zy.slotDamageCrit(i,e),a())}"Paladin"===Yy.job&&Yy.talent4>=20&&Wl(e);"Monk"===Yy.job&&ka(),zy.drawMonsterHp(e),zy.checkForDeadMonsters(),Nt(e,!0)}function ti(a,n,t){function i(){"Cleric"===Yy.job&&(fa("Your guardian angel absorbs the blow."),xT<=0&&e("#guardianAngelIcon").remove()),"Necromancer"===Yy.job&&(fa("Your diamond skin absorbs the blow."),xT<=0&&e("#diamondSkinIcon").remove()),"Enchanter"===Yy.job&&(fa("Your mystic rune absorbs the blow."),xT<=0&&e("#shieldHpIcon").remove()),"Paladin"===Yy.job&&(fa("Your protective bubble absorbs the blow."),xT<=0&&e("#yaulpShieldIcon").remove()),"Bard"===Yy.job&&(fa("Your shield of songs absorbs the blow."),xT<=0&&e("#shieldOfSongsIcon").remove())}var o=Wy[n];if(""===o.name)return!1;var r=o.name;if(a=dS.round(a*function(e){return 1-2*ae()/Pt(e)/100}(n)),!0===o.martyr&&zy.popupMana(dS.ceil(a/2.5)),"Shadow Knight"===Yy.job&&Yy.talent4>=20&&dS.random()>.92)return fa(o.name+"'s attack is negated by a vortex of shadows."),Qa("fade"),!1;if(!0===YC)return ni(n),!1;if(0===eS){var l=yc(ne()/9,.7);return"High"===kw.videoSetting&&gl(n),Qa("flshhit"+~~(5*dS.random()+3)),zy.myPhysicalDamage(l,n,"Stone Fist Reversal"),!1}if(!0===PC)return fa("You are nowhere to be found."),!1;if(!0===DC)return"Warrior"===Yy.job&&(fa("You deflect your opponent's attack."),Yy.talent2>=20&&1===Vw&&1===_w&&ni(bL)),"Monk"===Yy.job&&1===eS&&fa("Your glowing aura protects you from your opponent's attack."),"Rogue"===Yy.job&&fa("Your shadow absorbs the attack."),"Paladin"===Yy.job&&Wl(n),"Wizard"===Yy.job&&fa("You are protected by a barrier of permafrost."),!1;if(0===AC&&(a=dS.ceil(.5*a)),EC>0)return!0!==o.stunStatus&&!0!==o.fearStatus&&!0!==o.sleepStatus&&!0!==o.frozenStatus&&!0!==o.stasisFieldStatus&&((EC-=1)<=0&&e("#mirageStrikeIcon").remove(),e("#mirageStrikeCount").html(EC),fa("Your mirage absorbs the blow."),!1);if(VB>0)return!0!==o.stunStatus&&!0!==o.fearStatus&&!0!==o.sleepStatus&&!0!==o.frozenStatus&&!0!==o.stasisFieldStatus&&((VB-=1)<=0&&e("#mirrorImagesIcon").remove(),e("#mirrorImagesCount").html(VB),fa("Your mirror image absorbs the blow."),!1);if(!0===o.dazeStatus&&3>10*dS.random())return fa(o.name+" is disoriented by blazing light."),!1;if(o.rootStatus>0)return!1;var s=0;!0===zS.martyr&&(s+=6.3*aa()),a=~~(a+a*(s/100));var d=0;if(0===aS&&Yy.talent3>=20&&(d+=1.6*Je()),!0===cC&&(d+=50),!0===lC&&(d+=25),sS.Phantasmist>=6&&(d+=25),!0===CC&&(d+=40+Je()),!0===o.phased&&(d+=25),"Ranger"===Yy.job)if(!0===o.riftStatus)d+=nd();else if(Yy.talent4>=1&&100*dS.random()<1.45*Ze()){for(var c=!1,m=0;m<=4;m++)!0===Wy[m].riftStatus&&(c=!0);!0===c&&(d+=30+Fe()/5)}if(o.dronesOfDoomTickCount>0&&Yy.talent1>=20&&(d+=10),"Enchanter"===Yy.job&&Yy.talent3>=20&&!0===fB&&(d+=15),!0===qB&&(d=75,Yy.mp-=~~(.25*a),zy.drawMyMp()),d>75&&(d=75),a=~~(a-a*(d/100)),(a-=dS.round(dS.random()*Ie()))<1&&(a=1),a<.3*o.level&&(a+=dS.ceil(.3*o.level+4*dS.random())),o.level<10&&a>o.level+5&&(a=o.level+5),!0===QB){var u=2*a;zy.popupHeal(u)}if(xT>0){if(Qa("blockBlunt"),xT-=a,i(),!0===o.poisonEnchanted){f=dS.ceil(dS.random()*(a/4));xT-=f,i()}if(!0===o.lightningEnchanted){f=dS.ceil(dS.random()*(a/4));xT-=f,i()}if(!0===o.coldEnchanted){f=dS.ceil(dS.random()*(a/4));xT-=f,i()}if(!0===o.fireEnchanted){f=dS.ceil(dS.random()*(a/4));xT-=f,i()}h=!0}else{is(n),xI+=a,Yy.hp-=a,Qa("flshhit1");var f=0;!0===o.poisonEnchanted&&(f=dS.ceil(dS.random()*(a/4)),Yy.hp-=f,fa(o.name+" hits YOU for "+f+" poison damage.",1)),!0===o.lightningEnchanted&&(f=dS.ceil(dS.random()*(a/4)),Yy.hp-=f,fa(o.name+" hits YOU for "+f+" lightning damage.",1)),!0===o.coldEnchanted&&(f=dS.ceil(dS.random()*(a/4)),Yy.hp-=f,fa(o.name+" hits YOU for "+f+" cold damage.",1)),!0===o.fireEnchanted&&(f=dS.ceil(dS.random()*(a/4)),Yy.hp-=f,fa(o.name+" hits YOU for "+f+" fire damage.",1)),f&&(xI+=f),ny(),fa(o.name+" "+t+" YOU for "+a+" damage.",1);var h=!0;"Bard"===Yy.job&&Yy.talent3>=20&&dS.random()>.85&&Ro(4e3)}!0===o.vampiric&&(Wy[n].hp+=dS.ceil(5+a/3)),!0===Ek&&ni(n),zy.drawMyHp(),!0===o.lamprey&&("Warrior"===Yy.job||"Monk"===Yy.job||"Rogue"===Yy.job||(Yy.mp-=dS.ceil(a/6),zy.drawMyMp())),zy.drawMonsterHp(n),Yy.defense<5*Yy.level&&Pb()>Yy.defense&&ut();var g=zy.thornsEquip;if("Ranger"===Yy.job){if(Yy.level>=3){var p=dS.ceil(100*dS.random());!0===o.snareStatus&&(p+=7),!0===NC&&(p+=7),p>85&&(jC=!0,zy.checkRangerSkills())}Yy.talent2>=20&&dS.random()>.75&&(g+=a,Qa("TigerA")),!0===zC&&(g+=dS.ceil(.04*Ne())),!0===KC&&(g+=dS.ceil(.0125*Ne()))}return"Necromancer"===Yy.job&&Yy.talent11>=20&&dS.random()>.8&&zy.boneSpiritFinish(n),!0===NT&&(g+=dS.ceil(.11*Ne())),!0===BB&&(g+=dS.ceil(.18*Ne()*(1+12.8*Ue()/100))),"Shadow Knight"===Yy.job&&(g+=dS.ceil(1.7*Je())),g>0&&(Wy[n].hp-=g,yi(g,n,"damageShield"),zy.checkForDeadMonsters()),"Warrior"===Yy.job&&Sa(a),Yy.hp<=0&&(fa("You have been slain by "+r+"!",1),ot()),h}function ii(a,n,t,i){var o=Wy[n];if(""!==o.name){if(!0===o.martyr&&zy.popupMana(dS.ceil(a/2.5)),0===eS&&Yy.talent2>=20){g=yc(ne()/9,.7);return"High"===kw.videoSetting&&gl(n),Qa("flshhit"+~~(5*dS.random()+3)),zy.myPhysicalDamage(g,n,"Stone Fist Reversal"),!1}if(!0!==PC)if(!0!==DC){if(0===AC&&(a=dS.ceil(.5*a)),EC>0){if(!0===o.stunStatus||!0===o.fearStatus||!0===o.sleepStatus||!0===o.frozenStatus||!0===o.stasisFieldStatus)return;return(EC-=1)<=0&&e("#mirageStrikeIcon").remove(),e("#mirageStrikeCount").html(EC),void fa("Your mirage absorbs "+t+".")}if(VB>0){if(!0===o.stunStatus||!0===o.fearStatus||!0===o.sleepStatus||!0===o.frozenStatus||!0===o.stasisFieldStatus)return;return(VB-=1)<=0&&e("#mirrorImagesIcon").remove(),e("#mirrorImagesCount").html(VB),void fa("Your mirror image absorbs the blow.")}if((a-=dS.round(dS.random()*we()))<1&&(a=1),0!==bC){if(1===Vw&&1===_w){if(SI&&dS.random()<SI)return Qa("shldblk"),void fa("Your shield blocks the attack!");if(sS.Warder>=6){if(Yy.parry>=1&&(Pb()>Yy.parry&&bt(),100*dS.random()<Ke()&&1===Vw&&1===_w)){if(fa("Monk"===Yy.job?"You block the attack!":"You parry the attack!"),"Ranger"===Yy.job){var r=10;!0===o.snareStatus&&(r+=7),!0===NC&&(r+=7),r>100*dS.random()&&(kI+=50),Yy.talent4>=20&&Dt(9,"Strands of Ether",6,-64,1,!0)}return Qa("blockSword"),nS.kill(),nS=cS.delayedCall(.25,Ct),void ki(.25)}if(Yy.riposte>=1&&(Pb()>Yy.riposte&&vt(),100*dS.random()<We()||!0===YC))return void ni(n)}}var l=0;!0===zS.martyr&&(l+=6.3*aa()),a=~~(a+a*(l/100));var s=0;if(0===aS&&Yy.talent3>=20&&(s+=1.6*Je()),!0===cC&&(s+=50),!0===lC&&(s+=25),!0===CC&&(s+=40+Je()),!0===o.phased&&(s+=25),"Ranger"===Yy.job)if(!0===o.riftStatus)s+=nd();else if(Yy.talent4>=1&&100*dS.random()<1.45*Ze()){for(var d=!1,c=0;c<=4;c++)!0===Wy[c].riftStatus&&(d=!0);!0===d&&(s+=30+Fe()/5)}if(o.dronesOfDoomTickCount>0&&Yy.talent1>=20&&(s+=10),"Enchanter"===Yy.job&&Yy.talent3>=20&&!0===fB&&(s+=15),!0===qB&&(s=75,Yy.mp-=~~(.25*a),zy.drawMyMp()),s>75&&(s=75),a=~~(a-a*(s/100)),!0===QB){var m=2*a;zy.popupHeal(m)}if(xT>0)return Qa("blockBlunt"),xT-=a,"Cleric"===Yy.job&&(fa("Your guardian angel absorbs the blow."),xT<=0&&e("#guardianAngelIcon").remove()),"Necromancer"===Yy.job&&(fa("Your diamond skin absorbs the blow."),xT<=0&&e("#diamondSkinIcon").remove()),"Enchanter"===Yy.job&&(fa("Your mystic rune absorbs the blow."),xT<=0&&e("#shieldHpIcon").remove()),"Paladin"===Yy.job&&(fa("Your protective bubble absorbs the blow."),xT<=0&&e("#yaulpShieldIcon").remove()),void("Bard"===Yy.job&&(fa("Your shield of songs absorbs the blow."),xT<=0&&e("#shieldOfSongsIcon").remove()));if(Yy.hp-=a,xI+=a,ny(),"Ice Shard"===t){var u=(100-zy.chillEquip)/100*15e3;HD.kill(),HD=cS.delayedCall(u/1e3,function(){wi("mobChilledIcon")}),Hi("Chilled","mobChilledIcon",u,-736),OI=!0,xD.kill(),xD=cS.delayedCall(u/1e3,ri),ny()}"Energy Bolt"===t&&dS.random()>.5&&(fa("Your spell has been interrupted by a static discharge!"),cI.kill(),NG.spellbardiv.style.display="none",sH=1),fa(o.name+" casts "+t+" on YOU for "+a+" damage.",1),o.vampiric&&(Wy[n].hp+=dS.ceil(a/2)),zy.drawMyHp(),o.lamprey&&("Warrior"===Yy.job||"Monk"===Yy.job||"Rogue"===Yy.job||(Yy.mp-=dS.ceil(a/6),zy.drawMyMp())),zy.drawMonsterHp(n),Rb(n),"Poison"===i?zy.absorbPoisonEquip>0&&zy.popupHeal(dS.ceil(zy.absorbPoisonEquip/100*a)):"Magic"===i?zy.absorbMagicEquip>0&&zy.popupHeal(dS.ceil(zy.absorbMagicEquip/100*a)):"Lightning"===i?zy.absorbLightningEquip>0&&zy.popupHeal(dS.ceil(zy.absorbLightningEquip/100*a)):"Cold"===i?zy.absorbColdEquip>0&&zy.popupHeal(dS.ceil(zy.absorbColdEquip/100*a)):"Fire"===i&&zy.absorbFireEquip>0&&zy.popupHeal(dS.ceil(zy.absorbFireEquip/100*a)),"Warrior"===Yy.job&&Sa(a)}else{if(bC=1,e("#absorbSpellIcon, #spellAbsorbImage").remove(),0===Yy.talent7)zy.popupHeal(dS.ceil(1.2*a)),fa("You consume "+t+" and burn with rage.",3);else{Qa("spellDoneBoom");for(var f=30*na()/100,c=0;c<=4;c++)if(c>=0&&Wy[c].name){rH=dS.ceil(a*f);var h=(10*dS.random()+90)/100;rH*=h,zy.myMagicDamage(i.toLowerCase(),rH,c,ee(),"Reflect")}}Sa(3*a)}}else{if("Warrior"===Yy.job&&(fa("You deflect your opponent's attack."),Yy.talent2>=20&&1===Vw&&1===_w&&ni(bL)),"Monk"===Yy.job&&fa("Your glowing aura protects you from your opponent's attack."),"Rogue"===Yy.job&&fa("Your shadow absorbs the attack."),"Paladin"===Yy.job){var g=yc(ne()/8,.7);_l(n),Qa("holybolt"),cS.delayedCall(.25,function(){zy.myPhysicalDamage(g,n,"Repudiation")})}"Wizard"===Yy.job&&fa("You are protected by a barrier of permafrost.")}else fa("You are nowhere to be found.")}}function oi(a,n,t,i,o){var r=Wy[n];if(!(Yy.hp<0))if(!0===r.martyr&&zy.popupMana(dS.ceil(a/2.5)),!0===PC&&(fa("Your location has been revealed!"),PC=!1),!0!==DC){0===AC&&(a=dS.ceil(.5*a));var l=0;!0===zS.martyr&&(l+=6.3*aa()),a=~~(a+a*(l/100));var s=0;if(0===aS&&Yy.talent3>=20&&(s+=1.6*Je()),!0===cC&&(s+=50),!0===lC&&(s+=25),!0===CC&&(s+=40+Je()),!0===r.phased&&(s+=25),"Ranger"===Yy.job)if(!0===r.riftStatus)s+=nd();else if(Yy.talent4>=1&&100*dS.random()<1.45*Ze()){for(var d=!1,c=0;c<=4;c++)!0===Wy[c].riftStatus&&(d=!0);!0===d&&(s+=30+Fe()/5)}if(r.dronesOfDoomTickCount>0&&Yy.talent1>=20&&(s+=10),"Enchanter"===Yy.job&&Yy.talent3>=20&&!0===fB&&(s+=15),!0===qB&&(s=75,Yy.mp-=~~(.25*a),zy.drawMyMp()),s>75&&(s=75),(a=~~(a-a*(s/100)))<1&&(a=1),!0===QB){var m=2*a;zy.popupHeal(m)}if(xT>0)return xT-=a,"Cleric"===Yy.job&&(fa("Your guardian angel absorbs the blow."),xT<=0&&e("#guardianAngelIcon").remove()),"Necromancer"===Yy.job&&(fa("Your diamond skin absorbs the blow."),xT<=0&&e("#diamondSkinIcon").remove()),"Enchanter"===Yy.job&&(fa("Your mystic rune absorbs the blow."),xT<=0&&e("#shieldHpIcon").remove()),"Paladin"===Yy.job&&(fa("Your protective bubble absorbs the blow."),xT<=0&&e("#yaulpShieldIcon").remove()),void("Bard"===Yy.job&&(fa("Your shield of songs absorbs the blow."),xT<=0&&e("#shieldOfSongsIcon").remove()));3===i&&dS.random()>.85&&(fa("Your spell has been interrupted by a static discharge!"),cI.kill(),NG.spellbardiv.style.display="none",sH=1),Yy.hp-=a,xI+=a,ny(),1===i&&fa("Envenom poisons YOU for "+a+" damage.",1),2===i&&fa("Engulfing Darkness strangles YOU for "+a+" damage.",1),3===i&&fa("Static Field electrocutes YOU for "+a+" damage.",1),4===i&&fa("Blizzard storms down on YOU for "+a+" damage.",1),5===i&&fa("Conflagration scorches YOU for "+a+" damage.",1),r.vampiric&&(Wy[n].hp+=dS.ceil(a/2)),zy.drawMyHp(),r.lamprey&&("Warrior"===Yy.job||"Monk"===Yy.job||"Rogue"===Yy.job||(Yy.mp-=dS.ceil(a/6),zy.drawMyMp())),zy.drawMonsterHp(n),Wb(n),"Poison"===o?zy.absorbPoisonEquip>0&&zy.popupHeal(dS.ceil(zy.absorbPoisonEquip/100*a)):"Magic"===o?zy.absorbMagicEquip>0&&zy.popupHeal(dS.ceil(zy.absorbMagicEquip/100*a)):"Lightning"===o?zy.absorbLightningEquip>0&&zy.popupHeal(dS.ceil(zy.absorbLightningEquip/100*a)):"Cold"===o?zy.absorbColdEquip>0&&zy.popupHeal(dS.ceil(zy.absorbColdEquip/100*a)):"Fire"===o&&zy.absorbFireEquip>0&&zy.popupHeal(dS.ceil(zy.absorbFireEquip/100*a)),"Warrior"===Yy.job&&Sa(a)}else{if("Warrior"===Yy.job&&(fa("You deflect your opponent's attack."),Yy.talent2>=20&&1===Vw&&1===_w&&ni(bL)),"Monk"===Yy.job&&fa("Your glowing aura protects you from your opponent's attack."),"Rogue"===Yy.job&&fa("Your shadow absorbs the attack."),"Paladin"===Yy.job){var u=yc(ne()/8,.7);_l(n),Qa("holybolt"),cS.delayedCall(.25,function(){zy.myPhysicalDamage(u,n,"Repudiation")})}"Wizard"===Yy.job&&fa("You are protected by a barrier of permafrost.")}}function ri(){OI=!1}function li(a,n,t){var i=Wy[n];if(EC>0){if(!0===i.stunStatus||!0===i.fearStatus||!0===i.sleepStatus||!0===i.frozenStatus||!0===i.stasisFieldStatus)return;return(EC-=1)<=0&&e("#mirageStrikeIcon").remove(),e("#mirageStrikeCount").html(EC),fa("Your mirage absorbs "+t+"."),Wy[n].envenomTicks=0,Wy[n].engulfingDarknessTicks=0,Wy[n].staticFieldTicks=0,Wy[n].blizzardTicks=0,Wy[n].conflagrationTicks=0,Wy[n].dotDamage=0,void Wy[n].dotActive.kill()}if(VB>0){if(!0===i.stunStatus||!0===i.fearStatus||!0===i.sleepStatus||!0===i.frozenStatus||!0===i.stasisFieldStatus)return;return(VB-=1)<=0&&e("#mirrorImagesIcon").remove(),e("#mirrorImagesCount").html(VB),fa("Your mirror image absorbs the blow."),Wy[n].envenomTicks=0,Wy[n].engulfingDarknessTicks=0,Wy[n].staticFieldTicks=0,Wy[n].blizzardTicks=0,Wy[n].conflagrationTicks=0,Wy[n].dotDamage=0,void Wy[n].dotActive.kill()}if(0===bC){bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove();var o=dS.ceil(4*a);if(Sa(3*a),0===Yy.talent7)zy.popupHeal(o),fa("You consume "+t+" and burn with rage.",3);else{Qa("spellDoneBoom");for(var r=30*na()/100,l=0;l<=4;l++)if(l>=0&&Wy[l].name){rH=dS.ceil(a*r);var s=(10*dS.random()+90)/100;rH*=s,zy.myMagicDamage(mType.toLowerCase(),rH,l,ee(),"Reflect")}}return Wy[n].envenomTicks=0,Wy[n].engulfingDarknessTicks=0,Wy[n].staticFieldTicks=0,Wy[n].blizzardTicks=0,Wy[n].conflagrationTicks=0,Wy[n].dotDamage=0,void Wy[n].dotActive.kill()}"Warrior"===Yy.job&&Sa(a)}function si(a,n,t){function i(){cS.delayedCall(.033,function(){si(a,n,t)})}Cg(a);var o=~~(4*dS.random()+1),r=Wy[a]["skill"+o];if("kick"===r||"bash"===r||"backstab"===r||"shadow kick"===r){if(!(Wy[a].rootStatus<=0))return void i();if("kick"===r)return void function(a,n,t){if(Wy[a].mp<2)return void Fb(a);if(tlMob[a]=G(),Qa(Wy[a].audio1),!0===n){if(cS.delayedCall(.4,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var e=dS.ceil((dS.random()*Pt(a)+Pt(a)/3)*(1-zD/4/100));e<.45*Wy[a].level&&(e=dS.ceil(.45*Wy[a].level));e=Nb(e),ND-=e,fa(Wy[a].name+" kicks "+qD+" for "+e+" damage."),zy.drawMyHp(),"a fire elemental pet"===PD&&Tb(a);Rb(a)}),Wy[a].mp-=2,ai(a),Wy[a].rootStatus<=0){var i=dS.round(Gw[5].offsetLeft+lL/2),o=152+244*a-Wy[a].imageWidth/2;if(152+244*a-Wy[a].imageWidth/2<i)var r=dS.round(o+35*dS.random()+15),l=dS.round(o+65*dS.random()+0);else var r=dS.round(o+15*dS.random()-35),l=dS.round(o+65*dS.random()-65);Jt(a),tlMob[a].to(Gw[a],.2,{left:r,bottom:146,ease:pS.Bin,onStart:function(){Zt(a)}}).to(Gw[a],.2,{left:l,bottom:106,ease:pS.qout,onStart:function(){Zt(a)}}).to(Gw[a],.5,{left:o,bottom:ZS})}return}if(!0===t){cS.delayedCall(.5,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var n=dS.ceil((dS.random()*Pt(a)+Pt(a)/3)*zy.mobDefense(hT));n<.45*Wy[a].level&&(n=dS.ceil(.45*Wy[a].level));Wy[hT].hp-=n,zy.slotDamage(n,hT),fa(Wy[a].name+" kicks "+qD+" for "+n+" damage."),zy.drawMyHp(),!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove());zy.checkForDeadMonsters()}),Wy[a].mp-=2,ai(a);o=152+244*a-Wy[a].imageWidth/2;return Jt(a),hT>a&&tlMob[a].to(Gw[a],.25,{left:"+=50",bottom:"+=50",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:"+=50",bottom:"-=70",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:"-=20",bottom:"-=40"}).to(Gw[a],.3,{left:o,bottom:ZS}),void(hT<a&&tlMob[a].to(Gw[a],.25,{left:"-=50",bottom:"+=50",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:"-=50",bottom:"-=70",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:"+=20",bottom:"-=40"}).to(Gw[a],.3,{left:o,bottom:ZS}))}if(!1===t){Wy[a].mp-=2,ai(a),cS.delayedCall(.5,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus||!0===Wy[a].charmStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var e=dS.ceil(dS.random()*Pt(a)+Pt(a)/3);zy.petPhysical(e,bL,"kicks")}),Jt(a),Ut(a);o=152+244*a-Wy[a].imageWidth/2;return bL>a&&tlMob[a].to(Gw[a],.25,{left:"+=50",bottom:"+=50",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:"+=50",bottom:"-=70",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:"-=20",bottom:"-=40"}).to(Gw[a],.3,{left:o,bottom:ZS}),void(bL<a&&tlMob[a].to(Gw[a],.25,{left:"-=50",bottom:"+=50",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:"-=50",bottom:"-=70",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:"+=20",bottom:"-=40"}).to(Gw[a],.3,{left:o,bottom:ZS}))}if(Wy[a].rootStatus>0)return void ai(a);cS.delayedCall(.4,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus||!0===Wy[a].fallingStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;if(Wy[a].rootStatus>0)return;var e=dS.ceil(dS.random()*Pt(a)+Pt(a)/3);e<.45*Wy[a].level&&(e=dS.ceil(.45*Wy[a].level));ti(e,a,"kicks"),is(a),is(a)}),ai(a),Jt(a),Wy[a].mp-=2;o=152+244*a-Wy[a].imageWidth/2;if(a<=1)var r=dS.round(o+35*dS.random()+15),l=dS.round(o+65*dS.random()+0);else var r=dS.round(o+15*dS.random()-35),l=dS.round(o+65*dS.random()-65);var s=Wy[a].imageWidth/Wy[a].imageBaseX;Wy[a].imageBaseY;tlMob[a].to(Gw[a],.2,{scale:1.1,left:r,bottom:146,ease:pS.Bin,onStart:function(){Zt(a)}}).to(Gw[a],.2,{scale:1.2,left:l,bottom:106,ease:pS.qout,onStart:function(){Zt(a)}}).to(Gw[a],.5,{scale:1,left:o,bottom:ZS},"+=.2")}(a,n,t);if("bash"===r)return void function(a,n,t){if(Wy[a].mp<5)return void Fb(a);if(tlMob[a]=G(),Qa(Wy[a].audio1),!0===n){(s=dS.ceil((dS.random()*Pt(a)+Pt(a)/4)*(1-zD/4/100)))<.55*Wy[a].level&&(s=dS.ceil(.55*Wy[a].level)),s=Nb(s),ND-=s,zy.drawMyHp(),fa(Wy[a].name+" bashes "+qD+" for "+s+" damage."),Qa("flshhit2"),fa(qD+" has been stunned!"),"a fire elemental pet"===PD&&Tb(a),nL=!0,dL.kill(),dL=cS.delayedCall(4,zb);$NG.mob5.stop(!0,!1);if(Wy[5].animateStun.kill(),Wy[5].animateStun=cS.delayedCall(.005,function(){bv(5,4e3)}),Rb(a),Wy[a].mp-=5,ai(a),Jt(a),Wy[a].rootStatus<=0){var i=dS.round(Gw[5].offsetLeft+lL/2),o=152+244*a-Wy[a].imageWidth/2;if(152+244*a-Wy[a].imageWidth/2<i)var r=dS.round(o+35*dS.random()+15),l=dS.round(o+10);else var r=dS.round(o+15*dS.random()-35),l=dS.round(o-10);tlMob[a].to(Gw[a],.15,{left:r,bottom:62,ease:pS.lin}).to(Gw[a],.25,{left:l,bottom:176},"+=.4").to(Gw[a],.25,{left:o,bottom:ZS,ease:pS.Qin})}return}if(!0===t){(s=dS.ceil((dS.random()*Pt(a)+Pt(a)/4)*(1-zD/4/100)))<.55*Wy[a].level&&(s=dS.ceil(.55*Wy[a].level)),Wy[hT].hp-=s,zy.drawMyHp(),fa(Wy[a].name+" bashes "+qD+" for "+s+" damage."),Qa("flshhit2"),ao(hT,4e3,0),bv(hT,4e3),fa(qD+" has been stunned."),Wy[hT].hp-=s,!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove()),Wy[a].mp-=5,ai(a),Jt(a);o=152+244*a-Wy[a].imageWidth/2;return hT>a&&tlMob[a].to(Gw[a],.2,{left:"+=80"}).to(Gw[a],.15,{bottom:"+=20",left:"-=35"},"+=.4").to(Gw[a],.15,{left:"-=15"}).to(Gw[a],.15,{left:o,bottom:ZS}),hT<a&&tlMob[a].to(Gw[a],.2,{left:"-=80"}).to(Gw[a],.15,{bottom:"+=20",left:"+=35"},"+=.4").to(Gw[a],.15,{left:"+=15"}).to(Gw[a],.15,{left:o,bottom:ZS}),void zy.checkForDeadMonsters()}if(!1===t){s=dS.ceil((dS.random()*Pt(a)+Pt(a)/4)*zy.mobDefense(bL));s<.55*Wy[a].level&&(s=dS.ceil(.55*Wy[a].level)),Qa("flshhit2"),ao(bL,4e3,0),bv(bL,4e3),zy.petPhysical(s,bL,"bashes"),fa(Wy[bL].name+" has been stunned."),Wy[a].mp-=5,ai(a),Jt(a),Ut(a);o=152+244*a-Wy[a].imageWidth/2;return bL>a&&tlMob[a].to(Gw[a],.2,{left:"-=80"}).to(Gw[a],.15,{bottom:"+=20",left:"-=35"},"+=.4").to(Gw[a],.15,{left:"-=15"}).to(Gw[a],.15,{left:o,bottom:ZS}),void(bL<a&&tlMob[a].to(Gw[a],.2,{left:"-=80"}).to(Gw[a],.15,{bottom:"+=20",left:"+=35"},"+=.4").to(Gw[a],.15,{left:"+=15"}).to(Gw[a],.15,{left:o,bottom:ZS}))}if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus||!0===Wy[a].frozenStatus||!0===Wy[a].stasisFieldStatus)return void fi(a,0,100);if(Wy[a].rootStatus>0)return void ai(a);var s;(s=dS.ceil(dS.random()*Pt(a)+Pt(a)/4))<.55*Wy[a].level&&(s=dS.ceil(.55*Wy[a].level));var d=ti(s,a,"bashes");if(Yy.hp>0)if("Ogre"===Yy.race);else if(EC<=0&&VB<=0&&!0===d){qC=!0,_w=0,function(){function e(){if(1!==_w){var a=new uS.Bitmap(n);a.set({x:320+320*dS.random()+320*dS.random(),y:50*dS.random()+100,regX:13,regY:13}),Nw[7].addChild(a),cS.to(a,.75,{x:"+="+(20*dS.random()-10),y:-25,ease:pS.Qin,rotation:720*dS.random()-360,onComplete:function(){oy(7,a)}}),cS.to(a,.25,{delay:.35,alpha:0}),$k=cS.delayedCall(.05,e)}}$k.kill(),mv("#fff",.1,.25);var a=new uS.Shape;a.graphics.beginFill("#ffa").setStrokeStyle(1).beginStroke("#000").drawPolyStar(0,0,13,5,.7,0),a.cache(-13,-13,26,26),du(1,4,2,33);var n=a.cacheCanvas;"High"===kw.videoSetting&&e()}(),fa("You have been stunned!"),Qa("flshhit2"),cI.kill(),NG.spellbardiv.style.display="none",sH=1,lH=1;var c=3e3;c*=(100-zy.stunEquip)/100,Ap(),xp(c),YL.kill(),YL=cS.delayedCall(c/1e3,jb);var m=c;ED.kill(),ED=cS.delayedCall(m/1e3,function(){wi("mobBashIcon")}),Hi("Bash","mobBashIcon",m,0)}Wy[a].mp-=5,ai(a),Jt(a);o=152+244*a-Wy[a].imageWidth/2;if(a<=1)var r=dS.round(o+35*dS.random()+15),l=dS.round(o+10);else var r=dS.round(o+15*dS.random()-35),l=dS.round(o-10);tlMob[a].to(Gw[a],.15,{scale:1.3,left:r,bottom:62,ease:pS.lin}).to(Gw[a],.25,{scale:1.1,left:l,bottom:176},"+=.4").to(Gw[a],.25,{scale:1,left:o,bottom:ZS,ease:pS.Qin})}(a,n,t);if("backstab"===r)return void function(a,n,t){if(Wy[a].mp<4)return void Fb(a);if(tlMob[a]=G(),Qa(Wy[a].audio1),!0===n){if(cS.delayedCall(.7,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var e=dS.ceil(dS.random()*Pt(a)/3+Pt(a));e<.75*Wy[a].level&&(e=dS.ceil(.75*Wy[a].level));e=Nb(e),ND-=e,fa(Wy[a].name+" backstabs "+qD+" for "+e+" damage."),Qa("flshhit2"),zy.drawMyHp(),"a fire elemental pet"===PD&&Tb(a);Rb(a)}),ai(a),Wy[a].rootStatus<=0){Wy[a].mp-=4,Jt(a);var i=dS.round(Gw[5].offsetLeft+lL/2),o=152+244*a-Wy[a].imageWidth/2;if(152+244*a-Wy[a].imageWidth/2<i)var r=dS.round(o+80),l=dS.round(o+50*dS.random()+20);else var r=dS.round(o-80),l=dS.round(o+30*dS.random()-70);tlMob[a].to(Gw[a],.15,{left:r,bottom:91,ease:pS.cinout}).to(Gw[a],.15,{left:l,bottom:71}).to(Gw[a],.5,{left:o,bottom:ZS,ease:pS.Qin})}return}if(!0===t){cS.delayedCall(.5,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var n=dS.ceil(dS.random()*Pt(a)/3+Pt(a));n<.75*Wy[a].level&&(n=dS.ceil(.75*Wy[a].level));Wy[hT].hp-=n,zy.slotDamage(n,hT),fa(Wy[a].name+" backstabs "+qD+" for "+n+" damage."),Qa("flshhit2"),zy.drawMyHp(),!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove());zy.checkForDeadMonsters()}),Wy[a].mp-=4,ai(a),Jt(a);o=152+244*a-Wy[a].imageWidth/2;return hT<a&&tlMob[a].to(Gw[a],.3,{bottom:"-=40",left:"-=150",onStart:function(){Zt(a)}}).to(Gw[a],.2,{bottom:"-=60",left:"+=20",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:o,bottom:ZS}),void(hT>a&&tlMob[a].to(Gw[a],.3,{bottom:"-=40",left:"+=150",onStart:function(){Zt(a)}}).to(Gw[a],.2,{bottom:"-=60",left:"-=20",onStart:function(){Zt(a)}}).to(Gw[a],.25,{left:o,bottom:ZS}))}if(!1===t){cS.delayedCall(.5,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var e=dS.ceil(dS.random()*Pt(a)/3+Pt(a));e<.75*Wy[a].level&&(e=dS.ceil(.75*Wy[a].level));zy.petPhysical(e,bL,"backstabs"),Qa("flshhit2")}),Wy[a].mp-=4,ai(a),Jt(a),Ut(a);o=152+244*a-Wy[a].imageWidth/2;return bL<a&&!0===ya()&&tlMob[a].to(Gw[a],.3,{bottom:"-=40",left:"-=150"}).to(Gw[a],.2,{bottom:"-=60",left:"+=20"}).to(Gw[a],.25,{left:o,bottom:ZS}),void(bL>a&&!0===ya()&&tlMob[a].to(Gw[a],.3,{bottom:"-=40",left:"+=150"}).to(Gw[a],.2,{bottom:"-=60",left:"-=20"}).to(Gw[a],.25,{left:o,bottom:ZS}))}if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus||!0===Wy[a].frozenStatus||!0===Wy[a].stasisFieldStatus)return void fi(a,0,100);if(Wy[a].rootStatus>0)return void ai(a);if(cS.delayedCall(.3,function(){if(!0!==Wy[a].stunStatus&&!0!==Wy[a].fearStatus&&!0!==Wy[a].sleepStatus&&!0!==Wy[a].fallingStatus&&!(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus||Wy[a].rootStatus>0)){var e=dS.ceil(dS.random()*Pt(a)/3+Pt(a));e<.75*Wy[a].level&&(e=dS.ceil(.75*Wy[a].level)),ti(e,a,"backstabs"),Qa("flshhit2"),Wy[a].mp-=4,is(a)}}),ai(a),Jt(a),Wy[a].rootStatus<=0&&!0===ya()){o=152+244*a-Wy[a].imageWidth/2;if(a<=1)var r=dS.round(o-100),l=dS.round(o+30*dS.random()+15);else var r=dS.round(o+100),l=dS.round(o+30*dS.random()-15);tlMob[a].to(Gw[a],.15,{scale:1.1,left:r,bottom:91,ease:pS.cinout}).to(Gw[a],.15,{scale:1.2,left:l,bottom:71,ease:pS.cinout}).to(Gw[a],.5,{scale:1,left:o,bottom:ZS,ease:pS.Qin})}}(a,n,t);if("shadow kick"===r)return void function(a,n,t){if(Wy[a].mp<4)return void Fb(a);if(tlMob[a]=G(),tlMobSh[a]=G(),Qa(Wy[a].audio1),!0===n){cS.delayedCall(.6,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var e,n=dS.ceil((dS.random()*(Pt(a)/2)+Pt(a)/1)*(1-zD/4/100));(e=100*dS.random())<15&&(n=dS.ceil(1.5*n));n<.65*Wy[a].level&&(n=dS.ceil(.65*Wy[a].level));n=Nb(n),ND-=n,fa(Wy[a].name+" shadow kicks "+qD+" for "+n+" damage."),Qa("flshhit2"),zy.drawMyHp(),"a fire elemental pet"===PD&&Tb(a);Rb(a)}),Wy[a].mp-=4,ai(a),Jt(a);var i=dS.round(Gw[5].offsetLeft+lL/2),o=152+244*a-Wy[a].imageWidth/2;if(Wy[a].rootStatus<=0){o=152+244*a-Wy[a].imageWidth/2;if(152+244*a-Wy[a].imageWidth/2<i)var r=35*dS.random()+15,l=dS.round(o+r),s=dS.round(o+2*r);else var r=15*dS.random()-35,l=dS.round(o+r),s=dS.round(o+2*r);var d=Wy[a].imageWidth/Wy[a].imageBaseX;Wy[a].imageBaseY;tlMob[a].to(Gw[a],.3,{left:l,bottom:71}).to(Gw[a],.3,{left:s,bottom:62}).to(Gw[a],.5,{left:o,bottom:ZS}),tlMobSh[a].to(Pw[a],.3,{width:"95%",height:42,bottom:-54}).to(Pw[a],.3,{width:"90%",height:46,bottom:-15,ease:pS.Qin}).to(Pw[a],.5,{width:"100%",height:50,bottom:0})}return}if(!0===t){cS.delayedCall(.5,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var n,t=dS.ceil((dS.random()*(Pt(a)/2)+Pt(a)/1)*(1-zD/4/100));(n=100*dS.random())<15&&(t=dS.ceil(1.5*t));t<.65*Wy[a].level&&(t=dS.ceil(.65*Wy[a].level));Wy[hT].hp-=t,zy.slotDamage(t,hT),fa(Wy[a].name+" shadow kicks "+qD+" for "+t+" damage."),Qa("flshhit2"),zy.drawMyHp(),!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove());zy.checkForDeadMonsters()}),Wy[a].mp-=4,ai(a),Jt(a);o=152+244*a-Wy[a].imageWidth/2;return void(hT>a?(tlMob[a].to(Gw[a],.25,{scale:1.15,left:"+=80",bottom:205}).to(Gw[a],.25,{scale:1.3,left:"+=60",bottom:167}).to(Gw[a],.4,{scale:1,left:o,bottom:ZS}),tlMobSh[a].to(Pw[a],.25,{width:"98%",height:45,bottom:-25}).to(Pw[a],.25,{width:"95%",height:48,bottom:-10,ease:pS.Qin}).to(Pw[a],.4,{width:"100%",height:50,bottom:0})):(tlMob[a].to(Gw[a],.25,{scale:1.15,left:"-=80",bottom:205}).to(Gw[a],.25,{scale:1.3,left:"-=60",bottom:167}).to(Gw[a],.4,{scale:1,left:o,bottom:ZS}),tlMobSh[a].to(Pw[a],.25,{width:"98%",height:45,bottom:-25}).to(Pw[a],.25,{width:"95%",height:48,bottom:-10,ease:pS.Qin}).to(Pw[a],.4,{width:"100%",height:50,bottom:0})))}if(!1===t){cS.delayedCall(.5,function(){if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus)return;if(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus)return;var e=dS.ceil(dS.random()*(Pt(a)/2)+Pt(a)/1);100*dS.random()<15&&(e=dS.ceil(1.5*e));zy.petPhysical(e,bL,"shadow kicks"),Qa("flshhit2")}),Wy[a].mp-=4,ai(a),Jt(a),Ut(a);o=152+244*a-Wy[a].imageWidth/2;return void(bL>a&&!0===ya()?(tlMob[a].to(Gw[a],.25,{left:"+=80",bottom:205}).to(Gw[a],.25,{left:"+=60",bottom:167}).to(Gw[a],.4,{left:o,bottom:ZS}),tlMobSh[a].to(Pw[a],.25,{width:"98%",height:45,bottom:-25}).to(Pw[a],.25,{width:"95%",height:48,bottom:-10,ease:pS.Qin}).to(Pw[a],.4,{width:"100%",height:50,bottom:0})):(tlMob[a].to(Gw[a],.25,{left:"-=80",bottom:205}).to(Gw[a],.25,{left:"-=60",bottom:167}).to(Gw[a],.4,{left:o,bottom:ZS}),tlMobSh[a].to(Pw[a],.25,{width:"98%",height:45,bottom:-25}).to(Pw[a],.25,{width:"95%",height:48,bottom:-10,ease:pS.Qin}).to(Pw[a],.4,{width:"100%",height:50,bottom:0})))}if(!0===Wy[a].stunStatus||!0===Wy[a].fearStatus||!0===Wy[a].sleepStatus||!0===Wy[a].frozenStatus||!0===Wy[a].stasisFieldStatus)return void fi(a,0,100);if(Wy[a].rootStatus>0)return void ai(a);if(cS.delayedCall(.4,function(){if(!0!==Wy[a].stunStatus&&!0!==Wy[a].fearStatus&&!0!==Wy[a].sleepStatus&&!0!==Wy[a].fallingStatus&&!(Wy[a].hp<=0||Yy.hp<=0||0!==Wy[a].attackStatus||Wy[a].rootStatus>0)){var e=dS.ceil(dS.random()*(Pt(a)/2)+Pt(a)/1);100*dS.random()<15&&(e=dS.ceil(1.5*e)),e<.65*Wy[a].level&&(e=dS.ceil(.65*Wy[a].level)),ti(e,a,"shadow kicks"),Qa("flshhit2"),Wy[a].mp-=4}}),ai(a),Jt(a),Wy[a].rootStatus<=0){o=152+244*a-Wy[a].imageWidth/2;if(a<=1)var r=35*dS.random()+15,l=dS.round(o+r),s=dS.round(o+2*r);else var r=15*dS.random()-35,l=dS.round(o+r),s=dS.round(o+2*r);tlMob[a].to(Gw[a],.2,{scale:1.15,left:l,bottom:71,onStart:function(){Zt(a)}}).to(Gw[a],.2,{scale:1.3,left:s,bottom:62,ease:pS.Qin,onStart:function(){Zt(a)}}).to(Gw[a],.5,{scale:1,left:o,bottom:ZS}),tlMobSh[a].to(Pw[a],.2,{width:"95%",height:42,bottom:-54}).to(Pw[a],.2,{width:"90%",height:46,bottom:-15,ease:pS.Qin}).to(Pw[a],.5,{width:"100%",height:50,bottom:0})}}(a,n,t)}if(!1===Wy[a].silenced&&!1===Wy[a].flurry){if("poison cloud"===r)!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<3)return void Fb(a);Qa("spellCastEvoke1",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("green",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){function i(e){gv("green",200,a),e<8&&cS.delayedCall(.033,function(){i(++e)})}if(Yy.hp<=0||0!==Wy[a].attackStatus)return;if(Yb(a),!0===n){var o=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-YD/4/100));o<=0&&(o=1),ND-=o,zy.drawMyHp(),fa(Wy[a].name+" casts Poison Cloud on "+qD+" for "+o+" damage.",3),Qa("spellDoneBoom"),Rb(a),Wy[a].mp-=3,Wy[a].castingStatus=!1;return void gv("green",Wy[a].imageHeight/2,a,void 0,void 0,!0)}if(!0===t)return Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("green",Wy[a].imageHeight/2,a,!0),void cS.delayedCall(.4,function(){!function(a){if(Wy[hT].hp<=0||0!==Wy[a].attackStatus)return;var n=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[hT].poison/4/100));n<=0&&(n=1);Wy[hT].hp-=n,zy.drawMyHp(),fa(Wy[a].name+" casts Poison Cloud on "+Wy[hT].name+" for "+n+" damage.",3),zy.slotDamage(n,hT),Qa("spellDoneBoom"),!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove());zy.checkForDeadMonsters()}(a)});if(!1===t){var r=bL;if(Wy[a].castingStatus=!1,hT===r)return;return Wy[a].mp-=3,gv("green",Wy[a].imageHeight/2,a,!0,r),void cS.delayedCall(.4,function(){!function(a,n){if(Wy[n].hp<=0||0!==Wy[n].attackStatus)return;var t=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[n].poison/4/100));t<=0&&(t=1);Wy[n].hp-=t,zy.drawMonsterHp(n),fa(Wy[a].name+" casts Poison Cloud on "+Wy[n].name+" for "+t+" damage.",3),Qa("spellDoneBoom"),zy.slotDamage(t,n),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+a).remove());zy.checkForDeadMonsters()}(a,r)})}Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("green",Wy[a].imageHeight/2,a),mv("#32cd32",.3,.5,!0),cS.delayedCall(.5,function(){!function(e){if(!(Yy.hp<=0||0!==fk)){var a=dS.ceil(yc(2*Wy[e].intel,.8)*(1-ce()/4/100));a<=0&&(a=1),ii(a,e,"Poison Cloud","Poison"),Qa("spellDoneBoom")}}(a)}),"Falzitherin"===Wy[a].name&&i(0)}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t);else if("smite"===r)!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<3)return void Fb(a);Qa("spellCastEvoke2",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("magenta",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){function i(e){if(!(Yy.hp<=0||0!==fk)){var a=dS.ceil(yc(2*Wy[e].intel,.8)*(1-me()/4/100));a<=0&&(a=1);ii(a,e,"Smite","Magic"),Qa("spellDoneFlames")}}if(Yy.hp<=0||0!==fk)return;if(Yb(a),!0===n){var o=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-KD/4/100));o<=0&&(o=1),ND-=o,zy.drawMyHp(),fa(Wy[a].name+" casts Smite on "+qD+" for "+o+" damage.",3),Qa("spellDoneFlames"),Rb(a),Wy[a].mp-=3,Wy[a].castingStatus=!1;return void gv("magenta",Wy[a].imageHeight/2,a,void 0,void 0,!0)}if(!0===t)return Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("magenta",Wy[a].imageHeight/2,a,!0),void cS.delayedCall(.4,function(){!function(a){if(Wy[hT].hp<=0||0!==fk)return;var n=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[hT].magic/4/100));n<=0&&(n=1);Wy[hT].hp-=n,zy.drawMyHp(),fa(Wy[a].name+" casts Smite on "+Wy[hT].name+" for "+n+" damage.",3),zy.slotDamage(n,hT),Qa("spellDoneFlames"),!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove());zy.checkForDeadMonsters()}(a)});if(!1===t){var r=bL;if(Wy[a].castingStatus=!1,hT===r)return;return Wy[a].mp-=3,gv("magenta",Wy[a].imageHeight/2,a,!0,r),void cS.delayedCall(.4,function(){!function(a,n){if(Wy[n].hp<=0||0!==fk)return;var t=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[n].magic/4/100));t<=0&&(t=1);Wy[n].hp-=t,zy.drawMonsterHp(n),fa(Wy[a].name+" casts Smite on "+Wy[n].name+" for "+t+" damage.",3),zy.slotDamage(t,n),Qa("spellDoneFlames"),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+a).remove());zy.checkForDeadMonsters()}(a,r)})}Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("magenta",Wy[a].imageHeight/2,a),mv("#ff00ff",.3,.5,!0),cS.delayedCall(.5,function(){i(a)})}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t);else if("energy bolt"===r)!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<3)return void Fb(a);Qa("spellCastEvoke2",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("yellow",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){function i(e){if(!(Yy.hp<=0||0!==fk)){var a=dS.ceil(yc(2*Wy[e].intel,.8)*(1-ue()/4/100));a<=0&&(a=1);ii(a,e,"Energy Bolt","Lightning"),Qa("spellDoneFlames")}}if(Yy.hp<=0||0!==fk)return;if(Yb(a),!0===n){var o=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-WD/4/100));o<=0&&(o=1),ND-=o,zy.drawMyHp(),fa(Wy[a].name+" casts Energy Bolt on "+qD+" for "+o+" damage.",3),Qa("spellDoneFlames"),Rb(a),Wy[a].mp-=3,Wy[a].castingStatus=!1;return void gv("yellow",Wy[a].imageHeight/2,a,void 0,void 0,!0)}if(!0===t)return Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("yellow",Wy[a].imageHeight/2,a,!0),void cS.delayedCall(.4,function(){!function(a){if(Wy[hT].hp<=0||0!==fk)return;var n=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[hT].lightning/4/100));n<=0&&(n=1);Wy[hT].hp-=n,zy.drawMyHp(),fa(Wy[a].name+" casts Energy Bolt on "+Wy[hT].name+" for "+n+" damage.",3),Qa("spellDoneFlames"),zy.slotDamage(n,hT),!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove());zy.checkForDeadMonsters()}(a)});if(!1===t){var r=bL;if(Wy[a].castingStatus=!1,hT===r)return;return Wy[a].mp-=3,gv("yellow",Wy[a].imageHeight/2,a,!0,r),void cS.delayedCall(.4,function(){!function(a,n){if(Wy[n].hp<=0||0!==fk)return;var t=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[n].lightning/4/100));t<=0&&(t=1);Wy[n].hp-=t,zy.drawMonsterHp(n),fa(Wy[a].name+" casts Energy Bolt on "+Wy[n].name+" for "+t+" damage.",3),Qa("spellDoneFlames"),zy.slotDamage(t,n),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+a).remove());zy.checkForDeadMonsters()}(a,r)})}3===Wy[a].rare?Wy[a].mp-=2:Wy[a].mp-=3;Wy[a].castingStatus=!1,gv("yellow",Wy[a].imageHeight/2,a),mv("#ffd700",.3,.5,!0),cS.delayedCall(.5,function(){i(a)})}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t);else if("ice shard"===r)!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<3)return void Fb(a);Qa("spellCastEvoke1",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("teal",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){function i(e){gv("blue",200,a),e<8&&cS.delayedCall(.033,function(){i(++e)})}if(Yy.hp<=0||0!==fk)return;if(Yb(a),!0===n){var o=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-XD/4/100));o<=0&&(o=1),ND-=o,zy.drawMyHp(),fa(Wy[a].name+" casts Ice Shard on "+qD+" for "+o+" damage.",3),Qa("spellDoneBoom"),Rb(a),Wy[a].mp-=3,Wy[a].castingStatus=!1;return void gv("blue",Wy[a].imageHeight/2,a,void 0,void 0,!0)}if(!0===t)return Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("blue",Wy[a].imageHeight/2,a,!0),void cS.delayedCall(function(){!function(a){if(Wy[hT].hp<=0||0!==fk)return;var n=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[hT].cold/4/100));n<=0&&(n=1);Wy[hT].hp-=n,zy.drawMyHp(),fa(Wy[a].name+" casts Ice Shard on "+Wy[hT].name+" for "+n+" damage.",3),zy.slotDamage(n,hT),Qa("spellDoneBoom"),!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove());zy.checkForDeadMonsters()}(a)});if(!1===t){var r=bL;if(Wy[a].castingStatus=!1,hT===r)return;return Wy[a].mp-=3,gv("blue",Wy[a].imageHeight/2,a,!0,r),void cS.delayedCall(.4,function(){!function(a,n){if(Wy[n].hp<=0||0!==fk)return;var t=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[n].cold/4/100));t<=0&&(t=1);Wy[n].hp-=t,zy.drawMonsterHp(n),fa(Wy[a].name+" casts Ice Shard on "+Wy[n].name+" for "+t+" damage.",3),zy.slotDamage(t,n),Qa("spellDoneBoom"),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+a).remove());zy.checkForDeadMonsters()}(a,r)})}Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("blue",Wy[a].imageHeight/2,a),mv("#00ced1",.3,.5,!0),cS.delayedCall(.5,function(){!function(e){if(!(Yy.hp<=0||0!==fk)){var a=dS.ceil(yc(2*Wy[e].intel,.8)*(1-fe()/4/100));a<=0&&(a=1);var n="Ice Shard";"Matron Maelentia"===Wy[e].name&&(n="Dragon's Ice Breath"),ii(a,e,n,"Cold"),Qa("spellDoneBoom")}}(a)}),"Matron Maelentia"===Wy[a].name&&i(0)}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t);else if("fireball"===r)!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<3)return void Fb(a);Qa("spellCastEvoke1",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("orange",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){function i(e){gv("red",200,a),e<8&&cS.delayedCall(.033,function(){i(++e)})}if(Yy.hp<=0||0!==fk)return;if(Yb(a),!0===n){var o=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-OD/4/100));o<=0&&(o=1),ND-=o,zy.drawMyHp(),fa(Wy[a].name+" casts Fireball on "+qD+" for "+o+" damage.",3),Qa("spellDoneBoom"),Rb(a),Wy[a].mp-=3,Wy[a].castingStatus=!1;return void gv("red",Wy[a].imageHeight/2,a,void 0,void 0,!0)}if(!0===t)return Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("red",Wy[a].imageHeight/2,a,!0),void cS.delayedCall(.4,function(){!function(a){if(Wy[hT].hp<=0||0!==fk)return;var n=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[hT].fire/4/100));n<=0&&(n=1);Wy[hT].hp-=n,zy.drawMyHp(),fa(Wy[a].name+" casts Fireball on "+Wy[hT].name+" for "+n+" damage.",3),zy.slotDamage(n,hT),Qa("spellDoneBoom"),!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove());zy.checkForDeadMonsters()}(a)});if(!1===t){var r=bL;if(Wy[a].castingStatus=!1,hT===r)return;return Wy[a].mp-=3,gv("red",Wy[a].imageHeight/2,a,!0,r),void cS.delayedCall(.4,function(){!function(a,n){if(Wy[n].hp<=0||0!==fk)return;var t=dS.ceil((dS.random()*Wy[a].intel+Wy[a].intel/2+Wy[a].level)*(1-Wy[n].fire/4/100));t<=0&&(t=1);Wy[n].hp-=t,zy.drawMonsterHp(n),fa(Wy[a].name+" casts Fireball on "+Wy[n].name+" for "+t+" damage.",3),zy.slotDamage(t,n),Qa("spellDoneBoom"),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+a).remove());zy.checkForDeadMonsters()}(a,r)})}Wy[a].mp-=3,Wy[a].castingStatus=!1,gv("red",Wy[a].imageHeight/2,a),mv("#d00",.3,.5,!0),cS.delayedCall(.5,function(){!function(e){if(!(Yy.hp<=0||0!==fk)){var a=dS.ceil(yc(2*Wy[e].intel,.8)*(1-he()/4/100));a<=0&&(a=1);var n="Fireball";"Highlord Szarthax"===Wy[e].name&&(n="Dragon's Lava Bolt"),ii(a,e,n,"Fire"),Qa("spellDoneBoom")}}(a)}),"Highlord Szarthax"===Wy[a].name&&i(0)}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t);else if("fear"===r){if(0===Vw||Wy[a].level<20)return void i();if(!0===t&&!0===Wy[hT].fearStatus)return void i();!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<8)return void Fb(a);fa(Wy[a].name+" begins to cast a spell",3),Qa("spellDoneFlames",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("purple",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){if(Yy.hp<=0||0!==fk)return;Yb(a),Qa("spellCastEvoke2");var i=12e3-50*me()*(2*dS.random()+1);i>=12e3&&(i=12e3);i<1e3&&(i=1e3);i*=(100-zy.fearEquip)/100,3!==Wy[a].rare?Wy[a].mp-=8:Wy[a].mp-=2;if(Wy[a].castingStatus=!1,!0===n)return!0===ec(a)?void fa(qD+" resisted Fear.",1):(fa(qD+" is consumed by fear.",3),tL=!0,e("#fearIcon5").remove(),Wy[a].fearAnimate.kill(),$NG.mob5.stop(!0,!1),cL.kill(),cL=cS.delayedCall(i/1e3,function(){tL=!1}),void yv(5,i,!0,.8));if(!0===t)return!0===ec(a)?void fa(Wy[hT].name+" resisted Fear.",1):void tc(hT,i,0,Wy[hT].name+" is consumed by fear.");if(!1===t){if(bL===hT)return;return dS.random()>.95?void fa(Wy[bL].name+" resisted Fear.",1):void tc(bL,i,0,Wy[bL].name+" is consumed by fear.")}if(0===bC)return bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove(),void fa("You absorb Fear.",3);if(!0===ec(a)||"Monk"===Yy.job&&Yy.talent12>=20||"Necromancer"===Yy.job&&Yy.talent4>=20)return void fa("You resisted Fear.",1);if(!0===DC)return void fa("Fear has no effect on you.",1);fa("You are consumed by fear.",3),mv("#4b0082",.5,3);wD.kill(),wD=cS.delayedCall(i/1e3,function(){wi("mobFearIcon")}),Hi("Fear","mobFearIcon",i,-32),qC=!0,Vw=0,Vo(),Ap(),xp(i),cI.kill(),NG.spellbardiv.style.display="none",sH=1,lH=1,"Warrior"===Yy.job&&zy.checkWarriorSkills();KL.kill(),KL=cS.delayedCall(i/1e3,function(){Vw=1,"Warrior"===Yy.job&&Vo(),"Rogue"===Yy.job&&(qC=!1),zy.drawMyMp()}),"Shaman"===Yy.job&&Yy.talent5>=20&&zy.glacialImpactFinish(a,!0)}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t)}else if("blind"===r){if(0===zy.blindStatus&&!1===n&&!1===t)return void i();!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<4)return void Fb(a);fa(Wy[a].name+" begins to cast a spell",3),Qa("spellCastDot",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("black",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){if(Yy.hp<=0||0!==fk)return;Yb(a),Qa("spellDoneHeal");var i=15e3-15e3*dS.random()*(1-me()/400);i<3e3&&(i=3e3);if(Wy[a].mp-=4,Wy[a].castingStatus=!1,!0===n)return!0===ec(a)?void fa(qD+" resisted Globe of Darkness.",1):(fa(qD+" is shrouded in a Globe of Darkness.",3),iL=!0,mL.kill(),void(mL=cS.delayedCall(i/1e3,Jb)));if(!0===t){if(!0===ec(a))return void fa(Wy[hT].name+" resisted Globe of Darkness.",1);fa(Wy[hT].name+" is shrouded in a Globe of Darkness.",3);var o="Globe of Darkness",r="mobGlobeOfDarknessIcon"+hT,l=i;mobGlobeOfDarknessTimers[hT].kill(),mobGlobeOfDarknessTimers[hT]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-64,hT),Wy[hT].dazeStatus=!0;s=!0;return Wy[hT].dazeTimer.kill(),void(Wy[hT].dazeTimer=cS.delayedCall(i/1e3,function(){Zb(hT,s)}))}if(!1===t){if(bL===hT)return;if(dS.random()>.95)return void fa(Wy[bL].name+" resisted Globe of Darkness.",1);fa(Wy[bL].name+" is shrouded in a Globe of Darkness.",3);var o="Globe of Darkness",r="mobGlobeOfDarknessIcon"+bL,l=i;mobGlobeOfDarknessTimers[bL].kill(),mobGlobeOfDarknessTimers[bL]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-64,bL),Wy[bL].dazeStatus=!0;var s=!0;return Wy[bL].dazeTimer.kill(),void(Wy[bL].dazeTimer=cS.delayedCall(i/1e3,function(){Zb(bL,s)}))}if(0===bC)return bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove(),void fa("You absorb Globe of Darkness.",3);if(!0===ec(a))return void fa("You resisted Globe of Darkness.",1);if(!0===DC)return void fa("Globe of Darkness has no effect on you.",1);$NG.spellblind.stop(!0,!0).css({background:"#000",opacity:.6}),fa("You are shrouded in a Globe of Darkness.",3);var o="Globe of Darkness",r="mobGlobeOfDarknessIcon",l=i;CD.kill(),CD=cS.delayedCall(l/1e3,function(){wi(r)}),Hi(o,r,l,-64),zy.blindStatus=0,WL.kill(),WL=cS.delayedCall(i/1e3,Ub)}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t)}else if("root"===r){if(0===Xw)return void i();if(!0===t||!1===t)return void i();!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<4)return void Fb(a);fa(Wy[a].name+" begins to cast a spell",3),Qa("spellCastAbjure",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("green",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){if(Yy.hp<=0||0!==fk)return;Yb(a),Qa("spellDoneHeal");var i=2e4-50*me()*(2*dS.random()+1);i<5e3&&(i=5e3);if(Wy[a].mp-=4,Wy[a].castingStatus=!1,!0===n)return"Magician"===Yy.job?void fa(qD+" is immune to Root.",1):!0===ec(a)?void fa(qD+" resisted Root.",1):(fa(qD+" has been rooted.",3),oL=!0,uL.kill(),void(uL=cS.delayedCall(i/1e3,av)));if(0===bC)return bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove(),void fa("You absorb Root.",3);if(!0===ec(a))return void fa("You resisted Root.",1);if(!0===DC)return void fa("Root has no effect on you.",1);fa("Your legs are entangled by roots.",3);var o=i;MD.kill(),MD=cS.delayedCall(o/1e3,function(){wi("mobRootIcon")}),Hi("Root","mobRootIcon",o,-96),mv("#008000",.3,.5),Xw=0,"Warrior"===Yy.job&&Vo();"Rogue"===Yy.job&&(qC=!0,zy.checkRogueSkills());OL.kill(),OL=cS.delayedCall(i/1e3,ev)}(a,n)}),fi(a,0,ov(Kb(a),a)))}(a,n)}else if("yawn"===r){if(0===Ow&&!1===n&&!1===t)return void i();!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<4)return void Fb(a);Qa("spellCastDot",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("white",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){if(Yy.hp<=0||0!==fk)return;Yb(a),Qa("spellDoneHeal");var i=24e3-50*me()*(2*dS.random()+1);i<6e3&&(i=6e3);if(Wy[a].mp-=4,Wy[a].castingStatus=!1,!0===n)return void fa(qD+" is immune to Yawn.");if(!0===t){if(!0===ec(a))return void fa(Wy[hT].name+" resisted Yawn.",1);fa(Wy[hT].name+" yawns.",3);var o="Yawn",r="mobYawnIcon"+hT,l=i;return mobYawnTimers[hT].kill(),mobYawnTimers[hT]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-128,hT),Wy[hT].speed+=1e3,void(Wy[hT].speed>6e3&&(Wy[hT].speed=6e3))}if(!1===t){if(bL===hT)return;if(dS.random()>.95)return void fa(Wy[bL].name+" resisted Yawn.",1);fa(Wy[bL].name+" yawns.",3);var o="Yawn",r="mobYawnIcon"+bL,l=i;return mobYawnTimers[bL].kill(),mobYawnTimers[bL]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-128,bL),Wy[bL].speed+=1e3,void(Wy[bL].speed>6e3&&(Wy[bL].speed=6e3))}if(0===bC)return bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove(),void fa("You absorb Yawn.",3);if(!0===ec(a))return void fa("You resisted Yawn.",1);if(!0===DC)return void fa("Yawn has no effect on you.",1);fa("You feel drowsy.",3);var o="Yawn",r="mobYawnIcon",l=i;LD.kill(),LD=cS.delayedCall(l/1e3,function(){wi(r)}),Hi(o,r,l,-128),0===Ow&&(tk-=400);Ow=0,mv("#fff5ee",.4,2),tk+=400,XL.kill(),XL=cS.delayedCall(i/1e3,iv)}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t)}else if("weaken"===r){if(0===ZL&&!1===n&&!1===t)return void i();!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<4)return void Fb(a);fa(Wy[a].name+" begins to cast a spell",3),Qa("spellCastDot",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("purple",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){if(Yy.hp<=0||0!==fk)return;Yb(a),Qa("spellDoneHeal");var i=3e4-50*me()*(2*dS.random()+1);i<8e3&&(i=12e3);if(Wy[a].mp-=4,Wy[a].castingStatus=!1,!0===n)return void fa(qD+" is immune to Weaken.");if(!0===t){if(!0===ec(a))return void fa(Wy[hT].name+" resisted Weaken.",1);fa(Wy[hT].name+" feels weak and clumsy.",3);var o="Weaken",r="mobWeakenIcon"+hT,l=i;return mobWeakenTimers[hT].kill(),mobWeakenTimers[hT]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-160,hT),void(Wy[hT].weaken=!0)}if(!1===t){if(bL===hT)return;if(dS.random()>.95)return void fa(Wy[bL].name+" resisted Weaken.",1);fa(Wy[bL].name+" feels weak and clumsy.",3);var o="Weaken",r="mobWeakenIcon"+bL,l=i;return mobWeakenTimers[bL].kill(),mobWeakenTimers[bL]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-160,bL),void(Wy[bL].weaken=!0)}if(0===bC)return bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove(),void fa("You absorb Weaken.",3);if(!0===ec(a))return void fa("You resisted Weaken.",1);if(!0===DC)return void fa("Weaken has no effect on you.",1);fa("Your feel weak and clumsy.",3),fa("Your mind is numbed.",3);var o="Weaken",r="mobWeakenIcon",l=i;DD.kill(),DD=cS.delayedCall(l/1e3,function(){wi(r)}),Hi(o,r,l,-160),mv("#c71585",.4,2),0===ZL&&(Oy+=kL,$y+=SL);ZL=0,kL=dS.ceil(.75*Wy[a].level),SL=dS.ceil(.75*Wy[a].level),Oy-=kL,$y-=SL,ny(),UL.kill(),UL=cS.delayedCall(i/1e3,function(){ZL=1,Oy+=kL,$y+=SL,ny()})}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t)}else if("mind drain"===r)!function(a,n,t){if(Wy[a].mp<4)return void Fb(a);fa(Wy[a].name+" begins to cast a spell",3),Qa("spellCastDot",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("orange",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Yb(a),Qa("spellDoneHeal"),Wy[a].mp-=4,Wy[a].castingStatus=!1,!0===n)return void fa(qD+" is immune to Mind Drain.");if(!0===t)return!0===ec(a)?void fa(Wy[hT].name+" resisted Mind Drain.",1):(fa(Wy[hT].name+"'s mind has been drained.",3),Wy[hT].mp-=10,void(Wy[hT].mp<0&&(Wy[hT].mp=0)));if(!1===t){if(bL===hT)return;return dS.random()>.95?void fa(Wy[bL].name+" resisted Mind Drain.",1):(fa(Wy[bL].name+"'s mind has been drained.",3),Wy[bL].mp-=10,void(Wy[bL].mp<0&&(Wy[bL].mp=0)))}if(0===bC)return bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove(),void fa("You absorb Mind Drain.",3);if(!0===ec(a))return void fa("You resisted Mind Drain.",1);if(!0===DC)return void fa("Mind Drain has no effect on you.",1);fa("Your mind is drained.",3),mv("#ffa500",.4,1),"Warrior"!==Yy.job&&"Monk"!==Yy.job&&"Rogue"!==Yy.job&&(Yy.mp-=dS.ceil(1.5*Wy[a].level),Yy.mp<0&&(Yy.mp=0));zy.drawMyMp(),ny()}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t);else if("confuse"===r){if(!0===aH)return void i();!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<4)return void Fb(a);fa(Wy[a].name+" begins to cast a spell",3),Qa("spellCastDot",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("red",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){if(Yy.hp<=0||0!==fk)return;Yb(a),Qa("spellDoneHeal");var i=18e3-50*me()*(2*dS.random()+1);i<5e3&&(i=5e3);if(Wy[a].mp-=4,Wy[a].castingStatus=!1,!0===n)return!0===ec(a)?void fa(qD+" resisted Confuse.",1):void fa(qD+" is immune to Confuse.");if(!0===t)return!0===ec(a)?void fa(Wy[hT].name+" resisted Confuse.",1):void fa(Wy[hT].name+" is immune to Confuse.",3);if(!1===t){if(bL===hT)return;return dS.random()>.95?void fa(Wy[bL].name+" resisted Confuse.",1):void fa(Wy[bL].name+" is immune to Confuse.",3)}if(0===bC)return bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove(),void fa("You absorb Confuse.",3);if(!0===ec(a))return void fa("You resisted Confuse.",1);if(!0===DC)return void fa("Confuse has no effect on you.",1);fa("You are confused and attack at random.",3),mv("#da70d6",.4,2);var o=i;TD.kill(),TD=cS.delayedCall(o/1e3,function(){wi("mobConfuseIcon")}),Hi("Confuse","mobConfuseIcon",o,-192),aH=!0,VL.kill(),VL=cS.to("",.5,{repeat:-1,onRepeat:tv}),_L.kill(),_L=cS.delayedCall(i/1e3,nv)}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t)}else if("mind numb"===r){if(0===JL&&!1===n&&!1===t)return void i();!function(a,n,t){if(Yy.hp<=0||0!==fk)return;if(Wy[a].mp<4)return void Fb(a);fa(Wy[a].name+" begins to cast a spell",3),Qa("spellCastDot",0,0,.5),!0===ya()&&(Wy[a].castingStatus=!0,fv("orange",25,a,Kb(a)/1e3),Wy[a].spellActive=cS.delayedCall(Kb(a)/1e3,function(){!function(a,n,t){if(Yy.hp<=0||0!==fk)return;Yb(a),Qa("spellDoneHeal");var i=3e4-50*me()*(2*dS.random()+1);i<8e3&&(i=12e3);if(Wy[a].mp-=4,Wy[a].castingStatus=!1,!0===n)return void fa(qD+" is immune to Mind Numb.");if(!0===t){if(!0===ec(a))return void fa(Wy[hT].name+" resisted Mind Numb.",1);fa(Wy[hT].name+"'s mind is numbed.",3);var o="Mind Numb",r="mobMindNumbIcon"+hT,l=i;return mobMindNumbTimers[hT].kill(),mobMindNumbTimers[hT]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-224,hT),Wy[hT].intel-=dS.ceil(Wy[hT].intel/5),void(Wy[hT].intel<0&&(Wy[hT].intel=0))}if(!1===t){if(bL===hT)return;if(dS.random()>.95)return void fa(Wy[bL].name+" resisted Mind Numb.",1);fa(Wy[bL].name+"'s mind is numbed.",3);var o="Mind Numb",r="mobMindNumbIcon"+bL,l=i;return mobMindNumbTimers[bL].kill(),mobMindNumbTimers[bL]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-224,bL),Wy[bL].intel-=dS.ceil(Wy[bL].intel/5),void(Wy[bL].intel<0&&(Wy[bL].intel=0))}if(0===bC)return bC=1,e("#absorbSpellIcon,#spellAbsorbImage").remove(),void fa("You absorb Mind Numb.",3);if(!0===ec(a))return void fa("You resisted Mind Numb.",1);if(!0===DC)return void fa("Mind Numb has no effect on you.",1);fa("Your mind is numbed.",3);var o="Mind Numb",r="mobMindNumbIcon",l=i;BD.kill(),BD=cS.delayedCall(l/1e3,function(){wi(r)}),Hi(o,r,l,-224),mv("#000082",.4,2),0===JL&&(Vy+=vL,_y+=yL);JL=0,vL=dS.ceil(.75*Wy[a].level),yL=dS.ceil(.75*Wy[a].level),Vy-=vL,_y-=yL,ny(),$L.kill(),$L=cS.delayedCall(i/1e3,function(){JL=1,Vy+=vL,_y+=yL,ny()})}(a,n,t)}),fi(a,0,ov(Kb(a),a)))}(a,n,t)}else if("heal"===r){var l=-1;if(Wy[a].hp/Wy[a].maxHp<.65)l=a;else if(!1===Wy[a].charmStatus)for(var s=0;s<=4;s++)Wy[s].name&&s!==a&&Wy[s].hp/Wy[s].maxHp<.45&&(l=s);if(-1===l)return void i();!function(e,a){if(Wy[e].mp<4)return void Fb(e);fa(Wy[e].name+" begins to cast a spell",3),Qa("spellCastHeal",0,0,.5),!0===ya()&&(Wy[e].castingStatus=!0,fv("teal",25,e,1.25*Kb(e)/1e3),Wy[e].spellActive=cS.delayedCall(1.25*Kb(e)/1e3,function(){!function(e,a){if(Yb(e),Qa("spellDoneHeal",0,0,.5),!Wy[a].name)return;if(Yy.hp<=0||0!==fk)return;fa(Wy[a].name+" feels much better.",3),Wy[e].mp-=4,Wy[e].castingStatus=!1;var n=yc(Wy[e].maxHp/4,.85);!0===Wy[e].ampMagicStatus&&(n=dS.ceil(n+.5*n));Wy[a].hp+=n,zy.popupHealSlot(n,a),Wy[a].hp>Wy[a].maxHp&&(Wy[a].hp=Wy[a].maxHp);zy.drawMonsterHp(a)}(e,a)}),fi(e,0,1.25*Kb(e)+1500))}(a,l)}else if("envenom"===r){if(Wy[a].envenomTicks>0)return void i();!function(e,a,n){if(Yy.hp<=0||0!==fk)return;if(Wy[e].mp<4)return void Fb(e);Qa("spellCastDot",0,0,.5),Wy[e].castingStatus=!0,uv("green",25,e),Wy[e].spellActive=cS.delayedCall(Kb(e)/1e3,function(){!function(e,a,n){function t(a){gv("green",320,e,E,E,E,1),a<20&&cS.delayedCall(.01,function(){t(++a)})}if(Yy.hp<=0||0!==fk)return;Yb(e),Qa("spellDoneBoom");var i=dS.ceil(dS.random()*(Wy[e].intel/9)+Wy[e].intel/9/2+Wy[e].level/2);if(!0===a)return Wy[e].castingStatus=!1,fa(qD+" is wrought by venom.",3),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].envenomTicks=8,Wy[e].dotDamage=i,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Ob(e,a,n)}}),Wy[e].petDot=!0,pv("green",25,40,e,hT,a)));if(!0===n){Wy[e].castingStatus=!1,fa(Wy[hT].name+" is wrought by venom.",3);var o="Envenom",r="mobsEnvenomIcon"+hT,l=24e3;mobsEnvenomTimer[hT].kill(),mobsEnvenomTimer[hT]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-256,hT);var o="Envenom",r="mobEnvenomIcon",l=2400;return void(!0===ya()&&(Wy[e].mp-=4,Wy[e].envenomTicks=8,Wy[e].dotDamage=i,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Ob(e,a,n)}}),Wy[e].petDot=!0,pv("green",25,40,e,n)))}if(!1===n){if(Wy[e].castingStatus=!1,bL===hT)return;fa(Wy[bL].name+" is wrought by venom.",3);var o="Envenom",r="mobsEnvenomIcon"+bL,l=24e3;if(mobsEnvenomTimer[bL].kill(),mobsEnvenomTimer[bL]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-256,bL),!0===ya()){Wy[e].mp-=4,Wy[e].envenomTicks=8,Wy[e].dotDamage=i,Wy[e].dotActive.kill();var s=bL;Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Ob(e,a,n,s)}}),Wy[e].petDot=!0,pv("green",25,40,e,s)}return}i<=0&&(i=1);if(fa("You are wrought by venom.",3),mv("#6b8e23",.4,1),Wy[e].castingStatus=!1,!0===ya()){Wy[e].mp-=4,Wy[e].envenomTicks=8,Wy[e].dotDamage=i,"Falzitherin"===Wy[e].name&&(Wy[e].envenomTicks*=3,Wy[e].dotDamage*=2),"a slavering corpse"!==Wy[e].name&&"an embalmed vagrant"!==Wy[e].name&&"an infected rodent"!==Wy[e].name||(Wy[e].envenomTicks*=4),Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Ob(e,a,n)}});l=3e3*Wy[e].envenomTicks;mobEnvenomTimer[e].kill(),mobEnvenomTimer[e]=cS.delayedCall(l/1e3,function(){wi("mobEnvenomIcon"+e)}),Hi("Envenom","mobEnvenomIcon"+e,l,-256)}li(i,e,"Envenom"),"Falzitherin"===Wy[e].name?t(0):pv("green",25,40,e)}(e,a,n)}),fi(e,0,ov(Kb(e),e))}(a,n,t)}else if("engulfing darkness"===r){if(Wy[a].engulfingDarknessTicks>0)return void i();!function(e,a,n){if(Yy.hp<=0||0!==fk)return;if(Wy[e].mp<4)return void Fb(e);Qa("spellCastDot",0,0,.5),Wy[e].castingStatus=!0,uv("magenta",25,e),Wy[e].spellActive=cS.delayedCall(Kb(e)/1e3,function(){!function(e,a,n){if(Yy.hp<=0||0!==fk)return;Yb(e),Qa("spellDoneHeal");var t=dS.ceil(dS.random()*(Wy[e].intel/12)+Wy[e].intel/12/2+Wy[e].level/1.5);if(!0===a)return fa(qD+" is engulfed in darkness.",3),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].engulfingDarknessTicks=6,Wy[e].dotDamage=t,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Xb(e,a,n)}}),Wy[e].petDot=!0,pv("purple",25,40,e,hT,a)));if(!0===n){fa(Wy[hT].name+" is engulfed in darkness.",3);var i="Engulfing Darkness",o="mobsEngulfingDarknessIcon"+hT,r=18e3;return mobsEngulfingDarknessTimer[hT].kill(),mobsEngulfingDarknessTimer[hT]=cS.delayedCall(r/1e3,function(){wi(o)}),Ai(i,o,r,-288,hT),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].engulfingDarknessTicks=6,Wy[e].dotDamage=t,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Xb(e,a,n)}}),Wy[e].petDot=!0,pv("purple",25,40,e,n)))}if(!1===n){if(Wy[e].castingStatus=!1,bL===hT)return;fa(Wy[bL].name+" is engulfed in darkness.",3);var i="Engulfing Darkness",o="mobsEngulfingDarknessIcon"+bL,r=18e3;if(mobsEngulfingDarknessTimer[bL].kill(),mobsEngulfingDarknessTimer[bL]=cS.delayedCall(r/1e3,function(){wi(o)}),Ai(i,o,r,-288,bL),!0===ya()){Wy[e].mp-=4,Wy[e].engulfingDarknessTicks=6,Wy[e].dotDamage=t,Wy[e].dotActive.kill();var l=bL;Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Xb(e,a,n,l)}}),Wy[e].petDot=!0,pv("purple",25,40,e,l)}return}t<=0&&(t=1);if(fa("You are engulfed in darkness.",3),mv("#c71585",.4,1),pv("purple",25,40,e),!0===ya()){Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].engulfingDarknessTicks=6,Wy[e].dotDamage=t,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Xb(e,a,n)}}),"Sanctum Guardian Ghalentus"===Wy[e].name&&(Wy[e].engulfingDarknessTicks*=3,Wy[e].dotDamage*=2),"Revenant Viston"===Wy[e].name&&(Wy[e].engulfingDarknessTicks*=2);r=3e3*Wy[e].engulfingDarknessTicks;mobEngulfingDarknessTimer[e].kill(),mobEngulfingDarknessTimer[e]=cS.delayedCall(r/1e3,function(){wi("mobEngulfingDarknessIcon"+e)}),Hi("Engulfing Darkness","mobEngulfingDarknessIcon"+e,r,-288)}li(t,e,"Engulfing Darkness")}(e,a,n)}),fi(e,0,ov(Kb(e),e))}(a,n,t)}else if("static field"===r){if(Wy[a].staticFieldTicks>0)return void i();!function(e,a,n){if(Yy.hp<=0||0!==fk)return;if(Wy[e].mp<4)return void Fb(e);Qa("spellCastEvoke2",0,0,.5),Wy[e].castingStatus=!0,uv("yellow",25,e),Wy[e].spellActive=cS.delayedCall(Kb(e)/1e3,function(){!function(e,a,n){if(Yy.hp<=0||0!==fk)return;Yb(e),Qa("spellCastEvoke2");var t=dS.ceil(.04*Yy.hp);if(!0===a)return fa("A Static Field surrounds "+qD+".",3),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].staticFieldTicks=6,Wy[e].dotDamage=t,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Vb(e,a,n)}}),Wy[e].petDot=!0,pv("yellow",25,40,e,hT,a)));if(!0===n){fa("A Static Field surrounds "+Wy[hT].name+".",3);var i="Static Field",o="mobsStaticFieldIcon"+hT,r=18e3;return mobsStaticFieldTimer[hT].kill(),mobsStaticFieldTimer[hT]=cS.delayedCall(r/1e3,function(){wi(o)}),Ai(i,o,r,-320,hT),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].staticFieldTicks=6,Wy[e].dotDamage=t,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Vb(e,a,n)}}),Wy[e].petDot=!0,pv("yellow",25,40,e,n)))}if(!1===n){if(Wy[e].castingStatus=!1,bL===hT)return;fa("A Static Field surrounds "+Wy[bL].name+".",3);var i="Static Field",o="mobsStaticFieldIcon"+bL,r=18e3;if(mobsStaticFieldTimer[bL].kill(),mobsStaticFieldTimer[bL]=cS.delayedCall(r/1e3,function(){wi(o)}),Ai(i,o,r,-320,bL),!0===ya()){Wy[e].mp-=4,Wy[e].staticFieldTicks=6,Wy[e].dotDamage=t,Wy[e].dotActive.kill();var l=bL;Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Vb(e,a,n,l)}}),Wy[e].petDot=!0,pv("yellow",25,40,e,l)}return}if(fa("A Static Field surrounds you.",3),mv("#daa520",.4,1),pv("yellow",25,40,e),!0===ya()){Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].staticFieldTicks=6,Wy[e].dotDamage=t,"Revenant Viston"===Wy[e].name&&(Wy[e].staticFieldTicks*=3,Wy[e].dotDamage=~~(2*Wy[e].dotDamage)),"Sanctum Guardian Ghalentus"===Wy[e].name&&(Wy[e].staticFieldTicks*=2),Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){Vb(e,a,n)}});r=3e3*Wy[e].staticFieldTicks;mobStaticFieldTimer[e].kill(),mobStaticFieldTimer[e]=cS.delayedCall(r/1e3,function(){wi("mobStaticFieldIcon"+e)}),Hi("Static Field","mobStaticFieldIcon"+e,r,-320)}li(t,e,"Static Field")}(e,a,n)}),fi(e,0,ov(Kb(e),e))}(a,n,t)}else if("blizzard"===r){if(Wy[a].blizzardTicks>0)return void i();!function(e,a,n){if(Yy.hp<=0||0!==fk)return;if(Wy[e].mp<4)return void Fb(e);Qa("spellCastDot",0,0,.5),Wy[e].castingStatus=!0,uv("teal",25,e),Wy[e].spellActive=cS.delayedCall(Kb(e)/1e3,function(){!function(e,a,n){function t(a){gv("blue",320,e,E,E,E,1),a<20&&cS.delayedCall(.01,function(){t(++a)})}if(Yy.hp<=0||0!==fk)return;Yb(e),Qa("spellDoneHeal");var i=dS.ceil(dS.random()*(Wy[e].intel/16)+Wy[e].intel/16/2+Wy[e].level/1.3);if(!0===a)return fa(Wy[e].name+" casts Blizzard on "+qD+".",3),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].blizzardTicks=4,Wy[e].dotDamage=i,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){_b(e,a,n)}}),Wy[e].petDot=!0,pv("teal",25,40,e,hT,a)));if(!0===n){fa(Wy[e].name+" casts Blizzard on "+Wy[hT].name+".",3);var o="Blizzard",r="mobsBlizzardIcon"+hT,l=12e3;return mobsBlizzardTimer[hT].kill(),mobsBlizzardTimer[hT]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-352,hT),Wy[hT].coldTimer.kill(),Wy[hT].snareStatus=!0,Wy[hT].coldTimer=cS.delayedCall(12,function(){Hb(hT)}),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].blizzardTicks=4,Wy[e].dotDamage=i,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){_b(e,a,n)}}),Wy[e].petDot=!0,pv("teal",25,40,e,n)))}if(!1===n){if(Wy[e].castingStatus=!1,bL===hT)return;fa(Wy[hT].name+" casts Blizzard on "+Wy[bL].name+".",3);var o="Blizzard",r="mobsBlizzardIcon"+bL,l=12e3;if(mobsBlizzardTimer[bL].kill(),mobsBlizzardTimer[bL]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-352,bL),Wy[bL].coldTimer.kill(),Wy[bL].snareStatus=!0,Wy[bL].coldTimer=cS.delayedCall(12,function(){Hb(bL)}),!0===ya()){Wy[e].mp-=4,Wy[e].blizzardTicks=4,Wy[e].dotDamage=i,Wy[e].dotActive.kill();var s=bL;Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){_b(e,a,n,s)}}),Wy[e].petDot=!0,pv("teal",25,40,e,s)}return}if(fa(Wy[e].name+" casts Blizzard on you.",3),mv("#6495ed",.4,1),OI=!0,xD.kill(),xD=cS.delayedCall(12,ri),!0===ya()){Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].blizzardTicks=4,Wy[e].dotDamage=i,"Matron Maelentia"===Wy[e].name&&(Wy[e].blizzardTicks*=3,Wy[e].dotDamage*=2),Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){_b(e,a,n)}});var r="mobBlizzardIcon"+e,l=3e3*Wy[e].blizzardTicks;mobBlizzardTimer[e].kill(),mobBlizzardTimer[e]=cS.delayedCall(l/1e3,function(){wi(r)}),Hi("Blizzard",r,l,-352)}li(i,e,"Blizzard"),ny(),"Matron Maelentia"===Wy[e].name?t(0):pv("teal",25,40,e)}(e,a,n)}),fi(e,0,ov(Kb(e),e))}(a,n,t)}else if("conflagration"===r){if(Wy[a].conflagrationTicks>0)return void i();!function(e,a,n){if(Yy.hp<=0||0!==fk)return;if(Wy[e].mp<4)return void Fb(e);Qa("spellCastDot",0,0,.5),Wy[e].castingStatus=!0,uv("orange",25,e),Wy[e].spellActive=cS.delayedCall(Kb(e)/1e3,function(){!function(e,a,n){function t(a){gv("red",320,e,E,E,E,1),a<20&&cS.delayedCall(.01,function(){t(++a)})}if(Yy.hp<=0||0!==fk)return;Yb(e),Qa("spellDoneFlames");var i=dS.ceil(dS.random()*(Wy[e].intel/12)+Wy[e].intel/12/2+Wy[e].level/1.8);if(!0===a)return fa(Wy[e].name+" casts Conflagration on "+qD+".",3),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].conflagrationTicks=7,Wy[e].dotDamage=i,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){$b(e,a,n)}}),Wy[e].petDot=!0,pv("red",25,40,e,hT,a)));if(!0===n){fa(Wy[e].name+" casts Conflagration on "+Wy[hT].name+".",3);var o="Conflagration",r="mobsConflagrationIcon"+hT,l=21e3;return mobsConflagrationTimer[hT].kill(),mobsConflagrationTimer[hT]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-384,hT),void(!0===ya()&&(Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].conflagrationTicks=7,Wy[e].dotDamage=i,Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){$b(e,a,n)}}),Wy[e].petDot=!0,pv("red",25,40,e,n)))}if(!1===n){if(Wy[e].castingStatus=!1,bL===hT)return;fa(Wy[hT].name+" casts Conflagration on "+Wy[bL].name+".",3);var o="Conflagration",r="mobsConflagrationIcon"+bL,l=21e3;if(mobsConflagrationTimer[bL].kill(),mobsConflagrationTimer[bL]=cS.delayedCall(l/1e3,function(){wi(r)}),Ai(o,r,l,-384,bL),!0===ya()){Wy[e].mp-=4,Wy[e].conflagrationTicks=7,Wy[e].dotDamage=i,Wy[e].dotActive.kill();var s=bL;Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){$b(e,a,n,s)}}),Wy[e].petDot=!0,pv("red",25,40,e,s)}return}i<=0&&(i=1);if(fa(Wy[e].name+" casts Conflagration on you.",3),mv("#b22222",.4,1),!0===ya()){Wy[e].mp-=4,Wy[e].castingStatus=!1,Wy[e].conflagrationTicks=7,Wy[e].dotDamage=i,"Highlord Szarthax"===Wy[e].name&&(Wy[e].conflagrationTicks*=3,Wy[e].dotDamage*=2),Wy[e].dotActive.kill(),Wy[e].dotActive=cS.to("",3,{repeat:-1,onRepeat:function(){$b(e,a,n)}});var r="mobConflagrationIcon"+e,l=3e3*Wy[e].conflagrationTicks;mobConflagrationTimer[e].kill(),mobConflagrationTimer[e]=cS.delayedCall(l/1e3,function(){wi(r)}),Hi("Conflagration",r,l,-384)}ny(),li(i,e,"Conflagration"),"Highlord Szarthax"===Wy[e].name?t(0):pv("red",25,40,e)}(e,a,n)}),fi(e,0,ov(Kb(e),e))}(a,n,t)}}else i()}function di(){if(0===tC&&("Monk"===Yy.job&&"Halfling"!==Yy.race||"Necromancer"===Yy.job||"Shadow Knight"===Yy.job)&&(tC=1,fa("You stop feigning your death."),"Monk"===Yy.job?Ei("feigndeathId","-1300% 0"):"Shadow Knight"===Yy.job?Ei("shdfeigndeathId","-1400% 0"):"Necromancer"===Yy.job&&Ei("feigndeath","-700% 0")),!0!==zH.d.addmonsterId)if(!0!==KI){Ma();for(n=0;n<=4;n++)Gw[n].style.display="none",Gw[n].style.opacity=0,Nw[n].removeAllChildren(),Fw[n].style.top="0px;",Fw[n].style.left="0px",qw[n].style.color="#00FA9A",qw[n].innerHTML="";if(qi("addmonsterId",!0),Ei("addmonsterId","0% -300%"),$S.kill(),$S=cS.delayedCall(.5,rv),jy(mS.getElementById("addmonsterId"),.5,"addmonsterId"),1===tC&&1===Jk&&Yy.level>9&&4!==Pn()){var a=mI;dS.random()*a<1&&(Jk=0)}if(!1===ya()){WI=0,ca(),Uk=0,pL="";for(var n=0;n<=4;n++)Wy[n].hp=0,Wy[n].name="";$NG.mobBar.css("visibility","hidden"),mS.getElementById("mobName").textContent=Wy[bL].name,NG.mobLevel.textContent=Wy[bL].level,NG.mobTraits.innerHTML=""}if(wv(),!0===jk&&""!==pL&&(NG.mobBar.style.visibility="visible",mS.getElementById("mobName").textContent=Wy[bL].name,NG.mobLevel.textContent=Wy[bL].level,NG.mobTraits.innerHTML="",Ea(),NG["mobIcons"+Bk].style.display="block",0===Wy[bL].rare?(NG.mobBar.className="ui-draggable",NG.mobPlate.src="/classic/images1/rarePlate.png",NG.mobPlate.className="nameplateGold"):2==Wy[bL].rare?(NG.mobBar.className="ui-draggable",NG.mobPlate.src="/classic/images1/championPlate.png",NG.mobPlate.className="nameplateBlue"):3==Wy[bL].rare?(NG.mobBar.className="ui-draggable",NG.mobPlate.src="/classic/images1/bossPlate.png",NG.mobPlate.className="nameplateRed"):1===Wy[bL].rare&&(NG.mobBar.className="ui-draggable",NG.mobPlate.src="/classic/images1/normalPlate.png",NG.mobPlate.className="nameplateBlack"),NG.mobTraits.innerHTML=Wy[Bk].traits,cS.set(monsterHpBar1,{scaleX:1}),zy.drawMonsterHp(2,!0),1===tC&&3!==xL&&0===Jk&&Yy.level>19&&1===Wy[bL].attackStatus&&!1===KI&&!0===zk&&ci()),ny(),Av(E,Pn(),!0),"On"===kw.debugMode&&fa("Elements - DOM: "+e("*").length+" Canvas1: "+Nw[5].getNumChildren()+" Canvas2: "+Nw[6].getNumChildren()+" Canvas3: "+Nw[7].getNumChildren(),2),VS.length>0){for(;VS.length>0;)VS.shift();Ry()}}else"none"===mS.getElementById("goldInputWrap").style.display&&fa("You can't fight battles in a city.")}function ci(e){cS.delayedCall(.75,function(){hi(!1),Wy[bL].attackStatus=0,Jk=1,e||Nn("Ambush!"),fa("You have been ambushed by "+pL+"!",1),Wy[bL].attack=cS.delayedCall(.75,function(){_t(bL)}),function(){if(0===Ab())return;if(0===zy.blindStatus)return void fa("You cannot change targets while lost in a Globe of Darkness.");if(!0===aH)return;++bL>4&&(bL=0);Wy[bL].name?yy():by()}()})}function mi(e){e||(e=1);for(var a=0;a<e;a++)bw[a].kill(),bw[a]=cS.delayedCall(.511*(a+1),function(){ui(!1,0,0)})}function ui(e,a,n){if(!(!0===Vw||!0===_w||Yy.hp<=0||!0===US)){if(!1===ya()&&n===E)return ga(),void di();var t=Ab();if(!0===zH.d.addmonsterId||!1===ya()||0===t||t>=5)n>=0&&(bw[n]=cS.delayedCall(.511,function(){ui(!1,0,n)}));else if(!0===e&&fa(Wy[a].name+" returns to the battle with help from an ally."),qi("addmonsterId",!0),Ei("addmonsterId","0 -300%"),$S.kill(),$S=cS.delayedCall(.5,rv),jy(mS.getElementById("addmonsterId"),.5,"addmonsterId"),wv(),!0===jk){Wy[a=Bk].name=pL,fi(a,0,1e3)}}}function fi(e,a,n){var t=Wy[e];!0!==t.stunStatus&&!0!==t.fearStatus&&!0!==t.sleepStatus&&!0!==t.frozenStatus&&!0!==t.stasisFieldStatus&&!0!==t.fallingStatus&&!0!==PC?a<n?(a+=100,Wy[e].attack=cS.delayedCall(.1,function(){fi(e,a,n)})):_t(e):Wy[e].attack=cS.delayedCall(.1,function(){fi(e,a,n)})}function hi(a,n){if(0!==Ab()){for(var t=0;t<=4;t++)""!==Wy[t].name&&(Wy[t].attackStatus=0);if(Wy[bL].attack.kill(),Wy[bL].attack=cS.delayedCall(.25,function(){_t(bL)}),n||!0===zy.petAlive&&(BS=bL,Ii()),0===pH){var i=mS.getElementById("travelId");i.className="buttonsManage",i.style.backgroundPosition="-80px 0"}if(mS.getElementById("worldMap").style.top="-900px",pH=1,a&&0===tC&&("Rogue"===Yy.job||"Halfling"===Yy.race)){ao(bL,5e3,-32,0,"Ambush"),Qa("bash")}cS.delayedCall(.1,function(){tC=1}),e("#halflinghideId").css({backgroundPosition:"0 0"}),e("#roguehideId").css({backgroundPosition:"-200% -100%"}),cS.to(spellCurtain,.1,{alpha:0,ease:pS.Qin}),ny(),"Warrior"===Yy.job&&Ri(),"On"===Lmy.autoAttackOption&&1===zy.autoAttackStatus&&Si()}}function gi(){return textNum++,textNum>=40&&(textNum=0),textNum}function pi(e,a,n,t,i,o){text[e].set({x:o,y:i,font:t+"px Arial",color:n,text:a,alpha:1})}function bi(e,a,n){var t=Gw[a].offsetTop+Wy[a].cY;t<100&&(t=100);var i=Gw[a].offsetLeft+Wy[a].cX;if(NI+=e,AI+=e,EI++,"Low"!==kw.videoSetting){var o=gi();pi(o,e,"#fff",18,t,i),cS.to(text[o],.2,{startAt:{scaleX:2,scaleY:2},scaleX:1,scaleY:1,ease:pS.lin}),cS.to(text[o],.4,{y:"-=30",repeat:1,yoyo:!0,onComplete:function(){text[o].text=""}}),cS.to(text[o],.8,{x:"+="+(200*dS.random()-100)}),cS.to(text[o],.4,{delay:.4,alpha:0})}}function vi(e,a,n){var t=Gw[a].offsetTop+Wy[a].cY;t<100&&(t=100);var i=Gw[a].offsetLeft+Wy[a].cX;if(zy[n+"Increment"](e),"Low"!==kw.videoSetting){var o=250*dS.random()+150;"poison"===n?Gt(a,"green","blank",1,o,.6):"magic"===n?Gt(a,"magenta","blank",1,o,.6):"lightning"===n?Gt(a,"yellow","blank",1,o,.6):"cold"===n?Gt(a,"aqua","blank",1,o,.6):"fire"===n&&Gt(a,"orange","blank",1,o,.6);var r=gi();pi(r,e,"#fff",18,t,i),cS.to(text[r],.2,{startAt:{scaleX:2,scaleY:2},scaleX:1,scaleY:1,ease:pS.lin}),cS.to(text[r],.4,{y:"-=30",repeat:1,yoyo:!0,onComplete:function(){text[r].text=""}}),cS.to(text[r],.8,{x:"+="+(200*dS.random()-100)}),cS.to(text[r],.4,{delay:.4,alpha:0})}}function yi(e,a,n){var t=Gw[a].offsetTop+Wy[a].cY/2;t<100&&(t=100);var i=Gw[a].offsetLeft+Wy[a].cX;if(zy[n+"Increment"](e),"Low"!==kw.videoSetting){var o=gi();pi(o,e,"#fff",24,t,i),cS.to(text[o],.2,{startAt:{scaleX:2,scaleY:2},scaleX:1,scaleY:1,ease:pS.lin}),cS.to(text[o],.4,{y:"-=50",repeat:1,yoyo:!0,onComplete:function(){text[o].text=""}}),cS.to(text[o],.8,{x:"+="+(200*dS.random()-100)}),cS.to(text[o],.4,{delay:.4,alpha:0})}}function ki(e){jy(mS.getElementById("toggleattackId"),e,"toggleattackId")}function Si(){!0!==US&&(1!==fk?0===zy.autoAttackStatus?(mS.getElementById("mobName"+bL).style.color="#ff0",mS.getElementById("mobShadow"+bL).src="/classic/images1/mobShadow.png",zy.autoAttackStatus=1,ki(0)):(mS.getElementById("mobName"+bL).style.color="#ff3333",mS.getElementById("mobShadow"+bL).src="/classic/images1/mobShadowRed.png",zy.autoAttackStatus=0,nS.kill(),tS.kill(),1===Wy[bL].attackStatus?(hi(!0),nS=cS.delayedCall(0,Ct),tS=cS.delayedCall(0,Mt),ki(0)):(nS=cS.delayedCall(pe()/1e3,Ct),tS=cS.delayedCall(be()/1e3,Mt),ki(pe()/1e3))):Ni())}function Ii(){!0!==US&&(1!==fk?!0===zy.petAlive&&(eL.kill(),fa(qD+' says, "Attacking '+Wy[BS=bL].name+', Master."'),1===Wy[bL].attackStatus?(hi(!0,!0),vb()):(hi(!0,!0),eL=cS.delayedCall(VD/2e3,vb))):Ni())}function wi(a){e("#"+a).remove()}function Ci(a,n){e("#"+a+n).remove()}function Mi(e){return(e-=8e3)<0&&(e=0),e}function Ti(a,n,t,i){var o=e("<img>").css({width:32,height:64,top:0,left:i,position:"absolute"}).attr("src","/classic/images1/sprite"+Yy.race+"2.png"),r=e("<div>").css({width:32,height:32,overflow:"hidden",position:"relative",cssFloat:"left",margin:0,padding:0,zIndex:75}).attr("id",n).addClass("buffIcons").data("Name",a).append(o).appendTo("#buffWindow"),l=Mi(t);cS.delayedCall(l/1e3,function(){var e=(t-l)/1e3;cS.to(r,.5,{opacity:.3,repeat:-1,yoyo:!0,ease:pS.lin}),cS.delayedCall(e,function(){r.remove()})})}function Bi(a,n,t,i,o){Di(n),o||(o=0);var r=e("<img>").css({width:576,height:128,top:o,left:i,position:"absolute"}).attr("src","/classic/images1/sprite"+Yy.job+"3.png"),l=e("<div>").css({width:32,height:32,overflow:"hidden",position:"relative",cssFloat:"left",margin:0,padding:0,zIndex:75}).attr("id",n).addClass("buffIcons").data("Name",a).append(r).appendTo("#buffWindow");if(t>0){var s=Mi(t);cS.delayedCall(s/1e3,function(){var e=t-s;cS.to(l,.5,{opacity:.3,repeat:-1,yoyo:!0,ease:pS.lin}),cS.delayedCall(e/1e3,function(){l.remove()})})}}function Di(e){var a=n.getElementById(e);null!==a&&a.parentNode.removeChild(a)}function Li(a,n,t,i,o,r,l,s){s||Di(t+n),r||(r=0),l||(l=!1);var d="",c=576,m=128;if(9999===o){d="/classic/images1/spriteGnome2.png",o=0;var c=32,m=64}else d="/classic/images1/sprite"+Yy.job+"3.png";u=e("<img>").css({width:c,height:m,top:r,left:o,position:"absolute"}).attr("src",d);if(l)var u=e("<img>").css({width:32,height:32,top:0,left:0,position:"absolute"}).attr("src","/classic/images1/"+l+"Icon.png");var f=e("<div>").css({width:32,height:32,overflow:"hidden",position:"relative",cssFloat:"left",margin:0,padding:0,zIndex:75}).attr("id",t+n).addClass("mobBuffIcons"+n).data("Name",a).append(u).appendTo("#mobIcons"+n);i>0&&cS.delayedCall(i/1e3,function(){f.remove()})}function Hi(a,n,t,i){Di(n);var o=e("<img>").css({width:800,height:32,top:0,left:i,margin:0,padding:0,position:"absolute"}).attr("src","/classic/images1/spriteMobs2.png"),r=e("<div>").css({width:32,height:32,overflow:"hidden",position:"relative",cssFloat:"left",margin:0,padding:0,zIndex:75}).attr("id",n).addClass("buffIcons").data("Name",a).append(o).appendTo("#buffWindow"),l=Mi(t);cS.delayedCall(l/1e3,function(){var e=t-l;cS.to(r,.5,{opacity:.3,repeat:-1,yoyo:!0,ease:pS.lin}),cS.delayedCall(e/1e3,function(){r.remove()})})}function Ai(a,n,t,i,o){Di(n);var r=e("<img>").css({width:800,height:32,top:0,left:i,position:"absolute"}).attr("src","/classic/images1/spriteMobs2.png"),l=e("<div>").css({width:32,height:32,overflow:"hidden",position:"relative",cssFloat:"left",margin:0,padding:0,zIndex:75}).attr("id",n).addClass("mobBuffIcons"+o).data("Name",a).append(r).appendTo("#mobIcons"+o);if(t>0){var s=Mi(t);cS.delayedCall(s/1e3,function(){var e=t-s;cS.to(l,.5,{opacity:.3,repeat:-1,yoyo:!0,ease:pS.lin}),cS.delayedCall(e/1e3,function(){l.remove()})})}}function xi(e,a){mS.getElementById(e).style.backgroundPosition=a}function Ei(e,a){NG[e].style.backgroundPosition=a}function Gi(e,a){zH.o[e]=a}function qi(e,a){zH.d[e]=a}function Pi(e,a){zH.cd[e]=a}function Qi(e,a,n){zH.d[e]=a,zH.cd[e]=n}function Ri(){var e=Wy[bL].hp/Wy[bL].maxHp;pC=e<=.4?0:1,!1===zH.d.decisiveblowId&&(Yy.mp>=15&&0===pC?Ei("decisiveblowId","-1000% 0"):Ei("decisiveblowId","-1000% -300%"))}function Fi(){if(!0===TM)referenceDate2=0,TM=!1,iH="",cI.kill(),NG.spellbardiv.style.display="none",xM.kill(),qM.kill(),RM.kill(),jM.kill(),KM.kill(),XM.kill(),$M.kill(),nT.kill(),aT.kill(),tT.kill(),rT.kill(),lT.kill(),sT.kill(),dT.kill(),uT.kill(),!1===zH.o.chordsofdissonance&&Ei("chordsofdissonance","-300% 0"),!1===zH.o.chantofbattle&&Ei("chantofbattle","-400% 0"),!1===zH.o.accelerando&&Ei("accelerando","-500% 0"),!1===zH.o.hymnofrestoration&&Ei("hymnofrestoration","-600% 0"),!1===zH.o.songofthesirens&&Ei("songofthesirens","-700% 0"),!1===zH.o.boastfulbellow&&Ei("boastfulbellow","-800% 0"),!1===zH.o.elementalrhythms&&Ei("elementalrhythms","-900% 0"),!1===zH.o.lucidlullaby&&Ei("lucidlullaby","-1000% 0"),!1===zH.o.consonantchain&&Ei("consonantchain","-1100% 0"),!1===zH.o.dissension&&Ei("dissension","-1200% 0"),!1===zH.o.chorusofclarity&&Ei("chorusofclarity","-1300% 0"),!1===zH.o.anthemdearms&&Ei("anthemdearms","-1400% 0"),!1===zH.o.euphonichymn&&Ei("euphonichymn","-1500% 0"),!1===zH.o.shieldofsongs&&Ei("shieldofsongs","-1600% 0"),!1===zH.o.desperatedirge&&Ei("desperatedirge","-1700% 0");else{if(!0===Eb())return;TM=!0,!1===zH.o.chordsofdissonance&&Ei("chordsofdissonance","-300% -100%"),!1===zH.o.chantofbattle&&Ei("chantofbattle","-400% -100%"),!1===zH.o.accelerando&&Ei("accelerando","-500% -100%"),!1===zH.o.hymnofrestoration&&Ei("hymnofrestoration","-600% -100%"),!1===zH.o.songofthesirens&&Ei("songofthesirens","-700% -100%"),!1===zH.o.boastfulbellow&&Ei("boastfulbellow","-800% -100%"),!1===zH.o.elementalrhythms&&Ei("elementalrhythms","-900% -100%"),!1===zH.o.lucidlullaby&&Ei("lucidlullaby","-1000% -100%"),!1===zH.o.consonantchain&&Ei("consonantchain","-1100% -100%"),!1===zH.o.dissension&&Ei("dissension","-1200% -100%"),!1===zH.o.chorusofclarity&&Ei("chorusofclarity","-1300% -100%"),!1===zH.o.anthemdearms&&Ei("anthemdearms","-1400% -100%"),!1===zH.o.euphonichymn&&Ei("euphonichymn","-1500% -100%"),!1===zH.o.shieldofsongs&&Ei("shieldofsongs","-1600% -100%"),!1===zH.o.desperatedirge&&Ei("desperatedirge","-1700% -100%")}}function Ni(){ui()}function ji(){""===mS.getElementById("warriorkickId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("warriorkickId",!1),Ei("warriorkickId","-300% 0"),zy.checkWarriorSkills(),refreshKick.kill())}function zi(){refreshKick=cS.to("",.1,{repeat:-1,onRepeat:ji})}function Yi(){if(!0!==zH.d.warriorkickId&&!0!==Eb())if(1!==fk){qi("warriorkickId",!0),Ei("warriorkickId","-300% -100%"),cS.delayedCall(8,zi),jy(mS.getElementById("warriorkickId"),8,"warriorkickId"),Ep();var e=yc(ne()/6*(1+bS.eq[11].armor/80),.7),a=bL,n=40+3*$e();100*dS.random()<n&&Ht(a),"High"===kw.videoSetting&&$i(a),zy.myPhysicalDamage(e,a,"Kick"),Yy.talent1>=20&&(Wy[a].mp-=1,Wy[a].mp<0&&(Wy[a].mp=0))}else Ni()}function Ki(e){x=e.target;try{x.parentNode.removeChild(x)}catch(e){}}function Wi(e){try{e.parentNode.removeChild(e)}catch(e){}}function Oi(e,a){function n(){var e=sy("bloodSpray",7,t,i,25,25,!0);e.image.onload=function(){var a=t+630*dS.random()-315,n=55*dS.random()+653;cS.to(e,.2,{y:n,x:a}),cS.to(e,8+6*dS.random(),{scaleX:6,scaleY:2,alpha:0,onComplete:function(){oy(7,e)}})}}if("High"===kw.videoSetting){e===E&&(e=bL),a||(a=1);for(var t=Gw[e].offsetLeft+Wy[e].cX,i=Gw[e].offsetTop+Wy[e].cY-50,o=0;o<a;o++)n()}}function Xi(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=100*dS.random()-50,i=15*dS.random()+658,o=sy("bloodSpray",7,a,n,25,25,!0);o.image.onload=function(){cS.to(o,.3,{y:i,x:a+t,ease:pS.sin,onComplete:function(){cS.to(o,6+9*dS.random(),{scaleX:6,scaleY:2,alpha:0,onComplete:function(){oy(7,o)}})}})}}function Vi(e,a,n,t,i){var o=mS.createElement("img");return o.style.cssText="position:absolute; left:"+e+"px; top:"+a+"px; width:"+n+"px; height:"+t+"px;",o.src="/classic/images1/"+i+".png",o}function _i(e,a,n,t){var i=mS.createElement("div");return i.style.cssText="position:absolute; left:"+e+"px; top:"+a+"px; width:"+n+"px; height:"+t+"px; overflow: hidden;",i}function $i(e){var a=Gw[e].offsetLeft+Wy[e].cX+200,n=Gw[e].offsetTop+Wy[e].cY+200,t=sy("kick",5,a,n,0,0);t.image.onload=function(){cS.to(t,.125,{scaleX:1,scaleY:1,x:a-225,y:n-225,ease:pS.Qin,onComplete:function(){cS.to(t,.125,{alpha:.25,x:"-=125",y:"-=125",onComplete:function(){oy(5,t)}})}})}}function Ui(){""===mS.getElementById("slamId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("slamId",!1),Ei("slamId","-400% 0%"),zy.checkWarriorSkills(),refreshSlam.kill())}function Ji(){refreshSlam=cS.to("",.1,{repeat:-1,onRepeat:Ui})}function Zi(){return 1===zy.difficulty?.8:2===zy.difficulty?.66:.5}function eo(){return 1===zy.difficulty?1:2===zy.difficulty?.8:.6}function ao(e,a,n,t,i){""!==Wy[e].name&&(1===Wy[bL].attackStatus&&hi(!0),t||(t=0),i||(i="Stun"),Cg(e),tp(e),Wy[e].stunStatus=!0,Wy[e].dauntless&&(a*=Zi()),Wy[e].stunTimer.kill(),Wy[e].stunTimer=cS.delayedCall(a/1e3,function(){Wy[e].stunStatus=!1}),fa(Wy[e].name+" has been stunned."),Ht(e),bv(e,a),n<0?Li(i,e,"stunIcon",a,n,t):Ai(i,"mobBashIcon"+e,a,0,e))}function no(){if(!(Yy.mp<10||!0===zH.d.slamId||Yy.level<2)&&!0!==Eb())if(1!==fk){qi("slamId",!0),Ei("slamId","-400% -100%"),cS.delayedCall(12,Ji),Ep();if(zy.drawMyMp(-10),jy(mS.getElementById("slamId"),12,"slamId"),0===Yy.talent5){e=bL;"High"===kw.videoSetting&&to(e);n=yc(ne()/4*(1+bS.eq[13].armor/80),.8);(t=zy.myPhysicalDamage(n,e,"Slam"))!==E&&(ao(e,3500,-128),fC=0,hC.kill(),hC=cS.delayedCall(6,ho),Qa("shldblk"))}else for(var e,a=(e=bL)-1;a<=e+1;a++)if(a>=0&&Wy[a].name){"High"===kw.videoSetting&&to(a);var n=yc(ne()/4*(1+bS.eq[13].armor/80),.8),t=zy.myPhysicalDamage(n,a,"Slam");t!==E&&(ao(a,3500,-128),fC=0,hC.kill(),hC=cS.delayedCall(6,ho),Qa("shldblk"))}Yy.talent5>=20&&mo(!1)}else Ni()}function to(e){function a(e){var i=sy("slam",5,n,t,400,400,!0);i.image.onload=function(){cS.to(i,.25,{alpha:0,scaleY:.25,scaleX:.25,ease:pS.sout,onComplete:function(){oy(5,i)}})},++e<3&&cS.delayedCall(.05,function(){a(e)})}var n=Gw[e].offsetLeft+Wy[e].cX-200,t=Gw[e].offsetTop+Wy[e].cY-200;a(0)}function io(e){if(!(Yy.hp<=0)){var a=dS.ceil(Yy.maxHp/200);zy.popupHeal(a),++e<6&&(mC.kill(),mC=cS.delayedCall(1,function(){io(e)}))}}function oo(){if(!0!==zH.d.avengingstrikeId&&!0!==Eb())if(1!==fk){Ep();var e=yc(ne()/16,.5);if(Yy.mp>80){mC.kill(),mC=cS.delayedCall(1,function(){io(0)}),zy.drawMyMp(-25),zy.checkWarriorSkills();var a="avengingStrikeIcon";uC.kill(),uC=cS.delayedCall(6,function(){wi(a)}),Bi("Avenging Strike",a,6e3,-160)}"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX+100,n=Gw[e].offsetTop+Wy[e].cY-100,t=sy("punchedRed",5,a,n,0,0);t.image.onload=function(){cS.to(t,.12,{scaleX:1,scaleY:1,x:a-200,ease:pS.Qin}),cS.to(t,.12,{delay:.12,scaleX:0,scaleY:0,y:n+200,onComplete:function(){oy(5,t)}})}}(bL),zy.myPhysicalDamage(e,bL,"Avenging Strike")}else Ni()}function ro(e,a){Wy[e].hemorrhageTickCount=0,Wy[e].hemorrhageTickDamage=a,Wy[e].hemorrhageInterval.kill(),Wy[e].hemorrhageInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e){if(""===Wy[e].name)return Wy[e].hemorrhageInterval.kill(),void(Wy[e].hemorrhageTickCount=0);"High"===kw.videoSetting&&Xi(e);zy.myDotDamage(Wy[e].hemorrhageTickDamage,e,"physical","Hemorrhage"),Wy[e].hemorrhageTickCount+=1,Wy[e].hemorrhageTickDamage=dS.ceil(1.02*Wy[e].hemorrhageTickDamage),Yy.talent11>=20&&dS.random()>.92&&(zy.subjugateStatus=0,gC.kill(),gC=cS.delayedCall(8,vo),zy.checkWarriorSkills());24===Wy[e].hemorrhageTickCount&&(Wy[e].hemorrhageInterval.kill(),Wy[e].hemorrhageTickCount=0,zy.subjugateStatus=0,gC.kill(),gC=cS.delayedCall(8,vo),zy.checkWarriorSkills())}(e)}}),Li("Hemorrhage",e,"hemorrhageIcon",24e3,-192),"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("hemorrhage",5,a,n,0,0);t.image.onload=function(){cS.to(t,.1,{scaleX:1,scaleY:1,y:n-200,ease:pS.lin}),cS.to(t,.4,{delay:.1,alpha:0,y:"+=5",onComplete:function(){oy(5,t)}}),Oi(e,20)}}(e)}function lo(){if(!(Yy.mp<15||!0===zH.d.hemorrhageId||Yy.level<17)&&!0!==Eb())if(1!==fk){Ep(),1===zy.autoAttackStatus&&"On"===Lmy.autoAttackOption&&Si();var e=bL;if(Yy.talent6>=20){for(var a=e-1;a<=e+1;a++)if(a>=0&&Wy[a].name){fa(Wy[a].name+" begins bleeding from an open wound.");ro(a,n=yc(ne()/12+5,.9))}}else{var n=yc(ne()/12+5,.9);fa(Wy[e].name+" begins bleeding from an open wound."),ro(e,n)}if(zy.drawMyMp(-15),zy.checkWarriorSkills(),0===Wy[e].thornsActive){fa("You are pierced by thorns for "+dS.ceil(Wy[e].level/10)+" damage.",3);var t=dS.ceil(Wy[e].level/10);Yy.hp-=t,xI+=t,Yy.hp<=0&&(fa("You have been slain by a shield of thorns!".fontcolor("ff0000")),ot())}if(0===Wy[e].lavaShieldActive){fa("You are burned by lava for "+dS.ceil(Wy[e].level/6)+" damage.",3);var i=dS.ceil(Wy[e].level/6);Yy.hp-=i,xI+=i,Yy.hp<=0&&(fa("You have been slain by a shield of lava!".fontcolor("ff0000")),ot())}Qa("slice")}else Ni()}function so(){""===mS.getElementById("shockwaveId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("shockwaveId",!1),Ei("shockwaveId","-700% 0%"),zy.checkWarriorSkills(),refreshshockwave.kill())}function co(){refreshshockwave=cS.to("",.1,{repeat:-1,onRepeat:so})}function mo(e){mv("#1616fd",.3,.5);fo("blueNova",!1),Qa("tremor");for(var a=0;a<=4;a++)if(""!==Wy[a].name){var n=yc(ne()/3.5*(1+bS.eq[13].armor/50),.8);zy.myPhysicalDamage(n,a,"Shockwave",0,"range")!==E&&!0===e&&ao(a,3500,-224)}}function uo(){Yy.mp<15||!0===zH.d.shockwaveId||Yy.level<38||!0!==Eb()&&(qi("shockwaveId",!0),Ei("shockwaveId","-700% -100%"),cS.delayedCall(24,co),jy(mS.getElementById("shockwaveId"),24,"shockwaveId"),Ep(),zy.drawMyMp(-15),fC=0,hC.kill(),hC=cS.delayedCall(6,ho),mo(!0),Yy.talent4>=20&&cS.delayedCall(.5,function(){mo(!1)}))}function fo(e,a){function n(a){var l=sy(e,7,t-200,i-50,0,0,!0);l.image.onload=function(){cS.to(l,.5,{scaleX:o,scaleY:r,alpha:0,onComplete:function(){oy(7,l)}})},++a<8&&cS.delayedCall(.03,function(){n(a)})}if("High"===kw.videoSetting){if(e||(e="fireNova"),!0===a)var t=Gw[5].offsetLeft+lL/2,i=670,o=4,r=1.75;else var t=640,i=788,o=5,r=5;n(0)}}function ho(){""===mS.getElementById("pummelId").textContent&&(fC=1,zy.checkWarriorSkills(),hC.kill())}function go(){0!=lH&&0!==_w&&0!==Vw&&($NG.pummelId.removeClass("disabled"),qi("pummelId",!1),zy.checkWarriorSkills(),refreshpummel.kill())}function po(){refreshpummel=cS.to("",.1,{repeat:-1,onRepeat:go})}function bo(){function e(t){"High"===kw.videoSetting&&wl(bL);var i=yc(ne()/10,.8);zy.myPhysicalDamage(i,bL,a),Qa("flshhit6"),++t<n&&cS.delayedCall(.2,function(){e(t)})}if(!(Yy.mp<10||1===fC||!0===zH.d.pummelId||Yy.level<7)&&!0!==Eb())if(1!==fk){qi("pummelId",!0),Ei("pummelId","-800% -100%"),jy(mS.getElementById("pummelId"),6,"pummelId"),cS.delayedCall(6,po),Ep(),hC.kill();var a="Pummel";zy.drawMyMp(-10),fC=1,dp(2e3);var n=1;sS.Guardian>=6&&(n=5),e(0)}else Ni()}function vo(){zy.subjugateStatus=1,zy.checkWarriorSkills(),gC.kill()}function yo(){if(!(Yy.mp<5||1===zy.subjugateStatus||Yy.level<9)&&!0!==Eb())if(1!==fk){gC.kill();var e=1+a.abs(1-Yy.hp/Yy.maxHp),n=yc(ne()/5*e,.8);zy.drawMyMp(-5),zy.subjugateStatus=1,"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX+150,n=Gw[e].offsetTop+Wy[e].cY-150,t=sy("subjugate",5,a,n,0,0);t.image.onload=function(){cS.to(t,.125,{scaleX:1.5,scaleY:1.5,x:a-300,ease:pS.Qin,onComplete:function(){cS.to(t,2,{startAt:{alpha:.2},alpha:0,onComplete:function(){oy(5,t)}})}})};var i=sy("subjugate",5,a,n,0,0);i.image.onload=function(){cS.to(i,.125,{scaleX:1.5,scaleY:1.5,x:a-300,ease:pS.Qin,onComplete:function(){cS.to(i,.125,{y:n+300,scaleX:0,scaleY:0,onComplete:function(){oy(5,i)}})}}),cS.delayedCall(.1,fp,[a-150,600])}}(bL),zy.myPhysicalDamage(n,bL,"Subjugate"),Qa("flshhit5"),zy.checkWarriorSkills()}else Ni()}function ko(){""===mS.getElementById("decisiveblowId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("decisiveblowId",!1),Ei("decisiveblowId","-1000% 0%"),refreshdecisiveblow.kill(),Ri())}function So(){refreshdecisiveblow=cS.to("",.1,{repeat:-1,onRepeat:ko})}function Io(){if(!(Yy.mp<15||1===pC||!0===zH.d.decisiveblowId||Yy.level<15)&&!0!==Eb())if(1!==fk){qi("decisiveblowId",!0),Ei("decisiveblowId","-1000% -100%");cS.delayedCall(5,So),jy(mS.getElementById("decisiveblowId"),5,"decisiveblowId"),Ep();var e=yc(ne()/2.5,.8);zy.drawMyMp(-15),"High"===kw.videoSetting&&function(e){function a(e){cS.delayedCall(.1,fp,[n-150,600]),++e<5&&cS.delayedCall(.05,function(){a(e)})}var n=Gw[e].offsetLeft+Wy[e].cX+150,t=Gw[e].offsetTop+Wy[e].cY-150,i=sy("decisiveBlow",5,n,t,0,0);i.image.onload=function(){cS.to(i,.15,{scaleX:1.5,scaleY:1.5,x:n-300,ease:pS.Qin,onComplete:function(){cS.to(i,2,{startAt:{alpha:.2},alpha:0,onComplete:function(){oy(5,i)}})}})};var o=sy("decisiveBlow",5,n,t,0,0);o.image.onload=function(){cS.to(o,.1,{scaleX:1.5,scaleY:1.5,x:n-300,ease:pS.Qin,onComplete:function(){cS.to(o,.1,{y:t+300,scaleX:0,scaleY:0,onComplete:function(){oy(5,o)}})}})};a(0)}(bL),zy.myPhysicalDamage(e,bL,"Decisive Blow"),Qa("flshhit3")}else Ni()}function wo(){bC=1,zy.checkWarriorSkills()}function Co(){""===mS.getElementById("absorbspellId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("absorbspellId",!1),Ei("absorbspellId","-1100% 0%"),zy.checkWarriorSkills(),refreshAbsorbSpell.kill())}function Mo(){refreshAbsorbSpell=cS.to("",.1,{repeat:-1,onRepeat:Co})}function To(){if(!(Yy.mp<15||!0===zH.d.absorbspellId||Yy.level<20)&&!0!==Eb()){qi("absorbspellId",!0),Ei("absorbspellId","-1100% -100%");var e=24e3;Yy.talent7>=20&&(e=12e3),cS.delayedCall(e/1e3,Mo),jy(mS.getElementById("absorbspellId"),e/1e3,"absorbspellId"),cS.delayedCall(3,wo),zy.drawMyMp(-15),Ep();var a="Absorb Spell";Yy.talent7>0&&(a="Reflect"),bC=0,fa("You are encased in a translucent shell.",3);cS.delayedCall(3,function(){wi("absorbSpellIcon")}),Bi(a,"absorbSpellIcon",3e3,-352),"High"===kw.videoSetting&&function(){var e=Vi(110,50,1060,1060,"absorbSpell");e.id="spellAbsorbImage",NG.eWin.appendChild(e),cS.to(e,3,{rotation:1800,force3D:"auto",ease:pS.lin}),cS.to(e,1,{opacity:.8,force3D:"auto",ease:pS.cout,onComplete:function(){cS.to(e,2,{opacity:0,force3D:"auto",ease:pS.xin,onComplete:function(){Wi(e)}})}})}(),Qa("energyshield")}}function Bo(){kC=1,zy.checkWarriorSkills()}function Do(){tk+=500,SC=!1,ny()}function Lo(){""===mS.getElementById("frenziedrampageId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("frenziedrampageId",!1),zy.checkWarriorSkills(),refreshfrenziedRampage.kill())}function Ho(){refreshfrenziedRampage=cS.to("",.1,{repeat:-1,onRepeat:Lo})}function Ao(){if(!(Yy.mp<25||1===kC||Yy.level<32)&&!0!==Eb())if(1!==fk){qi("frenziedrampageId",!0),cS.delayedCall(ye()/1e3,Ho),Ep(),kC=1;a="Frenzied Rampage";zy.drawMyMp(-25);var e=yc(ne()/16,.8);!0===SC&&(tk+=500),tk-=500,SC=!0,MC.kill(),MC=cS.delayedCall(8,Do),zy.myPhysicalDamage(e,bL,a),dp(1500);var a="Frenzied Rampage",n="frenziedRampageIcon";$B.kill(),$B=cS.delayedCall(8,function(){wi(n)}),Bi(a,n,8e3,-384),"High"===kw.videoSetting&&function(){function e(a){var n=640*dS.random()-320,t=200*dS.random()+149;if(n<0)i=-960;else var i=960;if(t<249)o=-200;else var o=700;var r=sy("redparticle50",5,n,t,1280,200);r.image.onload=function(){r.alpha=.1,cS.to(r,1.5,{y:o,x:i,onComplete:function(){oy(5,r)}})},a<20&&cS.delayedCall(a/1e3,function(){e(++a)})}mv("#f00",.3,3);e(10)}(),ny(),Qa("warriorShout")}else Ni()}function xo(){if(!(Yy.mp<20||!0===zH.d.furiousscornId||Yy.level<11)&&!0!==Eb()){1===Wy[bL].attackStatus&&hi(!0),Ep(),zy.drawMyMp(-20),fa("You belittle your foes with Furious Scorn.",3);for(var e=0;e<=4;e++)if(Wy[e].name){Wy[e].furiousScorn=15;Li("Furious Scorn",e,"furiousScornIcon",0,-448)}zy.checkWarriorSkills(),"High"===kw.videoSetting&&Eo(),Qa("warCry")}}function Eo(e){e||(e="blue");for(var a=0;a<40;a++){var n,t=1280*dS.random(),i=50*dS.random()+400,o=20*dS.random()+5;n=o<10?515:o>=10&&o<15?540:o>=15&&o<20?580:615,function(){if(o<15){(a=sy(e+"particle50",7,t,i,o,o)).image.onload=function(){Go(a,7,.2,n)}}else{var a=sy(e+"particle50",5,t,i,o,o);a.image.onload=function(){Go(a,5,.4,n)}}}()}}function Go(e,a,n,t){cS.to(e,1*dS.random()+.5,{y:t,scaleX:n,scaleY:n,onComplete:function(){oy(a,e)}})}function qo(){""===mS.getElementById("enrageId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("enrageId",!1),Ei("enrageId","-1300% 0%"),zy.checkWarriorSkills(),refreshenrage.kill())}function Po(){refreshenrage=cS.to("",.1,{repeat:-1,onRepeat:qo})}function Qo(){!0===zH.d.enrageId||Yy.level<5||!0!==Eb()&&(qi("enrageId",!0),Ei("enrageId","-1300% -100%"),cS.delayedCall(30,Po),jy(mS.getElementById("enrageId"),30,"enrageId"),zy.drawMyMp(40),fa("You unleash a torrent of unbridled anger.",3),zy.checkWarriorSkills(),mv("#f00",.4,5),Qa("warriorShout"),Yy.talent10>0&&(BI=!0),Yy.talent10>=20&&Ro(4e3))}function Ro(e){var a=LI/1e3;nS.kill(),nS=cS.delayedCall(a,Ct),tS.kill(),tS=cS.delayedCall(a,Mt),ki(a),xk.kill(),Ak=!0,xk=cS.delayedCall(e/1e3,function(){Ak=!1})}function Fo(){var e=Yy.maxHp,a=Yy.hp/e;a>.8&&zy.popupHeal(dS.ceil(.01*e)),a>.6&&a<=.8&&zy.popupHeal(dS.ceil(.02*e)),a>.4&&a<=.6&&zy.popupHeal(dS.ceil(.03*e)),a>.2&&a<=.4&&zy.popupHeal(dS.ceil(.05*e)),a<=.2&&zy.popupHeal(dS.ceil(.06*e)),15===(vC+=1)&&yC.kill()}function No(){""===mS.getElementById("triageId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("triageId",!1),Ei("triageId","-1500% 0%"),zy.checkWarriorSkills(),refreshtriage.kill())}function jo(){refreshtriage=cS.to("",.1,{repeat:-1,onRepeat:No})}function zo(){if(!(Yy.mp<25||!0===zH.d.triageId||Yy.level<13)&&!0!==Eb()){qi("triageId",!0),Ei("triageId","-1500% -100%"),cS.delayedCall(60,jo),jy(mS.getElementById("triageId"),60,"triageId"),zy.drawMyMp(-25),Ep(),vC=0,yC=cS.to("",1,{repeat:-1,onRepeat:Fo}),fa("A surge of adrenaline heals your wounds.",3),zy.checkWarriorSkills();cS.delayedCall(15,function(){wi("triageIcon")}),Bi("Triage","triageIcon",15e3,-480),Lu("yellow"),Qa("spellCastHeal2")}}function Yo(){CC=!1,ny()}function Ko(){""===mS.getElementById("bulwarkId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("bulwarkId",!1),Ei("bulwarkId","-1600% 0%"),zy.checkWarriorSkills(),refreshbulwark.kill())}function Wo(){refreshbulwark=cS.to("",.1,{repeat:-1,onRepeat:Ko})}function Oo(){if(!(Yy.mp<15||!0===zH.d.bulwarkId||Yy.level<28)&&!0!==Eb()){qi("bulwarkId",!0),Ei("bulwarkId","-1600% -100%"),cS.delayedCall(60,Wo),jy(mS.getElementById("bulwarkId"),60,"bulwarkId"),zy.drawMyMp(-15),Ep(),fa("You are surrounded by an impregnable wall.",3);var e=15e3;Yy.talent3>=20&&(e+=5e3),wC=cS.delayedCall(e/1e3,Yo),CC=!0;var a=e;cS.delayedCall(a/1e3,function(){wi("bulwarkIcon")}),Bi("Bulwark","bulwarkIcon",a,-512),"High"===kw.videoSetting&&function(){mv("#00f",.3,2);var e=sy("bulwark",5,418,227,444,500,!0);e.image.onload=function(){cS.to(e,3,{y:667,alpha:0,scaleX:.5,scaleY:.5,onComplete:function(){oy(5,e)}}),Lh()}}(),Qa("spellDoneBuff")}}function Xo(){return 0===Vw||0===Xw||0===_w}function Vo(){"Warrior"===Yy.job&&Yy.level>=24&&(!0===zH.d.intrepidmightId?Ei("intrepidmightId","-1700% -100%"):Xo()?Ei("intrepidmightId","-1700% 0%"):Ei("intrepidmightId","-1700% -300%"))}function _o(){""===mS.getElementById("intrepidmightId").textContent&&(refreshintrepidMight.kill(),qi("intrepidmightId",!1),Vo())}function $o(){refreshintrepidMight=cS.to("",.1,{repeat:-1,onRepeat:_o})}function Uo(){if(!(Yy.hp<=0||!0===US))if(1!==fk){if((1!==Vw||1!==Xw||1!==_w)&&Xo()&&!0!==zH.d.intrepidmightId&&!(Yy.level<24)){qi("intrepidmightId",!0),cS.delayedCall(12,$o),jy(mS.getElementById("intrepidmightId"),12,"intrepidmightId"),fa("Your indomitable might unleashes!",3),Vw=1,KL.kill(),0===Xw&&(qi("runId",!1),Ei("runId","-100% -200%"),OL.kill()),Xw=1,YL.kill(),_w=1,e("#mobBashIcon,#mobFearIcon,#mobRootIcon").remove(),dH.kill(),Ap(),zy.checkWarriorSkills();var a=yc(ne()/7,.8);"High"===kw.videoSetting&&function(e){mv("#fff",.3,.5);a=Gw[e].offsetLeft+Wy[e].cX;cS.delayedCall(.1,fp,[a,1e3]);var a=Gw[e].offsetLeft+Wy[e].cX+150,n=Gw[e].offsetTop+Wy[e].cY-150,t=sy("intrepidMight",5,a,n,0,0);t.image.onload=function(){cS.to(t,.15,{scaleX:1.5,scaleY:1.5,x:a-300,ease:pS.Qin,onComplete:function(){cS.to(t,2,{startAt:{alpha:.2},alpha:0,onComplete:function(){oy(5,t)}})}})};var i=sy("intrepidMight",5,a,n,0,0);i.image.onload=function(){cS.to(i,.1,{scaleX:1.5,scaleY:1.5,x:a-300,ease:pS.Qin,onComplete:function(){cS.to(i,.1,{y:n+300,scaleX:0,scaleY:0,onComplete:function(){oy(5,i)}})}})}}(bL),zy.myPhysicalDamage(a,bL,"Intrepid Might"),dp(1e3),!1===zH.d.enrageId&&(Pi("enrageId",!1),Ei("enrageId","-1300% 0%")),!1===zH.d.triageId&&(Pi("triageId",!1),Ei("triageId","-1500% 0%")),!1===zH.d.bulwarkId&&(Pi("bulwarkId",!1),Ei("bulwarkId","-1600% 0%")),Qa("flshhit4"),Vo()}}else Ni()}function Jo(){if(!0!==zH.d.shadowstrikeId&&!0!==Eb())if(1!==fk){Ep(),"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX+100,n=Gw[e].offsetTop+Wy[e].cY-100,t=sy("shadowStrike",5,a,n,0,0);t.image.onload=function(){cS.to(t,.125,{scaleX:1,scaleY:1,x:a-200,ease:pS.Qin,onComplete:function(){cS.to(t,.125,{scaleX:0,scaleY:0,y:n+200,onComplete:function(){oy(5,t)}})}})}}(bL),zy.drawMyMp(20);var e=2+yc(ne()/16,.5);zy.myPhysicalDamage(e,bL,"Shadow Strike"),dp(100)}else Ni()}function Zo(){""===mS.getElementById("lacerateId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("lacerateId",!1),Ei("lacerateId","-800% 0%"),refreshlacerate.kill(),zy.checkRogueSkills())}function er(){refreshlacerate=cS.to("",.1,{repeat:-1,onRepeat:Zo})}function ar(){if(!(Yy.mp<20||!0===zH.d.lacerateId||Yy.level<2)&&!0!==Eb())if(1!==fk){Yy.talent1>=20&&(qi("lacerateId",!0),Ei("lacerateId","-800% -100%"),cS.delayedCall(12,er),jy(mS.getElementById("lacerateId"),12,"lacerateId")),Ep();var e=Yy.mp;zy.drawMyMp(-Yy.mp);var a=0;Wy[bL].lacerate>0&&(a=20);var n=(e+a)/100+1,t=yc((ne()/10+Z(oe()/6))*n,.8);fa(Wy[bL].name+"'s armor is thrashed.",3);var i=bL,o=dS.ceil(Wy[i].def*(e/200));"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX+100,n=Gw[e].offsetTop+Wy[e].cY-100,t=sy("lacerate",5,a,n,0,0);t.image.onload=function(){cS.to(t,.125,{scaleX:1,scaleY:1,x:a-200,ease:pS.Qin,onComplete:function(){cS.to(t,.15,{scaleX:0,scaleY:0,y:n+200,onComplete:function(){oy(5,t)}})}})};var i=sy("lacerate",5,a-40,n,0,0);i.image.onload=function(){cS.to(i,.125,{scaleY:1,scaleX:1,x:a-240,ease:pS.Qin,onComplete:function(){cS.to(i,.15,{scaleX:0,scaleY:0,y:n+200,onComplete:function(){oy(5,i)}})}})};var o=sy("lacerate",5,a+40,n,0,0);o.image.onload=function(){cS.to(o,.125,{scaleX:1,scaleY:1,x:a-160,ease:pS.Qin,onComplete:function(){cS.to(o,.125,{scaleX:0,scaleY:0,y:n+200,onComplete:function(){oy(5,t)}})}})};for(var r=0;r<=~~(3*dS.random()+2);r++)Xi(e)}(i);zy.myPhysicalDamage(t,i,"Lacerate")!==E&&(o>Wy[i].lacerate&&(Wy[i].lacerate=dS.ceil(e/10)),Li("Lacerate",i,"lacerateIcon",0,-256),Qm(bL,e/5,1e3)),Qa("slice")}else Ni()}function nr(){""===mS.getElementById("evadeId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("evadeId",!1),Ei("evadeId","-1300% 0%"),refreshevade.kill())}function tr(){refreshevade=cS.to("",.1,{repeat:-1,onRepeat:nr})}function ir(){!0===zH.d.evadeId||Yy.level<3||!0!==Eb()&&(qi("evadeId",!0),Ei("evadeId","-1300% -100%"),cS.delayedCall(40,tr),jy(mS.getElementById("evadeId"),40,"evadeId"),fa("You vanish into your surroundings.",3),zy.drawMyMp(40),Bi("Evade","evadeIcon",5e3,-416),Qa("fade"),PC=!0,cS.delayedCall(5,function(){PC=!1}),0===zy.autoAttackStatus&&Si(),or())}function or(e){function a(n){var t=640*dS.random()-320;if(t<0)i=-960;else var i=960;var o=sy(e+"particle50",5,t,360,1280,200);o.image.onload=function(){o.alpha=.1,cS.to(o,1.5,{y:-100,x:i,alpha:0,onComplete:function(){oy(5,o)}})},n<30&&cS.delayedCall(.02,function(){a(++n)})}e||(e="black"),mv("#000",.7,2),"High"===kw.videoSetting&&a(0)}function rr(){""===mS.getElementById("sonicstrikeId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("sonicstrikeId",!1),Ei("sonicstrikeId","-400% 0%"),refreshSonicStrike.kill())}function lr(){refreshSonicStrike=cS.to("",.1,{repeat:-1,onRepeat:rr})}function sr(){if(!(!0===zH.d.sonicstrikeId||Yy.level<5)&&!0!==Eb())if(1!==fk){qi("sonicstrikeId",!0),Ei("sonicstrikeId","-400% -100%"),cS.delayedCall(15,lr),jy(mS.getElementById("sonicstrikeId"),15,"sonicstrikeId"),Ep();if(sS.Assassin>=6)for(var e=0;e<=4;e++)ao(e,3500,-128);var a=yc(ne()/7,.7);fa(Wy[bL].name+" is disrupted by a sonic wave.",3);var n=bL;"High"===kw.videoSetting&&dr(n),zy.myPhysicalDamage(a,bL,"Sonic Strike"),Ht(n),zy.drawMyMp(20)}else Ni()}function dr(e){var a=Gw[e].offsetLeft+Wy[e].cX-75,n=Gw[e].offsetTop+Wy[e].cY-75;wl(e);var t=sy("tremorFG",5,a+75,n+75,0,0);t.image.onload=function(){cS.to(t,.8,{y:n+50,x:a-425,scaleX:2.5,scaleY:.5,alpha:0,onComplete:function(){oy(5,t)}})};var i=sy("tremorBG",7,a+75,n+75,0,0);i.image.onload=function(){cS.to(i,.8,{y:n+50,x:a-425,scaleX:2.5,scaleY:.5,alpha:0,onComplete:function(){oy(7,i)}})}}function cr(){""===mS.getElementById("backstabId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("backstabId",!1),Ei("backstabId","-900% 0%"),refreshbackstab.kill(),zy.checkRogueSkills())}function mr(){refreshbackstab=cS.to("",.1,{repeat:-1,onRepeat:cr})}function ur(){function e(){if(Wy[a].name){var e=0;Wy[a].lacerate>0&&(e=20),"pierced"===bS.eq[12].type&&(e+=20);var t=(n+e)/100+1,i=yc((ne()/2+Z(oe()/2))*t,.8);"High"===kw.videoSetting&&function(e){if(!Wy[e].name)return;Gw[e].offsetLeft,Wy[e].cX,Gw[e].offsetTop,Wy[e].cY;wl(e,400,"burstRed");for(var a=0;a<=6;a++)Xi(e)}(a),zy.myPhysicalDamage(i,a,"Backstab"),Qa("flshhit3")}}if(!(Yy.mp<20||!0===zH.d.backstabId||Yy.level<7)&&!0!==Eb())if(1!==fk){qi("backstabId",!0),Ei("backstabId","-900% -100%"),cS.delayedCall(15,mr),jy(mS.getElementById("backstabId"),15,"backstabId"),Ep();var a=bL,n=Yy.mp;zy.drawMyMp(-n),e(),Yy.talent6>=20&&cS.delayedCall(.5,function(){e()})}else Ni()}function fr(){""===mS.getElementById("coldbloodId").textContent&&0!=lH&&0!==_w&&0!==Vw&&($NG.coldbloodId.removeClass("disabled").css({backgroundPosition:"-1400% 0"}),qi("coldbloodId",!1),Ei("coldbloodId","-1400% 0%"),refreshColdBlood.kill())}function hr(){refreshColdBlood=cS.to("",.1,{repeat:-1,onRepeat:fr})}function gr(){if(!(!0===zH.d.coldbloodId||Yy.level<9)&&!0!==Eb()){qi("coldbloodId",!0),Ei("coldbloodId","-1400% -100%");var e=6e4-.75*na()*1e3;cS.delayedCall(e/1e3,hr),jy(mS.getElementById("coldbloodId"),e/1e3,"coldbloodId"),fa("Your weapons glimmer with darkness.",3),zy.coldBloodBonus=1,Bi("Cold Blood","coldBloodIcon",0,-448),"High"===kw.videoSetting&&function(){function e(n,t){if(cS.to(a,.1,{startAt:{rotation:~~(360*dS.random())},rotation:360*dS.random(),ease:pS.lin}),1===zy.coldBloodBonus){var n=Gw[bL].offsetLeft+Wy[bL].cX-160,t=Gw[bL].offsetTop+Wy[bL].cY-160;cS.delayedCall(.1,function(){e(n,t)})}else cS.to(a,.33,{force3D:"auto",opacity:0,top:467,left:1128,width:0,height:0,onComplete:function(){Wi(a)}})}var a=Vi(968,307,320,320,"coldBlood");NG.eWin.appendChild(a);var n=Gw[bL].offsetLeft+Wy[bL].cX-160,t=Gw[bL].offsetTop+Wy[bL].cY-160;e(n,t)}(),Qa("chillblood")}}function pr(){""===mS.getElementById("flashpowderId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("flashpowderId",!1),Ei("flashpowderId","-1500% 0%"),refreshflashPowder.kill())}function br(){refreshflashPowder=cS.to("",.1,{repeat:-1,onRepeat:pr})}function vr(){if(!(!0===zH.d.flashpowderId||Yy.level<11)&&!0!==Eb())if(1!==fk){1===Wy[bL].attackStatus&&hi(!0),qi("flashpowderId",!0),Ei("flashpowderId","-1500% -100%"),cS.delayedCall(15,br),jy(mS.getElementById("flashpowderId"),15,"flashpowderId"),fa(Wy[bL].name+" is completely blinded by a burst of flash powder.",3);var e=bL;if(Yy.talent10>=20){var a=ne();Wg(bL),Qa("spellDoneBoom");for(var n=0;n<=4;n++)if((n+1===e||n===e||n-1===e)&&Wy[n].name){var t=yc(a/1.3,.75);zy.myMagicDamage("fire",t,n,ee()," is ignited by burning flash powder"),Ht(n);i=25e3*dS.random()+25e3;Wy[n].level>Yy.level&&(i-=dS.pow(Wy[n].level-Yy.level,1.25)),3===Wy[n].rare&&(i=1500),yr(n,i,"Flash Powder",-480),vv(n,i)}}else{Ht(e);var i=25e3*dS.random()+25e3;Wy[e].level>Yy.level&&(i-=dS.pow(Wy[e].level-Yy.level,1.25)),3===Wy[e].rare&&(i=1500),yr(e,i,"Flash Powder",-480),vv(e,i)}0===zy.autoAttackStatus&&Si(),Qa("cloak")}else Ni()}function yr(e,a,n,t){Ht(e),Cg(e),tp(e),Wy[e].sleepStatus=!0,Wy[e].sleepTimer.kill(),Wy[e].sleepTimer=cS.delayedCall(a/1e3,function(){Wy[e].sleepStatus=!1}),Li(n,e,"sleepIcon",a,t)}function kr(){if(!(!0===zH.d.hyperstrikeId||Yy.level<13)&&!0!==Eb())if(1!==fk){LC<0&&(dk-=LC),LC=-300-dS.round(.666*ia()*10),dk+=LC,Ep();var e=yc(ne()/24,.7);"High"===kw.videoSetting&&Sr(),zy.myPhysicalDamage(e,bL,"Hyper Strike"),fa("You feel your pulse quicken.",3);xC.kill(),xC=cS.delayedCall(30,function(){dk-=LC,LC=0,xC.kill(),ny()});lD.kill(),lD=cS.delayedCall(30,function(){wi("hasteIcon")}),Bi("Hyper Strike","hasteIcon",3e4,-160),Qa("quickness",0,1e3,.7),ny(),zy.drawMyMp(20)}else Ni()}function Sr(){function e(a){var n=640*dS.random()-320;if(n<0)t=-960;else var t=960;var i=sy("whiteparticle50",5,n,560,1280,200);i.alpha=.1,cS.to(i,1.5,{x:t,y:1e3,scaleY:0,alpha:0,onComplete:function(){oy(5,i)}}),a<30&&cS.delayedCall(.012,function(){e(++a)})}mv("#fff",.3,1),e(10)}function Ir(){AC=1}function wr(){""===mS.getElementById("illusivemistId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("illusivemistId",!1),Ei("illusivemistId","-1600% 0%"),refreshillusiveMist.kill())}function Cr(){refreshillusiveMist=cS.to("",.1,{repeat:-1,onRepeat:wr})}function Mr(){if(!(!0===zH.d.illusivemistId||Yy.level<15)&&!0!==Eb()){qi("illusivemistId",!0),Ei("illusivemistId","-1600% -100%"),cS.delayedCall(24,Cr),jy(mS.getElementById("illusivemistId"),24,"illusivemistId"),cS.delayedCall(12,Ir),fa("You dissipate into an ethereal mist.",3),AC=0;var e="illusiveMistIcon";cS.delayedCall(12,function(){wi(e)}),Bi("Illusive Mist",e,12e3,-512),"High"===kw.videoSetting&&function(){function e(a){var n=640*dS.random()-320,t=1280*dS.random(),i=sy("purpleparticle50",5,n,500,1280,300);i.alpha=.1,cS.to(i,1,{x:t,y:250,alpha:0,scaleX:.25,scaleY:.25,alpha:0,ease:pS.Qin,onComplete:function(){oy(5,i)}}),a<40&&cS.delayedCall(a/1e3,function(){e(++a)})}e(10)}(),Qa("fade")}}function Tr(){""===mS.getElementById("staggershotId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("staggershotId",!1),Ei("staggershotId","-1000% 0%"),refreshstaggerShot.kill(),zy.checkRogueSkills())}function Br(){refreshstaggerShot=cS.to("",.1,{repeat:-1,onRepeat:Tr})}function Dr(){if(!(Yy.mp<20||!0===zH.d.staggershotId||Yy.level<17)&&!0!==Eb())if(1!==fk){qi("staggershotId",!0),Ei("staggershotId","-1000% -100%"),cS.delayedCall(25,Br),jy(mS.getElementById("staggershotId"),25,"staggershotId"),Ep();var e=0;Wy[bL].lacerate>0&&(e=20);var a=(Yy.mp+e)/100+Z(oe()/4)+1,n=yc(ne()/10*a,.7),t=50*Yy.mp+1500;zy.drawMyMp(-Yy.mp);var i=bL;"High"===kw.videoSetting&&Lr(i);zy.myPhysicalDamage(n,bL,"Stagger Shot")!==E&&(ao(i,t,-320),Qa("flshhit4"))}else Ni()}function Lr(e,a){function n(e){var o=sy(a,5,t,i,400,400,!0);cS.to(o,.15,{alpha:0,scaleX:.25,scaleY:.25,ease:pS.sout,onComplete:function(){oy(5,o)}}),++e<3&&cS.delayedCall(.05,function(){n(e)})}var t=Gw[e].offsetLeft+Wy[e].cX-200,i=Gw[e].offsetTop+Wy[e].cY-200;a||(a="lineNovaWhite"),n(0)}function Hr(){!0!==Eb()&&!0!==ya()&&(1===tC?(e("#roguehideId").css({backgroundPosition:"-200% -300%"}),fa("You disappear into the shadows.",3),cv("#001"),cS.to(spellCurtain,1,{alpha:.5,ease:pS.Qin}),tC=0):(e("#roguehideId").css({backgroundPosition:"-200% -100%"}),fa("You emerge from the shadows.",3),cS.to(spellCurtain,.5,{alpha:0,ease:pS.Qin}),tC=1))}function Ar(){if(!(!0===zH.d.widowstrikeId||Yy.level<20)&&!0!==Eb())if(1!==fk){1===Wy[bL].attackStatus&&hi(!0),Ep(),1===zy.autoAttackStatus&&"On"===Lmy.autoAttackOption&&Si();var e=bL;zy.drawMyMp(20),fa(Wy[bL].name+" is inflicted by a venomous plague.",3);var a=yc(~~(ne()/16),.9);if(Wy[e].widowStrikeTickCount=0,Wy[e].widowStrikeDamage=a,Wy[e].widowStrikeInterval.kill(),Wy[e].widowStrikeInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e){if(""===Wy[e].name)return Wy[e].widowStrikeInterval.kill(),void(Wy[e].widowStrikeTickCount=0);"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=100*dS.random()-50,i=15*dS.random()+658,o=sy("poisonSpray",7,a,n,25,25,!0);o.image.onload=function(){cS.to(o,.3,{y:i,x:a+t,ease:pS.sin,onComplete:function(){cS.to(o,6+9*dS.random(),{scaleX:3,scaleY:1.5,alpha:0,onComplete:function(){oy(7,o)}})}})}}(e);zy.myDotDamage(Wy[e].widowStrikeDamage,e,"poison","Widow Strike"),Wy[e].widowStrikeTickCount+=1,24===Wy[e].widowStrikeTickCount&&(Wy[e].widowStrikeInterval.kill(),Wy[e].widowStrikeTickCount=0)}(e)}}),0===Wy[e].thornsActive){fa("You are pierced by thorns for "+dS.ceil(Wy[e].level/10)+" damage.",3);var n=dS.ceil(Wy[e].level/10);Yy.hp-=n,xI+=n,Yy.hp<=0&&(fa("You have been slain by a shield of thorns!".fontcolor("ff0000")),ot())}if(0===Wy[e].lavaShieldActive){fa("You are burned by lava for "+dS.ceil(Wy[e].level/6)+" damage.",3);var t=dS.ceil(Wy[e].level/6);Yy.hp-=t,xI+=t,Yy.hp<=0&&(fa("You have been slain by a shield of lava!".fontcolor("ff0000")),ot())}Li("Widow Strike",e,"widowStrikeIcon",24e3,-192),"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX+100,n=Gw[e].offsetTop+Wy[e].cY-100,t=sy("widowStrike",5,a,n,0,0);cS.to(t,.1,{scaleX:1,scaleY:1,x:a-200,ease:pS.Qin,onComplete:function(){cS.to(t,.3,{scaleX:0,scaleY:0,x:a-200,y:n+200,alpha:0,onComplete:function(){oy(5,t)}})}}),function(e,a){e===E&&(e=bL);if(""===Wy[e].name)return;a||(a=1);for(var n=Gw[e].offsetLeft+Wy[e].cX,t=Gw[e].offsetTop+Wy[e].cY-50,i=0;i<a;i++){var o=sy("poisonSpray",7,n,t,25,25,!0);xr(o);var r=n+420*dS.random(),l=55*dS.random()+663;cS.to(o,.2,{y:l,x:r}),function(e){var a=3;e.scaleX<0&&(a=-3);cS.to(e,8+6*dS.random(),{scaleX:a,scaleY:1.5,alpha:0,onComplete:function(){oy(7,e)}})}(o)}}(e,8)}(e),Qa("stab")}else Ni()}function xr(e,a){a===E&&(a=.5),dS.random()<a&&(e.scaleX=-1*e.scaleX)}function Er(){""===mS.getElementById("lobotomizeId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("lobotomizeId",!1),Ei("lobotomizeId","-1100% 0%"),refreshlobotomize.kill(),zy.checkRogueSkills())}function Gr(){refreshlobotomize=cS.to("",.1,{repeat:-1,onRepeat:Er})}function qr(){if(!(Yy.mp<20||!0===zH.d.lobotomizeId||Yy.level<24)&&!0!==Eb())if(1!==fk){qi("lobotomizeId",!0),Ei("lobotomizeId","-1100% -100%"),cS.delayedCall(22,Gr),jy(mS.getElementById("lobotomizeId"),22,"lobotomizeId"),Ep();var e=0;Wy[bL].lacerate>0&&(e=20);var a=(Yy.mp+e)/100+Z(oe()/5)+1,n=yc(ne()/7*a,.8),t=2e3+50*Yy.mp;Wy[bL].dauntless&&(t*=Zi()),zy.drawMyMp(-Yy.mp),fa(Wy[bL].name+" is beset by a torpid haze.",3);var i=bL;"High"===kw.videoSetting&&function(e,a){function n(e){var i=sy("tremorFG",5,t-r,o-50,2*r,50);i.image.onload=function(){cS.to(i,.5,{y:o-250,onComplete:function(){oy(5,i)}})};var l=sy("tremorBG",7,t-r,o-50,2*r,50);l.image.onload=function(){cS.to(l,.5,{y:o-250,onComplete:function(){oy(7,l)}})},++e<a&&cS.delayedCall(.05,function(){n(e)})}a||(a=1);var t=Gw[e].offsetLeft+Wy[e].cX,i=Wy[e].imageHeight,o=Gw[e].offsetTop+i,r=Wy[e].imageWidth/2+40;n(0)}(i,6);zy.myPhysicalDamage(n,bL,"Lobotomize")!==E&&bp(i,t,-352),Qa("handofgod")}else Ni()}function Pr(){""===mS.getElementById("ancientwillId").textContent&&0!=lH&&(qi("ancientwillId",!1),Ei("ancientwillId","-1700% 0%"),refreshancientwill.kill(),qC=!1,zy.checkRogueSkills())}function Qr(){refreshancientwill=cS.to("",.1,{repeat:-1,onRepeat:Pr})}function Rr(){if((1!==Vw||1!==Xw||1!==_w)&&!0!==US&&!(!0===zH.d.ancientwillId||Yy.level<28)){if(qi("ancientwillId",!0),Ei("ancientwillId","-1700% -100%"),qC=!0,GC.kill(),GC=cS.delayedCall(20,Qr),jy(mS.getElementById("ancientwillId"),20,"ancientwillId"),fa("An ancient force animates your spirit.",3),0===Vw||0===Xw||0===_w){(EC+=2)>5&&(EC=5),Bi("Mirage Strike","mirageStrikeIcon",0,-224);e("<div>").css({width:32,height:32,color:"#0f0",position:"absolute",fontSize:14,top:22,left:2,padding:0,background:"transparent",zIndex:76}).attr("id","mirageStrikeCount").addClass("blackOutline3").appendTo("#mirageStrikeIcon").html(EC);zy.drawMyMp(40)}Vw=1,KL.kill(),0===Xw&&(qi("runId",!1),Ei("runId","-100% -200%"),OL.kill()),Xw=1,YL.kill(),_w=1,e("#mobBashIcon,#mobFearIcon,#mobRootIcon").remove(),dH.kill(),Ap(),zy.checkRogueSkills(),"High"===kw.videoSetting&&Fr(),Qa("cobra")}}function Fr(){function e(a){var n=20*dS.random()+5,t=sy("yellowparticle50",5,1290*dS.random(),50*dS.random()+497,n,n);t.image.onload=function(){cS.to(t,.5,{scaleX:0,scaleY:0,x:"+="+n/2,y:"+="+(50+n/2),ease:pS.Qin,onComplete:function(){oy(5,t)}})},a<40&&cS.delayedCall(.025,function(){e(++a)})}mv("#ffa",.3,1),e(0)}function Nr(){""===mS.getElementById("miragestrikeId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("miragestrikeId",!1),Ei("miragestrikeId","-700% 0%"),refreshmirageStrike.kill())}function jr(){refreshmirageStrike=cS.to("",.1,{repeat:-1,onRepeat:Nr})}function zr(){if(!(!0===zH.d.miragestrikeId||Yy.level<32)&&!0!==Eb())if(1!==fk){qi("miragestrikeId",!0),Ei("miragestrikeId","-700% -100%");var a=15e3;Yy.talent4>=20&&(a-=2e3),sS.Bloodletter>=6&&(a-=3e3),cS.delayedCall(a/1e3,jr),jy(mS.getElementById("miragestrikeId"),a/1e3,"miragestrikeId"),Ep();var n=yc(ne()/4,.8);(EC+=2)>5&&(EC=5);var t=bL;if("High"===kw.videoSetting){!function(e){var a=Gw[e].offsetLeft+Wy[e].cX+100,n=Gw[e].offsetTop+Wy[e].cY-100,t=sy("mirageStrike",5,a,n,0,0);t.image.onload=function(){cS.to(t,.1,{scaleY:1,scaleX:1,x:a-200,ease:pS.Qin,onComplete:function(){cS.to(t,.1,{scaleX:0,scaleY:0,y:n+200,onComplete:function(){oy(5,t)}})}})}}(t);for(var i=1;i<=EC;i++)!function(e){var a=Gw[e].offsetLeft+Wy[e].cX+100,n=Gw[e].offsetTop+Wy[e].cY-100,t=600*dS.random()-300,i=100*dS.random()-50,o=sy("mirageStrike",5,a+t,n+i,0,0);o.image.onload=function(){cS.to(o,.1,{scaleX:1,scaleY:1,x:a-200+t,ease:pS.Qin,onComplete:function(){cS.to(o,.1,{scaleX:0,scaleY:0,y:n+200+i,onComplete:function(){oy(5,o)}})}})}}(t)}zy.myPhysicalDamage(n,t,"Mirage Strike"),fa("Mirror images appear to defend you.",3);Bi("Mirage Strike","mirageStrikeIcon",0,-224);e("<div>").css({width:32,height:32,color:"#0f0",position:"absolute",fontSize:14,top:22,left:2,padding:0,background:"transparent",zIndex:76}).attr("id","mirageStrikeCount").addClass("blackOutline3").appendTo("#mirageStrikeIcon").html(EC);Qa("summon"),zy.drawMyMp(20)}else Ni()}function Yr(){""===mS.getElementById("prowlinggashId").textContent&&0!==sH&&0!==lH&&0!==_w&&0!==Vw&&(qi("prowlinggashId",!1),Ei("prowlinggashId","-1200% 0%"),refreshprowlingGash.kill(),zy.checkRogueSkills())}function Kr(){refreshprowlingGash=cS.to("",.1,{repeat:-1,onRepeat:Yr})}function Wr(){function e(a){if(0!==Ab()){var o=hb();Qa("slice"),"High"===kw.videoSetting&&function(e){if(!Wy[e].name)return;var a=Gw[e].offsetLeft+Wy[e].cX+200,n=Gw[e].offsetTop+Wy[e].cY-200,t=sy("prowlingGash",5,a,n,0,0);t.image.onload=function(){cS.to(t,.1,{scaleX:2,scaleY:2,x:a-400,ease:pS.Qin,onComplete:function(){oy(5,t)}})};var i=sy("prowlingGash",5,a,n,0,0);i.image.onload=function(){cS.to(i,.1,{scaleX:2,scaleY:2,x:a-400,ease:pS.Qin,onComplete:function(){cS.to(i,1,{startAt:{alpha:.2},alpha:0,onComplete:function(){oy(5,i)}})}})}}(o);var r=(t+n)/100+1,l=yc((ne()/8+Z(oe()/3))*r,.5);zy.myPhysicalDamage(l,o,"Prowling Gash"),a<i&&cS.delayedCall(.125,function(){e(++a)})}}if(!(Yy.mp<20||!0===zH.d.prowlinggashId||Yy.level<38)&&!0!==Eb())if(1!==fk){qi("prowlinggashId",!0),Ei("prowlinggashId","-1200% -100%");var a=3e4;Yy.talent12>=20&&(a=12e3),cS.delayedCall(a/1e3,Kr),jy(mS.getElementById("prowlinggashId"),a/1e3,"prowlinggashId"),Ep();var n=0;Wy[bL].lacerate>0&&(n=20);var t=Yy.mp,i=(Yy.mp+n)/20*1.25;zy.drawMyMp(-t),Yy.talent12>=20&&(i*=2),i=~~i,e(1)}else Ni()}function Or(){if(!0!==zH.d.tigerstrikeId&&!0!==Eb())if(1!==fk){Ep();for(var e=bL-1;e<=bL+1;e++)if(e>=0&&Wy[e].name){var a=yc(ne()/16,.5);"High"===kw.videoSetting&&function(e){function a(n){var t=Gw[e].offsetLeft+Wy[e].cX+100,i=Gw[e].offsetTop+Wy[e].cY-(150-50*n),o=sy("tigerStrike",5,t,i,0,0);o.image.onload=function(){cS.to(o,.125,{x:t-200,scaleX:1,scaleY:1,ease:pS.Qin,onComplete:function(){cS.to(o,.125,{y:i+200,scaleX:0,scaleY:0,onComplete:function(){oy(5,o)}})}})},++n<3&&cS.delayedCall(.025,function(){a(n)})}a(0)}(e),zy.myPhysicalDamage(a,e,"Tiger Strike")}zy.drawMyMp(5)}else Ni()}function Xr(){if(!(Yy.mp<20||!0===zH.d.cranekickId||Yy.level<2)&&!0!==Eb())if(1!==fk){Ep();var e=Yy.mp,a=bL;!function(){Qa("flshhit5");for(var n=a-1;n<=a+1;n++)if(n>=0&&n<=4&&Wy[n].name){"High"===kw.videoSetting&&Vr(n);var t=1+e/200,i=yc(ne()/9*(1+bS.eq[11].armor/80)*t,.7);zy.myPhysicalDamage(i,n,"Crane Kick")}}(),Yy.talent10>=20&&cS.delayedCall(.5,function(){!function(){"High"===kw.videoSetting&&Vr(a);var n=1+e/200,t=yc(ne()/9*(1+bS.eq[11].armor/80)*n,.7);zy.myPhysicalDamage(t,a,"Crane Kick")}()}),zy.drawMyMp(-20)}else Ni()}function Vr(e){var a=Gw[e].offsetLeft+Wy[e].cX-150,n=Gw[e].offsetTop+Wy[e].cY+150,t=sy("craneKick",5,a,n,0,0);t.image.onload=function(){cS.to(t,.15,{scaleY:1.5,scaleX:1.5,y:n-300,ease:pS.Qin,onComplete:function(){cS.to(t,.1,{scaleX:0,scaleY:0,x:a+300,onComplete:function(){oy(5,t)}})}})}}function _r(){""===mS.getElementById("feigndeathId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("feigndeathId",!1),Ei("feigndeathId","-1300% 0%"),zy.checkMonkSkills(),refreshfeignDeath.kill())}function $r(){refreshfeignDeath=cS.to("",.1,{repeat:-1,onRepeat:_r})}function Ur(){if(!(Yy.level<5)&&!0!==zH.d.feigndeathId&&!0!==Eb()){if(!0===ya()){if(qi("feigndeathId",!0),Ei("feigndeathId","-1300% -100%"),cS.delayedCall(15,$r),jy(mS.getElementById("feigndeathId"),15,"feigndeathId"),dS.random()>.55)return fa("You fall to the ground. Convinced of your death, the enemy leaves the battle."),tC=0,void tt();fa("You fall to the ground, but nobody is fooled this time.")}else{if(0===tC)return;Ei("feigndeathId","-1300% -100%"),fa("You feign your death."),tC=0}var e="death_mb";"Female"===Yy.gender&&(e="death_fl"),Qa(e)}}function Jr(){Kw=!1,ny()}function Zr(){""===mS.getElementById("eaglestrikeId").textContent&&0!=lH&&0!==_w&&0!==Vw&&($NG.eaglestrikeId.removeClass("disabled").css({backgroundPosition:"-400% 0"}),qi("eaglestrikeId",!1),Ei("eaglestrikeId","-400% 0%"),zy.checkMonkSkills(),refresheagleStrike.kill())}function el(){refresheagleStrike=cS.to("",.1,{repeat:-1,onRepeat:Zr})}function al(){if(!(!0===zH.d.eaglestrikeId||Yy.level<3)&&!0!==Eb())if(1!==fk){qi("eaglestrikeId",!0),Ei("eaglestrikeId","-400% -100%"),cS.delayedCall(12,el),jy(mS.getElementById("eaglestrikeId"),12,"eaglestrikeId"),Ep();var e=bL,a=yc(ne()/10,.9);"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("whiteLight3",5,a-200,n-720,400,400,!0);t.image.onload=function(){t.alpha=.2,cS.to(t,.5,{y:n-175,ease:pS.xout,onComplete:function(){cS.to(t,.25,{scaleX:0,scaleY:0,onComplete:function(){oy(5,t)}})}})};var i=sy("eagleStrike",5,a-60,n-352,0,0,!0);i.image.onload=function(){cS.to(i,.5,{scaleX:1,scaleY:1,y:"+=100",ease:pS.xout,onComplete:function(){cS.to(i,.25,{scaleX:0,scaleY:0,onComplete:function(){oy(5,i)}})}}),wl(e)}}(e);var n=zy.myPhysicalDamage(a,e,"Eagle Strike");Yy.talent1>=20&&n!==E&&(Qa("flshhit3"),ao(e,3e3,"-128px")),zy.drawMyMp(5),Kw=!0,cS.delayedCall(4,Jr),ny();cS.delayedCall(4,function(){wi("eagleStrikeIcon")}),Bi("Eagle Strike","eagleStrikeIcon",4e3,-128)}else Ni()}function nl(){""===mS.getElementById("windmillkickId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("windmillkickId",!1),Ei("windmillkickId","-900% 0%"),zy.checkMonkSkills(),refreshwindmillKick.kill())}function tl(){refreshwindmillKick=cS.to("",.1,{repeat:-1,onRepeat:nl})}function il(){if(!(Yy.mp<25||!0===zH.d.windmillkickId||Yy.level<7)&&!0!==Eb())if(1!==fk){var e=25e3;sS.Friar>=6&&(e-=13e3),qi("windmillkickId",!0),Ei("windmillkickId","-900% -100%"),cS.delayedCall(e/1e3,tl),jy(mS.getElementById("windmillkickId"),e/1e3,"windmillkickId"),Ep();var a=yc(ne()/2.5*(1+bS.eq[11].armor/60),.8),n=bL;if(Wy[n].spellActive.kill(),Ht(n),"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX-150,n=sy("windmillKick",7,a-600,670,1500,0);n.image.onload=function(){n.alpha=.3,cS.to(n,.2,{scaleY:3.5,y:-230,ease:pS.Qin,onComplete:function(){cS.to(n,.5,{alpha:0,scaleX:10.5,scaleY:1,x:a-900,onComplete:function(){oy(7,n)}})}})};var t=sy("windmillKick",5,a,670,300,0);t.image.onload=function(){cS.to(t,.2,{scaleY:3.5,y:-230,ease:pS.Qin,onComplete:function(){cS.to(t,.5,{alpha:0,scaleY:1,onComplete:function(){oy(5,t)}})}}),cS.delayedCall(.15,fp,[a+150,600,5])}}(n),zy.myPhysicalDamage(a,n,"Windmill Kick"),zy.drawMyMp(-25),Qa("flshhit4"),dp(1e3),Yy.talent5>=20){Qa("novaice"),fo("frostNova");for(var t=0;t<=4;t++)if(Wy[t].name){a=yc(ne()/3,.85);zy.myMagicDamage("cold",a,t,ee(),"Wave of Frost")!==E&&hu(t,7e3,-288)}}}else Ni()}function ol(){""===mS.getElementById("mendId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("mendId",!1),Ei("mendId","-1400% 0%"),zy.checkMonkSkills(),refreshmend.kill())}function rl(){refreshmend=cS.to("",.1,{repeat:-1,onRepeat:ol})}function ll(){if(!(!0===zH.d.mendId||Yy.level<11)&&!0!==Eb()){qi("mendId",!0),Ei("mendId","-1400% -100%"),cS.delayedCall(30,rl),jy(mS.getElementById("mendId"),30,"mendId");var e=dS.round(.25*Yy.maxHp);zy.popupHeal(e),fa("You mend your wounds.",3),Lu("yellow"),Qa("spellCastHeal3")}}function sl(){tk+=333,Ww=!1,ny()}function dl(){""===mS.getElementById("cheetahstrikeId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("cheetahstrikeId",!1),Ei("cheetahstrikeId","-500% 0%"),zy.checkMonkSkills(),refreshcheetahStrike.kill())}function cl(){refreshcheetahStrike=cS.to("",.1,{repeat:-1,onRepeat:dl})}function ml(){if(!(!0===zH.d.cheetahstrikeId||Yy.level<17)&&!0!==Eb())if(1!==fk){qi("cheetahstrikeId",!0),Ei("cheetahstrikeId","-500% -100%"),cS.delayedCall(30,cl),jy(mS.getElementById("cheetahstrikeId"),30,"cheetahstrikeId"),Ep();n=yc(ne()/10,.8);"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("whiteLight3",7,a-1280,n-720,2560,994);t.image.onload=function(){t.alpha=.1,cS.to(t,.5,{y:n-636,x:a-1280,ease:pS.xout,onComplete:function(){oy(7,t)}})};var i=sy("cheetahStrike",5,a-75,n-300,0,0,!0);i.image.onload=function(){cS.to(i,.5,{y:"+=100",scaleX:1,scaleY:1,ease:pS.xout,onComplete:function(){cS.to(i,.25,{scaleX:0,scaleY:0,onComplete:function(){oy(5,i)}})}}),wl(e)}}(bL),zy.myPhysicalDamage(n,bL,"Cheetah Strike"),zy.drawMyMp(5),!0===Ww&&(BC.kill(),tk+=333),Ww=!0,tk-=333,BC.kill(),BC=cS.delayedCall(12,sl);cS.delayedCall(12,function(){wi("hasteIcon")}),Bi("Cheetah Strike","hasteIcon",12e3,-160),Qa("quickness",0,1e3,.7),ny();var e=bL;if(Yy.talent6>=20){Qa("lightning2");for(var a=0;a<=4;a++)if(Wy[a].name&&a>=e-1&&a<=e+1){"High"===kw.videoSetting&&ou(a);var n=yc(ne()/1.5,.6);zy.myMagicDamage("lightning",n,a,ee(),"Thunderbolt")}}}else Ni()}function ul(){""===mS.getElementById("ancestralflurryId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("ancestralflurryId",!1),Ei("ancestralflurryId","-1000% 0%"),zy.checkMonkSkills(),refreshancestralFlurry.kill())}function fl(){refreshancestralFlurry=cS.to("",.1,{repeat:-1,onRepeat:ul})}function hl(){if(!(Yy.mp<24||!0===zH.d.ancestralflurryId||Yy.level<32)&&!0!==Eb())if(1!==fk){qi("ancestralflurryId",!0),Ei("ancestralflurryId","-1000% -100%"),cS.delayedCall(35,fl),jy(mS.getElementById("ancestralflurryId"),35,"ancestralflurryId"),Ep();for(var e=ne(),a=180;a<=2160;a+=180)TC=cS.delayedCall(a/1e3,function(){if(Wy[bL].name){Qa("flshhit"+~~(3*dS.random()+5)),"High"===kw.videoSetting&&gl(bL);var a=yc(e/14,.5);zy.myPhysicalDamage(a,bL,"Ancestral Flurry")}});zy.drawMyMp(-24),dp(2160)}else Ni()}function gl(e){var a=Gw[e].offsetLeft+Wy[e].cX-25,n=Gw[e].offsetTop+Wy[e].cY-25,t=120*dS.random()-60+a,i=80*dS.random()-40+n,o=sy("smoke",5,t,i,0,0,!0);o.image.onload=function(){o.alpha=.2,cS.to(o,.5,{delay:.2,alpha:0,scaleX:6,scaleY:6,onComplete:function(){oy(5,o)}})};var r=sy("ancestralFlurry",5,t,i,0,0,!0);r.image.onload=function(){cS.to(r,.125,{scaleY:2,scaleX:2,onComplete:function(){oy(5,r)}})};var l=sy("ancestralFlurry2",5,t,i,0,0,!0);l.image.onload=function(){cS.to(l,.033,{scaleX:2,scaleY:2,onComplete:function(){oy(5,l)}})}}function pl(){""===mS.getElementById("stonefistsId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("stonefistsId",!1),Ei("stonefistsId","-1500% 0%"),zy.checkMonkSkills(),refreshstoneFists.kill())}function bl(){refreshstoneFists=cS.to("",.1,{repeat:-1,onRepeat:pl})}function vl(){!0===zH.d.stonefistsId||Yy.level<9||!0!==Eb()&&(qi("stonefistsId",!0),Ei("stonefistsId","-1500% -100%"),cS.delayedCall(20,bl),jy(mS.getElementById("stonefistsId"),20,"stonefistsId"),fa("You assume a defensive stance, ready to counterattack.",3),eS=0,cS.delayedCall(3,function(){eS=1}),"High"===kw.videoSetting&&function(){function e(a){var n=50*dS.random()+25,t=200*dS.random()-100+320,i=200*dS.random()-100+960,o=80*dS.random()-40+440,r=80*dS.random()-40+440,l=sy("redparticle50",5,t,720,n,n);l.image.onload=function(){cS.to(l,1,{x:t+n/2,y:o+25+n/2,scaleX:0,scaleY:0,onComplete:function(){oy(5,l)}})};var s=sy("redparticle50",5,i,720,n,n);s.image.onload=function(){cS.to(s,1.2,{x:i+n/2,y:r+25+n/2,scaleX:0,scaleY:0,onComplete:function(){oy(5,s)}})},a<25&&cS.delayedCall(.1,function(){e(++a)})}mv("#f22222",.3,1);e(0)}())}function yl(){Zk=1}function kl(){""===mS.getElementById("cobrastrikeId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("cobrastrikeId",!1),Ei("cobrastrikeId","-600% 0%"),zy.checkMonkSkills(),refreshcobraStrike.kill())}function Sl(){refreshcobraStrike=cS.to("",.1,{repeat:-1,onRepeat:kl})}function Il(){if(!(!0===zH.d.cobrastrikeId||Yy.level<20)&&!0!==Eb())if(1!==fk){qi("cobrastrikeId",!0),Ei("cobrastrikeId","-600% -100%"),cS.delayedCall(20,Sl),jy(mS.getElementById("cobrastrikeId"),20,"cobrastrikeId"),Ep();var e=yc(ne()/20,.5);"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("whiteLight3",7,a-1280,n-720,2560,994);t.image.onload=function(){t.alpha=.1,cS.to(t,.5,{y:n-619,x:a-1280,ease:pS.xout,onComplete:function(){oy(7,t)}})};var i=sy("cobraStrike",5,a-70,n-307,0,0,!0);i.image.onload=function(){cS.to(i,.5,{y:"+=100",scaleX:1,scaleY:1,ease:pS.xout,onComplete:function(){cS.to(i,.25,{scaleX:0,scaleY:0,onComplete:function(){oy(5,i)}})}}),wl(e)}}(bL),zy.myPhysicalDamage(e,bL,"Cobra Strike"),zy.drawMyMp(5),Zk=0,cS.delayedCall(15,yl);cS.delayedCall(15,function(){wi("cobraStrikeIcon")}),Bi("Cobra Strike","cobraStrikeIcon",15e3,-192)}else Ni()}function wl(e,a,n){var t=Gw[e].offsetLeft+Wy[e].cX-100,i=Gw[e].offsetTop+Wy[e].cY-100;a||(a=250),n||(n="burst");var o=sy(n,5,t,i,0,0,!0);o.image.onload=function(){cS.to(o,.125,{scaleX:a/200,scaleY:a/200,alpha:0,onComplete:function(){oy(5,o)}})}}function Cl(){""===mS.getElementById("chakrablastId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("chakrablastId",!1),Ei("chakrablastId","-1200% 0%"),zy.checkMonkSkills(),refreshchakraBlast.kill())}function Ml(){refreshchakraBlast=cS.to("",.1,{repeat:-1,onRepeat:Cl})}function Tl(){if(!(Yy.mp<35||!0===zH.d.chakrablastId||Yy.level<24)&&!0!==Eb())if(1!==fk){qi("chakrablastId",!0),Ei("chakrablastId","-1200% -100%"),cS.delayedCall(30,Ml),jy(mS.getElementById("chakrablastId"),30,"chakrablastId"),Ep();var e=yc(ne()/5,.8);"High"===kw.videoSetting&&function(e){function a(e){dS.random();var i=500*dS.random()-250+n,o=200*dS.random()-100+t;if(i>n)r=1.01*i+12;else var r=.99*i+12;var l=sy("greenparticle50",5,i,o,25,25);l.image.onload=function(){cS.to(l,.75,{scaleX:0,scaleY:0,x:r,y:o+37,onComplete:function(){oy(5,l)}})},e<40&&cS.delayedCall(.015,function(){a(++e)})}var n=Gw[e].offsetLeft+Wy[e].cX,t=Gw[e].offsetTop+Wy[e].cY,i=sy("chakraBlast",5,n,530,0,0);i.image.onload=function(){cS.to(i,.25,{scaleY:2,scaleX:2,y:405,x:n-300,alpha:.25,onComplete:function(){cS.to(i,1.2,{alpha:0,onComplete:function(){oy(5,i)}})}})};var o=sy("chakraBlast",5,n,530,0,0);o.image.onload=function(){cS.to(o,.2,{scaleY:2,scaleX:2,y:405,x:n-300,alpha:0,onComplete:function(){oy(5,o)}})};a(0)}(bL),zy.myPhysicalDamage(e,bL,"Chakra Blast",0,"range"),zy.drawMyMp(-35),Qa("handofgod"),dp(1e3)}else Ni()}function Bl(){""===mS.getElementById("intimidationId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("intimidationId",!1),Ei("intimidationId","-1600% 0%"),zy.checkMonkSkills(),refreshintimidation.kill())}function Dl(){refreshintimidation=cS.to("",.1,{repeat:-1,onRepeat:Bl})}function Ll(){if(!(!0===zH.d.intimidationId||Yy.level<13)&&!0!==Eb())if(1!==fk){qi("intimidationId",!0),Ei("intimidationId","-1600% -100%"),cS.delayedCall(45,Dl),jy(mS.getElementById("intimidationId"),45,"intimidationId");var e=bL,a=8e3*dS.random()+12e3;Yy.talent3>=20&&(a*=2),Wy[e].dauntless&&(a*=Zi()),a<3e3&&(a=3e3),tc(e,a,-512,"Your imposing aura strikes fear into "+Wy[e].name),Qa("spellCastEvoke2")}else Ni()}function Hl(){""===mS.getElementById("flyingkickId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("flyingkickId",!1),Ei("flyingkickId","-1100% 0%"),zy.checkMonkSkills(),refreshflyingKick.kill())}function Al(){refreshflyingKick=cS.to("",.1,{repeat:-1,onRepeat:Hl})}function xl(){if(!(Yy.mp<25||!0===zH.d.flyingkickId||Yy.level<28)&&!0!==Eb())if(1!==fk){qi("flyingkickId",!0),Ei("flyingkickId","-1100% -100%"),cS.delayedCall(24,Al),jy(mS.getElementById("flyingkickId"),24,"flyingkickId"),Ep();a=yc(ne()/1.2*(1+bS.eq[11].armor/40),.8);El(bL),zy.myPhysicalDamage(a,bL,"Flying Kick"),zy.drawMyMp(-25),Qa("flshhit3"),dp(1e3),sS.Grandmaster>=6&&ao(bL,6500,-352);var e=bL;if(Yy.talent7>=20){Qa("sanctuary"),hu(e,3e3,-352);a=yc(ne()/4,.9);zy.myMagicDamage("cold",a,e,ee(),"Ice Bolt");a=yc(ne()/2.6,.7);zy.myMagicDamage("fire",a,e,ee(),"Fire Bolt");var a=yc(ne()/2,.3);zy.myMagicDamage("lightning",a,e,ee(),"Static Bolt")}}else Ni()}function El(e){if("High"===kw.videoSetting){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("flyingKick",5,a+150,n+150,0,0);t.image.onload=function(){cS.to(t,.15,{scaleX:1.5,scaleY:1.5,y:n-150,x:a-150,onComplete:function(){cS.to(t,.25,{alpha:0,ease:pS.lin,onComplete:function(){oy(5,t)}})}})};var i=sy("lineNova",7,a-200,n-200,400,400,!0);i.image.onload=function(){cS.to(i,.15,{alpha:.3,scaleX:1.25,scaleY:1.25,onComplete:function(){cS.to(i,.45,{alpha:0,scaleX:2,scaleY:2,ease:pS.lin,onComplete:function(){oy(7,i)}})}})}}}function Gl(){""===mS.getElementById("dragonstrikeId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("dragonstrikeId",!1),Ei("dragonstrikeId","-700% 0%"),zy.checkMonkSkills(),refreshdragonStrike.kill())}function ql(){refreshdragonStrike=cS.to("",.1,{repeat:-1,onRepeat:Gl})}function Pl(){if(!(!0===zH.d.dragonstrikeId||Yy.level<38)&&!0!==Eb())if(1!==fk){qi("dragonstrikeId",!0),Ei("dragonstrikeId","-700% -100%"),cS.delayedCall(20,ql),jy(mS.getElementById("dragonstrikeId"),20,"dragonstrikeId"),Ep();var e="Dragon Strike",a=bL;zy.drawMyMp(12),"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("whiteLight3",5,a-1280,n-720,2560,994);t.image.onload=function(){t.alpha=.2,cS.to(t,.5,{y:n-601,x:a-1280,ease:pS.xout,onComplete:function(){oy(5,t)}})};var i=sy("dragonStrike",5,a-65,n-326,0,0,!0);i.image.onload=function(){cS.to(i,.5,{scaleX:1,scaleY:1,y:"+=100",ease:pS.xout,onComplete:function(){cS.to(i,.25,{scaleX:0,scaleY:0,onComplete:function(){oy(5,i)}})}}),wl(e,250,"burstRed")}}(a);i=yc(ne()/10,.8);zy.myMagicDamage("fire",i,a,ee(),e);i=yc(ne()/10,.8);zy.myMagicDamage("fire",i,a,ee(),e);i=yc(ne()/10,.8);zy.myMagicDamage("fire",i,a,ee(),e);var n=a-1,t=a+1;if(n>=0&&""!==Wy[n].name){i=yc(ne()/10,.8);zy.myMagicDamage("fire",i,n,ee(),e)}if(t<=4&&""!==Wy[t].name){var i=yc(ne()/10,.8);zy.myMagicDamage("fire",i,t,ee(),e)}dp(1e3),Qa("drakesat")}else Ni()}function Ql(){aS=1}function Rl(){""===mS.getElementById("innerpeaceId").textContent&&0!=lH&&0!==_w&&0!==Vw&&(qi("innerpeaceId",!1),Ei("innerpeaceId","-1700% 0%"),zy.checkMonkSkills(),refreshinnerPeace.kill())}function Fl(){refreshinnerPeace=cS.to("",.1,{repeat:-1,onRepeat:Rl})}function Nl(){if(!(!0===zH.d.innerpeaceId||Yy.level<15)&&!0!==Eb()){qi("innerpeaceId",!0),Ei("innerpeaceId","-1700% -100%");var e=75e3;Yy.talent3>=20&&(e=6e4),cS.delayedCall(e/1e3,Fl),jy(mS.getElementById("innerpeaceId"),e/1e3,"innerpeaceId"),aS=0,cS.delayedCall(10,Ql),fa("Your spirit embraces a tranquil resolve.",3);cS.delayedCall(10,function(){wi("innerPeaceIcon")}),Bi("Inner Peace","innerPeaceIcon",1e4,-544),"High"===kw.videoSetting&&jl(),Qa("holylight")}}function jl(){var e=sy("whiteRays",5,-384,-384,2560,2560,!0);e.image.onload=function(){cS.to(e,1.5,{alpha:0,ease:pS.Qin});var a=45*dS.random()+45,n=a+120;dS.random();cS.set(e,{rotation:a}),cS.to(e,1.5,{rotation:n,ease:pS.lin,onComplete:function(){oy(5,e)}})};var a=sy("whiteRays",5,-384,-384,2560,2560,!0);a.image.onload=function(){cS.to(a,1.5,{alpha:0,ease:pS.Qin})},cS.set(a,{rotation:s2}),cS.to(a,1.5,{rotation:z2,ease:pS.lin,onComplete:function(){oy(5,a)}});var n=sy("whiteLight3",5,440,442,400,400,!0);n.image.onload=function(){cS.to(n,1.25,{scaleX:0,scaleY:0,alpha:0})}}function zl(){""===mS.getElementById("palslamId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("palslamId",!1),Ei("palslamId","-300% 0%"),refreshpalSlam.kill())}function Yl(){refreshpalSlam=cS.to("",.1,{repeat:-1,onRepeat:zl})}function Kl(){if(!(!0===zH.d.palslamId||Yy.level<2)&&!0!==Eb())if(1!==fk){qi("palslamId",!0),Ei("palslamId","-300% -100%"),cS.delayedCall(12,Yl),jy(mS.getElementById("palslamId"),12,"palslamId"),Ep();var e=yc(ne()/4*(1+bS.eq[13].armor/80),.7),a=bL;"High"===kw.videoSetting&&to(a);zy.myPhysicalDamage(e,a,"Slam")!==E&&(ao(a,3500,-96),Qa("shldblk"))}else Ni()}function Wl(e){var a=yc(ne()/5,.8);_l(e),Qa("holybolt"),cS.delayedCall(.25,function(){zy.myPhysicalDamage(a,e,"Repudiation",0,"range")})}function Ol(){""===mS.getElementById("rebukeId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("rebukeId",!1),Ei("rebukeId","-400% 0%"),refreshrebuke.kill())}function Xl(){refreshrebuke=cS.to("",.1,{repeat:-1,onRepeat:Ol})}function Vl(){if(!0!==zH.d.rebukeId&&!0!==Eb())if(1!==fk){qi("rebukeId",!0),Ei("rebukeId","-400% -100%"),cS.delayedCall(8,Xl),jy(mS.getElementById("rebukeId"),8,"rebukeId"),Ep();n=yc(ne()/9,.8);"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX+100,n=Gw[e].offsetTop+Wy[e].cY-100,t=sy("rebuke",5,a,n,0,0);t.image.onload=function(){cS.to(t,.1,{scaleX:1,scaleY:1,x:a-200,ease:pS.Qin,onComplete:function(){cS.to(t,.1,{scaleX:0,scaleY:0,y:n+200,onComplete:function(){oy(5,t)}})}})};var i=sy("rebuke",5,a,n,0,0);i.image.onload=function(){cS.to(i,.1,{scaleX:1,scaleY:1,x:a-200,alpha:.2,ease:pS.Qin,onComplete:function(){cS.to(i,.5,{alpha:0,onComplete:function(){oy(5,i)}})}})}}(bL),zy.myPhysicalDamage(n,bL,"Rebuke"),dp(1e3);a=bL;if(Yy.talent5>=20){"High"===kw.videoSetting&&ou(bL);n=yc(ne()/2.2,.75);zy.myMagicDamage("lightning",n,bL,ee(),"Thunderbolt"),Qa("lightning2");for(var e=0;e<=3;e++){var a=gb();if(Wy[a]!==E&&Wy[a].name){"High"===kw.videoSetting&&ou(a);var n=yc(ne()/2.2,.75);zy.myMagicDamage("lightning",n,a,ee(),"Thunderbolt")}}}}else Ni()}function _l(e){function a(e){var i=n+(1e3*dS.random()-500),o=70*dS.random()+640,r=sy("yellowparticle50",7,n,t,12,12);r.image.onload=function(){var e=1*dS.random()+.5;cS.to(r,e,{y:o,ease:pS.bout}),cS.to(r,e,{x:i}),cS.to(r,1*dS.random()+3,{delay:1.5,ease:pS.qin,x:"+=6",y:"+=6",scaleX:0,scaleY:0,onComplete:function(){oy(7,r)}})},e<12&&a(++e)}if("High"===kw.videoSetting){var n=Gw[e].offsetLeft+Wy[e].cX,t=Gw[e].offsetTop+Wy[e].cY-60,i=sy("retribution",5,n-100,t-565,200,0);i.image.onload=function(){cS.to(i,.15,{scaleY:1.5,ease:pS.sin}),cS.to(i,.15,{delay:.125,scaleY:0,y:Gw[e].offsetTop+Wy[e].cY-30,ease:pS.sout,onComplete:function(){oy(5,i)}})},cS.delayedCall(.25,function(){a(0)})}}function $l(){if(!0!==zH.d.purgeId&&!0!==Eb())if(1!==fk){Ep();var e=yc(ne()/16,.5),a=bL;"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX+100,n=Gw[e].offsetTop+Wy[e].cY-100,t=sy("purge",5,a,n,0,0);t.image.onload=function(){cS.to(t,.12,{scaleX:1,scaleY:1,x:a-200,ease:pS.Qin,onComplete:function(){cS.to(t,.12,{scaleX:0,scaleY:0,y:n+200,onComplete:function(){oy(5,t)}})}})}}(a),zy.myPhysicalDamage(e,bL,"Purge")}else Ni()}function Ul(){""===mS.getElementById("vengeanceId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("vengeanceId",!1),Ei("vengeanceId","-600% 0%"),refreshvengeance.kill())}function Jl(){refreshvengeance=cS.to("",.1,{repeat:-1,onRepeat:Ul})}function Zl(){if(!0!==zH.d.vengeanceId&&!0!==Eb())if(1!==fk){qi("vengeanceId",!0),Ei("vengeanceId","-600% -100%"),cS.delayedCall(16,Jl),jy(mS.getElementById("vengeanceId"),16,"vengeanceId"),Ep();var e=0,a=Yy.maxHp,n=Yy.hp/a;n>.8?e=yc(ne()/5,.8):n>.6?e=yc(ne()/4,.8):n>.4?e=yc(ne()/3,.8):n>.2?e=yc(ne()/2,.8):n>0&&(e=yc(ne(),.8));var t=bL;"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("vengeance",5,a+100,n-100,0,0);t.image.onload=function(){cS.to(t,.12,{scaleX:1,scaleY:1,x:a-100,ease:pS.Qin,onComplete:function(){cS.to(t,.12,{scaleX:0,scaleY:0,y:n+100,onComplete:function(){oy(5,t)}})}})};var i=sy("vengeanceL",5,a-100,n-100,0,0);i.image.onload=function(){cS.to(i,.12,{scaleX:1,scaleY:1,ease:pS.Qin,onComplete:function(){cS.to(i,.12,{scaleX:0,scaleY:0,x:a+100,y:n+100,onComplete:function(){oy(5,i)}})}})};var o=sy("lineNovaPink",5,a-200,n-200,300,300,!0);o.image.onload=function(){o.alpha=.5,cS.to(o,.12,{scaleX:1,scaleY:1,ease:pS.Qin,onComplete:function(){cS.to(o,.25,{alpha:0,scaleX:1.25,scaleY:1.25,onComplete:function(){oy(5,o)}})}})}}(t);if(zy.myPhysicalDamage(e,t,"Vengeance")!==E&&!0===Wy[t].attackNow&&ao(t,1e3,-192),Qa("zeal"),Yy.talent6>=20){Qa("handofgod"),"High"===kw.videoSetting&&xm(bL,!0);e=yc(ne()/1.3,.4);zy.myMagicDamage("magic",e,bL,ee(),"Holy Bolt");for(var i=0;i<=11;i++)cS.delayedCall(12*dS.random(),function(){var e=gb();if(e!==E){Qa("handofgod"),"High"===kw.videoSetting&&xm(e,!0);var a=yc(ne()/1.3,.4);zy.myMagicDamage("magic",a,e,ee(),"Holy Bolt")}})}}else Ni()}function es(){""===mS.getElementById("layhandsId").textContent&&0!=sH&&(qi("layhandsId",!1),Ei("layhandsId","-700% 0%"),zy.checkPaladinSkills(),refreshlayHands.kill())}function as(){refreshlayHands=cS.to("",.1,{repeat:-1,onRepeat:es})}function ns(){if(!(Yy.hp<=0||!0===US)&&!0!==zH.d.layhandsId){qi("layhandsId",!0),Ei("layhandsId","-700% -100%");var e=3e5-5e3*Ue();cS.delayedCall(e/1e3,as),jy(mS.getElementById("layhandsId"),e/1e3,"layhandsId"),fa("Your hands shimmer with holy light.",3),Qa("spellDoneBuff");var a=yc(.7*Yy.maxHp,.9);zy.popupHeal(a),zy.checkPaladinSkills(),"High"===kw.videoSetting&&function(){function e(a){var n=426*dS.random()+426*dS.random()+426*dS.random(),t=350*dS.random()+150,i=sy("yellowparticle50",5,n,0,15,15);i.image.onload=function(){cS.to(i,.5*dS.random()+1,{scaleX:0,scaleY:0,y:t,onComplete:function(){oy(5,i)}})},a<50&&cS.delayedCall(.033,function(){e(++a)})}mv("#ff7",.3,2);e(0)}(),Yy.talent2>=20&&(Ek=!0,cS.delayedCall(20,function(){Ek=!1}),Bi("Divine Retaliation","layHandsId",2e4,-224))}}function ts(e,a){var n=0;"Magician"===Yy.job&&Yy.talent7>=20&&(n+=12);var t=Z(le())/6.6;t>0&&(n+=t);var i=(e*=1+n/100)*a,o=[];return o[0]="<span class='green'>"+~~i+"</span>",o[1]="<span class='green'>"+~~e+"</span>",o}function is(e){if(0===sH&&xT<=0)if("Bard"!==Yy.job&&Yy.channeling<5*Yy.level&&wt(),"Wizard"===Yy.job&&Yy.talent2>=20);else{var a=10*Wy[e].level;if(a>500&&(a=500),dS.random()*a>je()){var n,t=cI.progress();"Arcane Missiles"===iH||(n=t-.02)<0&&(n=0),cI.progress(n)}}}function os(e){(cI=G()).to(Dw,nH/1e3,{startAt:{scaleX:0},scaleX:1,ease:pS.lin,onComplete:function(){var a=!0;"Bard"===Yy.job?a=!0:0===sH&&(a=!0),!0===a&&(NG.spellbardiv.style.display="none","Bard"!==Yy.job&&zy[e+"Finish"]())}})}function rs(){""===mS.getElementById("greaterhealingId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("greaterhealingId",!1),Ei("greaterhealingId","-800% 0%"),zy.checkPaladinSkills(),refreshgreaterHealing.kill())}function ls(){refreshgreaterHealing=cS.to("",.1,{repeat:-1,onRepeat:rs})}function ss(){!0===zH.d.greaterhealingId||Yy.level<9||!0!==Eb()&&(oH=MH.cost.greaterHealing,Yy.mp<oH||(iH="Greater Healing",nH=ke(2e3),tH="alteration",!1!==Db()&&(Py("blue"),os("greaterHealing"),Qa("spellCastHeal",0,nH))))}function ds(){""===mS.getElementById("holymightId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("holymightId",!1),Ei("holymightId","-900% 0%"),zy.checkPaladinSkills(),refreshholyMight.kill())}function cs(){refreshholyMight=cS.to("",.1,{repeat:-1,onRepeat:ds})}function ms(){!0===zH.d.holymightId||Yy.level<11||!0!==Eb()&&(1!==fk?(oH=MH.cost.holyMight,Yy.mp<oH||(iH="Holy Might",nH=ke(1500),tH="evocation",!1!==Db()&&(Py("magenta"),os("holyMight"),Qa("spellCastEvoke1",0,nH)))):Ni())}function us(){""===mS.getElementById("palrootId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("palrootId",!1),Ei("palrootId","-1000% 0%"),zy.checkPaladinSkills(),refreshpalRoot.kill())}function fs(){refreshpalRoot=cS.to("",.1,{repeat:-1,onRepeat:us})}function hs(){!0===zH.d.palrootId||Yy.level<19||!0!==Eb()&&(1!==fk?(oH=MH.cost.root,Yy.mp<oH||(iH="Root",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("green"),os("palRoot"),Qa("spellCastAbjure",0,nH)))):Ni())}function gs(){""===mS.getElementById("ardentjudgment").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&($NG.ardentjudgment.removeClass("disabled").css({backgroundPosition:"-1100% 0"}),qi("ardentjudgment",!1),Ei("ardentjudgment","-1100% 0%"),refreshardentJudgment.kill())}function ps(){refreshardentJudgment=cS.to("",.1,{repeat:-1,onRepeat:gs})}function bs(){!0===zH.d.ardentjudgment||Yy.level<15||!0!==Eb()&&(1!==fk?(oH=MH.cost.ardentJudgment,Yy.mp<oH||(iH="Ardent Judgment",nH=ke(2e3),tH="evocation",!1!==Db()&&(Py("magenta"),os("ardentJudgment"),Qa("spellCastEvoke1",0,nH)))):Ni())}function vs(){JC=!1,ny()}function ys(){""===mS.getElementById("yaulpId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("yaulpId",!1),Ei("yaulpId","-1200% 0%"),refreshyaulp.kill())}function ks(){refreshyaulp=cS.to("",.1,{repeat:-1,onRepeat:ys})}function Ss(){!0===zH.d.yaulpId||Yy.level<21||!0!==Eb()&&(oH=MH.cost.yaulp,Yy.mp<oH||(iH="Yaulp",nH=ke(1e3),tH="alteration",!1!==Db()&&(Qy("blue"),os("yaulp"),Qa("spellCastEvoke1",0,nH))))}function Is(){!0===zH.d.cleanseId||Yy.level<24||!0!==Eb()&&(oH=MH.cost.cleanse,Yy.mp<oH||(iH="Fervent Prayer",nH=ke(1500),tH="abjuration",!1!==Db()&&(Qy("white"),os("cleanse"),Qa("spellCastHeal",0,nH))))}function ws(){""===mS.getElementById("cleanseId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("cleanseId",!1),Ei("cleanseId","-1300% 0%"),refreshcleanse.kill())}function Cs(){refreshcleanse=cS.to("",.1,{repeat:-1,onRepeat:ws})}function Ms(){Lu("white"),Lh(0,10)}function Ts(){""===mS.getElementById("flashoflightId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("flashoflightId",!1),Ei("flashoflightId","-1400% 0%"),refreshflashOfLight.kill())}function Bs(){refreshflashOfLight=cS.to("",.1,{repeat:-1,onRepeat:Ts})}function Ds(){!0===zH.d.flashoflightId||Yy.level<32||!0!==Eb()&&(1!==fk?(oH=MH.cost.flashOfLight,Yy.mp<oH||(iH="Flash of Light",nH=ke(1500),tH="conjuration",!1!==Db()&&(Qy("yellow"),os("flashOfLight"),Qa("spellCastEvoke1",0,nH)))):Ni())}function Ls(e,a,n){1===Wy[e].attackStatus&&hi(!0),Wy[e].dazeStatus=!0,Wy[e].dazeTimer.kill(),Wy[e].dazeTimer=cS.delayedCall(a/1e3,function(){Zb(e)}),Li("Blind",e,"dazeIcon",a,n)}function Hs(){!0===zH.d.valorId||Yy.level<13||!0!==Eb()&&(oH=MH.cost.valor,Yy.mp<oH||(iH="Valor",nH=ke(4e3),tH="abjuration",!1!==Db()&&(Qy("yellow"),os("valor"),Qa("spellCastAbjure",0,nH))))}function As(){eM=!1,nk-=aM,Zy-=nM,ny(),zy.drawMyHp()}function xs(){!0===zH.d.spiritarmorId||Yy.level<17||!0!==Eb()&&(oH=MH.cost.spiritArmor,Yy.mp<oH||(iH="Spirit Armor",nH=ke(6e3),tH="abjuration",!1!==Db()&&(Qy("blue"),os("spiritArmor"),Qa("spellCastAbjure",0,nH))))}function Es(){iM=!1,nk-=oM,ny()}function Gs(){!0===zH.d.divineprovidenceId||Yy.level<28||!0!==Eb()&&(oH=MH.cost.divineProvidence,Yy.mp<oH||(iH="Divine Providence",nH=ke(2500),tH="abjuration",!1!==Db()&&(Qy("yellow"),os("divineProvidence"),Qa("spellCastAbjure",0,nH))))}function qs(){lM=!1,ik-=sM,ok-=dM,ny()}function Ps(){!0===zH.d.symbolofryltanId||Yy.level<38||!0!==Eb()&&(oH=MH.cost.symbolOfRyltan,Yy.mp<oH||(iH="Symbol of Marshan",nH=ke(4e3),tH="abjuration",!1!==Db()&&(Qy("teal"),os("symbolOfRyltan"),Qa("spellCastAbjure",0,nH))))}function Qs(){cM=!1,Zy-=mM,ny(),zy.drawMyHp()}function Rs(){""===mS.getElementById("rangerkickId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("rangerkickId",!1),Ei("rangerkickId","-300% 0%"),refreshrangerKick.kill())}function Fs(){refreshrangerKick=cS.to("",.1,{repeat:-1,onRepeat:Rs})}function Ns(){if(!(!0===zH.d.rangerkickId||Yy.level<2)&&!0!==Eb())if(1!==fk){qi("rangerkickId",!0),Ei("rangerkickId","-300% -100%"),cS.delayedCall(8,Fs),jy(mS.getElementById("rangerkickId"),8,"rangerkickId"),Ep();var e=bL,a=yc(ne()/6*(1+bS.eq[11].armor/80),.7),n=40+3*$e();100*dS.random()<n&&Ht(e),"High"===kw.videoSetting&&$i(e),zy.myPhysicalDamage(a,e,"Kick")}else Ni()}function js(){if(!0!==zH.d.rapidshotId&&!0!==Eb())if(1!==fk){Ep();var e=3;Yy.talent12>=20&&(e=4),zs(0,e)}else Ni()}function zs(e,a){if(!(e>=a)&&Wy[bL].name){"High"===kw.videoSetting&&function(e){var a=Wy[e].imageWidth/2,n=Wy[e].imageHeight/2,t=Gw[e].offsetLeft+Wy[e].cX,i=Gw[e].offsetTop+Wy[e].cY,o=t+dS.random()*(a-a/2)-50,r=i+dS.random()*(n-n/2)-50,l=sy("rngSmoke",5,o,r,0,0,!0);l.image.onload=function(){cS.to(l,.15,{scaleX:1,scaleY:1}),cS.to(l,1.2,{scaleX:3,scaleY:3,alpha:0,delay:.15,onComplete:function(){oy(5,l)}})};var s=sy("rngFire",5,o-25,r-25,50,50,!0);s.image.onload=function(){cS.to(s,.125,{scaleX:1,scaleY:1,alpha:0,onComplete:function(){oy(5,s)}})};var d=sy("rngFireOut",5,o-25,r-25,50,50,!0);d.image.onload=function(){cS.to(d,.15,{scaleX:1,scaleY:1,alpha:0,onComplete:function(){oy(5,d)}})}}(bL);var n=yc(ne()/16,.2);zy.myPhysicalDamage(n,bL,"Rapid Shot",0,"bow"),Qa("arrow"+~~(3*dS.random()+3)),RC=cS.delayedCall(.25,function(){zs(++e,a)})}}function Ys(){if(!(Yy.level<3)&&!1!==jC){Ei("countershotId","-500% -300%");var e=yc(ne()/3,.8);jC=!1;var a=bL;"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX-50,n=Gw[e].offsetTop+Wy[e].cY-50,t=sy("counterShot",5,a,n,100,100,!0);t.image.onload=function(){t.alpha=.5,cS.to(t,.25,{scaleX:2,scaleY:2,alpha:0,onComplete:function(){oy(5,t)}})};var i=sy("counterShot",5,a,n,100,100,!0);i.image.onload=function(){i.alpha=.5,cS.to(i,.25,{scaleX:.5,scaleY:.5,alpha:0,onComplete:function(){oy(5,i)}})};var o=sy("counterShot",5,a,n,100,100,!0);o.image.onload=function(){o.alpha=.5,cS.to(o,.5,{scaleX:3,scaleY:3,alpha:.1,onComplete:function(){cS.to(o,1.125,{scaleX:4,scaleY:4,alpha:0,onComplete:function(){oy(5,o)}})}})}}(a);var n=zy.myPhysicalDamage(e,a,"Counter Shot",0,"bow");Yy.talent5>=20?n!==E&&(ao(a,1500,"-160px"),Qa("arrowhit")):n!==E&&(Ht(a),Qa("arrowhit"))}}function Ks(e){!1===e&&""!==mS.getElementById("trueshotarrowId").textContent||0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(refreshtrueshotArrow.kill(),qi("trueshotarrowId",!1),Ei("trueshotarrowId","-600% 0%"),mS.getElementById("trueshotarrowId").innerHTML="",zy.checkRangerSkills())}function Ws(){if(!(!0===zH.d.trueshotarrowId||Yy.level<6)&&!0!==Eb())if(1!==fk){qi("trueshotarrowId",!0),Ei("trueshotarrowId","-600% -100%"),FC.kill();var e=3e4;sS.Daimyo>=6&&(e-=6e3),FC=cS.delayedCall(e/1e3,function(){refreshtrueshotArrow=cS.to("",.1,{repeat:-1,onRepeat:Ks})}),jy(mS.getElementById("trueshotarrowId"),e/1e3,"trueshotarrowId"),Ep();var a="Trueshot Arrow",n=bL;Qa("bowdraw"),cS.delayedCall(1.2,function(){if(!(Ab()<1)){Qa("spellDoneBoom");var e=1;Yy.talent7>=20&&e++;for(var t=0;t<=e;t++)"High"===kw.videoSetting&&Os(n),i=yc(5+ne()/2,.8),zy.myPhysicalDamage(i,n,a,0,"bow");if(Yy.talent7>=20&&(n-1>=0&&""!==Wy[n-1].name&&("High"===kw.videoSetting&&Os(n-1),i=yc(5+ne()/2,.8),zy.myPhysicalDamage(i,n-1,a,0,"bow")),n+1<5&&""!==Wy[n+1].name)){"High"===kw.videoSetting&&Os(n+1);var i=yc(5+ne()/2,.8);zy.myPhysicalDamage(i,n+1,a,0,"bow")}kI=0}})}else Ni()}function Os(e){if(Wy[e].name){var a=Wy[e].imageWidth-80,n=Wy[e].imageHeight-80,t=Gw[e].offsetLeft+Wy[e].cX,i=Gw[e].offsetTop+Wy[e].cY,o=t+dS.random()*(a-a/2),r=i+dS.random()*(n-n/2),l=sy("rngSmoke",5,o,r,25,25,!0);l.image.onload=function(){cS.to(l,.15,{scaleX:3,scaleY:3,alpha:0}),cS.to(l,1.2,{scaleX:4,scaleY:4,alpha:0,delay:.15,onComplete:function(){oy(5,l)}})};var s=sy("rngFire",5,o-50,r-50,100,100,!0);s.image.onload=function(){cS.to(s,.25,{scaleX:3,scaleY:3,alpha:0,onComplete:function(){oy(5,s)}})};var d=sy("rngFireOut",5,o-50,r-50,100,100,!0);d.image.onload=function(){cS.to(d,.25,{scaleX:3,scaleY:3,alpha:0,onComplete:function(){oy(5,d)}})};var c=sy("lineNova",5,t-200,i-200,400,400,!0);c.image.onload=function(){c.alpha=.4,cS.to(c,.5,{alpha:0,scaleX:1.25,scaleY:1.25,onComplete:function(){oy(5,c)}})}}}function Xs(){""===mS.getElementById("volleyshotId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("volleyshotId",!1),Ei("volleyshotId","-700% 0%"),zy.checkRangerSkills(),refreshvolleyShot.kill())}function Vs(){refreshvolleyShot=cS.to("",.1,{repeat:-1,onRepeat:Xs})}function _s(){if(!(!0===zH.d.volleyshotId||Yy.level<32)&&!0!==Eb())if(1!==fk){qi("volleyshotId",!0),Ei("volleyshotId","-700% -100%"),cS.delayedCall(20,Vs),jy(mS.getElementById("volleyshotId"),20,"volleyshotId"),Ep(),UC=0;var e=Ab(),a=3;1===e&&(a=5),2===e&&(a=7),3===e&&(a=9),4===e&&(a=12),5===e&&(a=15),!0===NC&&(a+=1);for(var n=0;n<=4;n++)!0===Wy[n].snareStatus&&(a+=1);Yy.talent10>=20&&(a=dS.round(1.5*a)),1!==fk&&$s(a)}else Ni()}function $s(e){UC!==e&&(!function(){var e=gb();if(e===E)return;"High"===kw.videoSetting&&function(e){var a=Wy[e].imageWidth/2,n=Wy[e].imageHeight/2,t=Gw[e].offsetLeft+Wy[e].cX,i=Gw[e].offsetTop+Wy[e].cY,o=t+dS.random()*(a-a/2),r=i+dS.random()*(n-n/2),l=sy("arrow",5,o-400,r-500,50,50);l.image.onload=function(){cS.to(l,.15,{x:o+25,y:r+25,ease:pS.lin,onComplete:function(){oy(5,l)}})};cS.delayedCall(.15,function(){var e=sy("rngSmoke",5,o-50,r-50,0,0,!0);e.image.onload=function(){cS.to(e,.15,{scaleX:1,scaleY:1}),cS.to(e,1.2,{delay:.15,scaleX:3,scaleY:3,alpha:0,onComplete:function(){oy(5,e)}})};var a=sy("rngFire",5,o-50,r-50,50,50,!0);a.image.onload=function(){cS.to(a,.2,{scaleX:1,scaleY:1,alpha:0,onComplete:function(){oy(5,a)}})}})}(e);cS.delayedCall(.15,function(){var a=yc(ne()/12,.6);zy.myPhysicalDamage(a,e,"Volley Shot",0,"bow")})}(),UC+=1,Qa("arrow"+~~(3*dS.random()+3)),cS.delayedCall(.1,function(){$s(e)}))}function Us(){""===mS.getElementById("lighthealingId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("lighthealingId",!1),Ei("lighthealingId","-800% 0%"),zy.checkRangerSkills(),refreshlightHealing.kill())}function Js(){refreshlightHealing=cS.to("",.1,{repeat:-1,onRepeat:Us})}function Zs(){!0===zH.d.lighthealingId||Yy.level<9||!0!==Eb()&&(oH=BH.cost.lightHealing,Yy.mp<oH||(iH="Light Healing",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("teal"),os("lightHealing"),Qa("spellCastHeal",0,nH))))}function ed(){""===mS.getElementById("wardersrift").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("wardersrift",!1),Ei("wardersrift","-1200% 0%"),refreshwardersRift.kill())}function ad(){refreshwardersRift=cS.to("",.1,{repeat:-1,onRepeat:ed})}function nd(){return 30+Fe()/9}function td(){if(!(!0===zH.d.wardersrift||Yy.level<24)&&!0!==Eb())if(1!==fk){if(1===Wy[bL].attackStatus&&hi(!0),oH=BH.cost.wardersRift,!(Yy.mp<oH)){qi("wardersrift",!0),Ei("wardersrift","-1200% -100%"),cS.delayedCall(45,ad),jy(mS.getElementById("wardersrift"),45,"wardersrift");var a=bL;fa(Wy[a].name+" is trapped in a dark rift.",3);var n=35e3;Wy[a].level>Yy.level&&(n-=dS.pow(Wy[a].level-Yy.level,1.2)),n<15e3&&(n=15e3),Wy[a].riftStatus=!0;var t=Wy[a].ID;blur(a,12),cS.delayedCall(n/1e3,function(){Wy[a].riftStatus=!1,t===Wy[a].ID&&blur(a,0),cS.to("#orbIcon"+a,.5,{opacity:0,onComplete:function(){e("#orbIcon"+a).remove()}})}),function(e,a){if(Wy[a].hp<=0)return;var n=dS.ceil(Gw[a].offsetTop+Wy[a].cY),t=dS.ceil(Gw[a].offsetLeft+Wy[a].cX),i=Vi(t,n,0,0,"orbIcon");i.style.opacity=.75,i.id="orbIcon"+a,NG.eWin2.appendChild(i),"High"===kw.videoSetting&&(cS.to(i,1.2,{height:400,width:400,opacity:.75,top:n-200,left:t-200,force3D:"auto",ease:pS.bout}),cS.to(i,40,{rotation:360,force3D:"auto",ease:pS.lin,repeat:-1}))}(0,a),tH="conjuration",qb(),zy.drawMyMp(-oH);Li("Warder's Rift",a,"stasisIcon",n,-384),Qa("novaelec")}}else Ni()}function id(){""===mS.getElementById("igniteId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("igniteId",!1),Ei("igniteId","-1000% 0%"),zy.checkRangerSkills(),refreshignite.kill())}function od(){refreshignite=cS.to("",.1,{repeat:-1,onRepeat:id})}function rd(){!0===zH.d.igniteId||Yy.level<13||!0!==Eb()&&(1!==fk?(oH=BH.cost.ignite,Yy.mp<oH||(iH="Ignite",nH=ke(1500),tH="evocation",!1!==Db()&&(Py("red"),os("ignite"),Qa("spellCastEvoke1",0,nH)))):Ni())}function ld(e){var a=ke(e/1e3).toFixed(2),n=a[2],t=a[3];return"0"===n&&"0"===t?a=(1*a).toFixed(0):"0"===t&&(a=(1*a).toFixed(1)),Q(a)}function sd(){!0===zH.d.faerieflameId||Yy.level<11||!0!==Eb()&&(1!==fk?(oH=BH.cost.faerieFlame,Yy.mp<oH||(iH="Faerie Flame",nH=ke(2e3),tH="conjuration",!1!==Db()&&(Py("blue"),os("faerieFlame"),Qa("spellCastDot",0,nH)))):Ni())}function dd(){""===mS.getElementById("snareId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("snareId",!1),Ei("snareId","-1100% 0%"),zy.checkRangerSkills(),refreshsnare.kill())}function cd(){refreshsnare=cS.to("",.1,{repeat:-1,onRepeat:dd})}function md(){!0===zH.d.snareId||Yy.level<17||!0!==Eb()&&(1!==fk?(oH=BH.cost.snare,Yy.mp<oH||(iH="Snare",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("green"),os("snare"),Qa("spellCastAbjure",0,nH)))):Ni())}function ud(e,a){a||"High"===kw.videoSetting&&function(e){function a(e){var n=200*dS.random(),o=60*dS.random(),r=sy("snare",7,t+n,i+o,100,100,!0);r.image.onload=function(){r.alpha=.3,cS.to(r,15*dS.random()+5,{y:"+=25",scaleX:6,scaleY:2,alpha:0,ease:pS.lin,onComplete:function(){oy(7,r)}})},e<40&&cS.delayedCall(.01,function(){a(++e)})}var n=Gw[e].offsetLeft+Wy[e].cX,t=(Gw[e].offsetTop,Wy[e].cY,n-150),i=575;a(0)}(e),!0!==ac(e)?(fa(Wy[e].name+" is ensnared.",3),Wy[e].snareStatus=!0):fa(Wy[e].name+" resisted Snare.",1)}function fd(){!0===zH.d.shieldofbramblesId||Yy.level<21||!0!==Eb()&&(oH=BH.cost.shieldOfBrambles,Yy.mp<oH||(iH="Shield of Brambles",nH=ke(1500),tH="abjuration",!1!==Db()&&(Qy("yellow"),os("shieldOfBrambles"),Qa("spellCastAbjure",0,nH))))}function hd(){zC=!1}function gd(){""===mS.getElementById("weaponshieldId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("weaponshieldId",!1),Ei("weaponshieldId","-1300% 0%"),zy.checkRangerSkills(),refreshweaponShield.kill())}function pd(){refreshweaponShield=cS.to("",.1,{repeat:-1,onRepeat:gd})}function bd(){if(!(!0===zH.d.weaponshieldId||Yy.level<38)&&!0!==Eb()){qi("weaponshieldId",!0),Ei("weaponshieldId","-1300% -100%"),cS.delayedCall(40,pd),jy(mS.getElementById("weaponshieldId"),40,"weaponshieldId"),Ep(),fa("You deftly twirl your blades."),YC=!0,cS.delayedCall(10,function(){YC=!1});var e="weaponShieldIcon";cS.delayedCall(10,function(){wi(e)}),Bi("Weapon Shield",e,1e4,-416),"High"===kw.videoSetting&&(Qc("whiteLight3"),Lh(0,6))}}function vd(){!0===zH.d.thistlecoatId||Yy.level<15||!0!==Eb()&&(oH=BH.cost.thistlecoat,Yy.mp<oH||(iH="Thistlecoat",nH=ke(2500),tH="abjuration",!1!==Db()&&(Qy("green"),os("thistlecoat"),Qa("spellCastAbjure",0,nH),zy.drawMyHp())))}function yd(){KC=!1,nk-=thistlecoatArmorBoost,ny()}function kd(){!0===zH.d.feetlikecatId||Yy.level<19||!0!==Eb()&&(oH=BH.cost.feetLikeCat,Yy.mp<oH||(iH="Feet Like Cat",nH=ke(2500),tH="abjuration",!1!==Db()&&(Qy("yellow"),os("feetLikeCat"),Qa("spellCastAbjure",0,nH))))}function Sd(){VC=!1,Uy-=_C,ny()}function Id(){!0===zH.d.rangersowId||Yy.level<28||!0!==Eb()&&(oH=BH.cost.spiritOfTheWolf,Yy.mp<oH||(iH="Spirit of the Wolf",nH=ke(3500),tH="alteration",!1!==Db()&&(Qy("teal"),os("spiritOfTheWolf"),Qa("spellCastAbjure",0,nH))))}function wd(){NC=!1,ny()}function Cd(){""===mS.getElementById("shdslamId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("shdslamId",!1),Ei("shdslamId","-300% 0%"),refreshshdSlam.kill())}function Md(){refreshshdSlam=cS.to("",.1,{repeat:-1,onRepeat:Cd})}function Td(){function e(){qi("shdslamId",!0),Ei("shdslamId","-300% -100%"),cS.delayedCall(15,Md),jy(mS.getElementById("shdslamId"),15,"shdslamId")}if(!(!0===zH.d.shdslamId||Yy.level<2)&&!0!==Eb())if(1!==fk){sS.GraveLord>=6?++nw%2==0&&e():e(),Ep();var a=yc(ne()/4*(1+bS.eq[13].armor/80),.7),n=bL;zy.myPhysicalDamage(a,n,"Slam")!==E&&(ao(n,2500,-96),Qa("shldblk")),"High"===kw.videoSetting&&to(n)}else Ni()}function Bd(){if(!0!==zH.d.crescentcleaveId&&!0!==Eb())if(1!==fk){Ep();for(var e=bL,a=e-1;a<=e+1;a++)if(a>=0&&""!==Wy[a].name){var n=yc(ne()/16,.5);"High"===kw.videoSetting&&function(e){var a=Wy[e].imageWidth+200,n=Gw[e].offsetLeft+Wy[e].cX,t=Gw[e].offsetTop+Wy[e].cY,i=sy("crescentCleave",5,n-100,t-100,a,a,!0);i.image.onload=function(){i.rotation=360*dS.random(),cS.to(i,.25,{rotation:"+=360",scaleX:.4*i.scaleX,scaleY:.4*i.scaleY,ease:pS.sout,onComplete:function(){oy(5,i)}})}}(a),zy.myPhysicalDamage(n,a,"Crescent Cleave")}}else Ni()}function Dd(){""===mS.getElementById("deathstrikeId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("deathstrikeId",!1),Ei("deathstrikeId","-500% 0%"),refreshdeathStrike.kill())}function Ld(){refreshdeathStrike=cS.to("",.1,{repeat:-1,onRepeat:Dd})}function Hd(){if(!(!0===zH.d.deathstrikeId||Yy.level<3)&&!0!==Eb())if(1!==fk){qi("deathstrikeId",!0),Ei("deathstrikeId","-500% -100%"),cS.delayedCall(12,Ld),jy(mS.getElementById("deathstrikeId"),12,"deathstrikeId"),Ep();var e=yc(ne()/3.3,.7);fM=!0,"High"===kw.videoSetting&&function(e){function a(e){var i=t+20*e,o=sy("deathStrike",5,n,i,0,0);o.image.onload=function(){cS.to(o,.25,{scaleX:1,scaleY:1,y:i-200,ease:pS.sin,onComplete:function(){cS.to(o,.25,{alpha:0,y:"+=20",onComplete:function(){oy(5,o)}})}})},++e<5&&cS.delayedCall(.02,function(){a(e)})}var n=Gw[e].offsetLeft+Wy[e].cX,t=Gw[e].offsetTop+Wy[e].cY-50;a(0),"High"===kw.videoSetting&&Oi(e,20)}(bL),zy.myPhysicalDamage(e,bL,"Death Strike"),Qa("slice")}else Ni()}function Ad(){""===mS.getElementById("gaspingfrenzyId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("gaspingfrenzyId",!1),Ei("gaspingfrenzyId","-600% 0%"),refreshgaspingFrenzy.kill())}function xd(){refreshgaspingFrenzy=cS.to("",.1,{repeat:-1,onRepeat:Ad})}function Ed(){!0===zH.d.gaspingfrenzyId||Yy.level<6||!0!==Eb()&&(1!==fk?(1===Wy[bL].attackStatus&&hi(!0),qi("gaspingfrenzyId",!0),Ei("gaspingfrenzyId","-600% -100%"),cS.delayedCall(20,xd),jy(mS.getElementById("gaspingfrenzyId"),20,"gaspingfrenzyId"),Ep(),zy.gaspingFrenzyStatus=!0,nS.kill(),nS=cS.delayedCall(0,Ct),ki(0)):Ni())}function Gd(){""===mS.getElementById("harmtouchId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("harmtouchId",!1),Ei("harmtouchId","-700% 0%"),refreshharmTouch.kill())}function qd(){refreshharmTouch=cS.to("",.1,{repeat:-1,onRepeat:Gd})}function Pd(){if(!0!==zH.d.harmtouchId&&!0!==Eb())if(1!==fk){qi("harmtouchId",!0),Ei("harmtouchId","-700% -100%");var e=12e4;Yy.talent7>=20&&(e=8e4),sS.Augur>=6&&(e-=4e4),cS.delayedCall(e/1e3,qd),jy(mS.getElementById("harmtouchId"),e/1e3,"harmtouchId"),Ep(),Qa("spellDoneHarm"),zy.coldBloodBonus=-2;var a=bL;if(Yy.talent7>=20){for(var n=0;n<=4;n++)if((a===n-1||a===n||a===n+1)&&Wy[n].name){fa(Wy[n].name+" writhes in the grip of agony.",3);t=yc(40+2.25*ne(),.9);"High"===kw.videoSetting&&Qd(n),zy.myPhysicalDamage(t,n,"Harm Touch")}}else{var t=yc(40+2.25*ne(),.9);fa(Wy[a].name+" writhes in the grip of agony.",3),"High"===kw.videoSetting&&Qd(a),zy.myPhysicalDamage(t,a,"Harm Touch")}zy.coldBloodBonus=0}else Ni()}function Qd(e){function a(e){var i=sy("harmTouch",5,n-150,t-150,100,100,!0);i.image.onload=function(){cS.to(i,.25,{scaleY:1.5,scaleX:1.5,ease:pS.sout,onComplete:function(){oy(5,i)}}),cS.to(i,.2,{alpha:0,ease:pS.lin})},++e<6&&cS.delayedCall(.05,function(){a(e)})}mv("#ff0000",.4,1);var n=Gw[e].offsetLeft+Wy[e].cX-50,t=Gw[e].offsetTop+Wy[e].cY-50;a(0)}function Rd(){ND=0,fa(qD+" is dismissed."),e("#pethpbardiv").css("display","none"),$NG.mob5.stop(!0,!0).animate({opacity:0},250,"easeOutQuad",function(){e(this).css("display","none")}),zy.petAlive=!1,PD="",qD=""}function Fd(){if(!(!0===zH.d.summondeadId||Yy.level<9)&&!0!==Eb()){if(!0===zy.petAlive)return Rd(),Qa("skeleton_die"),Ei("summondeadId","-1600% -100%"),void zy.checkShadowKnightSkills();if(oH=TH.cost.summonDead,!(Yy.mp<oH)&&!1===zy.petAlive){if(iH="Summon Dead",nH=ke(6e3),tH="conjuration",!1===Db())return;Qy("purple"),os("summonDead"),Qa("spellCastAbjure"),An(["images1/a dark skeleton.png"])}}}function Nd(){""===mS.getElementById("shdlifetapId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("shdlifetapId",!1),Ei("shdlifetapId","-800% 0%"),zy.checkShadowKnightSkills(),refreshshdLifeTap.kill())}function jd(){refreshshdLifeTap=cS.to("",.1,{repeat:-1,onRepeat:Nd})}function zd(){!0===zH.d.shdlifetapId||Yy.level<11||!0!==Eb()&&(1!==fk?(oH=TH.cost.lifeTap,Yy.mp<oH||(iH="Life Tap",nH=ke(2e3),tH="evocation",!1!==Db()&&(Py("green"),os("shdLifeTap"),Qa("spellCastEvoke1",0,nH)))):Ni())}function Yd(e){var a=sy("lifeTap",5,Gw[e].offsetLeft+Wy[e].cX-150,Gw[e].offsetTop+Wy[e].cY-100,300,300,!0);a.image.onload=function(){cS.to(a,1.2,{scaleX:.75,scaleY:.75,alpha:0,ease:pS.Qinout}),cS.to(a,1.2,{rotation:1440,ease:pS.lin,onComplete:function(){oy(5,a)}})}}function Kd(){!0===zH.d.doomingdarknessId||Yy.level<13||!0!==Eb()&&(1!==fk?(oH=TH.cost.doomingDarkness,Yy.mp<oH||(iH="Dooming Darkness",nH=ke(2e3),tH="conjuration",!1!==Db()&&(Py("magenta"),os("doomingDarkness"),Qa("spellCastDot",0,nH)))):Ni())}function Wd(e,a){if(""===Wy[a].name)return Wy[a].doomingDarknessInterval.kill(),void(Wy[a].doomingDarknessTickCount=0);zy.myDotDamage(Wy[a].doomingDarknessTick,a,e,"Dooming Darkness"),Wy[a].doomingDarknessTickCount+=1,16===Wy[a].doomingDarknessTickCount&&(Wy[a].doomingDarknessInterval.kill(),doomingDarknessTickCount=0)}function Od(){!0===zH.d.heatbloodId||Yy.level<19||!0!==Eb()&&(1!==fk?(oH=TH.cost.heatBlood,Yy.mp<oH||(iH="Heat Blood",nH=ke(2e3),tH="alteration",!1!==Db()&&(Py("red"),os("heatBlood"),Qa("spellCastDot",0,nH)))):Ni())}function Xd(){""===mS.getElementById("strengthendeadId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("strengthendeadId",!1),Ei("strengthendeadId","-1100% 0%"),zy.checkShadowKnightSkills(),refreshstrengthenDead.kill())}function Vd(){refreshstrengthenDead=cS.to("",.1,{repeat:-1,onRepeat:Xd})}function _d(){if(!(!0===zH.d.strengthendeadId||Yy.level<24||!0===US))if(!1!==zy.petAlive){qi("strengthendeadId",!0),Ei("strengthendeadId","-1100% -100%");var e=9e4;Yy.talent11>=20&&(e=45e3),cS.delayedCall(e/1e3,Vd),jy(mS.getElementById("strengthendeadId"),e/1e3,"strengthendeadId"),fa(qD+"'s eyes gleam with madness.",3),fL=.5;var a=yc(2.6*Fe(),.9);if(ND+=a,zy.drawMyHp(),cS.delayedCall(30,$d),zy.popupHealSlot(a,5),"High"===kw.videoSetting){var n=sy("lineNovaRed",7,Gw[5].offsetLeft+lL/2-200,Gw[5].offsetTop+sL/2-200,400,400,!0);n.image.onload=function(){G().to(n,.15,{alpha:.7,width:1.25,height:1.25}).to(n,.45,{alpha:0,scaleX:2,scaleY:2,ease:pS.lin,onComplete:function(){oy(7,n)}})}}Qa("skeleton_att")}else fa("Your companion is not here.")}function $d(){fL=1}function Ud(){""===mS.getElementById("shdfearId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("shdfearId",!1),Ei("shdfearId","-1200% 0%"),zy.checkShadowKnightSkills(),refreshshdFear.kill())}function Jd(){refreshshdFear=cS.to("",.1,{repeat:-1,onRepeat:Ud})}function Zd(){!0===zH.d.shdfearId||Yy.level<15||!0!==Eb()&&(1!==fk?(oH=TH.cost.fear,Yy.mp<oH||(iH="Fear",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("purple"),os("shdFear"),Qa("spellDoneFlames",0,nH)))):Ni())}function ec(e){var a=me()/4;a>100&&(a=100),a/=400;var n=Wy[e].level-Yy.level;n<=0?n=0:n*=.02,(a-=n)>.25&&(a=.25),a<.05&&(a=.05);return!(1*dS.random()>a)}function ac(e){var a=Wy[e].magic;a>100&&(a=100),a=a/100-.1;var n=Wy[e].level-Yy.level;return n=n<=0?0:dS.pow(n,2)/1e3*4,(a-=n)<.1&&(a=.1),!((a=dS.random()*a)>.05)}function nc(e){var a=Wy[e].magic;a>100&&(a=100);var n=1-(a=a/100-.1),t=Wy[e].level-Yy.level;return t=t<=0?0:dS.pow(t,2)/1e3*4,(a-=t)<.25&&(a=.25),a=dS.random()*n+a}function tc(e,a,n,t,i){""!==Wy[e].name&&(1===Wy[bL].attackStatus&&hi(!0),t||(t="Fear"),i?fa(i,3):fa(Wy[e].name+" looks very afraid.",3),Cg(e),tp(e),Wy[e].fearStatus=!0,Wy[e].dauntless&&(a*=Zi()),Wy[e].fearTimer.kill(),Wy[e].fearTimer=cS.delayedCall(a/1e3,function(){Wy[e].fearStatus=!1}),Ht(e),yv(e,a,!0,.8),n>0?Li(t,e,"fearBuffIcon",a,n):Ai("Fear","mobFearIcon"+e,a,-32,e))}function ic(){!0===zH.d.siphonstrengthId||Yy.level<17||!0!==Eb()&&(1!==fk?(oH=TH.cost.siphonStrength,Yy.mp<oH||(iH="Siphon Strength",nH=ke(2500),tH="alteration",!1!==Db()&&(Qy("orange"),os("siphonStrength"),Qa("spellCastDot",0,nH)))):Ni())}function oc(){pM=!1,Oy-=gM,ny()}function rc(){""===mS.getElementById("shdfeigndeathId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("shdfeigndeathId",!1),Ei("shdfeigndeathId","-1400% 0%"),zy.checkShadowKnightSkills(),refreshshdFeignDeath.kill())}function lc(){refreshshdFeignDeath=cS.to("",.1,{repeat:-1,onRepeat:rc})}function sc(){Yy.level<32||!0!==zH.d.shdfeigndeathId&&!0!==Eb()&&(oH=TH.cost.feignDeath,Yy.mp<oH||(iH="Feign Death",nH=ke(1500),tH="abjuration",tC=0,!1!==Db()&&(Qy("purple"),os("shdFeignDeath"),Qa("spellCastEvoke1",0,nH))))}function dc(){!0===zH.d.shadowvortexId||Yy.level<21||!0!==Eb()&&(1!==fk?(oH=TH.cost.shadowVortex,Yy.mp<oH||(iH="Shadow Vortex",nH=ke(1500),tH="alteration",!1!==Db()&&(Qy("purple"),os("shadowVortex"),Qa("spellCastDot",0,nH)))):Ni())}function cc(){yM=!1,vM=0,ny()}function mc(){!0===zH.d.vampiricembraceId||Yy.level<21||!0!==Eb()&&(oH=TH.cost.vampiricEmbrace,Yy.mp<oH||(iH="Vampiric Embrace",nH=ke(3e3),tH="alteration",!1!==Db()&&(Qy("green"),os("vampiricEmbrace"),Qa("spellCastAbjure",0,nH))))}function uc(){kM=!1}function fc(){!0===zH.d.resistcoldId||Yy.level<28||!0!==Eb()&&(oH=TH.cost.resistCold,Yy.mp<oH||(iH="Resist Cold",nH=ke(4500),tH="abjuration",!1!==Db()&&(Qy("teal"),os("resistCold"),Qa("spellCastAbjure",0,nH))))}function hc(){IM=!1,lk-=wM,ny()}function gc(){if(!(Yy.level<2)&&!0!==Eb())if(""===iH){""===iH&&Fi(),iH="Chant of Battle",tH="alteration";var e=3;!0===PM&&(e+=3);var a=e;AM.kill(),fa("You begin singing "+iH+".",3),Py("blue"),xM.kill();var n=ke(2e3);xM=cS.delayedCall(n/1e3,function(){pc(e,a)}),referenceDate2=new H,nH=n,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}else Fi()}function pc(e,a){if(1===e)return nk-=DM,DM=0,Oy-=LM,LM=0,$y-=HM,HM=0,BM=!1,ny(),fa("Your battle fury fades.",3),void(HI=fn());e===a&&(qb(),"Chant of Battle"===iH&&(Bi("Chant of Battle","chantOfBattleIcon",6e3*a,-128),Qa("might"))),BM=!0,nk-=DM,Oy-=LM,$y-=HM,fa("You feel your pulse quicken.",3),HI=fn(),"High"===kw.videoSetting&&Qc("blueLight3");var n=Qe();if(DM=dS.ceil(.06*n),LM=dS.ceil(.1*n),HM=dS.ceil(.1*n),nk+=DM,Oy+=LM,$y+=HM,ny(),"Chant of Battle"===iH&&!0===BM)return AM=cS.delayedCall(6,function(){pc(e,a)}),void Fi();e-=1,AM=cS.delayedCall(6,function(){pc(e,a)})}function bc(){if(!0!==Eb())if(""===iH){if(oH=DH.cost.chordsOfDissonance,!(Yy.mp<oH)){""===iH&&Fi(),iH="Chords of Dissonance",tH="abjuration";var e=6;!0===PM&&(e+=3),Yy.talent5>=20&&(e*=2);var a=e;GM.kill(),fa("You begin playing "+iH+".",3),Py("purple"),qM.kill();var n=ke(4e3);qM=cS.delayedCall(n/1e3,function(){vc(e,a)}),referenceDate2=new H,nH=n,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi()}function vc(e,a){if(1!==e){e===a&&"Chords of Dissonance"===iH&&(qb(),zy.drawMyMp(-oH),Qa("dissonance"),Bi("Chords of Dissonance","chordsOfDissonanceIcon",3e3*a,-96)),EM=!0;for(var n=0;n<=4;n++)if(Wy[n].name&&!1===Wy[n].charmStatus){Yy.talent7>=20&&dS.random()>.85&&ao(n,1500,-544,-32,"Chords of Dissonance"),Yy.talent8>=20&&dS.random()>.92&&(Lu("yellow"),fa(Yy.name+" recovers health from an inspiring melody.",3),zy.popupHeal(yc(Ne()/10,.8)));var t=yc(.54*Ne()+5,.8);zy.myMagicDamage("magic",t,n,ee(),"Chords of Dissonance")}if("Chords of Dissonance"===iH&&!0===EM)return GM=cS.delayedCall(3,function(){vc(e)}),void Fi();e-=1,GM=cS.delayedCall(3,function(){vc(e)})}else!function(){EM=!1;for(var e=0;e<=4;e++)Ci("chordsOfDissonanceIcon",e)}()}function yc(e,a){var n=e*a,t=e-n;return dS.round(dS.random()*t+n)}function kc(){if(!(Yy.level<3)&&!0!==Eb())if(""===iH){""===iH&&Fi(),iH="Accelerando",tH="evocation";QM.kill(),fa("You begin playing "+iH+".",3),Py("green");var e=ke(4e3);RM.kill(),RM=cS.delayedCall(e/1e3,function(){Sc(6)}),referenceDate2=new H,nH=e,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}else Fi()}function Sc(e){if(0===e)return PM=!1,void fa("You slow down.",3);if(6===e&&(qb(),"Accelerando"===iH)){var a=iH,n=6e3*e;ID.kill(),ID=cS.delayedCall(n/1e3,function(){wi("accelerandoIcon")}),Bi(a,"accelerandoIcon",n,-160),Qa("quickness",0,1e3,.7)}if(PM=!0,fa("Your feet move faster.",3),"High"===kw.videoSetting&&Qc("greenLight3"),"Accelerando"===iH&&!0===PM)return QM=cS.delayedCall(6,function(){Sc(e)}),void Fi();e-=1,QM=cS.delayedCall(6,function(){Sc(e)})}function Ic(){if(!(Yy.level<5)&&!0!==Eb())if(""===iH){if(oH=DH.cost.hymnOfRestoration,!(Yy.mp<oH)){""===iH&&Fi(),iH="Hymn of Restoration",tH="abjuration";var e=3;!0===PM&&(e+=3);var a=e;NM.kill(),fa("You begin playing "+iH+".",3),Py("teal");var n=ke(4e3);jM.kill(),jM=cS.delayedCall(n/1e3,function(){wc(e,a)}),referenceDate2=new H,nH=n,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi()}function wc(e,a){if(1===e)return FM=!1,void fa("Your regenerative hymn ends.",3);if(e===a){Bi(iH,"hymnOfRestorationIcon",6e3*e,-192),qb(),zy.drawMyMp(-oH),Qa("prayer")}FM=!0;var n=1+dS.ceil(.35*Ne()*(1+1.35*Ue()/100));if(zy.popupHeal(n),zy.drawMyHp(),fa("Your wounds begin to heal.",3),Lu("teal",!1,20),"Hymn of Restoration"===iH&&!0===FM)return NM=cS.delayedCall(6,function(){wc(e)}),void Fi();e-=1,NM=cS.delayedCall(6,function(){wc(e)})}function Cc(){if(!(Yy.level<24)&&!0!==Eb())if(""===iH){""===iH&&Fi(),iH="Anthem De Arms",tH="channeling";var e=3;!0===PM&&(e+=3);var a=e;YM.kill(),fa("You begin singing "+iH+".",3),Py("red");var n=ke(4e3);KM.kill(),KM=cS.delayedCall(n/1e3,function(){Mc(e,a)}),referenceDate2=new H,nH=n,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}else Fi()}function Mc(e,a){if(1===e)return Oy-=WM,WM=0,tk-=OM,OM=0,zM=!1,ny(),void fa("Your surge of strength fades.",3);if(e===a&&(qb(),"Anthem De Arms"===iH)){Bi(iH,"anthemDeArmsIcon",6e3*e,-448),Qa("fanaticism")}if(Oy-=WM,tk-=OM,zM=!0,WM=dS.ceil(.11*je()),OM=dS.ceil(-.85*je()-11.5*Je()),Oy+=WM,tk+=OM,ny(),fa("A burst of strength surges through your body.",3),"High"===kw.videoSetting&&Qc("redLight3"),"Anthem De Arms"===iH&&!0===zM)return YM=cS.delayedCall(6,function(){Mc(e)}),void Fi();e-=1,YM=cS.delayedCall(6,function(){Mc(e)})}function Tc(){if(!(Yy.level<9)&&!0!==Eb())if(1!==fk)if(""===iH){if(oH=DH.cost.boastfulBellow,!(Yy.mp<oH)){""===iH&&Fi(),tH="evocation";fa("You begin singing "+(iH="Brusco's Boastful Bellow")+".",3),Py("orange");var e=ke(4e3);XM.kill(),XM=cS.delayedCall(e/1e3,function(){!function(e){function a(){if(Wy[t].name){rH=yc(1.6*Re(),.8),fa(Wy[t].name+" reels in pain.",3),"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX-50,n=Gw[e].offsetTop+Wy[e].cY-50,t=sy("rngSmoke",5,a,n,0,0,!0);t.image.onload=function(){cS.to(t,.15,{scaleX:1,scaleY:1,onComplete:function(){cS.to(t,1.2,{scaleX:3,scaleY:3,alpha:0,onComplete:function(){oy(5,t)}})}})};var i=sy("lineNovaMagenta",5,a-150,n-150,100,100,!0);i.image.onload=function(){cS.to(i,.25,{scaleX:.75,scaleY:.75,alpha:0,onComplete:function(){oy(5,i)}})};var o=sy("lineNovaMagenta",5,a-150,n-150,100,100,!0);o.image.onload=function(){cS.to(o,.15,{scaleX:1,scaleY:1,alpha:.2,onComplete:function(){cS.to(o,1.125,{scaleX:.75,scaleY:.75,alpha:0,onComplete:function(){oy(5,o)}})}})}}(t),n++,Ht(t),n<=3&&Wy[t].name&&(MM.kill(),MM=cS.delayedCall(6,a),Li("Boastful Bellow",t,"boastfulIcon",6e3,-256)),function(e,a){if(!Wy[a].name)return;if(!1===ee()){var n=!1,t="Brusco's Boastful Bellow";zy.myMagicDamage(e,rH,a,n,t)}else{rH=dS.ceil(rH+rH*zy.criticalDamage());var n=!0,t="Brusco's Boastful Bellow";zy.myMagicDamage(e,rH,a,n,t)}}("magic",t),Qa("holybolt")}}if(!0===Wy[bL].charmStatus||1===fk)return void Fi();qb(),zy.drawMyMp(-oH),Fi();var n=0;!0===PM&&(n=-1);var t=bL;a()}()}),referenceDate2=new H,nH=e,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi();else Ni()}function Bc(){if(!(Yy.level<11)&&!0!==Eb())if(""===iH){""===iH&&Fi(),iH="Elemental Rhythms",tH="evocation";var e=4;!0===VM&&(e+=1);var a=e;_M.kill(),fa("You begin playing "+iH+".",3),Py("purple");var n=ke(4e3);$M.kill(),$M=cS.delayedCall(n/1e3,function(){Dc(e,a)}),referenceDate2=new H,nH=n,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}else Fi()}function Dc(e,a){if(1===e)return ok-=UM,UM=0,rk-=JM,JM=0,lk-=ZM,ZM=0,sk-=eT,eT=0,VM=!1,ny(),void fa("The aura of protection fades.",3);if(e===a){if(qb(),"Elemental Rhythms"===iH){Bi(iH,"elementalRhythmsIcon",6e3*e,-288)}Qa("sanctuary")}ok-=UM,rk-=JM,lk-=ZM,sk-=eT,VM=!0;var n=Re(),t=aa(),i=dS.ceil(.18*n+2.3*t);if(UM=i,JM=i,ZM=i,eT=i,ok+=UM,rk+=JM,lk+=ZM,sk+=eT,ny(),fa("You feel an aura of elemental protection surrounding you.",3),"High"===kw.videoSetting&&Qc("purpleLight3"),"Elemental Rhythms"===iH&&!0===VM)return _M=cS.delayedCall(6,function(){Dc(e)}),void Fi();e-=1,_M=cS.delayedCall(6,function(){Dc(e)})}function Lc(){if(!(Yy.level<13)&&!0!==Eb())if(""===iH){if(oH=DH.cost.lucidLullaby,!(Yy.mp<oH)){""===iH&&Fi(),tH="conjuration";fa("You begin playing "+(iH="Lucid Lullaby")+".",3),Py("yellow");var e=ke(4e3);aT.kill(),aT=cS.delayedCall(e/1e3,function(){!function(e){Qa("spellDoneBuff"),qb(),zy.drawMyMp(-oH);GM.kill(),cT.kill(),1===Wy[bL].attackStatus&&hi(!0);for(var a=0;a<=4;a++)if(""!==Wy[a].name&&!1===Wy[a].charmStatus)if("High"===kw.videoSetting&&function(e){function a(e){var o=n+(300*dS.random()-150),r=t+(200*dS.random()-100),l=ry(i,5,o,r);cS.to(l,.9,{opacity:0}),cS.to(l,1.15,{x:"+=11",y:r+25,scaleX:.1,scaleY:.1,ease:pS.sin,onComplete:function(){oy(5,l)}}),e<25&&cS.delayedCall(.03,function(){a(++e)})}var n=Gw[e].offsetLeft+Wy[e].cX-12,t=Gw[e].offsetTop+Wy[e].cY-12,i=ly("yellowparticle50");a(0)}(a),!0===ac(a)||3===Wy[a].rare)fa(Wy[a].name+" resisted Lucid Lullaby.",1);else{var n=150*de()+dS.random()*(75*de());n+=500*zy.conjurationEquip,Wy[a].level>Yy.level&&(n-=dS.pow(Wy[a].level-Yy.level,1.3)),fa(Wy[a].name+"'s head nods.",3),yr(a,n,"Lucid Lullaby",-320),Sv(a)}Fi()}()}),referenceDate2=new H,nH=e,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi()}function Hc(){if(!(Yy.level<15)&&!0!==Eb())if(1!==fk)if(""===iH){if(oH=DH.cost.consonantChain,!(Yy.mp<oH)){""===iH&&Fi(),tH="alteration";fa("You begin singing "+(iH="Consonant Chain")+".",3),Py("orange");var e=ke(4e3);nT.kill(),nT=cS.delayedCall(e/1e3,function(){!function(e){if(Qa("confuse"),!0===Wy[bL].charmStatus||1===fk)return void Fi();qb(),zy.drawMyMp(-oH);var a=bL;if(!0===ac(a))fa(Wy[a].name+" resisted "+iH+".",1);else{Wy[a].consonantChain=dS.ceil(3*Qe()*(1+1.2*ra()/100));var n=9e3+140*de();Wy[a].slowTimer.kill(),Wy[a].slowTimer=cS.delayedCall(n/1e3,function(){!function(e){Wy[e].consonantChain=0,fa("The musical chains fade.",3)}(a)}),fa(Wy[a].name+" is surrounded by chains of music.",3),"High"===kw.videoSetting&&vp(a);if(Li("Consonant Chain",a,"slowIcon",n,-352),Yy.talent11>=20){var t=~~(n/3e3);Pm(a,yc(Qe()/3,.9),"Venom Chains","poison",t,3e3)}}Fi()}()}),referenceDate2=new H,nH=e,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi();else Ni()}function Ac(){if(!(Yy.level<17)&&!0!==Eb())if(""===iH){if(oH=DH.cost.dissension,!(Yy.mp<oH)){""===iH&&Fi(),tH="channeling";fa("You begin playing "+(iH="Dissension")+".",3),Py("white");var e=ke(4e3);tT.kill(),tT=cS.delayedCall(e/1e3,function(){!function(e){Qa("spellDoneHeal"),!0===ya()&&qb();zy.drawMyMp(-oH);for(var a=0,n=0;n<=4;n++)""!==Wy[n].name&&(a+=yc(5+dS.ceil(.9*je()),.9)),""!==Wy[n].name&&!1===Wy[n].charmStatus&&(Wy[n].mp-=7,Wy[n].mp<0&&(Wy[n].mp=0),fa(Wy[n].name+"'s mind is drained by a strident wail.",3),"High"===kw.videoSetting&&function(e){function a(e){var n=sy("drainFG",5,t-o,i-150,2*o,100);n.image.onload=function(){cS.to(n,(800+100*e)/1e3,{y:600,alpha:0,ease:pS.qout,onComplete:function(){oy(5,n)}})};var r=sy("drainBG",7,t-o,i-150,2*o,100);r.image.onload=function(){cS.to(r,(800+100*e)/1e3,{y:600,alpha:0,ease:pS.qout,onComplete:function(){oy(7,r)}})},e<5&&cS.delayedCall(.1,function(){a(++e)})}function n(e){var a=600*dS.random()+340,t=250*dS.random()+100,i=sy("tealparticle50",5,a,-25,25,25);i.image.onload=function(){cS.to(i,1.2,{scaleX:0,scaleY:0,x:a+12,y:t,onComplete:function(){oy(5,i)}})},e<20&&cS.delayedCall(.02,function(){n(++e)})}var t=Gw[e].offsetLeft+Wy[e].cX,i=(Wy[e].imageHeight,Gw[e].offsetTop),o=Wy[e].imageWidth/2+40;a(0);n(0);var r=sy("tealLight3",5,-640,-827,2560,1544);r.image.onload=function(){cS.to(r,1.5,{alpha:0,onComplete:function(){oy(5,r)}})}}(n));a&&(fa("You feel replenished.",3),zy.popupHeal(a));1===Wy[bL].attackStatus&&hi(!0);Fi()}()}),referenceDate2=new H,nH=e,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi()}function xc(){if(!(Yy.level<20)&&!0!==Eb())if(""===iH){""===iH&&Fi(),iH="Chorus of Clarity",tH="alteration";var e=3;!0===PM&&(e+=3);var a=e;oT.kill(),fa("You begin singing "+iH+".",3),Py("blue");var n=ke(4e3);rT.kill(),rT=cS.delayedCall(n/1e3,function(){Ec(e,a)}),referenceDate2=new H,nH=n,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}else Fi()}function Ec(e,a){if(1===e)return iT=!1,void fa("Your clarity of mind fades.",3);if(e===a&&(qb(),"Chorus of Clarity"===iH)){Bi(iH,"clarityIcon",6e3*e,-416),Qa("clarity")}if(iT=!0,fa("Your mind begins to clear.",3),"High"===kw.videoSetting&&function(){function e(a){var n=640*dS.random()+640*dS.random(),t=100*dS.random()+50,i=sy("blueparticle50",5,n,0,25,25);i.image.onload=function(){cS.to(i,1.2,{scaleX:0,scaleY:0,x:n+12,y:t,onComplete:function(){oy(5,i)}})},a<15&&cS.delayedCall(.02,function(){e(++a)})}e(0)}(),"Chorus of Clarity"===iH&&!0===iT)return oT=cS.delayedCall(6,function(){Ec(e)}),void Fi();e-=1,oT=cS.delayedCall(6,function(){Ec(e)})}function Gc(e){Wy[e].euphonicHymn=0,fa("The aural resonance fades.",3)}function qc(){if(!(Yy.level<28)&&!0!==Eb())if(""===iH){if(oH=DH.cost.euphonicHymn,!(Yy.mp<oH)){""===iH&&Fi(),tH="alteration";fa("You begin singing "+(iH="Euphonic Hymn")+".",3),Py("orange");var e=ke(4e3);lT.kill(),lT=cS.delayedCall(e/1e3,function(){!function(e){Qa("decrepify"),qb(),zy.drawMyMp(-oH);for(var a=0;a<=4;a++)if(""!==Wy[a].name&&!1===Wy[a].charmStatus)if(!0===ac(a))fa(Wy[a].name+" resisted "+iH+".",1);else{Wy[a].euphonicHymn=40+4.75*Ze();var n=9e3+400*de();Wy[a].euphonicHymnTimer.kill(),Wy[a].euphonicHymnTimer=cS.delayedCall(n/1e3,function(){Gc(a)}),fa(Wy[a].name+" is rendered vulnerable by a euphonic hymn.",3),"High"===kw.videoSetting&&Eo("yellow"),Li("Euphonic Hymn",a,"euphonicIcon",n,-480)}Fi()}()}),referenceDate2=new H,nH=e,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi()}function Pc(){if(!(Yy.level<32)&&!0!==Eb())if(""===iH){if(oH=DH.cost.shieldOfSongs,!(Yy.mp<oH)){""===iH&&Fi(),tH="channeling",fa("You begin singing "+(iH="Shield of Songs")+".",3),Py("yellow");var e=ke(4e3);sT.kill(),sT=cS.delayedCall(e/1e3,function(){qb(),"Shield of Songs"===iH&&(Bi("Shield of Songs","shieldOfSongsIcon",0,-512),zy.drawMyMp(-oH),xT=dS.ceil(.8*je()*(1+3.15*la()/100)),Qa("shieldofsongs"),fa("You are surrounded by a shield of songs.",3),Fi(),Qc())}),referenceDate2=new H,nH=e,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi()}function Qc(e){if("High"===kw.videoSetting){e||(e="yellowLight3");var a=sy(e,5,50,68,2560,1594);a.image.onload=function(){a.alpha=.2,cS.to(a,.25,{x:-625,y:0,ease:pS.Qin,onComplete:function(){cS.to(a,.25,{x:-1300,y:200,alpha:0})}})}}}function Rc(){if(!(Yy.level<38)&&!0!==Eb())if(""===iH){if(oH=DH.cost.desperateDirge,!(Yy.mp<oH)){""===iH&&Fi(),iH="Desperate Dirge",tH="abjuration";var e=6;!0===PM&&(e+=3);var a=e;cT.kill(),fa("You begin playing "+iH+".",3),Py("purple");var n=ke(4e3);dT.kill(),dT=cS.delayedCall(n/1e3,function(){Fc(e,a)}),referenceDate2=new H,nH=n,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi()}function Fc(e,a){if(0!==e){e===a&&"Desperate Dirge"===iH&&(qb(),zy.drawMyMp(-oH),Qa("dirge"),Bi("Desperate Dirge","desperateDirgeIcon",3e3*a,-544)),mT=!0;for(t=0;t<=4;t++)if(Wy[t].name&&!1===Wy[t].charmStatus){Yy.talent7>=20&&dS.random()>.95&&ao(t,1250,-544,-32,"Desperate Dirge");var n=yc(2.5*Ne(),.85);zy.myMagicDamage("magic",n,t,ee(),"Desperate Dirge")}if("Desperate Dirge"===iH&&!0===mT)return cT=cS.delayedCall(3,function(){Fc(e,a)}),void Fi();e-=1,cT=cS.delayedCall(3,function(){Fc(e,a)})}else{mT=!1;for(var t=0;t<=4;t++)Wy[t].name&&!1===Wy[t].charmStatus&&Ci("desperateDirgeIcon",t)}}function Nc(){if(!(Yy.level<7)&&!0!==Eb())if(1!==fk){if(!0===Wy[hT].charmStatus)return fT.kill(),void jc(hT);if(""===iH){if(oH=DH.cost.songOfTheSirens,!(Yy.mp<oH)){""===iH&&Fi(),tH="conjuration";fa("You begin singing "+(iH="Solon's Song of the Sirens")+".",3),Py("teal");var a=ke(4e3);uT.kill(),uT=cS.delayedCall(a/1e3,function(){!function(a){Qa("spellDoneBuff"),1===Wy[bL].attackStatus&&hi(!0);!0===a&&!0===ya()&&(a=!1,"Solon's Song of the Sirens"===iH&&(qb(),zy.drawMyMp(-oH)));var n=bL;"High"===kw.videoSetting&&function(e){function a(e){var i=150*dS.random()-75,o=60*dS.random()-30,r=sy("heart",5,n+i,t+o,50,50);r.image.onload=function(){cS.to(r,1,{y:"+=100",alpha:0,ease:pS.Qin,onComplete:function(){oy(5,r)}})},++e<8&&cS.delayedCall(.05,function(){a(e)})}var n=Gw[e].offsetLeft+Wy[e].cX-25,t=Gw[e].offsetTop+Wy[e].cY-25;a(0)}(n);if(!0===ac(n)||3===Wy[n].rare)fa(Wy[n].name+" resisted "+iH+".",1);else{if(fa(Wy[n].name+" is captivated by a haunting tune.",3),Ht(n),Wy[n].charmStatus=!0,hT=n,qD=Wy[hT].name,e("#pethpbardiv").css("display","block"),0===e("#petBarName").length){var t=e('<div id="petBarName">').html(Wy[hT].level+" - "+qD);e("#pethpbardiv").append(t)}else e("#petBarName").html(Wy[hT].level+" - "+qD);zy.drawMyHp();var i=de()-60;i<10&&(i=10);var o=(2e4+dS.random()*(100*Fe())+dS.random()*(600*i)+1500*i)*nc(n);o+=1e3*zy.conjurationEquip,Wy[n].level>Yy.level&&(o-=dS.pow(Wy[n].level-Yy.level,3.2)),o<=8e3&&(o=8e3),fT.kill(),fT=cS.delayedCall(o/1e3,jc);Li("Charmed",n,"charmIcon",o,-224)}Fi()}(!0)}),referenceDate2=new H,nH=a,Dw.scaleX=0,NG.spellbardiv.style.display="block",os()}}else Fi()}else Ni()}function jc(a){a&&e("#charmIcon"+a).stop(!0,!0).remove(),fT.kill(),Wy[hT].charmStatus=!1,a?fa("You release "+qD+" from your command."):fa(qD+" is no longer captivated.",3),qD="",e("#pethpbardiv").css("display","none")}function zc(){!0!==zH.d.smite&&!0!==Eb()&&(1!==fk?(iH="Smite",nH=ke(3e3),tH="evocation",!1!==Db()&&(Py("magenta"),os("smite"),Qa("spellCastEvoke2",0,nH))):Ni())}function Yc(e,a){function n(e,o,r,l,s){o+=l,x3=s*dS.cos(o),y3=s*dS.sin(o);var d=sy(a+"particle50",5,t+x3,i+y3,25,25);d.image.onload=function(){cS.to(d,.75,{scaleX:0,scaleY:0,x:t+x3+11,y:i+y3+11,onComplete:function(){oy(5,d)}})},e<r&&n(++e,o,r,l,s)}if("High"===kw.videoSetting){var t=Gw[e].offsetLeft+Wy[e].cX,i=Gw[e].offsetTop+Wy[e].cY;a||(a="magenta"),n(0,0,20,.315,120),n(0,0,12,.52,90),n(0,0,6,1.1,60),n(0,0,4,1.3,30)}}function Kc(){""===mS.getElementById("soundofforce").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("soundofforce",!1),Ei("soundofforce","-400% 0%"),zy.checkClericSkills(),soundOfForceMight.kill())}function Wc(){soundOfForceMight=cS.to("",.1,{repeat:-1,onRepeat:Kc})}function Oc(){if(!(!0===zH.d.soundofforce||Yy.level<2)&&!0!==Eb())if(1!==fk){if(oH=HH.cost.soundOfForce,!(Yy.mp<oH)){iH="Sound of Force",nH=ke(1e3),tH="evocation",Qa("spellDoneSlam"),"High"===kw.videoSetting&&Lr(bL,"lineNovaMagenta"),qi("soundofforce",!0),Ei("soundofforce","-400% -100%"),cS.delayedCall(18,Wc),jy(mS.getElementById("soundofforce"),18,"soundofforce"),zy.drawMyMp(-oH);var e=yc(1.8*Re(),.9);fa(Wy[bL].name+" is struck by a sonic force.",3),ao(bL,5500,-128),zy.myMagicDamage("magic",e,bL,ee(),"Sound of Force"),Ep(),qb()}}else Ni()}function Xc(){""===mS.getElementById("superiorhealing").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("superiorhealing",!1),Ei("superiorhealing","-500% 0%"),zy.checkClericSkills(),refreshsuperiorHealing.kill())}function Vc(){refreshsuperiorHealing=cS.to("",.1,{repeat:-1,onRepeat:Xc})}function _c(){!0===zH.d.superiorhealing||Yy.level<3||!0!==Eb()&&(oH=HH.cost.superiorHealing,Yy.mp<oH||(iH="Superior Healing",nH=ke(2e3),tH="alteration",!1!==Db()&&(Py("blue"),os("superiorHealing"),Qa("spellCastHeal",0,nH))))}function $c(){!0===zH.d.resolution||Yy.level<5||!0!==Eb()&&(oH=HH.cost.resolution,Yy.mp<oH||(iH="Resolution",nH=ke(4e3),tH="abjuration",!1!==Db()&&(Qy("orange"),os("resolution"),Qa("spellCastAbjure",0,nH))))}function Uc(){gT=!1,nk-=pT,Zy-=bT,ny(),zy.drawMyHp()}function Jc(){""===mS.getElementById("bindingearth").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("bindingearth",!1),Ei("bindingearth","-600% 0%"),zy.checkClericSkills(),refreshbindingEarth.kill())}function Zc(){refreshbindingEarth=cS.to("",.1,{repeat:-1,onRepeat:Jc})}function em(){!0===zH.d.bindingearth||Yy.level<7||!0!==Eb()&&(1!==fk?(oH=HH.cost.bindingEarth,Yy.mp<oH||(iH="Binding Earth",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("green"),os("bindingEarth"),Qa("spellCastAbjure",0,nH)))):Ni())}function am(){""===mS.getElementById("expelcorruption").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("expelcorruption",!1),Ei("expelcorruption","-700% 0%"),zy.checkClericSkills(),refreshexpelCorruption.kill())}function nm(){refreshexpelCorruption=cS.to("",.1,{repeat:-1,onRepeat:am})}function tm(){!0===zH.d.expelcorruption||Yy.level<9||!0!==Eb()&&(1!==fk?(oH=HH.cost.expelCorruption,Yy.mp<oH||(iH="Expel Corruption",nH=ke(2500),tH="evocation",!1!==Db()&&(Py("yellow"),os("expelCorruption"),Qa("spellCastEvoke2",0,nH)))):Ni())}function im(e){var a=Gw[e].offsetLeft+Wy[e].cX-100,n=sy("expelCorruption",5,a,-100,200,0);n.image.onload=function(){cS.to(n,.15,{scaleY:1.59,onComplete:function(){oy(5,n)}})};var t=sy("expelCorruption",5,a,-100,200,0);t.image.onload=function(){cS.to(t,.15,{scaleY:1.59,alpha:.2}),cS.to(t,1.5,{alpha:0,ease:pS.lin,delay:.15,onComplete:function(){oy(5,t)}})},cS.delayedCall(.15,fp,[a+100,800])}function om(){""===mS.getElementById("searingrevelation").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("searingrevelation",!1),Ei("searingrevelation","-800% 0%"),refreshsearingRevelation.kill())}function rm(){refreshsearingRevelation=cS.to("",.1,{repeat:-1,onRepeat:om})}function lm(){!0===zH.d.searingrevelation||Yy.level<11||!0!==Eb()&&(1!==fk?(iH="Searing Revelation",nH=ke(1500),tH="conjuration",!1!==Db()&&(Py("yellow"),os("searingRevelation"),Qa("spellCastEvoke1",0,nH))):Ni())}function sm(e){function a(e){var i=sy("yellowLight3",5,n-200,t+90*e+200,1e3,1e3,!0);i.image.onload=function(){cS.to(i,(1e3+200*e)/1e3,{alpha:0,scaleX:0,scaleY:0,onComplete:function(){oy(5,i)}})},e<5&&cS.delayedCall(.05,function(){a(++e)})}var n=Gw[e].offsetLeft+Wy[e].cX,t=-450;a(0)}function dm(){""===mS.getElementById("martyrsblessing").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("martyrsblessing",!1),Ei("martyrsblessing","-900% 0%"),refreshmartyrsBlessing.kill())}function cm(){refreshmartyrsBlessing=cS.to("",.1,{repeat:-1,onRepeat:dm})}function mm(){if(!(!0===zH.d.martyrsblessing||Yy.level<13)&&!0!==Eb())if(1!==fk){1===Wy[bL].attackStatus&&hi(!0),iH="Martyr's Blessing",tH="conjuration",qi("martyrsblessing",!0),Ei("martyrsblessing","-900% -100%"),cS.delayedCall(30,cm),jy(mS.getElementById("martyrsblessing"),30,"martyrsblessing"),sH=1,qb(),fa(Wy[bL].name+" is beset by a martyr's will.",3),Wy[bL].martyr=!0,zS.martyr=!0,Wy[bL].martyrTiming=cS.delayedCall(10,function(){!function(e){Wy[e].martyr=!1,zS.martyr=!1}(bL)});var e="martyrsBlessingIcon";cS.delayedCall(10,function(){wi(e)}),Bi("Martyr's Blessing",e,1e4,-288),"High"===kw.videoSetting&&function(){function e(n){var t=200*dS.random()+300,i=568+100*dS.random()+50,o=sy("martyrsBlessing",7,a,0,50,720);o.image.onload=function(){cS.to(o,1.5,{alpha:0,scaleX:t/300,scaleY:i/497,x:a-t/2,y:0,onComplete:function(){oy(7,o)}})};var r=90*dS.random()+630,l=a+400*dS.random()-200,s=sy("yellowparticle50",7,a-9,-30,7,7);s.image.onload=function(){cS.to(s,1.5,{y:r,ease:pS.bout}),cS.to(s,1.5,{x:l,ease:pS.sout}),cS.to(s,12*dS.random()+4,{scaleX:0,scaleY:0,onComplete:function(){oy(7,s)}})},++n<20&&cS.delayedCall(.08,function(){e(n)})}var a=Gw[bL].offsetLeft+Wy[bL].cX-25;e(0);var n=sy("yellowLight3",5,a-175,-300,2560,1544,!0);n.image.onload=function(){cS.to(n,3.5,{alpha:0,ease:pS.Qin,onComplete:function(){oy(5,n)}})}}(),Qa("redemption")}else Ni()}function um(){!0===zH.d.armoroffaith||Yy.level<15||!0!==Eb()&&(oH=HH.cost.armorOfFaith,Yy.mp<oH||(iH="Armor of Faith",nH=ke(6e3),tH="abjuration",!1!==Db()&&(Qy("blue"),os("armorOfFaith"),Qa("spellCastAbjure",0,nH))))}function fm(){yT=!1,nk-=kT,ny()}function hm(){!0===zH.d.divinesanctuary||Yy.level<20||!0!==Eb()&&(oH=HH.cost.divineSanctuary,Yy.mp<oH||(iH="Divine Sanctuary",nH=ke(3e3),tH="abjuration",!1!==Db()&&(Py("yellow"),os("divineSanctuary"),Qa("spellCastAbjure",0,nH))))}function gm(){IT=!1,ik-=wT,ok-=CT,rk-=MT,lk-=TT,sk-=BT,ny()}function pm(){!0===zH.d.symbolofnaltron||Yy.level<32||!0!==Eb()&&(oH=HH.cost.symbolOfNaltron,Yy.mp<oH||(iH="Symbol of Yentus",nH=ke(4e3),tH="abjuration",!1!==Db()&&(Qy("teal"),os("symbolOfNaltron"),Qa("spellCastAbjure",0,nH))))}function bm(){LT=!1,Zy-=HT,ny(),zy.drawMyHp()}function vm(){""===mS.getElementById("guardianangel").textContent&&0!=sH&&0!=lH&&(qi("guardianangel",!1),Ei("guardianangel","-1000% 0%"),refreshguardianAngel.kill(),zy.checkClericSkills(),ET=!0)}function ym(){refreshguardianAngel=cS.to("",.1,{repeat:-1,onRepeat:vm})}function km(){function e(a){a<5&&cS.delayedCall(.25,function(){zy.expelCorruptionFinish(!0),e(++a)})}function a(){!function(){mv("#ff0",.3,2);var e=sy("guardianAngel",5,415,400,0,0,!0);e.image.onload=function(){cS.to(e,3,{alpha:0,scaleX:1,scaleY:1,ease:pS.cout,onComplete:function(){oy(5,e)}})}}()}if(!(Yy.hp<=0||!0===US||!0===zH.d.guardianangel||Yy.level<17||(oH=HH.cost.guardianAngel,Yy.mp<oH))){if(zy.drawMyMp(-oH),qi("guardianangel",!0),Ei("guardianangel","-1000% -100%"),cS.delayedCall(30,ym),jy(mS.getElementById("guardianangel"),30,"guardianangel"),iH="Guardian Angel",tH="abjuration",fa("A guardian angel intervenes on your behalf.",3),sS.Venova>=6&&cS.delayedCall(1.25,function(){e(0)}),qb(),xT=dS.ceil(.8*Ne()*(1+2.25*ta()/100)),ET=!1,!0===GT||Yy.talent12>=20)for(i=0;i<=4;i++)if(""!==Wy[i].name){var n=yc(1.7*Qe(),.85);zy.myMagicDamage("magic",n,i,ee(),"Guardian Angel")}if(wi("guardianAngelIcon"),Bi("Guardian Angel","guardianAngelIcon",0,-320),"High"===kw.videoSetting){for(var t=0,i=0;i<10;i++)cS.delayedCall(t/1e3,function(){a()}),t+=150;Lh()}Qa("spellDoneBuff")}}function Sm(){""===mS.getElementById("holywrath").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("holywrath",!1),Ei("holywrath","-1100% 0%"),zy.checkClericSkills(),refreshholyWrath.kill())}function Im(){refreshholyWrath=cS.to("",.1,{repeat:-1,onRepeat:Sm})}function wm(){!0===zH.d.holywrath||Yy.level<24||!0!==Eb()&&(1!==fk?(oH=HH.cost.holyWrath,Yy.mp<oH||(iH="Holy Wrath",nH=ke(1500),tH="evocation",!1!==Db()&&(Py("yellow"),os("holyWrath"),Qa("spellCastEvoke1",0,nH)))):Ni())}function Cm(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("holyMight",5,a-100,n-100,200,200);t.image.onload=function(){cS.to(t,.25,{alpha:0,onComplete:function(){oy(5,t)}})};var i=sy("lineNova",7,a-200,n-200,400,400);i.image.onload=function(){i.alpha=0,cS.to(i,.15,{alpha:.3,scaleX:1.25,scaleY:1.25,y:n-250,x:a-250,onComplete:function(){cS.to(i,.45,{alpha:0,scaleX:2,scaleY:2,y:n-400,x:a-400,ease:pS.lin,onComplete:function(){oy(7,i)}})}})}}function Mm(){""===mS.getElementById("markofjudgement").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("markofjudgement",!1),Ei("markofjudgement","-1200% 0%"),refreshmarkOfJudgement.kill())}function Tm(){refreshmarkOfJudgement=cS.to("",.1,{repeat:-1,onRepeat:Mm})}function Bm(){!0===zH.d.markofjudgement||Yy.level<28||!0!==Eb()&&(iH="Mark of Judgement",nH=ke(1500),tH="conjuration",!1!==Db()&&(Py("yellow"),os("markOfJudgement"),Qa("spellCastEvoke1",0,nH)))}function Dm(){GT=!1}function Lm(){""===mS.getElementById("benediction").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("benediction",!1),Ei("benediction","-1300% 0%"),zy.checkClericSkills(),refreshbenediction.kill())}function Hm(){refreshbenediction=cS.to("",.1,{repeat:-1,onRepeat:Lm})}function Am(){if(!(!0===zH.d.benediction||Yy.level<38)&&!0!==Eb()){qi("benediction",!0),Ei("benediction","-1300% -100%"),cS.delayedCall(60,Hm),jy(mS.getElementById("benediction"),60,"benediction"),iH="Benediction",tH="conjuration",fa("A pillar of light beams down from the heavens.",3),qb(),zy.drawMyMp(-oH),Qa("handofgod");for(n=0;n<=4;n++)if(""!==Wy[n].name){!Wy[n].phased&&Wy[n].name&&(Gw[n].style.opacity=1);var e=7e3+8e3*dS.random();if("High"===kw.videoSetting&&xm(n),ao(n,e,-416),Yy.talent12>=1){var a=yc(Fe()*(1+.475*la()),.75);zy.myMagicDamage("magic",a,n,ee(),"Benediction")}}if(!0===GT||Yy.talent12>=20)for(var n=0;n<=4;n++)if(""!==Wy[n].name){var t=dS.ceil((le()-60)*(Fe()/5/50)+3.5*Qe()+dS.random()*(3+Pp()/4.4));zy.myMagicDamage("magic",t,n,ee(),"Benediction")}}}function xm(e,a){if(Wy[e].name){var n=Gw[e].offsetLeft+Wy[e].cX-200,t=sy("benediction",5,n,-100,400,0);t.image.onload=function(){cS.to(t,.15,{y:0,scaleY:675/497,onComplete:function(){oy(5,t)}})};var i=sy("benediction",5,n,-100,400,0);if(i.image.onload=function(){cS.to(i,.15,{y:0,scaleY:675/497,alpha:.2,onComplete:function(){cS.to(i,1.5,{alpha:0,ease:pS.lin,onComplete:function(){oy(5,i)}})}})},cS.delayedCall(.15,fp,[n+200,1200]),!a){var o=sy("benedictionFloor",7,0,397,1280,400);o.image.onload=function(){cS.to(o,3,{alpha:0,onComplete:function(){oy(7,o)}})}}}}function Em(){!0!==zH.d.starfire&&!0!==Eb()&&(1!==fk?(iH="Starfire",nH=ke(3e3),tH="evocation",!1!==Db()&&(Py("red"),os("starfire"),Qa("spellCastEvoke1",0,nH))):Ni())}function Gm(e){var a=sy("ignite",5,Gw[e].offsetLeft+Wy[e].cX-100,Gw[e].offsetTop+Wy[e].cY-100,200,200,!0);a.image.onload=function(){cS.to(a,.6,{scaleX:2,scaleY:2,alpha:0,onComplete:function(){oy(5,a)}}),Gt(e,"orange","blank")}}function qm(){if(!(!0===zH.d.dronesofdoom||Yy.level<2)&&!0!==Eb())if(1!==fk){if(oH=LH.cost.dronesOfDoom,!(Yy.mp<oH)){iH="Drones of Doom",tH="conjuration",Qa("spellDoneHeal"),Ru(bL,"yellow",150,40,20,200,pS.Bin,15,3,-100,.9),zy.drawMyMp(-oH),rH=yc(1+.33*Fe(),.9),fa(Wy[bL].name+" is engulfed by a swarm.",3);var e=bL;Wy[e].dronesOfDoomTickCount=1,Wy[e].dronesOfDoomTick=rH,Wy[e].dronesOfDoomTickInterval.kill(),Wy[e].dronesOfDoomTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[a].name)return Wy[a].dronesOfDoomTickInterval.kill(),void(Wy[a].dronesOfDoomTickCount=0);zy.myDotDamage(Wy[a].dronesOfDoomTick,a,e,"Drones of Doom"),Wy[a].dronesOfDoomTickCount+=1,19===Wy[a].dronesOfDoomTickCount&&(Wy[a].dronesOfDoomTickInterval.kill(),Wy[a].dronesOfDoomTickCount=0)}("magic",e)}}),Li("Drones of Doom",e,"dronesOfDoomIcon",18e3,-128),1===Wy[bL].attackStatus&&hi(!0),Ep(),qb()}}else Ni()}function Pm(e,a,n,t,i,o,r){function l(a,r,s){""!==Wy[e].name&&(zy.myDotDamage(s,e,t),a++,"Curse of the Spirits"===n&&(s+=7),a===i?Ci(n.replace(/ /g,"")+"Icon"+r,e):cS.delayedCall(o/1e3,function(){l(a,r,s)}))}if(Wy[e].name){var s=Lt();Li(n,e,n.replace(/ /g,"")+"Icon"+s,0,-32),cS.delayedCall(1,function(){l(0,s,a)}),Qa(r?r:"spellDoneHeal")}}function Qm(e,a,n,t){function i(n){""!==Wy[e].name&&(zy.myDotDamage(dS.ceil(s),e,"physical"),Xi(e),++n<a&&(WS.bleed=cS.delayedCall(o,function(){i(n)})))}if(Wy[e].name){t||(t=-32),Li("Bleed",e,"bleedIcon",a*n,t,-32),"object"==typeof WS.bleed?WS.bleed.kill():WS.bleed=q();var o=n/1e3,r=3,l=bS.eq[12].type;r="pierced"===l?17:"slashed"===l?13:"crushed"===l||"punched"===l?9:"cleaved"===l?4:3;var s=dS.ceil(bS.eq[12].damage*r);WS.bleed=cS.delayedCall(o,function(){i(0)})}}function Rm(){""===mS.getElementById("druhealing").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("druhealing",!1),Ei("druhealing","-500% 0%"),zy.checkDruidSkills(),refreshdruHealing.kill())}function Fm(){refreshdruHealing=cS.to("",.1,{repeat:-1,onRepeat:Rm})}function Nm(){!0===zH.d.druhealing||Yy.level<3||!0!==Eb()&&(oH=LH.cost.greaterHealing,Yy.mp<oH||(iH="Greater Healing",nH=ke(2e3),tH="alteration",!1!==Db()&&(Py("teal"),os("druHealing"),Qa("spellCastHeal",0,nH))))}function jm(){!0===zH.d.skinlikenature||Yy.level<5||!0!==Eb()&&(oH=LH.cost.skinLikeNature,Yy.mp<oH||(iH="Skin Like Nature",nH=ke(4500),tH="abjuration",!1!==Db()&&(Qy("green"),os("skinLikeNature"),Qa("spellCastAbjure",0,nH))))}function zm(){PT=!1,nk-=QT,Zy-=RT,ny(),zy.drawMyHp(),U()}function Ym(){""===mS.getElementById("tornado").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("tornado",!1),Ei("tornado","-600% 0%"),zy.checkDruidSkills(),refreshtornado.kill())}function Km(){refreshtornado=cS.to("",.1,{repeat:-1,onRepeat:Ym})}function Wm(){if(!(!0===zH.d.tornado||Yy.level<7)&&!0!==Eb())if(1!==fk){iH="Tornado",tH="evocation",Qa("windcast"),Yy.talent5<20&&(qi("tornado",!0),Ei("tornado","-600% -100%"),cS.delayedCall(6,Km),jy(mS.getElementById("tornado"),6,"tornado"));a=yc(1.6*Re()*(1+3*ea()/100)*zy.mobDefense(bL),.8);Om(bL,a,0);var e=0;for(hS.tornado=ly("tornado",250,373);dS.random()>.25;){e+=100;var a,n=gb();Om(n,a=yc(.55*Re()*(1+3*ea()/100)*zy.mobDefense(n),.8),e)}cS.delayedCall(.5,function(){Qa("windcast")}),Ep(),qb()}else Ni()}function Om(e,a,n){""!==Wy[e].name&&("High"===kw.videoSetting&&cS.delayedCall(n/1e3,function(){!function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=(Gw[e].offsetTop,Wy[e].cY,ry(hS.tornado,5,400*dS.random()+315,480,1,1,!0));xr(n),cS.to(n,.5,{scaleX:.75*n.scaleX,scaleY:.75*n.scaleY,x:a,y:490,onComplete:function(){oy(5,n)}})}(e)}),cS.delayedCall((500+n)/1e3,function(){zy.myMagicDamage("physical",a,e,ee(),"Tornado")}))}function Xm(){""===mS.getElementById("engulfingroots").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("engulfingroots",!1),Ei("engulfingroots","-700% 0%"),zy.checkDruidSkills(),refreshengulfingRoots.kill())}function Vm(){refreshengulfingRoots=cS.to("",.1,{repeat:-1,onRepeat:Xm})}function _m(){!0===zH.d.engulfingroots||Yy.level<9||!0!==Eb()&&(1!==fk?(oH=LH.cost.engulfingRoots,Yy.mp<oH||(iH="Engulfing Roots",nH=ke(1e3),tH="alteration",!1!==Db()&&(Py("green"),os("engulfingRoots"),Qa("spellCastAbjure",0,nH),0===zy.autoAttackStatus&&Si()))):Ni())}function $m(){!0===zH.d.shieldofspikes||Yy.level<11||!0!==Eb()&&(oH=LH.cost.shieldOfSpikes,Yy.mp<oH||(iH="Shield of Spikes",nH=ke(1500),tH="abjuration",!1!==Db()&&(Qy("green"),os("shieldOfSpikes"),Qa("spellCastAbjure",0,nH))))}function Um(){zC=!1}function Jm(){!0===zH.d.driftingdeath||Yy.level<13||!0!==Eb()&&(oH=LH.cost.driftingDeath,Yy.mp<oH||(iH="Drifting Death",nH=ke(1500),tH="conjuration",!1!==Db()&&(Qy("green"),os("driftingDeath"),Qa("spellCastDot",0,nH))))}function Zm(e,a){Wy[a].driftingDeathTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[a].name)return Wy[a].driftingDeathTickInterval.kill(),void(Wy[a].driftingDeathTickCount=0);zy.myDotDamage(Wy[a].driftingDeathTick,a,e,"Drifting Death"),Wy[a].driftingDeathTickCount+=1,25===Wy[a].driftingDeathTickCount&&(Wy[a].driftingDeathTickInterval.kill(),Wy[a].driftingDeathTickCount=0)}(e,a)}})}function eu(){!0===zH.d.drusow||Yy.level<15||!0!==Eb()&&(oH=LH.cost.spiritOfTheWolf,Yy.mp<oH||(iH="Spirit of the Wolf",nH=ke(3500),tH="alteration",!1!==Db()&&(Qy("teal"),os("druSow"),Qa("spellCastAbjure",0,nH))))}function au(){NC=!1,ny()}function nu(){""===mS.getElementById("lightningblast").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("lightningblast",!1),Ei("lightningblast","-900% 0%"),zy.checkDruidSkills(),refreshlightningBlast.kill())}function tu(){refreshlightningBlast=cS.to("",.1,{repeat:-1,onRepeat:nu})}function iu(){!0===zH.d.lightningblast||Yy.level<17||!0!==Eb()&&(oH=0,iH="Lightning Blast",nH=ke(2e3),tH="evocation",!1!==Db()&&(Py("yellow"),os("lightningBlast"),Qa("spellCastEvoke2",0,nH)))}function ou(e){if(Wy[e].name&&"Low"!==kw.videoSetting){var a=sy("lightningBlast",5,Gw[e].offsetLeft+Wy[e].cX-175,100,350,697,!0);a.image.onload=function(){xr(a),cS.to(a,.25,{alpha:.1,onComplete:function(){cS.to(a,2.5,{alpha:0,onComplete:function(){oy(5,a)}})}})}}}function ru(){""===mS.getElementById("earthquake").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("earthquake",!1),Ei("earthquake","-1000% 0%"),zy.checkDruidSkills(),refreshearthquake.kill())}function lu(){refreshearthquake=cS.to("",.1,{repeat:-1,onRepeat:ru})}function su(){!0===zH.d.earthquake||Yy.level<20||!0!==Eb()&&(oH=0,iH="Earthquake",nH=ke(1500),tH="evocation",!1!==Db()&&(Py("orange"),os("earthquake"),Qa("spellDoneFlames",0,nH)))}function du(e,a,n,t){function i(e,a,n,t){var r=dS.ceil(dS.random()*a-n),l=dS.ceil(dS.random()*a-n),s=dS.ceil(dS.random()*a-n),d=dS.ceil(dS.random()*a-n),c=dS.ceil(dS.random()*a-n),m=dS.ceil(dS.random()*a-n);cS.to(NG.gameView,t/1e3,{top:l,left:r,onComplete:function(){cS.to(NG.gameView,t/1e3,{top:m,left:c,onComplete:function(){cS.to(NG.gameView,t/1e3,{top:d,left:s,onComplete:function(){cS.to(NG.gameView,t/1e3,{top:0,left:0,onComplete:function(){++o<e&&i(e,a,n,t)}})}})}})}})}var o=0;i(e,a,n,t)}function cu(){!0===zH.d.chloroplast||Yy.level<24||!0!==Eb()&&(oH=LH.cost.chloroplast,Yy.mp<oH||(iH="Chloroplast",nH=ke(3e3),tH="abjuration",!1!==Db()&&(Qy("green"),os("chloroplast"),Qa("spellCastHeal",0,nH))))}function mu(){""===mS.getElementById("hurricane").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("hurricane",!1),Ei("hurricane","-1100% 0%"),zy.checkDruidSkills(),refreshhurricane.kill())}function uu(){refreshhurricane=cS.to("",.1,{repeat:-1,onRepeat:mu})}function fu(){!0===zH.d.hurricane||Yy.level<28||!0!==Eb()&&(oH=0,iH="Hurricane",nH=ke(1500),tH="conjuration",!1!==Db()&&(Py("blue"),os("hurricane"),Qa("spellCastEvoke2",0,nH)))}function hu(e,a,n,t,i){""!==Wy[e].name&&(i||(i="Chilled"),Wy[e].coldTimer.kill(),Wy[e].coldTimer=cS.delayedCall(a/1e3,function(){Wy[e].chillStatus=!1}),Wy[e].chillStatus=!0,Li(i,e,"slowIcon",a,n),t||ln(e,"cold",a/1e3))}function gu(){""===mS.getElementById("sylvangrasp").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("sylvangrasp",!1),Ei("sylvangrasp","-1200% 0%"),zy.checkDruidSkills(),refreshsylvanGrasp.kill())}function pu(){refreshsylvanGrasp=cS.to("",.1,{repeat:-1,onRepeat:gu})}function bu(){!0===zH.d.sylvangrasp||Yy.level<32||!0!==Eb()&&(oH=LH.cost.sylvanGrasp,Yy.mp<oH||(iH="Sylvan Creep",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("green"),os("sylvanGrasp"),Qa("spellCastAbjure",0,nH))))}function vu(){""===mS.getElementById("volcano").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("volcano",!1),Ei("volcano","-1300% 0%"),zy.checkDruidSkills(),refreshvolcano.kill())}function yu(){refreshvolcano=cS.to("",.1,{repeat:-1,onRepeat:vu})}function ku(){!0===zH.d.volcano||Yy.level<38||!0!==Eb()&&(1!==fk?(oH=0,iH="Volcano",nH=ke(3e3),tH="evocation",!1!==Db()&&(Py("red"),os("volcano"),Qa("spellCastEvoke1",0,nH))):Ni())}function Su(){""===mS.getElementById("rangertrackId").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("rangertrackId",!1),Ei("rangertrackId","-200% -100%"),refreshrangerTrack.kill())}function Iu(){refreshrangerTrack=cS.to("",.1,{repeat:-1,onRepeat:Su})}function wu(){!0!==zH.d.rangertrackId&&!0!==zH.d.addmonsterId&&!0!==Eb()&&(qi("rangertrackId",!0),Ei("rangertrackId","-200% -300%"),cS.delayedCall(180,Iu),jy(mS.getElementById("rangertrackId"),180,"rangertrackId"),QC=!0,ui())}function Cu(){!0!==zH.d.froststrike&&!0!==Eb()&&(1!==fk?(iH="Frost Strike",nH=ke(3e3),tH="evocation",!1!==Db()&&(Py("blue"),os("frostStrike"),Qa("spellCastEvoke1",0,nH))):Ni())}function Mu(){if(!(!0===zH.d.scourge||Yy.level<2)&&!0!==Eb())if(1!==fk){if(oH=AH.cost.scourge,!(Yy.mp<oH)){iH="Scourge",tH="conjuration",Qa("spellDoneHeal"),zy.drawMyMp(-oH);var e=bL;Ru(e,"green",280,150,10,-250,pS.Qin,25,5,100,1.2),rH=yc(1+.42*Fe(),.9);fa(Wy[e].name+" sweats and shivers, looking feverish.",3);var a=Yy.level;a>50&&(a=50),!1===Wy[e].scourgeStatus&&(Wy[e].scourgeStatus=!0),Wy[e].scourgeTickCount=1,Wy[e].scourgeTick=rH,Wy[e].scourgeTickInterval.kill(),Wy[e].scourgeTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[e].name)return Wy[e].scourgeTickInterval.kill(),Wy[e].scourgeTickCount=0,void(Wy[e].scourgeStatus=!1);zy.myDotDamage(Wy[e].scourgeTick,e,a,"Scourge"),Wy[e].scourgeTickCount+=1,19===Wy[e].scourgeTickCount&&(Wy[e].scourgeTickInterval.kill(),Wy[e].scourgeTickCount=0)}(e,"poison")}});Li("Scourge",e,"scourgeIcon",18e3,-128),1===Wy[bL].attackStatus&&hi(!0),Ep(),qb()}}else Ni()}function Tu(){""===mS.getElementById("shmhealing").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("shmhealing",!1),Ei("shmhealing","-500% 0%"),zy.checkShamanSkills(),refreshshmHealing.kill())}function Bu(){refreshshmHealing=cS.to("",.1,{repeat:-1,onRepeat:Tu})}function Du(){!0===zH.d.shmhealing||Yy.level<3||!0!==Eb()&&(oH=AH.cost.greaterHealing,Yy.mp<oH||(iH="Greater Healing",nH=ke(2e3),tH="alteration",!1!==Db()&&(Py("blue"),os("shmHealing"),Qa("spellCastHeal",0,nH))))}function Lu(e,a,n){function t(e){var a=dS.pow(24*dS.random(),2);if(dS.random()>.5)o=640-a;else var o=640+a;var r=ry(i,5,o,0);cS.to(r,1*dS.random()+.5,{y:200*dS.random()+100,scaleX:0,scaleY:0,onComplete:function(){oy(5,r)}}),e<n&&cS.delayedCall(.01,function(){t(++e)})}if(e||(e="teal"),a===E&&(a=!0,mv(e,.2,1)),(!n||n>60)&&(n=At(60)),"High"===kw.videoSetting){var i=ly(e+"particle50");if(t(0),!0===a){var o=sy(e+"Light3",5,640,720,2560,1544,!0);o.image.onload=function(){cS.to(o,1.5,{alpha:0,ease:pS.Qin,onComplete:function(){oy(5,o)}})}}}}function Hu(){!0===zH.d.calloftheancients||Yy.level<5||!0!==Eb()&&(oH=AH.cost.callOfTheAncients,Yy.mp<oH||(iH="Call of the Ancients",nH=ke(3e3),tH="abjuration",!1!==Db()&&(Qy("purple"),os("callOfTheAncients"),Qa("spellCastAbjure",0,nH))))}function Au(e,a,n,t,i,o){function r(e){var a=1480*dS.random()-100,n=550*dS.random()-100,t=ry(l,6,a,n,.4,.4),m=dS.random()*(o-o/3)+o/3;cS.to(t,m,{ease:c,bezier:{curviness:1.5,values:[{x:320+640*dS.random(),y:668+150*dS.random()},{x:640-s,y:778-s}]}}),cS.to(t,m,{ease:d,scaleX:1,scaleY:1,onComplete:function(){oy(6,t)}}),e<i&&r(++e)}if("High"===kw.videoSetting){e||(e="blue"),a||(a="easeInBack"),n||(n=5),n=25,t||(t=5),t=5,(!i||i>80)&&(i=At(80)),o=2.5;var l=ly(e+"particle50"),s=dS.ceil(t/2),d=pS.Bin,c=pS.Qout;r(0);var m=sy(e+"Light3",5,640,720,2560,1544,!0);m.image.onload=function(){cS.to(m,2,{scaleX:0,scaleY:0,alpha:0,ease:pS.Qin,onComplete:function(){oy(5,m)}})}}}function xu(){KT=!1,Oy-=WT,Xy-=OT,Uy-=XT,$y-=VT,_y-=_T,ny(),zy.drawMyHp()}function Eu(){""===mS.getElementById("togorsinsects").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("togorsinsects",!1),Ei("togorsinsects","-600% 0%"),zy.checkShamanSkills(),refreshtogorsInsects.kill())}function Gu(){refreshtogorsInsects=cS.to("",.1,{repeat:-1,onRepeat:Eu})}function qu(){!0===zH.d.togorsinsects||Yy.level<9||!0!==Eb()&&(1!==fk?(oH=AH.cost.togorsInsects,Yy.mp<oH||(iH="Togor's Insects",nH=ke(2500),tH="alteration",!1!==Db()&&(Qy("white"),os("togorsInsects"),Qa("spellCastDot",0,nH)))):Ni())}function Pu(e,a,n){Wy[e].slowStatus=!0,fa(Wy[e].name+" yawns.",3),Wy[e].togorsInsectsTimeout.kill(),Wy[e].togorsInsectsTimeout=cS.delayedCall(n/1e3,function(){!function(e){Wy[e].togorsInsectsTimeout.kill(),Wy[e].slowStatus=!1}(e)}),Li("Togor's Insects",e,a,n,-192)}function Qu(e,a,n,t,i,o,r,l,s,d){function c(l){""===Wy[e].name||l>n||("Chill of Death"!==o||!1!==Wy[e].fearStatus?(zy.myDotDamage(a,e,i,o),cS.delayedCall(t/1e3,function(){c(++l)})):Ci(r,yw))}cS.delayedCall(t/1e3,function(){c(1)});r&&(s||(s=0),d||(d=!1),Li(o,e,r,n*t,l,s,!1,d))}function Ru(e,a,n,t,i,o,r,l,s,d,c){function m(e){var d=f+(dS.random()*n-n/2),g=h+(dS.random()*n-n/2),p=sy(a+"particle50",5,d,g,l,l);p.image.onload=function(){cS.to(p,c,{scaleX:s/25,scaleY:s/25,x:d-u,y:g+o,ease:r,onComplete:function(){oy(5,p)}})},++e<t&&cS.delayedCall(i,function(){m(e)})}if("High"===kw.videoSetting){l===E&&(l=3),s===E&&(s=15),d===E&&(d=0),c||(c=.6);var u=dS.ceil((s-l)/2),f=Gw[e].offsetLeft+Wy[e].cX,h=Gw[e].offsetTop+Wy[e].cY+d;n||(n=200),t||(t=30),t>50&&(t=50),i||(i=25),i/=1e3,o||(o=12),r||(r=pS.Qout),m(0)}}function Fu(){""===mS.getElementById("cannibalize").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("cannibalize",!1),Ei("cannibalize","-700% 0%"),zy.checkShamanSkills(),refreshcannibalize.kill())}function Nu(){refreshcannibalize=cS.to("",.1,{repeat:-1,onRepeat:Fu})}function ju(){if(!(!0===zH.d.cannibalize||Yy.level<11||!0===Eb()||Yy.hp<dS.round(.18*Yy.maxHp))){qi("cannibalize",!0),Ei("cannibalize","-700% -100%"),cS.delayedCall(45,Nu),jy(mS.getElementById("cannibalize"),45,"cannibalize");var e=dS.round(.18*Yy.maxHp);Yy.hp-=e,Yy.hp<0&&(Yy.hp=1);var a=dS.round(.33*Yy.maxHp);Yy.mp+=a,zy.drawMyHp(),zy.drawMyMp(),fa("Your body aches as your mind clears.",3),Ep(),"High"===kw.videoSetting&&function(){function e(n){var t=320*dS.random()+320*dS.random()+320*dS.random()+320*dS.random(),i=250*dS.random()+197,o=0;t>640?o+=300:o-=300;var r=1500*dS.random()+250,l=ry(a,5,t,720);cS.to(l,r/1e3,{scaleX:.1,scaleY:.1,y:i,onComplete:function(){oy(5,l)}}),cS.to(l,r/1e3,{x:t+8+o}),n<50&&cS.delayedCall(.015,function(){e(++n)})}mv("#b55555",.3,.6);var a=ly("redparticle50");e(0);for(var n=ly("redLight3",400,400),t=0;t<=2;t++){var i=ry(n,5,640,720,6.4,3.86,!0);fS.cannibalize(i)}}(),Qa("spellDoneSlam")}}function zu(){""===mS.getElementById("poisonnova").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("poisonnova",!1),Ei("poisonnova","-900% 0%"),zy.checkShamanSkills(),refreshpoisonNova.kill())}function Yu(){refreshpoisonNova=cS.to("",.1,{repeat:-1,onRepeat:zu})}function Ku(){!0===zH.d.poisonnova||Yy.level<13||!0!==Eb()&&(oH=AH.cost.poisonNova,Yy.mp<oH||(iH="Poison Nova",nH=ke(1500),tH="evocation",!1!==Db()&&(Py("green"),os("poisonNova"),Qa("spellCastEvoke1",0,nH))))}function Wu(){""===mS.getElementById("enstill").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("enstill",!1),Ei("enstill","-800% 0%"),zy.checkShamanSkills(),refreshenstill.kill())}function Ou(){refreshenstill=cS.to("",.1,{repeat:-1,onRepeat:Wu})}function Xu(){!0===zH.d.enstill||Yy.level<17||!0!==Eb()&&(1!==fk?(oH=AH.cost.enstill,Yy.mp<oH||(iH="Enstill",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("green"),os("enstill"),Qa("spellCastAbjure",0,nH)))):Ni())}function Vu(){!0===zH.d.shmsow||Yy.level<15||!0!==Eb()&&(oH=AH.cost.spiritOfTheWolf,Yy.mp<oH||(iH="Spirit of the Wolf",nH=ke(3500),tH="alteration",!1!==Db()&&(Qy("teal"),os("shmSow"),Qa("spellCastAbjure",0,nH))))}function _u(){NC=!1,ny()}function $u(){!0===zH.d.affliction||Yy.level<20||!0!==Eb()&&(1!==fk?(oH=AH.cost.affliction,Yy.mp<oH||(iH="Affliction",nH=ke(2500),tH="conjuration",!1!==Db()&&(Qy("green"),os("affliction"),Qa("spellCastDot",0,nH)))):Ni())}function Uu(e,a){Ru(e,"green",300,50,20,100,pS.Qin,5,15,-50,1.1),rH=yc(.53*Fe(),.9),Wy[e].afflictionTick=rH,fa(Wy[e].name+"'s constitution is wracked by pestilence.",3),Wy[e].afflictionTickCount=1,Wy[e].afflictionStatus=!0,Wy[e].afflictionTickInterval.kill(),Wy[e].afflictionTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[e].name)return Wy[e].afflictionTickInterval.kill(),Wy[e].afflictionTickCount=0,void(Wy[e].afflictionStatus=!1);zy.myDotDamage(Wy[e].afflictionTick,e,a,"Affliction"),Wy[e].afflictionTickCount+=1,25===Wy[e].afflictionTickCount&&(Wy[e].afflictionTickInterval.kill(),Wy[e].afflictionTickCount=0,Wy[e].afflictionStatus=!1)}(e,"poison")}}),Li("Affliction",e,"afflictionIcon",a,-320),1===Wy[bL].attackStatus&&hi(!0)}function Ju(){""===mS.getElementById("reclaimblood").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("reclaimblood",!1),Ei("reclaimblood","-1100% 0%"),zy.checkShamanSkills(),refreshreclaimBlood.kill())}function Zu(){refreshreclaimBlood=cS.to("",.1,{repeat:-1,onRepeat:Ju})}function ef(){!0===zH.d.reclaimblood||Yy.level<24||!0!==Eb()&&(oH=AH.cost.reclaimBlood,Yy.mp<oH||(iH="Reclaim Blood",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("red"),os("reclaimBlood"),Qa("spellCastHeal",0,nH))))}function af(){!0===zH.d.talismanofaltuna||Yy.level<32||!0!==Eb()&&(oH=AH.cost.talismanOfAltuna,Yy.mp<oH||(iH="Talisman of Trogmaar",nH=ke(3e3),tH="abjuration",!1!==Db()&&(Qy("green"),os("talismanOfAltuna"),Qa("spellCastAbjure",0,nH))))}function nf(){ZT=!1,Zy-=eB,ny(),zy.drawMyHp()}function tf(){""===mS.getElementById("glacialimpact").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("glacialimpact",!1),Ei("glacialimpact","-1200% 0%"),zy.checkShamanSkills(),glacialImpactMight.kill())}function of(){glacialImpactMight=cS.to("",.1,{repeat:-1,onRepeat:tf})}function rf(){!0===zH.d.glacialimpact||Yy.level<28||!0!==Eb()&&(1!==fk?(oH=AH.cost.glacialImpact,Yy.mp<oH||(iH="Glacial Impact",nH=ke(1500),tH="evocation",!1!==Db()&&(os("glacialImpact"),Py("teal"),Qa("spellCastEvoke1",0,nH)))):Ni())}function lf(){""===mS.getElementById("devouringplague").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("devouringplague",!1),Ei("devouringplague","-1300% 0%"),zy.checkShamanSkills(),refreshdevouringPlague.kill())}function sf(){refreshdevouringPlague=cS.to("",.1,{repeat:-1,onRepeat:lf})}function df(){!0===zH.d.devouringplague||Yy.level<38||!0!==Eb()&&(1!==fk?(oH=AH.cost.devouringPlague,Yy.mp<oH||(iH="Devouring Plague",nH=ke(1500),tH="conjuration",!1!==Db()&&(Py("purple"),os("devouringPlague"),Qa("spellDoneFlames",0,nH)))):Ni())}function cf(e,a){if(""===Wy[e].name)return Wy[e].devouringPlagueInterval.kill(),void(Wy[e].devouringPlagueTickCount=0);Ru(bL,"purple",320,20,45,-180,pS.sin,7,12,100,.8),zy.myDotDamage(Wy[e].devouringPlagueTick,e,"poison","Devouring Plague"),Wy[e].devouringPlagueTickCount+=1;var n="devouringPlagueIcon",t=24e3-(3e3*Wy[e].devouringPlagueTickCount-3e3);e-1>-1&&0===Wy[e-1].devouringPlagueTickCount&&""!==Wy[e-1].name&&(Wy[e-1].devouringPlagueTickCount=Wy[e].devouringPlagueTickCount,Wy[e-1].devouringPlagueInterval=cS.to("",3,{repeat:-1,onRepeat:function(){cf(e-1,"poison")}}),Li("Devouring Plague",e-1,n,t,-416),9===Wy[e-1].devouringPlagueTickCount&&(Wy[e-1].devouringPlagueInterval.kill(),Wy[e-1].devouringPlagueTickCount=0)),e+1<5&&0===Wy[e+1].devouringPlagueTickCount&&""!==Wy[e+1].name&&(Wy[e+1].devouringPlagueTickCount=Wy[e].devouringPlagueTickCount,Wy[e+1].devouringPlagueInterval=cS.to("",3,{repeat:-1,onRepeat:function(){cf(e+1,"poison")}}),Li("Devouring Plague",e+1,n,t,-416),9===Wy[e+1].devouringPlagueTickCount&&(Wy[e+1].devouringPlagueInterval.kill(),Wy[e+1].devouringPlagueTickCount=0)),9===Wy[e].devouringPlagueTickCount&&(Wy[e].devouringPlagueInterval.kill(),Wy[e].devouringPlagueTickCount=0)}function mf(){if(!(!0===zH.d.guardianspirit||Yy.level<7)&&!0!==Eb()){if(!0===zy.petAlive)return Rd(),Ei("guardianspirit","-1500% 0%"),void zy.checkShamanSkills();if(oH=AH.cost.guardianSpirit,!(Yy.mp<oH)&&!1===zy.petAlive){if(iH="Guardian Spirit",nH=ke(4500),tH="conjuration",!1===Db())return;Qy("teal"),os("guardianSpirit"),Qa("spellCastAbjure"),An(["images1/a wolf.png"])}}}function uf(){if(!0!==zH.d.bonespirit&&!0!==Eb())if(1!==fk){iH="Bone Spirit",tH="evocation";var e=3e3;Yy.talent4>=20&&(e=2500),nH=ke(e),!1!==Db()&&(Py(Yy.talent4<20?"purple":"orange"),os("boneSpirit"),Qa("spellCastEvoke1",0,nH))}else Ni()}function ff(){if(!(!0===zH.d.invokedeath||Yy.level<2)&&!0!==Eb()){if(!0===zy.petAlive)return Rd(),Qa("skeleton_die"),Ei("invokedeath","-1600% 0%"),void zy.checkNecromancerSkills();if(oH=xH.cost.invokeDeath,!(Yy.mp<oH)&&!1===zy.petAlive){if(iH="Invoke Death",nH=ke(6e3),tH="conjuration",!1===Db())return;Qa("spellCastAbjure"),Qy("purple"),os("invokeDeath"),An(["images1/a dark skeleton.png"])}}}function hf(){if(!(!0===zH.d.cascadingdarkness||Yy.level<3)&&!0!==Eb())if(1!==fk){if(oH=xH.cost.cascadingDarkness,!(Yy.mp<oH)){iH="Cascading Darkness",tH="conjuration",Qa("spellDoneHeal"),zy.drawMyMp(-oH);var e=bL;Ru(e,"magenta",200,60,10,150,pS.Bout,25,5,-50,1),rH=yc(1+.38*Fe(),.9);fa(Wy[e].name+" is engulfed in darkness.",3),Wy[e].cascadingDarknessTickCount=1,Wy[e].cascadingDarknessTick=rH,Wy[e].cascadingDarknessTickInterval.kill(),Wy[e].cascadingDarknessTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[a].name)return Wy[a].cascadingDarknessTickInterval.kill(),void(Wy[a].cascadingDarknessTickCount=0);zy.myDotDamage(Wy[a].cascadingDarknessTick,a,e,"Cascading Darkness"),Wy[a].cascadingDarknessTickCount+=1,Wy[a].cascadingDarknessTick=dS.ceil(1.01*Wy[a].cascadingDarknessTick),19===Wy[a].cascadingDarknessTickCount&&(Wy[a].cascadingDarknessTickInterval.kill(),Wy[a].cascadingDarknessTickCount=0)}("magic",e)}});Li("Cascading Darkness",e,"cascadingDarknessIcon",18e3,-128),1===Wy[bL].attackStatus&&hi(!0),Ep(),qb()}}else Ni()}function gf(){if(!(Yy.level<17||!1===sB||!0===Vw||!0===_w||(oH=xH.cost.corpseExplosion,Yy.mp<oH))){sB=!1,tH="evocation",zy.drawMyMp(-oH),qb(),Ep();for(var e=0;e<=4;e++)if(""!==Wy[e].name){var a=yc(2.4*Re()*zy.mobDefense(e),.85);"High"===kw.videoSetting&&pf(e),Qa("corpseexplode4"),zy.myMagicDamage("physical",a,e,ee(),"Corpse Explosion")}}}function pf(e,a){function n(e){var a=500*dS.random()-250+t,o=200*dS.random()-100+i;if(a>t)r=1.01*a+12;else var r=.99*a+12;var l=ry(s,5,a,o);cS.to(l,.75,{x:r,y:o+37,scaleX:0,scaleY:0,onComplete:function(){oy(5,l)}}),e<30&&cS.delayedCall(.01,function(){n(++e)})}var t=Gw[e].offsetLeft+Wy[e].cX,i=Gw[e].offsetTop+Wy[e].cY;if(a)var o="petExplosion",r="orange";else var o="corpseExplosion",r="red";var l=sy(o,5,t-150,512,0,0,!0);l.image.onload=function(){cS.to(l,.4,{scaleY:4,scaleX:4,alpha:0,onComplete:function(){oy(5,l)}})};var s=ly(r+"particle50");a||n(0)}function bf(){""===mS.getElementById("invokefear").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("invokefear",!1),Ei("invokefear","-500% 0%"),zy.checkNecromancerSkills(),refreshinvokeFear.kill())}function vf(){refreshinvokeFear=cS.to("",.1,{repeat:-1,onRepeat:bf})}function yf(){!0===zH.d.invokefear||Yy.level<5||!0!==Eb()&&(1!==fk?(oH=xH.cost.invokeFear,Yy.mp<oH||(iH="Invoke Fear",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("purple"),os("invokeFear"),Qa("spellDoneFlames",0,nH)))):Ni())}function kf(){""===mS.getElementById("drainsoul").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("drainsoul",!1),Ei("drainsoul","-600% 0%"),zy.checkNecromancerSkills(),refreshdrainSoul.kill())}function Sf(){refreshdrainSoul=cS.to("",.1,{repeat:-1,onRepeat:kf})}function If(){!0===zH.d.drainsoul||Yy.level<7||!0!==Eb()&&(1!==fk?(oH=xH.cost.drainSoul,Yy.mp<oH||(iH="Drain Soul",nH=ke(1500),tH="evocation",!1!==Db()&&(Py("green"),os("drainSoul"),Qa("spellCastEvoke1",0,nH)))):Ni())}function wf(){!0===zH.d.archshielding||Yy.level<9||!0!==Eb()&&(oH=xH.cost.archShielding,Yy.mp<oH||(iH="Arch Shielding",nH=ke(4e3),tH="abjuration",!1!==Db()&&(Qy("green"),os("archShielding"),Qa("spellCastAbjure",0,nH))))}function Cf(){nB=!1,Zy-=tB,nk-=iB,ik-=oB,ok-=rB,ny(),zy.drawMyHp()}function Mf(){""===mS.getElementById("feigndeath").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("feigndeath",!1),Ei("feigndeath","-700% 0%"),zy.checkNecromancerSkills(),refreshnecFeignDeath.kill())}function Tf(){refreshnecFeignDeath=cS.to("",.1,{repeat:-1,onRepeat:Mf})}function Bf(){Yy.level<11||!0!==zH.d.feigndeath&&!0!==Eb()&&(oH=xH.cost.feignDeath,Yy.mp<oH||(iH="Feign Death",nH=ke(1500),tH="abjuration",tC=0,!1!==Db()&&(Qy("purple"),os("necFeignDeath"),Qa("spellCastEvoke1",0,nH))))}function Df(){""===mS.getElementById("augmentdeath").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("augmentdeath",!1),Ei("augmentdeath","-800% 0%"),zy.checkNecromancerSkills(),refreshaugmentDeath.kill())}function Lf(){refreshaugmentDeath=cS.to("",.1,{repeat:-1,onRepeat:Df})}function Hf(){if(!(!0===zH.d.augmentdeath||Yy.level<13)&&!0!==Eb())if(!1!==zy.petAlive){qi("augmentdeath",!0),Ei("augmentdeath","-800% -100%"),cS.delayedCall(90,Lf),jy(mS.getElementById("augmentdeath"),90,"augmentdeath"),fa(qD+"'s eyes gleam with madness.",3),fL=.5;var e=dS.ceil((3.5*Fe()+dS.random()*(Yy.level/6))*(1+2.25*aa()/100));ND+=e,zy.drawMyHp(),cS.delayedCall(30,Af),zy.popupHealSlot(e,5),"High"===kw.videoSetting&&function(){if("High"===kw.videoSetting){var e=Gw[5].offsetLeft+lL/2,a=Gw[5].offsetTop+sL/2,n=sy("lineNovaRed",5,e-200,a-200,400,400,!0);n.image.onload=function(){cS.to(n,.15,{alpha:.7,scaleX:1.25,scaleY:1.25,onComplete:function(){cS.to(n,.45,{alpha:0,scaleX:2,scaleY:2,ease:pS.lin})}})}}}(),Qa("skeleton_att")}else fa("Your companion is not here.")}function Af(){fL=1}function xf(){!0===zH.d.igniteblood||Yy.level<15||!0!==Eb()&&(1===fk&&Yy.talent2<20?Ni():(oH=dS.ceil(Fe()/5),Yy.mp<oH||(iH="Ignite Blood",nH=ke(2500),tH="conjuration",!1!==Db()&&(Qy("red"),os("igniteBlood"),Qa("spellCastDot",0,nH)))))}function Ef(e,a){Wy[a].igniteBloodTickInterval.kill(),Wy[a].igniteBloodTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[a].name)return Wy[a].igniteBloodTickInterval.kill(),void(Wy[a].igniteBloodTickCount=0);zy.myDotDamage(Wy[a].igniteBloodTick,a,e,"Ignite Blood"),Wy[a].igniteBloodTickCount+=1,25===Wy[a].igniteBloodTickCount&&(Wy[a].igniteBloodTickInterval.kill(),Wy[a].igniteBloodTickCount=0)}("fire",a)}})}function Gf(){""===mS.getElementById("diamondskin").textContent&&0!=sH&&0!=lH&&(qi("diamondskin",!1),Ei("diamondskin","-1200% 0%"),zy.checkNecromancerSkills(),refreshdiamondSkin.kill())}function qf(){refreshdiamondSkin=cS.to("",.1,{repeat:-1,onRepeat:Gf})}function Pf(){if(!(!0===zH.d.diamondskin||Yy.level<24)&&!0!==Eb()){qi("diamondskin",!0),Ei("diamondskin","-1200% -100%");var e=12e4;if(Yy.talent12>=20&&(e=6e4),cS.delayedCall(e/1e3,qf),jy(mS.getElementById("diamondskin"),e/1e3,"diamondskin"),Ep(),iH="Diamond Skin",tH="abjuration",qb(),fa("Your skin becomes like a diamond.",3),xT=dS.ceil(1.25*Ne()),Yy.talent12<20){cS.delayedCall(9,Qf);a=9e3;cS.delayedCall(a/1e3,function(){wi("diamondSkinIcon")})}else var a=0;Bi("Diamond Skin","diamondSkinIcon",a,-384),"High"===kw.videoSetting&&function(){mv("#08f",.3,2);var e=sy("diamondSkin",5,440,397,400,400,!0);e.image.onload=function(){cS.to(e,3,{y:667,alpha:0,scaleX:.5,scaleY:.5,onComplete:function(){oy(5,e)}}),cS.to(e,3,{scaleX:1.5,scaleY:1.5})},Lh()}(),Qa("spellDoneBuff")}}function Qf(){xT=0,e("#diamondSkinIcon").remove()}function Rf(){""===mS.getElementById("bondofdeath").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("bondofdeath",!1),Ei("bondofdeath","-1100% 0%"),zy.checkNecromancerSkills(),refreshbondOfDeath.kill())}function Ff(){refreshbondOfDeath=cS.to("",.1,{repeat:-1,onRepeat:Rf})}function Nf(){!0===zH.d.bondofdeath||Yy.level<20||!0!==Eb()&&(1!==fk?(oH=xH.cost.bondOfDeath,Yy.mp<oH||(iH="Bond of Death",nH=ke(2e3),tH="alteration",!1!==Db()&&(Qy("yellow"),os("bondOfDeath"),Qa("spellCastDot",0,nH)))):Ni())}function jf(e){Wy[e].bondOfDeathInterval.kill(),Wy[e].bondOfDeathInterval=cS.to("",3,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[a].name)return Wy[a].bondOfDeathInterval.kill(),void(Wy[a].bondOfDeathTickCount=0);zy.myDotDamage(Wy[a].bondOfDeathTick,a,e,"Bond of Death"),Wy[a].bondOfDeathTickCount+=1,21===Wy[a].bondOfDeathTickCount&&(Wy[a].bondOfDeathInterval.kill(),Wy[a].bondOfDeathTickCount=0)}("magic",e)}})}function zf(){!0===zH.d.asystole||Yy.level<28||!0!==Eb()&&(1!==fk?(iH="Asystole",nH=ke(2500),tH="conjuration",!1!==Db()&&(Qy("green"),os("asystole"),Qa("spellCastDot",0,nH))):Ni())}function Yf(){""===mS.getElementById("detonatesoul").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("detonatesoul",!1),Ei("detonatesoul","-1400% 0%"),zy.checkNecromancerSkills(),refreshdetonateSoul.kill())}function Kf(){refreshdetonateSoul=cS.to("",.1,{repeat:-1,onRepeat:Yf})}function Wf(){!0===zH.d.detonatesoul||Yy.level<32||!0!==Eb()&&(1!==fk?(oH=xH.cost.detonateSoul,Yy.mp<oH||(iH="Detonate Soul",tH="evocation",nH=ke(2e3),!1!==Db()&&(Py("green"),os("detonateSoul"),Qa("spellDoneFlames",0,nH)))):Ni())}function Of(e,a){function n(e,a){if(a>0){var t=Gw[e].offsetLeft+Wy[e].cX,i=parseInt(o.style.width,10);cS.to(o,.25,{left:t-i/2,ease:pS.lin}),a-=250,cS.delayedCall(.25,function(){n(e,a)})}}var t=Gw[e].offsetLeft+Wy[e].cX,i=Gw[e].offsetTop+Wy[e].cY,o=Vi(t-75,i-75,150,150,"asystole");o.id="detonateSoul"+e,NG.eWin.appendChild(o),cS.to(o,5,{force3D:"auto",width:8,height:8,left:t-4,top:i-4,onComplete:function(){Wi(o),a===Wy[e].ID&&Wy[e].name&&(Gt(e,"green","blank"),function(e){function a(e){var i=500*dS.random()-250+n,o=200*dS.random()-100+t;if(i>n)r=1.01*i+12;else var r=.99*i+12;var l=sy("greenparticle50",5,i,o,25,25);l.image.onload=function(){cS.to(l,.75,{x:r,y:o+37,scaleX:0,scaleY:0,onComplete:function(){oy(5,l)}})},e<30&&cS.delayedCall(.01,function(){a(++e)})}if(""===Wy[e].name)return;var n=Gw[e].offsetLeft+Wy[e].cX,t=Gw[e].offsetTop+Wy[e].cY;!function(e,a){e===E&&(e=bL);a||(a="detonation");var n=Gw[e].offsetLeft+Wy[e].cX,t=sy(a,5,n-150,490,0,0,!0);t.image.onload=function(){cS.to(t,.2,{scaleY:2.66,scaleX:2.66,ease:pS.cout}),cS.to(t,1.3,{alpha:0,ease:pS.xout,onComplete:function(){oy(5,t)}})};var i=sy(a,5,n-150,490,0,0,!0);i.image.onload=function(){cS.to(i,1,{scaleY:2.66,scaleX:2.66,alpha:0,ease:pS.cout,onComplete:function(){oy(5,i)}})}}(e);a(0)}(e),mv("#fff",.3,1))}}),cS.to(o,5,{rotation:10800,ease:pS.lin,onComplete:function(){cS.set(this.target,{rotation:0})}}),n(e,5e3)}function Xf(){""===mS.getElementById("howlingterror").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("howlingterror",!1),Ei("howlingterror","-1500% 0%"),zy.checkNecromancerSkills(),refreshhowlingTerror.kill())}function Vf(){refreshhowlingTerror=cS.to("",.1,{repeat:-1,onRepeat:Xf})}function _f(){if(!(!0===zH.d.howlingterror||Yy.level<38||!0===Eb()||(oH=xH.cost.howlingTerror,Yy.mp<oH))){iH="Howling Terror",tH="alteration",qb(),zy.drawMyMp(-oH),Qa("spellCastEvoke2"),qi("howlingterror",!0),Ei("howlingterror","-1500% -100%"),cS.delayedCall(90,Vf),jy(mS.getElementById("howlingterror"),90,"howlingterror"),"High"===kw.videoSetting&&fo("howlingTerror");for(var e=0;e<=4;e++)if(""!==Wy[e].name){var a=(28e3*dS.random()+3e3)*nc(e);if(Wy[e].level>Yy.level&&(a-=dS.pow(Wy[e].level-Yy.level,1.25)),a<7e3&&(a=7e3),a>2e4&&(a=2e4),tc(e,a,-480,Wy[e].name+" runs in terror."),Yy.talent4>=1){Qu(e,yc(Qe()*(1+.27*Ze())/20,.8),20,1e3,"cold","Chill of Death","chillOfDeath",-480,-32)}}}}function $f(){!0!==zH.d.chaosflux&&!0!==Eb()&&(1!==fk?!0!==Wy[bL].charmStatus?(iH="Chaos Flux",tH="evocation",nH=ke(3e3),!1!==Db()&&(Py("magenta"),os("chaosFlux"),Qa("spellCastEvoke2",0,nH))):fa("You cannot attack your charmed pet.",3):Ni())}function Uf(){!0===zH.d.gaspingembrace||Yy.level<2||!0!==Eb()&&(1!==fk?!0!==Wy[bL].charmStatus?(oH=EH.cost.gaspingEmbrace,Yy.mp<oH||(iH="Gasping Embrace",nH=ke(2500),tH="conjuration",!1!==Db()&&(Py("magenta"),os("gaspingEmbrace"),Qa("spellCastDot",0,nH)))):fa("You cannot attack your charmed pet.",3):Ni())}function Jf(e,a){Wy[e].gaspingEmbraceTickInterval.kill(),Wy[e].gaspingEmbraceTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[a].name||""===Wy[a].name)return Wy[a].gaspingEmbraceTickInterval.kill(),Wy[a].gaspingEmbraceTickCount=0,void(Wy[a].gaspingEmbraceStatus=!1);zy.myDotDamage(Wy[a].gaspingEmbraceTick,a,e,"Gasping Embrace"),Wy[a].gaspingEmbraceTickCount+=1,22===Wy[a].gaspingEmbraceTickCount&&(Wy[a].gaspingEmbraceTickInterval.kill(),Wy[a].gaspingEmbraceTickCount=0)}(a,e)}})}function Zf(){""===mS.getElementById("cajolingwhispers").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("cajolingwhispers",!1),Ei("cajolingwhispers","-500% 0%"),zy.checkEnchanterSkills(),refreshcajolingWhispers.kill())}function eh(){refreshcajolingWhispers=cS.to("",.1,{repeat:-1,onRepeat:Zf})}function ah(){if(!(!0===zH.d.cajolingwhispers||Yy.level<3)&&!0!==Eb())if(1!==fk){if(!0===Wy[hT].charmStatus)return Dk.kill(),void nh(hT);oH=EH.cost.cajolingWhispers,Yy.mp<oH||(iH="Cajoling Whispers",nH=ke(1500),tH="alteration",!1!==Db()&&(Py("purple"),os("cajolingWhispers"),Qa("spellCastAbjure",0,nH)))}else Ni()}function nh(a){a&&(Dk.kill(),e("#charmIcon"+a).stop(!0,!0).remove()),Wy[hT].charmStatus=!1,a?fa("You release "+qD+" from your command."):fa(qD+" is no longer captivated.",3),qD="",e("#pethpbardiv").css("display","none")}function th(){""===mS.getElementById("colorshift").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("colorshift",!1),Ei("colorshift","-600% 0%"),zy.checkEnchanterSkills(),refreshcolorShift.kill())}function ih(){refreshcolorShift=cS.to("",.1,{repeat:-1,onRepeat:th})}function oh(){if(!(!0===zH.d.colorshift||Yy.level<5||!0===Eb()||(oH=EH.cost.colorShift,Yy.mp<oH))){iH="Color Shift",tH="alteration",Qa("novaice"),"High"===kw.videoSetting&&fo("colorShift"),qi("colorshift",!0),Ei("colorshift","-600% -100%"),zy.drawMyMp(-oH),cS.delayedCall(20,ih),jy(mS.getElementById("colorshift"),20,"colorshift");for(var e=0;e<=4;e++)if(""!==Wy[e].name&&!1===Wy[e].charmStatus)if(!0===ac(e))fa(Wy[e].name+" resisted "+iH+".",1);else{var a=6e3;if(Yy.talent2>=20&&dS.random()>.65?(a*=1.6,cS.to(Fw[e],a/1e3,{startAt:{rotationY:18e3},rotationY:0}),fa(Wy[e].name+" begins to spin.")):fa(Wy[e].name+" is stunned by scintillating colors."),ao(e,a,-192),Yy.talent2>=1){var n=yc(Qe()*(1+8.7*Ue()/100),.87);zy.myMagicDamage("magic",n,e,ee(),"Color Shift")}}Ep(),qb()}}function rh(){""===mS.getElementById("mesmerize").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("mesmerize",!1),Ei("mesmerize","-700% 0%"),zy.checkEnchanterSkills(),refreshmesmerize.kill())}function lh(){refreshmesmerize=cS.to("",.1,{repeat:-1,onRepeat:rh})}function sh(){!0===zH.d.mesmerize||Yy.level<7||!0!==Eb()&&(1!==fk?!0!==Wy[bL].charmStatus?(oH=EH.cost.mesmerize,Yy.mp<oH||(iH="Mesmerize",nH=ke(2500),tH="conjuration",!1!==Db()&&(Py("purple"),os("mesmerize"),Qa("spellCastAbjure",0,nH)))):fa("You cannot mesmerize your charmed pet.",3):Ni())}function dh(e,a,n){function t(r){var l=Gw[e].offsetLeft+Wy[e].imageWidth/2+200*dS.random()-100-a/2,s=o+dS.random()*Wy[e].cY+10,d=sy(n+"particle50",5,l,s,a,a);d.image.onload=function(){var n=2*dS.random()+1;cS.to(d,n,{scaleX:.1,scaleY:.1,x:l+i,ease:pS.qin,onComplete:function(){oy(5,d)}}),cS.to(d,n,{y:"+="+(dS.random()*(2.5*Wy[e].cY)+a),ease:pS.sin})},++r<=40&&t(r)}if("High"===kw.videoSetting){a||(a=25);var i=(a-3)/2;n||(n="white");var o=Gw[e].offsetTop-a/2;t(0)}}function ch(){!0===zH.d.discordantbarrier||Yy.level<9||!0!==Eb()&&(oH=EH.cost.discordantBarrier,Yy.mp<oH||(iH="Discordant Barrier",nH=ke(4e3),tH="abjuration",!1!==Db()&&(Qy("teal"),os("discordantBarrier"),Qa("spellCastAbjure",0,nH))))}function mh(){fB=!1,Zy-=hB,nk-=gB,ok-=pB,ny(),zy.drawMyHp()}function uh(){""===mS.getElementById("shiftlessdeeds").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("shiftlessdeeds",!1),Ei("shiftlessdeeds","-800% 0%"),zy.checkEnchanterSkills(),refreshshiftlessDeeds.kill())}function fh(){refreshshiftlessDeeds=cS.to("",.1,{repeat:-1,onRepeat:uh})}function hh(){!0===zH.d.shiftlessdeeds||Yy.level<11||!0!==Eb()&&(1!==fk?!0!==Wy[bL].charmStatus?(oH=EH.cost.shiftlessDeeds,Yy.mp<oH||(iH="Shiftless Deeds",nH=ke(2500),tH="alteration",!1!==Db()&&(Py("white"),os("shiftlessDeeds"),Qa("spellCastDot",0,nH)))):fa("You cannot slow your charmed pet.",3):Ni())}function gh(e){Wy[e].shiftlessStatus=!0,fa(Wy[e].name+" slows down.",3),Wy[e].shiftlessDeedsTimeout.kill(),Wy[e].shiftlessDeedsTimeout=cS.delayedCall(120,function(){!function(e){Wy[e].shiftlessDeedsTimeout.kill(),Wy[e].shiftlessStatus=!1}(e)}),Li("Shiftless Deeds",e,"slowIcon",12e4,-256)}function ph(){!0===zH.d.enchantweapon||Yy.level<13||!0!==Eb()&&(oH=EH.cost.enchantWeapon,Yy.mp<oH||(iH="Enchant Weapon",nH=ke(3e3),tH="conjuration",!1!==Db()&&(Qy("teal"),os("enchantWeapon"),Qa("spellCastAbjure",0,nH))))}function bh(){vB=!1}function vh(){!0===zH.d.adorninggrace||Yy.level<15||!0!==Eb()&&(oH=EH.cost.adorningGrace,Yy.mp<oH||(iH="Adorning Grace",nH=ke(3500),tH="abjuration",!1!==Db()&&(Qy("purple"),os("adorningGrace"),Qa("spellCastAbjure",0,nH))))}function yh(){wB=!1,Jy-=kB,Vy-=SB,_y-=IB,ny()}function kh(){!0===zH.d.alacrity||Yy.level<17||!0!==Eb()&&(oH=EH.cost.alacrity,Yy.mp<oH||(iH="Alacrity",nH=ke(2500),tH="alteration",!1!==Db()&&(Qy("teal"),os("alacrity"),Qa("spellCastAbjure",0,nH))))}function Sh(){""===mS.getElementById("gravityflux").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("gravityflux",!1),Ei("gravityflux","-1000% 0%"),zy.checkEnchanterSkills(),refreshgravityFlux.kill())}function Ih(){refreshgravityFlux=cS.to("",.1,{repeat:-1,onRepeat:Sh})}function wh(){!0===zH.d.gravityflux||Yy.level<20||!0!==Eb()&&(oH=EH.cost.gravityFlux,Yy.mp<oH||(iH="Gravity Flux",tH="evocation",nH=ke(2e3),!1!==Db()&&(Py("magenta"),os("gravityFlux"),Qa("spellCastEvoke2",0,nH))))}function Ch(e){if(""!==Wy[e].name){var a=G(),n=G();Cg(e),Wy[e].phased?(Gw[e].style.opacity=1,Fw[e].style.opacity=.5):(Gw[e].style.opacity=1,Fw[e].style.opacity=1),a.to(Gw[e],.7,{bottom:1056,force3D:"auto",ease:pS.qout}).to(Gw[e],.7,{bottom:ZS,force3D:"auto",ease:pS.qin}),n.to(Pw[e],.7,{width:"60%",height:30,bottom:-890,force3D:"auto",ease:pS.qout}).to(Pw[e],.7,{width:"100%",height:50,bottom:0,force3D:"auto",ease:pS.qin})}}function Mh(e){cS.delayedCall(1.4,function(){!function(e){var a=Wy[e];xb(3===a.rare?dS.round(.025*a.maxHp):1===a.rare?dS.round(.1*a.maxHp):dS.round(.066*a.maxHp),e),cS.delayedCall(1.4,function(){Wy[e].fallingStatus=!1})}(e),Ci("stunIcon",e)})}function Th(){""===mS.getElementById("mysticrune").textContent&&0!=sH&&0!=lH&&(qi("mysticrune",!1),Ei("mysticrune","-1100% 0%"),zy.checkEnchanterSkills(),refreshmysticRune.kill())}function Bh(){refreshmysticRune=cS.to("",.1,{repeat:-1,onRepeat:Th})}function Dh(){Yy.hp<=0||!0===US||!0===zH.d.mysticrune||Yy.level<24||(oH=EH.cost.mysticRune,Yy.mp<oH||(iH="Mystic Rune",tH="abjuration",nH=ke(1500),!1!==Db()&&(Qy("teal"),os("mysticRune"),Qa("spellCastAbjure",0,nH))))}function Lh(e,a){function n(t){var i=sy(e,6,0,-60,1280,50);i.image.onload=function(){cS.to(i,.8,{y:720,ease:pS.sout,onComplete:function(){oy(6,i)}})},++t<a&&cS.delayedCall(.1,function(){n(t)})}e||(e="buffRings"),a||(a=5),n(0)}function Hh(){""===mS.getElementById("tashania").textContent&&0!=sH&&0!=lH&&(qi("tashania",!1),Ei("tashania","-1200% 0%"),zy.checkEnchanterSkills(),refreshtashania.kill())}function Ah(){refreshtashania=cS.to("",.1,{repeat:-1,onRepeat:Hh})}function xh(){!0===zH.d.tashania||Yy.level<28||!0!==Eb()&&(oH=EH.cost.tashania,Yy.mp<oH||(iH="Tashania",nH=ke(1500),tH="abjuration",!1!==Db()&&(Py("orange"),os("tashania"),Qa("spellCastDot",0,nH))))}function Eh(){!0!==Eb()&&(!0===zH.d.clarity||Yy.level<32||(oH=EH.cost.clarity,Yy.mp<oH||(iH="Clarity",tH="alteration",nH=ke(3e3),!1!==Db()&&(Qy("blue"),os("clarity")))))}function Gh(){""===mS.getElementById("enthrall").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("enthrall",!1),Ei("enthrall","-1300% 0%"),zy.checkEnchanterSkills(),refreshenthrall.kill())}function qh(){refreshenthrall=cS.to("",.1,{repeat:-1,onRepeat:Gh})}function Ph(){!0===zH.d.enthrall||Yy.level<38||!0!==Eb()&&(oH=EH.cost.enthrall,Yy.mp<oH||(iH="Enthrall",nH=ke(1500),tH="conjuration",!1!==Db()&&(Py("purple"),os("enthrall"),Qa("spellCastAbjure",0,nH))))}function Qh(){!0!==zH.d.lavabolt&&!0!==Eb()&&(1!==fk?(iH="Lava Bolt",tH="conjuration",nH=ke(3e3),!1!==Db()&&(Py("red"),os("lavaBolt"),Qa("spellCastEvoke1",0,nH))):Ni())}function Rh(){if(!(!0===zH.d.earthelemental||Yy.level<2)&&!0!==Eb()){if(!0===zy.petAlive)return Rd(),Qa("elem_die3"),Ei("earthelemental","-1700% 0"),void zy.checkMagicianSkills();if(oH=GH.cost.elemental,!(Yy.mp<oH)&&!1===zy.petAlive){if(iH="Earth Elemental",nH=ke(6e3),tH="conjuration",!1===Db())return;Qy("green"),os("earthElemental"),Qa("spellCastAbjure"),An(["images1/an earth elemental.png"])}}}function Fh(){if(!(!0===zH.d.airelemental||Yy.level<2)&&!0!==Eb()){if(!0===zy.petAlive)return Rd(),Qa("elem_die3"),Ei("airelemental","-1700% -100%"),void zy.checkMagicianSkills();if(oH=GH.cost.elemental,!(Yy.mp<oH)&&!1===zy.petAlive){if(iH="Air Elemental",nH=ke(6e3),tH="conjuration",!1===Db())return;Qy("white"),os("airElemental"),Qa("spellCastAbjure"),An(["images1/an air elemental.png"])}}}function Nh(){if(!(!0===zH.d.fireelemental||Yy.level<2)&&!0!==Eb()){if(!0===zy.petAlive)return Rd(),Qa("elem_die3"),Ei("fireelemental","-1700% -200%"),void zy.checkMagicianSkills();if(oH=GH.cost.elemental,!(Yy.mp<oH)&&!1===zy.petAlive){if(iH="Fire Elemental",nH=ke(6e3),tH="conjuration",!1===Db())return;Qy("red"),os("fireElemental"),Qa("spellCastAbjure"),An(["images1/a fire elemental.png"])}}}function jh(){if(!(!0===zH.d.frostelemental||Yy.level<2)&&!0!==Eb()){if(!0===zy.petAlive)return Rd(),Qa("elem_die3"),Ei("frostelemental","-1700% -300%"),void zy.checkMagicianSkills();if(oH=GH.cost.elemental,!(Yy.mp<oH)&&!1===zy.petAlive){if(iH="Frost Elemental",nH=ke(6e3),tH="conjuration",!1===Db())return;Qy("teal"),os("frostElemental"),Qa("spellCastAbjure"),An(["images1/a frost elemental.png"])}}}function zh(){!0===zH.d.shieldoflava||Yy.level<3||!0!==Eb()&&(oH=GH.cost.shieldOfLava,Yy.mp<oH||(iH="Shield of Lava",nH=ke(2500),tH="abjuration",!1!==Db()&&(Qy("red"),os("shieldOfLava"),Qa("spellCastAbjure",0,nH))))}function Yh(){BB=!1}function Kh(){""===mS.getElementById("firestorm").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("firestorm",!1),Ei("firestorm","-400% 0%"),zy.checkMagicianSkills(),refreshfirestorm.kill())}function Wh(){refreshfirestorm=cS.to("",.1,{repeat:-1,onRepeat:Kh})}function Oh(){if(!(!0===zH.d.firestorm||Yy.level<5)&&!0!==Eb())if(1!==fk){if(oH=GH.cost.firestorm,!(Yy.mp<oH)){iH="Firestorm",nH=ke(2e3),tH="evocation",Qa("infernoloop",0,1e3),qi("firestorm",!0),Ei("firestorm","-400% -100%"),cS.delayedCall(15,Wh),jy(mS.getElementById("firestorm"),15,"firestorm"),zy.drawMyMp(-oH);l=yc(.7*Re(),.75);cacheFirestorm=ly("petExplosion",300,135),"High"===kw.videoSetting&&Xh(bL),zy.myMagicDamage("fire",l,bL,ee(),"Firestorm");var e=3+dS.ceil(dS.random()*dS.ceil(Re()/40));Yy.talent3>=20&&(e=~~(2*e));var a=Re(),n=se(),t=Pp(),i=!1;"High"===kw.videoSetting&&(i=!0);for(var o=0;o<=e;o++){var r=gb();if(r!==E){var l=dS.ceil(.4*a+(n-70)/5+dS.random()*(t/8.4));!0===i&&function(e){cS.delayedCall(.1,function(){Xh(e)})}(r),zy.myMagicDamage("fire",l,r,ee(),"Firestorm")}}Ep(),qb()}}else Ni()}function Xh(e){function a(n){var t=ry(cacheFirestorm,5,240*e+(60*dS.random()-30),710-80*(n+1),1,1,!0,!0);cS.to(t,.6,{startAt:{alpha:.6},scaleY:1.6-n/2,scaleX:1.6-n/2,alpha:0,onComplete:function(){oy(5,t)}}),++n<2&&cS.delayedCall(.25,function(){a(n)})}a(0)}function Vh(){!0===zH.d.phantomplate||Yy.level<7||!0!==Eb()&&(oH=GH.cost.phantomPlate,Yy.mp<oH||(iH="Phantom Plate",nH=ke(3500),tH="abjuration",!1!==Db()&&(Qy("green"),os("phantomPlate"),Qa("spellCastAbjure",0,nH))))}function _h(){DB=!1,Zy-=LB,nk-=HB,ny(),zy.drawMyHp(),U()}function $h(){""===mS.getElementById("frozenorb").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("frozenorb",!1),Ei("frozenorb","-500% 0%"),zy.checkMagicianSkills(),refreshfrozenOrb.kill())}function Uh(){refreshfrozenOrb=cS.to("",.1,{repeat:-1,onRepeat:$h})}function Jh(){!0===zH.d.frozenorb||Yy.level<9||!0!==Eb()&&(1!==fk?(oH=GH.cost.frozenOrb,Yy.mp<oH||(iH="Frozen Orb",nH=ke(2500),tH="evocation",!1!==Db()&&(Py("teal"),os("frozenOrb"),Qa("spellCastEvoke1",0,nH)))):Ni())}function Zh(){""===mS.getElementById("burnout").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("burnout",!1),Ei("burnout","-600% 0%"),zy.checkMagicianSkills(),refreshburnout.kill())}function eg(){refreshburnout=cS.to("",.1,{repeat:-1,onRepeat:Zh})}function ag(){if(!(!0===zH.d.burnout||Yy.level<11||!0===US))if(!1!==zy.petAlive){if(0!=lH&&0!==_w&&0!==Vw){qi("burnout",!0),Ei("burnout","-600% -100%"),cS.delayedCall(35,eg),jy(mS.getElementById("burnout"),35,"burnout"),fa(qD+" goes berserk.",3),fL=.4;var e=dS.ceil(5.2*Fe()+dS.random()*(Yy.level/6));ND+=e,zy.popupHealSlot(e,5),zy.drawMyHp(),cS.delayedCall(25,ng),zy.popupHealSlot(e,4),"High"===kw.videoSetting&&function(){function e(a){var i=150*dS.random()+75,o=(dS.random(),t+(100*dS.random()-200)),r=sy("fireparticle50",6,n-100,o,i,i);r.image.onload=function(){cS.to(r,.6,{alpha:0,y:o+75,ease:pS.Qin,onComplete:function(){oy(6,r)}})},++a<12&&cS.delayedCall(.01,function(){e(a)})}function a(e){var i=sy("orangeLight3",5,n-1280,t-827,2560,1544);i.image.onload=function(){cS.to(i,.8,{alpha:0,ease:pS.Qin,onComplete:function(){oy(5,i)}})},++e<3&&a(e)}var n=Gw[5].offsetLeft+lL/2,t=Gw[5].offsetTop+sL/2;e(0);a(0)}(),Qa("elem_att3")}}else fa("Your minion is not here.")}function ng(){fL=1}function tg(){!0===zH.d.elementalarmor||Yy.level<13||!0!==Eb()&&(oH=GH.cost.elementalArmor,Yy.mp<oH||(iH="Elemental Armor",nH=ke(2500),tH="abjuration",!1!==Db()&&(Qy("orange"),os("elementalArmor"),Qa("spellCastAbjure",0,nH))))}function ig(){xB=!1,lk-=EB,sk-=GB,ny()}function og(){""===mS.getElementById("manashield").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("manashield",!1),Ei("manashield","-700% 0%"),zy.checkMagicianSkills(),refreshmanaShield.kill())}function rg(){refreshmanaShield=cS.to("",.1,{repeat:-1,onRepeat:og})}function lg(){if(!(!0===zH.d.manashield||Yy.level<13)&&!0!==Eb()){tH="conjuration",qi("manashield",!0),Ei("manashield","-700% -100%"),cS.delayedCall(45,rg),jy(mS.getElementById("manashield"),45,"manashield"),Ep(),qb(),zy.drawMyMp(),fa("You are shielded by an azure ether.",3),qB=!0,PB.kill(),PB=cS.delayedCall(16,sg);cS.delayedCall(16,function(){wi("manaShieldIcon")}),Bi("Mana Shield","manaShieldIcon",16e3,-224),"High"===kw.videoSetting&&function(){mv("#08f",.3,2);var e=sy("manaShield",5,440,397,400,400,!0);e.image.onload=function(){cS.to(e,3,{y:797,alpha:0}),cS.to(e,1.5,{rotation:720,onComplete:function(){oy(5,e)}})},Lh()}(),Qa("energyshield")}}function sg(){qB=!1,fa("The ether fades.",3)}function dg(){""===mS.getElementById("psionicstorm").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("psionicstorm",!1),Ei("psionicstorm","-800% 0%"),zy.checkMagicianSkills(),refreshpsionicStorm.kill())}function cg(){refreshpsionicStorm=cS.to("",.1,{repeat:-1,onRepeat:dg})}function mg(){!0===zH.d.psionicstorm||Yy.level<17||!0!==Eb()&&(1!==fk?(oH=GH.cost.psionicStorm,Yy.mp<oH||(iH="Psionic Storm",nH=ke(2500),tH="evocation",!1!==Db()&&(Py("yellow"),os("psionicStorm"),Qa("spellCastEvoke2",0,nH)))):Ni())}function ug(e){function a(e){var i=n+(300*dS.random()-150),o=t+(200*dS.random()-100),r=sy("psionic"+~~(4*dS.random()+1),5,i,o,100,100,!0);r.image.onload=function(){cS.to(r,.5,{scaleX:0,scaleY:0,rotation:180*dS.random()-90,onComplete:function(){oy(5,r)}})},e<12&&cS.delayedCall(.033,function(){a(++e)})}if("High"===kw.videoSetting){var n=Gw[e].offsetLeft+Wy[e].cX-75,t=Gw[e].offsetTop+Wy[e].cY-75;a(0)}}function fg(){""===mS.getElementById("reclaimelements").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("reclaimelements",!1),Ei("reclaimelements","-900% 0%"),zy.checkMagicianSkills(),refreshreclaimElements.kill())}function hg(){refreshreclaimElements=cS.to("",.1,{repeat:-1,onRepeat:fg})}function gg(){!0===zH.d.reclaimelements||Yy.level<20||!0!==Eb()&&(!1!==zy.petAlive?(oH=GH.cost.reclaimElements,Yy.mp<oH||(iH="Reclaim Elements",nH=ke(2500),tH="alteration",!1!==Db()&&(Py("yellow"),os("reclaimElements"),Qa("spellCastHeal",0,nH)))):fa("Your minion is not here."))}function pg(){""===mS.getElementById("elementalfury").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(refreshelementalFury.kill(),qi("elementalfury",!1),Ei("elementalfury","-1000% 0%"),zy.checkMagicianSkills())}function bg(){refreshelementalFury=cS.to("",.1,{repeat:-1,onRepeat:pg})}function vg(){if(!0!==US)if(1!==fk){if(!(!0===zH.d.elementalfury||Yy.level<24))if(!1!==zy.petAlive){if(!0!==Eb()){1===Wy[bL].attackStatus&&hi(!0);var a=4e4;if(Yy.talent8>=20&&(a=2e4),cS.delayedCall(a/1e3,bg),jy(mS.getElementById("elementalfury"),a/1e3,"elementalfury"),qi("elementalfury",!0),Ei("elementalfury","-1000% -100%"),"an earth elemental"===PD){Qa("spellDoneHeal");for(t=0;t<=4;t++)""!==Wy[t].name&&(ud(t),Li("Root",t,"rootBuffIcon",0,-544))}else if("an air elemental"===PD){fa(qD+" summons a lightning storm."),An(["images1/lightningBlast.png"]);for(var n=2+dS.round(Fe()/60),t=0;t<=n;t++){r=1e3+17e3*dS.random();cS.delayedCall(r/1e3,function(){!function(){if(!(Ab()<1)&&(Qa("lightning"+~~(3*dS.random()+1)),""!==Wy[BS].name)){var e=yc(3*Fe(),.35);"High"===kw.videoSetting&&ou(BS),zy.myMagicDamage("lightning",e,BS,ee(),"Chaos Lightning")}}()})}}else if("a fire elemental"===PD){An(["images1/fireNova.png"]);for(t=0;t<7;t++)cS.delayedCall(3*t+3,function(){!function(){if(!(Ab()<1)){Qa("poisonnova"),fo("fireNova",!0);for(var e=0;e<=4;e++)if(""!==Wy[e].name){var a=yc(1.1*Re(),.77);zy.myMagicDamage("fire",a,e,ee(),"Pulsing Inferno")}}}()})}else if("a frost elemental"===PD){if(Ab()<1)return;Qa("blue3");for(var i=BS,t=i-1;t<=i+1;t++)if(t>=0&&t<=4&&Wy[t].name){Cg(t),Wy[t].phased||(Gw[t].style.opacity=1);var o=yc(1.6*Re(),.9);zy.myMagicDamage("cold",o,t,ee(),"Glacier");var r=5e3+5e3*dS.random();Wy[t].spellActive.kill(),Wy[t].frozenTimer.kill(),e("#iceIcon"+t).remove(),cS.to(jw[t],1,{easel:{tint:"#08f",tintAmount:0}}),ip(t,r,-320)}}}}else fa("Your minion is not here.")}else Ni()}function yg(){""===mS.getElementById("armageddon").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("armageddon",!1),Ei("armageddon","-1100% 0%"),zy.checkMagicianSkills(),refresharmageddon.kill())}function kg(){refresharmageddon=cS.to("",.1,{repeat:-1,onRepeat:yg})}function Sg(){!0===zH.d.armageddon||Yy.level<28||!0!==Eb()&&(oH=GH.cost.armageddon,Yy.mp<oH||(iH="Armageddon",nH=ke(3e3),tH="evocation",!1!==Db()&&(Py("red"),os("armageddon"),Qa("spellDoneFlames",0,nH))))}function Ig(){""===mS.getElementById("stasisfield").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("stasisfield",!1),Ei("stasisfield","-1200% 0%"),refreshstasisField.kill())}function wg(){refreshstasisField=cS.to("",.1,{repeat:-1,onRepeat:Ig})}function Cg(e){""!==Wy[e].name&&(cS.killTweensOf(Gw[e]),cS.killChildTweensOf(Gw[e]))}function Mg(){if(!(!0===zH.d.stasisfield||Yy.level<32)&&!0!==Eb())if(1!==fk){if(oH=GH.cost.stasisField,!(Yy.mp<oH)){1===Wy[bL].attackStatus&&hi(!0),tH="conjuration",qi("stasisfield",!0),Ei("stasisfield","-1200% -100%"),cS.delayedCall(80,wg),jy(mS.getElementById("stasisfield"),80,"stasisfield");var e=bL,a=1e4*dS.random()+35e3;Wy[e].level>Yy.level&&(a-=dS.pow(Wy[e].level-Yy.level,1.2)),a<15e3&&(a=15e3),Tg(e,a,-384,"Stasis Field"),zy.drawMyMp(-oH),Li("Stasis Field",e,"stasisIcon",a,-384),qb()}}else Ni()}function Tg(e,a,n,t){3===Wy[e].rare?fa(Wy[e].name+" is immune to stasis."):(fa(Wy[e].name+" is sealed in a dimensional rift.",3),Ht(e),Cg(e),cS.to(Fw[e],1,{opacity:.2}),blur(e,12),a/=1e3,Wy[e].stasisFieldStatus=!0,Wy[e].phased?cS.delayedCall(a,function(){cS.to(Fw[e],.5,{opacity:.5}),Wy[e].stasisFieldStatus=!1,blur(e,0)}):cS.delayedCall(a,function(){cS.to(Fw[e],.5,{opacity:1}),Wy[e].stasisFieldStatus=!1,blur(e,0)}),function(e,a,n){function t(){if(Wy[n].stasisFieldStatus&&""!==Wy[n].name){var e=360*dS.random(),a=xt(o,150,e),l=Et(r,150,e),s=ry(i,5,a,l);cS.to(s,.75,{x:o,y:r,scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(5,s)}});var e=360*dS.random(),d=xt(o,150,e),c=Et(r,150,e),m=ry(i,5,d,c);cS.to(m,.75,{x:o,y:r,scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(5,m)}}),cS.delayedCall(.01,function(){t()})}else Wy[n].stasisFieldStatus=!1}Cg(n);var i=ly(e+"particle50");var o=Gw[n].offsetLeft+Wy[n].cX,r=Gw[n].offsetTop+Wy[n].cY;t()}("purple",0,e),Li(t,e,"stasisIcon",1e3*a,n),Qa("novaelec"))}function Bg(){""===mS.getElementById("alteredstate").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("alteredstate",!1),Ei("alteredstate","-1300% 0%"),refreshalteredState.kill())}function Dg(){refreshalteredState=cS.to("",.1,{repeat:-1,onRepeat:Bg})}function Lg(){if(!(!0===zH.d.alteredstate||Yy.level<38)&&!0!==Eb()){qi("alteredstate",!0),Ei("alteredstate","-1300% -100%"),cS.delayedCall(60,Dg),jy(mS.getElementById("alteredstate"),60,"alteredstate"),Ep();fa("A dimensional abnormality ripples around your body.",3),zy.drawMyMp(),"High"===kw.videoSetting&&function(){function e(n){var t=ry(a,5,25*dS.random()-50,50*n-100,1,1,!0);cS.to(t,.1,{alpha:.4,onComplete:function(){cS.to(t,3,{alpha:0,onComplete:function(){oy(5,t)},ease:pS.cout})}}),++n<16&&cS.delayedCall(.01,function(){e(n)})}var a=ly("alteredState2",1380,100);e(0)}(),Qa("fade"),QB=!0,cS.delayedCall(6,function(){QB=!1}),cS.delayedCall(6,function(){wi("alteredStateIcon")}),Bi("Altered State","alteredStateIcon",6e3,-416)}}function Hg(){!0!==zH.d.icebolt&&!0!==Eb()&&(1!==fk?(Yy.talent1<20&&Yy.talent10<20&&(iH="Ice Bolt"),Yy.talent1>=20&&(iH="Static Bolt"),Yy.talent10>=20&&(iH="Fire Bolt"),tH="evocation",nH=ke(2e3),!1!==Db()&&(Yy.talent1<20&&Yy.talent10<20&&Py("teal"),Yy.talent1>=20&&Yy.talent10<20&&Py("white"),Yy.talent10>=20&&Py("orange"),os("iceBolt"),Qa("spellCastEvoke1",0,nH))):Ni())}function Ag(){""===mS.getElementById("chargedbolts").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("chargedbolts",!1),Ei("chargedbolts","-400% 0%"),zy.checkWizardSkills(),refreshchargedBolts.kill())}function xg(){refreshchargedBolts=cS.to("",.1,{repeat:-1,onRepeat:Ag})}function Eg(){function e(e){e===E&&(e=gb()),e!==E&&(left=256*(e+1)-220+100*dS.random(),function(e,a){if("High"!==kw.videoSetting)return;Gw[e].offsetLeft,Wy[e].cX;var n="chargedBolts";dS.random()>.5&&(n="chargedBolts2");var t=sy(n,5,590,655,100,100);t.image.onload=function(){function e(a){a-=50,xr(t),a>0&&cS.delayedCall(.1,function(){e(a)})}cS.to(t,.75,{scaleX:.8,scaleY:.8,y:550,x:a,onComplete:function(){oy(5,t)}}),e(750)}}(e,left),function(e){cS.delayedCall(.75,function(){if(""!==Wy[e].name){var a=yc(1.6*Re(),.2);zy.myMagicDamage("lightning",a,e,ee(),"Charged Bolts"),Qa("zap"+~~(3*dS.random()+1)),Lp("lightning",a,e)}})}(e))}function a(e){var n=sy("whiteLight3",5,-640,0,2560,1597);n.image.onload=function(){cS.to(n,.75,{startAt:{alpha:.3},alpha:0})},++e<4&&a(e)}if(!(!0===zH.d.chargedbolts||Yy.level<2||!0===Eb()||(oH=qH.cost.chargedBolts,Yy.mp<oH))){iH="Charged Bolts",tH="evocation",Qa("chargedbolt"),qi("chargedbolts",!0),Ei("chargedbolts","-400% -100%");var n=8e3;Yy.talent3>=20&&(n=4e3),cS.delayedCall(n/1e3,xg),jy(mS.getElementById("chargedbolts"),n/1e3,"chargedbolts"),zy.drawMyMp(-oH),e(bL);for(var t=dS.ceil(Re()/65)+1,i=0;i<t;i++)e();a(0),Ep(),qb()}}function Gg(){""===mS.getElementById("frostnova").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("frostnova",!1),Ei("frostnova","-500% 0%"),zy.checkWizardSkills(),refreshfrostNova.kill())}function qg(){refreshfrostNova=cS.to("",.1,{repeat:-1,onRepeat:Gg})}function Pg(){if(!(!0===zH.d.frostnova||Yy.level<3||!0===Eb()||(oH=qH.cost.frostNova,Yy.mp<oH))){qi("frostnova",!0),Ei("frostnova","-500% -100%"),Ep(),iH="Frost Nova",tH="alteration";cS.delayedCall(12,qg),jy(mS.getElementById("frostnova"),12,"frostnova"),qb(),zy.drawMyMp(-oH);for(var a=0;a<=4;a++)if(""!==Wy[a].name){var n=a;!0===ac(n)?fa(Wy[n].name+" resisted Frost Nova.",1):(fa(Wy[n].name+" is immobilized by a wave of frost.",3),Cg(n),tp(n),Wy[n].rootStatus=4,e("#rootIcon"+n+",#rootBuffIcon"+n).remove(),kv(n,!0),Li("Root",n,"rootBuffIcon",0,-160))}fo("frostNova"),Qa("novaice"),0===zy.autoAttackStatus&&Si()}}function Qg(){""===mS.getElementById("magicmissiles").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("magicmissiles",!1),Ei("magicmissiles","-600% 0%"),zy.checkWizardSkills(),refreshmagicMissiles.kill())}function Rg(){refreshmagicMissiles=cS.to("",.1,{repeat:-1,onRepeat:Qg})}function Fg(){function e(a){var n=bL;if(!(a>=5||0===Vw||0===_w)&&Wy[n].name){a++,Qa("icebolt"+~~(3*dS.random()+1));var t=yc(1.1*Fe(),.77);"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX-100,n=Gw[e].offsetTop+Wy[e].cY-100,t=sy("magicMissile",5,490,618,300,300,!0);t.image.onload=function(){cS.to(t,.25,{startAt:{rotation:360*dS.random()},rotation:"+=540",ease:pS.lin}),cS.to(t,.25,{scaleX:.25,scaleY:.25,x:a-38+125,y:n-38+125,onComplete:function(){function e(t){var o=a+88+(300*dS.random()-150),r=n+88+(250*dS.random()-175),l=ry(i,5,o,r,1,1,!0);cS.to(l,1,{y:"+="+(30*dS.random()+10),scaleX:0,scaleY:0,onComplete:function(){oy(5,l)}}),++t<15&&e(t)}oy(5,t);var i=ly("purpleparticle50");e(0)}})}}(n),cS.delayedCall(.25,function(){zy.myMagicDamage("magic",t,n,ee(),"Arcane Missiles")}),Lp("magic",t,n),1===Vw&&1===_w&&cS.delayedCall(.5,function(){e(a)})}}!0===zH.d.magicmissiles||Yy.level<5||!0!==Eb()&&(1!==fk?(oH=qH.cost.magicMissiles,Yy.mp<oH||(qi("magicmissiles",!0),Ei("magicmissiles","-600% -100%"),cS.delayedCall(15,Rg),jy(mS.getElementById("magicmissiles"),15,"magicmissiles"),referenceDate2=new H,iH="Arcane Missiles",tH="conjuration",qb(),nH=2700,fa("You cast "+iH+".",3),Ep(),zy.drawMyMp(-oH),cS.delayedCall(.25,function(){e(0)}))):Ni())}function Ng(){!0===zH.d.viziersshielding||Yy.level<7||!0!==Eb()&&(oH=qH.cost.viziersShielding,Yy.mp<oH||(iH="Vizier's Shielding",nH=ke(4e3),tH="abjuration",!1!==Db()&&(Qy("teal"),os("viziersShielding"),Qa("spellCastAbjure",0,nH))))}function jg(){RB=!1,Zy-=NB,nk-=jB,ik-=zB,ok-=YB,rk-=KB,lk-=WB,sk-=OB,ny(),zy.drawMyHp()}function zg(){""===mS.getElementById("fireball").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("fireball",!1),Ei("fireball","-700% 0%"),zy.checkWizardSkills(),refreshfireball.kill())}function Yg(){refreshfireball=cS.to("",.1,{repeat:-1,onRepeat:zg})}function Kg(){!0===zH.d.fireball||Yy.level<9||!0!==Eb()&&(1!==fk?(oH=qH.cost.fireball,Yy.mp<oH||(iH="Fireball",tH="evocation",nH=ke(2e3),!1!==Db()&&(Py("orange"),os("fireball"),Qa("spellDoneFlames",0,nH)))):Ni())}function Wg(e){function a(e){var i=n+388+(700*dS.random()-350),l=t+388+(350*dS.random()-225),s=ry(r,5,i,l);cS.to(s,.75,{x:i+12+20*dS.random()-10,y:l+50,scaleX:0,scaleY:0,onComplete:function(){oy(5,s)}}),e<o&&a(++e)}if("High"===kw.videoSetting){var n=Gw[e].offsetLeft+Wy[e].cX-400,t=Gw[e].offsetTop+Wy[e].cY-400,i=sy("fireball",5,240,130,800,800,!0);i.image.onload=function(){cS.to(i,.25,{rotation:360,scaleX:.375,scaleY:.375,x:n+400,y:t+400,ease:pS.lin,onComplete:function(){oy(5,i)}})};var o=50,r=ly("orangeparticle50");cS.delayedCall(.25,function(){a(0)})}}function Og(){""===mS.getElementById("deepfreeze").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("deepfreeze",!1),Ei("deepfreeze","-800% 0%"),zy.checkWizardSkills(),refreshdeepFreeze.kill())}function Xg(){refreshdeepFreeze=cS.to("",.1,{repeat:-1,onRepeat:Og})}function Vg(){if(!(!0===zH.d.deepfreeze||Yy.level<11)&&!0!==Eb())if(1!==fk){if(oH=qH.cost.deepFreeze,!(Yy.mp<oH)){iH="Deep Freeze",tH="alteration",qi("deepfreeze",!0),Ei("deepfreeze","-800% -100%");var e=24e3;Yy.talent7>=20&&(e=12e3),cS.delayedCall(e/1e3,Xg),jy(mS.getElementById("deepfreeze"),e/1e3,"deepfreeze"),qb(),zy.drawMyMp(-oH),0===zy.autoAttackStatus&&Si();var a=bL,n=!1;Yy.talent6>=20&&(n=!0);var t=3e3+42*Qe();t*=eo();for(var i=0;i<=4;i++)if(Wy[i].name&&i>=a-1&&i<=a+1&&(i===a||!0===n)){var o=yc(1.9*Qe(),.88);zy.myMagicDamage("cold",o,i,ee(),"Deep Freeze"),_g(i,t,-256)}}}else Ni()}function _g(a,n,t){""!==Wy[a].name&&(n*=eo(),Cg(a),tp(a),Wy[a].shatterStatus=!0,Wy[a].frozenStatus=!0,Wy[a].spellActive.kill(),Wy[a].frozenTimer.kill(),e("#iceIcon"+a).remove(),Wy[a].frozenTimer=cS.delayedCall(n/1e3,function(){Wy[a].shatterStatus=!1,Wy[a].frozenStatus=!1,cS.to("#iceIcon"+a,.5,{opacity:0,onComplete:function(){e("#iceIcon"+a).remove()}})}),fa(Wy[a].name+" is encased in ice."),Ht(a),function(a,n){if("High"!==kw.videoSetting)return;if(Wy[a].hp<=0)return;if(1===Wy[a].attackStatus)return;var t=dS.ceil(720-Wy[a].imageHeight-Gw[a].offsetTop+35),i=Wy[a].imageWidth,o=dS.ceil(Gw[a].offsetLeft+Wy[a].cX-i/2),r=1.1*i,l=e("<img>",{id:"iceIcon"+a}).css({position:"absolute",height:r,width:i,bottom:t,left:o}).attr("src","/classic/images1/iceIcon.png");$NG.eWin.append(l),Qa("blue3")}(a),Li("Frozen",a,"freezeIcon",n,t),function(a,n){function t(a){cS.to(".freezeIcon"+n,.5,{opacity:0,onComplete:function(){e(this).remove()}}),a<8&&cS.delayedCall(.1,function(){t(++a)})}t(a)}(0,a),ln(a,"cold",n/1e3))}function $g(){""===mS.getElementById("chainlightning").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("chainlightning",!1),Ei("chainlightning","-900% 0%"),zy.checkWizardSkills(),refreshchainLightning.kill())}function Ug(){refreshchainLightning=cS.to("",.1,{repeat:-1,onRepeat:$g})}function Jg(){!0===zH.d.chainlightning||Yy.level<13||!0!==Eb()&&(1!==fk?(oH=qH.cost.chainLightning,Yy.mp<oH||(iH="Chain Lightning",tH="evocation",nH=ke(2e3),!1!==Db()&&(Py("yellow"),os("chainLightning"),Qa("spellCastEvoke2",0,nH)))):Ni())}function Zg(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[e].offsetTop+Wy[e].cY,t=sy("chainLightning",5,a+50*dS.random()-125,-100,200,720);t.image.onload=function(){function e(t){var i=a+(400*dS.random()-200),o=n+(450*dS.random()-375),r=sy("whiteparticle50",5,i,o,25,25);cS.to(r,1,{top:o+40*dS.random()-20,left:i+4+40*dS.random()-20,scaleX:0,scaleY:0,onComplete:function(){oy(5,r)},ease:pS.cinout}),++t<8&&e(t)}xr(t),cS.to(t,.15,{alpha:1,onComplete:function(){cS.to(t,.15,{alpha:0,ease:pS.Qin,onComplete:function(){oy(5,t)}})}}),e(0)}}function ep(){""===mS.getElementById("glacialspike").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("glacialspike",!1),Ei("glacialspike","-1000% 0%"),zy.checkWizardSkills(),refreshglacialSpike.kill())}function ap(){refreshglacialSpike=cS.to("",.1,{repeat:-1,onRepeat:ep})}function np(){!0===zH.d.glacialspike||Yy.level<15||!0!==Eb()&&(1!==fk?(oH=qH.cost.glacialSpike,Yy.mp<oH||(iH="Glacial Spike",tH="evocation",nH=ke(2e3),!1!==Db()&&(os("glacialSpike"),Qa("spellDoneFlames",0,nH),Py("teal")))):Ni())}function tp(e){Wy[e].name&&(!0===Wy[e].stasisFieldStatus?(Gw[e].style.opacity=1,Fw[e].style.opacity=.2):!0===Wy[e].phased?(Gw[e].style.opacity=1,Fw[e].style.opacity=.5):(Gw[e].style.opacity=1,Fw[e].style.opacity=1))}function ip(a,n,t){""!==Wy[a].name&&(n*=eo(),Cg(a),tp(a),Wy[a].frozenStatus=!0,Wy[a].chillStatus=!0,Wy[a].spellActive.kill(),Wy[a].frozenTimer.kill(),e("#iceIcon"+a+",#freezeIcon"+a).remove(),Wy[a].frozenTimer=cS.delayedCall(n/1e3,function(){Wy[a].frozenStatus=!1,Wy[a].chillStatus=!1,cS.to(".freezeIcon"+a,.5,{opacity:0,onComplete:function(){e(this).remove()}})}),fa(Wy[a].name+" is frozen."),Ht(a),function(a,n){function t(e){var a=100*dS.random()-50,n=d+a,r=i.cloneNode();r.style.cssText="position:absolute; opacity:1; width:"+o+"px; bottom:"+s+"px; left: "+n+"px;",s+=l/15,NG.eWin.appendChild(r),cS.set(r,{rotationY:180*~~(2*dS.random())}),e<=3&&cS.delayedCall(.1,function(){t(++e)})}if(""===Wy[a].name||1===fk)return;if("High"!==kw.videoSetting)return;var i=mS.createElement("img");i.src="/classic/images1/freezeRoot.png",i.className="freezeIcon"+a;var o=.6*Wy[a].imageWidth;o<200?o=200:o>400&&(o=400);var r=Wy[a].imageWidth/2,l=Wy[a].imageHeight,s=720-(l+Gw[a].offsetTop),d=Gw[a].offsetLeft+r-o/2;e(".freezeIcon"+a).remove(),t(0)}(a),Li("Frozen",a,"freezeIcon",n,t),ln(a,"cold",n/1e3))}function op(){""===mS.getElementById("iceblock").textContent&&0!=sH&&0!=lH&&(qi("iceblock",!1),Ei("iceblock","-1100% 0%"),zy.checkWizardSkills(),refreshiceBlock.kill())}function rp(){refreshiceBlock=cS.to("",.1,{repeat:-1,onRepeat:op})}function lp(){function e(){!1!==DC&&(zy.popupHeal(dS.ceil(Qe()/5)),zy.popupMana(dS.ceil(Qe()/5)),cS.delayedCall(1,e))}if(!(Yy.hp<=0||!0===US||!0===zH.d.iceblock||Yy.level<17||(iH="Ice Block",!1===Db()||!0===DC))){Ep(),referenceDate2=new H,nH=1e4,sH=0,tH="alteration",qb(),zy.drawMyMp(-oH),cS.delayedCall(10,function(){cS.to(mS.getElementById("iceBlock"),.5,{opacity:0,onComplete:function(){Ki(this)}})}),NG.spellbardiv.style.display="block",fa("You surround yourself in a protective barrier of ice.",3),cS.to(Dw,10,{startAt:{scaleX:1},scaleX:0,ease:pS.lin,onComplete:function(){cI.kill(),NG.spellbardiv.style.display="none",sH=1,qi("iceblock",!0),Ei("iceblock","-1100% -100%"),cS.delayedCall(90,rp),jy(mS.getElementById("iceblock"),90,"iceblock")}}),dp(1e4),e(),function(){var e=mS.createElement("img");e.style.cssText="position:absolute; height: 797px; width: 1880px; bottom: -50px; left: -225px; opacity:0;",e.src="/classic/images1/iceIcon.png",e.id="iceBlock",NG.eWin2.appendChild(e),cS.to(e,1,{opacity:.9})}();cS.delayedCall(10,function(){wi("iceBlockIcon")}),Bi("Ice Block","iceBlockIcon",1e4,-352),Qa("shivers")}}function sp(){DC=!1}function dp(e){DC=!0,Gk.kill(),sS.Warlord>=6&&(e*=2),Gk=cS.delayedCall(e/1e3,sp)}function cp(){""===mS.getElementById("icecomet").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("icecomet",!1),Ei("icecomet","-1200% 0%"),zy.checkWizardSkills(),refreshiceComet.kill())}function mp(){refreshiceComet=cS.to("",.1,{repeat:-1,onRepeat:cp})}function up(){!0===zH.d.icecomet||Yy.level<20||!0!==Eb()&&(1!==fk?(iH="Ice Comet",tH="evocation",nH=ke(3e3),!1!==Db()&&(Py("teal"),os("iceComet"),Qa("spellCastEvoke1",0,nH))):Ni())}function fp(e,a,n,t){function i(a){var o=sy(t,7,e,eI-20,0,0);o.image.onload=function(){cS.to(o,.3,{scaleX:s,scaleY:d,x:r,y:l,alpha:0,onComplete:function(){oy(7,o)}})},++a<n&&cS.delayedCall(.033,function(){i(a)})}e=e||640,a=a||500,n=n||1,t=t||"tremor";var o=a/6.25,r=e-a/2,l=eI-o/2.9-20,s=a/400,d=o/100;i(0)}function hp(){""===mS.getElementById("counterspell").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("counterspell",!1),Ei("counterspell","-1300% 0%"),zy.checkWizardSkills(),refreshcounterspell.kill())}function gp(){refreshcounterspell=cS.to("",.1,{repeat:-1,onRepeat:hp})}function pp(){if(!(!0===zH.d.counterspell||Yy.level<24)&&!0!==Eb())if(1!==fk){if(oH=qH.cost.counterspell,!(Yy.mp<oH)){qi("counterspell",!0),Ei("counterspell","-1300% -100%"),Ep(),tH="alteration";var e=24e3;Yy.talent10>=20&&(e=12e3),cS.delayedCall(e/1e3,gp),jy(mS.getElementById("counterspell"),e/1e3,"counterspell"),qb(),zy.drawMyMp(-oH);var a=bL,n=6e3;Wy[a].dauntless&&(n*=Zi()),bp(a,n,-416),"High"===kw.videoSetting&&vp(a),Qa("handofgod")}}else Ni()}function bp(e,a,n){Wy[e].name&&(Ht(e),fa(Wy[e].name+"'s spell has been silenced."),Wy[e].silenced=!0,Wy[e].silenceTimer.kill(),Wy[e].silenceTimer=cS.delayedCall(a/1e3,function(){Wy[e].silenced=!1}),Li("Silence",e,"silenceIcon",a,-416))}function vp(e){function a(e){var o=sy("chainFG",5,n-i,t-150,2*i,100);o.image.onload=function(){cS.to(o,(800+100*e)/1e3,{y:600-40*e,ease:pS.qout,onComplete:function(){cS.to(o,.5,{alpha:0,ease:pS.lin,onComplete:function(){oy(5,o)}})}})};var r=sy("chainBG",7,n-i,t-150,2*i,100);r.image.onload=function(){cS.to(r,(800+100*e)/1e3,{y:600-40*e,ease:pS.qout,onComplete:function(){cS.to(r,.5,{alpha:0,ease:pS.lin,onComplete:function(){oy(7,r)}})}})},++e<5&&cS.delayedCall(.1,function(){a(e)})}var n=Gw[e].offsetLeft+Wy[e].cX,t=(Wy[e].imageHeight,Gw[e].offsetTop),i=Wy[e].imageWidth/2+40;a(0)}function yp(){""===mS.getElementById("harnessEther").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("harnessEther",!1),Ei("harnessEther","-1400% 0%"),zy.checkWizardSkills(),refreshharnessEther.kill())}function kp(){refreshharnessEther=cS.to("",.1,{repeat:-1,onRepeat:yp})}function Sp(){!0===zH.d.harnessEther||Yy.level<28||!0!==Eb()&&(oH=qH.cost.harnessEther,Yy.mp<oH||(zy.drawMyMp(-oH),iH="Harness Ether",nH=ke(12e3),tH="conjuration",qb(),Qa("teleport"),cS.delayedCall(45,kp),qi("harnessEther",!0),Ei("harnessEther","-1400% -100%"),jy(mS.getElementById("harnessEther"),45,"harnessEther"),fa("Strands of ether coalesce in your hands.",3),_B=!0,Bi("Harness Ether","harnessEtherIcon",0,-448),Au("blue","easeInOutQuad",25,5,100,2)))}function Ip(){""===mS.getElementById("meteor").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("meteor",!1),Ei("meteor","-1500% 0%"),zy.checkWizardSkills(),refreshmeteor.kill())}function wp(){refreshmeteor=cS.to("",.1,{repeat:-1,onRepeat:Ip})}function Cp(){!0===zH.d.meteor||Yy.level<32||!0!==Eb()&&(1!==fk?(iH="Meteor",tH="conjuration",nH=ke(3e3),!1!==Db()&&(Py("red"),os("meteor"),Qa("spellCastEvoke1",0,nH))):Ni())}function Mp(e){function a(e){var t=sy("orangeLight3",5,n-1780,-1497,1844,2560);t.image.onload=function(){cS.to(t,2.5,{startAt:{alpha:0},alpha:.4,ease:pS.Qin,onComplete:function(){oy(5,t)}})},e<3&&a(++e)}if("High"===kw.videoSetting){var n=640;a(0);var t=sy("meteor",5,n-2e3,-1560,600,600);t.image.onload=function(){cS.to(t,2,{startAt:{alpha:0},alpha:1,onComplete:function(){cS.to(t,.5,{x:n-350,y:315,ease:pS.Qin,onComplete:function(){function a(e){var n=sy("fissure",6,640,1068,1280,0,!0);n.image.onload=function(){cS.to(n,.25,{alpha:.5,scaleX:1.38,scaleY:1.38,y:620,x:800*dS.random()-400+640,onComplete:function(){cS.to(n,1,{y:720,scaleX:1,scaleY:.5,alpha:0,onComplete:function(){oy(6,n)}})}})},e<=70&&cS.delayedCall(.1,function(){a(++e)})}oy(5,t),e||(du(1,20,0,25),a(0))}})}})}}}function Tp(){""===mS.getElementById("mirrorimages").textContent&&0!=sH&&0!=lH&&0!==_w&&0!==Vw&&(qi("mirrorimages",!1),Ei("mirrorimages","-1600% 0%"),zy.checkWizardSkills(),refreshmirrorImages.kill(),Qa("summon"))}function Bp(){refreshmirrorImages=cS.to("",.1,{repeat:-1,onRepeat:Tp})}function Dp(){if(!(!0===zH.d.mirrorimages||Yy.level<38)&&!0!==Eb()){qi("mirrorimages",!0),Ei("mirrorimages","-1600% -100%"),tH="alteration";var a=3e4;Yy.talent3>=20&&(a=15e3),cS.delayedCall(a/1e3,Bp),jy(mS.getElementById("mirrorimages"),a/1e3,"mirrorimages"),qb(),zy.drawMyMp(-oH),VB=5;var n="mirrorImagesIcon";fD.kill(),fD=cS.delayedCall(30,function(){wi(n)}),Bi("Mirror Images",n,3e4,-512),Qa("summon");e("<div>").css({width:32,height:32,color:"#0f0",position:"absolute",fontSize:14,top:22,left:2,padding:0,background:"transparent",zIndex:76}).attr("id","mirrorImagesCount").addClass("blackOutline3").appendTo("#mirrorImagesIcon").html(VB)}}function Lp(e,a,n){function t(){o>=VB||(i[o]=.05*a+.8*Ze()/100*a,zy.myMagicDamage(e,yc(i[o],.8),n,ee(),"Mirror Images"),o++,cS.delayedCall(.1,t))}var i=[],o=0;VB>0&&t()}function Hp(){if(Yy.exp>=va()&&Yy.level<99){beforeSpacerLength=e(".spacers").length,Yy.level++,Qa("levelup2"),xy("You have leveled up! You are now level "+Yy.level+"!","#ffff00"),mv("#daa520",.3,2);var a,n=Yy.level;"Warrior"===Yy.job&&(6===n&&Yy.dodge<1&&(Yy.dodge=1,a="how to dodge."),13===n&&Yy.dualWield<1&&(Yy.dualWield=1,a="how to dual wield."),10===n&&Yy.parry<1&&(Yy.parry=1,a="how to parry."),15===n&&Yy.doubleAttack<1&&(Yy.doubleAttack=1,a="how to double attack."),25===n&&Yy.riposte<1&&(Yy.riposte=1,a="how to riposte."),2===n&&(a="Slam."),3===n&&(a="Kick."),5===n&&(a="Enrage."),7===n&&(a="Pummel."),9===n&&(a="Subjugate."),11===n&&(a="Furious Scorn."),13===n&&(a="Triage."),15===n&&(a="Decisive Blow."),17===n&&(a="Hemorrhage."),20===n&&(a="Absorb Spell."),24===n&&(a="Intrepid Might."),28===n&&(a="Bulwark."),32===n&&(a="Frenzied Rampage."),38===n&&(a="Shockwave.")),"Monk"===Yy.job&&(6===n&&Yy.dodge<1&&(Yy.dodge=1,a="how to block."),12===n&&Yy.parry<1&&(Yy.parry=1,a="how to parry."),15===n&&Yy.doubleAttack<1&&(Yy.doubleAttack=1,a="how to double attack."),1===n&&(a="Tiger Strike."),2===n&&(a="Crane Kick."),3===n&&(a="Eagle Strike."),5===n&&(a="Feign Death."),7===n&&(a="Windmill Kick."),9===n&&(a="Stone Fist Reversal."),11===n&&(a="Mend."),13===n&&(a="Intimidation."),15===n&&(a="Inner Peace."),17===n&&(a="Cheetah Strike."),20===n&&(a="Cobra Strike."),24===n&&(a="Chakra Blast."),28===n&&(a="Flying Kick."),32===n&&(a="Ancestral Flurry."),38===n&&(a="Dragon Strike."),35===n&&Yy.riposte<1&&(Yy.riposte=1,a="how to riposte.")),"Rogue"===Yy.job&&(2===n&&(a="Lacerate."),3===n&&(a="Evade."),4===n&&Yy.dodge<1&&(Yy.dodge=1,a="how to dodge."),5===n&&(a="Sonic Strike."),7===n&&(a="Backstab."),9===n&&(a="Cold Blood."),12===n&&Yy.parry<1&&(Yy.parry=1,a="how to parry."),13===n&&Yy.dualWield<1&&(Yy.dualWield=1,a="how to dual wield."),11===n&&(a="Flash Powder."),16===n&&Yy.doubleAttack<1&&(Yy.doubleAttack=1,a="how to double attack."),13===n&&(a="Hyper Strike."),15===n&&(a="Illusive Mist."),17===n&&(a="Stagger Shot."),20===n&&(a="Widow Strike."),24===n&&(a="Lobotomize."),28===n&&(a="Ancient Will."),30===n&&Yy.riposte<1&&(Yy.riposte=1,a="how to riposte."),32===n&&(a="Mirage Strike."),38===n&&(a="Prowling Gash.")),"Ranger"===Yy.job&&(8===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),17===n&&Yy.dualWield<1&&(a="how to dual wield.",Yy.dualWield=1),20===n&&Yy.doubleAttack<1&&(a="how to double attack.",Yy.doubleAttack=1),18===n&&Yy.parry<1&&(a="how to parry.",Yy.parry=1),35===n&&Yy.riposte<1&&(a="how to riposte.",Yy.riposte=1),2===n&&(a="Kick"),3===n&&(a="Counter Shot."),6===n&&(a="Trueshot Arrow."),9===n&&(a="Light Healing."),11===n&&(a="Faerie Flame."),13===n&&(a="Ignite."),15===n&&(a="Thistlecoat."),17===n&&(a="Snare."),19===n&&(a="Feet Like Cat."),21===n&&(a="Shield of Brambles."),24===n&&(a="Warder's Rift."),28===n&&(a="Spirit of the Wolf."),32===n&&(a="Volley Shot."),38===n&&(a="Weapon Shield.")),"Paladin"===Yy.job&&(10===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),20===n&&Yy.doubleAttack<1&&(a="how to double attack.",Yy.doubleAttack=1),17===n&&Yy.parry<1&&(a="how to parry.",Yy.parry=1),30===n&&Yy.riposte<1&&(a="how to riposte.",Yy.riposte=1),2===n&&(a="Slam."),3===n&&(a="Rebuke."),6===n&&(a="Vengeance."),9===n&&(a="Greater Healing."),11===n&&(a="Holy Might."),13===n&&(a="Valor."),15===n&&(a="Ardent Judgment."),17===n&&(a="Spirit Armor."),19===n&&(a="Root."),21===n&&(a="Yaulp."),24===n&&(a="Fervent Prayer."),28===n&&(a="Divine Providence."),32===n&&(a="Flash of Light."),38===n&&(a="Symbol of Marshan.")),"Shadow Knight"===Yy.job&&(10===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),20===n&&Yy.doubleAttack<1&&(a="how to double attack.",Yy.doubleAttack=1),17===n&&Yy.parry<1&&(a="how to parry.",Yy.parry=1),30===n&&Yy.riposte<1&&(a="how to riposte.",Yy.riposte=1),2===n&&(a="Slam."),3===n&&(a="Death Strike."),6===n&&(a="Gasping Frenzy."),9===n&&(a="Summon Dead."),11===n&&(a="Life Tap."),13===n&&(a="Dooming Darkness."),15===n&&(a="Fear."),17===n&&(a="Siphon Strength."),19===n&&(a="Heat Blood."),21===n&&(a="Vampiric Embrace."),24===n&&(a="Strengthen Dead."),28===n&&(a="Resist Cold."),32===n&&(a="Feign Death."),38===n&&(a="Shadow Vortex.")),"Bard"===Yy.job&&(10===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),17===n&&Ae()<1&&(a="how to dual wield.",Yy.dualWield=1),2===n&&(a="Chant of Battle."),3===n&&(a="Accelerando."),5===n&&(a="Hymn of Restoration."),7===n&&(a="Solon's Song of the Sirens."),9===n&&(a="Brusco's Boastful Bellow."),11===n&&(a="Elemental Rhythms."),13===n&&(a="Lucid Lullaby."),15===n&&(a="Consonant Chain."),17===n&&(a="Dissension."),20===n&&(a="Cassandra's Chorus of Clarity."),24===n&&(a="Anthem De Arms."),28===n&&(a="Euphonic Hymn."),32===n&&(a="Shield of Songs."),38===n&&(a="Denon's Desperate Dirge.")),"Cleric"===Yy.job&&(15===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),2===n&&(a="Sound of Force."),3===n&&(a="Superior Healing."),5===n&&(a="Resolution."),7===n&&(a="Binding Earth."),9===n&&(a="Expel Corruption."),11===n&&(a="Searing Revelation."),13===n&&(a="Martyr's Blessing."),15===n&&(a="Armor of Faith."),17===n&&(a="Guardian Angel."),20===n&&(a="Divine Sanctuary."),24===n&&(a="Holy Wrath."),28===n&&(a="Mark of Judgement."),32===n&&(a="Symbol of Yentus."),38===n&&(a="Benediction.")),"Druid"===Yy.job&&(15===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),2===n&&(a="Drones of Doom."),3===n&&(a="Greater Healing."),5===n&&(a="Skin Like Nature."),7===n&&(a="Tornado."),9===n&&(a="Engulfing Roots."),11===n&&(a="Shield of Spikes."),13===n&&(a="Drifting Death."),15===n&&(a="Spirit of the Wolf."),17===n&&(a="Lightning Blast."),20===n&&(a="Earthquake."),24===n&&(a="Chloroplast."),28===n&&(a="Hurricane."),32===n&&(a="Sylvan Creep."),38===n&&(a="Volcano.")),"Shaman"===Yy.job&&(15===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),2===n&&(a="Scourge."),3===n&&(a="Greater Healing."),5===n&&(a="Call of the Ancients."),7===n&&(a="Guardian Spirit."),9===n&&(a="Togor's Insects."),11===n&&(a="Cannibalize."),13===n&&(a="Poison Nova."),15===n&&(a="Spirit of the Wolf."),17===n&&(a="Enstill."),20===n&&(a="Affliction."),24===n&&(a="Reclaim Blood."),28===n&&(a="Glacial Impact."),32===n&&(a="Talisman of Trogmaar."),38===n&&(a="Devouring Plague.")),"Necromancer"===Yy.job&&(22===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),2===n&&(a="Invoke Death."),3===n&&(a="Cascading Darkness."),5===n&&(a="Invoke Fear."),7===n&&(a="Drain Soul."),9===n&&(a="Arch Shielding."),11===n&&(a="Feign Death."),13===n&&(a="Augment Death."),15===n&&(a="Ignite Blood."),17===n&&(a="Corpse Explosion."),20===n&&(a="Bond of Death."),24===n&&(a="Diamond Skin."),28===n&&(a="Asystole."),32===n&&(a="Detonate Soul."),38===n&&(a="Howling Terror.")),"Enchanter"===Yy.job&&(22===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),2===n&&(a="Gasping Embrace."),3===n&&(a="Cajoling Whispers."),5===n&&(a="Color Shift."),7===n&&(a="Mesmerize."),9===n&&(a="Discordant Barrier."),11===n&&(a="Shiftless Deeds."),13===n&&(a="Enchant Weapon."),15===n&&(a="Adorning Grace."),17===n&&(a="Alacrity."),20===n&&(a="Gravity Flux."),24===n&&(a="Mystic Rune."),28===n&&(a="Tashania."),32===n&&(a="Clarity."),38===n&&(a="Enthrall.")),"Magician"===Yy.job&&(22===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),2===n&&(Nn("You have learned Earth Elemental."),Nn("You have learned Air Elemental."),Nn("You have learned Fire Elemental."),Nn("You have learned Frost Elemental.")),3===n&&(a="Shield of Lava."),5===n&&(a="Firestorm."),7===n&&(a="Phantom Plate."),9===n&&(a="Frozen Orb."),11===n&&(a="Burnout."),13===n&&(a="Mana Shield."),15===n&&(a="Elemental Armor."),17===n&&(a="Psionic Storm."),20===n&&(a="Reclaim Elements."),24===n&&(a="Elemental Fury."),28===n&&(a="Armageddon."),32===n&&(a="Stasis Field."),38===n&&(a="Altered State.")),"Wizard"===Yy.job&&(22===n&&Yy.dodge<1&&(a="how to dodge.",Yy.dodge=1),2===n&&(a="Charged Bolts."),3===n&&(a="Frost Nova."),5===n&&(a="Arcane Missiles."),7===n&&(a="Vizier's Shielding."),9===n&&(a="Fireball."),11===n&&(a="Deep Freeze."),13===n&&(a="Chain Lightning."),15===n&&(a="Glacial Spike."),17===n&&(a="Ice Block."),20===n&&(a="Ice Comet."),24===n&&(a="Counterspell."),28===n&&(a="Harness Ether."),32===n&&(a="Meteor."),38===n&&(a="Mirror Images.")),a&&Nn("You have learned "+a),20===Yy.level&&Nn("You may now assume a surname by clicking your name by your health bar."),wa(),Hp(),Da(),ua(),ND=FD,_v(),NG.myexpbarId.style.width="0px",Fn(),e.ajax({url:"/classic/php/game1.php",data:{run:"updateExpGold",lastName:Yy.lastName,title:Yy.title,level:Yy.level,job:Yy.job,race:Yy.race,exp:0,mobExp:0,Slot:0,gold:0,name:Yy.name}}).fail(function(e){Tv()})}else Fn(),ny(),Aa(),Ha(),hy(),zy.drawMyHp(),zy.drawMyMp()}function Ap(){dH.kill(),cH.kill(),mH.kill(),uH.kill(),!0===TM&&Fi();for(var e in zH.cd)!0===zH.cd[e]&&(zH.cd[e]=!1,zH.d[e]=!1)}function xp(e){lH=0,sH=1,zy[wH.Cooldowns](),"Warrior"===Yy.job?Vo():"Rogue"===Yy.job?(!1===zH.d.ancientwillId&&Qi("ancientwillId",!1,!1),0!==_w&&0!==Vw&&0!==Xw||!0!==qC||!1!==zH.d.ancientwillId||(GC.kill(),Ei("ancientwillId","-1700% 0"))):"Paladin"===Yy.job?""===mS.getElementById("layhandsId").textContent&&(Qi("layhandsId",!1,!1),Ei("layhandsId","-700% 0%")):"Cleric"===Yy.job?!0===ET&&(Qi("guardianangel",!1,!1),Ei("guardianangel","-1000% 0%")):"Wizard"===Yy.job&&""===mS.getElementById("iceblock").textContent&&(Qi("iceblock",!1,!1),Ei("iceblock","-1100% 0%")),dH.kill(),mH.kill(),dH=cS.delayedCall(e/1e3,function(){mH.kill(),mH=cS.to("",.1,{repeat:-1,onRepeat:Gp})})}function Ep(e){lH=0,zy[wH.Cooldowns](),cH.kill(),uH.kill(),cH=cS.delayedCall(ye()/1e3,function(){uH.kill(),uH=cS.to("",.1,{repeat:-1,onRepeat:Gp})})}function Gp(){0!==_w&&0!==Vw&&(dH.kill(),mH.kill(),cH.kill(),uH.kill(),lH=1,zy[wH.DoneCD](),zy.drawMyMp())}function qp(){var e=Ce();return"crushed"===bS.eq[12].type&&(e=Te()),"punched"===bS.eq[12].type&&(e=Le()),"pierced"===bS.eq[12].type&&(e=De()),"cleaved"===bS.eq[12].type&&(e=Me()),"smashed"===bS.eq[12].type&&(e=Be()),"staff"===bS.eq[12].type&&(e=Be()),e}function Pp(){return"alteration"===tH?Qe():"abjuration"===tH?Ne():"evocation"===tH?Re():"conjuration"===tH?Fe():"channeling"===tH?je():void 0}function Qp(){lC=!1}function Rp(){""===mS.getElementById("secondwindId").textContent&&(qi("secondwindId",!1),Ei("secondwindId","0% 0%"),refreshsecondWind.kill())}function Fp(){refreshsecondWind=cS.to("",.1,{repeat:-1,onRepeat:Rp})}function Np(){!0!==Eb()&&!0!==zH.d.secondwindId&&(lC=!0,ny(),qi("secondwindId",!0),Ei("secondwindId","0% -100%"),cS.delayedCall(120,Fp),jy(mS.getElementById("secondwindId"),120,"secondwindId"),$w.kill(),$w=cS.delayedCall(12,Qp),fa("Your tenacity unveils renewed vigor in your veins.",3),cS.delayedCall(12,function(){wi("secondWindIcon")}),Lu("yellow",!1,45),Dt(.02*Yy.maxHp,"Second Wind",12,0,1,!1,!0),Dt(.02*Yy.maxMp,"Second Wind",12,0,1,!1,"bypass",!0))}function jp(){iC=!1,U(),ny()}function zp(){""===mS.getElementById("divineaegisId").textContent&&(qi("divineaegisId",!1),Ei("divineaegisId","0% 0%"),refreshdivineAegis.kill())}function Yp(){refreshdivineAegis=cS.to("",.1,{repeat:-1,onRepeat:zp})}function Kp(){if(!0!==Eb()&&!0!==zH.d.divineaegisId){iC=!0,U(),ny(),qi("divineaegisId",!0),Ei("divineaegisId","0% -100%"),cS.delayedCall(120,Yp),jy(mS.getElementById("divineaegisId"),120,"divineaegisId"),Uw.kill(),Uw=cS.delayedCall(20,jp),fa("You are enveloped by a chromatic aegis.",3);Ti("Divine Aegis","divineAegisIcon",2e4,0),Lu("purple",!1,45)}}function Wp(){oC=!1}function Op(){""===mS.getElementById("ancestralrampageId").textContent&&(qi("ancestralrampageId",!1),Ei("ancestralrampageId","0% 0%"),refreshancestralRampage.kill())}function Xp(){refreshancestralRampage=cS.to("",.1,{repeat:-1,onRepeat:Op})}function Vp(){!0!==Eb()&&!0!==zH.d.ancestralrampageId&&(oC=!0,qi("ancestralrampageId",!0),Ei("ancestralrampageId","0% -100%"),cS.delayedCall(120,Xp),jy(mS.getElementById("ancestralrampageId"),120,"ancestralrampageId"),Jw.kill(),Jw=cS.delayedCall(12,Wp),fa("A thousand ancestral roars bears down on your foe.",3),Ti("Ancestral Rampage","ancestralRampageIcon",12e3,0),Lu("red",!1,45))}function _p(){""===mS.getElementById("tunaresglowId").textContent&&(qi("tunaresglowId",!1),Ei("tunaresglowId","0% 0%"),refreshtunaresGlow.kill())}function $p(){refreshtunaresGlow=cS.to("",.1,{repeat:-1,onRepeat:_p})}function Up(){!0!==Eb()&&!0!==zH.d.tunaresglowId&&(qi("tunaresglowId",!0),Ei("tunaresglowId","0% -100%"),cS.delayedCall(120,$p),jy(mS.getElementById("tunaresglowId"),120,"tunaresglowId"),fa("You blend into your environment.",3),Ti("Camouflage","evadeIcon",6e3,0),Qa("fade"),PC=!0,cS.delayedCall(5,function(){PC=!1}),0===zy.autoAttackStatus&&Si(),or("green"))}function Jp(){""===mS.getElementById("karanasinfusionId").textContent&&(qi("karanasinfusionId",!1),Ei("karanasinfusionId","0% 0%"),refreshkaranasInfusion.kill())}function Zp(){refreshkaranasInfusion=cS.to("",.1,{repeat:-1,onRepeat:Jp})}function eb(){if(!0!==zH.d.karanasinfusionId){qi("karanasinfusionId",!0),Ei("karanasinfusionId","0% -100%"),cS.delayedCall(120,Zp),jy(mS.getElementById("karanasinfusionId"),120,"karanasinfusionId"),fa("Your body snaps to life with natural vigor.",3);Lu("teal",!1,60),Dt(.04*Yy.maxHp,"Hybrid Vigor",7,0,1,!1,!0),Vw=1,KL.kill(),YL.kill(),_w=1,e("#mobBashIcon,#mobFearIcon").remove(),dH.kill(),Ap(),zy[wH.CheckSkills]()}}function ab(){rC=!1}function nb(){""===mS.getElementById("sanguinetormentId").textContent&&(qi("sanguinetormentId",!1),Ei("sanguinetormentId","0% 0%"),refreshsanguineTorment.kill())}function tb(){refreshsanguineTorment=cS.to("",.1,{repeat:-1,onRepeat:nb})}function ib(){if(!0!==Eb()&&!0!==zH.d.sanguinetormentId){rC=!0,qi("sanguinetormentId",!0),Ei("sanguinetormentId","0% -100%"),cS.delayedCall(120,tb),jy(mS.getElementById("sanguinetormentId"),120,"sanguinetormentId"),eC=cS.delayedCall(12,ab),fa("You emanate with vampiric power.",3);var e="sanguineTormentIcon";cS.delayedCall(12,function(){wi(e)}),Ti("Sanguine Torment",e,12e3,0),Lu("purple",!1,45)}}function ob(){cC=!1,ny()}function rb(){""===mS.getElementById("granitevisageId").textContent&&(qi("granitevisageId",!1),Ei("granitevisageId","0% 0%"),refreshgraniteVisage.kill())}function lb(){refreshgraniteVisage=cS.to("",.1,{repeat:-1,onRepeat:rb})}function sb(){if(!0!==Eb()&&!0!==zH.d.granitevisageId){cC=!0,qi("granitevisageId",!0),Ei("granitevisageId","0% -100%"),cS.delayedCall(120,lb),jy(mS.getElementById("granitevisageId"),120,"granitevisageId"),aC=cS.delayedCall(12,ob),fa("Your countenance is hardened by a granite shell.",3);var e="graniteVisageIcon";cS.delayedCall(12,function(){wi(e)}),Ti("Granite Visage",e,12e3,0),Lu("white",!1,45),ny()}}function db(){!0!==Eb()&&!0!==ya()&&(1===tC?(e("#halflinghideId").css({backgroundPosition:"0 -100%"}),fa("You disappear into the shadows.",3),cv("#001"),cS.to(spellCurtain,1,{alpha:.5,ease:pS.Qin}),tC=0):(e("#halflinghideId").css({backgroundPosition:"0 0"}),fa("You emerge from the shadows.",3),cS.to(spellCurtain,.5,{alpha:0,ease:pS.Qin}),tC=1))}function cb(){""===mS.getElementById("shortcircuitId").textContent&&(qi("shortcircuitId",!1),Ei("shortcircuitId","0% 0%"),refreshshortCircuit.kill())}function mb(){refreshshortCircuit=cS.to("",.1,{repeat:-1,onRepeat:cb})}function ub(){!0!==Eb()&&!0!==zH.d.shortcircuitId&&(1!==fk?(1===Wy[bL].attackStatus&&hi(!0),dC=!0,qi("shortcircuitId",!0),Ei("shortcircuitId","0% -100%"),cS.delayedCall(120,mb),jy(mS.getElementById("shortcircuitId"),120,"shortcircuitId"),Tg(bL,5e3*dS.random()+25e3,9999,"Warp Field")):Ni())}function fb(e){var a=!1;return"a dhampyre"!==Wy[e].image&&"a vampire female"!==Wy[e].image&&"a skeleton"!==Wy[e].image&&"a dark skeleton"!==Wy[e].image&&"a male zombie"!==Wy[e].image&&"a female zombie"!==Wy[e].image&&"a ghoul"!==Wy[e].image&&"garanel rucksif"!==Wy[e].image&&"a mummy"!==Wy[e].image||(a=!0),a}function hb(){if(1!==fk)for(;;)if(++CI>1&&(CI=-1),bL+CI>=0&&""!==Wy[bL+CI].name)return bL+CI}function gb(){if(1!==fk)for(;;){var e=~~(5*dS.random());if(""!==Wy[e].name&&!1===Wy[e].charmStatus)return e}}function pb(){ND=0,zy.petAlive=!1;for(var a=0;a<=4;a++)!0===Wy[a].petDot&&(Wy[a].petDot=!1,Wy[a].dotActive.kill());cS.to(mob5,1,{opacity:0,ease:pS.lin,onComplete:function(){cS.set(mob5,{bottom:0,display:"none"})}}),fT.kill(),Wy[hT].charmStatus=!1,"Bard"===Yy.job||"Enchanter"===Yy.job?zy.checkForDeadMonsters():fa(qD+" has been slain!"),qD="","Shadow Knight"===Yy.job?Ei("summondeadId","-1600% 0"):"Shaman"===Yy.job?Ei("guardianspirit","-1500% 0"):"Necromancer"===Yy.job?Ei("invokedeath","-1600% 0"):"Magician"===Yy.job&&("an earth elemental pet"===PD?Ei("earthelemental","-1700% 0"):"an air elemental pet"===PD?Ei("airelemental","-1700% -100%"):"a fire elemental pet"===PD?Ei("fireelemental","-1700% -200%"):"a frost elemental pet"===PD&&Ei("frostelemental","-1700% -300%"),PD=""),e("#pethpbardiv").css("display","none"),"Magician"===Yy.job?Qa("elem_die3"):"Necromancer"===Yy.job||"Shadow Knight"===Yy.job?Qa("skeleton_die"):"Shaman"===Yy.job&&Qa("wolf_die2")}function bb(){var a=1+~~(26*dS.random()),n=1+~~(16*dS.random()),t=1+~~(5*dS.random()),i="Jo",o="bek",r="er";if(1===a&&(i="Ga"),2===a&&(i="Ge"),3===a&&(i="Go"),4===a&&(i="Gi"),5===a&&(i="Ja"),6===a&&(i="Jo"),7===a&&(i="Je"),8===a&&(i="Ji"),9===a&&(i="Ka"),10===a&&(i="Ke"),11===a&&(i="Ko"),12===a&&(i="Ki"),13===a&&(i="La"),14===a&&(i="Le"),15===a&&(i="Lo"),16===a&&(i="Li"),17===a&&(i="Va"),18===a&&(i="Ve"),19===a&&(i="Vo"),20===a&&(i="Xa"),21===a&&(i="Xe"),22===a&&(i="Xo"),23===a&&(i="Za"),24===a&&(i="Ze"),25===a&&(i="Zo"),26===a&&(i="Bo"),1===n&&(o="b"),2===n&&(o="ban"),3===n&&(o="bar"),4===n&&(o="bek"),5===n&&(o="bob"),6===n&&(o="rek"),7===n&&(o="rar"),8===n&&(o="nar"),9===n&&(o="ran"),10===n&&(o="sar"),11===n&&(o="sek"),12===n&&(o="sob"),13===n&&(o="n"),14===n&&(o="s"),15===n&&(o="k"),16===n&&(o="n"),1===t&&(r="tik"),2===t&&(r="n"),3===t&&(r="er"),4===t&&(r="ab"),5===t&&(r=""),qD=i+o+r,0===e("#petBarName").length){var l=e('<div id="petBarName">').html(RD+" - "+qD);e("#pethpbardiv").append(l)}else e("#petBarName").html(RD+" - "+qD);zy.drawMyHp(),mS.getElementById("petName").innerHTML=qD}function vb(){function e(){if(!0!==nL&&!0!==tL&&!0!==rL&&!(Wy[BS].hp<=0||Yy.hp<=0||0!==fk||!1===zy.petAlive||ND<=0||0!==fk)){var e=kb()/2,a=dS.ceil(e+dS.random()*e);if("Shaman"===Yy.job){if(Yy.talent10>=20&&dS.random()>.93){n=BS;Qa("gnollsat");for(t=0;t<=4;t++)if(Wy[t].name&&t>=n-1&&t<=n+1){i=dS.ceil(e+dS.random()*e);zy.petPhysical(i,t),ao(t,2500,-480,0,"Maul"),Qm(t,9,1e3)}return}}else if("Necromancer"===Yy.job){if(Yy.talent6>=20){for(var n=BS,t=0;t<=4;t++)if(Wy[t].name&&t>=n-1&&t<=n+1){i=dS.ceil(e+dS.random()*e);Yy.talent5>=20&&dS.random()>.95&&ao(t,1800,-512,0,"Bash"),zy.petPhysical(i,t)}return}}else if("Magician"===Yy.job&&Yy.talent6>=20){for(var n=BS,t=0;t<=4;t++)if(Wy[t].name&&t>=n-1&&t<=n+1){var i=dS.ceil(e+dS.random()*e);zy.petPhysical(i,t)}return}zy.petPhysical(a,BS)}}if(!(!1===zy.petAlive||ND<=0)&&(zy.checkForDeadMonsters(),!(Yy.hp<=0)&&Wy[bL].name))if(!0!==nL&&!0!==tL&&!0!==rL){if(BS&&Wy[BS].name||(BS=bL),!0===iL){if(dS.ceil(5*dS.random())>3)return fa(qD+" is blinded by darkness."),void(eL=cS.delayedCall(VD*fL/1e3,vb))}if(dS.ceil(dS.random()*ZD)!==ZD){var a=Gw[BS].offsetLeft+Wy[BS].cX,n=dS.round(Gw[5].offsetLeft+lL/2);a<n?cS.set(NG.petImage,{rotationY:180}):cS.set(NG.petImage,{rotationY:0}),!0===Sb(a,n)&&(cS.delayedCall(.5,e),"Shaman"===Yy.job&&Yy.talent11>=20&&cS.delayedCall(.3,e)),yb()}else!function(e){var a=dS.ceil(4*dS.random());if(1===a){if("kick"===_D)return void Ib(e);if("bash"===_D)return void wb(e);if("snare"===_D)return void Cb(e);if("burstofflame"===_D)return void Mb(e);if("freeze"===_D)return void Bb(e)}if(2===a){if("kick"===$D)return void Ib(e);if("bash"===$D)return void wb(e);if("snare"===$D)return void Cb(e);if("burstofflame"===$D)return void Mb(e);if("freeze"===$D)return void Bb(e)}if(3===a){if("kick"===UD)return void Ib(e);if("bash"===UD)return void wb(e);if("snare"===UD)return void Cb(e);if("burstofflame"===UD)return void Mb(e);if("freeze"===UD)return void Bb(e)}if(4===a){if("kick"===JD)return void Ib(e);if("bash"===JD)return void wb(e);if("snare"===JD)return void Cb(e);if("burstofflame"===JD)return void Mb(e);if("freeze"===JD)Bb(e)}}(BS)}else eL=cS.delayedCall(VD*fL/1e3,vb)}function yb(){var e=100*dS.random();if(!1===aL&&RD>15&&RD>e)return aL=!0,void(eL=cS.delayedCall(.1,vb));aL=!1,0===fk&&(eL=cS.delayedCall(VD*fL/1e3,vb))}function kb(){return jD}function Sb(e,a){var n=!0,t=a-e,i=e-lL+20,o=i+30,r=e,l=r-30;t>250&&!0===oL&&(n=!1);var s=G();if(cS.killTweensOf(NG.mob5),a>=e&&!0===n){if(t<60&&t>-45)return s.to(NG.mob5,.2,{left:"-=25",bottom:"+=10",force3D:"auto"}).to(NG.mob5,.1,{bottom:"+=10",left:"-=45",force3D:"auto"}).to(NG.mob5,.2,{bottom:60,force3D:"auto"}),n;s.to(NG.mob5,.2,{left:r,bottom:"+=5",force3D:"auto"}).to(NG.mob5,.1,{bottom:"+=10",left:l,force3D:"auto"}).to(NG.mob5,.2,{left:"+=70",bottom:60,force3D:"auto"})}if(a<e&&!0===n){if(t<60&&t>-45)return s.to(NG.mob5,.2,{left:"+=25",bottom:"+=10",force3D:"auto"}).to(NG.mob5,.1,{bottom:"+=10",left:"+=45",force3D:"auto"}).to(NG.mob5,.2,{bottom:60,force3D:"auto"}),n;s.to(NG.mob5,.2,{left:i,bottom:"+=5",force3D:"auto"}).to(NG.mob5,.1,{bottom:"+=10",left:o,force3D:"auto"}).to(NG.mob5,.2,{left:"-=70",bottom:60,force3D:"auto"})}return n}function Ib(e){if(!(Yy.hp<=0||!1===ya())){if(!0===Wy[e].stasisFieldStatus){return bi(0,e),void yb()}var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[5].offsetLeft+lL/2;a<n?cS.set(NG.petImage,{rotationY:180}):cS.set(NG.petImage,{rotationY:0}),!0===Sb(a,n)&&cS.delayedCall(.3,function(){dS.ceil(RD/4);var a=dS.ceil(dS.random()*jD);a<=0&&(a=1),a<.3*RD&&(a=dS.ceil(.3*RD)),zy.petPhysical(a,e)}),0===fk&&yb()}}function wb(e){if(!0===Wy[e].stasisFieldStatus){return bi(0,e),void yb()}var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[5].offsetLeft+lL/2;a<n?cS.set(NG.petImage,{rotationY:180}):cS.set(NG.petImage,{rotationY:0}),!0===Sb(a,n)&&cS.delayedCall(.3,function(){if(!(Yy.hp<=0||!1===ya())){var a=dS.ceil(RD/3),n=dS.ceil(dS.random()*jD+a);n<=0&&(n=1),n<.3*RD&&(n=dS.ceil(.3*RD)),ao(e,2500,-544,-32,"Bash"),zy.petPhysical(n,e)}}),0===fk&&yb()}function Cb(e){if(!(Yy.hp<=0||!1===ya())){if(!0===Wy[e].stasisFieldStatus){return bi(0,e),void yb()}var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[5].offsetLeft+lL/2;a<n?cS.set(NG.petImage,{rotationY:180}):cS.set(NG.petImage,{rotationY:0}),!0===Sb(a,n)&&cS.delayedCall(.3,function(){Wy[e].name&&(ud(e),Li("Snare",e,"snareIcon",0,-544))}),0===fk&&yb()}}function Mb(e){if(!(Yy.hp<=0||!1===ya())){if(!0===Wy[e].stasisFieldStatus){return bi(0,e),void yb()}var a=Gw[e].offsetLeft+Wy[e].cX,n=Gw[5].offsetLeft+lL/2;a<n?cS.set(NG.petImage,{rotationY:0}):cS.set(NG.petImage,{rotationY:180}),!0===Sb(a,n)&&cS.delayedCall(.3,function(){var a=dS.ceil(1.2*RD),n=dS.ceil((dS.random()*jD+a)*(Wy[e].fire/100));if(Wy[e].runeHp>0){var t=!1,i="Burst of Flame";zy.myMagicDamage("fire",n,e,t,i)}if(Wy[e].runeHp<=0){var t=!1,i="Burst of Flame";zy.myMagicDamage("fire",n,e,t,i)}}),0===fk&&yb()}}function Tb(e){var a=dS.ceil(1.5*RD*(Wy[e].fire/100));Wy[e].hp-=a,bi(a,e),zy.checkForDeadMonsters()}function Bb(a){if(!0===Wy[a].stasisFieldStatus){return bi(0,a),void yb()}var n=Gw[a].offsetLeft+Wy[a].cX,t=Gw[5].offsetLeft+lL/2;n<t?cS.set(NG.petImage,{rotationY:180}):cS.set(NG.petImage,{rotationY:0}),!0===Sb(n,t)&&cS.delayedCall(.3,function(){if(!(Yy.hp<=0||!1===ya())){var n=dS.ceil(RD/4),t=dS.ceil((dS.random()*jD+n)*(Wy[a].cold/100));Wy[a].runeHp>0&&(Wy[a].runeHp-=t,Wy[a].runeHp<=0&&e("#MruneIcon"+a).remove(),Qa("blockBlunt")),Wy[a].runeHp<=0&&fa(qD+" freezes "+Wy[a].name+" for "+t+" damage."),zy.petPhysical(t,a,"cold");var i=3500;i*=eo(),_g(a,i,-256)}}),0===fk&&yb()}function Db(){if(!(Yy.hp<=0||!0===US))return spellCanceled=!1,0===sH?(fa("You are already casting a spell."),!1):!0===XI?(fa("You cannot channel spells while silenced!"),!1):(referenceDate2=new H,sH=0,Dw.scaleX=0,NG.spellbardiv.style.display="block",!0)}function Lb(){var e=!0;return!0===spellCanceled&&(e=!1),spellCanceled=!1,sH=1,!0===e&&(qb(),"Enchanter"===Yy.job&&Yy.talent11>=20&&0===Wy[bL].attackStatus&&function(e,a){function n(o){if(!0!==Wy[e].sleepStatus&&!0!==Wy[e].charmStatus&&""!==Wy[e].name){var r=sy("windmillKick",7,t,i,300,0);r.image.onload=function(){cS.to(r,.2,{scaleY:6.5,ease:pS.Qin}),cS.to(r,.2,{scaleY:0,alpha:0,y:560,delay:.2,onComplete:function(){oy(7,r)}})};var l=sy("windmillKick",7,t-600,i,1500,0);l.image.onload=function(){cS.to(l,.2,{scaleY:6.5,ease:pS.Qin}),cS.to(l,.75,{alpha:0,scaleX:10.5,x:t-900,delay:.2,onComplete:function(){oy(7,l)}})},fp();var s=dS.ceil(Re()/8);zy.myMagicDamage("magic",yc(s,.2),e,!1,"Psychic Beam"),o<a&&cS.delayedCall(.1,function(){n(++o)})}}var t=Gw[e].offsetLeft+Wy[e].cX-150,i=-620;n(0)}(bL,9)),e}function Hb(e){Wy[e].snareStatus=!1}function Ab(){var e=0;return""!==Wy[0].name&&e++,""!==Wy[1].name&&e++,""!==Wy[2].name&&e++,""!==Wy[3].name&&e++,""!==Wy[4].name&&e++,e}function xb(e,a){if(""!==Wy[a].name){Wy[a].runeHp>0&&(fa(Wy[a].name+"'s skin absorbs the blow.",3),Qa("blockBlunt")),Wy[a].runeHp<=0&&Qa("fall_hit");zy.myMagicDamage("physical",e,a,!1,"falling")}}function Eb(){return Yy.hp<=0||!0===US||(0===Vw?(fa("You are feared!"),!0):0===_w?(fa("You are stunned!"),!0):0===sH?(fa("You are already casting!"),!0):void 0)}function Gb(e){var a=!1;return"a bat"!==Wy[e].image&&""!==Wy[e].image&&"a faerie"!==Wy[e].image&&"a fire elemental"!==Wy[e].image&&"a gargoyle"!==Wy[e].image&&"a wisp"!==Wy[e].image&&"an earth elemental"!==Wy[e].image&&"an evil eye round"!==Wy[e].image&&"an imp"!==Wy[e].image&&"garanel rucksif"!==Wy[e].image&&""!==Wy[e].image&&3!==Wy[e].rare||(a=!0),"Druid"===Yy.job&&Yy.talent3>=20&&(a=!1),a}function qb(){"evocation"===tH?Pb()>Yy.evocation&&It():"alteration"===tH?Pb()>Yy.alteration&&yt():"abjuration"===tH?Pb()>Yy.abjuration&&kt():"conjuration"===tH?Pb()>Yy.conjuration&&St():"channeling"===tH&&"Bard"===Yy.job&&Pb()>Yy.channeling&&wt()}function Pb(){var e=(se()-80)/12;e<0&&(e=0);return 210*dS.random()+210*dS.random()+e}function Qb(){"Human"===Yy.race&&Np(),"Erudite"===Yy.race&&Kp(),"Barbarian"===Yy.race&&Vp(),"Wood Elf"===Yy.race&&Up(),"Half Elf"===Yy.race&&eb(),"Dark Elf"===Yy.race&&ib(),"Dwarf"===Yy.race&&sb(),"Gnome"===Yy.race&&ub(),"Halfling"===Yy.race&&db()}function Rb(e){!0===zy.petAlive&&ND<=0&&pb(),Yy.hp<=0&&(fa("You have been slain by "+Wy[e].name+"!",1),ot())}function Fb(e){fi(e,0,100)}function Nb(e){return damRed=0,damRed+=(zy.conjurationEquip+zy.allSkillsEquip)/3.5,damRed>50&&(damRed=50),e*=1-damRed/100,dS.ceil(e)}function jb(){Yy.hp<=0||(_w=1,"Warrior"===Yy.job&&Vo(),"Rogue"===Yy.job&&(qC=!1,zy.checkRogueSkills()))}function zb(){nL=!1}function Yb(e){3!==Wy[e].rare?Qa(Wy[e].audio5):(Qa(Wy[e].audio5),du(6,20,10,33))}function Kb(e){var a=Wy[e].castSpeed,n=1;return Wy[e].snareStatus&&(n+=1),a*=n}function Wb(e){if("Bard"!==Yy.job&&"Enchanter"!==Yy.job||""!==qD&&Wy[hT].hp<=0&&pb(),ND<=0&&!0===zy.petAlive&&pb(),Yy.hp<=0){a=1;if(""===Wy[e].name)var a=0;1===a&&fa("You have been slain by "+Wy[e].name+"!",1),0===a&&fa("You have been slain!",1),ot()}}function Ob(a,n,t,i){if(Yy.hp<=0)Wy[a].envenomTicks=0;else if(!0===n&&ND<=0)Wy[a].envenomTicks=0;else if(!0===t&&Wy[hT].hp<=0)Wy[hT].envenomTicks=0;else if(!1===t&&Wy[i].hp<=0)Wy[i].envenomTicks=0;else{if(!0===n){o=dS.ceil(Wy[a].dotDamage*(1-YD/4/100));if(0===Wy[a].envenomTicks)return Wy[a].envenomTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].envenomTicks-=1,ND<=0)return;return ND-=o,""!==qD&&fa("Envenom poisons "+qD+" for "+o+" damage.",3),zy.drawMyHp(),void Wb()}if(!0===t){o=dS.ceil(Wy[a].dotDamage*(1-Wy[hT].poison/4/100));if(0===Wy[a].envenomTicks)return Wy[a].envenomTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].envenomTicks-=1,Wy[hT].hp<=0)return;return Wy[hT].hp-=o,!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove()),""!==qD&&fa("Envenom poisons "+Wy[hT].name+" for "+o+" damage.",3),zy.drawMyHp(),void Wb()}if(!1===t){o=dS.ceil(Wy[a].dotDamage*(1-Wy[i].poison/4/100));if(0===Wy[a].envenomTicks)return Wy[a].envenomTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].envenomTicks-=1,Wy[i].hp<=0||0!==fk)return;return Wy[i].hp-=o,!0===Wy[i].sleepStatus&&(Wy[i].sleepStatus=!1,e("#sleepIcon"+a).remove()),fa("Envenom poisons "+Wy[i].name+" for "+o+" damage.",3),zy.drawMyHp(),void zy.checkForDeadMonsters()}var o=dS.ceil(Wy[a].dotDamage*(1-ce()/4/100));if(0!==Wy[a].envenomTicks){oi(o,a,0,1,"Poison"),Wy[a].envenomTicks-=1}else Wy[a].dotActive.kill()}}function Xb(a,n,t,i){if(Yy.hp<=0)Wy[a].engulfingDarknessTicks=0;else if(!0===n&&ND<=0)Wy[a].engulfingDarknessTicks=0;else if(!0===t&&Wy[hT].hp<=0)Wy[hT].engulfingDarknessTicks=0;else if(!1===t&&Wy[i].hp<=0)Wy[i].engulfingDarknessTicks=0;else{if(!0===n){o=dS.ceil(Wy[a].dotDamage*(1-KD/4/100));if(0===Wy[a].engulfingDarknessTicks)return Wy[a].engulfingDarknessTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].engulfingDarknessTicks-=1,ND<=0)return;return ND-=o,""!==qD&&fa("Engulfing Darkness strangles "+qD+" for "+o+" damage.",3),zy.drawMyHp(),void Wb()}if(!0===t){o=dS.ceil(Wy[a].dotDamage*(1-Wy[hT].magic/4/100));if(0===Wy[a].engulfingDarknessTicks)return Wy[a].engulfingDarknessTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].engulfingDarknessTicks-=1,Wy[hT].hp<=0)return;return Wy[hT].hp-=o,!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove()),""!==qD&&fa("Engulfing Darkness strangles "+Wy[hT].name+" for "+o+" damage.",3),zy.drawMyHp(),void Wb()}if(!1===t){o=dS.ceil(Wy[a].dotDamage*(1-Wy[i].magic/4/100));if(0===Wy[a].engulfingDarknessTicks)return Wy[a].engulfingDarknessTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].engulfingDarknessTicks-=1,Wy[i].hp<=0)return;return Wy[i].hp-=o,!0===Wy[i].sleepStatus&&(Wy[i].sleepStatus=!1,e("#sleepIcon"+a).remove()),fa("Engulfing Darkness strangles "+Wy[i].name+" for "+o+" damage.",3),zy.drawMyHp(),void zy.checkForDeadMonsters()}var o=dS.ceil(Wy[a].dotDamage*(1-me()/4/100));0!==Wy[a].engulfingDarknessTicks?(oi(o,a,0,2,"Magic"),Wy[a].engulfingDarknessTicks-=1):Wy[a].dotActive.kill()}}function Vb(a,n,t,i){if(Yy.hp<=0)Wy[a].staticFieldTicks=0;else if(!0===n&&ND<=0)Wy[a].staticFieldTicks=0;else if(!0===t&&Wy[hT].hp<=0)Wy[hT].staticFieldTicks=0;else if(!1===t&&Wy[i].hp<=0)Wy[i].staticFieldTicks=0;else{if(!0===n){if(0===Wy[a].staticFieldTicks)return Wy[a].staticFieldTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);var o=dS.ceil(.03*ND),r=dS.ceil(o*(1-WD/4/100));if(Wy[a].staticFieldTicks-=1,ND<=0)return;return ND-=r,""!==qD&&fa("Static Field electrocutes "+qD+" for "+r+" damage.",3),zy.drawMyHp(),void Wb()}if(!0===t){if(0===Wy[a].staticFieldTicks)return Wy[a].staticFieldTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);o=dS.ceil(.03*Wy[hT].hp);r=dS.ceil(o*(1-Wy[hT].lightning/4/100));if(!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove()),Wy[a].staticFieldTicks-=1,Wy[hT].hp<=0)return;if(Wy[hT].hp-=r,""!==qD&&fa("Static Field electrocutes "+Wy[hT].name+" for "+r+" damage.",3),dS.random()>.85){l=5e3;Wy[hT].dauntless&&(l*=Zi()),bp(hT,l)}return zy.drawMyHp(),void zy.checkForDeadMonsters()}if(!1===t){o=dS.ceil(.03*Wy[hT].hp);r=dS.ceil(o*(1-Wy[hT].lightning/4/100));if(0===Wy[a].staticFieldTicks)return Wy[a].staticFieldTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].staticFieldTicks-=1,Wy[i].hp<=0)return;if(Wy[i].hp-=r,!0===Wy[i].sleepStatus&&(Wy[i].sleepStatus=!1,e("#sleepIcon"+i).remove()),fa("Static Field electrocutes "+Wy[i].name+" for "+r+" damage.",3),dS.random()>.85){var l=5e3;Wy[i].dauntless&&(l*=Zi()),bp(i,l)}return zy.drawMyHp(),void zy.checkForDeadMonsters()}r=dS.ceil(Wy[a].dotDamage*(1-ue()/4/100));if(0!==Wy[a].staticFieldTicks){r<=0&&(r=1);oi(r,a,0,3,"Lightning"),Wy[a].staticFieldTicks-=1}else Wy[a].dotActive.kill()}}function _b(a,n,t,i){if(Yy.hp<=0)Wy[a].blizzardTicks=0;else if(!0===n&&ND<=0)Wy[a].blizzardTicks=0;else if(!0===t&&Wy[hT].hp<=0)Wy[hT].blizzardTicks=0;else if(!1===t&&Wy[i].hp<=0)Wy[i].blizzardTicks=0;else{if(!0===n){o=dS.ceil(Wy[a].dotDamage*(1-XD/4/100));if(0===Wy[a].blizzardTicks)return Wy[a].blizzardTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].blizzardTicks-=1,ND<=0)return;return ND-=o,""!==qD&&fa("Blizzard storms down on "+qD+" for "+o+" damage.",3),zy.drawMyHp(),void Wb()}if(!0===t){o=dS.ceil(Wy[a].dotDamage*(1-Wy[hT].cold/4/100));if(0===Wy[a].blizzardTicks)return Wy[a].blizzardTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].blizzardTicks-=1,Wy[hT].hp<=0)return;return Wy[hT].hp-=o,!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove()),""!==qD&&fa("Blizzard storms down on "+Wy[hT].name+" for "+o+" damage.",3),zy.drawMyHp(),void Wb()}if(!1===t){o=dS.ceil(Wy[a].dotDamage*(1-Wy[i].cold/4/100));if(0===Wy[a].blizzardTicks)return Wy[a].blizzardTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].blizzardTicks-=1,Wy[i].hp<=0)return;return Wy[i].hp-=o,!0===Wy[i].sleepStatus&&(Wy[i].sleepStatus=!1,e("#sleepIcon"+a).remove()),fa("Blizzard storms down on "+Wy[i].name+" for "+o+" damage.",3),zy.drawMyHp(),void zy.checkForDeadMonsters()}var o=dS.ceil(Wy[a].dotDamage*(1-fe()/4/100));if(0!==Wy[a].blizzardTicks){oi(o,a,0,4,"Cold"),Wy[a].blizzardTicks-=1}else Wy[a].dotActive.kill()}}function $b(a,n,t,i){if(Yy.hp<=0)return Wy[a].conflagrationTicks=0,void ny();if(!0===n&&ND<=0)Wy[a].conflagrationTicks=0;else if(!0===t&&Wy[hT].hp<=0)Wy[hT].conflagrationTicks=0;else if(!1===t&&Wy[i].hp<=0)Wy[i].conflagrationTicks=0;else{if(!0===n){o=dS.ceil(Wy[a].dotDamage*(1-OD/4/100));if(0===Wy[a].conflagrationTicks)return Wy[a].conflagrationTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].conflagrationTicks-=1,ND<=0)return;return ND-=o,""!==qD&&fa("Conflagration scorches "+qD+" for "+o+" damage.",3),zy.drawMyHp(),void Wb()}if(!0===t){o=dS.ceil(Wy[a].dotDamage*(1-Wy[hT].fire/4/100));if(0===Wy[a].conflagrationTicks)return Wy[a].conflagrationTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].conflagrationTicks-=1,Wy[hT].hp<=0)return;return Wy[hT].hp-=o,!0===Wy[hT].sleepStatus&&(Wy[hT].sleepStatus=!1,e("#sleepIcon"+hT).remove()),""!==qD&&fa("Conflagration scorches "+Wy[hT].name+" for "+o+" damage.",3),zy.drawMyHp(),void Wb()}if(!1===t){o=dS.ceil(Wy[a].dotDamage*(1-Wy[i].fire/4/100));if(0===Wy[a].conflagrationTicks)return Wy[a].conflagrationTicks=0,Wy[a].dotActive.kill(),void(Wy[a].petDot=!1);if(Wy[a].conflagrationTicks-=1,Wy[i].hp<=0)return;return Wy[i].hp-=o,!0===Wy[i].sleepStatus&&(Wy[i].sleepStatus=!1,e("#sleepIcon"+a).remove()),fa("Conflagration scorches "+Wy[i].name+" for "+o+" damage.",3),zy.drawMyHp(),void zy.checkForDeadMonsters()}var o=dS.ceil(Wy[a].dotDamage*(1-he()/4/100));if(0!==Wy[a].conflagrationTicks){oi(o,a,0,5,"Fire"),Wy[a].conflagrationTicks-=1}else Wy[a].dotActive.kill()}}function Ub(){cS.set(NG.spellblind,{opacity:1,background:"transparent"}),zy.blindStatus=1,iL=!1}function Jb(){iL=!1}function Zb(e,a){a?Wy[hT].dazeStatus=!1:Wy[e].dazeStatus=!1}function ev(){Xw=1,"Warrior"===Yy.job&&(Vo(),zy.checkWarriorSkills()),"Rogue"===Yy.job&&(qC=!1,zy.checkRogueSkills())}function av(){oL=!1}function nv(){aH=!1,VL.kill()}function tv(){0!==sH&&(dS.random()>.5?by():vy())}function iv(){tk-=400,Ow=1,ny()}function ov(e,a){return e<Wy[a].speed&&(e=Wy[a].speed),e}function rv(){qi("addmonsterId",!1),Ei("addmonsterId","0 -200%")}function lv(e){Yy.hp<=0||0!==fk||(Qa("spellDoneSlam",0,0,.5),fa("A wolf is summoned into battle.",3),hv("green",25,20,e),Wy[e].castingStatus=!0,Wy[e].spellActive=cS.delayedCall(1,function(){!function(e,a){Ab()>4||!Wy[e].name||(qi("addmonsterId",!0),Ei("addmonsterId","0 -300%"),$S.kill(),$S=cS.delayedCall(.5,rv),jy(mS.getElementById("addmonsterId"),.5,"addmonsterId"),Mimg="a wolf",gL=dS.ceil(.5*Wy[e].level),MmaxHp=dS.ceil(100*gL),Mhp=MmaxHp,Mxp=4*gL,hL=5+2*gL,IL=100,LL=gL,DL=0,HL=5+2*gL,wL=100,CL=100,ML=100,TL=100,BL=100,monsterSpeed=3e3,McastSpeed=2e3*zy.speed,Mskill=[],Mskill[1]="kick",Mskill[2]="kick",Mskill[3]="kick",Mskill[4]="kick",AL=10,xL=1,zL=1,jL=1,RL=1,FL=1,GL=1,qL=1,PL=1,NL=1,Menrage=!1,MironMaiden=!1,Mflurry=!1,Mamp=!1,Msanctuary=!1,Mbarrier=!1,Mdrain=!1,Iv(),!0===Wy[e].summoner?Wy[e].summoner=!1:Wy[e].wolf=1,Mflee=0,EL=250+dS.ceil(Wy[e].level/4),mobImgX=538,mobImgY=400,cX=385,cY=286,pL=Wy[e].name+"'s pet",Maud1="wolf_att2",Maud2="wolf_hit2",Maud3="wolf_die2",Mv(e,a),Qa("spellCastAbjure",0,0,.5))}(e,1)}),fi(e,0,1250))}function sv(e){Yy.hp<=0||0!==fk||(Qa("spellDoneSlam",0,0,.5),fa("A skeleton is summoned into battle.",3),hv("black",25,20,e),Wy[e].castingStatus=!0,Wy[e].spellActive=cS.delayedCall(1,function(){!function(e,a){Ab()>4||!Wy[e].name||(qi("addmonsterId",!0),Ei("addmonsterId","0 -300%"),$S.kill(),$S=cS.delayedCall(.5,rv),jy(mS.getElementById("addmonsterId"),.5,"addmonsterId"),Mimg="a skeleton",gL=dS.ceil(.65*Wy[e].level),MmaxHp=dS.ceil(100*gL),Mhp=MmaxHp,Mxp=4*gL,hL=5+2*gL,IL=100,LL=gL,DL=0,HL=5+2*gL,wL=100,CL=100,ML=100,TL=125,BL=100,monsterSpeed=3e3,Mskill[1]="kick",Mskill[2]="kick",Mskill[3]="kick",Mskill[4]="kick",McastSpeed=500,AL=10,xL=1,zL=1,jL=1,RL=1,FL=1,GL=1,qL=1,PL=1,NL=1,Menrage=!1,MironMaiden=!1,Mflurry=!1,Mamp=!1,Msanctuary=!1,Mbarrier=!1,Mdrain=!1,Iv(),!0===Wy[e].summoner?Wy[e].summoner=!1:Wy[e].skeleton=1,Mflee=0,EL=150+dS.ceil(Wy[e].level/4),mobImgX=240,mobImgY=503,cX=123,cY=114,pL=Wy[e].name+"'s pet",Maud1="skeleton_att",Maud2="skeleton_hit",Maud3="skeleton_die",Mv(e,a),Qa("spellCastAbjure",0,0,.5))}(e,1)}),fi(e,0,1250))}function dv(e){Yy.hp<=0||0!==fk||(Qa("spellDoneSlam",0,0,.5),fa(Wy[e].name+" begins summoning an elemental.",3),hv("blue",25,20,e),Wy[e].castingStatus=!0,Wy[e].spellActive=cS.delayedCall(1,function(){!function(e,a){if(!(Ab()>4)&&Wy[e].name){qi("addmonsterId",!0),Ei("addmonsterId","0 -300%"),$S.kill(),$S=cS.delayedCall(.5,rv),jy(mS.getElementById("addmonsterId"),.5,"addmonsterId"),MmaxHp=dS.ceil(100*gL),Mhp=MmaxHp,Mxp=4*gL,hL=5+2*gL,IL=100,LL=gL,DL=0,HL=5+2*gL,wL=100,CL=100,ML=100,TL=100,BL=100,monsterSpeed=3e3,McastSpeed=500*zy.speed,Mskill[1]="kick",Mskill[2]="kick",AL=10,xL=1,zL=1,jL=1,RL=1,FL=1,GL=1,qL=1,PL=1,NL=1,Menrage=!1,MironMaiden=!1,Mflurry=!1,Mamp=!1,Msanctuary=!1,Mbarrier=!1,Mdrain=!1,Iv(),!0===Wy[e].summoner?Wy[e].summoner=!1:Wy[e].elemental=1,Mflee=0;var n=dS.ceil(4*dS.random());1===n?(Mimg="an earth elemental",Mskill[3]="root",Mskill[4]="root",gL=dS.ceil(.65*Wy[e].level),ML=67,wL=125,EL=300,mobImgX=346,mobImgY=400,cX=171,cY=98):2===n?(Mimg="an air elemental",Mskill[3]="energy bolt",Mskill[4]="energy bolt",gL=dS.ceil(.65*Wy[e].level),CL=67,ML=125,EL=300,mobImgX=354,mobImgY=400,cX=183,cY=116):3===n?(Mimg="a fire elemental",Mskill[3]="fireball",Mskill[4]="fireball",gL=dS.ceil(.65*Wy[e].level),TL=67,BL=125,EL=300,mobImgX=358,mobImgY=400,cX=176,cY=140):(Mimg="a frost elemental",Mskill[3]="ice shard",Mskill[4]="ice shard",gL=dS.ceil(.65*Wy[e].level),BL=67,TL=125,EL=300,mobImgX=397,mobImgY=500,cX=196,cY=147),pL=Wy[e].name+"'s pet",Maud1="elem_att3",Maud2="elem_hit3",Maud3="elem_die3",Mv(e,a),Qa("spellCastAbjure",0,0,.5)}}(e,1)}),fi(e,0,1250))}function cv(e){spellCurtain.graphics.clear().beginFill(e).drawRect(0,0,1280,720).endFill()}function mv(e,a,n,t){t?(cv(e),cS.to(spellCurtain,n,{startAt:{alpha:0},alpha:a,ease:pS.Qin,onComplete:function(){Yy.hp>0&&(spellCurtain.alpha=0)}})):(cv(e),cS.to(spellCurtain,n,{startAt:{alpha:a},alpha:0,ease:pS.Qin}))}function uv(e,a,n){function t(){if(!1!==Wy[n].castingStatus){var e=360*dS.random(),a=xt(r,40,e),i=Et(l,40,e),o=ry(c,5,a,i);cS.to(o,.5,{x:r,y:l,scaleX:.2,scaleY:.2,ease:pS.Qinout,onComplete:function(){oy(5,o)}});var e=360*dS.random(),m=xt(s,40,e),u=Et(d,40,e),f=ry(c,5,m,u);cS.to(f,.5,{x:s-2,y:d-2,scaleX:.2,scaleY:.2,ease:pS.Qinout,onComplete:function(){oy(5,f)}}),cS.delayedCall(.1,t)}}Cg(n);var i=Bv(n),o=Dv(n);dS.random()>.5?cS.set(Fw[n],{rotationY:0}):(cS.set(Fw[n],{rotationY:180}),i[0]=Wy[n].imageWidth-i[0],o[0]=Wy[n].imageWidth-o[0]);var r=Gw[n].offsetLeft+i[0],l=Gw[n].offsetTop+Wy[n].imageHeight-i[1],s=Gw[n].offsetLeft+o[0],d=Gw[n].offsetTop+Wy[n].imageHeight-o[1],c=ly(e+"particle50");"High"===kw.videoSetting&&t()}function fv(e,a,n,t){function i(){if(!1!==Wy[n].castingStatus&&!(t<=0)){var e=ry(o,5,s,d);cS.to(e,1,{x:s+30*dS.random()-15,y:d+30*dS.random()+r[1],ease:pS.Qin,onComplete:function(){oy(5,e)}});var a=ry(o,5,c,m);cS.to(a,1,{x:c+30*dS.random()-15,y:m+30*dS.random()+l[1],ease:pS.Qin,onComplete:function(){oy(5,a)}}),t-=u,cS.delayedCall(u,function(){i()})}}Cg(n);var o=ly(e+"particle50"),r=Bv(n),l=Dv(n);dS.random()>.5?cS.set(Fw[n],{rotationY:0}):(cS.set(Fw[n],{rotationY:180}),r[0]=Wy[n].imageWidth-r[0],l[0]=Wy[n].imageWidth-l[0]);var s=Gw[n].offsetLeft+r[0]-12,d=Gw[n].offsetTop+Wy[n].imageHeight-r[1]-12,c=Gw[n].offsetLeft+l[0]-12,m=Gw[n].offsetTop+Wy[n].imageHeight-l[1]-12,u=.15;"High"===kw.videoSetting&&i()}function hv(e,a,n,t){function i(e){if(0!==e){var a=360*dS.random(),n=xt(r,150,a),t=Et(l,150,a),s=ry(o,5,n,t);cS.to(s,.75,{x:r,y:l,scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(5,s)}});var a=360*dS.random(),d=xt(r,150,a),c=Et(l,150,a),m=ry(o,5,d,c);cS.to(m,.75,{x:r,y:l,scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(5,m)}}),cS.delayedCall(.03,function(){i(--e)})}}Cg(t);var o=ly(e+"particle50"),r=Gw[t].offsetLeft+Wy[t].cX,l=Gw[t].offsetTop+Wy[t].cY;"Low"!==kw.videoSetting&&(n*=2,"High"===kw.videoSetting&&(n*=2),i(n))}function gv(e,a,n,t,i,o,r){var l=e+"particle200",s=200;"red"===e?(l="fireball",s=800):"blue"===e&&(l="glacialSpike",s=800);var d=Gw[n].offsetLeft+Wy[n].cX,c=Gw[n].offsetTop+Wy[n].cY,m=sy(l,5,d-s/2,c-s/2,a,a,!0,!0);m.image.onload=function(){if(t!==E||o!==E)if(!0!==o){if(t&&i===E){var e=Gw[hT].offsetLeft+Wy[hT].imageWidth/2,n=Gw[hT].offsetTop+Wy[hT].imageHeight/2;cS.to(m,.4,{y:n,x:e,scaleX:a/s*1.5,scaleY:a/s*1.5,ease:pS.sin,onComplete:function(){oy(5,m)}})}else if(t&&i!==E){var e=Gw[bL].offsetLeft+Wy[bL].imageWidth/2,n=Gw[bL].offsetTop+Wy[bL].imageHeight/2;cS.to(m,.4,{y:n,x:e,scaleX:a/s*1.5,scaleY:a/s*1.5,ease:pS.sin,onComplete:function(){oy(5,m)}})}}else{var e=Gw[5].offsetLeft+lL/2,n=Gw[5].offsetTop+sL/2;cS.to(m,.4,{y:n,x:e,scaleX:a/s*1.5,scaleY:a/s*1.5,ease:pS.sin,onComplete:function(){oy(5,m)}})}else cS.to(m,.5,{y:720,x:640,scaleX:a/s*3,scaleY:a/s*3,ease:pS.sin,onComplete:function(){oy(5,m)}})}}function pv(e,a,n,t,i,o){function r(){if(o===E&&i===E){var a=1290*dS.random()-5,t=250*dS.random()+25;(u=sy(e+"particle50",6,a,t,25,25)).image.onload=function(){cS.to(u,.75,{x:"+=12",y:"+=155",scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(6,u)}})}}else if(!0===o){var c=200*dS.random()-100,m=50*dS.random()-25,u=sy(e+"particle50",6,a=l+c,t=s+m,25,25);e1.image.onload=function(){cS.to(u,.75,{y:"+=100",scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(6,u)}})}}else if(!0===i){var c=dS.random()*Wy[hT].imageWidth-d,m=50*dS.random()-25;(u=sy(e+"particle50",6,a=l+c,t=s+m,25,25)).image.onload=function(){cS.to(u,.75,{y:"+=100",scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(6,u)}})}}else{var c=dS.random()*Wy[i].imageWidth-d,m=50*dS.random()-25;(u=sy(e+"particle50",6,a=l+c,t=s+m,25,25)).image.onload=function(){cS.to(u,.75,{y:"+=100",scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(6,u)}})}}n>0&&cS.delayedCall(.015,function(){r(--n)})}if(0!==n&&"High"===kw.videoSetting){if(!0===o)var l=Gw[5].offsetLeft+lL/2-a,s=Gw[5].offsetTop;else if(!0===i)var d=Wy[hT].imageWidth/2,l=Gw[hT].offsetLeft+d-a,s=Gw[hT].offsetTop;else if(i>=0&&i<=4)var d=Wy[i].imageWidth/2,l=Gw[i].offsetLeft+d-a,s=Gw[i].offsetTop;r()}}function bv(e,a){function n(){if(!0!==Wy[e].fallingStatus&&!1!==Wy[e].stunStatus&&""!==Wy[e].name){var a=new uS.Bitmap(d);a.set({x:l+100*dS.random()-50,y:r+30*dS.random(),regX:5,regY:5}),Nw[5].addChild(a),cS.to(a,.5,{y:"-=20",x:"+="+(40*dS.random()-20),rotation:720*dS.random()-360,onComplete:function(){oy(5,a)}}),cS.to(a,.1,{delay:.35,alpha:0}),Wy[e].animateStun=cS.delayedCall(.05,n)}}function t(){if(!(ND<=0||!1===nL)){var a=new uS.Bitmap(d);a.set({x:l+100*dS.random()-50,y:r+30*dS.random()}),Nw[6].addChild(a),cS.to(a,.66,{y:"-=20",x:"+="+(40*dS.random()-20),rotation:720*dS.random()-360,onComplete:function(){oy(6,a)}}),Wy[e].animateStun=cS.delayedCall(.05,t)}}if("High"===kw.videoSetting){if(5===e)i=lL;else var i=Wy[e].imageWidth;var o=i/2,r=Gw[e].offsetTop,l=Gw[e].offsetLeft+o,s=new uS.Shape;s.graphics.beginFill("#ffa").setStrokeStyle(1).beginStroke("#000").drawPolyStar(0,0,10,5,.7,0),s.cache(-5,-5,10,10);var d=s.cacheCanvas;5!==e?n():t()}}function vv(e,a){function n(){a<=0||Wy[e].hp<=0||!1!==Wy[e].sleepStatus&&1!==Wy[e].attackStatus&&(!function(e){var a=Wy[e].imageWidth/2,n=60*dS.random()-60,t=60*dS.random(),i=Gw[e].offsetTop+t,o=sy("blindImage",5,Gw[e].offsetLeft+a+n,i,50,50,!0);o.image.onload=function(){cS.to(o,1.5,{startAt:{alpha:.7},alpha:0,scaleX:4,scaleY:4})}}(e),cS.delayedCall(.05,function(){n()}))}(a-=50)<=0||Wy[e].hp<=0||!1!==Wy[e].sleepStatus&&n()}function yv(a,n,t,i){var o=!1;if((n-=100)<=0&&(o=!0),5!==a?""!==Wy[a].name&&!1!==Wy[a].fearStatus||(o=!0):(ND<=0||!1===tL)&&(o=!0),!0===o)return e("#fearIcon"+a).remove(),Cg(a),Wy[a].fearAnimate.kill(),ND>0&&5===a&&$NG.mob5.stop(!0,!1),void(""===Wy[a].name&&5!==a&&it(a));if(!0===t){if(5===a)r=lL/2;else var r=dS.ceil(Wy[a].imageWidth/2);dS.random();var l=dS.ceil(766-Gw[a].offsetTop),s=dS.ceil(Gw[a].offsetLeft+r-40);Wy[a].fearAnimate.kill(),e("#fearIcon"+a).remove(),t=!1;var d=e("<img>",{id:"fearIcon"+a}).css({position:"absolute",height:80,width:80,bottom:l,left:s,opacity:.7}).attr("src","/classic/images1/fearImage2.png");a<=4?"High"===kw.videoSetting&&$NG.eWin.append(d.css({opacity:i})):"High"===kw.videoSetting&&$NG.eWin2.append(d.css({opacity:i})),cS.to("#fearIcon"+a,1,{rotation:360,force3D:"auto",repeat:-1,ease:pS.lin}),cS.to("#fearIcon"+a,.66,{opacity:.2,force3D:"auto",yoyo:!0,repeat:-1}),cS.to(Gw[a],.033,{startAt:{left:"-=3"},left:"+=3",force3D:"auto",yoyo:!0,repeat:-1,ease:pS.lin})}Wy[a].fearAnimate=cS.delayedCall(.1,function(){yv(a,n,t,i)})}function kv(a,n){function t(a){e("#rootIcon"+a+",#rootBuffIcon"+a).remove()}1===Wy[bL].attackStatus&&hi(!0);var i=0;if(10===dS.ceil(10*dS.random())&&(i=1,Wy[a].rootStatus-=i,cS.to("#rootIcon"+a,.5,{height:"-=10",force3D:!0,ease:pS.lin})),Wy[a].rootStatus<=0)t(a);else if(Wy[a].hp<=0)t(a);else{if(!1===ya())return t(a),void function(){for(var a=0;a<=4;a++)e("#rootIcon"+a+",#rootBuffIcon"+a).remove()}();if("Cleric"===Yy.job){if(Yy.talent3>=1){o=yc(Qe()*(1.85*Je()/100),.9);zy.myMagicDamage("magic",o,a,ee(),"elemental")}}else if("Shaman"===Yy.job&&Yy.talent3>=1){var o=yc(Qe()*(1+.235*Je())/20,.9);zy.myMagicDamage("magic",o,a,ee(),"elemental")}if(!0===n){n=!1;var r=dS.ceil(Wy[a].imageWidth/2),l=Wy[a].imageHeight;if("Wizard"!==Yy.job)var s=dS.ceil(718-l-Gw[a].offsetTop),d=100;else{s=dS.ceil(718-l-Gw[a].offsetTop);(d=.75*Wy[a].imageWidth)<200?d=200:d>600&&(d=600)}var c=dS.ceil(Gw[a].offsetLeft+r-d/2);if("Wizard"!==Yy.job)m=e("<img>",{id:"rootIcon"+a}).css({position:"absolute",height:2*d,width:d,bottom:s,left:c,opacity:1}).attr("src","/classic/images1/rootImage.png");else var m=e("<img>",{id:"rootIcon"+a}).css({position:"absolute",width:d,bottom:s,left:c,opacity:.7}).attr("src","/classic/images1/freezeRoot.png");$NG.eWin.append(m)}cS.delayedCall(1,function(){kv(a,n)})}}function Sv(e){if(Wy[e].hp<=0||!1===Wy[e].sleepStatus||1===Wy[e].attackStatus)return Wy[e].sleepTimer.kill(),void(Wy[e].sleepStatus=!1);var a=Wy[e].imageWidth/2,n=Gw[e].offsetTop+20,t=100*dS.random()-50,i=10*dS.random()+50,o=sy("sleepImage",5,Gw[e].offsetLeft+a-10,n,20,20);o.image.onload=function(){if("Low"!==kw.videoSetting){G().to(o,.1,{y:"-=10"}).to(o,1,{y:"-="+i,x:"+="+t,alpha:0,onComplete:function(){oy(5,o)}})}},Wy[e].sleepTimer=cS.delayedCall(.5,function(){Sv(e)})}function Iv(){mobVicious=!1,mobFrenzy=!1,mobJuggernaut=!1,mobTough=!1,mobChromatic=!1,mobSummoner=!1,mobSprinter=!1,mobVampiric=!1,mobLamprey=!1,mobShreddingAura=!1,mobFireEnchanted=!1,mobColdEnchanted=!1,mobLightningEnchanted=!1,mobPoisonEnchanted=!1,mobMartyr=!1,mobPhased=!1,mobDauntless=!1,mobCripplingAura=!1,mobDisruptionAura=!1,mobConvictionAura=!1,mobConcussiveAura=!1,mobEnsnaringAura=!1,mobZealousAura=!1}function wv(e,a){function n(){dS.random()>.5?Mimg="a human female":Mimg="a human male"}function t(){var e=1+~~(23*dS.random());1!=e||mobFireEnchanted?2!=e||mobColdEnchanted?3!=e||mobLightningEnchanted?4!=e||mobPoisonEnchanted?5!=e||mobSummoner?6!=e||mobVicious?7!=e||mobFrenzy?8!=e||mobJuggernaut?9!=e||mobTough?10!=e||mobChromatic?11!=e||mobSprinter?12!=e||mobVampiric?13!=e||mobLamprey?14!=e||mobMartyr?15!=e||mobPhased?16!=e||mobDauntless?17!=e||mobCripplingAura?18!=e||mobDisruptionAura?19!=e||mobConvictionAura?20!=e||mobConcussiveAura?21!=e||mobEnsnaringAura?22!=e||mobZealousAura?23!=e||mobShreddingAura?t():(mobShreddingAura=!0,Mskill[2]="backstab",Mskill[3]="shadow kick"):(mobZealousAura=!0,Mskill[2]="blind",Mskill[3]="heal"):(mobEnsnaringAura=!0,GL=0,Mskill[2]="root",Mskill[3]="root"):(mobConcussiveAura=!0,Mskill[2]="confuse",Mskill[3]="blind"):(mobConvictionAura=!0,Msilence=!0,i(),o(),r(),l(),AL=4,Mamp=!0):(mobDisruptionAura=!0,Msilence=!0,Mskill[2]="confuse",Mskill[3]="mind numb"):(mobCripplingAura=!0,Mskill[2]="shadow kick",Mskill[3]="weaken"):(mobDauntless=!0,PL=0,Mskill[3]="fear",Mskill[2]="heal"):(mobPhased=!0,Msilence=!0,jL=0,qL=0):(mobMartyr=!0,Mskill[2]="heal",Mskill[3]="shadow kick"):(mobLamprey=!0,Msilence=!0,Mskill[2]="mind drain",Mskill[3]="mind drain"):(mobVampiric=!0,Mdrain=!0,Mskill[2]="yawn",Mskill[3]="heal"):t():(mobChromatic=!0,Msanctuary=!0):(mobTough=!0,Mbarrier=!0,IL=66,Mskill[2]="weaken",Mskill[3]="weaken"):(mobJuggernaut=!0,EL*=1.2,MmaxHp*=1.5,Menrage=!0):(mobFrenzy=!0,Mflurry=!0,monsterSpeed-=700,Mskill[2]="shadow kick",Mskill[3]="shadow kick"):(mobVicious=!0,MironMaiden=!0,hL*=1.2,HL*=1.2,Mskill[2]="backstab",Mskill[3]="shadow kick"):(mobSummoner=!0,FL=0,qL=0,i(),o(),r(),l(),AL=4):(mobPoisonEnchanted=!0,wL=67,Mskill[1]="poison cloud",Mskill[2]="poison cloud",Mskill[3]="poison cloud",Mskill[4]="envenom",AL=4):(mobLightningEnchanted=!0,ML=67,Mskill[1]="energy bolt",Mskill[2]="energy bolt",Mskill[3]="energy bolt",Mskill[4]="static field",AL=4):(mobColdEnchanted=!0,BL=67,Mskill[1]="ice shard",Mskill[2]="ice shard",Mskill[3]="ice shard",Mskill[4]="blizzard",AL=4):(mobFireEnchanted=!0,TL=67,Mskill[1]="fireball",Mskill[2]="fireball",Mskill[3]="fireball",Mskill[4]="conflagration",AL=4)}function i(){var e=1+~~(5*dS.random());1==e&&(Mskill[1]="poison cloud"),2==e&&(Mskill[1]="smite"),3==e&&(Mskill[1]="energy bolt"),4==e&&(Mskill[1]="ice shard"),5==e&&(Mskill[1]="fireball")}function o(){var e=1+~~(5*dS.random());1==e&&(Mskill[2]="poison cloud"),2==e&&(Mskill[2]="smite"),3==e&&(Mskill[2]="energy bolt"),4==e&&(Mskill[2]="ice shard"),5==e&&(Mskill[2]="fireball")}function r(){var e=1+~~(5*dS.random());1==e&&(Mskill[3]="poison cloud"),2==e&&(Mskill[3]="smite"),3==e&&(Mskill[3]="energy bolt"),4==e&&(Mskill[3]="ice shard"),5==e&&(Mskill[3]="fireball")}function l(){var e=1+~~(5*dS.random());1==e&&(Mskill[4]="envenom"),2==e&&(Mskill[4]="engulfing darkness"),3==e&&(Mskill[4]="static field"),4==e&&(Mskill[4]="blizzard"),5==e&&(Mskill[4]="conflagration")}if(jk=!1,pL="",Mimg="",gL=0,cX=100,cY=100,!e){var e=1,a=function(e){var a=!1,n=98;return bH>=1&&(n-=dS.sqrt(bH))<=90&&(n=90),0===bH&&(n+=2),1==QC&&(n="Ranger"==Yy.job?90:95),100*dS.random()>=n&&(a=!0),a}();Iv()}if(e>=2010)return Jk<2&&cS.delayedCall(.1,wv),pL="",void(Jk=1);zL=1,jL=1,NL=1,RL=1,FL=1,GL=1,qL=1,PL=1,Menrage=!1,Mflurry=!1,Mamp=!1,Msanctuary=!1,Mbarrier=!1,Mdrain=!1,MironMaiden=!1,MlayHands=!1,Msilence=!1,Mflee=0,EL=200,MmaxHp=0,Mhp=0,Mxp=0,hL=0,IL=100,HL=0,DL=0,wL=100,CL=100,ML=100,TL=100,BL=100,Mskill=[],Mskill[1]="kick",Mskill[2]="kick",Mskill[3]="kick",Mskill[4]="bash",AL=10,monsterMp=20,monsterSpeed=3e3*zy.speed,McastSpeed=2500*zy.speed,xL=1,Maud1="blankAudio",Maud2="gethit3m",Maud3="death_mb",Maud4="blankAudio",Maud5="blankAudio",Maud6="blankAudio";var s=zy.difficulty-1,d="",c=qn(),m=Pn();if("Fahlnir Citadel"===c){if(0==a){u=~~(42*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].CastleMistmoore&&1===m&&(u=h>.62?29:h<.33?0:15,bS.Q[s].CM1>=8&&bS.Q[s].CM2>=7&&bS.Q[s].CM3>=6&&!1===ya()&&(u=45)),2===bS.Q[s].CastleMistmoore&&2===m&&(u=h>.66?18:h>.41?19:h>.16?14:40,bS.Q[s].CM1>=8&&bS.Q[s].CM2>=6&&bS.Q[s].CM3>=6&&bS.Q[s].CM4>=4&&!1===ya()&&(u=42,mi())),(3===bS.Q[s].CastleMistmoore&&3===m||bS.Q[s].CastleMistmoore>3&&!bS.Q[s].repeatCm3&&3===m)&&(u=h>.75?5:h>.5?3:h>.25?30:27,bS.Q[s].CM1>=7&&bS.Q[s].CM2>=7&&bS.Q[s].CM3>=7&&bS.Q[s].CM4>=7&&(!1===ya()?(mi(),bS.Q[s].CM5<1?(u=43,bS.Q[s].CM5=1):(u=44,bS.Q[s].CM6=1)):(bS.Q[s].CM5<1&&(u=43,bS.Q[s].CM5=1),bS.Q[s].CM6<1&&(u=44,bS.Q[s].CM6=1))))}0==u&&(pL="an initiate familiar",gL=32,Mimg="a dark elf female",d="ROG"),1==u&&(pL="a dark elf noble",gL=32,Mimg="a dark elf female",d="WIZ"),2==u&&(pL="a dark offerer",gL=33,Mimg="a dark elf matron",d="NEC"),3==u&&(pL="a dark ritualist",gL=34,Mimg="a dark elf matron",d="NEC"),4==u&&(pL="a dark sacrificer",gL=33,Mimg="a dark elf matron",d="NEC"),5==u&&(pL="a deathly harbinger",gL=36,Mimg="a dark elf male plate"),6==u&&(pL="a deathly herald",gL=34,Mimg="a dark elf male plate"),7==u&&(pL="a deathly usher",gL=32,Mimg="a dark elf male plate"),8==u&&(pL="a flouting gargoyle",gL=33,Mimg="a gargoyle",EL=250),9==u&&(pL="a ghastish ancille",gL=32,Mimg="a dark elf female plate"),10==u&&(pL="a deathly usher",gL=32,Mimg="a dark elf male plate"),11==u&&(pL="a ghostly ancille",gL=35,Mimg="a dark elf female",d="WIZ"),12==u&&(pL="a ghoulish ancille",gL=33,Mimg="a dark elf female plate"),13==u&&(pL="a glyphed aegis",gL=31,Mimg="a dark elf male"),14==u&&(pL="a glyphed custodian",gL=33,Mimg="a dark elf female",d="CLR"),15==u&&(pL="a glyphed familiar",gL=32,Mimg="a dark elf female"),16==u&&(pL="a glyphed forbidder",gL=30,Mimg="a dark elf female",d="CLR"),17==u&&(pL="a deathly usher",gL=32,Mimg="a dark elf male plate"),18==u&&(pL="a glyphed guard",gL=32,Mimg="a dark elf female"),19==u&&(pL="a glyphed sentry",gL=32,Mimg="a dark elf male"),20==u&&(pL="a glyphed warder",gL=31,Mimg="a dark elf male",d="CLR"),21==u&&(pL="a grinning gargoyle",gL=31,Mimg="a gargoyle",EL=210),22==u&&(pL="a deathly harbinger",gL=36,Mimg="a dark elf male plate"),23==u&&(pL="a deathly herald",gL=34,Mimg="a dark elf male plate"),24==u&&(pL="a deathly usher",gL=32,Mimg="a dark elf male plate"),25==u&&(pL="a deathly herald",gL=34,Mimg="a dark elf male plate"),26==u&&(pL="a jeering gargoyle",gL=34,Mimg="a gargoyle",EL=230),27==u&&(pL="a leering gargoyle",gL=36,Mimg="a gargoyle",EL=250),28==u&&(pL="a negotiator",gL=33,Mimg="a dark elf female",d="ENC"),29==u&&(pL="a pledge familiar",gL=31,Mimg="a dark elf female"),30==u&&(pL="a shadowy sage",gL=36,Mimg="a dark elf female",d="WIZ"),31==u&&(pL="a shadowy scribe",gL=33,Mimg="a dark elf female",d="WIZ"),32==u&&(pL="a shadowy scrivener",gL=31,Mimg="a dark elf female",d="WIZ"),33==u&&(pL="a sneering gargoyle",gL=31,Mimg="a gargoyle"),34==u&&(pL="a dark offerer",gL=33,Mimg="a dark elf matron",d="NEC"),35==u&&(pL="a dark ritualist",gL=34,Mimg="a dark elf matron",d="NEC"),36==u&&(pL="a dark sacrificer",gL=33,Mimg="a dark elf matron",d="NEC"),37==u&&(pL="a shadowy sage",gL=36,Mimg="a dark elf female",d="WIZ"),38==u&&(pL="a shadowy scribe",gL=33,Mimg="a dark elf female",d="WIZ"),39==u&&(pL="a shadowy scrivener",gL=31,Mimg="a dark elf female",d="WIZ"),40==u&&(pL="a negotiator",gL=33,Mimg="a dark elf female",d="ENC"),41==u&&(pL="a wightish ancille",gL=33,Mimg="a dark elf matron",d="NEC"),42==u&&(pL="Dragoon Reklyn",gL=33,Mimg="a dark elf male plate",AL=4,Menrage=!0,Mbarrier=!0,xL=0),43==u&&(pL="Countess Varnia",gL=36,Mimg="a dark elf matron",d="NEC",xL=0),44==u&&(pL="Zigruben",gL=36,Mimg="a dark elf male plate",xL=0,d="SK"),45==u&&(pL="Lieutenant Xagorn",gL=32,Mimg="a dark elf male",xL=0)}else{xL=0;0==(u=~~(7*dS.random()))&&(pL="Butler Armetrin",gL=33,Mimg="a dark elf male",d="SK"),1==u&&(pL="Vindemir Remadi",gL=35,Mimg="a dark elf male plate",AL=4,d="SK"),2==u&&(pL="Arlyssa Divin",gL=34,Mimg="a dark elf female",d="NEC"),3==u&&(pL="Maid Tarmuni",gL=33,Mimg="a dark elf female",AL=4,d="NEC"),4==u&&(pL="Serena Artulis",gL=32,Mimg="a dark elf female",d="ENC",Msanctuary=!0),5==u&&(pL="an imp familiar",gL=33,Mimg="an imp",EL=170,Mflurry=!0),6==u&&(pL="Methrudin",gL=31,Mimg="a shadowed man",EL=180,d="WIZ",MironMaiden=!0,Msanctuary=!0)}g=1;if(1===m?gL>32&&(g=0):2===m?(gL<32||gL>33)&&(g=0):gL<33&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Lanfeld Outpost"===c){if(0==a){u=~~(10*dS.random());if(dS.random()>.0011){if(1===bS.Q[s].Crushbone&&1===m){u=(h=dS.random())>.5?5:h<.25?1:8}if(2===bS.Q[s].Crushbone&&2===m){u=(h=dS.random())>.66?4:h<.33?3:7,bS.Q[s].CB1>=7&&bS.Q[s].CB2>=7&&bS.Q[s].CB3>=7&&!1===ya()&&(u=10)}if(bS.Q[s].Crushbone>=3&&!bS.Q[s].repeatCB&&3===m){u=(h=dS.random())>.58?6:h<.33?0:2,bS.Q[s].CB1>=10&&bS.Q[s].CB2>=8&&bS.Q[s].CB3>=6&&!1===ya()&&(u=11)}}0==u&&(pL="an orc royal guard",gL=19,Mimg="an orc",EL=220),1==u&&(pL="an orc centurion",gL=16,Mimg="an orc",EL=200),2==u&&(pL="an orc emissary",gL=19,Mimg="an orc",EL=240),3==u&&(pL="an orc legionnaire",gL=18,Mimg="an orc",EL=260),4==u&&(pL="an orc oracle",gL=17,Mimg="an orc",EL=220,d="SHM"),5==u&&(pL="an orc pawn",gL=15,Mimg="an orc",EL=160),6==u&&(pL="an orc scoutsman",gL=18,Mimg="an orc",EL=210),7==u&&(pL="an orc lookout",gL=17,Mimg="an orc",EL=210),8==u&&(pL="an orc slaver",gL=17,Mimg="an orc",EL=240),9==u&&(pL="an orc warden",gL=17,Mimg="an orc",EL=250),10==u&&(pL="an orc warlord",gL=18,Mimg="an orc",EL=260,AL=8,Menrage=!0,MironMaiden=!0,xL=0),11==u&&(pL="Chief Grimden",gL=20,Mimg="grimden",EL=370,AL=8,xL=3)}else{xL=0;0==(u=~~(4*dS.random()))&&(pL="Soothsayer Kundo",gL=18,Mimg="an orc",EL=240,d="SHM",Msanctuary=!0),1==u&&(pL="Lord Xavol",gL=17,Mimg="an orc",EL=280),2==u&&(pL="an orc slavedriver",gL=16,Mimg="an orc",EL=250),3==u&&(pL="an orc sergeant",gL=15,Mimg="an orc",EL=240,Mbarrier=!0)}g=1;if(1===m?gL>17&&(g=0):2===m?(gL<17||gL>18)&&(g=0):gL<18&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Arcturin's Crypt"===c){if(0==a){u=~~(20*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].EstateofUnrest&&1===m&&(u=h>.56?5:h<.33?2:14),2===bS.Q[s].EstateofUnrest&&2===m&&(u=h>.68?19:h<.33?11:0,bS.Q[s].ER1>=10&&bS.Q[s].ER2>=8&&bS.Q[s].ER3>=6&&!1===ya()&&(u=20,mi())),bS.Q[s].EstateofUnrest>=3&&!bS.Q[s].repeatER&&3===m&&(u=h>.69?4:h>.38?6:h>.19?8:18,bS.Q[s].ER1>=8&&bS.Q[s].ER2>=8&&bS.Q[s].ER3>=5&&bS.Q[s].ER4>=5&&!1===ya()&&(u=21))}0==u&&(pL="a nymph",gL=30,Mimg="a faerie",d="WIZ"),1==u&&(pL="a werewolf",gL=31,Mimg="a werewolf",Mdrain=!0),2==u&&(pL="a tormented dead",gL=28,Mimg="a male zombie"),3==u&&(pL="a dark cephalid",gL=32,Mimg="a terror",d="ENC"),4==u&&(pL="a mortuary fungus",gL=31,Mimg="a fungus"),5==u&&(pL="a death beetle",gL=27,Mimg="a beetle",EL=320),6==u&&(pL="a dusty werewolf",gL=31,Mimg="a werewolf"),7==u&&(pL="a dark boned skeleton",gL=29,Mimg="a dark skeleton"),8==u&&(pL="a cephalid subverter",gL=32,Mimg="a terror",d="ENC"),9==u&&(pL="a barbed bone skeleton",gL=31,Mimg="a dark skeleton",GL=0),10==u&&(pL="an undead brewer",gL=30,Mimg="a male zombie"),11==u&&(pL="a crazed ghoul",gL=30,Mimg="a ghoul",EL=350),12==u&&(pL="a skeletal monk",gL=29,Mimg="a dark skeleton",d="MNK"),13==u&&(pL="a lurking mummy",gL=30,Mimg="a mummy"),14==u&&(pL="a lumbering mummy",gL=29,Mimg="a mummy"),15==u&&(pL="a greater skeleton",gL=28,Mimg="a skeleton"),16==u&&(pL="a greater dark bone",gL=30,Mimg="a dark skeleton"),17==u&&(pL="a ghoul",gL=29,Mimg="a ghoul",EL=320),18==u&&(pL="a festering hag",gL=32,Mimg="a female zombie",d="WIZ"),19==u&&(pL="a dry bone skeleton",gL=29,Mimg="a skeleton"),20==u&&(pL="Arch Duke of Artremia",gL=31,Mimg="a male zombie",Mflurry=!0,Mbarrier=!0,xL=0),21==u&&(pL="Arcturin, the Lich King",gL=32,Mimg="garanel rucksif",EL=280,AL=6,xL=3)}else{xL=0;0==(u=~~(5*dS.random()))&&(pL="Crackshot",gL=28,Mimg="a beetle",AL=8,Mflurry=!0,EL=450),1==u&&(pL="Sarth Dimnog",gL=28,Mimg="a ghoul",EL=330,d="CLR",Msanctuary=!0),2==u&&(pL="Murgle the Intrepid",gL=29,Mimg="a male zombie",AL=8,Menrage=!0,Mskill[2]="engulfing darkness",Mskill[4]="poison cloud",AL=8,zL=0,RL=0),3==u&&(pL="an undead bartender",gL=30,Mimg="a male zombie",Mbarrier=!0),4==u&&(pL="Roble Shermith",gL=31,Mimg="a ghoul",EL=320,d="NEC",Msanctuary=!0)}g=1;if(1===m?gL>29&&(g=0):2===m?(gL<29||gL>31)&&(g=0):gL<31&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Salubrin Forest"===c)if(0==a){var u=~~(28*dS.random()),f=dS.random();1===bS.Q[s].GreaterFaydark&&f>.0011&&(u=27),3===bS.Q[s].GreaterFaydark&&f>.0011&&(u=dS.random()>.5?25:24),0==u&&(pL="an orc centurion",gL=2,Mimg="an orc",EL=200),1==u&&(pL="a prowling wolf",gL=1,Mimg="a wolf",EL=280),2==u&&(pL="a coyote",gL=3,Mimg="a wolf",EL=330),3==u&&(pL="a young coyote",gL=2,Mimg="a wolf",EL=270,EL=270),4==u&&(pL="an orc oracle",gL=3,Mimg="an orc",EL=200,d="SHM"),5==u&&(pL="an orc centurion",gL=2,Mimg="an orc",EL=200),6==u&&(pL="an orc centurion",gL=2,Mimg="an orc",EL=200),7==u&&(pL="a faerie",gL=2,Mimg="a faerie",EL=150,d="RNG"),8==u&&(pL="an orc shaman",gL=2,Mimg="an orc",EL=200,d="SHM"),9==u&&(pL="a faerie courtier",gL=3,Mimg="a faerie",EL=150,d="RNG"),10==u&&(pL="a faerie duchess",gL=3,Mimg="a faerie",EL=150,d="RNG"),11==u&&(pL="a faerie guard",gL=3,Mimg="a faerie",EL=150,d="RNG"),12==u&&(pL="a faerie maiden",gL=3,Mimg="a faerie",EL=150,d="RNG"),13==u&&(pL="a faerie noble",gL=1,Mimg="a faerie",EL=150,d="RNG"),14==u&&(pL="a faerie maiden",gL=3,Mimg="a faerie",EL=150,d="RNG"),15==u&&(pL="a faerie noble",gL=3,Mimg="a faerie",EL=150),16==u&&(pL="a faerie royal guard",gL=3,Mimg="a faerie",EL=150,d="RNG"),17==u&&(pL="a faerie troublemaker",gL=1,Mimg="a faerie",EL=150,d="RNG"),18==u&&(pL="an orc pawn",gL=1,Mimg="an orc",EL=160),19==u&&(pL="an orc pawn",gL=1,Mimg="an orc",EL=160),20==u&&(pL="an orc pawn",gL=1,Mimg="an orc",EL=160),21==u&&(pL="an orc pawn",gL=1,Mimg="an orc",EL=160),22==u&&(pL="a willowisp",gL=3,Mimg="a wisp"),23==u&&(pL="a decaying skeleton",gL=1,Mimg="a skeleton"),24==u&&(pL="an orc centurion",gL=2,Mimg="an orc",EL=200),25==u&&(pL="an orc hatchetman",gL=3,Mimg="an orc",EL=200),26==u&&(pL="an orc oracle",gL=3,Mimg="an orc",EL=200,d="SHM"),27==u&&(pL="an orc pawn",gL=1,Mimg="an orc",EL=160)}else{xL=0;0==(u=~~(2*dS.random()))&&(pL="Corpsefire",gL=1,Mimg="a male zombie",AL=6,Mskill[1]="fireball",Mskill[2]="conflagration",Mskill[3]="fireball"),1==u&&(pL="Sergeant Boggun",gL=2,Mimg="an orc",EL=215,Msanctuary=!0)}if("Viston's Redoubt"===c){if(4!==m)if(0==a){u=~~(22*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].KedgeKeep&&1===m&&(u=h>.66?1:h<.33?14:12,bS.Q[s].KK1>=8&&bS.Q[s].KK2>=8&&bS.Q[s].KK3>=8&&!1===ya()&&(u=25,mi())),2===bS.Q[s].KedgeKeep&&2===m&&(u=h>.69?9:h>.39?13:h>.18?4:6,bS.Q[s].KK1>=8&&bS.Q[s].KK2>=8&&bS.Q[s].KK3>=5&&bS.Q[s].KK4>=5&&!1===ya()&&(u=22,mi())),(3===bS.Q[s].KedgeKeep&&3===m||bS.Q[s].KedgeKeep>3&&!bS.Q[s].repeatKk3&&3===m)&&(u=h>.64?18:h>.29?17:21,bS.Q[s].KK1>=10&&bS.Q[s].KK2>=10&&bS.Q[s].KK3>=8&&(!1===ya()?(mi(),bS.Q[s].KK4<1?(u=24,bS.Q[s].KK4=1):(u=23,bS.Q[s].KK5=1)):(bS.Q[s].KK4<1&&(u=24,bS.Q[s].KK4=1),bS.Q[s].KK5<1&&(u=23,bS.Q[s].KK5=1))))}0==u&&(pL="a gazing gargoyle",gL=43,Mimg="a gargoyle",EL=250),1==u&&(pL="a peering gargoyle",gL=40,Mimg="a gargoyle",EL=250),2==u&&(pL="a voracious gargoyle",gL=43,Mimg="a gargoyle",EL=250),3==u&&(pL="an afflicted gargoyle",gL=44,Mimg="a gargoyle",EL=250),4==u&&(pL="a lusting werewolf",gL=42,Mimg="a werewolf"),5==u&&(pL="a rapacious gargoyle",gL=43,Mimg="a gargoyle",EL=250),6==u&&(pL="a bloodthirsty bat",gL=43,Mimg="a bat",Mdrain=!0),7==u&&(pL="a shrieking bat",gL=41,Mimg="a bat",Mdrain=!0),8==u&&(pL="a prancing werewolf",gL=42,Mimg="a werewolf"),9==u&&(pL="a brooding imp",gL=41,Mimg="an imp"),10==u&&(pL="a fuming imp",gL=41,Mimg="an imp"),11==u&&(pL="a fretting imp",gL=40,Mimg="an imp"),12==u&&(pL="a dread werewolf",gL=41,Mimg="a werewolf"),13==u&&(pL="a manacled spoiler",gL=42,Mimg="a vampire female",d="WIZ"),14==u&&(pL="a fettered defiler",gL=40,Mimg="a vampire female",d="NEC"),15==u&&(pL="an inveigled ravisher",gL=42,Mimg="a vampire female"),16==u&&(pL="a heart destroyer",gL=41,Mimg="a vampire female"),17==u&&(pL="a soul destroyer",gL=44,Mimg="a dhampyre",d="WIZ"),18==u&&(pL="a pained seether",gL=44,Mimg="a dhampyre",d="MAG"),19==u&&(pL="a panic imbiber",gL=43,Mimg="a dhampyre"),20==u&&(pL="a dread fomenter",gL=42,Mimg="a dhampyre"),21==u&&(pL="a vampire bat",gL=44,Mimg="a bat",Mdrain=!0),22==u&&(pL="Shardok",gL=43,Mimg="a gargoyle",AL=8,Menrage=!0,Mbarrier=!0,xL=0,EL=320),23==u&&(pL="Korman Valen",gL=45,Mimg="a dhampyre",d="SK",Msanctuary=!0,xL=0),24==u&&(pL="Artun Desmoni",gL=44,Mimg="a vampire female",d="WIZ",Msanctuary=!0,xL=0),25==u&&(pL="Sari Portentia",gL=41,Mimg="a vampire female",d="NEC",Mflurry=!0,xL=0)}else{xL=0;0==(u=~~(3*dS.random()))&&(pL="Kragmore",gL=41,Mimg="a gargoyle",EL=320,AL=8,Menrage=!0,Mbarrier=!0),1==u&&(pL="Vera Sintella",gL=45,Mimg="a vampire female",d="MAG",Msanctuary=!0),2==u&&(pL="Gorelyanthe",gL=43,Mimg="a purple dragon",d="WIZ",Mamp=!0,Msanctuary=!0,EL=640)}if(4===m){if(bS.Q[s].KedgeKeep>=4){u=0;dS.random()>.6&&(u=1),bS.Q[s].KK6>=18&&bS.Q[s].KK7>=12&&(u=!1===ya()&&0===bS.Q[s].KK8?2:0)}0==u&&(pL="a sinew punisher",gL=44,Mimg="a dhampyre",EL=180,d="CLR"),1==u&&(pL="Blood Guardian",gL=45,Mimg="a dhampyre",EL=180,d="CLR"),2==u&&(pL="Revenant Viston",gL=45,Mimg="phinigel autropos",xL=3)}g=1;if(1===m?gL>42&&(g=0):2===m?(gL<41||gL>43)&&(g=0):gL<43&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Tendolin Meadows"===c)if(0==a){var u=~~(29*dS.random()),f=dS.random();if(1===bS.Q[s].LesserFaydark&&f>.0011){u=(h=dS.random())>.66?17:18}0==u&&(pL="a skeleton",gL=3,Mimg="a skeleton"),1==u&&(pL="an orc legionnaire",gL=4,Mimg="an orc",EL=230),2==u&&(pL="an orc legionnaire",gL=4,Mimg="an orc",EL=230),3==u&&(pL="an orc legionnaire",gL=4,Mimg="an orc",EL=230),4==u&&(pL="an orc legionnaire",gL=4,Mimg="an orc",EL=230),5==u&&(pL="an orc legionnaire",gL=4,Mimg="an orc",EL=230),6==u&&(pL="a faerie",gL=4,Mimg="a faerie",EL=150),7==u&&(pL="a faerie",gL=4,Mimg="a faerie",EL=150),8==u&&(pL="a faerie",gL=4,Mimg="a faerie",EL=150),9==u&&(pL="a faerie courtier",gL=5,Mimg="a faerie",EL=150),10==u&&(pL="a faerie guard",gL=5,Mimg="a faerie",EL=150),11==u&&(pL="a faerie maiden",gL=5,Mimg="a faerie",EL=150),12==u&&(pL="a fairy guard",gL=5,Mimg="a faerie",EL=150),13==u&&(pL="a giant spider",gL=4,Mimg="a brown spider",EL=300),14==u&&(pL="a mist wolf",gL=4,Mimg="a wolf",EL=320),15==u&&(pL="a faerie",gL=4,Mimg="a faerie",EL=150),16==u&&(pL="a mummy",gL=5,Mimg="a mummy"),17==u&&(pL="a pixie prankster",gL=3,Mimg="a faerie"),18==u&&(pL="a pixie trickster",gL=4,Mimg="a faerie"),19==u&&(pL="a shadowed man",gL=5,Mimg="a shadowed man",EL=180),20==u&&(pL="a skeleton",gL=3,Mimg="a skeleton"),21==u&&(pL="a spiderling",gL=3,Mimg="a heart spider",EL=200),22==u&&(pL="an orc pawn",gL=1,Mimg="an orc",EL=160),23==u&&(pL="a faerie",gL=4,Mimg="a faerie",EL=150),24==u&&(pL="an orc centurion",gL=3,Mimg="an orc",EL=200),25==u&&(pL="an orc chief",gL=5,Mimg="an orc",EL=220),26==u&&(pL="an orc legionnaire",gL=4,Mimg="an orc",EL=230),27==u&&(pL="an orc oracle",gL=5,Mimg="an orc",EL=220,d="SHM"),28==u&&(pL="an orc pawn",gL=1,Mimg="an orc",EL=160)}else{xL=0;0==(u=~~(2*dS.random()))&&(pL="Queen Fargash",gL=5,Mimg="a brown spider",EL=420,Mskill[2]="blind",Mskill[3]="blind",Mflurry=!0,Mdrain=!0),1==u&&(pL="Fara Quindletip",gL=4,Mimg="a faerie",GL=0,Msanctuary=!0)}if("Riven Grotto"===c){if(0==a){u=~~(23*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].Befallen&&1===m&&(u=h>.66?6:h<.33?5:11),2===bS.Q[s].Befallen&&2===m&&(u=h>.62?8:h<.38?3:13,bS.Q[s].BF1>=8&&bS.Q[s].BF2>=8&&bS.Q[s].BF3>=5&&!1===ya()&&(u=23)),3===bS.Q[s].Befallen&&3===m&&(u=h>.6?22:h<.3?9:12,bS.Q[s].BF1>=9&&bS.Q[s].BF2>=7&&bS.Q[s].BF3>=7&&!1===ya()&&(u=24,mi()))}0==u&&(pL="a giant rat",gL=10,Mimg="a rat"),1==u&&(pL="a diseased rat",gL=11,Mimg="a rat"),2==u&&(pL="a large diseased rat",gL=12,Mimg="a rat"),3==u&&(pL="a necro acolyte",gL=13,Mimg="a dark elf male",d="NEC"),4==u&&(pL="a necro apprentice",gL=12,Mimg="a dark elf male",d="NEC"),5==u&&(pL="a necro initiate",gL=12,n(),EL=180,d="NEC"),6==u&&(pL="a necro neophyte",gL=11,Mimg="a dark elf male",d="NEC"),7==u&&(pL="a willowisp",gL=13,Mimg="a wisp"),8==u&&(pL="an ice boned skeleton",gL=12,Mimg="a skeleton"),9==u&&(pL="a burnt zombie",gL=15,Mimg="a male zombie"),10==u&&(pL="a cracked skeleton",gL=12,Mimg="a skeleton"),11==u&&(pL="a dread bone",gL=12,Mimg="a dark skeleton"),12==u&&(pL="a dread corpse",gL=16,Mimg="a dark skeleton"),13==u&&(pL="a ghoul",gL=13,Mimg="a ghoul",EL=350),14==u&&(pL="a greater skeleton",gL=13,Mimg="a skeleton"),15==u&&(pL="a lesser mummy",gL=13,Mimg="a mummy",EL=180),16==u&&(pL="a putrid skeleton",gL=11,Mimg="a skeleton"),17==u&&(pL="a skeletal excavator",gL=14,Mimg="a skeleton"),18==u&&(pL="a skeletal foreman",gL=14,Mimg="a dark skeleton"),19==u&&(pL="a skeleton",gL=10,Mimg="a skeleton",Mskill[3]="fireball"),20==u&&(pL="a sturdy skeleton",gL=12,Mimg="a skeleton"),21==u&&(pL="a zombie",gL=12,Mimg="a female zombie"),22==u&&(pL="an elf skeleton",gL=14,Mimg="a skeleton"),23==u&&(pL="Dark Priest Nymda",gL=14,Mimg="a dark elf male",d="CLR",Msanctuary=!0,xL=0),24==u&&(pL="The Black Seer",gL=16,Mimg="a dark elf male",d="WIZ",Mamp=!0,xL=0)}else{xL=0;0==(u=~~(5*dS.random()))&&(pL="Necromus Ignoble",gL=11,Mimg="a human male",EL=180,d="NEC",Mamp=!0),1==u&&(pL="Gerdin Farth",gL=13,Mimg="a mummy",Menrage=!0),2==u&&(pL="Sinfura Dagon",gL=15,Mimg="a human female",d="ROG",AL=8,Mflurry=!0),3==u&&(pL="Lieutenant Relben",gL=15,Mimg="a male zombie",Menrage=!0),4==u&&(pL="Flippy the Rat God",gL=12,Mimg="a rat",d="RNG",RL=0,NL=0,FL=0,Mflurry=!0,Menrage=!0)}g=1;if(1===m?gL>12&&(g=0):2===m?(gL<11||gL>14)&&(g=0):gL<14&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Greenthorn Cavern"===c){if(0==a){u=~~(12*dS.random());if(dS.random()>.0011){if(1===bS.Q[s].Blackburrow&&1===m){u=(h=dS.random())>.55?4:h<.33?9:5}if(2===bS.Q[s].Blackburrow&&2===m){u=(h=dS.random())>.64?6:h<.36?8:11,bS.Q[s].BB1>=8&&bS.Q[s].BB2>=8&&bS.Q[s].BB3>=6&&!1===ya()&&(u=12)}if(3===bS.Q[s].Blackburrow&&3===m){u=(h=dS.random())>.5?10:h<.33?7:2,bS.Q[s].BB1>=12&&bS.Q[s].BB2>=8&&bS.Q[s].BB3>=4&&!1===ya()&&(u=13,zy.difficulty>1&&mi())}}0==u&&(pL="a burly gnoll",gL=9,Mimg="a gnoll",EL=300),1==u&&(pL="a gnoll",gL=7,Mimg="a gnoll",EL=250),2==u&&(pL="a gnoll commander",gL=11,Mimg="a gnoll",EL=350),3==u&&(pL="a gnoll guardsman",gL=10,Mimg="a gnoll",EL=330),4==u&&(pL="a gnoll pup",gL=6,Mimg="a gnoll",EL=200),5==u&&(pL="a gnoll scout",gL=7,Mimg="a gnoll",EL=250),6==u&&(pL="a gnoll shaman",gL=8,Mimg="a gnoll",EL=270,d="SHM"),7==u&&(pL="a gnoll tactician",gL=10,Mimg="a gnoll",EL=270),8==u&&(pL="a patrolling gnoll",gL=7,Mimg="a gnoll",EL=270),9==u&&(pL="a scrawny gnoll",gL=6,Mimg="a gnoll",EL=230),10==u&&(pL="an elite gnoll guard",gL=10,Mimg="a gnoll",EL=310),11==u&&(pL="a gnoll sergeant",gL=8,Mimg="a gnoll"),12==u&&(pL="Furrpaw Barxen",gL=9,Mimg="a gnoll",EL=330,AL=8,Menrage=!0,Mdrain=!0,xL=0),13==u&&(pL="Viceroy Tanaden",gL=11,Mimg="a gnoll",EL=350,d="SK",Mdrain=!0,xL=0)}else{xL=0;0==(u=~~(3*dS.random()))&&(pL="Rikren Armaw",gL=6,Mimg="a gnoll",EL=270,d="ROG",Mdrain=!0),1==u&&(pL="Grifruf Arpen",gL=8,Mimg="a gnoll",EL=300,AL=8,Menrage=!0,Mdrain=!0),2==u&&(pL="Rappy Grimpaw",gL=11,Mimg="a gnoll",EL=330,Menrage=!0)}g=1;if(1===m?gL>7&&(g=0):2===m?(gL<7||gL>9)&&(g=0):gL<10&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Temple of Prenssor"===c){if(0==a){u=~~(19*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].CazicThule&&1===m&&(u=h>.56?6:h<.33?12:5,bS.Q[s].CT1>=8&&bS.Q[s].CT2>=6&&bS.Q[s].CT3>=4&&!1===ya()&&(u=19)),2===bS.Q[s].CazicThule&&2===m&&(u=h>.58?9:h<.33?14:11,bS.Q[s].CT1>=10&&bS.Q[s].CT2>=8&&bS.Q[s].CT3>=6&&(!1===ya()?(mi(),bS.Q[s].CT4<1?(u=20,bS.Q[s].CT4=1):(u=21,bS.Q[s].CT5=1)):(bS.Q[s].CT4<1&&(u=20,bS.Q[s].CT4=1),bS.Q[s].CT5<1&&(u=21,bS.Q[s].CT5=1)))),(3===bS.Q[s].CazicThule&&3===m||bS.Q[s].CazicThule>3&&!bS.Q[s].repeatCt3&&3===m)&&(u=h>.64?17:h<.36?4:3,bS.Q[s].CT1>=10&&bS.Q[s].CT2>=10&&bS.Q[s].CT3>=8&&!1===ya()&&(u=22))}0==u&&(pL="a raging gorilla",gL=40,Mimg="a gorilla",EL=400),1==u&&(pL="a hulking gorilla",gL=39,Mimg="a gorilla",EL=380),2==u&&(pL="a fierce gorilla",gL=38,Mimg="a gorilla",EL=360),3==u&&(pL="a lizard champion",gL=42,Mimg="a lizardman"),4==u&&(pL="a lizard crusader",gL=41,Mimg="a lizardman",d="SK"),5==u&&(pL="a lizard defender",gL=39,Mimg="a lizardman"),6==u&&(pL="a lizard disciple",gL=38,Mimg="a lizardman"),7==u&&(pL="a lizard fanatic",gL=40,Mimg="a lizardman"),8==u&&(pL="a lizard guard",gL=38,Mimg="a lizardman"),9==u&&(pL="a lizard herald",gL=39,Mimg="a lizardman",d="CLR"),10==u&&(pL="a lizard judicator",gL=40,Mimg="a lizardman",d="CLR"),11==u&&(pL="a lizard justicar",gL=40,Mimg="a lizardman",d="CLR"),12==u&&(pL="a lizard page",gL=38,Mimg="a lizardman",d="CLR"),13==u&&(pL="a lizard proselyte",gL=38,Mimg="a lizardman"),14==u&&(pL="a lizard protector",gL=39,Mimg="a lizardman"),15==u&&(pL="a lizard sentinel",gL=39,Mimg="a lizardman"),16==u&&(pL="a lizard warder",gL=37,Mimg="a lizardman"),17==u&&(pL="a lizard zealot",gL=41,Mimg="a lizardman"),18==u&&(pL="a silvered guard",gL=38,Mimg="a lizardman"),19==u&&(pL="Soprenti the Anointed",gL=39,Mimg="a lizardman",Menrage=!0,Mdrain=!0,d="CLR",xL=0),20==u&&(pL="Sartuth the Possessed",gL=40,Mimg="a lizardman",Msanctuary=!0,d="CLR",xL=0),21==u&&(pL="Merszas the Divine",gL=39,Mimg="a lizardman",Msanctuary=!0,Mbarrier=!0,d="ENC",xL=0),22==u&&(pL="Sentoth, Lord of Rapture",gL=42,Mimg="avatar of fear",d="SK",xL=3)}else{xL=0;0==(u=~~(5*dS.random()))&&(pL="a clay golem",gL=39,Mimg="a clay golem",EL=320,Mbarrier=!0,Msanctuary=!0),1==u&&(pL="a steel golem",gL=38,Mimg="a steel golem",EL=280,Mbarrier=!0,Msanctuary=!0,Menrage=!0),2==u&&(pL="a stone golem",gL=40,Mimg="a stone golem",Mbarrier=!0,Msanctuary=!0),3==u&&(pL="Vergundi the Blasted",gL=41,Mimg="a lizardman",d="WIZ",Mamp=!0,Msilence=!0),4==u&&(pL="Vestresst",gL=38,Mimg="a lizardman",d="ROG")}g=1;if(1===m?gL>39&&(g=0):2===m?(gL<39||gL>40)&&(g=0):gL<40&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Kordata Ruins"===c){if(0==a){u=~~(40*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].LowerGuk&&1===m&&(u=h>.58?22:h<.33?35:6,bS.Q[s].LG1>=10&&bS.Q[s].LG2>=8&&bS.Q[s].LG3>=6&&(!1===ya()?(mi(),bS.Q[s].LG4<1?(u=40,bS.Q[s].LG4=1):(u=41,bS.Q[s].LG5=1)):(bS.Q[s].LG4<1&&(u=40,bS.Q[s].LG4=1),bS.Q[s].LG5<1&&(u=41,bS.Q[s].LG5=1)))),2===bS.Q[s].LowerGuk&&2===m&&(u=h>.71?18:h>.43?26:h>.22?32:4,bS.Q[s].LG1>=8&&bS.Q[s].LG2>=8&&bS.Q[s].LG3>=6&&bS.Q[s].LG4>=6&&(!1===ya()?(mi(),bS.Q[s].LG5<1?(u=42,bS.Q[s].LG5=1):(u=43,bS.Q[s].LG6=1)):(bS.Q[s].LG5<1&&(u=42,bS.Q[s].LG5=1),bS.Q[s].LG6<1&&(u=43,bS.Q[s].LG6=1)))),(3===bS.Q[s].LowerGuk&&3===m||bS.Q[s].LowerGuk>3&&!bS.Q[s].repeatLg3&&3===m)&&(u=h>.6?2:h>.27?31:30,bS.Q[s].LG1>=12&&bS.Q[s].LG2>=10&&bS.Q[s].LG3>=8&&(!1===ya()?(mi(),bS.Q[s].LG4<1?(u=44,bS.Q[s].LG4=1):(u=45,bS.Q[s].LG5=1)):(bS.Q[s].LG4<1&&(u=44,bS.Q[s].LG4=1),bS.Q[s].LG5<1&&(u=45,bS.Q[s].LG5=1))))}0==u&&(pL="a basalt gargoyle",gL=36,Mimg="a gargoyle",EL=230),1==u&&(pL="an evil eye",gL=36,Mimg="an evil eye round",EL=120,d="WIZ"),2==u&&(pL="a mal anuran knight",gL=38,Mimg="an anuran"),3==u&&(pL="a clay gargoyle",gL=35,Mimg="a gargoyle",EL=230),4==u&&(pL="a ber anuran knight",gL=38,Mimg="an anuran"),5==u&&(pL="a deadly black widow",gL=36,Mimg="a heart spider",EL=350),6==u&&(pL="an amn anuran wizard",gL=36,Mimg="an anuran",d="WIZ"),7==u&&(pL="an anuran mal knight",gL=38,Mimg="an anuran"),8==u&&(pL="a zig anuran knight",gL=36,Mimg="an anuran"),9==u&&(pL="an anuran ber knight",gL=37,Mimg="an anuran"),10==u&&(pL="an anuran zod knight",gL=39,Mimg="an anuran"),11==u&&(pL="an anuran zod shaman",gL=39,Mimg="an anuran",d="SHM"),12==u&&(pL="an anuran ber knight",gL=37,Mimg="an anuran"),13==u&&(pL="an anuran ohm shaman",gL=38,Mimg="an anuran",d="SHM"),14==u&&(pL="an anuran vex shaman",gL=37,Mimg="an anuran",d="SHM"),15==u&&(pL="a mal anuran knight",gL=38,Mimg="an anuran"),16==u&&(pL="an anuran cham knight",gL=34,Mimg="an anuran"),17==u&&(pL="an anuran cham warrior",gL=34,Mimg="an anuran",Mbarrier=!0),18==u&&(pL="a pul anuran knight",gL=36,Mimg="an anuran"),19==u&&(pL="an anuran lem shaman",gL=35,Mimg="an anuran",d="SHM"),20==u&&(pL="an anuran fal shaman",gL=34,Mimg="an anuran",d="SHM"),21==u&&(pL="an anuran amn shaman",gL=35,Mimg="an anuran",d="SHM"),22==u&&(pL="an anuran tir knight",gL=35,Mimg="an anuran"),23==u&&(pL="an anuran zig knight",gL=35,Mimg="an anuran"),24==u&&(pL="an anuran dol shaman",gL=35,Mimg="an anuran",d="SHM"),25==u&&(pL="an anuran pul knight",gL=36,Mimg="an anuran"),26==u&&(pL="a dol anuran wizard",gL=36,Mimg="an anuran",d="WIZ"),27==u&&(pL="a granite gargoyle",gL=36,Mimg="a gargoyle",EL=230),28==u&&(pL="a greater ice bones",gL=35,Mimg="a skeleton"),29==u&&(pL="an evil eye sentinel",gL=35,Mimg="an evil eye round",d="WIZ"),30==u&&(pL="a zod anuran knight",gL=39,Mimg="an anuran"),31==u&&(pL="a zod anuran wizard",gL=38,Mimg="an anuran",d="WIZ"),32==u&&(pL="a vex anuran wizard",gL=37,Mimg="an anuran",d="WIZ"),33==u&&(pL="a cham anuran knight",gL=34,Mimg="an anuran"),34==u&&(pL="a cham anuran warrior",gL=34,Mimg="an anuran"),35==u&&(pL="a lem anuran wizard",gL=35,Mimg="an anuran",d="WIZ"),36==u&&(pL="a fal anuran wizard",gL=35,Mimg="an anuran",d="WIZ"),37==u&&(pL="an amn anuran wizard",gL=35,Mimg="an anuran",d="WIZ"),38==u&&(pL="an anuran dol shaman",gL=36,Mimg="an anuran",d="SHM"),39==u&&(pL="a tir anuran knight",gL=35,Mimg="an anuran"),40==u&&(pL="an anuran assassin",gL=36,Mimg="an anuran",xL=0,d="ROG",Mflurry=!0),41==u&&(pL="an anuran supplier",gL=36,Mimg="an anuran",MironMaiden=!0,xL=0),42==u&&(pL="a frenzied anuran",gL=37,Mimg="an anuran",Mflurry=!0,Msanctuary=!0,xL=0),43==u&&(pL="an anuran sentinel",gL=38,Mimg="an anuran",AL=6,Mflurry=!0,MironMaiden=!0,xL=0),44==u&&(pL="King Froaki",gL=39,Mimg="an anuran",Menrage=!0,Mflurry=!0,MironMaiden=!0,d="SK",Mdrain=!0,Mbarrier=!0,xL=0),45==u&&(pL="the anuran arch magus",gL=38,Mimg="an anuran",MironMaiden=!0,Mdrain=!0,Mbarrier=!0,Msilence=!0,d="WIZ",Mamp=!0,Msanctuary=!0,xL=0)}else{xL=0;0==(u=~~(15*dS.random()))&&(pL="a bloodthirsty anuran",gL=37,Mimg="an anuran",Menrage=!0,Mflurry=!0),1==u&&(pL="an anuran herbalist",gL=35,Mimg="an anuran",MironMaiden=!0,Msanctuary=!0),2==u&&(pL="an anuran tactician",gL=38,Mimg="an anuran",MironMaiden=!0,Msanctuary=!0,d="WIZ"),3==u&&(pL="an anuran cavalier",gL=35,Mimg="an anuran",Msanctuary=!0,Mbarrier=!0,d="SK",MironMaiden=!0),4==u&&(pL="an anuran executioner",gL=36,Mimg="an anuran",castinFrequency=7,Menrage=!0,Mflurry=!0),5==u&&(pL="an anuran ritualist",gL=35,Mimg="an anuran",MironMaiden=!0,Mamp=!0,d="NEC"),6==u&&(pL="an anuran sage",gL=37,Mimg="an anuran",Mamp=!0,Msanctuary=!0,Msilence=!0,d="WIZ",PL=0,MironMaiden=!0),7==u&&(pL="an anuran savant",gL=37,Mimg="an anuran",Mamp=!0,d="CLR",MironMaiden=!0),8==u&&(pL="an anuran scribe",gL=36,Mimg="an anuran",Mamp=!0,d="ENC",Msanctuary=!0,Msilence=!0),9==u&&(pL="an evil eye elder",gL=37,Mimg="an evil eye round",AL=6,EL=120,d="WIZ",Mbarrier=!0),10==u&&(pL="a nymph",gL=37,Mimg="a faerie",Mamp=!0,Msanctuary=!0,d="WIZ",Msilence=!0),11==u&&(pL="an evil eye tormentor",gL=37,Mimg="an evil eye round",AL=6,EL=120,d="WIZ",MironMaiden=!0),12==u&&(pL="an anuran crusader",gL=38,Mimg="an anuran",d="PAL",Msanctuary=!0,Mbarrier=!0),13==u&&(pL="the anuran king",gL=39,Mimg="an anuran",d="PAL",Msanctuary=!0,Mbarrier=!0),14==u&&(pL="an anuran noble",gL=37,Mimg="an anuran",MironMaiden=!0,d="ENC")}g=1;if(1===m?gL>36&&(g=0):2===m?(gL<36||gL>38)&&(g=0):gL<38&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Ashenflow Peak"===c){if(4!==m)if(0==a){u=~~(9*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].NagafensLair&&1===m&&(u=h>.69?0:h>.39?1:h>.19?4:5,bS.Q[s].NL1>=8&&bS.Q[s].NL2>=8&&bS.Q[s].NL3>=5&&bS.Q[s].NL4>=5&&(!1===ya()?(mi(),bS.Q[s].NL5<1?(u=13,bS.Q[s].NL5=1):(u=9,bS.Q[s].NL6=1)):(bS.Q[s].NL5<1&&(u=13,bS.Q[s].NL5=1),bS.Q[s].NL6<1&&(u=9,bS.Q[s].NL6=1)))),2===bS.Q[s].NagafensLair&&2===m&&(u=h>.62?6:h>.31?7:3,bS.Q[s].NL1>=10&&bS.Q[s].NL2>=8&&bS.Q[s].NL3>=8&&(!1===ya()?(mi(),bS.Q[s].NL4<1?(u=10,bS.Q[s].NL4=1):(u=11,bS.Q[s].NL5=1)):(bS.Q[s].NL4<1&&(u=10,bS.Q[s].NL4=1),bS.Q[s].NL5<1&&(u=11,bS.Q[s].NL5=1)))),(3===bS.Q[s].NagafensLair&&3===m||bS.Q[s].NagafensLair>3&&!bS.Q[s].repeatNl3&&3===m)&&(u=h>.6?8:2,bS.Q[s].NL1>=10&&bS.Q[s].NL2>=15&&!1===ya()&&(u=12,mi()))}0==u&&(pL="a greater kobold",gL=46,Mimg="a kobold",EL=300),1==u&&(pL="a greater kobold shaman",gL=46,Mimg="a kobold",EL=320,d="SHM"),2==u&&(pL="an imp protector",gL=49,Mimg="an imp",EL=170),3==u&&(pL="a lava duct crawler",gL=48,Mimg="a heart spider",EL=400),4==u&&(pL="an ashenflow kobold",gL=47,Mimg="a kobold",EL=300),5==u&&(pL="an ashenflow kobold shaman",gL=47,Mimg="a kobold",EL=320,d="SHM"),6==u&&(pL="a sonic bat",gL=47,Mimg="a bat",Mskill[3]="bash",AL=8),7==u&&(pL="a lava beetle",gL=47,Mimg="a beetle",EL=420),8==u&&(pL="a lava guardian",gL=48,Mimg="a fire elemental"),9==u&&(pL="an ashenflow kobold king",gL=47,Mimg="a kobold",EL=380,AL=8,Mdrain=!0,Mflurry=!0,Mbarrier=!0,xL=0),10==u&&(pL="a noxious spider",gL=48,Mimg="a jungle spider",EL=290,Mskill[1]="envenom",Mskill[2]="poison cloud",Mskill[3]="poison cloud",Mdrain=!0,Mamp=!0,xL=0),11==u&&(pL="a stone spider",gL=48,Mimg="a brown spider",EL=500,Mbarrier=!0,Msanctuary=!0,xL=0,Msilence=!0),12==u&&(pL="General Ovext",gL=49,Mimg="an imp",EL=240,Mskill[1]="conflagration",Mskill[2]="fireball",Mskill[3]="fireball",Mflurry=!0,Mamp=!0,xL=0),13==u&&(pL="a kobold noble",gL=46,Mimg="a kobold",EL=370,MironMaiden=!0,Msanctuary=!0,d="ENC",xL=0)}else{xL=0;0==(u=~~(4*dS.random()))&&(pL="a kobold champion",gL=47,Mimg="a kobold",EL=400,Mbarrier=!0,Menrage=!0),1==u&&(pL="a dung collector",gL=49,Mimg="a red goblin",Msanctuary=!0,MironMaiden=!0),2==u&&(pL="a death beetle",gL=48,Mimg="a beetle",EL=500,Menrage=!0,Mflurry=!0,Mdrain=!0),3==u&&(pL="a kobold priest",gL=46,Mimg="a kobold",EL=360,Mskill[1]="heal",Mskill[2]="blind",Mskill[3]="smite",Mskill[4]="root",PL=0,AL=4,Msanctuary=!0,Mbarrier=!0,Mamp=!0)}if(4===m){if(bS.Q[s].NagafensLair>=4){u=0;dS.random()<.4&&(u=1),bS.Q[s].NL7>=12&&bS.Q[s].NL8>=8&&bS.Q[s].NL11<=1&&!1===ya()&&(u=3,bS.Q[s].NL11=1,mi()),bS.Q[s].NL7>=8&&bS.Q[s].NL10<=1&&!1===ya()&&(u=4,bS.Q[s].NL10=1,mi()),bS.Q[s].NL7>=4&&bS.Q[s].NL9<=1&&!1===ya()&&(u=2,bS.Q[s].NL9=1,mi()),bS.Q[s].NL7>=12&&bS.Q[s].NL8>=8&&bS.Q[s].NL9>=2&&bS.Q[s].NL10>=2&&bS.Q[s].NL11>=2&&(u=!1===ya()&&0===bS.Q[s].NL12?5:0)}0==u&&(pL="a fire giant warrior",gL=50,Mimg="a fire giant"),1==u&&(pL="a fire giant wizard",gL=50,Mimg="a fire giant",Mskill[1]="smite",Mskill[2]="conflagration",Mskill[3]="energy bolt",Mskill[4]="fireball",AL=3,Mamp=!0),2==u&&(pL="King Argentus",gL=51,Mimg="a fire giant",xL=0,Mskill[2]="engulfing darkness",Mskill[3]="fear",Mskill[4]="poison cloud",AL=7,zL=0,RL=0),3==u&&(pL="Battle Mage Turento",gL=51,Mimg="a fire giant",xL=0,Mskill[1]="smite",Mskill[2]="conflagration",Mskill[3]="energy bolt",Mskill[4]="fireball",AL=3,Mamp=!0,Msilence=!0),4==u&&(pL="Duke Carthenage",gL=50,Mimg="a fire giant",xL=0),5==u&&(pL="Highlord Szarthax",gL=51,Mimg="a red dragon",xL=3)}g=1;if(1===m?gL>47&&(g=0):2===m?(gL<47||gL>48)&&(g=0):gL<48&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Braxxen's Bastille"===c){if(0==a){u=~~(16*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].Najena&&1===m&&(u=h>.5?3:h<.3?4:13,bS.Q[s].NJ1>=10&&bS.Q[s].NJ2>=6&&bS.Q[s].NJ3>=4&&!1===ya()&&(u=15)),2===bS.Q[s].Najena&&2===m&&(u=h>.58?5:h<.33?10:0,bS.Q[s].NJ1>=10&&bS.Q[s].NJ2>=8&&bS.Q[s].NJ3>=6&&!1===ya()&&(u=16)),3===bS.Q[s].Najena&&3===m&&(u=h>.62?7:h<.31?11:6,bS.Q[s].NJ1>=10&&bS.Q[s].NJ2>=8&&bS.Q[s].NJ3>=8&&(!1===ya()?(mi(),bS.Q[s].NJ4<1?(u=17,bS.Q[s].NJ4=1):(u=18,bS.Q[s].NJ5=1)):(bS.Q[s].NJ4<1&&(u=17,bS.Q[s].NJ4=1),bS.Q[s].NJ5<1&&(u=18,bS.Q[s].NJ5=1))))}0==u&&(pL="an anuran torturer",gL=23,Mimg="an anuran"),1==u&&(pL="a giant black widow",gL=21,Mimg="a heart spider",EL=350),2==u&&(pL="a goblin magician",gL=21,Mimg="a red goblin",EL=170,d="MAG"),3==u&&(pL="a goblin warrior",gL=20,Mimg="a red goblin",EL=180),4==u&&(pL="a greater skeleton",gL=20,Mimg="a skeleton"),5==u&&(pL="a goblin officer",gL=21,Mimg="a red goblin"),6==u&&(pL="a goblin captain",gL=24,Mimg="a red goblin"),7==u&&(pL="a magician",gL=23,Mimg="a dark elf female",d="MAG"),8==u&&(pL="a tentacle horror",gL=22,Mimg="a terror",d="ENC"),8==u&&(pL="a tentacle thrasher",gL=20,Mimg="a terror",d="ENC"),10==u&&(pL="a necromancer",gL=22,n(),EL=180,d="NEC"),11==u&&(pL="a cephalid subverter",gL=23,Mimg="a terror",d="ENC"),12==u&&(pL="an injured anuran",gL=21,Mimg="an anuran"),13==u&&(pL="an anuran guard",gL=21,Mimg="an anuran"),14==u&&(pL="a dark boned skeleton",gL=20,Mimg="a dark skeleton"),15==u&&(pL="Grippywor",gL=21,Mimg="an anuran",Menrage=!0,xL=0),16==u&&(pL="Munin",gL=23,Mimg="a dark elf male",d="NEC",Mamp=!0,xL=0),17==u&&(pL="Burzina",gL=23,Mimg="a dark elf female plate",d="SK",xL=0),18==u&&(pL="Braxxen",gL=24,Mimg="braxxen",d="MAG",Mamp=!0,Msanctuary=!0,xL=0)}else{xL=0;0==(u=~~(6*dS.random()))&&(pL="Rendozi",gL=22,Mimg="a human male",d="ROG",Mflurry=!0),1==u&&(pL="Officer Flipbip",gL=21,Mimg="an anuran",Menrage=!0),2==u&&(pL="Yibuppin",gL=21,Mimg="an anuran",Mflurry=!0,MironMaiden=!0),3==u&&(pL="Munin's Incarnate",gL=23,Mimg="a skeleton",MironMaiden=!0,Mbarrier=!0),4==u&&(pL="Carmaxxen",gL=22,Mimg="a dark elf male",d="NEC",Mamp=!0),5==u&&(pL="Carmina Devorin",gL=23,Mimg="a dark elf female",d="ROG",Mdrain=!0)}g=1;if(1===m?gL>21&&(g=0):2===m?(gL<21||gL>23)&&(g=0):gL<23&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Galeblast Fortress"===c){if(4!==m)if(0==a){u=~~(16*dS.random());if(dS.random()>.0011){h=dS.random();1===bS.Q[s].PermafrostKeep&&1===m&&(u=h>.6?12:h<.3?3:1,bS.Q[s].PK1>=8&&bS.Q[s].PK2>=6&&bS.Q[s].PK3>=6&&!1===ya()&&(u=16,mi())),2===bS.Q[s].PermafrostKeep&&2===m&&(u=h>.66?8:h>.33?14:6,bS.Q[s].PK1>=7&&bS.Q[s].PK2>=7&&bS.Q[s].PK3>=7&&!1===ya()&&(u=17,mi())),3===bS.Q[s].PermafrostKeep&&3===m&&(u=h>.6?10:h>.2?15:13,bS.Q[s].PK1>=10&&bS.Q[s].PK2>=10&&bS.Q[s].PK3>=5&&(bS.Q[s].PK4<=1&&!1===ya()?(mi(),bS.Q[s].PK4<1?(u=18,bS.Q[s].PK4=1):(u=19,bS.Q[s].PK5=1)):(bS.Q[s].PK4<1&&(u=18,bS.Q[s].PK4=1),bS.Q[s].PK5<1&&(u=19,bS.Q[s].PK5=1))))}0==u&&(pL="a dire pup",gL=43,Mimg="a white wolf",EL=270),1==u&&(pL="a dire wolf",gL=44,Mimg="a white wolf",EL=340),2==u&&(pL="a goblin diviner",gL=43,Mimg="a blue goblin",EL=180,d="CLR"),3==u&&(pL="a goblin evoker",gL=43,Mimg="a blue goblin",EL=180,d="WIZ"),4==u&&(pL="a goblin mendicant",gL=44,Mimg="a blue goblin",EL=180,d="CLR"),5==u&&(pL="an icy goblin",gL=45,Mimg="a blue goblin",EL=180,d="WIZ"),6==u&&(pL="a goblin preacher",gL=45,Mimg="a blue goblin",EL=180,d="CLR"),7==u&&(pL="a goblin priest",gL=43,Mimg="a blue goblin",EL=180,Mskill[1]="heal",Mskill[2]="blind",Mskill[3]="smite",Mskill[4]="root",PL=0,AL=4),8==u&&(pL="a goblin wizard",gL=44,Mimg="a blue goblin",EL=180,Mskill[1]="ice shard",Mskill[2]="blizzard",Mskill[3]="energy bolt",Mskill[4]="fireball",AL=3),9==u&&(pL="a large dire wolf",gL=45,Mimg="a white wolf",EL=420),10==u&&(pL="a goblin sage",gL=45,Mimg="a blue goblin",EL=180,d="WIZ"),11==u&&(pL="a young dire wolf",gL=44,Mimg="a white wolf",EL=290),12==u&&(pL="an ice goblin",gL=43,Mimg="a blue goblin",EL=180),13==u&&(pL="an ice giant youth",gL=46,Mimg="an ice giant"),14==u&&(pL="an elite goblin guard",gL=44,Mimg="a blue goblin",EL=180,Menrage=!0),15==u&&(pL="an elite honor guard",gL=45,Mimg="a blue goblin",EL=180),16==u&&(pL="an ice goblin keymaster",gL=44,Mimg="a blue goblin",EL=180,Mflurry=!0,MironMaiden=!0,xL=0),17==u&&(pL="a goblin excavator",gL=45,Mimg="a blue goblin",EL=180,Mflurry=!0,xL=0),18==u&&(pL="Pontiff Krindletin",gL=46,Mimg="a blue goblin",EL=195,d="CLR",Mamp=!0,Msanctuary=!0,xL=0),19==u&&(pL="Magnate Dinbopp",gL=46,Mimg="a blue goblin",EL=195,Mskill[3]="bash",AL=8,Menrage=!0,MironMaiden=!0,xL=0)}else{xL=0;0==(u=~~(5*dS.random()))&&(pL="Vober Slibable",gL=44,Mimg="a blue goblin",EL=180,Mskill[2]="poison cloud",Mskill[3]="envenom",MironMaiden=!0,Mamp=!0),1==u&&(pL="Cribub Upbuppi",gL=43,Mimg="a blue goblin",EL=180,d="SHM",Mamp=!0),2==u&&(pL="Boger Dinviegle",gL=45,Mimg="a blue goblin",EL=180,Menrage=!0),3==u&&(pL="Bazile Ortemmi",gL=45,Mimg="a blue goblin",EL=180,Menrage=!0,MironMaiden=!0),4==u&&(pL="Prin Fradl",gL=44,Mimg="a blue goblin",EL=180,d="CLR",AL=4,Mamp=!0,Msanctuary=!0)}if(4===m){if(bS.Q[s].PermafrostKeep>=4){u=0;bS.Q[s].PK1<4||bS.Q[s].PK2<4||bS.Q[s].PK3<4?u=3+~~(3*dS.random()):bS.Q[s].PK4<3||bS.Q[s].PK5<2||bS.Q[s].PK6<2?u=~~(3*dS.random()):0===bS.Q[s].PK7?(u=7,bS.Q[s].PK7=1,bS.Q[s].PK8=0,mi()):0===bS.Q[s].PK8&&(u=6,bS.Q[s].PK8=1),bS.Q[s].PK1>=4&&bS.Q[s].PK2>=4&&bS.Q[s].PK3>=4&&bS.Q[s].PK4>=3&&bS.Q[s].PK5>=2&&bS.Q[s].PK6>=2&&bS.Q[s].PK7>=2&&bS.Q[s].PK8>=2&&(u=!1===ya()&&0===bS.Q[s].PK9?8:0)}0==u&&(pL="an ice giant",gL=47,Mimg="an ice giant"),1==u&&(pL="an ice giant magus",gL=46,Mimg="an ice giant",Mskill[1]="ice shard",Mskill[2]="blizzard",Mskill[3]="ice shard",Mskill[4]="ice shard",AL=3),2==u&&(pL="an ice giant priest",gL=47,Mimg="an ice giant",d="CLR"),3==u&&(pL="an ice giant champion",gL=46,Mimg="an ice giant",d="PAL"),4==u&&(pL="an ice giant warder",gL=46,Mimg="an ice giant",d="RNG"),5==u&&(pL="an ice giant preserver",gL=46,Mimg="an ice giant",d="DRU"),6==u&&(pL="Vizier Kongumen Divorn",gL=48,Mimg="an ice giant",EL=350,d="CLR",xL=0),7==u&&(pL="Margrave Kalgresh the Usurper",gL=48,Mimg="an ice giant",xL=0),8==u&&(pL="Matron Maelentia",gL=48,Mimg="a blue dragon",xL=3)}g=1;if(1===m?gL>44&&(g=0):2===m?(gL<44||gL>45)&&(g=0):3===m?(gL<45||gL>46)&&(g=0):4===m&&gL<46&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if("Nimgaul"===c)if(0==a){u=~~(17*dS.random());(bS.Q[s].PF15<3||bS.Q[s].PF16<3||bS.Q[s].PF17<3||bS.Q[s].PF22<1)&&(u=14+~~(3*dS.random()),0===bS.Q[s].PF22&&bS.Q[s].PF15>=3&&bS.Q[s].PF16>=3&&bS.Q[s].PF17>=3&&!1===ya()&&(u=21)),(bS.Q[s].PF12<3||bS.Q[s].PF13<3||bS.Q[s].PF14<3||bS.Q[s].PF20<1)&&(u=11+~~(3*dS.random()),0===bS.Q[s].PF20&&bS.Q[s].PF12>=3&&bS.Q[s].PF13>=3&&bS.Q[s].PF14>=3&&!1===ya()&&(u=19)),(bS.Q[s].PF9<3||bS.Q[s].PF10<3||bS.Q[s].PF11<3||bS.Q[s].PF19<1)&&(u=8+~~(3*dS.random()),0===bS.Q[s].PF19&&bS.Q[s].PF9>=3&&bS.Q[s].PF10>=3&&bS.Q[s].PF11>=3&&!1===ya()&&(u=18)),(bS.Q[s].PF5<3||bS.Q[s].PF6<3||bS.Q[s].PF7<3||bS.Q[s].PF8<3||bS.Q[s].PF21<1)&&(u=4+~~(4*dS.random()),0===bS.Q[s].PF21&&bS.Q[s].PF5>=3&&bS.Q[s].PF6>=3&&bS.Q[s].PF7>=3&&bS.Q[s].PF8>=3&&!1===ya()&&(u=20)),(bS.Q[s].PF1<3||bS.Q[s].PF2<3||bS.Q[s].PF3<3||bS.Q[s].PF4<3||bS.Q[s].PF18<1)&&(u=~~(4*dS.random()),0===bS.Q[s].PF18&&bS.Q[s].PF1>=3&&bS.Q[s].PF2>=3&&bS.Q[s].PF3>=3&&bS.Q[s].PF4>=3&&!1===ya()&&(u=17)),0==u&&(pL="a wailing banshee",gL=51,Mimg="a ghoul",Mskill[2]="root",Mskill[3]="root",Mskill[4]="root",McastSpeed=500,EL=400),1==u&&(pL="a festering dreg",gL=52,EL=220,McastSpeed=500,Mskill[2]="envenom",Mskill[3]="envenom",Mskill[4]="envenom",dS.random()>.5?(Mimg="a female zombie",EL=190):(Mimg="a male zombie",EL=210)),2==u&&(pL="a lurid nymph",gL=52,Mimg="a faerie",EL=140,d="WIZ"),3==u&&(pL="a peering menace",gL=52,Mimg="an evil eye round",EL=120,d="ENC"),4==u&&(pL="an accursed slattern",gL=51,Mimg="a vampire female",d="NEC"),5==u&&(pL="a brooding fungus",gL=52,Mimg="a fungus",Mskill[1]="blind",Mskill[2]="blind",Mskill[3]="yawn",Mskill[4]="yawn",AL=7),6==u&&(pL="a cursed marionette",gL=52,Mimg="a faerie",EL=140,d="ENC"),7==u&&(pL="a tremulant imp",gL=52,Mimg="an imp",EL=160,d="ROG",Mflurry=!0),8==u&&(pL="a deranged gorilla",gL=53,Mimg="a gorilla",EL=500,Menrage=!0),9==u&&(pL="a boreal spider",gL=53,Mimg="a white spider",AL=5,Mskill[1]="ice shard",Mskill[2]="ice shard",Mskill[3]="blizzard",Mskill[4]="blizzard",McastSpeed=500),10==u&&(pL="a cephalid enticer",gL=51,Mimg="a terror",Mdrain=!0,d="SHM"),11==u&&(pL="a panicked anuran",gL=52,Mimg="an anuran",Mskill[2]="fear",Mskill[3]="fear",Mskill[4]="fear"),12==u&&(pL="a chaos punisher",gL=52,Mimg="a clay golem",EL=270,Mbarrier=!0,Mskill[2]="mind drain",Mskill[3]="mind drain",Mskill[4]="mind drain"),13==u&&(pL="a chaos enforcer",gL=53,Mimg="a stone golem",Mskill[1]="mind drain",Mskill[2]="mind drain",Mskill[3]="engulfing darkness",Mskill[4]="fear",AL=7,zL=0,RL=0),14==u&&(pL="a pustulant vessel",gL=52,Mimg="a mummy",Mskill[1]="mind numb",Mskill[2]="mind numb",Mskill[3]="weaken",Mskill[4]="weaken"),15==u&&(pL="a shrieking wisp",gL=52,Mimg="a wisp"),16==u&&(pL="a sorrow slitherer",gL=52,Mimg="a terror",d="ENC"),17==u&&(pL="Guardian of Misery",gL=55,Mimg="a clay golem",EL=360,xL=0,MironMaiden=!0,Mdrain=!0),18==u&&(pL="Guardian of Strife",gL=55,Mimg="a stone golem",xL=0,Mbarrier=!0,Msanctuary=!0),19==u&&(pL="Guardian of Ruin",gL=55,Mimg="a steel golem",EL=360,xL=0,Mflurry=!0,Menrage=!0),20==u&&(pL="Falzitherin",gL=54,Mimg="dracoliche",EL=829,xL=3,hL*=1.6,wL=67,zL=0,Mtype=3,McastSpeed=500,HL*=2.3,AL=4,Mskill[1]="envenom",Mskill[2]="engulfing darkness",Mskill[3]="poison cloud",Mskill[4]="fear",Mdrain=!0,RL=0),21==u&&(pL="Nalatos, God of Chaos",gL=55,Mimg="cazic",xL=3,EL=602)}else{xL=0;0==(u=~~(7*dS.random()))&&(pL="Anastaryan",gL=53,Mimg="a faerie",d="WIZ",Mamp=!0,Msanctuary=!0),1==u&&(pL="Erghal",gL=54,Mimg="an evil eye round",d="ENC",Mamp=!0,Msilence=!0),2==u&&(pL="Oshomurm",gL=53,Mimg="a fungus",d="SHM",Mbarrier=!0,Msanctuary=!0),3==u&&(pL="Shevn Ohn",gL=54,Mimg="an imp",d="ROG",Mflurry=!0,jL=1,Mdrain=!0),4==u&&(pL="Burzwhorl",gL=53,Mimg="a white spider",d="ENC",Mdrain=!0,MironMaiden=!0),5==u&&(pL="Sisyphen",gL=54,Mimg="a wisp",d="WIZ",Msanctuary=!0,Msilence=!0),6==u&&(pL="General Burble",gL=53,Mimg="an anuran",Menrage=!0,Mbarrier=!0)}if("Dire Sanctum"===c)if(0==a){u=~~(11*dS.random());(bS.Q[s].PH7<5||bS.Q[s].PH8<5||bS.Q[s].PH9<5||bS.Q[s].PH10<5||bS.Q[s].PH11<5||bS.Q[s].PH13<1)&&(u=6+~~(5*dS.random()),0===bS.Q[s].PH13&&bS.Q[s].PH7>=5&&bS.Q[s].PH8>=5&&bS.Q[s].PH9>=5&&bS.Q[s].PH10>=5&&bS.Q[s].PH11>=5&&!1===ya()&&(u=12)),(bS.Q[s].PH1<4||bS.Q[s].PH2<4||bS.Q[s].PH3<4||bS.Q[s].PH4<4||bS.Q[s].PH5<4||bS.Q[s].PH6<4||bS.Q[s].PH12<1)&&(u=~~(6*dS.random()),0===bS.Q[s].PH12&&bS.Q[s].PH1>=4&&bS.Q[s].PH2>=4&&bS.Q[s].PH3>=4&&bS.Q[s].PH4>=4&&bS.Q[s].PH5>=4&&bS.Q[s].PH6>=4&&!1===ya()&&(u=11)),0==u&&(pL="a toiling drudge",gL=50,Mimg="a stone golem",CL=67,TL=67,BL=67,d="SHM"),1==u&&(pL="a slavering corpse",gL=50,Mimg="a female zombie",EL=240,Mskill[2]="envenom",Mskill[3]="envenom",Mskill[4]="envenom",AL=7),2==u&&(pL="a fetid vagabond",gL=50,Mimg="a dhampyre",d="MAG",dS.random()>.5&&(Mimg="a vampire female")),3==u&&(pL="an impulse servant",gL=49,Mimg="a gargoyle",EL=250,d="ROG",AL=6,CL=125),4==u&&(pL="a servant of corruption",gL=51,MlayHands=!0,McastSpeed=2250,MmaxHp*=.9,Mimg="a dark elf male"),5==u&&(pL="an embalmed vagrant",gL=49,Mimg="a mummy",AL=6,Mskill[2]="envenom",Mskill[3]="envenom",Mskill[4]="envenom"),6==u&&(pL="a ghastly indulger",gL=50,Mimg="a ghoul",EL=400,d="SK"),7==u&&(pL="an infected rodent",gL=49,Mimg="a rat",AL=7,Mskill[2]="envenom",Mskill[3]="envenom",Mskill[4]="envenom"),8==u&&(pL="a flittering menace",gL=51,Mimg="an imp",d="NEC",CL=67),9==u&&(pL="a hallowed harbinger",gL=51,Mimg="a skeleton",Menrage=!0),10==u&&(pL="a cephalid sorcerer",gL=50,Mimg="a terror",d="WIZ"),11==u&&(pL="Vixen Sarmina",gL=52,Mimg="maestro",xL=3,EL=250,Mdrain=!0,Mflurry=!0),12==u&&(pL="Sanctum Guardian Ghalentus",gL=53,Mimg="innoruuk",xL=3,EL=325)}else{xL=0;0==(u=~~(5*dS.random()))&&(pL="Adendu Noughyn",gL=52,Mimg="a dark elf male",d="ROG",Mflurry=!0),1==u&&(pL="Shenmo Gourtan",gL=51,Mimg="a dhampyre",d="ENC",Msanctuary=!0),2==u&&(pL="Phenochlord",gL=52,Mimg="a terror",d="WIZ",Mamp=!0),3==u&&(pL="Atorc Aldiph",gL=52,Mimg="a stone golem",d="SHM",Mdrain=!0,MironMaiden=!0),4==u&&(pL="Phadol Theril",gL=53,Mimg="a skeleton",d="PAL",Menrage=!0)}if("Kordata Marshlands"===c){if(0==a){u=~~(43*dS.random());if(dS.random()>.0011){var h=dS.random();1===bS.Q[s].UpperGuk&&1===m&&(u=h>.58?31:h<.285?29:30),2===bS.Q[s].UpperGuk&&2===m&&(u=h>.64?37:h<.36?33:11,bS.Q[s].UG1>=8&&bS.Q[s].UG2>=8&&bS.Q[s].UG3>=6&&!1===ya()&&(u=43)),3===bS.Q[s].UpperGuk&&3===m&&(u=h>.58?27:h<.285?21:28,bS.Q[s].UG1>=12&&bS.Q[s].UG2>=8&&bS.Q[s].UG3>=8&&!1===ya()&&(u=44,mi(2)))}0==u&&(pL="an anuran apprentice",gL=23,Mimg="an anuran"),1==u&&(pL="an anuran ith knight",gL=25,Mimg="an anuran"),2==u&&(pL="an anuran ith shaman",gL=25,Mimg="an anuran",d="SHM"),3==u&&(pL="an anuran guard",gL=24,Mimg="an anuran"),4==u&&(pL="an anuran guard",gL=24,Mimg="an anuran"),5==u&&(pL="a skeletal slave",gL=24,Mimg="a dark skeleton"),6==u&&(pL="an anuran necromancer",gL=24,Mimg="an anuran",d="NEC"),7==u&&(pL="an anuran neophyte",gL=23,Mimg="an anuran"),8==u&&(pL="an anuran nokta shaman",gL=24,Mimg="an anuran",d="SHM"),9==u&&(pL="an anuran novice",gL=23,Mimg="an anuran",d="SHM"),10==u&&(pL="an anuran outlander",gL=24,Mimg="an anuran"),11==u&&(pL="an anuran priest",gL=27,Mimg="an anuran",d="CLR"),12==u&&(pL="an anuran realist",gL=25,Mimg="an anuran",d="SHM"),13==u&&(pL="a skeletal monk",gL=25,Mimg="a dark skeleton",d="MNK"),14==u&&(pL="an anuran sentinel",gL=24,Mimg="an anuran"),15==u&&(pL="an anuran sentry",gL=24,Mimg="an anuran"),16==u&&(pL="an anuran cham knight",gL=26,Mimg="an anuran"),17==u&&(pL="a skeletal servant",gL=26,Mimg="a dark skeleton",d="MNK"),18==u&&(pL="an anuran cham shaman",gL=26,Mimg="an anuran",d="SHM"),19==u&&(pL="an anuran cham warrior",gL=26,Mimg="an anuran"),20==u&&(pL="an anuran shinta warrior",gL=25,Mimg="an anuran"),21==u&&(pL="an anuran summoner",gL=27,Mimg="an anuran",d="MAG"),22==u&&(pL="an anuran recruit",gL=23,Mimg="an anuran"),23==u&&(pL="an anuran lem shaman",gL=26,Mimg="an anuran",d="SHM"),24==u&&(pL="an anuran ton knight",gL=24,Mimg="an anuran"),25==u&&(pL="an anuran ton shaman",gL=25,Mimg="an anuran",d="SHM"),26==u&&(pL="an anuran ton warrior",gL=26,Mimg="an anuran"),27==u&&(pL="an anuran tonta knight",gL=27,Mimg="an anuran"),28==u&&(pL="an anuran fal shaman",gL=28,Mimg="an anuran",d="SHM"),29==u&&(pL="an anuran sur knight",gL=24,Mimg="an anuran"),30==u&&(pL="an anuran sur shaman",gL=25,Mimg="an anuran",d="SHM"),31==u&&(pL="an anuran sur warrior",gL=24,Mimg="an anuran"),32==u&&(pL="an anuran tir knight",gL=28,Mimg="an anuran"),33==u&&(pL="an anuran tir shaman",gL=26,Mimg="an anuran",d="SHM"),34==u&&(pL="an anuran witch doctor",gL=24,Mimg="an anuran",d="NEC"),35==u&&(pL="an anuran dol priest",gL=27,Mimg="an anuran",d="CLR"),36==u&&(pL="a fungus ancient",gL=27,Mimg="a fungus",d="RNG"),37==u&&(pL="a fungus breeder",gL=25,Mimg="a fungus",d="RNG"),38==u&&(pL="a fungus drone",gL=25,Mimg="a fungus",d="RNG"),39==u&&(pL="a fungus mutant",gL=26,Mimg="a fungus",d="RNG"),40==u&&(pL="a fungus soldier",gL=25,Mimg="a fungus",d="RNG"),41==u&&(pL="a large heart spider",gL=25,Mimg="a heart spider",EL=320),42==u&&(pL="a heart spider",gL=24,Mimg="a heart spider",EL=270),43==u&&(pL="the anuran warden",gL=27,Mimg="an anuran",xL=0,Mflurry=!0),44==u&&(pL="Prince Kerpple",gL=28,Mimg="an anuran",d="PAL",Mflurry=!0,Msanctuary=!0,Mbarrier=!0,xL=0)}else{xL=0;0==(u=~~(5*dS.random()))&&(pL="an anuran idealist",gL=24,Mimg="an anuran",Mflurry=!0),1==u&&(pL="an anuran cartographer",gL=27,Mimg="an anuran",Menrage=!0),2==u&&(pL="an anuran ith squire",gL=25,Mimg="an anuran",d="CLR",Msanctuary=!0),3==u&&(pL="a giant heart spider",gL=24,Mimg="a heart spider",EL=325,Mflurry=!0,Mdrain=!0),4==u&&(pL="an anuran scryer",gL=25,Mimg="an anuran",d="ENC",Msanctuary=!0)}var g=1;if(1===m?gL>25&&(g=0):2===m?(gL<25||gL>27)&&(g=0):gL<27&&(g=0),0===g&&0!==xL)return void wv(++e,a)}if(++e<2e3)for(var p=0;p<=4;p++)if(pL==Wy[p].name&&0==xL)return void wv(e,a);if(""!=pL){2===zy.difficulty&&(gL+=25,monsterSpeed*=.8,McastSpeed*=.8),3===zy.difficulty&&((gL+=44)>99&&(gL=99),monsterSpeed*=.6,McastSpeed*=.6),gL=Cv(gL),3===xL&&(monsterSpeed=2500,2===zy.difficulty&&(monsterSpeed=2e3),3===zy.difficulty&&(monsterSpeed=1500)),0===xL&&(2===zy.difficulty?gL++:3===zy.difficulty&&(gL+=2)),gL>99&&(gL=99);var b=~~(bH/10);if(b>25&&(b=25),gL+=b,1==QC&&0==a&&(QC=!1,fa("You failed to find your quarry this time.")),1==QC&&1==a&&(xL=0,QC=!1,fa("You successfully tracked "+pL+".")),gL>=10&&(MmaxHp+=10*gL),gL>=20&&(MmaxHp+=10*gL),gL>=30&&(MmaxHp+=10*gL),gL>=40&&(MmaxHp+=10*gL),gL>=50&&(MmaxHp+=10*gL),gL>=60&&(MmaxHp+=10*gL),gL>=70&&(MmaxHp+=10*gL),gL>=80&&(MmaxHp+=10*gL),gL>=90&&(MmaxHp+=10*gL),MmaxHp+=100*gL,hL+=1+2.3*gL,IL=100,HL+=5+2.3*gL,wL=100,CL=100,ML=100,BL=100,TL=100,2===zy.difficulty?MmaxHp*=1.2:3===zy.difficulty&&(MmaxHp*=1.5),(Ky+=1)>1024&&(Ky=1),Mxp=18*gL+12,3===xL&&(d=""),""!==d&&("MNK"===d&&(Mskill[1]="shadow kick",Mskill[2]="shadow kick",Mskill[3]="shadow kick",Mskill[4]="shadow kick",AL=8,MmaxHp*=.9),"ROG"===d&&(Mskill[1]="backstab",Mskill[2]="backstab",Mskill[3]="backstab",Mskill[4]="backstab",AL=8,MmaxHp*=.95),"SK"===d&&(Mskill[2]="engulfing darkness",Mskill[3]="fear",Mskill[4]="poison cloud",AL=7,zL=0,RL=0,AL=8),"DRU"!==d&&"RNG"!==d||(Mskill[1]="heal",Mskill[2]="conflagration",Mskill[3]="fireball",Mskill[4]="root",AL=4,"RNG"===d?(monsterSpeed*=.9,hL*=1.1,AL=7,MmaxHp*=.95):(GL=0,HL*=1.1,MmaxHp*=.95,MmaxHp*=.9)),"CLR"!==d&&"PAL"!==d||(Mskill[1]="heal",Mskill[2]="blind",Mskill[3]="smite",Mskill[4]="root",PL=0,AL=4,"PAL"===d?MlayHands=!0:HL*=1.1),"SHM"===d&&(Mskill[1]="heal",Mskill[2]="envenom",Mskill[3]="yawn",Mskill[4]="weaken",AL=4,NL=0,HL*=1.1),"NEC"===d&&(Mskill[1]="engulfing darkness",Mskill[2]="fear",Mskill[3]="poison cloud",Mskill[4]="energy bolt",RL=0,AL=3,HL*=1.1,MmaxHp*=.8),"ENC"===d&&(Mskill[1]="yawn",Mskill[2]="mind numb",Mskill[3]="confuse",Mskill[4]="smite",AL=3,jL=0,HL*=1.1,MmaxHp*=.8),"MAG"===d&&(Mskill[1]="energy bolt",Mskill[2]="ice shard",Mskill[3]="mind drain",Mskill[4]="static field",AL=3,FL=0,qL=0,HL*=1.1,MmaxHp*=.8),"WIZ"===d&&(Mskill[1]="ice shard",Mskill[2]="blizzard",Mskill[3]="energy bolt",Mskill[4]="fireball",AL=3,HL*=1.1,MmaxHp*=.8)),Mtype=0,"a bat"==Mimg&&(mobImgX=290,mobImgY=427,cX=137,cY=99,200===EL&&(EL=220),Maud1="bat_att",Maud2="bat_hit",Maud3="bat_die"),"a beetle"==Mimg&&(mobImgX=200,mobImgY=85,cX=93,cY=56,Maud1="beetlatt",Maud2="beetlhit",Maud3="beetldie",ML=67),"a blue goblin"==Mimg&&(mobImgX=200,mobImgY=249,cX=96,cY=70,Maud1="gob_att",Maud2="gob_hit",Maud3="gob_die",BL=67,Mtype=1),"a brown spider"==Mimg&&(mobImgX=200,mobImgY=111,cX=101,cY=56,Maud1="spid_att",Maud2="spid_hit",Maud3="spid_die",Mdrain=!0,wL=67),"a clay golem"==Mimg&&(mobImgX=274,mobImgY=365,cX=108,cY=99,Maud1="golumatt",Maud2="golumhit",Maud3="golumdie",MmaxHp*=1.2,wL=67),"a dark elf female plate"==Mimg&&(mobImgX=200,mobImgY=345,cX=110,cY=108,Maud2="gethit3f",Maud3="death_fl",Mtype=1,MmaxHp*=1.2),"a dark elf female"!=Mimg&&"a dark elf matron"!=Mimg||(mobImgX=200,mobImgY=320,cY=79,Maud2="gethit3f",Maud3="death_fl",MmaxHp*=.9,HL*=1.1,Mtype=1),"a dark elf male plate"==Mimg&&(mobImgX=200,mobImgY=313,Mtype=1,MmaxHp*=1.2),"a dark elf male"==Mimg&&(EL=124,mobImgX=124,mobImgY=286,cX=65,cY=66,MmaxHp*=.9,HL*=1.1,Mtype=1),"a dark skeleton"==Mimg&&(mobImgX=200,mobImgY=334,cX=97,cY=81,Maud1="skeleton_att",Maud2="skeleton_hit",Maud3="skeleton_die",TL=125,Mtype=1,Mskill[3]="fireball",Mskill[4]="fireball",McastSpeed=500*zy.speed),"a dhampyre"==Mimg&&(mobImgX=200,mobImgY=306,Maud1="vmpematt",Maud2="vmpemhit",Maud3="vmpemdie",TL=125,Mtype=1,Mdrain=!0),"a faerie"==Mimg&&(mobImgX=200,mobImgY=310,cX=103,cY=70,Maud1="fairyatt",Maud2="fairyhit",Maud3="fairydie",ML=67,Mtype=1),"a female zombie"==Mimg&&(mobImgX=200,mobImgY=333,Maud1="zomf_att",Maud2="gethit3f",Maud3="zomf_die",MmaxHp*=.9,TL=125,Mtype=1),"a fire elemental"==Mimg&&(mobImgX=200,mobImgY=241,cX=122,cY=73,Maud1="elem_att3",Maud2="elem_hit3",Maud3="elem_die3",TL=67,BL=125,Mskill[3]="fireball",Mskill[4]="fireball",McastSpeed=500,qL=0),"an anuran"==Mimg&&(mobImgX=220,mobImgY=233,cX=112,cY=82,Maud1="frog_att",Maud2="frog_hit",Maud3="frog_die",Mtype=1),"a fungus"==Mimg&&(mobImgX=200,mobImgY=315,cY=138,Maud1="fung_att",Maud2="fung_hit",Maud3="fung_die",wL=67,Mtype=1,Mskill[3]="yawn",Mskill[4]="yawn"),"a gargoyle"===Mimg&&(mobImgX=269,mobImgY=410,cX=120,cY=86,Maud1="garg_att",Maud2="garg_hit",Maud3="garg_die",ML=67,Mtype=1),"a ghoul"===Mimg&&(mobImgX=200,mobImgY=235,cY=58,Maud1="ghoulatt",Maud2="ghoulhit",Maud3="ghouldie",TL=125,Mtype=1,Mskill[2]="root",Mskill[3]="root",McastSpeed=500),"a gnoll"===Mimg&&(mobImgX=200,mobImgY=285,Maud1="gnollatt",Maud2="gnollhit",Maud3="gnolldie",Mtype=1,NL=1),"a gorilla"===Mimg&&(mobImgX=200,mobImgY=172,cX=104,cY=75,Maud1="gorilatt",Maud2="gorilhit",Maud3="gorildie",hL*=1.05),"a heart spider"===Mimg&&(mobImgX=200,mobImgY=100,cX=93,cY=49,Maud1="spid_att",Maud2="spid_hit",Maud3="spid_die",Mdrain=!0,wL=67),"a human male"===Mimg&&(mobImgX=200,mobImgY=330,cX=95,cY=78,MmaxHp*=.9,EL=200,Mtype=1),"a human female"===Mimg&&(mobImgX=200,mobImgY=330,cX=101,cY=74,Maud2="gethit3f",Maud3="death_fl",MmaxHp*=.9,Mtype=1),"a jungle spider"===Mimg&&(mobImgX=200,mobImgY=108,cX=93,cY=69,Maud1="spid_att",Maud2="spid_hit",Maud3="spid_die",Mdrain=!0,wL=67),"a kobold"===Mimg&&(mobImgX=200,mobImgY=200,cX=92,cY=82,Maud1="werewatt",Maud2="werewhit",Maud3="werewdie",Mtype=1),"a lizardman"===Mimg&&(mobImgX=200,mobImgY=254,cX=108,cY=71,Maud1="liza_att",Maud2="liza_hit",Maud3="liza_die",TL=67,Mtype=1),"a male zombie"===Mimg&&(mobImgX=100,mobImgY=329,cX=47,cY=76,Maud1="zom_att",Maud3="zom_die",MmaxHp*=.9,TL=125,Mtype=1,EL=100),"a mummy"===Mimg&&(mobImgX=200,mobImgY=330,cY=81,Maud1="zom_att",Maud3="zom_die",MmaxHp*=.9,TL=125,Mtype=1),"a rat"===Mimg&&(mobImgX=200,mobImgY=170,cX=90,cY=90,Maud1="rat_att",Maud2="rat_hit",Maud3="rat_die",MmaxHp*=.9,wL=67,Mdrain=!0),"a red goblin"===Mimg&&(mobImgX=200,mobImgY=270,cX=88,cY=74,Maud1="gob_att",Maud2="gob_hit",Maud3="gob_die",TL=67,Mtype=1),"a shadowed man"===Mimg&&(mobImgX=200,mobImgY=332,cX=94,cY=86,CL=67,Mtype=1),"a skeleton"===Mimg&&(mobImgX=200,mobImgY=334,cX=95,cY=85,Maud1="skeleton_att",Maud2="skeleton_hit",Maud3="skeleton_die",-1===pL.indexOf(" pet")&&(Mskill[3]="fireball",Mskill[4]="fireball"),TL=125,Mtype=1,McastSpeed=500),"a steel golem"===Mimg&&(mobImgX=250,mobImgY=336,cX=132,Maud1="golumatt",Maud2="golumhit",Maud3="golumdie",MmaxHp*=1.2,wL=67),"a stone golem"===Mimg&&(mobImgX=274,mobImgY=365,cX=108,cY=99,Maud1="golumatt",Maud2="golumhit",Maud3="golumdie",MmaxHp*=1.2,wL=67,Msilence=!0),"a terror"===Mimg&&(mobImgX=200,mobImgY=198,cX=110,cY=128,Maud1="tent_att",Maud2="tent_hit",Maud3="tent_die",CL=67,Mdrain=!0),"a vampire female"===Mimg&&(mobImgX=200,mobImgY=256,cX=79,cY=88,Maud1="vmpefatt",Maud2="vmpefhit",Maud3="vmpefdie",TL=125,Mtype=1,Mdrain=!0),"a werewolf"===Mimg&&(mobImgX=260,mobImgY=288,cX=122,cY=133,Maud1="werewatt",Maud2="werewhit",Maud3="werewdie",CL=67,Mtype=1,Mdrain=!0),"a white spider"===Mimg&&(mobImgX=333,mobImgY=151,cX=164,cY=70,EL=333,Maud1="spid_att",Maud2="spid_hit",Maud3="spid_die",Mdrain=!0,BL=67),"a white wolf"===Mimg&&(mobImgX=200,mobImgY=215,Maud1="wolf_att2",Maud2="wolf_hit2",Maud3="wolf_die2",BL=67),"a wisp"===Mimg&&(mobImgX=200,mobImgY=300,cY=69,Maud1="wilo_att",Maud2="wilo_hit",Maud3="wilo_die",HL*=1.1,Mskill[2]="static field",Mskill[3]="energy bolt",ML=67),"a wolf"===Mimg&&(Maud1="wolf_att2",Maud2="wolf_hit2",Maud3="wolf_die2",BL=67),"an earth elemental"===Mimg&&(mobImgX=240,mobImgY=299,cX=114,cY=76,Maud1="elem_att3",Maud2="elem_hit3",Maud3="elem_die3",ML=67,wL=125,Mskill[3]="root",Mskill[4]="root",McastSpeed=500),"an evil eye round"===Mimg&&(mobImgX=200,mobImgY=512,cX=88,cY=95,Maud1="behdatt",Maud2="behldhit",Maud3="behddie",HL*=1.1,CL=67,Msilence=!0),"an ice giant"===Mimg&&(mobImgX=304,mobImgY=410,cX=161,cY=119,EL=380,Maud1="giantatt",Maud2="gianthit",Maud3="giantdie",MmaxHp*=1.6,BL=67,Mtype=2),"an imp"===Mimg&&(mobImgX=200,mobImgY=280,cX=114,cY=49,Maud1="imp_att",Maud2="imp_hit",Maud3="imp_die",TL=67,Mtype=1,Mskill[3]="fireball",Mskill[4]="fireball",McastSpeed=500),"an orc"===Mimg&&(mobImgX=200,mobImgY=266,cX=111,cY=90,Maud1="orc_att",Maud2="orc_hit",Maud3="orc_die",BL=67,Mtype=1,NL=1),"grimden"===Mimg&&(Maud1="orc_att",Maud2="orc_hit",Maud3="orc_die",BL=67,Mtype=1,NL=1),"avatar of fear"===Mimg&&(mobImgX=200,mobImgY=279,Maud1="cazt_att",$Maud2="cazt_hit",Maud3="cazt_die",Mtype=1,McastSpeed=500,hL*=1.2,CL=67,MmaxHp*=1.35,Msilence=!0),"garanel rucksif"===Mimg&&(mobImgX=200,mobImgY=244,cX=105,cY=110,Maud1="ghostatt",Maud2="ghosthit",Maud3="ghostdie",hL*=1.2,CL=67,Mtype=1),"a fire giant"===Mimg&&(mobImgX=348,mobImgY=426,cX=185,cY=148,Maud1="giantatt",Maud2="gianthit",Maud3="giantdie",MmaxHp*=1.6,TL=67,Mtype=2,EL=348),"a purple dragon"===Mimg&&(mobImgX=606,mobImgY=588,cX=285,cY=66,Maud1="drag_att",Maud2="drag_hit",Maud3="drag_die",MmaxHp*=3),"a red dragon"===Mimg&&(mobImgX=606,mobImgY=588,cX=285,cY=66,Maud1="drag_att",Maud2="drag_hit",Maud3="drag_die",hL*=1.6,MmaxHp*=3.4,TL=67,Mtype=3,HL*=2,AL=4,Mskill[1]="conflagration",Mskill[2]="conflagration",Mskill[3]="fireball",Mskill[4]="fear",EL=570),"a blue dragon"===Mimg&&(mobImgX=493,mobImgY=479,cX=254,cY=116,Maud1="drag_att",Maud2="dragfhit",Maud3="drag_die",hL*=1.5,MmaxHp*=3.4,BL=67,Mtype=3,EL=606,HL*=2,AL=4,Mskill[1]="blizzard",Mskill[2]="blizzard",Mskill[3]="ice shard",Mskill[4]="fear",MlayHands=!0),"phinigel autropos"===Mimg&&(mobImgX=647,mobImgY=540,cX=294,cY=157,Maud1="kedgeatt",Maud2="kedgehit",Maud3="kedgedie",hL*=1.5,MmaxHp*=3.2,ML=67,Mtype=3,EL=606,HL*=2.2,AL=3,Mskill[1]="engulfing darkness",Mskill[2]="static field",Mskill[3]="smite",Mskill[4]="energy bolt",jL=0,Msilence=!0),"maestro"===Mimg&&(mobImgX=396,mobImgY=586,cX=260,cY=165,Maud1="vampkatt",Maud2="vampkhit",Maud3="vampkdie",ML=125,Mtype=3,hL*=1.5,MmaxHp*=2.7,wL=67,Mdrain=!0),"dracoliche"===Mimg&&(mobImgX=629,mobImgY=396,cX=217,cY=268,Maud1="drsk_att",Maud2="drskhit",Maud3="drsk_die","Falzitherin"===pL&&(MmaxHp*=3.2)),"innoruuk"===Mimg&&(mobImgX=325,mobImgY=476,cX=165,cY=176,Maud1="inn_att",Maud2="inn_hit",Maud3="inn_die",Mtype=3,hL*=1.7,MmaxHp*=3,jL=0,MironMaiden=!0,AL=3,Mskill[1]="static field",Mskill[2]="engulfing darkness",Mskill[3]="smite",Mskill[4]="ice shard",Msilence=!0),"cazic"===Mimg&&(mobImgX=602,mobImgY=695,cX=261,cY=290,Maud1="cazt_att",Maud2="cazt_hit",Maud3="cazt_die",Mtype=3,hL*=1.6,MmaxHp*=3.8,zL=0,RL=0,Msilence=!0),"a bat"==Mimg&&(EL=500,mobImgX=600,mobImgY=500,cX=298,cY=151,Maud1="bat_att2",Maud2="bat_hit2",Maud3="bat_die2"),"a beetle"==Mimg&&(mobImgX=600,mobImgY=230,cX=300,cY=177,Maud1="beetle_att",Maud2="beetle_hit",Maud3="beetle_die"),"a blue goblin"==Mimg&&(EL=220,mobImgX=377,mobImgY=400,cX=183,cY=149,Maud1="goblin_att",Maud2="goblin_hit",Maud3="goblin_die"),"a brown spider"==Mimg&&(mobImgX=500,mobImgY=251,cX=249,cY=181,Maud1="spider_att",Maud2="spider_hit",Maud3="spider_die"),"a clay golem"==Mimg&&(EL="Guardian of Misery"===pL?455:350,mobImgX=455,mobImgY=600,cX=228,cY=158,Maud1="zombie_att",Maud2="zombie_hit",Maud3="zombie_die"),"a dark elf female plate"==Mimg&&(EL=210,mobImgX=223,mobImgY=400,cX=108,cY=119,Maud2="gethit3f",Maud3="death_fl"),"a dark elf female"==Mimg&&(EL=190,mobImgX=207,mobImgY=400,cX=106,cY=94,Maud2="gethit3f",Maud3="death_fl"),"braxxen"==Mimg&&(EL=320,mobImgX=470,mobImgY=600,cX=228,cY=173,Maud2="gethit3f",Maud3="death_fl"),"a dark elf matron"==Mimg&&(EL=280,mobImgX=287,mobImgY=400,cX=136,cY=120,Maud2="gethit3f",Maud3="death_fl"),"a dark elf male plate"==Mimg&&(EL=225,mobImgX=240,mobImgY=400,cX=137,cY=111),"a dark elf male"==Mimg&&(EL=190,mobImgX=203,mobImgY=400,cX=99,cY=104),"a dark skeleton"==Mimg&&(EL=175,mobImgX=240,mobImgY=503,cX=123,cY=114,Maud1="skeleton_att",Maud2="skeleton_hit",Maud3="skeleton_die"),"a dhampyre"==Mimg&&(EL=220,mobImgX=227,mobImgY=400,cX=117,cY=108,Maud1="dhampyre_att",Maud2="dhampyre_hit",Maud3="dhampyre_die"),"a faerie"==Mimg&&(EL=130,mobImgX=205,mobImgY=500,cX=101,cY=124,Maud1="fairy_att",Maud2="fairy_hit",Maud3="fairy_die"),"a female zombie"==Mimg&&(EL=160,mobImgX=176,mobImgY=400,cX=82,cY=99,Maud1="zombief_att",Maud2="zombief_hit",Maud3="zombief_die"),"a fire elemental"==Mimg&&(EL=300,mobImgX=358,mobImgY=400,cX=176,cY=140,Maud1="elem_att3",Maud2="elem_hit3",Maud3="elem_die3"),"an anuran"==Mimg&&(EL=290,mobImgX=370,mobImgY=282,cX=186,cY=127,Maud1="anuran_att",Maud2="anuran_hit",Maud3="anuran_die"),"a fungus"==Mimg&&(EL=320,mobImgX=386,mobImgY=400,cX=192,cY=175,Maud1="fungus_att",Maud2="fungus_hit",Maud3="fungus_die"),"a gargoyle"==Mimg&&(EL=430,mobImgX=479,mobImgY=550,cX=236,cY=116,Maud1="garg_att2",Maud2="garg_hit2",Maud3="garg_die2"),"a ghoul"==Mimg&&(mobImgX=442,mobImgY=400,cX=244,cY=91,Maud1="ghoul_att",Maud2="ghoul_hit",Maud3="ghoul_die"),"a gnoll"===Mimg&&(mobImgX=400,mobImgY=473,cX=205,cY=203,Maud1="gnoll_att",Maud2="gnoll_hit2",Maud3="gnoll_die"),"a gorilla"==Mimg&&(mobImgX=585,mobImgY=600,cX=293,cY=282,Maud1="gorilla_att",Maud2="gorilla_hit",Maud3="gorilla_die"),"a heart spider"==Mimg&&(mobImgX=500,mobImgY=266,cX=247,cY=171,Maud1="spider_att",Maud2="spider_hit",Maud3="spider_die"),"a human male"==Mimg&&(EL=170,mobImgX=224,mobImgY=500,cX=110,cY=121),"a human female"==Mimg&&(EL=165,mobImgX=223,mobImgY=500,cX=112,cY=115,Maud2="gethit3f",Maud3="death_fl"),"a jungle spider"==Mimg&&(EL=500,mobImgX=500,mobImgY=158,cX=251,cY=94,Maud1="spider_att",Maud2="spider_hit",Maud3="spider_die"),"a kobold"==Mimg&&(mobImgX=460,mobImgY=420,cX=220,cY=153,Maud1="kobold_att",Maud2="kobold_hit",Maud3="kobold_die"),"a lizardman"===Mimg&&(EL=400,mobImgX=501,mobImgY=400,cX=253,cY=134,Maud1="liz_att2",Maud2="liz_hit2",Maud3="liz_die2",Maud5="liz_cast"),"a male zombie"==Mimg&&(EL=190,mobImgX=210,mobImgY=400,cX=101,cY=91,Maud1="zombie_att",Maud2="zombie_hit",Maud3="zombie_die"),"a mummy"==Mimg&&(EL=250,mobImgX=324,mobImgY=500,cX=159,cY=157,Maud1="werewolf_att",Maud2="werewolf_hit",Maud3="werewolf_die"),"a rat"==Mimg&&("Flippy the Rat God"===pL?(EL=665,MmaxHp*=1.75):EL=350,mobImgX=465,mobImgY=200,cX=233,cY=127,Maud1="rat_att2",Maud2="rat_hit2",Maud3="rat_die2"),"a red goblin"==Mimg&&(EL=220,mobImgX=377,mobImgY=400,cX=183,cY=149,Maud1="goblin_att",Maud2="goblin_hit",Maud3="goblin_die"),"a shadowed man"==Mimg&&(EL=182,mobImgX=182,mobImgY=400,cX=87,cY=89),"a skeleton"==Mimg&&(EL=180,mobImgX=240,mobImgY=503,cX=123,cY=114,Maud1="skeleton_att",Maud2="skeleton_hit",Maud3="skeleton_die"),"a steel golem"==Mimg&&(EL="Guardian of Ruin"===pL?641:500,mobImgX=641,mobImgY=600,cX=317,cY=243,Maud1="zombie_att",Maud2="zombie_hit",Maud3="zombie_die"),"a stone golem"==Mimg&&(EL="Guardian of Strife"===pL?643:500,mobImgX=643,mobImgY=600,cX=322,cY=156,Maud1="zombie_att",Maud2="zombie_hit",Maud3="zombie_die"),"a terror"==Mimg&&(EL=480,mobImgX=582,mobImgY=400,cX=288,cY=200,Maud1="terror_att",Maud2="terror_hit",Maud3="terror_die"),"a vampire female"==Mimg&&(EL=193,mobImgX=193,mobImgY=400,cX=97,cY=100,Maud1="vampire_att",Maud2="vampire_hit",Maud3="vampire_die"),"a werewolf"==Mimg&&(EL=250,mobImgX=300,mobImgY=500,cX=157,cY=177,Maud1="werewolf_att",Maud2="werewolf_hit",Maud3="werewolf_die"),"a white spider"==Mimg&&(EL=500,mobImgX=500,mobImgY=209,cX=249,cY=118,Maud1="spider_att",Maud2="spider_hit",Maud3="spider_die"),"a white wolf"==Mimg&&(mobImgX=538,mobImgY=400,cX=285,cY=153,Maud1="wolf_att2",Maud2="wolf_hit2",Maud3="wolf_die2"),"a wisp"==Mimg&&(EL=250,mobImgX=331,mobImgY=500,cX=158,cY=128,Maud1="wisp_att",Maud2="wisp_hit",Maud3="wisp_die"),"a wolf"==Mimg&&(mobImgX=538,mobImgY=400,cX=387,cY=114,Maud1="wolf_att2",Maud2="wolf_hit2",Maud3="wolf_die2"),"an earth elemental"==Mimg&&(EL=300,mobImgX=346,mobImgY=400,cX=171,cY=98,Maud1="earth_att",Maud2="earth_hit",Maud3="earth_die"),"an evil eye round"==Mimg&&(EL=240,mobImgX=321,mobImgY=400,cX=162,cY=80,Maud1="wisp_att",Maud2="wisp_hit",Maud3="wisp_die"),"an ice giant"==Mimg&&(EL=528,mobImgX=528,mobImgY=600,cX=269,cY=160,Maud1="giant_att",Maud2="giant_hit",Maud3="giant_die"),"an imp"===Mimg&&(EL=320,mobImgX=385,mobImgY=500,cX=189,cY=99,Maud1="imp_att2",Maud2="imp_hit2",Maud3="imp_die2"),"an orc"===Mimg&&(EL+=60,mobImgX=382,mobImgY=400,cX=189,cY=112,Maud1="orc_att2",Maud2="orc_hit2",Maud3="orc_die2"),"grimden"===Mimg&&(EL=739,mobImgX=739,mobImgY=500,cX=367,cY=138,Maud1="orc_att2",Maud2="orc_hit2",Maud3="orc_die2"),"avatar of fear"===Mimg&&(EL=600,mobImgX=633,mobImgY=600,cX=329,cY=170,Maud1="avatar_att",Maud2="avatar_hit",Maud3="avatar_die"),"garanel rucksif"===Mimg&&(EL=500,mobImgX=597,mobImgY=600,cX=303,cY=175,Maud1="garanel_att",Maud2="garanel_hit",Maud3="garanel_die"),"a fire giant"===Mimg&&(EL=674,mobImgX=674,mobImgY=600,cX=339,cY=155,Maud1="giant_att",Maud2="giant_hit",Maud3="giant_die"),"a purple dragon"!==Mimg&&"a red dragon"!==Mimg&&"a blue dragon"!==Mimg||(EL="a purple dragon"===Mimg?940:1431,mobImgX=1431,mobImgY=550,cX=713,cY=132,Maud1="dragon_att",Maud2="dragon_hit",Maud3="dragon_die",Maud5="dragon_cast"),"phinigel autropos"===Mimg&&(EL=720,mobImgX=720,mobImgY=500,cX=358,cY=155,Maud1="viston_att",Maud2="viston_hit",Maud3="viston_die"),"maestro"===Mimg&&(EL=557,mobImgX=650,mobImgY=700,cX=310,cY=257,Maud1="vixen_att",Maud2="vixen_hit",Maud3="vixen_die"),"dracoliche"===Mimg&&(EL=1431,mobImgX=1431,mobImgY=550,cX=713,cY=132,Maud1="dragon_att",Maud2="dragon_hit",Maud3="dragon_die",Maud5="dragon_cast"),"innoruuk"===Mimg&&(EL=1100,mobImgX=1100,mobImgY=600,cX=550,cY=180,Maud1="innoruuk_att",Maud2="innoruuk_hit",Maud3="innoruuk_die"),"cazic"===Mimg&&(EL=1100,mobImgX=1186,mobImgY=700,cX=589,cY=235,Maud1="cazic_att",Maud2="cazic_hit",Maud3="cazic_die"),3===xL&&(1===zy.difficulty?Mxp*=3.2:2===zy.difficulty?Mxp*=3.4:Mxp*=3.6,McastSpeed=500,"Chief Grimden"===pL&&(BL=100,Mskill[1]="envenom",Mskill[2]="envenom",Mskill[3]="poison cloud",Mtype=3,hL*=1.3,MmaxHp*=2.6,AL=5),"Arcturin, the Lich King"===pL&&(Mskill[1]="ice shard",Mskill[2]="blizzard",Mskill[3]="blizzard",Mskill[4]="blizzard",Mtype=3,hL*=1.3,MmaxHp*=2.6,Msilence=!0,jL=0,AL=5),"Sentoth, Lord of Rapture"===pL&&(Mskill[1]="energy bolt",Mskill[2]="static field",Mskill[3]="static field",Mskill[4]="static field",Mtype=3,hL*=1.3,MmaxHp*=2.6,Mdrain=!0,AL=5),mobDauntless=!0,zy.difficulty>=2&&("Chief Grimden"===pL&&(mobPoisonEnchanted=!0,wL=67,Mbarrier=!0),"Arcturin, the Lich King"===pL&&(mobColdEnchanted=!0,Msanctuary=!0,Mpcold=67),"Sentoth, Lord of Rapture"===pL&&(mobLightningEnchanted=!0,MironMaiden=!0,ML=67),"Highlord Szarthax"===pL&&(mobFireEnchanted=!0,TL=67),"Matron Maelentia"===pL&&(mobColdEnchanted=!0,BL=67),"Revenant Viston"===pL&&(mobLightningEnchanted=!0,ML=67),"Falzitherin"===pL&&(mobPoisonEnchanted=!0,wL=67),"Vixen Sarmina"===pL&&(mobVampiric=!0),"Nalatos, God of Chaos"===pL&&(mobSummoner=!0),"Sanctum Guardian Ghalentus"===pL&&(mobConvictionAura=!0)),3===zy.difficulty&&("Chief Grimden"===pL&&(mobShreddingAura=!0),"Arcturin, the Lich King"===pL&&(mobLamprey=!0),"Sentoth, Lord of Rapture"===pL&&(mobCripplingAura=!0),"Highlord Szarthax"===pL&&(mobShreddingAura=!0),"Matron Maelentia"===pL&&(mobLamprey=!0),"Revenant Viston"===pL&&(mobConcussiveAura=!0),"Falzitherin"===pL&&(mobDisruptionAura=!0),"Vixen Sarmina"===pL&&(mobFrenzy=!0,Mflurry=!0),"Nalatos, God of Chaos"===pL&&(mobZealousAura=!0),"Sanctum Guardian Ghalentus"===pL&&(mobCripplingAura=!0))),!0===KI&&(MmaxHp*=5,Mxp=0),1===zy.difficulty?(monsterSpeed<2500*zy.speed&&(monsterSpeed=2500*zy.speed),McastSpeed<2e3&&(McastSpeed=2e3)):2===zy.difficulty?(monsterSpeed<2e3*zy.speed&&(monsterSpeed=2e3*zy.speed),McastSpeed<1750&&(McastSpeed=1750)):(monsterSpeed<1500*zy.speed&&(monsterSpeed=1500*zy.speed),McastSpeed<1500&&(McastSpeed=1500)),"Chief Grimden"===pL&&(McastSpeed=0),0===Mtype?DL=0:1===Mtype?DL+=dS.random()*(.75*gL):2===Mtype?DL+=dS.random()*(1.5*gL):DL+=dS.random()*(4.5*gL)+gL,0===xL)EL*=1.05,1===zy.difficulty?(MmaxHp*=2,Mxp*=1.2):2===zy.difficulty?(MmaxHp=~~(2.5*MmaxHp),Mxp*=1.4):(MmaxHp*=3,Mxp*=1.6),Mxp*=1.75;else{if(1===zy.difficulty)v=1/9;else if(2===zy.difficulty)v=1/5.3;else var v=.3125;1===zy.difficulty&&0===Wy[2].rare&&(v=0),!1===ya()&&(v=0),gL>20&&dS.random()<v&&3!==xL&&!1===KI&&(xL=2,1===zy.difficulty?(MmaxHp*=2.2,Mxp*=2.2):2===zy.difficulty?(MmaxHp*=2.6,Mxp*=2.4):(MmaxHp*=3.2,Mxp*=2.6),hL*=1.1,HL*=1.1,DL=2*DL+gL,zy.difficulty>=1&&t(),zy.difficulty>=2&&t(),3===zy.difficulty&&t())}jk=!0,gL<20&&AL<9&&(AL=9),1===zy.difficulty?(!0===mobChromatic&&(wL>67&&(wL=80),CL>67&&(CL=80),ML>67&&(ML=80),TL>67&&(TL=80),BL>67&&(BL=80)),3===xL&&(MmaxHp=~~(1.5*MmaxHp))):2===zy.difficulty?(67===IL&&(IL=58),67===wL&&(wL=50),67===CL&&(CL=50),67===ML&&(ML=50),67===BL&&(BL=50),67===TL&&(TL=50),!0===mobChromatic&&(wL>50&&(wL=67),CL>50&&(CL=67),ML>50&&(ML=67),TL>50&&(TL=67),BL>50&&(BL=67)),3===xL&&(MmaxHp=~~(2*MmaxHp))):3===zy.difficulty&&(67===IL&&(IL=50),67===wL&&(wL=33),67===CL&&(CL=33),67===ML&&(ML=33),67===BL&&(BL=33),67===TL&&(TL=33),!0===mobChromatic&&(wL>33&&(wL=50),CL>33&&(CL=50),ML>33&&(ML=50),TL>33&&(TL=50),BL>33&&(BL=50)),3===xL&&(MmaxHp=~~(3*MmaxHp))),gL<10&&(IL=100,wL=100,CL=100,ML=100,BL=100,TL=100),2===zy.difficulty?MmaxHp*=1.25:3===zy.difficulty&&(MmaxHp*=1.8),Mhp=MmaxHp,Mv(),3===xL&&(ci(!0),"Chief Grimden"===pL?Pa("The Dark Amulet (New)"):"Arcturin, the Lich King"===pL?Pa("Heroic Demise (2013 - With Choir)"):"Sentoth, Lord of Rapture"===pL?Pa("Dark Descent (Adventure Edit) from _Fatblade_"):"Revenant Viston"===pL?Pa("Blackmoor Colossus"):"Matron Maelentia"===pL?Pa("Heroic Demise (2013 - With Choir)"):"Highlord Szarthax"===pL?Pa("Arclight"):"Vixen Sarmina"===pL?Pa("The Dark Amulet (New)"):"Falzitherin"===pL?Pa("Dark Descent (Adventure Edit) from _Fatblade_"):"Sanctum Guardian Ghalentus"===pL?Pa("Blackmoor Colossus"):"Nalatos, God of Chaos"===pL&&Pa("Arclight")),Iv()}else wv(e,a)}function Cv(e){if(2===zy.difficulty){if(e<75){e+=a=~~((75-e)/2)}}else if(3===zy.difficulty&&e<94){var a=~~((94-e)/2);e+=a}return e}function Mv(a,n){if(function(){function e(){var a=~~(5*dS.random());Wy[a].name?e():Bk=a}var a=Ab();a>=5?Bk=!1:0===a?Bk=2:e()}(),!1!==Bk){fk=0;for(var t=Bk,i=!1,o=0;o<=4;o++)0===Wy[o].attackStatus&&(i=!0);!0===i?!1===KI&&(Wy[t].attackStatus=0,Wy[t].attack.kill(),Wy[t].attack=cS.delayedCall(.75,function(){_t(t)})):(bL=t,Wy[t].attackStatus=1,qw[t].style.color="#ffff00",mS.getElementById("mobShadow"+t).src="/classic/images1/mobShadowRed.png"),Gw[t].style.display="block",Wy[t].name=pL,Wy[t].level=gL,Wy[t].maxHp=~~MmaxHp,Wy[t].hp=~~Mhp,Wy[t].xp=~~Mxp,Wy[t].str=~~hL,Wy[t].def=~~IL,Wy[t].gold=dS.ceil(DL),Wy[t].type=Mtype,Wy[t].image=Mimg,Wy[t].rare=xL,Wy[t].skill1=Mskill[1],Wy[t].skill2=Mskill[2],Wy[t].skill3=Mskill[3],Wy[t].skill4=Mskill[4],Wy[t].castFreq=AL,Wy[t].poison=~~wL,Wy[t].magic=~~CL,Wy[t].lightning=~~ML,Wy[t].fire=~~TL,Wy[t].cold=~~BL,Wy[t].speed=~~monsterSpeed,Wy[t].castSpeed=~~McastSpeed,Wy[t].imageWidth=EL,Wy[t].intel=~~HL,Wy[t].mp=monsterMp,Wy[t].harmTouch=zL,Wy[t].rune=jL,Wy[t].skeleton=RL,Wy[t].wolf=NL,Wy[t].elemental=FL,Wy[t].thorns=GL,Wy[t].lavaShield=qL,Wy[t].silenceStatus=Msilence,Wy[t].silenced=!1,Wy[t].resolution=PL,Wy[t].enrageStatus=Menrage,Wy[t].ironMaidenStatus=MironMaiden,Wy[t].layHands=MlayHands,Wy[t].flurryStatus=Mflurry,Wy[t].ampMagicStatus=Mamp,Wy[t].sanctuaryStatus=Msanctuary,Wy[t].barrierStatus=Mbarrier,Wy[t].drainStatus=Mdrain,Wy[t].ID=~~Ky,Wy[t].enrageTimer.kill(),Wy[t].ironMaidenTimer.kill(),Wy[t].flurryTimer.kill(),Wy[t].ampMagicTimer.kill(),Wy[t].sanctuaryTimer.kill(),Wy[t].barrierTimer.kill(),Wy[t].enrage=!1,Wy[t].ironMaiden=!1,Wy[t].barrier=!1,Wy[t].sanctuary=!1,Wy[t].ampMagic=!1,Wy[t].flurry=!1,Wy[t].imageBaseX=mobImgX,Wy[t].imageBaseY=mobImgY,Wy[t].cX=cX,Wy[t].cY=cY,Wy[t].vicious=mobVicious,Wy[t].frenzy=mobFrenzy,Wy[t].juggernaut=mobJuggernaut,Wy[t].tough=mobTough,Wy[t].chromatic=mobChromatic,Wy[t].summoner=mobSummoner,Wy[t].sprinter=mobSprinter,Wy[t].vampiric=mobVampiric,Wy[t].lamprey=mobLamprey,Wy[t].fireEnchanted=mobFireEnchanted,Wy[t].coldEnchanted=mobColdEnchanted,Wy[t].lightningEnchanted=mobLightningEnchanted,Wy[t].poisonEnchanted=mobPoisonEnchanted,Wy[t].mobMartyr=mobMartyr,Wy[t].phased=mobPhased,Wy[t].dauntless=mobDauntless,Wy[t].cripplingAura=mobCripplingAura,Wy[t].disruptionAura=mobDisruptionAura,Wy[t].convictionAura=mobConvictionAura,Wy[t].concussiveAura=mobConcussiveAura,Wy[t].ensnaringAura=mobEnsnaringAura,Wy[t].zealousAura=mobZealousAura,Wy[t].shreddingAura=mobShreddingAura,Wy[t].audio1=Maud1,Wy[t].audio2=Maud2,Wy[t].audio3=Maud3,Wy[t].audio4=Maud4,Wy[t].audio5=Maud5,Wy[t].audio6=Maud6,RL=1,FL=1,NL=1;for(o=1;o<=6;o++)!function(e){for(var a=!1,n=0,t=YH.length;n<t;n++)"AUDIO"!==YH[n].nodeName||-1===YH[n].src.indexOf(e)||(a=!0);if(!1===a){var i=function(){KH>49&&(KH=0);return KH++}();YH[i]=mS.createElement("audio"),YH[i].src=YS+e+"."+SH}}(Wy[t]["audio"+o]);for(o=1;o<=4;o++)"poison cloud"===Mskill[o]?(vI[240+o+4*t]=new Image,vI[240+o+4*t].src="/classic/images1/greenparticle200.png"):"smite"===Mskill[o]?(vI[240+o+4*t]=new Image,vI[240+o+4*t].src="/classic/images1/magentaparticle200.png"):"energy bolt"===Mskill[o]?(vI[240+o+4*t]=new Image,vI[240+o+4*t].src="/classic/images1/yellowparticle200.png"):"ice shard"===Mskill[o]?(vI[240+o+4*t]=new Image,vI[240+o+4*t].src="/classic/images1/glacialSpike.png"):"fireball"===Mskill[o]&&(vI[240+o+4*t]=new Image,vI[240+o+4*t].src="/classic/images1/fireball.png");Wy[t].traits=function(e){var a="",n=1,t=Bk;Wy[e].vicious&&(a+="&nbsp;Vicious&nbsp;",n=0);Wy[e].frenzy&&(a+="&nbsp;Frenzied&nbsp;",n=0);Wy[e].juggernaut&&(a+="&nbsp;Juggernaut&nbsp;",n=0);Wy[e].tough&&(a+="&nbsp;Tough&nbsp;",n=0);Wy[e].chromatic&&(a+="&nbsp;Chromatic&nbsp;",n=0);Wy[e].summoner&&(a+="&nbsp;Summoner&nbsp;",n=0);Wy[e].sprinter&&(a+="&nbsp;Sprinter&nbsp;",n=0);Wy[e].vampiric&&(a+="&nbsp;Vampiric&nbsp;",n=0);Wy[e].lamprey&&(a+="&nbsp;Lamprey&nbsp;",n=0);Wy[e].fireEnchanted&&(a+="&nbsp;Fire Enchanted&nbsp;",n=0);Wy[e].coldEnchanted&&(a+="&nbsp;Cold Enchanted&nbsp;",n=0);Wy[e].lightningEnchanted&&(a+="&nbsp;Lightning Enchanted&nbsp;",n=0);Wy[e].poisonEnchanted&&(a+="&nbsp;Poison Enchanted&nbsp;",n=0);Wy[e].mobMartyr&&(a+="&nbsp;Martyr&nbsp;",n=0);Wy[e].phased&&(a+="&nbsp;Phased&nbsp;",n=0);Wy[e].dauntless&&(a+="&nbsp;Dauntless&nbsp;",n=0);Wy[e].cripplingAura&&(a+="&nbsp;Crippling Aura&nbsp;",n=0);Wy[e].disruptionAura&&(a+="&nbsp;Disruption Aura&nbsp;",n=0);Wy[e].convictionAura&&(a+="&nbsp;Conviction Aura&nbsp;",n=0);Wy[e].concussiveAura&&(a+="&nbsp;Concussive Aura&nbsp;",n=0);Wy[e].ensnaringAura&&(a+="&nbsp;Ensnaring Aura&nbsp;",n=0);Wy[e].zealousAura&&(a+="&nbsp;Zealous Aura&nbsp;",n=0);Wy[e].shreddingAura&&(a+="&nbsp;Shredding Aura&nbsp;",n=0);0==n&&(a+="<br>");Wy[t].def<100&&(a+="&nbsp;Physical Resistant&nbsp;".fontcolor("#ffffff"));Wy[t].poison<100&&(a+="&nbsp;Poison Resistant&nbsp;".fontcolor("#00ff00"));Wy[t].magic<100&&(a+="&nbsp;Magic Resistant&nbsp;".fontcolor("#ff00ff"));Wy[t].lightning<100&&(a+="&nbsp;Lightning Resistant&nbsp;".fontcolor("#ffff00"));Wy[t].cold<100&&(a+="&nbsp;Cold Resistant&nbsp;".fontcolor("#00ffff"));Wy[t].fire<100&&(a+="&nbsp;Fire Resistant&nbsp;".fontcolor("#ff0000"));Wy[t].def>100&&(a+="&nbsp;Physical Weakness&nbsp;".fontcolor("#ffffff"));Wy[t].poison>100&&(a+="&nbsp;Poison Weakness&nbsp;".fontcolor("#00ff00"));Wy[t].magic>100&&(a+="&nbsp;Magic Weakness&nbsp;".fontcolor("#ff00ff"));Wy[t].lightning>100&&(a+="&nbsp;Lightning Weakness&nbsp;".fontcolor("#ffff00"));Wy[t].cold>100&&(a+="&nbsp;Cold Weakness&nbsp;".fontcolor("#00ffff"));Wy[t].fire>100&&(a+="&nbsp;Fire Weakness&nbsp;".fontcolor("#ff0000"));return a}(t);var r=Wy[t].imageWidth/Wy[t].imageBaseX;Wy[t].cX=Wy[t].cX*r,Wy[t].cY=Wy[t].cY*r;var l=152+244*t-Wy[t].imageWidth/2,s=EL/Wy[t].imageBaseX,d=dS.round(Wy[t].imageBaseY*s);Wy[t].imageHeight=d,Fw[t].width=EL,Fw[t].height=d,Nw[t].removeAllChildren(),jw[t]=new uS.Bitmap("/classic/images1/"+Mimg+".png"),zw[t].poison=new uS.Bitmap("/classic/images1/"+Mimg+".png"),zw[t].magic=new uS.Bitmap("/classic/images1/"+Mimg+".png"),zw[t].lightning=new uS.Bitmap("/classic/images1/"+Mimg+".png"),zw[t].fire=new uS.Bitmap("/classic/images1/"+Mimg+".png"),zw[t].cold=new uS.Bitmap("/classic/images1/"+Mimg+".png"),jw[t].image.onload=function(){var e=jw[t].getBounds(),a=jw[t].image.width/2,n=jw[t].image.height/2,i=EL/2,o=d/2;jw[t].setTransform(i,o,s,s,0,0,0,a,n),zw[t].poison.setTransform(i,o,s,s,0,0,0,a,n),zw[t].magic.setTransform(i,o,s,s,0,0,0,a,n),zw[t].lightning.setTransform(i,o,s,s,0,0,0,a,n),zw[t].fire.setTransform(i,o,s,s,0,0,0,a,n),zw[t].cold.setTransform(i,o,s,s,0,0,0,a,n),jw[t].cache(e.x,e.y,e.width,e.height),zw[t].poison.cache(e.x,e.y,e.width,e.height),zw[t].magic.cache(e.x,e.y,e.width,e.height),zw[t].lightning.cache(e.x,e.y,e.width,e.height),zw[t].fire.cache(e.x,e.y,e.width,e.height),zw[t].cold.cache(e.x,e.y,e.width,e.height),zw[t].poison.alpha=0,zw[t].magic.alpha=0,zw[t].lightning.alpha=0,zw[t].fire.alpha=0,zw[t].cold.alpha=0,Nw[t].addChild(jw[t]),Nw[t].addChild(zw[t].poison),Nw[t].addChild(zw[t].magic),Nw[t].addChild(zw[t].lightning),Nw[t].addChild(zw[t].fire),Nw[t].addChild(zw[t].cold)};var c=268*dS.random()-300,m=ZS;cS.set(Gw[t],{scale:1,width:EL,height:d,left:l,bottom:m}),qw[t].style.fontSize="1.2em",qw[t].textContent=pL;var u=qw[t].offsetWidth,f=Gw[t].offsetWidth/2-u/2;qw[t].style.left=f+"px",e("#mobIcons"+t).empty(),cS.to(Gw[t],.5,{startAt:{opacity:0,left:l+(320*dS.random()-160)},left:l,opacity:1}),cS.to(Gw[t],.5,{startAt:{bottom:c},bottom:m,force3D:"auto",ease:pS.Bout}),Wy[t].phased?cS.set(Fw[t],{scale:1,rotationY:180*~~(2*dS.random()),opacity:.5}):cS.set(Fw[t],{scale:1,rotationY:180*~~(2*dS.random()),opacity:1}),ny(),2===sa()&&(Wy[t].xp=~~(1.15*Wy[t].xp)),Wy[t].name&&e.ajax({url:"/classic/php/game1.php",data:{run:"setMob",name:Wy[t].name,Slot:t,exp:Wy[t].xp,gold:Wy[t].gold}}).fail(function(e){Tv()})}}function Tv(){fa("SERVER ERROR: Cannot contact the server",1),cS.pauseAll(),v(function(){Tn()},5e3)}function Bv(e){var a=0,n=0,t=Wy[e].image;if(5===e){t=PD;a-=50}if("a lizardman"===t&&(n+=116,a+=229),"an orc"===t&&(n+=52,a+=240),"a gnoll"===t&&(n+=61,a+=260),"a kobold"===t&&(n+=103,a+=236),"a purple dragon"===t&&(n+=714,a+=418),"a red dragon"===t&&(n+=714,a+=418),"a blue dragon"===t&&(n+=714,a+=418),"dracoliche"===t&&(n+=714,a+=418),"an anuran"===t&&(n+=53,a+=133),"a skeleton"===t&&(n+=63,a+=256),"a dark skeleton"===t&&(n+=63,a+=256),"a male zombie"===t&&(n+=21,a+=207),"a female zombie"===t&&(n+=24,a+=212),"garanel rucksif"===t&&(n+=200,a+=296),"a dark elf male plate"===t&&(n+=63,a+=220),"a dark elf male"===t&&(n+=21,a+=215),"a dark elf female"===t&&(n+=20,a+=257),"a dark elf female plate"===t&&(n+=24,a+=275),"a dark elf matron"===t&&(n+=104,a+=194),"a vampire female"===t&&(n+=14,a+=337),"a dhampyre"===t&&(n+=44,a+=230),"phinigel autropos"===t&&(n+=247,a+=300),"a red goblin"===t&&(n+=48,a+=216),"a blue goblin"===t&&(n+=49,a+=216),"braxxen"===t&&(n+=86,a+=361),"an ice giant"===t&&(n+=62,a+=368),"cazic"===t&&(n+=388,a+=362),"innoruuk"===t&&(n+=417,a+=335),"maestro"===t&&(n+=213,a+=371),"a faerie"===t&&(n+=62,a+=390),"grimden"===t&&(n+=256,a+=253),"an evil eye round"===t&&(n+=160,a+=320),"a gargoyle"===t&&(n+=160,a+=365),"an imp"===t&&(n+=128,a+=361),"a mummy"===t&&(n+=69,a+=240),"a human female"===t&&(n+=27,a+=279),"a human male"===t&&(n+=27,a+=254),"a stone golem"===t&&(n+=71,a+=225),"a shadowed man"===t&&(n+=21,a+=198),"avatar of fear"===t&&(n+=208,a+=358),"a steel golem"===t&&(n+=159,a+=271),"a werewolf"===t&&(n+=113,a+=263),"a clay golem"===t&&(n+=103,a+=321),"a fungus"===t&&(n+=100,a+=147),"a fire giant"===t&&(n+=94,a+=305),"a beetle"===t&&(n+=300,a+=50),"a bat"===t&&(n+=298,a+=348),"a brown spider"===t&&(n+=250,a+=68),"a jungle spider"===t&&(n+=250,a+=63),"a heart spider"===t&&(n+=246,a+=105),"a ghoul"===t&&(n+=119,a+=275),"a white spider"===t&&(n+=249,a+=89),"a gorilla"===t&&(n+=170,a+=145),"a rat"===t&&(n+=233,a+=69),"a wisp"===t&&(n+=61,a+=382),"a terror"===t&&(n+=135,a+=201),"a white wolf"===t&&(n+=385,a+=286),"a wolf"===t&&(n+=385,a+=286),"an earth elemental"===t&&(n+=60,a+=253),"a fire elemental"===t&&(n+=71,a+=205),5!==e){var i=Wy[e].imageWidth/Wy[e].imageBaseX,o=Wy[e].imageHeight/Wy[e].imageBaseY;n=dS.ceil(n*i),a=dS.ceil(a*o)}else n=Gw[5].offsetLeft+lL/2,a=497-Gw[5].offsetTop-100;return[n,a]}function Dv(e){var a=0,n=0,t=Wy[e].image;if(5===e&&(t=PD,a-=50),"a lizardman"===t&&(n+=397,a+=231),"an orc"===t&&(n+=334,a+=195),"a gnoll"===t&&(n+=351,a+=251),"a kobold"===t&&(n+=373,a+=241),"a purple dragon"===t&&(n+=714,a+=418),"a red dragon"===t&&(n+=714,a+=418),"a blue dragon"===t&&(n+=714,a+=418),"dracoliche"===t&&(n+=714,a+=418),"an anuran"===t&&(n+=322,a+=133),"a skeleton"===t&&(n+=190,a+=266),"a dark skeleton"===t&&(n+=190,a+=266),"a male zombie"===t&&(n+=179,a+=211),"a female zombie"===t&&(n+=150,a+=218),"garanel rucksif"===t&&(n+=415,a+=299),"a dark elf male plate"===t&&(n+=198,a+=207),"a dark elf male"===t&&(n+=179,a+=234),"a dark elf female"===t&&(n+=186,a+=242),"a dark elf female plate"===t&&(n+=196,a+=266),"a dark elf matron"===t&&(n+=245,a+=342),"a vampire female"===t&&(n+=165,a+=346),"a dhampyre"===t&&(n+=186,a+=228),"phinigel autropos"===t&&(n+=450,a+=295),"a red goblin"===t&&(n+=345,a+=237),"a blue goblin"===t&&(n+=345,a+=237),"braxxen"===t&&(n+=362,a+=444),"an ice giant"===t&&(n+=461,a+=337),"cazic"===t&&(n+=781,a+=356),"innoruuk"===t&&(n+=726,a+=334),"maestro"===t&&(n+=460,a+=368),"a faerie"===t&&(n+=145,a+=387),"grimden"===t&&(n+=508,a+=255),"an evil eye round"===t&&(n+=160,a+=320),"a gargoyle"===t&&(n+=311,a+=365),"an imp"===t&&(n+=246,a+=369),"a mummy"===t&&(n+=269,a+=222),"a human female"===t&&(n+=194,a+=280),"a human male"===t&&(n+=187,a+=255),"a stone golem"===t&&(n+=567,a+=224),"a shadowed man"===t&&(n+=152,a+=200),"avatar of fear"===t&&(n+=461,a+=413),"a steel golem"===t&&(n+=528,a+=272),"a werewolf"===t&&(n+=256,a+=239),"a clay golem"===t&&(n+=370,a+=321),"a fungus"===t&&(n+=285,a+=145),"a fire giant"===t&&(n+=579,a+=302),"a beetle"===t&&(n+=300,a+=50),"a bat"===t&&(n+=298,a+=347),"a brown spider"===t&&(n+=250,a+=68),"a jungle spider"===t&&(n+=250,a+=63),"a heart spider"===t&&(n+=246,a+=105),"a ghoul"===t&&(n+=382,a+=263),"a white spider"===t&&(n+=249,a+=89),"a gorilla"===t&&(n+=439,a+=140),"a rat"===t&&(n+=233,a+=69),"a wisp"===t&&(n+=257,a+=377),"a terror"===t&&(n+=517,a+=206),"a white wolf"===t&&(n+=385,a+=286),"a wolf"===t&&(n+=385,a+=286),"an earth elemental"===t&&(n+=275,a+=244),"a fire elemental"===t&&(n+=275,a+=206),5!==e){var i=Wy[e].imageWidth/Wy[e].imageBaseX,o=Wy[e].imageHeight/Wy[e].imageBaseY;n=dS.ceil(n*i),a=dS.ceil(a*o)}else n=Gw[5].offsetLeft+lL/2,a=497-Gw[5].offsetTop-100;return[n,a]}function Lv(e,a){var n;Yy.level;return Yy.level>=1&&Yy.level<20?(a<Yy.level-10&&(n="grey"),a>=Yy.level-10&&a<Yy.level-4&&(n="darkgreen"),a>=Yy.level-4&&a<Yy.level-2&&(n="lightBlue"),a>=Yy.level-2&&a<Yy.level&&(n="blue4"),a==Yy.level&&(n="white"),a>Yy.level&&a<=Yy.level+2&&(n="yellow2"),a>Yy.level+2&&(n="red2",a="?")):(a<dS.round(.4*Yy.level)&&(n="grey"),a>=dS.round(.4*Yy.level)&&a<.6*Yy.level&&(n="darkgreen"),a>=dS.round(.6*Yy.level)&&a<.8*Yy.level&&(n="lightBlue"),a>=.8*Yy.level&&a<Yy.level&&(n="blue4"),a==Yy.level&&(n="white"),a>Yy.level&&a<=Yy.level+2&&(n="yellow2"),a>Yy.level+2&&(n="red2",a="?")),e="<span class='"+n+" mouse'>"+e+"</span>",a=(a+"").fontcolor(n),e}function Hv(e){v(function(){var a=n.getElementById("qind"+e);null!==a&&i.fromTo(a,.35,{color:"#fc0"},{color:"#fff",repeat:20,yoyo:!0,onComplete:function(){i.to(a,.5,{color:"#fff"})}})},0)}function Av(a,n,t){function i(e,a){a&&a!==1*Pn()||(f=e)}function o(e,a){return a&&a!==1*Pn()||(h+=e),e}if(t||1!==hw){cS.set("#QindicatorWrap",{opacity:1});var r="#ffd700",l="#ffffff",s=zy.difficulty-1,d="",c="",m="",u="",f="",h="",g=qn(),p=Pn();qmsg="";var b="",v=0;2===zy.difficulty&&(v=25),3===zy.difficulty&&(v=44);var y=!1;if(bS.Q[s].GreaterFaydark<4&&(m="Salubrin Forest",u="Orcish Marauders",bS.Q[s].GreaterFaydark<=1&&(d+="<div class='questZones'>"+m+"</div><div class='QT'>"+Lv(u,Cv(2+v))+"</div>"),2===bS.Q[s].GreaterFaydark&&(d+="<div class='questZones'>"+m+"</div><div class='QT'>"+Lv(u,Cv(3+v))+"</div>"),3===bS.Q[s].GreaterFaydark&&(d+="<div class='questZones'>"+m+"</div><div class='QT'>"+Lv(u,Cv(4+v))+"</div>"),(g===m||"Edenburg"===g)&&a===E||a===u&&!1===y)){if(bS.Q[s].GreaterFaydark<2){i(u);!0===HS&&("Tapping","tap"),0===bS.Q[s].GreaterFaydark?(b=N("Miranda: ")+"Hail and well met, "+Yy.name+". My name is Miranda Crossheart, Commander of the Edenburg Recruit Detachment. So you are here to make something of yourself here in Vandamor, eh?<br><br>My job is to ensure that even an ordinary "+Yy.race.toLowerCase()+" like yourself succeeds in that task. There is plenty of busy work around here that doesn't include carrying around a clipboard.<br><br>The best way to learn how to swim is by jumping into a river, so here's your first mission!<br><br>Our scouts have reported that a group of orc marauders are terrorizing the perimeter of the city. Proceed to "+N("Salubrin Forest")+" and eliminate the orcs! Be sure to test out all of your skills in combat so you know what you're doing.",QL.edenburg1||(g!==m||0!==p)&&"Edenburg"!==g||(QL.edenburg1=1,Ry(b)),"Edenburg"===g&&Fy(),bS.Q[s].GreaterFaydark=1,gS.quests()):(b=N("Miranda: ")+"Alright, "+Yy.name+". Time to warm up by killing off these worthless orc vermin. I hope you remember something useful from our weeks of intense combat training.<br><br>If things don't go your way, you can always run back to Edenburg with your tail between your legs. Or you could make Edenburg proud and crush these pesky orcs. The choice is yours!",QL.salubrin1||(g!==m||0!==p)&&"Edenburg"!==g||(QL.salubrin1=1,Ry(b))),c=b+"<br><br>Slay four "+"orc pawns".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].GF1+"/4 orc pawns slain</i>")}3===bS.Q[s].GreaterFaydark&&(i(u),b=N("Miranda: ")+"By the Light of Venova, maybe I'm not wasting my time with you after all, "+Yy.name+". You sent those orcs runnin' to the hills!<br><br>That's some fine work for a recruit that just learned how to put their diapers on. Most of my recruits come limping back with excuses, so this is refreshing. Demonstrate that you can finish the job and pursue these orcs to their rallying point.<br><br>Our intel reports indicate that these orcs are from Lanfeld Outpost, commanded by Chief Grimden. I am truly amazed that a pack of dim-witted orcs managed to lumber their way here from Lanfeld Outpost.<br><br>Orcs aren't exactly known for their expeditionary activities. Something out of the ordinary is going on here. This is the most aggressive orc incursion in centuries, but what does it mean?<br><br>Search and destroy the remaining orcs in Salubrin Forest. From there we'll plan our counter-attack on Lanfeld Outpost.",QL.salubrin3||(g!==m||0!==p)&&"Edenburg"!==g||(QL.salubrin3=1,Ry(b)),c=b+"<br><br>Slay 10 "+"orcs".fontcolor(r)+".<br><br>",c+=o('<i id="qind1">'+bS.Q[s].GF1+"/10 orcs slain</i><br><br>"),"Rare Weapon".fontcolor("#cccc52")),y=!0}if(bS.Q[s].LesserFaydark<2&&bS.Q[s].GreaterFaydark>=4&&(m="Tendolin Meadows",u="Pixie Problems",bS.Q[s].LesserFaydark<=1&&(d+="<div class='questZones'>"+m+"</div><div class='QT'>"+Lv(u,Cv(4+v))+"</div>"),((g===m||"Edenburg"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].LesserFaydark<2&&(i(u),bS.Q[s].LesserFaydark=1,b=N("Miranda: ")+"Well done, "+Yy.name+". That was commendable work for such an ordinary "+Yy.race.toLowerCase()+" like yourself. I knew the indoc sergeants were wrong about you! I suspected there was at least a remote chance you would amount to something.<br><br>",0===Yy.deaths?b+="It looks like you haven't died so far. Great job! The problem with success is that you get rewarded with more work to do, so here's your next mission!<br><br>":b+="It looks like you have died "+Yy.deaths+" time so far. You might want to be more careful out there. Nevertheless, here is your next mission.<br><br>",b+="Our latest intel reports that a spy network of pixies are working with the orcs. They found Lanfeld insignia left behind at their hiding spots.<br><br>I suspect they are supplying information to the orcs which would explain the recent ambushes on traveling merchants. Scout out "+N("Tendolin Meadows")+" and eliminate the pixies at once.",QL.tendolin1||(g!==m||0!==p)&&"Edenburg"!==g||(QL.tendolin1=1,Ry(b)),c=b+"<br><br>Slay 10 "+"pixie tricksters".fontcolor(r)+" and 5 "+"pixie pranksters".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].LF1+"/10 pixie tricksters slain</i><br>"),c+=o("<i id='qind2'>"+bS.Q[s].LF2+"/5 pixie pranksters slain</i>")),y=!0)),bS.Q[s].Blackburrow<4&&bS.Q[s].LesserFaydark>=2&&(m="Greenthorn Cavern",u="Viceroy's Ledge",bS.Q[s].Blackburrow<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(8+v))+"</div>"),2===bS.Q[s].Blackburrow&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(10+v))+"</div>"),3===bS.Q[s].Blackburrow&&(d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(12+v))+"</div>"),((g===m||"Edenburg"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].Blackburrow<2&&(i(u,1),bS.Q[s].Blackburrow=1,b=N("Miranda: ")+"Alright, "+Yy.name+", you've done a fine job securing Edenburg's perimeter. Let's proceed toward Lanfeld Outpost and execute our counter-attack. The only way there from here is through Greenthorn Cavern.<br><br>Hostile gnolls inhabit the cavern, so making your way through in one piece won't be easy. The first part is simple. Scout out "+N("Greenthorn Cavern")+" and eliminate the gnolls guarding the entrance.",QL.greenthorn1||(g!==m||1!==p)&&"Edenburg"!==g||(QL.greenthorn1=1,Ry(b)),c=b+"<br><br>Slay 8 "+"gnoll pups".fontcolor(r)+", 6 "+"scrawny gnolls".fontcolor(r)+", and 4 "+"gnoll scouts".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].BB1+"/8 gnoll pups slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].BB2+"/6 scrawny gnolls slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].BB3+"/4 gnoll scouts slain</i><br>",1)),2===bS.Q[s].Blackburrow&&(i(u,2),b=N("Miranda: ")+"Stellar work, but there's no time to rest now, "+Yy.name+". Continue to the bridge where Furrpaw Barxen performs combat training.<br><br>The gnolls you'll encounter there are a cut above the hapless whelps you handled at the entrance of the cavern, so don't expect a walk through the park this time.",QL.greenthorn2||(g!==m||2!==p)&&"Edenburg"!==g||(QL.greenthorn2=1,Ry(b)),c=b+"<br><br>Slay 8 "+"gnoll shamans".fontcolor(r)+", 8 "+"patrolling gnolls".fontcolor(r)+", 6 "+"gnoll sergeants".fontcolor(r)+", and "+"Furrpaw Barxen".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].BB1+"/8 gnoll shamans slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].BB2+"/8 patrolling gnolls slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].BB3+"/6 gnoll sergeants slain</i><br>",2),0===bS.Q[s].BB4?c+=o("Slay Furrpaw Barxen",2):c+=o("Furrpaw Barxen slain",2)),3===bS.Q[s].Blackburrow&&(i(u,3),b=N("Miranda: ")+"Okay, "+Yy.name+", you're in for a real challenge this time. Viceroy Tanaden's command ledge blocks the exit to the cavern, so you will have to eliminate his guards and Tanaden to proceed further.<br><br>His cadre of guards, tacticians, and commanders are no pushovers, so I wouldn't be surprised to hear of your untimely demise. Don't disappoint me, "+Yy.name+". I just told my commanding officer that you're no ordinary "+Yy.race.toLowerCase()+". Don't prove me wrong.",QL.greenthorn3||(g!==m||3!==p)&&"Edenburg"!==g||(QL.greenthorn3=1,Ry(b)),c=b+"<br><br>Slay 12 "+"elite gnoll guards".fontcolor(r)+", 8 "+"gnoll tacticians".fontcolor(r)+", 4 "+"gnoll commanders".fontcolor(r)+", and "+"Viceroy Tanaden".fontcolor(r)+" himself.<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].BB1+"/12 elite gnoll guards slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].BB2+"/8 gnoll tacticians slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].BB3+"/4 gnoll commanders slain</i><br>",3),0===bS.Q[s].BB4?c+=o("Slay Viceroy Tanaden",3):c+=o("Viceroy Tanaden slain",3)),y=!0)),bS.Q[s].Befallen<4&&bS.Q[s].Blackburrow>=4&&(m="Riven Grotto",u="Under the River",bS.Q[s].Befallen<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(13+v))+"</div>"),2===bS.Q[s].Befallen&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(15+v))+"</div>"),3===bS.Q[s].Befallen&&(d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(16+v))+"</div>"),((g===m||"Edenburg"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].Befallen<2&&(i(u,1),bS.Q[s].Befallen=1,b=N("Miranda: ")+"Outstanding, "+Yy.name+"! I'd almost wager you have some talent for this line of business.<br><br>",Zv()>0?b+="Speaking of talents, I see that you have some talent points to allocate. Open the Talent Tab on the Character Statistics Window to train your skills. You get a new skill point each time you level up, so don't forget!<br><br>":b+="Speaking of talents, I see that you allocated your talent points, so it seems you already know what you're doing. You're one of the sharpest recruits to come through our detachment in a while.<br><br>",b+="Now, in order to exact revenge at Lanfeld Outpost there's one last obstacle in our way: the Holomir River. Did you bring a bridge with you? If not you're going to have to use the underground passage in "+N("Riven Grotto")+".<br><br>In any case, I'm sure a scrappy "+Yy.race.toLowerCase()+" like yourself would prefer the adventurous route. The good news is you get to crack some skulls as the grotto is packed to the brim with undead and practitioners of forbidden magic.<br><br>The entrance is lightly guarded by necromancer initiates and their pets. Deal with them first and then you can continue through the grotto.",QL.grotto1||(g!==m||1!==p)&&"Edenburg"!==g||(QL.grotto1=1,Ry(b)),c=b+"<br><br>Slay 6 "+"necro neophytes".fontcolor(r)+", 6 "+"necro initiates".fontcolor(r)+", and 6 "+"dread bones".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].BF1+"/6 necro neophytes slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].BF2+"/6 necro initiates slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].BF3+"/6 dread bones slain</i><br>",1)),2===bS.Q[s].Befallen&&(i(u,2),b=N("Miranda: ")+"Did you see how scared they were, "+Yy.name+"? You really reformed those dregs. I'm proud of you. I don't think I could have done it better myself. That'll teach them to dabble in forbidden magic. These outcasts have no respect for the law!<br><br>Take care to show them no mercy as their blasphemy threatens the foundation of Edenburg. Proceed to their central chamber where Dark Priest Nymda leads their ritualistic ceremonies to their dark lord.<br><br>Be prepared to face a varied assortment of undead horrors which have been re-animated using their ghastly techniques. As an added bonus, once they are eliminated we can make our way to the exit.",QL.grotto2||(g!==m||2!==p)&&"Edenburg"!==g||(QL.grotto2=1,Ry(b)),c=b+"<br><br>Slay 8 "+"ice boned skeletons".fontcolor(r)+", 8 "+"necro acolytes".fontcolor(r)+", 5 "+"ghouls".fontcolor(r)+", and "+"Dark Priest Nymda".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].BF1+"/8 ice boned skeletons slain</i><br>",2),c+=o("<i id='qind1'>"+bS.Q[s].BF2+"/8 necro acolytes slain</i><br>",2),c+=o("<i id='qind1'>"+bS.Q[s].BF3+"/5 ghouls slain</i><br>",2),0===bS.Q[s].BF4?c+=o("Slay Dark Priest Nymda",2):c+=o("Dark Priest Nymda slain",2)),3===bS.Q[s].Befallen&&(i(u,3),b=N("Miranda: ")+"You've managed to reach the surface, but it appears to be an ambush! It seems that the Black Seer knew you were coming and positioned his undead army surrounding the exit. You must eliminate his entourage and then kill the Black Seer.<br><br>Be wary that he is a powerful wizard so take heed when you battle him. Use all measures available to shut down his magical abilities. Many skills have the ability to stun or interrupt your target. Use them wisely to ensure victory!",QL.grotto3||(g!==m||3!==p)&&"Edenburg"!==g||(QL.grotto3=1,Ry(b)),c=b+"<br><br>Slay 9 "+"elf skeletons".fontcolor(r)+", 7 "+"burnt zombie".fontcolor(r)+", 7 "+"dread corpses".fontcolor(r)+", and "+"The Black Seer".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].BF1+"/9 elf skeletons slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].BF2+"/7 burnt zombies slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].BF3+"/7 dread corpses slain</i><br>",3),0===bS.Q[s].BF4?c+=o("Slay The Black Seer",3):c+=o("The Black Seer slain",3)),y=!0)),bS.Q[s].Crushbone<5&&!bS.Q[s].repeatCB&&bS.Q[s].Befallen>=4&&(m="Lanfeld Outpost",u="Grimden's Gambit",bS.Q[s].Crushbone<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(17+v))+"</div>"),2===bS.Q[s].Crushbone&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(18+v))+"</div>"),3===bS.Q[s].Crushbone&&(d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(20+v))+"</div>"),4===bS.Q[s].Crushbone&&(d+="<div class='questZones'>"+m+" 3 (repeatable)</div><div class='QT'>"+Lv(u,Cv(20+v))+"</div>"),((g===m||"Edenburg"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].Crushbone<2&&(i(u,1),bS.Q[s].Crushbone=1,b=N("Miranda: ")+"At last you have made it to Lanfeld Outpost. It's time to give Chief Grimden a taste of his own medicine. Grimden has something up his sleeve. I just don't trust him.<br><br>Their recent hostility is unusual, even for orcs. Proceed to the entrance where you will find low-ranking orcs guarding the perimeter. Give them a taste of their own medicine!.",QL.lanfeld1||(g!==m||1!==p)&&"Edenburg"!==g||(QL.lanfeld1=1,Ry(b)),c=b+"<br><br>Slay 8 "+"orc pawns".fontcolor(r)+", 4 "+"orc centurions".fontcolor(r)+", and 4 "+"orc slavers".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CB1+"/8 orc pawns slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].CB2+"/4 orc centurions slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].CB3+"/4 orc slavers slain</i><br>",1)),2===bS.Q[s].Crushbone&&(i(u,2),b=N("Miranda: ")+"You are within striking distance of Chief Grimden. His post lies at the top of Lanfeld hill. A well-trained phalanx of orc guards block your way to the top of the hill. Strike them down and make haste for Grimden's command post!",QL.lanfeld2||(g!==m||2!==p)&&"Edenburg"!==g||(QL.lanfeld2=1,Ry(b)),c=b+"<br><br>Slay 7 "+"orc oracles".fontcolor(r)+", 7 "+"orc legionnaires".fontcolor(r)+", 7 "+"orc lookouts".fontcolor(r)+", and the "+"orc warlord".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CB1+"/7 orc oracles slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].CB2+"/7 orc legionnaires slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].CB3+"/7 orc lookouts slain</i><br>",2),0===bS.Q[s].CB4?c+=o("Slay the orc warlord",2):c+=o("The orc warlord has been slain",2)),bS.Q[s].Crushbone>=3&&(i(u,3),b=N("Miranda: ")+"Phenomenal work, "+Yy.name+"! You have reached Grimden's command post! He is closely guarded by his most trusted orcs, including the royal guard and his emissaries. Eliminate them and then kill Chief Grimden. Edenburg will tremble in fear no longer.",QL.lanfeld3||3!==bS.Q[s].Crushbone||(g!==m||3!==p)&&"Edenburg"!==g||(QL.lanfeld3=1,Ry(b)),c=b+"<br><br>Slay 10 "+"orc scoutsmen".fontcolor(r)+", 8 "+"orc royal guards".fontcolor(r)+", 6 "+"orc emissaries".fontcolor(r)+",  and "+"Chief Grimden".fontcolor(r)+". <br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CB1+"/10 orc scoutsmen slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].CB2+"/8 orc royal guards slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].CB3+"/6 orc emissaries slain</i><br>",3),0===bS.Q[s].CB5?c+=o("Slay Chief Grimden",3):c+=o("Chief Grimden slain",3)),y=!0)),bS.Q[s].Najena<4&&bS.Q[s].Crushbone>=4&&(m="Braxxen's Bastille",u="Vigilante Justice",bS.Q[s].Najena<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(21+v))+"</div>"),2===bS.Q[s].Najena&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(22+v))+"</div>"),3===bS.Q[s].Najena&&(d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(24+v))+"</div>"),((g===m||"Aspen Grove"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].Najena<2&&(i(u,1),0===bS.Q[s].Najena?(b=N("Rendo: ")+"Oh, my goodness! A visitor? Here in Aspen Grove. This is unexpected. Hardly anyone comes to visit here these days. Well, I mean, I have people that visit. Just not often from strangers.<br><br>What brings you to Aspen Grove? The booming tourism industry? The exotic flora and fauna? What? Oh! Miranda Crossheart sent you to me? Heh! Well! That is something!<br><br>Oh, my manners, I haven't even introduced myself. I am Rendo Surefoot of Rinara's Preservation Guild. We are simple folk that study the planet's life force! Are you here to talk about the life force?!<br><br>Er? Wait, what is this?! An Idol of Chaos?! Oh Rinara above, the elders were right, again. They sensed a disturbance in the life force and this must be related. Of course! It's all starting to make sense now.<br><br>This isn't any ordinary Idol. This is an artifact enchanted by Nalatos, the God of Chaos, himself. This signifies his return to Vandamor.<br><br>He must physically remain in his realm, but he selects agents to sow his seeds of chaos throughout the land and empowers them with these Idols. The Idols fill their owner full of strength and malice. Perfect traits to perform Nalatos's dirty work!<br><br>We should probably do something about all of this! Well, you should. I am going to stay right here where it's safe.<br><br>Nalatos could have given an Idol to almost anyone. Our best bet is investigating any unusual activity. In fact there have been some strange happenings over at Arcturin's Crypt.<br><br>Arcturin is known to many as a famous war hero. Sadly he was raised from the dead and seen raising other undead under his command. Quite tragic. My halfling instincts tell me that he was given an Idol, too!<br><br>There's only one way to find out. You'll need to cross a mountain passage blocked by Braxxen's Bastille, a compound where Braxxen's motley henchmen run their black operations. That's a very dangerous place though. Do you think you can make it through?!",QL.aspen1||(g!==m||1!==p)&&"Aspen Grove"!==g||(QL.aspen1=1,Ry(b)),"Aspen Grove"===g&&Fy(),bS.Q[s].Najena=1):(b=N("Rendo: ")+"Braxxen will hire anyone with a heart full of evil. Her henchmen are known for every brand of jackbooted thuggery you can think of! Slavery, torture, organ harvesting, and even magical experiments.<br><br>It's dreadful. Just last week Aspen Grove's mayor had his cousin go missing. Officials have been too scared to investigate due to fear of retaliation.<br><br>I think you are quite brave to go there at all. Anurans, skeletons, and goblins crowd the entrance. Good luck!",QL.braxxen1||(g!==m||1!==p)&&"Aspen Grove"!==g||(QL.braxxen1=1,Ry(b))),c=b+"<br><br>Slay 10 "+"goblin warriors".fontcolor(r)+", 6 "+"greater skeletons".fontcolor(r)+", 4 "+"anuran guards".fontcolor(r)+", and "+"Grippywor".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].NJ1+"/10 goblin warriors slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].NJ2+"/6 greater skeletons slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].NJ3+"/4 anuran guards slain</i><br>",1),0===bS.Q[s].NJ4?c+=o("Slay Grippywor",1):c+=o("Grippywor slain",1)),2===bS.Q[s].Najena&&(i(u,2),b=N("Rendo: ")+"Yikes! I think you have their attention now! Braxxen's enforcers now block your path in the central torture chamber! Please take great care that you don't end up another of Braxxen's missing victims...",QL.braxxen2||(g!==m||2!==p)&&"Aspen Grove"!==g||(QL.braxxen2=1,Ry(b)),c=b+"<br><br>Slay 10 "+"goblin officers".fontcolor(r)+", 8 "+"necromancers".fontcolor(r)+", 6 "+"anuran torturers".fontcolor(r)+", and "+"Munin".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].NJ1+"/10 goblin officers slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].NJ2+"/8 necromancers slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].NJ3+"/6 anuran torturers slain</i><br>",2),0===bS.Q[s].NJ4?c+=o("Slay Munin",2):c+=o("Munin slain",2)),3===bS.Q[s].Najena&&(i(u,3),b=N("Rendo: ")+"Braxxen has sealed off the exit along with the help from her inner circle. She is assisted by goblin captains, cephalids, and her most skilled summoners. Such odds seem rather overwhelming! Are you sure you want to go to Arcturin's Crypt that badly?<br><br>Maybe it would be better to just retire to a simple life fishing off the shore of Aspen Grove? Recovering all of these Idols would be great, but it's so dangerous! Do you think you were chosen by the Gods to complete this mission? You're going to need a divine intervention.<br><br>I mean, I'm not trying to discourage you, but life is short, you know? I've never heard any prophecy about a "+Yy.race.toLowerCase()+" "+Yy.job.toLowerCase()+" single-handedly saving the world from Nalatos's shadowy return to Vandamor. That sounds absurd. But, hey, give it a go if you insist.",QL.braxxen3||(g!==m||3!==p)&&"Aspen Grove"!==g||(QL.braxxen3=1,Ry(b)),c=b+"<br><br>Slay 10 "+"magicians".fontcolor(r)+", 8 "+"cephalid subverters".fontcolor(r)+", 8 "+"goblin captains".fontcolor(r)+", "+"Burzina".fontcolor(r)+", and "+"Braxxen".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].NJ1+"/10 magicians slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].NJ2+"/8 cephalid subverters slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].NJ3+"/8 goblin captains slain</i><br>",3),bS.Q[s].NJ4<2?c+=o("<i id='qind4'>Slay Burzina</i><br>",3):c+=o("<i id='qind4'>Burzina slain</i><br>",3),bS.Q[s].NJ5<2?c+=o("<i id='qind5'>Slay Braxxen</i>",3):c+=o("<i id='qind5'>Braxxen slain</i>",3)),y=!0)),bS.Q[s].UpperGuk<4&&bS.Q[s].Najena>=4&&(m="Kordata Marshlands",u="Anuran Keymaster",bS.Q[s].UpperGuk<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(25+v))+"</div>"),2===bS.Q[s].UpperGuk&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(26+v))+"</div>"),3===bS.Q[s].UpperGuk&&(d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(28+v))+"</div>"),((g===m||"Aspen Grove"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].UpperGuk<2&&(i(u,1),bS.Q[s].UpperGuk=1,b=N("Rendo: ")+Yy.name+", I can't tell if it's luck or skill. One of these days, your luck will run out, so I hope it's skill! You punched your way through Braxxen's Bastille like it was nothing. You gave her a good rump bouncin' she'll never soon forget.<br><br>The path is clear to Arcturin's crypt, but the gate is locked and we'll need a key to gain access. The only key I know of is held by the Prince Kerpple in Kortada Marshlands. Head northwest and defeat the anuran minions blocking your path.",QL.marshlands1||(g!==m||1!==p)&&"Aspen Grove"!==g||(QL.marshlands1=1,Ry(b)),c=b+"<br><br>Slay 9 "+"anuran sur warriors".fontcolor(r)+", 6 "+"anuran sur knights".fontcolor(r)+", and 6 "+"anuran sur shamans".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].UG1+"/9 anuran sur warriors slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].UG2+"/6 anuran sur knights slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].UG3+"/6 anuran sur shamans slain</i><br>",1)),2===bS.Q[s].UpperGuk&&(i(u,2),b=N("Rendo: ")+"Yippie! You really stuck it to those amphibians! So what's it like to be such a powerful adventurer? Say, did you have a mysterious childhood? Maybe you're the hero we're looking for after all.<br><br>You know, I always dreamed of traveling the world, collecting artifacts, and slaying monsters, but I don't think it was my destiny. My talents are more along the lines of collecting obscure information about lost keys and ancient artifacts.<br><br>Well, we all play our roles, I suppose! Now, now, now, back to the matter at hand! Your job is not yet finished, "+Yy.name+". Continue further northwest and you'll encounter the anuran shamans and priests along with their fungus men lackeys.",QL.marshlands2||(g!==m||2!==p)&&"Aspen Grove"!==g||(QL.marshlands2=1,Ry(b)),c=b+"<br><br>Slay 8 "+"fungus breeders".fontcolor(r)+", 8 "+"anuran tir shamans".fontcolor(r)+", 6 "+"anuran priests".fontcolor(r)+", and the "+"anuran warden".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].UG1+"/8 fungus breeders slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].UG2+"/8 anuran tir shamans slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].UG3+"/6 anuran priests slain</i><br>",2),0===bS.Q[s].UG4?c+=o("Slay the anuran warden",2):c+=o("Anuran warden slain",2)),3===bS.Q[s].UpperGuk&&(i(u,3),b=N("Rendo: ")+"Impressive work, brave "+Yy.race.toLowerCase()+"! I don't think I've ever seen a "+Yy.job.toLowerCase()+" fight like that before. Where did you receive your training? Did you learn to fight like that in Edenburg or does it all come naturally? You will need those skills to retrieve the key from Prince Kerpple. I have total confidence in you this time!",QL.marshlands3||(g!==m||3!==p)&&"Aspen Grove"!==g||(QL.marshlands3=1,Ry(b)),c=b+"<br><br>Slay 12 "+"anuran tonta knights".fontcolor(r)+", 8 "+"anuran summoner".fontcolor(r)+", 8 "+"anuran fal shamans".fontcolor(r)+", and "+"Prince Kerpple".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].UG1+"/12 anuran tonta knights slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].UG2+"/8 anuran summoners slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].UG3+"/8 anuran fal shamans slain</i><br>",3),0===bS.Q[s].UG4?c+=o("Slay Prince Kerpple",3):c+=o("Prince Kerpple slain",3)),y=!0)),bS.Q[s].EstateofUnrest<5&&!bS.Q[s].repeatER&&bS.Q[s].UpperGuk>=4&&(m="Arcturin's Crypt",u="Laid to Rest",bS.Q[s].EstateofUnrest<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(29+v))+"</div>"),2===bS.Q[s].EstateofUnrest&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(30+v))+"</div>"),3===bS.Q[s].EstateofUnrest&&(d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(31+v))+"</div>"),4!==bS.Q[s].EstateofUnrest||bS.Q[s].repeatER||(d+="<div class='questZones'>"+m+" 3 (repeatable)</div><div class='QT'>"+Lv(u,Cv(31+v))+"</div>"),((g===m||"Aspen Grove"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].EstateofUnrest<2&&(i(u,1),bS.Q[s].EstateofUnrest=1,b=N("Rendo: ")+"Ha, ha! Yes, I knew you could do it! And now we can unlock the crypt. The crypt was locked up once all of the crazy undead started marching around.<br><br>Methinks you are a bit crazy to consider going in there, but it seems you always end up okay no matter the odds. You will be greeted by beetles, zombies, and mummies at the entrance. But be prepared for anything in the crypt! Good luck, "+Yy.name+".",QL.arcturin1||(g!==m||1!==p)&&"Aspen Grove"!==g||(QL.arcturin1=1,Ry(b)),c=b+"<br><br>Slay 8 "+"death beetles".fontcolor(r)+", 6 "+"tormented dead".fontcolor(r)+", and 4 "+"lumbering mummies".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].ER1+"/8 death beetles slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].ER2+"/6 tormented dead slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].ER3+"/4 lumbering mummies slain</i><br>",1)),2===bS.Q[s].EstateofUnrest&&(i(u,2),b=N("Rendo: ")+"Wow! You took care of that so quickly. That looked easy. Did you know I can see everything you're doing? I have a magic spell that allows me to remotely view your activity.<br><br>That might sound a little creepy. Maybe I should have told you about that in advance! It's only to keep tabs on what you're doing. Honestly, how else would I know what you're up to?<br><br>And how do you think I knew where the Idol of Chaos was? Amazing, eh!? I am the all-seeing Rendo! Bow before me!<br><br>Ahem, so, you're going to have to slay the Arch Duke of Artremia. He's the guardian of Arcturin's tomb. Nobody goes in or out without his permission. So get hoppin'!",QL.arcturin2||(g!==m||2!==p)&&"Aspen Grove"!==g||(QL.arcturin2=1,Ry(b)),c=b+"<br><br>Slay 10 "+"dry bone skeletons".fontcolor(r)+", 8 "+"crazed ghouls".fontcolor(r)+", 6 "+"nymphs".fontcolor(r)+", and the "+"Arch Duke of Artremia".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].ER1+"/10 dry bone skeletons slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].ER2+"/8 crazed ghouls slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].ER3+"/6 nymphs slain</i><br>",2),0===bS.Q[s].ER4?c+=o("Slay the Arch Duke of Artremia",2):c+=o("Arch Duke of Artremia slain",2)),bS.Q[s].EstateofUnrest>=3&&(i(u,3),b=N("Rendo: ")+"Oh good Rinara above, you actually gained access to Arcturin's tomb! Be prepared for anything down there. There's no telling what kind of undead horrors Arcturin has animated for his amusement down there.<br><br>Be sure to sharpen your weapons. You do know you can upgrade your weapons and armor in any city, right? It costs some gold, but it's a good investment!",QL.arcturin3||3!==bS.Q[s].EstateofUnrest||(g!==m||3!==p)&&"Aspen Grove"!==g||(QL.arcturin3=1,Ry(b)),c=b+"<br><br>Slay 8 "+"mortuary fungi".fontcolor(r)+", 8 "+"dusty werewolves".fontcolor(r)+", 5 "+"cephalid subverters".fontcolor(r)+", 5 "+"festering hags".fontcolor(r)+", and "+"Arcturin, the Lich King".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].ER1+"/8 mortuary fungi slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].ER2+"/8 dusty werewolves slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].ER3+"/5 cephalid subverters slain</i><br>",3),c+=o("<i id='qind4'>"+bS.Q[s].ER4+"/5 festering hags slain</i><br>",3),0===bS.Q[s].ER5?c+=o("Slay Arcturin, the Lich King",3):c+=o("Arcturin, the Lich King slain",3)),y=!0)),!bS.Q[s].repeatCm3&&(bS.Q[s].CastleMistmoore<4&&bS.Q[s].EstateofUnrest>=4||bS.Q[s].CastleMistmoore>3)&&(m="Fahlnir Citadel",u="Tribal Warfare",bS.Q[s].CastleMistmoore<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(32+v))+"</div>"),2===bS.Q[s].CastleMistmoore&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(34+v))+"</div>"),3===bS.Q[s].CastleMistmoore?d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(35+v))+"</div>":bS.Q[s].CastleMistmoore>3&&!bS.Q[s].repeatCm3&&(d+="<div class='questZones'>"+m+" (repeatable)</div><div class='QT'>"+Lv(u,Cv(35+v))+"</div>"),((g===m||"Artremia"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].CastleMistmoore<2&&(i(u,1),0===bS.Q[s].CastleMistmoore?(bS.Q[s].CastleMistmoore=1,b=N("Valeska: ")+"Welcome to Artremia, capital city of the wood elves, "+Yy.name+". I am Valeska Windcrest, Chief Archivist at the Druidic Temple of DEITY studies. It is a pleasure to meet you, "+Yy.name+".<br><br>Rendo raved about your prowess on the battlefield. I'm glad he sent you my way, as we have our own share of concerns here in Artremia. Rumors about the Idols of Chaos have been confirmed, as you now possess two of them!<br><br>I did some research on this topic and it appears that Nalatos can only empower three at once or it will drain his powers too much. It seems even Gods have their limits. That means only one idol remains, and I suspect that I know where it is.<br><br>But first, I have a request. Our people have been under siege by the dark elves of "+N("Fahlnir Citadel")+". They are led by Countess Varnia, a powerful necromancer.<br><br>She commands a well organized army of dark elves committed to wiping Artremia off the map. If you put an end to their schemes, I promise to help you with your quest.",QL.artremia1||(g!==m||1!==p)&&"Artremia"!==g||(QL.artremia1=1,Ry(b)),"Artremia"===g&&Fy()):(b=N("Valeska: ")+"You can start by scouting out "+N("Fahlnir Citadel")+". At the entrance you will find a group of dark elf trainees preparing to attack our city. They are led by Lieutenant Xagorn. Ormir's blessings upon you, "+Yy.name+"!",QL.fahnlir1||(g!==m||1!==p)&&"Artremia"!==g||(QL.fahnlir1=1,Ry(b))),c=b+"<br><br>Slay 8 "+"pledge familiars".fontcolor(r)+", 7 "+"initiate familiars".fontcolor(r)+", 6 "+"gnoll scouts".fontcolor(r)+", and "+"Lieutenant Xagorn".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CM1+"/8 pledge familiars slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].CM2+"/7 initiate familiars slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].CM3+"/6 glyphed familiars slain</i><br>",1),0===bS.Q[s].CM4?c+=o("Slay Lieutenant Xagorn",1):c+=o("Lieutenant Xagorn slain",1)),2===bS.Q[s].CastleMistmoore&&(i(u,2),b=N("Valeska: ")+"Astonishing work, "+Yy.name+". Rendo was right about you. I've never seen a "+Yy.job.toLowerCase()+" fight the way you do. Lieutenant Xagorn scarcely stood a chance against you. Our Fallen Leaf Militia should study your tactics.<br><br>We can barely defend our city's perimeter these days. So few take city defense seriously and our people have grown weak with complacency. Our people are obsessed with abstract thinking to the point where we rationalize our own extinction.<br><br>Personally, I believe it is destroying our culture, but our leadership won't make any reforms. We are in quite a mess even without the dark elves preying upon us. If they don't destroy us, the wood elves surely will!<br><br>Enough of my soliloquy. Continue with your mission by attacking deeper in the citadel. You will encounter Dragoon Reklyn, the famed officer in charge of all melee training. Take care when confronting him. He is a respected veteran in combat.",QL.fahnlir2||(g!==m||2!==p)&&"Artremia"!==g||(QL.fahnlir2=1,Ry(b)),c=b+"<br><br>Slay 8 "+"glyphed guards".fontcolor(r)+", 6 "+"glyphed sentries".fontcolor(r)+", 6 "+"glyphed custodians".fontcolor(r)+", 4 "+"negotiators".fontcolor(r)+", and "+"Dragoon Reklyn".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CM1+"/8 glyphed guards slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].CM2+"/6 glyphed sentries slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].CM3+"/6 glyphed custodians slain</i><br>",2),c+=o("<i id='qind4'>"+bS.Q[s].CM4+"/4 negotiators slain</i><br>",2),0===bS.Q[s].CM5?c+=o("Slay Dragoon Reklyn",2):c+=o("Dragoon Reklyn slain",2)),(3===bS.Q[s].CastleMistmoore||bS.Q[s].CastleMistmoore>3&&!bS.Q[s].repeatCm3)&&(i(u,3),b=N("Valeska: ")+"Well done! Yet another quest where you made it look so easy. This final leg of the mission is the most deadly. You will have to confront Countess Varnia and her bodyguard, Zigruben, a powerful shadow knight. The wood elves of Artremia are counting on you, "+Yy.name+".",QL.fahnlir3||3!==bS.Q[s].CastleMistmoore||(g!==m||3!==p)&&"Artremia"!==g||(QL.fahnlir3=1,Ry(b)),c=b+"<br><br>Slay 7 "+"deathly harbingers".fontcolor(r)+", 7 "+"dark ritualists".fontcolor(r)+", 7 "+"shadowy sages".fontcolor(r)+", 7 "+"leering gargoyles".fontcolor(r)+", "+"Countess Varnia".fontcolor(r)+" and "+"Zigruben".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CM1+"/7 deathly harbingers slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].CM2+"/7 dark ritualists slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].CM3+"/7 shadowy sages slain</i><br>",3),c+=o("<i id='qind4'>"+bS.Q[s].CM4+"/7 leering gargoyles slain</i><br>",3),bS.Q[s].CM5<2?c+=o("<i id='qind5'>Slay Countess Varnia</i><br>",3):c+=o("<i id='qind5'>Countess Varnia slain</i><br>",3),bS.Q[s].CM6<2?c+=o("<i id='qind6'>Slay Zigruben</i>",3):c+=o("<i id='qind6'>Zigruben slain</i>",3)),y=!0)),!bS.Q[s].repeatLg3&&(bS.Q[s].LowerGuk<4&&bS.Q[s].CastleMistmoore>=4||bS.Q[s].LowerGuk>3)&&(m="Kordata Ruins",u="Mired in Ruins",bS.Q[s].LowerGuk<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(36+v))+"</div>"),2===bS.Q[s].LowerGuk&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(37+v))+"</div>"),3===bS.Q[s].LowerGuk?d+="<div class='questZones'>"+m+" 3</div><div class='QT' data-subzone='3'>"+Lv(u,Cv(38+v))+"</div>":bS.Q[s].LowerGuk>3&&!bS.Q[s].repeatLg3&&(d+="<div class='questZones'>"+m+" 3 (repeatable)</div><div class='QT' data-subzone='3'>"+Lv(u,Cv(38+v))+"</div>"),((g===m||"Artremia"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].LowerGuk<2&&(i(u,1),bS.Q[s].LowerGuk=1,b=N("Valeska: ")+Yy.name+", on the behalf of all wood elves, I thank you for eliminating the threat of Countess Varnia. Finally our people can live in peace. And now, as promised, I can help you with your quest.<br><br>Our scouts have reported that Sentoth, the Lord of Rapture, has returned to the Temple of Pressor. The lizardmen there worship him as a deity, though he is only a demi-God, not a true deity.<br><br>Little is known about his true nature or where he originates from, but it is clear that he is back to lead their blood fervor. They have been terrorizing nearby towns and using their captors in repulsive sacrificial rituals. Truly revolting and unspeakable horrors, ugh!<br><br>I informed Rendo and, indeed, he was able to confirm with remote viewing that Sentoth possesses an Idol Of Chaos. Your only obstacle is the anuran army at the "+N("Kordata Ruins")+". They control the swamps between here and the Temple of Prenssor.<br><br>You will have to fight your way there. Begin at the entrance of the ruins. Beware that the anuran assassin is known to guard the entrance from anyone that dares to invade their territory. Don't be surprised if he brings heavy support.",QL.ruins1||(g!==m||1!==p)&&"Artremia"!==g||(QL.ruins1=1,Ry(b)),c=b+"<br><br>Slay 10 "+"anuran tir knights".fontcolor(r)+", 8 "+"lem anuran wizards".fontcolor(r)+", 6 "+"amn anuran wizards".fontcolor(r)+", the "+"anuran assassin".fontcolor(r)+", and the "+"anuran supplier".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].LG1+"/10 anuran tir knights slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].LG2+"/8 lem anuran wizards slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].LG3+"/6 amn anuran wizards slain</i><br>",1),bS.Q[s].LG4<2?c+=o("<i id='qind4'>Slay the anuran assassin</i><br>",1):c+=o("<i id='qind4'>Anuran assassin slain</i><br>",1),bS.Q[s].LG5<2?c+=o("<i id='qind5'>Slay the anuran supplier</i>",1):c+=o("<i id='qind5'>Anuran supplier slain</i>",1)),2===bS.Q[s].LowerGuk&&(i(u,2),b=N("Valeska: ")+"Nice work, "+Yy.name+". You have made solid progress into anuran territory. They are a militaristic order known for their discipline. They have a detailed ranking system assigned to each anuran, which indicates their strength in battle.<br><br>Proceed further and you will encounter much tougher anurans. The frenzied anuran and the anuran sentinel control the central territory. You will have to eliminate them before you can advance any further.",QL.ruins2||(g!==m||2!==p)&&"Artremia"!==g||(QL.ruins2=1,Ry(b)),c=b+"<br><br>Slay 8 "+"pul anuran knights".fontcolor(r)+", 8 "+"dol anuran wizards".fontcolor(r)+", 6 "+"vex anuran wizards".fontcolor(r)+", 6 "+"ber anuran knights".fontcolor(r)+", the "+"frenzied anuran".fontcolor(r)+", and the "+"anuran sentinel".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].LG1+"/8 pul anuran knights slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].LG2+"/8 dol anuran wizards slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].LG3+"/6 vex anuran wizards slain</i><br>",2),c+=o("<i id='qind4'>"+bS.Q[s].LG4+"/6 ber anuran knights slain</i><br>",2),bS.Q[s].LG5<2?c+=o("<i id='qind5'>Slay the frenzied anuran</i><br>",2):c+=o("<i id='qind5'>Frenzied anuran slain</i><br>",2),bS.Q[s].LG6<2?c+=o("<i id='qind6'>Slay the anuran sentinel</i>",2):c+=o("<i id='qind6'>Anuran sentinel slain</i>",2)),(3===bS.Q[s].LowerGuk||bS.Q[s].LowerGuk>3&&!bS.Q[s].repeatLg3)&&(i(u,3),b=N("Valeska: ")+"Splendid! You are drawing near to the Temple of Prenssor. Only King Froaki and his personal arch magi stand in your way. Of course you will have to defeat their henchmen first, which is no small task either.<br><br>The arch magi uses vicious magic spells. Have you been collecting armor with good resistances on them? It's a good idea to hang on to armor with strong resistances. In some fights, high resists are more important than armor.<br><br>I have heard that some armor can even absorb magic damage! I've never seen it myself, but that's amazing if it's true.",QL.ruins3||3!==bS.Q[s].LowerGuk||(g!==m||3!==p)&&"Artremia"!==g||(QL.ruins3=1,Ry(b)),c=b+"<br><br>Slay 12 "+"mal anuran knights".fontcolor(r)+", 10 "+"zod anuran wizards".fontcolor(r)+", 8 "+"zod anuran knights".fontcolor(r)+", "+"King Froaki".fontcolor(r)+" and the "+"anuran arch magus".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].LG1+"/12 mal anuran knights slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].LG2+"/10 zod anuran wizards slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].LG3+"/8 zod anuran knights slain</i><br>",3),bS.Q[s].LG4<2?c+=o("<i id='qind4'>Slay King Froaki</i><br>",3):c+=o("<i id='qind4'>King Froaki slain</i><br>",3),bS.Q[s].LG5<2?c+=o("<i id='qind5'>Slay the anuran arch magus</i>",3):c+=o("<i id='qind5'>Anuran arch magus slain</i>",3)),y=!0)),!bS.Q[s].repeatCt3&&bS.Q[s].LowerGuk>=4&&(m="Temple of Prenssor",u="Omen of the Serpent Lord",bS.Q[s].CazicThule<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(39+v))+"</div>"),2===bS.Q[s].CazicThule&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(40+v))+"</div>"),3===bS.Q[s].CazicThule?d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(41+v))+"</div>":bS.Q[s].CazicThule>3&&!bS.Q[s].repeatCt3&&(d+="<div class='questZones'>"+m+" 3 (repeatable)</div><div class='QT'>"+Lv(u,Cv(41+v))+"</div>"),((g===m||"Artremia"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].CazicThule<2&&(i(u,1),bS.Q[s].CazicThule=1,b=N("Valeska: ")+"That is quite a trail of destruction you left in your wake! Those anurans didn't know what hit them. Now it's time to attack the "+N("Temple of Prenssor")+". The courtyard is defended by Soprenti the Anointed and his adjuncts. Make haste and slay them at once.",QL.temple1||(g!==m||1!==p)&&"Artremia"!==g||(QL.temple1=1,Ry(b)),c=b+"<br><br>Slay 8 "+"lizard disciples".fontcolor(r)+", 6 "+"lizard pages".fontcolor(r)+", 4 "+"lizard defenders".fontcolor(r)+", and "+"Soprenti the Anointed".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CT1+"/8 lizard disciples slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].CT2+"/6 lizard pages slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].CT3+"/4 lizard defenders slain</i><br>",1),0===bS.Q[s].CT4?c+=o("Slay Soprenti the Anointed",1):c+=o("Soprenti the Anointed slain",1)),2===bS.Q[s].CazicThule&&(i(u,2),b=N("Valeska: ")+"You're sure to have Sentoth's attention at this point. You have intruded on his territory and he won't be pleased. Nonetheless, continue toward the temple's altar.<br><br>You will find a bridge guarded by Merszas the Divine and Sartuth the Possessed, a deadly team of lizardmen. Once you eliminate them you may proceed to the sacrificial altar.",QL.temple2||(g!==m||2!==p)&&"Artremia"!==g||(QL.temple2=1,Ry(b)),c=b+"<br><br>Slay 10 "+"lizard heralds".fontcolor(r)+", 8 "+"lizard protectors".fontcolor(r)+", 6 "+"lizard justicars".fontcolor(r)+", "+"Sartuth the Possessed".fontcolor(r)+", and "+"Merszas the Divine".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CT1+"/10 lizard heralds slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].CT2+"/8 lizard protectors slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].CT3+"/6 lizard justicars slain</i><br>",2),bS.Q[s].CT4<2?c+=o("<i id='qind4'>Slay Sartuth the Possessed</i><br>",2):c+=o("<i id='qind4'>Sartuth the Possessed slain</i><br>",2),bS.Q[s].CT5<2?c+=o("<i id='qind5'>Slay Merszas the Divine</i>",2):c+=o("<i id='qind5'>Merszas the Divine slain</i>",2)),(3===bS.Q[s].CazicThule||bS.Q[s].CazicThule>3&&!bS.Q[s].repeatCt3)&&(i(u,3),b=N("Valeska: ")+"You have made it to the altar. This is it! The chance to collect all three Idols of Chaos! Sentoth's elite lizardmen will be at the altar ready to defend against your assault. Be prepared to fight Sentoth, the toughest encounter thus far.",QL.temple3||3!==bS.Q[s].CazicThule||(g!==m||3!==p)&&"Artremia"!==g||(QL.temple3=1,Ry(b)),c=b+"<br><br>Slay 10 "+"lizard zealots".fontcolor(r)+", 10 "+"lizard crusaders".fontcolor(r)+", 8 "+"lizard champions".fontcolor(r)+", and the "+"Sentoth, Lord of Rapture".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].CT1+"/10 lizard zealots slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].CT2+"/10 lizard crusaders slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].CT3+"/8 lizard champions slain</i><br>",3),0===bS.Q[s].CT4?c+=o("Slay Sentoth, Lord of Rapture",3):c+=o("Sentoth, Lord of Rapture slain",3)),y=!0)),(bS.Q[s].KedgeKeep<=5&&bS.Q[s].CazicThule>=4||bS.Q[s].KedgeKeep>3)&&(m="Viston's Redoubt",u="A Dark Undertaking",bS.Q[s].KedgeKeep<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(42+v))+"</div>"),2===bS.Q[s].KedgeKeep&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(43+v))+"</div>"),3===bS.Q[s].KedgeKeep?d+="<div class='questZones'>"+m+" 3</div><div class='QT' data-subzone='3'>"+Lv(u,Cv(43+v))+"</div>":bS.Q[s].KedgeKeep>3&&!bS.Q[s].repeatKk3&&(d+="<div class='questZones'>"+m+" 3 (repeatable)</div><div class='QT' data-subzone='3'>"+Lv(u,Cv(43+v))+"</div>"),4===bS.Q[s].KedgeKeep&&(d+="<div class='questZones'>"+m+" 4</div><div class='QT' data-subzone='4'>"+Lv(u,Cv(44+v))+"</div>"),5!==bS.Q[s].KedgeKeep||bS.Q[s].repeatKk4||(d+="<div class='questZones'>"+m+" 4 (repeatable)</div><div class='QT' data-subzone='4'>"+Lv(u,Cv(44+v))+"</div>"),((g===m||"Fenwoven"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].KedgeKeep<2&&(i(u,1),0===bS.Q[s].KedgeKeep?(bS.Q[s].KedgeKeep=1,b=N("Arwen: ")+"Good day, "+Yy.name+". I am Arwen, the Village Shaman of Fenwoven. I have heard at length about your remarkable effort to collect the Idols of Chaos from Edenburg to Artremia. And now you stand here before me in our humble village. It is an honor to serve you, however I can.<br><br>First and foremost, it is a great achievement to collect the Idols of Chaos. The Idols are spiritual artifacts enchanted with Nalatos's power. Over time they will lose their enchantment, allowing him to spread his chaotic influence once again.<br><br>And here's what most do not realize: the enchanted Idols are also keys to unlock a portal to Nimgaul, the astral plane where Nalatos dwells.<br><br>The Shamans of Fenwoven are adept at sensing these astral disturbances, which are clearly coming from the depths of Ashenflow Peak. This is bad news as it is well guarded by legendary dragons and their minions.<br><br>Galeblast Fortress is the only way to access the subterranean caves of Ashenflow Peak, but you must acquire a key from Revenant Viston. Little is known about him except that he commands a faction of vampires at "+N("Viston's Redoubt")+".",QL.fenwoven1||(g!==m||1!==p)&&"Fenwoven"!==g||(QL.fenwoven1=1,Ry(b)),"Fenwoven"===g&&Fy()):(b=N("Arwen: ")+"Sari Portentia and her minions guard the entrance to the redoubt. Destroy her and her minions to clear a path to Viston's inner sanctum.",QL.viston1||(g!==m||1!==p)&&"Fenwoven"!==g||(QL.viston1=1,Ry(b))),c=b+"<br><br>Slay 8 "+"peering gargoyles".fontcolor(r)+", 8 "+"fettered defilers".fontcolor(r)+", 8 "+"dread werewolves".fontcolor(r)+", and "+"Sari Portentia".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].KK1+"/8 peering gargoyles slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].KK2+"/8 fettered defilers slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].KK3+"/8 dread werewolf slain</i><br>",1),0===bS.Q[s].KK4?c+=o("Slay Sari Portentia",1):c+=o("Sari Portentia slain",1)),2===bS.Q[s].KedgeKeep&&(i(u,2),b=N("Arwen: ")+"You've made your way inside Viston's Redoubt. Well done! Now to eliminate the minions who guard the way to his sanctuary.<br><br>Shardok is his enchanted gargoyle sentinel that alerts him of any intruders into his redoubt. You will have to eliminate him to proceed any further.",QL.viston2||(g!==m||2!==p)&&"Fenwoven"!==g||(QL.viston2=1,Ry(b)),c=b+"<br><br>Slay 8 "+"brooding imps".fontcolor(r)+", 8 "+"manacled spoilers".fontcolor(r)+", 5 "+"lusting werewolves".fontcolor(r)+", 5 "+"bloodthirsty bats".fontcolor(r)+" and "+"Shardok".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].KK1+"/8 brooding imps slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].KK2+"/8 manacled spoilers slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].KK3+"/5 lusting werewolves slain</i><br>",2),c+=o("<i id='qind4'>"+bS.Q[s].KK4+"/5 bloodthirsty bats slain</i><br>",2),0===bS.Q[s].KK5?c+=o("Slay Shardok",2):c+=o("Shardok slain",2)),bS.Q[s].repeatKk3||(3===bS.Q[s].KedgeKeep||bS.Q[s].KedgeKeep>=4&&3===n||bS.Q[s].KedgeKeep>=4&&a===E&&3===Pn())&&(i(u,3),b=N("Arwen: ")+"Viston is likely readying his forces and is aware of your intrusion into his redoubt. Korman Valen and Artun Desmoni will be guarding the steps to his altar. Fight through their minions and eliminate this duo to proceed.",QL.viston3||3!==bS.Q[s].KedgeKeep||(g!==m||3!==p)&&"Fenwoven"!==g||(QL.viston3=1,Ry(b)),c=b+"<br><br>Slay 10 "+"pained seethers".fontcolor(r)+", 10 "+"soul destroyers".fontcolor(r)+", 8 "+"vampire bats".fontcolor(r)+", "+"Artun Desmoni".fontcolor(r)+" and  "+"Korman Valen".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].KK1+"/10 pained seethers slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].KK2+"/10 soul destroyers slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].KK3+"/8 vampire bats slain</i><br>",3),bS.Q[s].KK4<2?c+=o("<i id='qind4'>Slay Artun Desmoni</i><br>",3):c+=o("<i id='qind4'>Artun Desmoni slain</i><br>",3),bS.Q[s].KK5<2?c+=o("<i id='qind5'>Slay Korman Valen</i>",3):c+=o("<i id='qind5'>Korman Valen slain</i>",3)),bS.Q[s].repeatKk4||(4===bS.Q[s].KedgeKeep&&bS.Q[s].repeatKk3||bS.Q[s].KedgeKeep>=4&&4===n||bS.Q[s].KedgeKeep>=4&&4===n&&a===E)&&(i(u,4),b=N("Arwen: ")+"You have cleared the way to Viston's altar. Here is guarded by sinew punishers and his elite blood guardians. If you manage to clear them you will have a shot at Revenant Viston and access to Galeblast Fortress! Good luck, "+Yy.name+". We are all counting on you!",QL.viston4||4!==bS.Q[s].KedgeKeep||(g!==m||4!==p)&&"Fenwoven"!==g||(QL.viston4=1,Ry(b)),c=b+"<br><br>Slay 18 "+"sinew punishers".fontcolor(r)+", 12 "+"Blood Guardians".fontcolor(r)+", and "+"Revenant Viston".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].KK6+"/18 sinew punishers slain</i><br>",4),c+=o("<i id='qind2'>"+bS.Q[s].KK7+"/12 Blood Guardians slain</i><br>",4),bS.Q[s].KK8<=1?c+=o("Slay Revenant Viston",4):c+=o("Revenant Viston slain",4)),y=!0)),bS.Q[s].PermafrostKeep<=5&&bS.Q[s].KedgeKeep>=5&&(m="Galeblast Fortress",u="Frozen Fortress",bS.Q[s].PermafrostKeep<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(45+v))+"</div>"),2===bS.Q[s].PermafrostKeep&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(46+v))+"</div>"),3===bS.Q[s].PermafrostKeep&&(d+="<div class='questZones'>"+m+" 3</div><div class='QT'>"+Lv(u,Cv(46+v))+"</div>"),4===bS.Q[s].PermafrostKeep?d+="<div class='questZones'>"+m+" 4</div><div class='QT'>"+Lv(u,Cv(47+v))+"</div>":5===bS.Q[s].PermafrostKeep&&(d+="<div class='questZones'>"+m+" 4 (repeatable)</div><div class='QT'>"+Lv(u,Cv(47+v))+"</div>"),(g===m||"Fenwoven"===g)&&a===E||a===u&&!1===y)){if(bS.Q[s].PermafrostKeep<2){i(u,1),bS.Q[s].PermafrostKeep=1;Yy.job.toLowerCase();b=N("Arwen: ")+"A horde of fierce ice goblins now stand in your way. An ice goblin keymaster holds the key to access the next section of Galeblast Fortress. You'll have to defeat him and his minions to proceed.<br><br>Do you think Nalatos could have made this journey any more arduous? He obviously didn't want anyone messing with his portal. I guess he wasn't counting on Edenburg's finest rising to the challenge!",QL.galeblast1||(g!==m||1!==p)&&"Fenwoven"!==g||(QL.galeblast1=1,Ry(b)),c=b+"<br><br>Slay 8 "+"ice goblins".fontcolor(r)+", 6 "+"goblin evokers".fontcolor(r)+", 6 "+"dire wolves".fontcolor(r)+", and the "+"ice goblin keymaster".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].PK1+"/8 ice goblins slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].PK2+"/6 goblin evokers slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].PK3+"/6 dire wolves slain</i><br>",1),0===bS.Q[s].PK4?c+=o("Slay the ice goblin keymaster",1):c+=o("Ice goblin keymaster slain",1)}2===bS.Q[s].PermafrostKeep&&(i(u,2),b=N("Arwen: ")+"You're making great progress, "+Yy.name+". Just keep charging forward and you'll find the portal in due time. The next area is patrolled by goblin elites and spellcasters. A goblin excavator holds the key to the next area. Defeat him and we're one step closer!",QL.galeblast2||(g!==m||2!==p)&&"Fenwoven"!==g||(QL.galeblast2=1,Ry(b)),c=b+"<br><br>Slay 7 "+"goblin wizards".fontcolor(r)+", 7 "+"elite goblin guards".fontcolor(r)+", 7 "+"goblin preachers".fontcolor(r)+", and the "+"goblin excavator".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].PK1+"/7 goblin wizards slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].PK2+"/7 elite goblin guards slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].PK3+"/7 goblin preachers slain</i><br>",2),0===bS.Q[s].PK4?c+=o("Slay the goblin excavator",2):c+=o("Goblin excavator slain",2)),3===bS.Q[s].PermafrostKeep&&(i(u,3),b=N("Arwen: ")+"You have reached the ice goblins' royal lair. Magnate Dinbopp and Pontiff Krindletin command an elite force of goblins here. Also, be on the lookout for ice giants. The ice giants are Matron Maelentia's personal guardians.",QL.galeblast3||(g!==m||3!==p)&&"Fenwoven"!==g||(QL.galeblast3=1,Ry(b)),c=b+"<br><br>Slay 10 "+"goblin sages".fontcolor(r)+", 10 "+"elite honor guards".fontcolor(r)+", 10 "+"ice giant youths".fontcolor(r)+", "+"Pontiff Krindletin".fontcolor(r)+", and  "+"Magnate Dinbopp".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].PK1+"/10 goblin sages slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].PK2+"/10 elite honor guards slain</i><br>",3),c+=o("<i id='qind3'>"+bS.Q[s].PK3+"/5 ice giant youths slain</i><br>",3),bS.Q[s].PK4<2?c+=o("<i id='qind4'>Slay Pontiff Krindletin</i><br>",3):c+=o("<i id='qind4'>Pontiff Krindletin slain</i><br>",3),bS.Q[s].PK5<2?c+=o("<i id='qind5'>Slay Magnate Dinbopp</i>",3):c+=o("<i id='qind5'>Magnate Dinbopp slain</i>",3)),bS.Q[s].PermafrostKeep>=4&&(i(u,4),b=N("Arwen: ")+"Unbelievable! You have done what none have done before. You have reached the lair of Matron Maelentia, the great ice dragon. She is guarded by ice giants, so you must defeat them first.<br><br>Dragons' roars may cause you to run in fear, so I suggest finding armor that protects you from fear effects. Armor with cold resistance will also mitigate her powerful ice breath attacks.",QL.galeblast4||4!==bS.Q[s].PermafrostKeep||(g!==m||4!==p)&&"Fenwoven"!==g||(QL.galeblast4=1,Ry(b)),c=b+"<br><br>Slay 4 "+"ice giant champions".fontcolor(r)+", 4 "+"ice giant warders".fontcolor(r)+", 4 "+"ice giant preservers".fontcolor(r)+", 3 "+"ice giants".fontcolor(r)+", 2 "+"ice giant magi".fontcolor(r)+", 2 "+"ice giant priests".fontcolor(r)+", "+"Margrave Kalgresh the Usurper".fontcolor(r)+", "+"Vizier Kongumen Divorn".fontcolor(r)+", and "+"Matron Maelentia".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].PK1+"/4 ice giant champions slain</i><br>",4),c+=o("<i id='qind2'>"+bS.Q[s].PK2+"/4 ice giant warders slain</i><br>",4),c+=o("<i id='qind3'>"+bS.Q[s].PK3+"/4 ice giant preservers slain</i><br>",4),c+=o("<i id='qind4'>"+bS.Q[s].PK4+"/3 ice giants slain</i><br>",4),c+=o("<i id='qind5'>"+bS.Q[s].PK5+"/2 ice giant magi slain</i><br>",4),c+=o("<i id='qind6'>"+bS.Q[s].PK6+"/2 ice giant priests slain</i><br>",4),bS.Q[s].PK7<=1?c+=o("<i id='qind7'>Slay Margrave Kalgresh the Usurper</i><br>",4):c+=o("<i id='qind7'>Margrave Kalgresh the Usurper slain</i><br>",4),bS.Q[s].PK8<=1?c+=o("<i id='qind8'>Slay Vizier Kongumen Divorn</i><br>",4):c+=o("<i id='qind8'>Vizier Kongumen Divorn slain</i><br>",4),0===bS.Q[s].PK9?c+=o("Slay Matron Maelentia",4):c+=o("Matron Maelentia slain",4)),y=!0}if(bS.Q[s].PermafrostKeep>=5&&bS.Q[s].NagafensLair<=5&&(bS.Q[s].repeatNl3&&bS.Q[s].repeatNl4||(m="Ashenflow Peak",u="Volcanic Siege",bS.Q[s].NagafensLair<=1&&(d+="<div class='questZones'>"+m+" 1</div><div class='QT'>"+Lv(u,Cv(47+v))+"</div>"),2===bS.Q[s].NagafensLair&&(d+="<div class='questZones'>"+m+" 2</div><div class='QT'>"+Lv(u,Cv(48+v))+"</div>"),3===bS.Q[s].NagafensLair?d+="<div class='questZones'>"+m+" 3</div><div class='QT' data-subzone='3'>"+Lv(u,Cv(49+v))+"</div>":bS.Q[s].NagafensLair>3&&!bS.Q[s].repeatNl3&&(d+="<div class='questZones'>"+m+" 3 (repeatable)</div><div class='QT' data-subzone='3'>"+Lv(u,Cv(49+v))+"</div>"),4===bS.Q[s].NagafensLair?d+="<div class='questZones'>"+m+" 4</div><div class='QT' data-subzone='4'>"+Lv(u,Cv(50+v))+"</div>":5===bS.Q[s].NagafensLair&&(d+="<div class='questZones'>"+m+" 4 (repeatable)</div><div class='QT' data-subzone='4'>"+Lv(u,Cv(50+v))+"</div>"),((g===m||"Fenwoven"===g)&&a===E||a===u&&!1===y)&&(bS.Q[s].NagafensLair<2&&(i(u,1),bS.Q[s].NagafensLair=1,b=N("Arwen: ")+"The tunnels below ashenflow are guarded by a faction of kobolds! Eliminate them and then defeat the ashenflow kobold king. He is accompanied by a kobold noble, an enchanter with deadly mind magic.",QL.ashenflow1||(g!==m||1!==p)&&"Fenwoven"!==g||(QL.ashenflow1=1,Ry(b)),c=b+"<br><br>Slay 8 "+"greater kobolds".fontcolor(r)+", 8 "+"greater kobold shamans".fontcolor(r)+", 5 "+"ashenflow kobolds".fontcolor(r)+", 5 "+"ashenflow kobold shamans".fontcolor(r)+", the "+"kobold noble".fontcolor(r)+", and the "+"ashenflow kobold king".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].NL1+"/8 greater kobolds slain</i><br>",1),c+=o("<i id='qind2'>"+bS.Q[s].NL2+"/8 greater kobold shamans slain</i><br>",1),c+=o("<i id='qind3'>"+bS.Q[s].NL3+"/5 ashenflow kobolds slain</i><br>",1),c+=o("<i id='qind4'>"+bS.Q[s].NL4+"/5 ashenflow kobold shamans slain</i><br>",1),bS.Q[s].NL5<2?c+=o("<i id='qind5'>Slay the kobold noble</i><br>",1):c+=o("<i id='qind5'>Kobold noble slain</i><br>",1),bS.Q[s].NL6<2?c+=o("<i id='qind6'>Slay the ashenflow kobold king</i>",1):c+=o("<i id='qind6'>Ashenflow kobold king slain</i>",1)),2===bS.Q[s].NagafensLair&&(i(u,2),b=N("Arwen: ")+"Be careful of the magma flows prevalent throughout the cavern. This portion of the cavern is infested with bugs, bats, spiders, and other nasty creatures. It looks like you'll have to do some exterminating here. Be on the lookout for the stone and noxious spiders which are particularly deadly!",QL.ashenflow2||(g!==m||2!==p)&&"Fenwoven"!==g||(QL.ashenflow2=1,Ry(b)),c=b+"<br><br>Slay 10 "+"sonic bats".fontcolor(r)+", 8 "+"lava beetles".fontcolor(r)+", 8 "+"lava duct crawlers".fontcolor(r)+", the "+"noxious spider".fontcolor(r)+" and the "+"stone spider".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].NL1+"/10 sonic bats slain</i><br>",2),c+=o("<i id='qind2'>"+bS.Q[s].NL2+"/8 lava beetles slain</i><br>",2),c+=o("<i id='qind3'>"+bS.Q[s].NL3+"/8 lava duct crawlers slain</i><br>",2),bS.Q[s].NL4<2?c+=o("<i id='qind4'>Slay the noxious spider</i><br>",2):c+=o("<i id='qind4'>Noxious spider slain</i><br>",2),bS.Q[s].NL5<2?c+=o("<i id='qind5'>Slay the stone spider</i>",2):c+=o("<i id='qind5'>Stone spider slain</i>",2)),(3===bS.Q[s].NagafensLair||bS.Q[s].NagafensLair>=4&&!bS.Q[s].repeatNl3&&3===n||bS.Q[s].NagafensLair>=4&&!bS.Q[s].repeatNl3&&n===E&&3===Pn())&&(i(u,3),b=N("Arwen: ")+"That last section was pretty disgusting! I can't stand bugs or spiders. That's why I choose to live in the frigid north where I don't see nasty critters like that!<br><br>It looks like this next area is full of imps and lava elementals. Far less disgusting, I'd say. The tunnel to Highlord Szarthax's lair is guarded by General Ovext, a powerful imp with deadly fire magic.",QL.ashenflow3||3!==bS.Q[s].NagafensLair||(g!==m||3!==p)&&"Fenwoven"!==g||(QL.ashenflow3=1,Ry(b)),c=b+"<br><br>Slay 10 "+"lava guardians".fontcolor(r)+", 15 "+"imp protectors".fontcolor(r)+", and "+"General Ovext".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].NL1+"/10 lava guardians slain</i><br>",3),c+=o("<i id='qind2'>"+bS.Q[s].NL2+"/15 imp protectors slain</i><br>",3),0===bS.Q[s].NL3?c+=o("Slay General Ovext",3):c+=o("General Ovext slain",3)),(bS.Q[s].NagafensLair>=4&&4===n||bS.Q[s].NagafensLair>=4&&4===Pn()&&n===E)&&(i(u,4),b=N("Arwen: ")+"I can't believe it! Look how far you have come in your journey. You now stand in the lair of Highlord Szarthax, the most fearsome dragon in all of Vandamor.<br><br>The good news is you have some experience fighting dragons, so you should know what to expect. The bad news is he is well guarded by his own coterie of merciless fire giants. Good luck, "+Yy.name+"!",QL.ashenflow4||4!==bS.Q[s].NagafensLair||(g!==m||4!==p)&&"Fenwoven"!==g||(QL.ashenflow4=1,Ry(b)),c=b+"<br><br>Slay 12 "+"fire giant warriors".fontcolor(r)+", 8 "+"fire giant wizards".fontcolor(r)+", "+"King Argentus".fontcolor(r)+", "+"Duke Carthenage".fontcolor(r)+", "+"Battle Mage Turento".fontcolor(r)+", and "+"Highlord Szarthax".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].NL7+"/12 fire giant warriors slain</i><br>",4),c+=o("<i id='qind2'>"+bS.Q[s].NL8+"/8 fire giant wizards slain</i><br>",4),bS.Q[s].NL9<=1?c+=o("<i id='qind3'>Slay King Argentus</i><br>",4):c+=o("<i id='qind3'>King Argentus slain</i><br>",4),bS.Q[s].NL10<=1?c+=o("<i id='qind4'>Slay Duke Carthenage</i><br>",4):c+=o("<i id='qind4'>Duke Carthenage slain</i><br>",4),bS.Q[s].NL11<=1?c+=o("<i id='qind5'>Slay Battle Mage Turento</i><br>",4):c+=o("<i id='qind5'>Battle Mage Turento slain</i><br>",4),0===bS.Q[s].NL12?c+=o("Slay Highlord Szarthax",4):c+=o("Highlord Szarthax slain",4)),y=!0))),bS.Q[s].PlaneofHate<=2&&bS.Q[s].NagafensLair>=5&&(m="Dire Sanctum",u="Forgotten City",bS.Q[s].PlaneofHate<2?d+="<div class='questZones'>"+m+"</div><div class='QT'>"+Lv(u,Cv(52+v))+"</div>":bS.Q[s].PlaneofHate>=2&&(d+="<div class='questZones'>"+m+" (repeatable)</div><div class='QT'>"+Lv(u,Cv(52+v))+"</div>"),!1===y&&((g!==m&&"Fenwoven"!==g||a!==E)&&a!==u||(bS.Q[s].PlaneofHate<=2&&(i(u),b=N("Arwen: ")+"According to my ancient tomes, this place is called Dire Sanctum, a long forgotten city buried beneath an ancient eruption from Ashenflow Peak. It is believed Gods anchor their astral planes here due to its seclusion. You are the first mortal to venture there in many centuries.<br><br>Nonetheless it is heavily guarded in case an intruder is brave enough to venture near. I know not what lies in wait for you down there. I can only offer platitudes.<br><br>Seek out the portal and eliminate anything or anyone that blocks your path. The extraordinary resistance you are facing shows that they do not want you meddling with the portal.",!QL.dire1&&bS.Q[s].PlaneofHate<=1&&(g===m&&0===p||"Fenwoven"===g)&&(QL.dire1=1,Ry(b)),c=b+"<br><br>Slay all denizens in the Dire Sanctum including "+"Vixen Sarmina".fontcolor(r)+" and "+"Sanctum Guardian Ghalentus".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+bS.Q[s].PH1+"/4 toiling drudges slain</i><br>"),c+=o("<i id='qind2'>"+bS.Q[s].PH2+"/4 slavering corpses slain</i><br>"),c+=o("<i id='qind3'>"+bS.Q[s].PH3+"/4 fetid vagabonds slain</i><br>"),c+=o("<i id='qind4'>"+bS.Q[s].PH4+"/4 impulse servants slain</i><br>"),c+=o("<i id='qind5'>"+bS.Q[s].PH5+"/4 servants of corruption slain</i><br>"),c+=o("<i id='qind6'>"+bS.Q[s].PH6+"/4 embalmed vagrants slain</i><br>"),0===bS.Q[s].PH12?c+=o("<i id='qind7'>Slay Vixen Sarmina</i><br><br>"):c+=o("<i id='qind7'>Vixen Sarmina slain</i><br><br>"),c+=o("<i id='qind8'>"+bS.Q[s].PH7+"/5 ghastly indulgers slain</i><br>"),c+=o("<i id='qind8'>"+bS.Q[s].PH8+"/5 infected rodents slain</i><br>"),c+=o("<i id='qind9'>"+bS.Q[s].PH9+"/5 flittering menaces slain</i><br>"),c+=o("<i id='qind10'>"+bS.Q[s].PH10+"/5 hallowed harbingers slain</i><br>"),c+=o("<i id='qind11'>"+bS.Q[s].PH11+"/5 cephalid sorcerers slain</i><br>"),0===bS.Q[s].PH13?c+=o("Slay Sanctum Guardian Ghalentus<br><br>"):c+=o("Sanctum Guardian Ghalentus slain<br><br>")),y=!0))),bS.Q[s].PlaneofFear<=2&&bS.Q[s].PlaneofHate>=2&&(m="Nimgaul",u="Order Through Chaos",bS.Q[s].PlaneofFear<2?d+="<div class='questZones'>"+m+"</div><div class='QT'>"+Lv(u,Cv(54+v))+"</div>":bS.Q[s].PlaneofFear>=2&&(d+="<div class='questZones'>"+m+" (repeatable)</div><div class='QT'>"+Lv(u,Cv(54+v))+"</div>"),!1===y&&((g!==m&&"Fenwoven"!==g||a!==E)&&a!==u||(bS.Q[s].PlaneofFear<=2&&(i(u),b=N("Arwen: ")+"Not much is known about Nimgaul, "+Yy.name+". You are the first mortal to ever walk there. The most that is known about Nimgaul is that Nalatos and his minions are within.<br><br>The most that I was able to learn from the Fenwoven library is that Nalatos has a dragon named Falzitherin that patrols the plane. Falzitherin uses deadly poison magic, so you can make good use of poison resistance armor against him.<br><br>Once you eliminate all of his minions you may confront Nalatos. Defeat him and Vandamor shall be free from his wicked schemes.",!QL.nimgaul1&&bS.Q[s].PlaneofFear<=1&&(g===m&&0===p||"Fenwoven"===g)&&(QL.nimgaul1=1,Ry(b)),c=b+"<br><br>Slay all denizens of Nimgaul including "+"Falzitherin".fontcolor(r)+" and "+"Nalatos, God of Chaos".fontcolor(r)+".<br><br>",c+=o("<i id='qind1'>"+(bS.Q[s].PF1+"/3 wailing banshees slain</i><br>").fontcolor(l)),c+=o("<i id='qind2'>"+(bS.Q[s].PF2+"/3 festering dregs slain</i><br>").fontcolor(l)),c+=o("<i id='qind3'>"+(bS.Q[s].PF3+"/3 lurid nymphs slain</i><br>").fontcolor(l)),c+=o("<i id='qind4'>"+(bS.Q[s].PF4+"/3 peering menaces slain</i><br>").fontcolor(l)),0===bS.Q[s].PF18?c+=o("<i id='qind5'>"+"Slay Guardian of Misery</i><br><br>".fontcolor(l)):c+=o("<i id='qind5'>"+"Guardian of Misery slain</i><br><br>".fontcolor(l)),c+=o("<i id='qind6'>"+bS.Q[s].PF5+"/3 accursed slatterns slain</i><br>"),c+=o("<i id='qind7'>"+bS.Q[s].PF6+"/3 brooding fungus slain</i><br>"),c+=o("<i id='qind8'>"+bS.Q[s].PF7+"/3 cursed marionettes slain</i><br>"),c+=o("<i id='qind9'>"+bS.Q[s].PF8+"/3 tremulant imps slain</i><br>"),0===bS.Q[s].PF21?c+=o("<i id='qind10'>Slay Falzitherin</i><br><br>"):c+=o("<i id='qind10'>Falzitherin slain</i><br><br>"),c+=o("<i id='qind11'>"+bS.Q[s].PF9+"/3 deranged gorillas slain</i><br>"),c+=o("<i id='qind12'>"+bS.Q[s].PF10+"/3 boreal spiders slain</i><br>"),c+=o("<i id='qind13'>"+bS.Q[s].PF11+"/3 cephalid enticer slain</i><br>"),0===bS.Q[s].PF19?c+=o("<i id='qind14'>Slay Guardian of Strife</i><br><br>"):c+=o("<i id='qind14'>Guardian of Strife slain</i><br><br>"),c+=o("<i id='qind15'>"+bS.Q[s].PF12+"/3 panicked anurans slain</i><br>"),c+=o("<i id='qind16'>"+bS.Q[s].PF13+"/3 chaos punishers slain</i><br>"),c+=o("<i id='qind17'>"+bS.Q[s].PF14+"/3 chaos enforcers slain</i><br>"),0===bS.Q[s].PF20?c+=o("<i id='qind18'>Slay Guardian of Ruin</i><br><br>"):c+=o("<i id='qind18'>Guardian of Ruin slain</i><br><br>"),c+=o("<i id='qind19'>"+bS.Q[s].PF15+"/3 pustulant vessels slain</i><br>"),c+=o("<i id='qind20'>"+bS.Q[s].PF16+"/3 shrieking wisps slain</i><br>"),c+=o("<i id='qind21'>"+bS.Q[s].PF17+"/3 sorrow slitherers slain</i><br>"),0===bS.Q[s].PF22?c+=o("Slay Nalatos, God of Chaos"):c+=o("Nalatos, God of Chaos slain")),y=!0))),a===E){mS.getElementById("QindicatorHead").textContent=f;mS.getElementById("QindicatorContent").innerHTML=h}mS.getElementById("questJournalContent").innerHTML=d,mS.getElementById("questJournalContent2").innerHTML=c;if(""!==e("#QindicatorHead").html()){var k=qn(),S=Pn();""!==S&&(k+=" "+S);var I=0;e(".questZones").each(function(){-1!==this.textContent.indexOf(k)&&(this.nextSibling.style.backgroundColor="#002a5a",cS.to(this.nextSibling,.75,{backgroundColor:"#004aaa",repeat:-1,yoyo:!0}),I=this.offsetTop)}),a||cS.delayedCall(0,function(){mS.getElementById("questJournalContent").scrollTop=I})}}}function xv(e){e===E&&(e=24);var a=0;2===zy.difficulty?a=25:3===zy.difficulty&&(a=44);var n=10,t=qn();"Aspen Grove"===t?n=25:"Artremia"===t?n=40:"Fenwoven"===t&&(n=55),n+=a,Wy[0].level=n;var i=jv(n),o=Yv(0,i,zv(0)),r=o[0],l=o[1],s=o[2],d=o[3],c=o[4],m=o[5],u=o[6],f=o[7],h=1;if(100*dS.random()>75&&(h=2),e+1>bS.item.length){bS.item[e]={};for(var g=0,p=zy.key.length;g<p;g++)bS.item[e][zy.key[g]]=zy.val[g]}else for(var g=0,p=zy.key.length;g<p;g++)bS.item[e][zy.key[g]]=zy.val[g];if(bS.item[e].rarity=h,bS.item[e].itemSlot=i,bS.item[e].xPos=l,bS.item[e].yPos=s,bS.item[e].name=d,bS.item[e].armor=r,bS.item[e].damage=c,bS.item[e].delay=m,bS.item[e].type=u,bS.item[e].quality=f,2===h){var b=dS.ceil(3*dS.random()),v=dS.ceil(3*dS.random());1===b&&1===v&&(v+=1);for(y=1;y<=b;y++)$v(e,i,u,0,d);for(var y=1;y<=v;y++)Uv(e,i,u,0,d);bS.item[e].name=Wv(i,u,d)}1===h&&(dS.random()<=.5?($v(e,i,u,0,d),dS.random()>.5&&Uv(e,i,u,0,d)):(Uv(e,i,u,0,d),dS.random()<=.5&&$v(e,i,u,0,d))),bS.item[e].enhancedDamage&&(bS.item[e].damage+=bS.item[e].enhancedDamage),bS.item[e].enhancedArmor&&(bS.item[e].armor=bS.item[e].armor+dS.round(bS.item[e].armor*(bS.item[e].enhancedArmor/100))),bS.item[e].ias&&(bS.item[e].delay=bS.item[e].delay*(1-bS.item[e].ias),bS.item[e].delay=dS.round(bS.item[e].delay/100),bS.item[e].delay*=100,bS.item[e].ias=dS.round(100*bS.item[e].ias)),ky(e),e<=43&&xv(++e)}function Ev(){var e=Qk;"One-Hand Slashing"===e&&(Rk=Yy.oneHandSlash),"Two-Hand Slashing"===e&&(Rk=Yy.twoHandSlash),"One-Hand Blunt"===e&&(Rk=Yy.oneHandBlunt),"Two-Hand Blunt"===e&&(Rk=Yy.twoHandBlunt),"Piercing"===e&&(Rk=Yy.piercing),"Hand to Hand"===e&&(Rk=Yy.handtohand),"Offense"===e&&(Rk=Yy.offense),"Dual Wield"===e&&(Rk=Yy.dualWield),"Double Attack"===e&&(Rk=Yy.doubleAttack),"Defense"===e&&(Rk=Yy.defense),"Dodge"===e&&(Rk=Yy.dodge),"Parry"===e&&(Rk=Yy.parry),"Riposte"===e&&(Rk=Yy.riposte),"Alteration"===e&&(Rk=Yy.alteration),"Evocation"===e&&(Rk=Yy.evocation),"Conjuration"===e&&(Rk=Yy.conjuration),"Abjuration"===e&&(Rk=Yy.abjuration),"Channeling"===e&&(Rk=Yy.channeling);var a=Rk;Rk=.7*Rk+1,a>50&&(Rk+=.25*Rk),a>100&&(Rk+=.25*Rk),a>150&&(Rk+=.25*Rk),a>200&&(Rk+=.25*Rk),_I=Rk=~~Rk}function Gv(){for(var e=1;e<=12;e++)Yy["talent"+e]=0;"Wizard"===Yy.job&&gn(),_v(),ny(),qD&&pb()}function qv(){function a(){e("#campId").css("display","block");var a=t.upgrade,n=0,i=0,s=0,d=0,c=!0;0===a&&(n=1,i=2,s=1,d=3),1===a&&(n=1,i=2,s=1,d=3),2===a&&(n=1,i=2,s=1,d=3),3===a&&(n=1,i=2,s=1,d=3),4===a&&(n=1,i=2,s=1,d=4),5===a&&(n=1,i=2,s=1,d=4),6===a&&(n=2,i=4,s=2,d=6),7===a&&(n=2,i=4,s=2,d=6),8===a&&(n=2,i=4,s=2,d=8),9===a&&(n=3,i=6,s=3,d=10);var m=qy(t.name,t.rarity);e.ajax({url:"/classic/php/town1.php",data:{run:"buyUpgrade",cost:Rk,name:Yy.name}}).done(function(a){!function(){if(Yy.gold-=Rk,mS.getElementById("cityGold").innerHTML="<div id='goldIcon' class='goldIcon'></div> "+Yy.gold,e("#inventoryGoldAmount").text(Yy.gold),!0===c){if(zy.unlockScreen(),Qa("upgrade"),bS.item[Ok].upgrade+=1,JI?("slashed"!==t.type&&"crushed"!==t.type&&"pierced"!==t.type&&"offhand"!==t.type||(bS.item[Ok].enhancePhysical=parseInt(t.enhancePhysical+n),fa(cw+' says, "Success! '+m+" has been upgraded with +"+n+'% physical damage!"')),"cleaved"!==t.type&&"smashed"!==t.type&&"staff"!==t.type||(bS.item[Ok].enhancePhysical=parseInt(t.enhancePhysical+i),fa(cw+' says, "Success! '+m+" has been upgraded with +"+i+'% physical damage!"'))):((t.enhanceAll===E||isNaN(t.enhanceAll))&&(bS.item[Ok].enhanceAll=0),"slashed"!==t.type&&"crushed"!==t.type&&"pierced"!==t.type&&"offhand"!==t.type||(bS.item[Ok].enhanceAll=parseInt(t.enhanceAll+n),fa(cw+' says, "Success! '+m+" has been upgraded with +"+n+'% magical damage!"')),"cleaved"!==t.type&&"smashed"!==t.type&&"staff"!==t.type||(bS.item[Ok].enhanceAll=parseInt(t.enhanceAll+i),fa(cw+' says, "Success! '+m+" has been upgraded with +"+i+'% magical damage!"'))),"cloth"===t.type||"leather"===t.type||"chain"===t.type||"plate"===t.type||"shield"===t.type){bS.item[Ok].allResist+=s;var a=dS.round(t.armor*(d/100));a<1&&(a=1),bS.item[Ok].armor+=a,fa(cw+' says, "Success! I upgraded '+m+" with +"+a+" armor and +"+s+' all resistances!"')}Yy.upgrades+=1,l.stop(!0,!0).css({display:"none",top:r,left:o}),e("#blackOverlay").css("display","none"),Ty(),UI=!1,JI=!0}gS.item(Ok),gS.my()}()}),ny(),e("#upgradeOK").text("Ok"),e("#upgradeCANCEL").text("Cancel")}function n(e){if(!(e>s-500)){var a=dS.random();Qa(a>.66?"repair":a<.33?"shldblk":"bashshld");var i=200*dS.random()+(500-50*t.upgrade);e+=i,cS.to(l,.1,{top:r+4*dS.random()+2,left:o+6*dS.random()-3,onComplete:function(){cS.to(l,.1,{top:r,left:o})}}),cS.delayedCall(i/1e3,function(){n(e)})}}var t=bS.item[Ok];if($I){if(t.upgrade>=10)return xy("That item cannot be upgraded anymore."),void Fa();if(Yy.gold<Rk)xy("You don't have enough gold.");else{if("Ok"===e("#upgradeOK").text()&&("slashed"===t.type||"crushed"===t.type||"pierced"===t.type||"cleaved"===t.type||"smashed"===t.type||"offhand"===t.type||"staff"===t.type))return UI=!0,e("#upgradeOK").text("Physical"),e("#upgradeCANCEL").text("Magical"),void e("#upgradeConfirm2").html("Upgrade this weapon with physical or magical damage?");if("cloth"===t.type||"leather"===t.type||"chain"===t.type||"plate"===t.type||"slashed"===t.type||"crushed"===t.type||"pierced"===t.type||"cleaved"===t.type||"smashed"===t.type||"shield"===t.type||"offhand"===t.type||"staff"===t.type){fa(("You spent "+Rk+" gold upgrading ").fontcolor("#00aa00")+qy(t.name,t.rarity)+"."),e("#campId").css("display","none"),zy.lockScreen();var i=e("#upgradeBar");i.width(0);var o=486,r=430,l=e("#upgradeWrap");l.stop(!0,!0).css("display","block");var s=2e3;n(0),cS.to(i,2,{width:300,onComplete:function(){a()}})}else xy("That type of item cannot be upgraded."),Fa(),UI=!1,JI=!0}}else xy("You must select an item to upgrade first.")}function Pv(){t=e("#"+Wk);if(aw)xy("You can't sell the merchant's items.");else{var a=bS.item[Ok];if(""!==a.name)if(!1===Aw)xy("You must select an item to sell first.");else{if(!0===t.hasClass("bank"))return void xy("You cannot sell items from your bank.");if(!0===t.hasClass("equipment"))return void xy("You cannot sell items that you are wearing.");if(!0===t.hasClass("inventory")){var n=Qv(Ok);Qa("buyitem");fa("You sold "+qy(a.name,a.rarity)+" for "+n+" gold.",5),e.ajax({url:"/classic/php/town1.php",data:{run:"sellItem",cost:n,name:Yy.name}}).done(function(a){Yy.gold+=n,Yy.gold>999999999&&(Yy.gold=999999999),e("#cityGold").html("<div id='goldIcon' class='goldIcon'></div> "+Yy.gold),e("#inventoryGoldAmount").text(Yy.gold),ny()}),Ba();for(var t=0,i=zy.key.length;t<i;t++)a[zy.key[t]]=zy.val[t];Cy(Ok),gS.item(Ok),NG.ttItem.style.display="none"}}else Ba()}}function Qv(e){if(aw||e>23)a=15;else var a=5;if(bS.item[e].enhancedDamage&&(a+=bS.item[e].enhancedDamage),bS.item[e].ias&&(a+=bS.item[e].ias),bS.item[e].armor&&(a+=15*bS.item[e].armor),"ring"!==bS.item[e].itemSlot&&"amulet"!==bS.item[e].itemSlot||(a+=100),!bS.item[e].damage||"slashed"!==bS.item[e].type&&"pierced"!==bS.item[e].type&&"crushed"!==bS.item[e].type||(a+=110*bS.item[e].damage),!bS.item[e].damage||"cleaved"!==bS.item[e].type&&"smashed"!==bS.item[e].type&&"staff"!==bS.item[e].type&&"range"!==bS.item[e].itemSlot&&"offhand"!==bS.item[e].type||(a+=55*bS.item[e].damage),bS.item[e].weight&&(a+=50),bS.item[e].hp&&(a+=15*bS.item[e].hp),bS.item[e].mp&&(a+=15*bS.item[e].mp),bS.item[e].str&&(a+=15*bS.item[e].str),bS.item[e].sta&&(a+=15*bS.item[e].sta),bS.item[e].agi&&(a+=15*bS.item[e].agi),bS.item[e].dez&&(a+=15*bS.item[e].dez),bS.item[e].intel&&(a+=15*bS.item[e].intel),bS.item[e].wis&&(a+=15*bS.item[e].wis),bS.item[e].cha&&(a+=15*bS.item[e].cha),bS.item[e].allStats&&(a+=300*bS.item[e].allStats),bS.item[e].hpRegen&&(a+=25*bS.item[e].hpRegen),bS.item[e].mpRegen&&(a+=25*bS.item[e].mpRegen),bS.item[e].attack&&(a+=40*bS.item[e].attack),bS.item[e].oneHandSlash&&(a+=50*bS.item[e].oneHandSlash),bS.item[e].twoHandSlash&&(a+=50*bS.item[e].twoHandSlash),bS.item[e].oneHandBlunt&&(a+=50*bS.item[e].oneHandBlunt),bS.item[e].twoHandBlunt&&(a+=50*bS.item[e].twoHandBlunt),bS.item[e].piercing&&(a+=50*bS.item[e].piercing),bS.item[e].handtohand&&(a+=50*bS.item[e].handtohand),bS.item[e].offense&&(a+=50*bS.item[e].offense),bS.item[e].dualWield&&(a+=50*bS.item[e].dualWield),bS.item[e].doubleAttack&&(a+=50*bS.item[e].doubleAttack),bS.item[e].defense&&(a+=50*bS.item[e].defense),bS.item[e].dodge&&(a+=50*bS.item[e].dodge),bS.item[e].parry&&(a+=50*bS.item[e].parry),bS.item[e].riposte&&(a+=50*bS.item[e].riposte),bS.item[e].alteration&&(a+=50*bS.item[e].alteration),bS.item[e].evocation&&(a+=50*bS.item[e].evocation),bS.item[e].conjuration&&(a+=50*bS.item[e].conjuration),bS.item[e].abjuration&&(a+=50*bS.item[e].abjuration),bS.item[e].channeling&&(a+=50*bS.item[e].channeling),bS.item[e].allSkills&&(a+=1e3*bS.item[e].allSkills),bS.item[e].critChance&&(a+=200*bS.item[e].critChance),bS.item[e].critDamage&&(a+=100*bS.item[e].critDamage),bS.item[e].phyMit&&(a+=10*bS.item[e].phyMit),bS.item[e].magMit&&(a+=10*bS.item[e].magMit),bS.item[e].resistPoison&&(a+=20*bS.item[e].resistPoison),bS.item[e].resistMagic&&(a+=20*bS.item[e].resistMagic),bS.item[e].resistLightning&&(a+=20*bS.item[e].resistLightning),bS.item[e].resistCold&&(a+=20*bS.item[e].resistCold),bS.item[e].resistFire&&(a+=20*bS.item[e].resistFire),bS.item[e].allResist&&(a+=300*bS.item[e].allResist),bS.item[e].goldFind&&(a+=10*bS.item[e].goldFind),bS.item[e].expFind&&(a+=10*bS.item[e].expFind),bS.item[e].thorns&&(a+=10*bS.item[e].thorns),bS.item[e].absorbPoison&&(a+=50*bS.item[e].absorbPoison),bS.item[e].absorbMagic&&(a+=50*bS.item[e].absorbMagic),bS.item[e].absorbLightning&&(a+=50*bS.item[e].absorbLightning),bS.item[e].absorbCold&&(a+=50*bS.item[e].absorbCold),bS.item[e].absorbFire&&(a+=50*bS.item[e].absorbFire),bS.item[e].hpKill&&(a+=10*bS.item[e].hpKill),bS.item[e].mpKill&&(a+=10*bS.item[e].mpKill),bS.item[e].physicalDamage&&(a+=10*bS.item[e].physicalDamage),bS.item[e].poisonDamage&&(a+=10*bS.item[e].poisonDamage),bS.item[e].magicDamage&&(a+=10*bS.item[e].magicDamage),bS.item[e].lightningDamage&&(a+=10*bS.item[e].lightningDamage),bS.item[e].coldDamage&&(a+=10*bS.item[e].coldDamage),bS.item[e].fireDamage&&(a+=10*bS.item[e].fireDamage),bS.item[e].enhancePhysical&&(a+=100*bS.item[e].enhancePhysical),bS.item[e].enhancePoison&&(a+=200*bS.item[e].enhancePoison),bS.item[e].enhanceMagic&&(a+=200*bS.item[e].enhanceMagic),bS.item[e].enhanceLightning&&(a+=200*bS.item[e].enhanceLightning),bS.item[e].enhanceCold&&(a+=200*bS.item[e].enhanceCold),bS.item[e].enhanceFire&&(a+=200*bS.item[e].enhanceFire),bS.item[e].enhanceAll&&(a+=100*bS.item[e].enhanceAll),bS.item[e].lightRadius&&(a+=5*bS.item[e].lightRadius),bS.item[e].fear&&(a+=10*bS.item[e].fear),bS.item[e].stun&&(a+=10*bS.item[e].stun),bS.item[e].cold&&(a+=10*bS.item[e].cold),bS.item[e].silence&&(a+=10*bS.item[e].silence),bS.item[e].leech&&(a+=50*bS.item[e].leech),bS.item[e].wraith&&(a+=50*bS.item[e].wraith),bS.item[e].runSpeed&&(a+=bS.item[e].runSpeed),bS.item[e].haste){a+=100*(n=bS.item[e].haste/10*-1)}if(bS.item[e].globalHaste){a+=100*(n=bS.item[e].globalHaste/10*-1)}if(bS.item[e].castingHaste){var n=bS.item[e].castingHaste/10*-1;a+=100*n}bS.item[e].proc&&(a+=200);var t=de();return e>23&&(a=dS.round(a-a*(t/1600))),e<=23&&(3===bS.item[e].rarity&&(a/=4),a/=8,(a=dS.round(a+a*(t/1600)))>250+15*Yy.level&&(a=250+15*Yy.level)),dS.ceil(a/4)}function Rv(e,a){bS.item[e].absorbPoison=a,bS.item[e].absorbMagic=a,bS.item[e].absorbLightning=a,bS.item[e].absorbCold=a,bS.item[e].absorbFire=a}function Fv(e,a,n,t,i,o){bS.item[e].resistPoison=a,bS.item[e].resistMagic=n,bS.item[e].resistLightning=t,bS.item[e].resistCold=i,bS.item[e].resistFire=o}function Nv(e,a,n,t,a){bS.item[e].stun=a,bS.item[e].fear=n,bS.item[e].cold=t,bS.item[e].silence=a}function jv(e){var a=100*dS.random(),n="shoulders";return"shoulders"===n&&e<10&&a<7&&(a=86*dS.random()+14),a>=7&&a<14&&(n="helmet"),"helmet"===n&&e<15&&(a=86*dS.random()+14),a>=14&&a<17&&(n="neck"),a>=17&&a<22&&(n="ring"),a>=22&&a<29&&(n="back"),a>=29&&a<36&&(n="chest"),a>=36&&a<43&&(n="bracers"),a>=43&&a<50&&(n="gloves"),a>=50&&a<57&&(n="belt"),a>=57&&a<64&&(n="legs"),a>=64&&a<71&&(n="boots"),a>=71&&a<88&&(n="weapons"),a>=88&&a<96&&(n="shield"),a>=96&&(n="range"),n}function zv(e){var a=.33*dS.random()+.33*dS.random()+.33*dS.random(),n=sa(),t=Wy[e].level;0===n?t>55&&(t=55):1===n?t>80&&(t=80):2===n&&t>99&&(t=99);var i=t*a;i<1&&(i=1);var o=Wy[e].level-i,r=dS.ceil(dS.random()*o+i);return r>99&&(r=99),r<1&&(r=1),r}function Yv(e,a,n){var t=0,i=0,o=0,r="",l=0,s=0,d="",c=0,m=n,u=1+~~(4*dS.random());if("helmet"===a&&(i=-64,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(d="cloth",1==u&&(t=2,o=0,r="Hood"),2==u&&(t=5,o=-64,r="Cap"),3==u&&(t=8,o=-128,r="Bandana"),4==u&&(t=12,o=-192,r="Diadem"),m>=49&&m<=76&&(c=1,t+=12),m>=77&&(c=2,t+=24)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(d="cloth",1==u&&(t=8,o=-256,r="Dark Hood"),2==u&&(t=9,o=-320,r="Coronet"),3==u&&(t=10,o=-384,r="Miter"),4==u&&(t=12,o=-448,r="Astral Hood"),m>=49&&m<=76&&(c=1,t+=12),m>=77&&(c=2,t+=24)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(d="chain",1==u&&(t=16,o=-512,r="Mail Hood"),2==u&&(t=20,o=-576,r="Coif"),3==u&&(t=22,o=-640,r="Armet"),4==u&&(t=24,o=-704,r="Sallet"),m>=49&&m<=76&&(c=1,t+=24),m>=77&&(c=2,t+=48)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(d="plate",1==u&&(t=24,o=-768,r="Burgonet"),2==u&&(t=26,o=-832,r="Great Helm"),3==u&&(t=28,o=-896,r="Barbute"),4==u&&(t=30,o=-960,r="Royal Helm"),m>=49&&m<=76&&(c=1,t+=30),m>=77&&(c=2,t+=60))),"neck"===a){i=0,r="Amulet";1===(f=~~(1+5*dS.random()))&&(o=-64),2===f&&(o=-128),3===f&&(o=-192),4===f&&(o=-256),5===f&&(o=-320),m>=49&&m<=76&&(c=1),m>=77&&(c=2)}if("ring"===a){i=0,r="Ring";var f=~~(1+4*dS.random());1===f&&(o=-384),2===f&&(o=-448),3===f&&(o=-512),4===f&&(o=-576),m>=49&&m<=76&&(c=1),m>=77&&(c=2)}if("shoulders"===a&&(i=-128,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1==u&&(t=2,o=0,r="Cloth Drape"),2==u&&(t=7,o=-256,r="Leather Shoulders"),3==u&&(t=9,o=-512,r="Scaled Mantle"),4==u&&(t=12,o=-768,r="Cobalt Spaulders")),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1==u&&(t=4,o=-64,r="Woven Drape"),2==u&&(t=10,o=-320,r="Studded Shoulders"),3==u&&(t=12,o=-576,r="Chain Mantle"),4==u&&(t=16,o=-832,r="Mithril Pauldrons")),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1==u&&(t=7,o=-128,r="Azure Shawl"),2==u&&(t=12,o=-384,r="Spiked Shoulders"),3==u&&(t=16,o=-640,r="Kusari Mantle"),4==u&&(t=20,o=-896,r="Sode")),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1==u&&(t=10,o=-192,r="Archon Shawl"),2==u&&(t=16,o=-448,r="Brigand Shoulders"),3==u&&(t=20,o=-704,r="Laminar Mantle"),4==u&&(t=24,o=-960,r="Monarch Pauldrons")),1===u&&(d="cloth",m>=49&&m<=76&&(c=1,t+=10),m>=77&&(c=2,t+=20)),2===u&&(d="leather",m>=49&&m<=76&&(c=1,t+=16),m>=77&&(c=2,t+=32)),3===u&&(d="chain",m>=49&&m<=76&&(c=1,t+=20),m>=77&&(c=2,t+=40)),4===u&&(d="plate",m>=49&&m<=76&&(c=1,t+=25),m>=77&&(c=2,t+=50))),"back"===a&&(i=-192,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1===u&&(t=1,o=0,r="Cape"),2===u&&(t=2,o=-64,r="Cloak"),3===u&&(t=3,o=-128,r="Woven Cloak"),4===u&&(t=4,o=-192,r="Fur-Lined Cloak")),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1===u&&(t=4,o=-256,r="Drake-hide Cloak"),2===u&&(t=5,o=-320,r="Brigand's Shroud"),3===u&&(t=5,o=-384,r="Regal Shroud"),4===u&&(t=5,o=-448,r="Orcish Cloak")),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1===u&&(t=6,o=-512,r="Elven Shroud"),2===u&&(t=7,o=-576,r="Emerald Cloak"),3===u&&(t=7,o=-640,r="Aviak Cloak"),4===u&&(t=8,o=-704,r="Chlamys")),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1===u&&(t=8,o=-768,r="Burnt Cape"),2===u&&(t=9,o=-832,r="Umbral Shroud"),3===u&&(t=9,o=-896,r="Archon Cloak"),4===u&&(t=10,o=-960,r="Astral Cloak")),1===u&&(m>=49&&m<=76&&(c=1,t+=15),m>=77&&(c=2,t+=30)),2===u&&(m>=49&&m<=76&&(c=1,t+=15),m>=77&&(c=2,t+=30)),3===u&&(m>=49&&m<=76&&(c=1,t+=15),m>=77&&(c=2,t+=30)),4===u&&(m>=49&&m<=76&&(c=1,t+=15),m>=77&&(c=2,t+=30))),"chest"===a&&(i=-256,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1==u&&(t=4,o=0,r="Elven Robe"),2==u&&(t=11,o=-256,r="Quilted Tunic"),3==u&&(t=14,o=-512,r="Chain Mail"),4==u&&(t=16,o=-768,r="Breast Plate")),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1==u&&(t=7,o=-64,r="Silk Robe"),2==u&&(t=16,o=-320,r="Spiked Vestment"),3==u&&(t=20,o=-576,r="Ring Mail"),4==u&&(t=24,o=-832,r="Cuirass")),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1==u&&(t=11,o=-128,r="Linen Robe"),2==u&&(t=20,o=-384,r="Leather Armor"),3==u&&(t=24,o=-640,r="Scale Mail"),4==u&&(t=30,o=-896,r="Gothic Plate")),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1==u&&(t=14,o=-192,r="Azure Robe"),2==u&&(t=24,o=-448,r="Studded Leather"),3==u&&(t=30,o=-704,r="Kusari Mail"),4==u&&(t=38,o=-960,r="Archon Plate")),1===u&&(d="cloth",m>=49&&m<=76&&(c=1,t+=15),m>=77&&(c=2,t+=30)),2===u&&(d="leather",m>=49&&m<=76&&(c=1,t+=24),m>=77&&(c=2,t+=48)),3===u&&(d="chain",m>=49&&m<=76&&(c=1,t+=31),m>=77&&(c=2,t+=62)),4===u&&(d="plate",m>=49&&m<=76&&(c=1,t+=38),m>=77&&(c=2,t+=76))),"bracers"===a&&(i=-320,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1==u&&(t=3,o=0,r="Jade Bracers"),2==u&&(t=8,o=-256,r="Leather Bracers"),3==u&&(t=10,o=-512,r="Scaled Bracers"),4==u&&(t=12,o=-768,r="Bronze Bracers")),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1==u&&(t=4,o=-64,r="Bone Bracers"),2==u&&(t=10,o=-320,r="Patent Bracers"),3==u&&(t=12,o=-576,r="Laminar Bracers"),4==u&&(t=16,o=-832,r="Cobalt Bracers")),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1==u&&(t=7,o=-128,r="Sapphire Bracers"),2==u&&(t=12,o=-384,r="Bonded Bracers"),3==u&&(t=16,o=-640,r="Splinted Bracers"),4==u&&(t=20,o=-896,r="Tetrarch Bracers")),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1==u&&(t=10,o=-192,r="Opulent Bracers"),2==u&&(t=16,o=-448,r="Elven Bracers"),3==u&&(t=20,o=-704,r="Kusari Bracers"),4==u&&(t=24,o=-960,r="Gilded Bracers")),1===u&&(d="cloth",m>=49&&m<=76&&(c=1,t+=10),m>=77&&(c=2,t+=20)),2===u&&(d="leather",m>=49&&m<=76&&(c=1,t+=16),m>=77&&(c=2,t+=32)),3===u&&(d="chain",m>=49&&m<=76&&(c=1,t+=20),m>=77&&(c=2,t+=40)),4===u&&(d="plate",m>=49&&m<=76&&(c=1,t+=25),m>=77&&(c=2,t+=50))),"gloves"===a&&(i=-384,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1==u&&(t=3,o=0,r="Gloves"),2==u&&(t=8,o=-256,r="Rawhide Gloves"),3==u&&(t=10,o=-512,r="Lamellar Gauntlets"),4==u&&(t=12,o=-768,r="Cobalt Gauntlets")),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1==u&&(t=5,o=-64,r="Cloth Gloves"),2==u&&(t=10,o=-320,r="Drakescale Gloves"),3==u&&(t=12,o=-576,r="Banded Gauntlets"),4==u&&(t=16,o=-832,r="Ornate Gauntlets")),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1==u&&(t=8,o=-128,r="Woven Gloves"),2==u&&(t=12,o=-384,r="Sharkskin Gloves"),3==u&&(t=16,o=-640,r="Kusari Gauntlets"),4==u&&(t=20,o=-896,r="Tetrarch Gauntlets")),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1==u&&(t=10,o=-192,r="Mesh Gloves"),2==u&&(t=16,o=-448,r="Studded Gloves"),3==u&&(t=20,o=-704,r="Brigandine Gauntlets"),4==u&&(t=24,o=-960,r="Gilded Gauntlets")),1===u&&(d="cloth",m>=49&&m<=76&&(c=1,t+=10),m>=77&&(c=2,t+=20)),2===u&&(d="leather",m>=49&&m<=76&&(c=1,t+=16),m>=77&&(c=2,t+=32)),3===u&&(d="chain",m>=49&&m<=76&&(c=1,t+=20),m>=77&&(c=2,t+=40)),4===u&&(d="plate",m>=49&&m<=76&&(c=1,t+=25),m>=77&&(c=2,t+=50))),"belt"===a&&(i=-448,(m<=24||m>=49&&m<=62||m>=77&&m<=88)&&(1==u&&(t=2,o=0,r="Sash"),2==u&&(t=7,o=-128,r="Leather Belt"),3==u&&(t=10,o=-256,r="Mesh Belt"),4==u&&(t=12,o=-384,r="Monarch Girdle")),(m>24&&m<=48||m>=63&&m<=76||m>=89)&&(1==u&&(t=7,o=-64,r="Azure Sash"),2==u&&(t=12,o=-192,r="Heavy Belt"),3==u&&(t=16,o=-320,r="Splinted Belt"),4==u&&(t=20,o=-448,r="Mithril Girdle")),1===u&&(d="cloth",m>=49&&m<=76&&(c=1,t+=8),m>=77&&(c=2,t+=16)),2===u&&(d="leather",m>=49&&m<=76&&(c=1,t+=12),m>=77&&(c=2,t+=24)),3===u&&(d="chain",m>=49&&m<=76&&(c=1,t+=16),m>=77&&(c=2,t+=32)),4===u&&(d="plate",m>=49&&m<=76&&(c=1,t+=20),m>=77&&(c=2,t+=40))),"legs"===a&&(i=-512,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1==u&&(t=2,o=0,r="Pants"),2==u&&(t=8,o=-256,r="Fur Pants"),3==u&&(t=10,o=-512,r="Scaled Legs"),4==u&&(t=14,o=-768,r="Cobalt Legplates")),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1==u&&(t=5,o=-64,r="Cotton Pants"),2==u&&(t=12,o=-320,r="Wolf-Hide Pants "),3==u&&(t=14,o=-576,r="Chausses"),4==u&&(t=18,o=-832,r="Iron Legplates")),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1==u&&(t=9,o=-128,r="Linen Pants"),2==u&&(t=16,o=-384,r="Sharkskin Legs"),3==u&&(t=20,o=-640,r="Kusazuri"),4==u&&(t=24,o=-896,r="Mithril Legplates")),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1==u&&(t=12,o=-192,r="Silk Leggings"),2==u&&(t=20,o=-448,r="Studded Legs"),3==u&&(t=24,o=-704,r="Poleyn"),4==u&&(t=28,o=-960,r="Royal Legplates")),1===u&&(d="cloth",m>=49&&m<=76&&(c=1,t+=12),m>=77&&(c=2,t+=24)),2===u&&(d="leather",m>=49&&m<=76&&(c=1,t+=20),m>=77&&(c=2,t+=40)),3===u&&(d="chain",m>=49&&m<=76&&(c=1,t+=24),m>=77&&(c=2,t+=48)),4===u&&(d="plate",m>=49&&m<=76&&(c=1,t+=30),m>=77&&(c=2,t+=60))),"boots"===a&&(i=-448,(m<=24||m>=49&&m<=62||m>=77&&m<=88)&&(1==u&&(t=3,o=-512,r="Boots"),2==u&&(t=9,o=-640,r="Heavy Boots"),3==u&&(t=11,o=-768,r="Chain Boots"),4==u&&(t=14,o=-896,r="Steel Boots")),(m>24&&m<=48||m>=63&&m<=76||m>=89)&&(1==u&&(t=9,o=-576,r="Light Boots"),2==u&&(t=15,o=-704,r="Sharkskin Boots"),3==u&&(t=19,o=-832,r="Sovereign Boots"),4==u&&(t=24,o=-960,r="Sabatons")),1===u&&(d="cloth",m>=49&&m<=76&&(c=1,t+=10),m>=77&&(c=2,t+=20)),2===u&&(d="leather",m>=49&&m<=76&&(c=1,t+=16),m>=77&&(c=2,t+=32)),3===u&&(d="chain",m>=49&&m<=76&&(c=1,t+=20),m>=77&&(c=2,t+=40)),4===u&&(d="plate",m>=49&&m<=76&&(c=1,t+=25),m>=77&&(c=2,t+=50))),"weapons"===a){var h=dS.random();h<.25&&(i=-576,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1!==u&&2!==u||(o=0,r="Sword",l=3,s=3300),3!==u&&4!==u||(o=-64,r="Scimitar",l=3,s=3e3),m>=49&&m<=76&&(c=1,l+=5),m>=77&&(c=2,l+=10)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(o=-128,r="Axe",l=4,s=3600),3!==u&&4!==u||(o=-192,r="Claws",l=4,s=3200),m>=49&&m<=76&&(c=1,l+=5),m>=77&&(c=2,l+=10)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1!==u&&2!==u||(o=-256,r="Long Sword",l=5,s=3500),3!==u&&4!==u||(o=-320,r="Chokuto",l=6,s=3600),m>=49&&m<=76&&(c=1,l+=5),m>=77&&(c=2,l+=10)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(o=-384,r="War Axe",l=7,s=3500),3!==u&&4!==u||(o=-448,r="Kusanagi",l=8,s=3200),m>=49&&m<=76&&(c=1,l+=4),m>=77&&(c=2,l+=8)),d="slashed"),h>=.25&&h<.5&&(i=-640,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1!==u&&2!==u||(o=0,r="Mace",l=4,s=4200),3!==u&&4!==u||(o=-64,r="Club",l=4,s=3800),m>=49&&m<=76&&(c=1,l+=6),m>=77&&(c=2,l+=12)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(o=-128,r="Morning Star",l=5,s=4200),3!==u&&4!==u||(o=-192,r="Spiked Club",l=5,s=3800),m>=49&&m<=76&&(c=1,l+=6),m>=77&&(c=2,l+=12)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1!==u&&2!==u||(o=-256,r="Jagged Star",l=6,s=4e3),3!==u&&4!==u||(o=-320,r="Scepter",l=7,s=4100),m>=49&&m<=76&&(c=1,l+=6),m>=77&&(c=2,l+=12)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(o=-384,r="Cudgel",l=8,s=3900),3!==u&&4!==u||(o=-448,r="Caduceus",l=9,s=3500),m>=49&&m<=76&&(c=1,l+=4),m>=77&&(c=2,l+=9)),d="crushed"),h>=.5&&h<.75&&(i=-704,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1!==u&&2!==u||(o=0,r="Dagger",l=2,s=2400),3!==u&&4!==u||(o=-64,r="Dirk",l=3,s=3100),m>=49&&m<=76&&(c=1,l+=5),m>=77&&(c=2,l+=8)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(o=-128,r="Kris",l=3,s=2800),3!==u&&4!==u||(o=-192,r="Poignard",l=3,s=2500),m>=49&&m<=76&&(c=1,l+=5),m>=77&&(c=2,l+=8)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1!==u&&2!==u||(o=-256,r="Rondel",l=4,s=2900),3!==u&&4!==u||(o=-320,r="Spear",l=4,s=2600),m>=49&&m<=76&&(c=1,l+=5),m>=77&&(c=2,l+=10)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(o=-384,r="Cinquedeas",l=5,s=2600),3!==u&&4!==u||(o=-448,r="Stiletto",l=6,s=2500),m>=49&&m<=76&&(c=1,l+=3),m>=77&&(c=2,l+=7)),d="pierced"),h>=.75&&h<.85&&(i=-576,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1!==u&&2!==u||(o=-512,r="Giant Sword",l=5,s=4200),3!==u&&4!==u||(o=-576,r="Giant Axe",l=6,s=4400),m>=49&&m<=76&&(c=1,l+=12),m>=77&&(c=2,l+=24)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(o=-640,r="Champion Sword",l=7,s=4400),3!==u&&4!==u||(o=-704,r="Bastard Sword",l=8,s=4200),m>=49&&m<=76&&(c=1,l+=13),m>=77&&(c=2,l+=26)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1!==u&&2!==u||(o=-768,r="Gothic Axe",l=10,s=4200),3!==u&&4!==u||(o=-832,r="Katana",l=11,s=4e3),m>=49&&m<=76&&(c=1,l+=13),m>=77&&(c=2,l+=26)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(o=-896,r="Colossus Sword",l=13,s=4100),3!==u&&4!==u||(o=-960,r="Mythical Sword",l=16,s=4200),m>=49&&m<=76&&(c=1,l+=12),m>=77&&(c=2,l+=26)),d="cleaved"),h>=.85&&(dS.random()<.65?(i=-640,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1!==u&&2!==u||(o=-512,r="Giant Mace",l=6,s=4800),3!==u&&4!==u||(o=-576,r="Auric Maul",l=7,s=4900),m>=49&&m<=76&&(c=1,l+=15),m>=77&&(c=2,l+=30)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(o=-640,r="Mallet",l=8,s=4800),3!==u&&4!==u||(o=-704,r="Ogre Maul",l=9,s=4500),m>=49&&m<=76&&(c=1,l+=15),m>=77&&(c=2,l+=30)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1!==u&&2!==u||(o=-768,r="Great Maul",l=11,s=4400),3!==u&&4!==u||(o=-832,r="Sledgehammer",l=13,s=4600),m>=49&&m<=76&&(c=1,l+=14),m>=77&&(c=2,l+=30)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(o=-896,r="Umbral Hammer",l=15,s=4500),3!==u&&4!==u||(o=-960,r="Thunder Maul",l=11,s=4500),m>=49&&m<=76&&(c=1,l+=13),m>=77&&(c=2,l+=27)),d="smashed"):(i=0,(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(o=-640,r="Staff",l=5,s=4800,m>=49&&m<=76&&(c=1,l+=15),m>=77&&(c=2,l+=30)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(o=-704,r="Runic Staff",l=7,s=4600),3!==u&&4!==u||(o=-768,r="Cedar Staff",l=10,s=4500),m>=49&&m<=76&&(c=1,l+=15),m>=77&&(c=2,l+=30)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(o=-832,r="Quarterstaff",l=12,s=4600,m>=49&&m<=76&&(c=1,l+=14),m>=77&&(c=2,l+=30)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(o=-896,r="Cosmic Staff",l=14,s=4600),3!==u&&4!==u||(o=-960,r="Archon Staff",l=11,s=4500),m>=49&&m<=76&&(c=1,l+=13),m>=77&&(c=2,l+=27)),d="staff"))}return"shield"===a&&(i=-768,d="shield",dS.random()>.5?((m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1!==u&&2!==u||(t=6,o=0,r="Buckler"),3!==u&&4!==u||(t=13,o=-64,r="Small Shield"),m>=49&&m<=76&&(c=1,t+=15),m>=77&&(c=2,t+=30)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(t=17,o=-128,r="Kite Shield"),3!==u&&4!==u||(t=24,o=-192,r="Round Shield"),m>=49&&m<=76&&(c=1,t+=24),m>=77&&(c=2,t+=48)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1!==u&&2!==u||(t=26,o=-256,r="Gothic Shield"),3!==u&&4!==u||(t=30,o=-320,r="Crown Shield"),m>=49&&m<=76&&(c=1,t+=31),m>=77&&(c=2,t+=62)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(t=33,o=-384,r="Aegis"),3!==u&&4!==u||(t=38,o=-448,r="Monarch"),m>=49&&m<=76&&(c=1,t+=38),m>=77&&(c=2,t+=76))):(d="offhand",(m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1!==u&&2!==u||(o=-512,r="Stein"),3!==u&&4!==u||(o=-576,r="Dark Orb")),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(o=-640,r="Ancient Tome"),3!==u&&4!==u||(o=-704,r="Totem")),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1!==u&&2!==u||(o=-768,r="Crystal Ball"),3!==u&&4!==u||(o=-832,r="Skull")),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(o=-896,r="Emblazoned Orb"),3!==u&&4!==u||(o=-960,r="Idol")),m>=49&&m<=76&&(c=1),m>=77&&(c=2))),"range"===a&&(i=-704,dS.random()<.7?((m<=12||m>=49&&m<=54||m>=77&&m<=82)&&(1!==u&&2!==u||(o=-512,r="Short Bow",l=5,s=3900),3!==u&&4!==u||(o=-512,r="Hunter's Bow",l=6,s=4100),m>=49&&m<=76&&(c=1,l+=12),m>=77&&(c=2,l+=24)),(m>12&&m<=24||m>=55&&m<=62||m>=83&&m<=88)&&(1!==u&&2!==u||(o=-576,r="Composite Bow",l=7,s=4100),3!==u&&4!==u||(o=-640,r="Siege Bow",l=8,s=3900),m>=49&&m<=76&&(c=1,l+=12),m>=77&&(c=2,l+=25)),(m>24&&m<=36||m>=63&&m<=69||m>=89&&m<=94)&&(1!==u&&2!==u||(o=-704,r="Astral Bow",l=10,s=3900),3!==u&&4!==u||(o=-704,r="Gothic Bow",l=11,s=3700),m>=49&&m<=76&&(c=1,l+=11),m>=77&&(c=2,l+=24)),(m>36&&m<=48||m>=70&&m<=76||m>=95)&&(1!==u&&2!==u||(o=-768,r="Ward Bow",l=13,s=3800),3!==u&&4!==u||(o=-768,r="Hydra Bow",l=16,s=3900),m>=49&&m<=76&&(c=1,l+=11),m>=77&&(c=2,l+=23)),d="range"):((m<=16||m>=49&&m<=58||m>=77&&m<=85)&&(o=-832,r="Trinket"),(m>16&&m<=32||m>=59&&m<=67||m>=86&&m<=92)&&(o=-896,r="Memento"),(m>32&&m<=48||m>=68&&m<=76||m>=93)&&(o=-960,r="Charm"),m>=49&&m<=76&&(c=1),m>=77&&(c=2),d="trinket")),[dS.ceil(t),i,o,r,l,s,d,c]}function Kv(){for(var e=!1,a=23;a>=0;a--)bS.item[a].name||(e=a);return e}function Wv(e,a,n){var t=n,i="Beast",o=~~(1+42*dS.random());1===o&&(i="Armageddon"),2===o&&(i="Beast"),3===o&&(i="Bitter"),4===o&&(i="Blood"),5===o&&(i="Bone"),6===o&&(i="Bramble"),7===o&&(i="Brimstone"),8===o&&(i="Carrion"),9===o&&(i="Chaos"),10===o&&(i="Corpse"),11===o&&(i="Corruption"),12===o&&(i="Cruel"),13===o&&(i="Death"),14===o&&(i="Demon"),15===o&&(i="Dire"),16===o&&(i="Dread"),17===o&&(i="Doom"),11===o&&(i="Eagle"),19===o&&(i="Entropy"),20===o&&(i="Fiend"),21===o&&(i="Gale"),22===o&&(i="Ghoul"),23===o&&(i="Glyph"),24===o&&(i="Grim"),25===o&&(i="Hailstone"),26===o&&(i="Havoc"),27===o&&(i="Imp"),28===o&&(i="Loath"),29===o&&(i="Order"),30===o&&(i="Pain"),31===o&&(i="Plague"),32===o&&(i="Raven"),33===o&&(i="Rift"),34===o&&(i="Rune"),35===o&&(i="Shadow"),36===o&&(i="Skull"),37===o&&(i="Soul"),38===o&&(i="Spirit"),39===o&&(i="Stone"),40===o&&(i="Storm"),41===o&&(i="Viper"),42===o&&(i="Wraith");var r="Torc";if("helmet"===e){1===(l=~~(1+9*dS.random()))&&(r="Brow"),2===l&&(r="Casque"),3===l&&(r="Cowl"),4===l&&(r="Crest"),5===l&&(r="Horn"),6===l&&(r="Mask"),7===l&&(r="Veil"),8===l&&(r="Visage"),9===l&&(r="Visor")}if("neck"===e){1===(l=~~(1+9*dS.random()))&&(r="Beads"),2===l&&(r="Collar"),3===l&&(r="Gorget"),4===l&&(r="Heart"),5===l&&(r="Necklace"),6===l&&(r="Noose"),7===l&&(r="Scarab"),8===l&&(r="Talisman"),9===l&&(r="Torc")}if("ring"===e){1===(l=~~(1+16*dS.random()))&&(r="Band"),2===l&&(r="Circle"),3===l&&(r="Coil"),4===l&&(r="Eye"),5===l&&(r="Finger"),6===l&&(r="Grasp"),7===l&&(r="Grip"),8===l&&(r="Gyre"),9===l&&(r="Hold"),10===l&&(r="Knuckle"),11===l&&(r="Loop"),12===l&&(r="Nails"),13===l&&(r="Spiral"),14===l&&(r="Touch"),15===l&&(r="Turn"),16===l&&(r="Whorl")}if("shoulders"===e){1===(l=~~(1+7*dS.random()))&&(r="Tabard"),2===l&&(r="Bulkhead"),3===l&&(r="Drape"),4===l&&(r="Stout"),5===l&&(r="Clavicle"),6===l&&(r="Awning"),7===l&&(r="Shelter")}if("back"===e){1===(l=~~(1+7*dS.random()))&&(r="Blind"),2===l&&(r="Guiser"),3===l&&(r="Manteau"),4===l&&(r="Capote"),5===l&&(r="Veneer"),6===l&&(r="Facade"),7===l&&(r="Talma")}if("chest"===e){1===(l=~~(1+7*dS.random()))&&(r="Carapace"),2===l&&(r="Hide"),3===l&&(r="Jack"),4===l&&(r="Pelt"),5===l&&(r="Shroud"),6===l&&(r="Suit"),7===l&&(r="Wrap")}if("bracers"===e){1===(l=~~(1+8*dS.random()))&&(r="Bracket"),2===l&&(r="Peg"),3===l&&(r="Grip"),4===l&&(r="Clamp"),5===l&&(r="Strut"),6===l&&(r="Splint"),7===l&&(r="Truss"),8===l&&(r="Vice")}if("gloves"===e){1===(l=~~(1+9*dS.random()))&&(r="Claw"),2===l&&(r="Clutches"),3===l&&(r="Finger"),4===l&&(r="Fist"),5===l&&(r="Grasp"),6===l&&(r="Grip"),7===l&&(r="Hand"),8===l&&(r="Touch"),9===l&&(r="Knuckle")}if("belt"===e){1===(l=~~(1+10*dS.random()))&&(r="Buckle"),2===l&&(r="Chain"),3===l&&(r="Clasp"),4===l&&(r="Cord"),5===l&&(r="Fringe"),6===l&&(r="Harness"),7===l&&(r="Lash"),8===l&&(r="Lock"),9===l&&(r="Strap"),10===l&&(r="Winding")}if("legs"===e){1===(l=~~(1+7*dS.random()))&&(r="Muster"),2===l&&(r="Join"),3===l&&(r="Cowl"),4===l&&(r="Pillar"),5===l&&(r="Support"),6===l&&(r="Trestle"),7===l&&(r="Stud")}if("boots"===e){1===(l=~~(1+6*dS.random()))&&(r="Treck"),2===l&&(r="Spur"),3===l&&(r="Fate"),4===l&&(r="Destiny"),5===l&&(r="Dare"),6===l&&(r="Hazard")}if("slashed"===a||"cleaved"===a){1===(l=~~(1+11*dS.random()))&&(r="Barb"),2===l&&(r="Bite"),3===l&&(r="Cleaver"),4===l&&(r="Edge"),5===l&&(r="Fang"),6===l&&(r="Gutter"),7===l&&(r="Impaler"),8===l&&(r="Needle"),9===l&&(r="Razor"),10===l&&(r="Saw"),11===l&&(r="Scalpel"),12===l&&(r="Scratch"),13===l&&(r="Scythe"),14===l&&(r="Sever"),15===l&&(r="Skewer"),16===l&&(r="Song"),17===l&&(r="Stinger"),11===l&&(r="Thirst")}if("crushed"===a||"smashed"===a||"staff"===a){1===(l=~~(1+12*dS.random()))&&(r="Bane"),2===l&&(r="Blow"),3===l&&(r="Brand"),4===l&&(r="Break"),5===l&&(r="Crack"),6===l&&(r="Crusher"),7===l&&(r="Grinder"),8===l&&(r="Knell"),9===l&&(r="Mallet"),10===l&&(r="Ram"),11===l&&(r="Smasher"),12===l&&(r="Star")}if("pierced"===a){1===(l=~~(1+17*dS.random()))&&(r="Barb"),2===l&&(r="Branch"),3===l&&(r="Dart"),4===l&&(r="Fang"),5===l&&(r="Goad"),6===l&&(r="Gutter"),7===l&&(r="Impaler"),8===l&&(r="Lance"),9===l&&(r="Nails"),10===l&&(r="Needle"),11===l&&(r="Prod"),12===l&&(r="Scourge"),13===l&&(r="Scratch"),14===l&&(r="Skewer"),15===l&&(r="Spike"),16===l&&(r="Stinger"),17===l&&(r="Wrack")}if("staff"===a){1===(l=~~(1+10*dS.random()))&&(r="Branch"),2===l&&(r="Call"),3===l&&(r="Chant"),4===l&&(r="Cry"),5===l&&(r="Goad"),6===l&&(r="Gnarl"),7===l&&(r="Spell"),8===l&&(r="Spire"),9===l&&(r="Song"),10===l&&(r="Weaver")}if("shield"===a){1===(l=~~(1+9*dS.random()))&&(r="Badge"),2===l&&(r="Emblem"),3===l&&(r="Guard"),4===l&&(r="Mark"),5===l&&(r="Rock"),6===l&&(r="Tower"),7===l&&(r="Ward"),8===l&&(r="Wing"),9===l&&(r="Bulwark")}if("offhand"===a){1===(l=~~(1+9*dS.random()))&&(r="Globule"),2===l&&(r="Marble"),3===l&&(r="Star"),4===l&&(r="Crest"),5===l&&(r="Cycle"),6===l&&(r="Dust"),7===l&&(r="Smoke"),8===l&&(r="Void"),9===l&&(r="Tremor")}if("range"===a){1===(l=~~(1+9*dS.random()))&&(r="Bolt"),2===l&&(r="Thirst"),3===l&&(r="Fletch"),4===l&&(r="Flight"),5===l&&(r="Horn"),6===l&&(r="Nock"),7===l&&(r="Quarrel"),8===l&&(r="Quill"),9===l&&(r="Stinger")}if("trinket"===a){var l=~~(1+7*dS.random());1===l&&(r="Breaker"),2===l&&(r="Chant"),3===l&&(r="Cry"),4===l&&(r="Song"),5===l&&(r="Star"),6===l&&(r="Talisman"),7===l&&(r="Torc")}return t=i+" "+r+" "+t}function Ov(e,a,n,t,i,o,r){var l=bS.item[e],s=i,d=t,c=n,m=a;if(0===r){if("helmet"===m){if("Hood"===s&&(l.name="Glyphed Cowl",l.intel=11,l.wis=13,l.evocation=4,l.channeling=3,l.allStats=5,l.mp=30,l.req=11),"Cap"===s&&(l.name="Rendo's Bonnet",l.enhancedArmor=35,l.defense=5,l.attack=2,l.hp=15,l.mp=15),"Bandana"===s&&(dS.random()>.5?(l.name="Laozen's Headband",l.enhancedArmor=50,l.cold=7,l.handtohand=3,l.lightningDamage=6,l.fear=8,l.hp=25,l.hpKill=6,l.req=11):(l.name="Samurai's Devotion",l.armor=25,l.allSkills=2,l.dex=15,l.str=10,l.allResist=6,l.fear=15,l.req=24,l.rarity=4)),"Diadem"===s&&(l.name="Grandmaster's Crown",l.enhancedArmor=75,l.dualWield=5,l.doubleAttack=6,l.handtohand=6,l.cold=13,l.allSkills=1,l.phyMit=3,l.allResist=7,l.flavorText="A thousand fists are not as strong as a tempered mind.",l.req=32),"Dark Hood"===s){var u=~~(1+2*dS.random());1===u&&(l.name="Reaper's Cowl",l.enhancedArmor=55,l.conjuration=5,l.mpKill=6,l.silence=13,l.hp=15,l.mp=30,l.resistCold=15,l.critDamage=6,l.req=32),2===u&&(l.name="Executioner's Hood",l.enhancedArmor=75,l.offense=3,l.str=14,l.dex=11,l.critDamage=6,l.cold=13,l.riposte=5,l.dualWield=3,l.req=34)}"Coronet"===s&&(l.name="Crown of King Argentus",l.enhancedArmor=55,l.alteration=5,l.channeling=5,l.stun=9,l.silence=13,l.resistMagic=20,l.cha=15,l.twoHandBlunt=6,l.req=34),"Miter"===s&&(dS.random()>.5?(l.name="Summoner's Beacon",l.enhancedArmor=44,l.conjuration=6,l.abjuration=4,l.silence=13,l.hp=30,l.hpKill=7,l.allResist=9,l.lightRadius=12,l.req=34):(l.name="Orator's Shout",l.enhancedArmor=45,l.allSkills=1,l.resistPoison=30,l.resistLightning=20,l.silence=35,l.expFind=12,l.req=24,l.rarity=4)),"Astral Hood"===s&&(l.name="Dragon Lord's Cowl",l.enhancedArmor=40,l.absorbFire=8,l.evocation=7,l.enhanceFire=3,l.silence=13,l.hp=25,l.mp=35,l.critChance=5,l.goldFind=10,l.req=34),"Mail Hood"===s&&(dS.random()>.5?(l.name="Windstalker's Malice",l.enhancedArmor=49,l.dualWield=8,l.allSkills=2,l.oneHandSlash=3,l.allResist=9,l.weight=1,l.riposte=5,l.flavorText="A legendary warder's protective hood. Used in defense of rabid bears and wolves.",l.req=26):(l.name="Sage's Vision",l.enhancedArmor=45,l.allSkills=2,l.hp=35,l.mpKill=3,l.critChance=3,l.critDamage=7,l.req=25,l.rarity=4)),"Coif"===s&&(l.name="Coif of Glory",l.enhancedArmor=42,l.allSkills=1,l.goldFind=11,l.resistLightning=20,l.hpKill=12,l.lightRadius=9,l.thorns=6,l.req=16),"Armet"===s&&(l.name="Pride of Fenwoven",l.enhancedArmor=43,l.conjuration=5,l.alteration=6,l.wis=15,l.allResist=5,l.resistCold=21,l.wraith=4,l.req=20),"Sallet"===s&&(l.name="Dusky Visor",l.enhancedArmor=50,l.weight=1,l.physicalDamage=8,l.allResist=15,l.phyMit=7,l.req=22),"Burgonet"===s&&(l.name="Crested Helm",l.enhancedArmor=42,l.allSkills=1,l.dualWield=5,l.alteration=5,l.str=11,l.cha=14,l.req=12),"Great Helm"===s&&(dS.random()>.5?(l.name="Call of the Hero",l.enhancedArmor=45,l.alteration=5,l.allSkills=1,l.allStats=9,l.cold=9,l.hpKill=5,l.mpKill=5,l.hp=15,l.req=15):(l.name="Minotaur's Horns",l.enhancedArmor=55,l.critChance=4,l.phyMit=3,l.stun=12,l.resistCold=20,l.resistLightning=25,l.req=24,l.rarity=4)),"Barbute"===s&&(l.name="Wurmskull Barbute",l.enhancedArmor=60,l.twoHandSlash=7,l.twoHandBlunt=7,l.resistMagic=22,l.str=22,l.hp=45,l.req=20),"Royal Helm"===s&&(l.name="Vor's Adulation",l.enhancedArmor=50,l.defense=4,l.allResist=14,l.allStats=9,l.wraith=3,l.silence=10,l.fear=10,l.hpRegen=3,l.req=36)}if("neck"===m){if(c<=16){1===(h=~~(1+5*dS.random()))&&(l.name="Kordata Relic",l.globalHaste=-40,l.resistFire=12,l.absorbFire=4,l.fireDamage=5,l.fear=10,l.lightRadius=5,l.req=10),2===h&&(l.name="The Eye of Riltan",l.lightRadius=4,l.allSkills=1,l.hpKill=9,l.coldDamage=5,l.phyMit=3,l.req=11),3===h&&(l.name="The Arboretum Curio",l.armor=10,l.attack=10,l.allResist=10,l.allStats=10,l.req=14),4===h&&(l.name="Chancellor's Remorse",l.abjuration=4,l.conjuration=4,l.resistCold=20,l.allSkills=1,l.mp=35,l.req=12,l.rarity=4),5===h&&(l.name="Etched Granite Charm",l.str=5,l.wis=5,l.intel=5,l.stun=4,l.fear=4,l.dodge=2)}if(c>16&&c<=32){1===(h=~~(1+4*dS.random()))&&(l.name="Saracen's Guard",l.thorns=9,l.allResist=10,l.allStats=8,l.req=14),2===h&&(l.name="Magnate's Token",l.resistAll=14,l.allStats=5,l.allSkills=2,l.enhanceFire=3,l.req=24,l.rarity=4),3===h&&(l.name="Miner's Memento",l.hp=25,l.mp=25,l.dex=16,l.goldFind=15,l.allResist=7,l.req=20,l.rarity=4),4===h&&(l.name="Martyr's Manifesto",l.allSkills=2,l.agi=11,l.critDamage=6,l.critChance=3,l.fear=25,l.req=22,l.rarity=4)}if(c>32){1===(h=~~(1+4*dS.random()))&&(l.name="The Prowler's Eye",l.runSpeed=15,l.haste=-60,l.armor=25,l.dex=20,l.req=22),2===h&&(l.name="Wyvern's Scale",l.resistFire=35,l.enhanceFire=3,l.absorbFire=2,l.hp=33,l.mp=55,l.evocation=3,l.req=20,l.rarity=4),3===h&&(l.name="Enchanted Bone Collar",l.hp=30,l.mp=30,l.lightRadius=-3,l.armor=8,l.stun=8,l.twoHandBlunt=3,l.req=24),4===h&&(l.name="Anuran Talisman",l.intel=10,l.wis=10,l.mp=35,l.mpKill=5,l.dex=8,l.critDamage=7,l.req=26,l.xPos=0,l.yPos=-64)}}if("ring"===m){if(c<=16){1===(h=~~(1+4*dS.random()))&&(l.name="Samurai's Fidelity",l.leech=3,l.wraith=3,l.hpKill=5,l.resistCold=25,l.resistLightning=25,l.mp=25,l.req=12,l.rarity=4),2===h&&(l.name="Magnate's Curio",l.resistLightning=20,l.castingHaste=-40,l.magMit=3,l.phyMit=3,l.stun=8,l.fear=8,l.silence=8,l.req=12,l.rarity=4),3===h&&(l.name="Vagabond's Seal",l.resistCold=24,l.offense=5,l.str=15,l.parry=3,l.hp=25,l.enhancePhysical=2,l.req=12,l.rarity=4),4===h&&(l.name="Bishop's Faith",l.wraith=4,l.silence=15,l.expFind=8,l.allSkills=1,l.alteration=6,l.req=12,l.rarity=4)}if(c>16&&c<=32){1===(h=~~(1+4*dS.random()))&&(dS.random()>.5?(l.name="Stone of Artremia",l.allSkills=1,l.mpKill=5,l.lightningDamage=6,l.mp=25,l.req=15,l.silence=7,l.wraith=5,l.flavorText="An enchanted ring worn by elven elites."):(l.name="Miner's Glimmer",l.mpRegen=2,l.magMit=4,l.runSpeed=12,l.silence=16,l.allStats=6,l.req=8,l.rarity=4)),2===h&&(l.name="Jagged Band",l.str=12,l.armor=5,l.parry=3,l.thorns=5,l.critDamage=5,l.req=12),3===h&&(l.name="Ring of Howling Thicket",l.armor=6,l.wis=10,l.intel=10,l.resistPoison=13,l.wraith=3,l.dex=5,l.alteration=3,l.req=13),4===h&&(l.name="Beryl Skull Ring",l.hp=25,l.mp=20,l.cha=-5,l.hpKill=12,l.leech=3,l.physicalDamage=5,l.critDamage=6,l.req=11)}if(c>32){1===(h=~~(1+4*dS.random()))&&(l.name="Blazing Star",l.hp=30,l.dodge=2,l.absorbFire=5,l.magMit=5,l.goldFind=10,l.silence=10,l.req=21),2===h&&(l.name="Crow's Frost",l.attack=13,l.coldDamage=9,l.dex=11,l.mp=30,l.cold=13,l.absorbCold=6,l.req=24),3===h&&(l.name="Moonstone Band",l.str=5,l.mp=30,l.wis=12,l.evocation=3,l.alteration=3,l.conjuration=3,l.silence=10,l.wraith=3,l.req=25),4===h&&(dS.random()>.5?(l.name="Ovext's Amethyst Ring",l.hp=35,l.agi=15,l.dex=5,l.critChance=3,l.critDamage=5,l.resistFire=13,l.wraith=3,l.req=28):(l.name="Miner's Shard",l.hpKill=6,l.str=20,l.sta=12,l.cold=15,l.globalHaste=-50,l.req=8,l.rarity=4))}}if("shoulders"===m&&("Cloth Drape"===s&&(l.name="Gilded Cloth",l.enhancedArmor=11,l.intel=13,l.wis=8,l.alteration=2,l.silence=7,l.critChance=2,l.resistMagic=7),"Woven Drape"===s&&(l.name="Pegasus Feather Drape",l.enhancedArmor=30,l.globalHaste=-30,l.agi=5,l.dex=15,l.resistLightning=12,l.absorbLightning=3,l.runSpeed=9,l.xPos=-192,l.yPos=-128),"Azure Shawl"===s&&(l.name="Ringwraith's Amice",l.enhancedArmor=40,l.conjuration=4,l.alteration=3,l.dex=11,l.mpKill=5,l.coldDamage=7,l.silence=9,l.allResist=12,l.lightRadius=-10,l.req=11),"Archon Shawl"===s&&(l.name="Riptide Shawl",l.enhancedArmor=44,l.mp=32,l.sta=5,l.critDamage=8,l.resistCold=11,l.evocation=4,l.channeling=3,l.req=22),"Leather Shoulders"===s&&(l.name="Lizardscale Mantle",l.enhancedArmor=27,l.alteration=2,l.wis=5,l.intel=5,l.resistPoison=7,l.defense=2,l.resistFire=7),"Studded Shoulders"===s&&(l.name="Vagrant's Timber",l.armor=20,l.allResist=12,l.thorns=12,l.mpRegen=2,l.sta=12,l.resistCold=15,l.resistMagic=15,l.resistPoison=12,l.req=11,l.rarity=4),"Spiked Shoulders"===s&&(l.name="Tanaden's Spiked Shoulderpads",l.enhancedArmor=45,l.hp=15,l.agi=15,l.stun=10,l.offense=2,l.attack=2,l.leech=3,l.allResist=5,l.req=16),"Brigand Shoulders"===s&&(l.name="Prayer Shawl",l.enhancedArmor=45,l.hp=35,l.wis=20,l.dex=5,l.absorbMagic=3,l.silence=7,l.alteration=4,l.fear=12,l.req=23),"Scaled Mantle"===s&&(l.name="Guardian's Bulwark",l.enhancedArmor=30,l.mp=16,l.wis=8,l.dex=5,l.expFind=7,l.silence=7,l.poisonDamage=5),"Chain Mantle"===s&&(l.name="Bloodstained Mantle",l.enhancedArmor=28,l.fear=5,l.str=7,l.resistMagic=12,l.hpKill=4,l.leech=3,l.doubleAttack=3,l.attack=2,l.req=12),"Kusari Mantle"===s&&(l.name="Matsuwari's Solace",l.enhancedArmor=35,l.hp=20,l.agi=10,l.dex=10,l.critChance=3,l.phyMit=5,l.fear=9,l.req=11),"Laminar Mantle"===s&&(l.name="Frostwalker's Covenant",l.enhancedArmor=41,l.hp=35,l.wis=15,l.twoHandBlunt=5,l.cold=13,l.conjuration=4,l.resistCold=13,l.resistPoison=13,l.req=24),"Cobalt Spaulders"===s&&(l.name="Blackened Iron Spaulders",l.enhancedArmor=40,l.hp=10,l.defense=2,l.oneHandBlunt=2,l.oneHandSlash=2,l.str=5,l.thorns=2),"Mithril Pauldrons"===s&&(l.name="Minotaur's Sprawl",l.enhancedArmor=30,l.oneHandSlash=2,l.hpKill=6,l.lightRadius=7,l.str=15,l.critDamage=12,l.req=12,l.rarity=4),"Sode"===s&&(l.name="Golem's Shelf",l.enhancedArmor=38,l.abjuration=3,l.resistMagic=25,l.mp=20,l.oneHandBlunt=3,l.req=15,l.rarity=4),"Monarch Pauldrons"===s&&(l.name="Carnal Pauldrons",l.enhancedArmor=45,l.mp=25,l.mpRegen=1,l.dex=11,l.magMit=5,l.allResist=10,l.fear=11,l.req=25)),"back"===m&&("Cape"===s&&(l.name="Arctic Cloak",l.expFind=2,l.attack=4,l.dex=5,l.abjuration=2,l.coldDamage=4,l.resistCold=7,l.cold=9),"Cloak"===s&&(l.name="Lizardscale Cloak",l.mpKill=2,l.intel=7,l.abjuration=1,l.alteration=2,l.critDamage=5,l.resistPoison=7),"Woven Cloak"===s&&(l.name="Gossamer Cloak",l.dodge=2,l.intel=8,l.wis=6,l.channeling=4,l.phyMit=4,l.resistLightning=8,l.resistPoison=8,l.silence=9),"Fur-Lined Cloak"===s&&(l.name="Vagrant's Copse",l.castingHaste=-80,l.silence=30,l.wis=20,l.enhanceFire=5,l.hpRegen=2,l.critChance=3,l.req=15,l.rarity=4),"Drake-hide Cloak"===s&&(l.name="Highwayman's Cloak",l.goldFind=13,l.dex=10,l.dodge=2,l.parry=2,l.piercing=3,l.physicalDamage=2,l.req=12),"Brigand's Shroud"===s&&(l.name="Cloak of the Polar Bear",l.hp=20,l.coldDamage=2,l.magMit=2,l.absorbCold=3,l.twoHandSlash=2,l.twoHandBlunt=2,l.cold=13,l.resistCold=25,l.req=14),"Regal Shroud"===s&&(dS.random()>.5?(l.name="Molten Cloak",l.thorns=3,l.intel=13,l.absorbFire=2,l.evocation=2,l.critChance=2,l.resistFire=21,l.req=15):(l.name="Samurai's Ardor",l.haste=-50,l.globalHaste=-50,l.allStats=7,l.critChance=5,l.req=12,l.rarity=4)),"Orcish Cloak"===s&&(l.name="Ominous Black Cloak",l.hp=45,l.str=5,l.alteration=2,l.oneHandBlunt=2,l.oneHandSlash=2,l.piercing=2,l.req=11),"Elven Shroud"===s&&(l.name="Grovecaller's Shroud",l.conjuration=3,l.absorbLightning=2,l.agi=13,l.dex=13,l.oneHandSlash=5,l.resistFire=9,l.resistLightning=17,l.req=11),"Emerald Cloak"===s&&(l.name="Cloak of Leaves",l.wis=13,l.alteration=3,l.thorns=5,l.conjuration=2,l.critDamage=7,l.resistLightning=9,l.silence=9,l.req=11),"Aviak Cloak"===s&&(l.name="Seahorse Scale Cloak",l.attack=3,l.channeling=3,l.abjuration=3,l.dex=12,l.mpKill=6,l.coldDamage=3,l.resistCold=21,l.req=21),"Chlamys"===s&&(l.name="Tribal Warfare Cloak",l.goldFind=15,l.str=14,l.agi=8,l.piercing=3,l.alteration=3,l.critChance=3,l.allResist=9,l.req=21),"Burnt Cape"===s&&(dS.random()>.5?(l.name="Cloak of Qalon",l.dex=9,l.agi=9,l.haste=-60,l.handtohand=4,l.offense=2,l.oneHandSlash=3,l.fireDamage=2,l.resistFire=14,l.req=26):(l.name="Magmashroud",l.dex=16,l.agi=16,l.haste=-150,l.handtohand=4,l.offense=3,l.fireDamage=7,l.resistFire=28,l.flavorText="The royal cape of Highlord Szarthax. Stolen by a dwarven rogue with a reckless disdain for his own life.",l.req=32)),"Umbral Shroud"===s&&(l.name="Wyvern's Wing",l.defense=6,l.hp=20,l.agi=23,l.silence=25,l.expFind=12,l.alteration=5,l.critDamage=5,l.req=17,l.rarity=4),"Archon Cloak"===s&&(l.name="Cloak of Icing Death",l.twoHandSlash=3,l.allStats=9,l.magMit=8,l.resistCold=17,l.cold=17,l.coldDamage=5,l.absorbCold=5,l.flavorText="A cape used in Dragon ceremonies to bury Tetrarchs of the Scaled Order.",l.req=35),"Astral Cloak"===s&&(l.name="Soothsayer's Ethereal Cloak",l.twoHandBlunt=3,l.alteration=4,l.allResist=9,l.allStats=8,l.allSkills=1,l.fear=9,l.stun=9,l.silence=16,l.flavorText="A slumbering inter-dimensional dragon sleeps quietly, waiting to shatter the world.",l.req=38)),"chest"===m){if("Elven Robe"===s&&(l.name="Green Silken Drape",l.enhancedArmor=25,l.sta=9,l.dex=10,l.intel=5,l.resistPoison=9,l.stun=2),"Silk Robe"===s&&(dS.random()>.5?(l.name="Heavenly Garb",l.enhancedArmor=33,l.mp=21,l.mpRegen=2,l.allResist=7,l.enhanceMagic=3,l.silence=9,l.req=12):(l.name="Chancellor's Ceremony",l.armor=22,l.allResist=10,l.allStats=9,l.hpRegen=5,l.mpRegen=5,l.intel=10,l.req=25,l.rarity=4)),"Linen Robe"===s&&(l.name="Orator's Whisper",l.enhancedArmor=45,l.mp=75,l.hp=30,l.intel=25,l.conjuration=5,l.req=26,l.rarity=4),"Azure Robe"===s){1===~~(1+2*dS.random())?(l.name="Metallic-Plated Robe",l.enhancedArmor=55,l.intel=11,l.agi=11,l.evocation=3,l.castingHaste=-50,l.mpKill=5,l.resistCold=10,l.resistFire=10,l.enhanceCold=5,l.silence=12,l.req=26,l.xPos=-256,l.yPos=-128):(l.name="Robe of the Seer",l.enhancedArmor=55,l.mp=30,l.intel=11,l.wis=11,l.evocation=4,l.conjuration=3,l.enhanceLightning=5,l.silence=13,l.req=32)}"Quilted Tunic"===s&&(l.name="Foreman's Tunic",l.enhancedArmor=30,l.handtohand=2,l.wis=12,l.str=12,l.dodge=2,l.weight=1,l.defense=2,l.physicalDamage=4),"Spiked Vestment"===s&&(l.name="Ripjaw Hide Vest",l.enhancedArmor=42,l.attack=3,l.sta=11,l.handtohand=3,l.stun=8,l.globalHaste=-50,l.weight=1,l.req=11),"Leather Armor"===s&&(l.name="Twitchthrash",l.enhancedArmor=39,l.haste=-30,l.twoHandBlunt=2,l.runSpeed=10,l.dex=14,l.str=14,l.resistPoison=17,l.req=16),"Studded Leather"===s&&(l.name="Brown Chitin Shell",l.enhancedArmor=45,l.dex=11,l.sta=11,l.agi=11,l.abjuration=2,l.alteration=3,l.defense=3,l.phyMit=5,l.silence=24,l.req=22),"Chain Mail"===s&&(l.name="Samurai's Duty",l.armor=45,l.dodge=5,l.defense=5,l.parry=5,l.riposte=5,l.allResist=11,l.hp=35,l.req=12,l.rarity=4),"Ring Mail"===s&&(l.name="Eagle Claw Armor",l.enhancedArmor=34,l.hp=17,l.poisonDamage=3,l.hpKill=5,l.runSpeed=9,l.absorbCold=4,l.resistCold=14,l.cold=13,l.req=10),"Scale Mail"===s&&(l.name="Frost Flicker",l.enhancedArmor=30,l.conjuration=4,l.twoHandBlunt=5,l.wis=17,l.coldDamage=5,l.resistCold=17,l.magMit=3,l.lightRadius=5,l.cold=11,l.req=15),"Kusari Mail"===s&&(l.name="Fencer's Tunic",l.enhancedArmor=40,l.str=19,l.sta=12,l.weight=1,l.oneHandSlash=3,l.piercing=3,l.globalHaste=-80,l.allSkills=1,l.physicalDamage=7,l.silence=7,l.req=23),"Breast Plate"===s&&(l.name="Gravelstone Coat",l.enhancedArmor=30,l.hp=20,l.str=8,l.defense=2,l.expFind=5,l.phyMit=7,l.weight=1),"Cuirass"===s&&(l.name="Chestplate of the Blooddrinker",l.enhancedArmor=30,l.str=17,l.allSkills=1,l.resistFire=11,l.dualWield=3,l.evocation=2,l.alteration=2,l.req=14),"Gothic Plate"===s&&(l.name="Dahlia's Chestplate",l.enhancedArmor=50,l.hpRegen=5,l.hpKill=5,l.leech=4,l.allResist=9,l.allSkills=2,l.abjuration=4,l.flavorText="A mythical breastplate discovered by the lizardmen of Temple of Prenssor. Often rumored to be a legend, but it has recently been discovered once again.",l.req=23),"Archon Plate"===s&&(dS.random()>.5?(l.name="Silks of the Guardian",l.enhancedArmor=50,l.dex=13,l.resistMagic=17,l.wraith=3,l.mpKill=5,l.absorbLightning=8,l.silence=9,l.hpKill=10,l.magicDamage=8,l.lightRadius=7,l.allSkills=1,l.req=34):(l.name="Golem's Ore",l.enhancedArmor=45,l.enhanceMagic=3,l.leech=3,l.sta=25,l.mp=33,l.resistPoison=15,l.allSkills=1,l.req=15,l.rarity=4))}"bracers"===m&&("Jade Bracers"===s&&(l.name="Gilded Jade Bracelet",l.enhancedArmor=28,l.hp=16,l.wis=10,l.evocation=2,l.channeling=3,l.conjuration=3,l.lightRadius=4),"Bone Bracers"===s&&(l.name="Burnished Bone Bracelet",l.enhancedArmor=35,l.mp=21,l.wis=12,l.intel=12,l.resistMagic=9,l.silence=12,l.critDamage=5,l.channeling=2,l.req=10),"Sapphire Bracers"===s&&(l.name="Bracelet of Woven Silk",l.enhancedArmor=30,l.hp=17,l.wis=5,l.intel=10,l.resistLightning=9,l.thorns=3,l.silence=9,l.castingHaste=-40,l.channeling=2,l.req=11),"Opulent Bracers"===s&&(l.name="Orator's Entreat",l.enhancedArmor=45,l.resistFire=15,l.sta=12,l.dex=9,l.fear=10,l.stun=15,l.dodge=5,l.req=17,l.rarity=4),"Leather Bracers"===s&&(l.name="Bracers of Battle",l.enhancedArmor=25,l.attack=3,l.str=3,l.dex=9,l.twoHandSlash=2,l.physicalDamage=2,l.flavorText="The bracers of an orc warlord that patrols Lanfeld Outpost's perimeter."),"Patent Bracers"===s&&(l.name="Ivory Bracelet",l.enhancedArmor=33,l.mp=11,l.agi=12,l.hpRegen=1,l.expFind=5,l.goldFind=5,l.critDamage=5,l.stun=5,l.req=11),"Bonded Bracers"===s&&(l.name="Granite Bracer",l.enhancedArmor=42,l.hp=10,l.str=7,l.sta=12,l.weight=1,l.stun=10,l.cold=12,l.phyMit=4,l.req=16),"Elven Bracers"===s&&(l.name="Serpentine Bracer",l.enhancedArmor=40,l.mpRegen=2,l.agi=16,l.dex=10,l.castingHaste=-40,l.dodge=2,l.resistPoison=12,l.wraith=3,l.req=22),"Scaled Bracers"===s&&(l.name="Basilisk Bracer",l.enhancedArmor=28,l.hp=12,l.wis=10,l.agi=5,l.cold=9,l.stun=13,l.oneHandBlunt=2,l.abjuration=2),"Laminar Bracers"===s&&(l.name="Runed Adamantium Bracer",l.enhancedArmor=40,l.mpKill=5,l.wis=14,l.str=5,l.magMit=2,l.silence=13,l.magicDamage=2,l.weight=1,l.req=11),"Splinted Bracers"===s&&(l.name="Martyr's Agony",l.enhancedArmor=55,l.haste=-50,l.dex=13,l.hp=12,l.stun=10,l.dualWield=4,l.req=12,l.rarity=4),"Kusari Bracers"===s&&(dS.random()>.5?(l.name="Dragon Bane Bracer",l.enhancedArmor=36,l.str=14,l.agi=9,l.abjuration=3,l.piercing=2,l.resistFire=9,l.resistMagic=9,l.resistCold=9,l.leech=3,l.req=25):(l.name="Emissary's Dispute",l.enhancedArmor=45,l.resistLightning=30,l.silence=15,l.fear=15,l.parry=3,l.offense=5,l.hp=11,l.req=11,l.rarity=4)),"Bronze Bracers"===s&&(l.name="Chief Grimden's Bracer",l.enhancedArmor=25,l.hp=16,l.str=8,l.hpKill=3,l.expFind=4,l.physicalDamage=2,l.flavorText="Formerly used by a wood elf that dared to spy on Lanfeld Outpost, it was later kept by Chief Grimden as a trophy.",l.runSpeed=5),"Cobalt Bracers"===s&&(l.name="Arbiter's Galvanized Bracer",l.enhancedArmor=35,l.mp=10,l.alteration=3,l.defense=3,l.abjuration=2,l.oneHandBlunt=5,l.req=12),"Tetrarch Bracers"===s&&(l.name="Dragon Claw Bracer",l.enhancedArmor=30,l.mp=11,l.hp=9,l.critChance=3,l.hpKill=5,l.weight=1,l.thorns=4,l.allResist=8,l.leech=3,l.req=20),"Gilded Bracers"===s&&(l.name="Scaled Brass Bracer",l.enhancedArmor=50,l.fear=9,l.silence=12,l.cha=25,l.critDamage=9,l.oneHandSlash=2,l.dex=12,l.allResist=9,l.req=26)),"gloves"===m&&("Gloves"===s&&(l.name="The Hand of Armetrin",l.enhancedArmor=34,l.mp=13,l.mpRegen=1,l.leech=3,l.hpKill=2,l.mpKill=2,l.defense=2,l.resistPoison=8),"Cloth Gloves"===s&&(l.name="Dusty Bloodstained Gloves",l.enhancedArmor=30,l.mp=21,l.intel=12,l.evocation=2,l.channeling=3,l.resistMagic=9,l.resistLightning=9,l.req=12),"Woven Gloves"===s&&(l.name="Gauntlets of Omnipotence",l.enhancedArmor=37,l.evocation=3,l.intel=12,l.mpKill=5,l.enhanceCold=4,l.resistCold=11,l.silence=7,l.castingHaste=-60,l.req=19),"Mesh Gloves"===s&&(l.name="Luminescent Touch",l.enhancedArmor=28,l.hp=12,l.critChance=2,l.critDamage=5,l.allStats=5,l.allResist=7,l.castingHaste=-40,l.req=26),"Rawhide Gloves"===s&&(l.name="Bloodfist Gloves",l.enhancedArmor=35,l.hp=25,l.haste=-30,l.globalHaste=-30,l.oneHandBlunt=2,l.leech=3,l.defense=3,l.physicalDamage=5),"Drakescale Gloves"===s&&(dS.random()>.5?(l.name="Greenthorn Hide Gloves",l.enhancedArmor=24,l.hp=21,l.mp=14,l.dex=9,l.sta=9,l.dodge=3,l.conjuration=2,l.resistPoison=14,l.req=13):(l.name="Vagabond's Survey",l.armor=22,l.resistPoison=20,l.haste=-70,l.fireDamage=7,l.str=24,l.stun=30,l.req=22,l.rarity=4)),"Sharkskin Gloves"===s&&(l.name="Griffon Talon Gloves",l.enhancedArmor=33,l.mp=16,l.haste=-40,l.hpKill=3,l.leech=3,l.offense=3,l.parry=3,l.resistLightning=12,l.req=11),"Studded Gloves"===s&&(dS.random()>.5?(l.name="Impskin Gloves",l.enhancedArmor=45,l.mp=21,l.wis=12,l.leech=2,l.intel=12,l.leech=3,l.silence=7,l.lightRadius=6,l.resistPoison=10,l.resistFire=11,l.req=22):(l.name="Lupine Serrated Gauntlets",l.enhancedArmor=38,l.haste=-50,l.critChance=4,l.lightningDamage=3,l.leech=3,l.resistLightning=10,l.handtohand=3,l.str=10,l.req=20)),"Lamellar Gauntlets"===s&&(l.name="Merchant's Guards",l.enhancedArmor=11,l.lightRadius=5,l.goldFind=13,l.expFind=5,l.defense=2,l.attack=2),"Banded Gauntlets"===s&&(l.name="Sorcerer's Gauntlets",l.enhancedArmor=28,l.mp=16,l.defense=2,l.castingHaste=-50,l.weight=1,l.enhanceFire=3,l.mpRegen=3,l.fireDamage=4,l.silence=9,l.req=15),"Kusari Gauntlets"===s&&(l.name="Moss Etched Gauntlets",l.enhancedArmor=32,l.mp=16,l.hp=24,l.dualWield=5,l.doubleAttack=4,l.attack=3,l.allResist=8,l.req=19),"Brigandine Gauntlets"===s&&(l.name="Sage's Acumen",l.enhancedArmor=45,l.castingHaste=-80,l.hp=20,l.mp=35,l.silence=15,l.resistFire=24,l.req=22,l.rarity=4),"Cobalt Gauntlets"===s&&(l.name="Frostburn Grips",l.enhancedArmor=44,l.mp=25,l.wis=10,l.evocation=3,l.intel=7,l.wraith=4,l.cold=7,l.defense=3,l.coldDamage=5),"Ornate Gauntlets"===s&&(l.name="Junon's Gleaming Gauntlets",l.enhancedArmor=40,l.hpKill=5,l.leech=3,l.dualWield=5,l.cha=11,l.lightRadius=10,l.conjuration=3,l.channeling=3,l.req=14),"Tetrarch Gauntlets"===s&&(l.name="Charred Gauntlets",l.enhancedArmor=30,l.mp=16,l.wis=8,l.mpKill=3,l.sta=7,l.defense=2,l.fireDamage=5,l.leech=3,l.lightRadius=9,l.req=17),"Gilded Gauntlets"===s&&(l.name="Gauntlets of Brute Strength",l.enhancedArmor=50,l.sta=14,l.str=20,l.globalHaste=-50,l.twoHandSlash=4,l.twoHandBlunt=4,l.thorns=6,l.critDamage=6,l.req=26)),"belt"===m&&("Sash"===s&&(dS.random()>.5?(l.name="Lenymo Sash",l.enhancedArmor=15,l.critDamage=4,l.hp=15,l.mp=15,l.lightRadius=4,l.allResist=5,l.mpKill=3):(l.name="Sphinx Hair Cord",l.enhancedArmor=15,l.phyMit=2,l.cha=9,l.intel=9,l.stun=12,l.castingHaste=-40,Fv(e,0,0,10,10,10))),"Azure Sash"===s&&(dS.random()>.5?(l.name="Grimsmoke Belt",l.enhancedArmor=24,l.defense=2,l.mpKill=7,l.phyMit=4,l.allResist=9,l.mp=25):dS.random()>.5?(l.name="Sash of the Dragonborn",l.enhancedArmor=25,l.critChance=2,l.mpKill=7,l.haste=-50,l.globalHaste=-50,l.castingHaste=-50,l.resistFire=15,l.yPos=-192,l.mp=25):(l.name="Orator's Desire",l.enhancedArmor=45,l.castingHaste=-70,l.resistMagic=15,l.resistCold=10,l.mpKill=3,l.critDamage=5,l.silence=15,l.req=19,l.rarity=4)),"Leather Belt"===s&&(dS.random()>.5?(l.name="Snakecord",l.enhancedArmor=30,l.agi=3,l.wis=5,l.hpRegen=1,l.magMit=4,l.resistPoison=9,l.poisonDamage=2,l.defense=2,l.wraith=4,l.req=12):(l.name="Thalen Belt",l.enhancedArmor=30,l.str=8,l.wis=12,l.intel=8,l.fireDamage=5,l.resistFire=12,l.silence=5,l.absorbFire=3,l.req=12)),"Heavy Belt"===s&&(dS.random()>.5?dS.random()>.5?(l.name="Frenzied Sash of Kordata",l.enhancedArmor=30,l.haste=-120,l.globalHaste=-60,l.weight=1,l.req=21):(l.name="Vagabond's Cinch",l.enhancedArmor=45,l.resistFire=12,l.globalHaste=-100,l.lightRadius=10,l.magMit=3,l.doubleAttack=5,l.absorbMagic=3,l.req=11,l.rarity=4):(l.name="Sash of Infinite Blows",l.enhancedArmor=30,l.haste=-70,l.globalHaste=-120,l.handtohand=5,l.dualWield=3,l.doubleAttack=3,l.leech=2,l.weight=1,l.req=21)),"Mesh Belt"===s&&(dS.random()>.5?(l.name="Archivist's Belt",l.enhancedArmor=30,l.allStats=5,l.wis=10,l.weight=1,l.hp=21,l.alteration=2,l.channeling=2,l.req=24):(l.name="Spinechill Belt",l.enhancedArmor=31,l.haste=-50,l.wis=10,l.resistCold=21,l.absorbCold=3,l.mpKill=5,l.mp=25,l.req=24)),"Splinted Belt"===s&&(dS.random()>.5?(l.name="Sage's Clamp",l.enhancedArmor=45,l.castingHaste=-50,l.haste=-80,l.goldFind=10,l.hpKill=5,l.dodge=3,l.resistLightning=11,l.req=6,l.rarity=4):(l.name="Martyr's Ideal",l.enhancedArmor=40,l.globalHaste=-80,l.hpRegen=2,l.agi=12,l.str=15,l.resistPoison=30,l.resistFire=12,l.req=16,l.rarity=4)),"Monarch Girdle"===s&&(dS.random()>.5?dS.random()>.5?(l.name="Goldclasp",l.enhancedArmor=45,l.goldFind=14,l.silence=11,l.cold=11,l.haste=-50,l.weight=1,l.lightRadius=5,l.hpKill=3,l.req=20):(l.name="Sludged Girdle",l.enhancedArmor=45,l.cha=5,l.intel=12,l.hp=20,l.mp=10,l.enhancePoison=3,l.enhanceMagic=3,l.req=20):(l.name="Bishop's Purity",l.enhancedArmor=55,l.globalHaste=-80,l.cold=15,l.magMit=5,l.resistMagic=25,l.resistFire=25,l.abjuration=4,l.req=20,l.rarity=4)),"Mithril Girdle"===s&&(dS.random()>.5?(l.name="Mithril Plated Girth",l.enhancedArmor=40,l.str=12,l.sta=9,l.dex=14,l.allResist=9,l.phyMit=6,l.mpKill=4,l.hpKill=5,l.req=26):(l.name="Guardian Girdle",l.enhancedArmor=40,l.hp=25,l.sta=8,l.cha=5,l.defense=3,l.hpKill=6,l.resistMagic=15,l.req=26))),"legs"===m&&("Pants"===s&&(l.name="Blessed Chargers",l.enhancedArmor=20,l.channeling=6,l.lightRadius=6,l.allResist=4,l.mp=13,l.evocation=2,l.mpKill=5,l.intel=9),"Cotton Pants"===s&&(l.name="Gossamer Leggings",l.enhancedArmor=36,l.defense=2,l.dodge=2,l.runSpeed=4,l.hpKill=3,l.lightRadius=7,l.cha=10,l.abjuration=2,l.req=11),"Linen Pants"===s&&(l.name="Chancellor's Qualm",l.armor=16,l.defense=3,l.hp=26,l.dodge=7,l.channeling=5,l.evocation=3,l.critChance=3,l.req=20,l.rarity=4),"Silk Leggings"===s&&(l.name="Wyvern's Tail",l.enhancedArmor=45,l.runSpeed=10,l.dex=12,l.intel=30,l.allResist=7,l.req=23,l.rarity=4),"Fur Pants"===s&&(dS.random()>.5?(l.name="Feathered Leggings",l.enhancedArmor=25,l.sta=10,l.agi=5,l.hpKill=2,l.offense=2,l.runSpeed=5,l.stun=5):(l.name="Disciple's Oath",l.enhancedArmor=28,l.defense=2,l.offense=2,l.handtohand=3,l.hpRegen=2,l.thorns=3,l.physicalDamage=4)),"Wolf-Hide Pants "===s&&(l.name="Gatorscale Leggings",l.enhancedArmor=35,l.hp=16,l.sta=5,l.wis=10,l.expFind=5,l.defense=2,l.physicalDamage=4,l.req=9),"Sharkskin Legs"===s&&(l.name="Damask Leggings",l.enhancedArmor=42,l.critDamage=5,l.dex=9,l.phyMit=4,l.offense=3,l.agi=8,l.piercing=2,l.weight=1,l.req=16),"Studded Legs"===s&&(l.name="Gladewalker's Leggings",l.enhancedArmor=44,l.mp=58,l.wis=15,l.evocation=3,l.conjuration=3,l.mpRegen=3,l.absorbLightning=5,l.req=25),"Scaled Legs"===s&&(l.name="Barbed Legplates",l.enhancedArmor=21,l.agi=7,l.thorns=4,l.expFind=7,l.defense=2,l.coldDamage=5),"Chausses"===s&&(l.name="Silver-Plated Leggings",l.enhancedArmor=30,l.mp=16,l.wis=8,l.mpKill=3,l.expFind=7,l.defense=2,l.coldDamage=5,l.req=13),"Kusazuri"===s&&(l.name="Emissary's Poise",l.enhancedArmor=45,l.allSkills=1,l.allStats=10,l.absorbCold=4,l.thorns=8,l.magMit=4,l.resistMagic=20,l.req=24,l.rarity=4),"Poleyn"===s&&(l.name="Black Chitin Leggings",l.enhancedArmor=30,l.mp=16,l.wis=9,l.mpKill=5,l.silence=9,l.resistPoison=11,l.resistFire=11,l.conjuration=4,l.alteration=3,l.req=22),"Cobalt Legplates"===s&&(l.name="Dauntless Legplates",l.enhancedArmor=30,l.hp=16,l.str=9,l.hpKill=2,l.lightningDamage=3,l.stun=5,l.fear=11),"Iron Legplates"===s&&(l.name="Bishop's Merit",l.enhancedArmor=40,l.allStats=7,l.mpRegen=3,l.wis=14,l.str=20,l.resistPoison=50,l.req=11,l.rarity=4),"Mithril Legplates"===s&&(l.name="Golem's Crust",l.enhancedArmor=45,l.attack=12,l.alteration=4,l.allSkills=3,l.stun=30,l.cold=30,l.req=20,l.rarity=4),"Royal Legplates"===s&&(l.name="Icy Greaves",l.enhancedArmor=43,l.mp=30,l.critDamage=8,l.mpKill=5,l.resistCold=11,l.absorbCold=4,l.coldDamage=6,l.cold=13,l.req=22)),"boots"===m&&("Boots"===s&&(dS.random()>.5?(l.name="Lavaspur",l.enhancedArmor=33,l.dex=8,l.evocation=1,l.intel=8,l.defense=2,l.fireDamage=3,l.resistFire=15,l.req=8):(l.name="Firewalker Boots",l.enhancedArmor=37,l.evocation=2,l.allStats=4,l.critChance=2,l.enhanceFire=2,l.resistFire=20,l.req=8)),"Light Boots"===s&&(dS.random()>.5?(l.name="Golden Baelor Boots",l.enhancedArmor=45,l.hp=16,l.wis=15,l.intel=15,l.allSkills=1,l.absorbFire=3,l.resistFire=14,l.silence=7,l.req=26):(l.name="Amice-Lined Shoes",l.enhancedArmor=42,l.hp=15,l.allStats=5,l.dodge=2,l.evocation=3,l.resistPoison=13,l.resistCold=18,l.cold=15,l.req=26)),"Heavy Boots"===s&&(dS.random()>.5?(l.name="Vagabond's Voyage",l.armor=24,l.runSpeed=28,l.allStats=6,l.lightRadius=13,l.fear=12,l.allResist=7,l.req=24,l.rarity=4):(l.name="Boots of the Destroyer",l.enhancedArmor=25,l.str=10,l.sta=15,l.twoHandSlash=4,l.twoHandBlunt=4,l.runSpeed=12,l.hp=15,l.attack=5,l.req=9)),"Sharkskin Boots"===s&&(dS.random()>.5?(l.name="Craftsman's Boots",l.enhancedArmor=40,l.goldFind=9,l.agi=15,l.wis=5,l.runSpeed=11,l.stun=5,l.offense=2,l.weight=1,l.flavorText="A legendary item preferred by adventurers of all types. Its ability to whisk its owner away to safety is widely regarded.",l.req=21):(l.name="Gorilla-Hide Boots",l.enhancedArmor=40,l.str=11,l.agi=9,l.sta=11,l.runSpeed=15,l.parry=3,l.attack=5,l.req=21)),"Chain Boots"===s&&(dS.random()>.5?(l.name="Treads of Vergundi",l.enhancedArmor=27,l.hp=17,l.poisonDamage=4,l.hpKill=4,l.resistPoison=9,l.resistFire=9,l.runSpeed=15,l.req=8):(l.name="Emissary's Finesse",l.armor=25,l.runSpeed=35,l.conjuration=3,l.offense=3,l.allResist=6,l.channeling=5,l.expFind=8,l.req=14,l.rarity=4)),"Sovereign Boots"===s&&(dS.random()>.5?(l.name="Dwarven Militia Boots",l.enhancedArmor=44,l.hp=17,l.str=10,l.dex=15,l.allResist=9,l.critDamage=5,l.flavorText="Boots of a Dwarven nobleman that haunted the basement of Unrest.",l.req=20):(l.name="Charred Boots",l.enhancedArmor=44,l.abjuration=4,l.channeling=6,l.absorbFire=5,l.agi=7,l.resistFire=21,l.resistPoison=15,l.req=20)),"Steel Boots"===s&&(dS.random()>.5?(l.name="Goblin Captain's Boots",l.enhancedArmor=30,l.hp=16,l.mp=16,l.magMit=2,l.phyMit=3,l.critDamage=7,l.lightRadius=-3,l.offense=2,l.req=7):(l.name="Greenmist Boots",l.enhancedArmor=30,l.hp=20,l.mp=20,l.str=10,l.sta=10,l.intel=10,l.agi=10,l.resistPoison=20,l.req=7)),"Sabatons"===s&&(dS.random()>.5?(l.name="Minotaur's Hooves",l.enhancedArmor=35,l.runSpeed=20,l.resistFire=11,l.expFind=8,l.agi=12,l.hp=15,l.dodge=3,l.req=15,l.rarity=4):(l.name="Boots of the Righteous",l.enhancedArmor=30,l.str=19,l.wis=14,l.abjuration=4,l.alteration=3,l.enhanceMagic=2,Nv(e,15,15,15,15),l.req=11))),"weapons"===m&&("slashed"===d&&("Sword"===s&&(l.name="Gladius",l.ias=.05+.1,l.enhancedDamage=3,l.magMit=4,l.agi=7,l.dex=7,l.sta=7,l.critDamage=5,l.magicDamage=7),"Scimitar"===s&&(l.name="Iceshard Scimitar",l.enhancedDamage=4,l.hp=16,l.allStats=5,l.lightRadius=7,l.mpKill=4,l.resistCold=9,l.coldDamage=9,l.proc="Effect: Arctic Blast",l.req=12),"Axe"===s&&(dS.random()>.5?(l.name="Minotaur Battle Axe",l.ias=.05+.1,l.enhancedDamage=3,l.str=10,l.sta=5,l.oneHandSlash=3,l.attack=3,l.stun=7,l.physicalDamage=9,l.req=13,l.flavorText="The axe of choice for bloodthirsty minotaurs."):(l.name="Minotaur's Gore",l.damage=11,l.delay=3200,l.coldDamage=12,l.resistLightning=20,l.enhancePhysical=3,l.critDamage=5,l.str=13,l.req=11,l.rarity=4)),"Claws"===s&&(l.name="Bladed Prenssor Claws",l.ias=.4,l.enhancedDamage=1,l.oneHandSlash=4,l.leech=4,l.dex=10,l.fear=8,l.haste=-40,l.allSkills=1,l.proc="Effect: Blistering Blood",l.poisonDamage=10,l.req=15,l.flavorText="Deep within the Temple of Prenssor, howls of terror echoed throughout the antechamber. Yet another victim to Sentoth's orgy of bloodletting."),"Long Sword"===s&&(l.name="Razormaw Cutlass",l.ias=.05+.1,l.enhancedDamage=3,l.sta=13,l.enhancePhysical=2,l.magMit=5,l.thorns=7,l.leech=3,l.critChance=3,l.coldDamage=12,l.req=19),"Chokuto"===s&&(dS.random()>.5?(l.name="Short Sword of the Crokyn",l.enhancedDamage=5,l.globalHaste=-60,l.hpKill=4,l.leech=3,l.riposte=4,l.allResist=7,l.oneHandSlash=5,l.magicDamage=14,l.proc="Effect: Crokyn",l.req=26,l.flavorText="Crafted in secrecy by the anuran zod elites, the Short Sword of the Crokyn was entrusted to the ghoulish Anuran Lord for safe keeping."):(l.name="Soulgrinder",l.ias=.34,l.enhancedDamage=2,l.mpRegen=2,l.lightRadius=15,l.wraith=4,l.parry=5,l.resistMagic=17,l.oneHandSlash=5,l.abjuration=5,l.magicDamage=15,l.proc="Effect: Dismiss Undead",l.req=24,l.yPos=-704,l.flavorText="Wielded by an anuran with a penchant for justice, the Soulgrinder brings tidings of deliverance upon undead adversaries.")),"War Axe"===s&&(l.name="Silvery War Axe",l.ias=.05+.1,l.enhancedDamage=3,l.magMit=5,l.channeling=5,l.dodge=5,l.castingHaste=-50,l.allResist=9,l.defense=4,l.wraith=3,l.coldDamage=25,l.req=24),"Kusanagi"===s&&(dS.random()>.5?(l.name="Chromium-Bladed Masamune",l.ias=.05+.1,l.enhancedDamage=1,l.critChance=4,l.critDamage=5,l.allStats=5,l.wraith=3,l.enhancePhysical=3,l.allSkills=1,l.lightningDamage=11,l.req=26,l.flavorText="A treasure discovered by a captured servant beholden to the High Revenant Viston. Stolen from Revenant Viston's armory in the middle of the night."):(l.name="Spriggan's Blade",l.enhancedDamage=2,l.thorns=15,l.hpRegen=2,l.conjuration=3,l.evocation=3,l.phyMit=4,l.leech=5,l.enhancePhysical=2,l.critDamage=11,l.physicalDamage=15,l.req=25,l.proc="Effect: Entangling Roots",l.flavorText="This sinister blade was once the prized possession of an anuran elder in Kordata Ruins. Its thorny properties make attackers think twice."))),"crushed"===d&&("Mace"===s&&(l.name="Sageknot",l.ias=.1,l.enhancedDamage=3,l.mp=16,l.wis=5,l.oneHandBlunt=2,l.phyMit=4,l.resistLightning=14,l.resistFire=7),"Club"===s&&(l.name="Brimthorn",l.ias=.1,l.enhancedDamage=3,l.globalHaste=-60,l.sta=8,l.critDamage=4,l.thorns=7,l.magMit=4,l.physicalDamage=7,l.flavorText="A piece of wood with a protruding nail. This makes it much more effective than a regular piece of wood."),"Morning Star"===s&&(dS.random()>.5?(l.name="Howling Mace",l.ias=.1,l.enhancedDamage=4,l.mpRegen=2,l.fear=5,l.enhanceMagic=2,l.wraith=3,l.alteration=3,l.evocation=3,l.magicDamage=9,l.proc="Effect: Howling Strike",l.flavorText="The slave revolt in Lanfeld Outpost was ultimately quelled, but not before this was discovered in the taskmaster's den.",l.req=12):(l.name="Sage's Wit",l.damage=12,l.delay=3900,l.mpRegen=3,l.mpKill=3,l.lightRadius=12,l.silence=15,l.stun=10,l.intel=13,l.req=11,l.rarity=4)),"Spiked Club"===s&&(dS.random()>.5?(l.name="Bloodrise",l.ias=.1,l.enhancedDamage=4,l.hp=11,l.hpKill=5,l.leech=3,l.lightRadius=8,l.attack=4,l.fireDamage=10,l.absorbFire=3,l.req=13):(l.name="Vagrant's Branch",l.damage=9,l.delay=2900,l.wis=20,l.intel=15,l.enhanceCold=3,l.critDamage=7,l.req=11,l.rarity=4)),"Jagged Star"===s&&(l.name="Cold Iron Morning Star",l.ias=.1,l.enhancedDamage=5,l.critDamage=6,l.wis=8,l.castingHaste=-50,l.resistCold=11,l.oneHandBlunt=3,l.wraith=3,l.coldDamage=10,l.proc="Effect: Boreal Blast",l.req=15),"Scepter"===s&&(dS.random()>.5?(l.name="Ebony Black Mace",l.ias=.1,l.enhancedDamage=5,l.allStats=5,l.mp=30,l.mpKill=4,l.castingHaste=-50,l.wraith=4,l.abjuration=3,l.physicalDamage=12,l.req=11):(l.name="Golem's Crag",l.damage=13,l.delay=3600,l.resistCold=30,l.wis=15,l.globalHaste=-60,l.phyMit=5,l.enhanceCold=4,l.req=22,l.rarity=4)),"Cudgel"===s&&(l.name="Orcish Warhammer",l.enhancedDamage=5,l.oneHandBlunt=3,l.enhancePhysical=4,l.critChance=5,l.fear=8,l.leech=3,l.globalHaste=-60,l.thorns=7,l.coldDamage=14,l.flavorText="Chief Grimden's preferred weapon when routing out invaders in Lanfeld Outpost.",l.req=21),"Caduceus"===s&&(l.name="Stormeye",l.enhancedDamage=3,l.allSkills=1,l.allStats=5,l.mpRegen=3,l.mpKill=6,l.castingHaste=-50,l.evocation=3,l.allResist=9,l.lightningDamage=11,l.proc="Effect: Thunderstruck",l.flavorText="A crackling aura of static electricity seems to grip its wielder's hand firmly in place.",l.req=23)),"pierced"===d&&("Dagger"===s&&(l.name="Whimsical Dagger",l.ias=.05+.1,l.enhancedDamage=2,l.mp=16,l.mpKill=3,l.hpKill=6,l.expFind=5,l.goldFind=5,l.physicalDamage=7),"Dirk"===s&&(l.name="The Witch Doctor",l.ias=.05+.1,l.enhancedDamage=2,l.resistCold=8,l.absorbPoison=3,l.enhancePoison=4,l.poisonDamage=9,l.resistPoison=11,l.proc="Effect: Rotting Flesh"),"Kris"===s&&(l.name="Sacrificial Dagger",l.ias=.25,l.enhancedDamage=2,l.mp=21,l.intel=10,l.mpRegen=2,l.leech=3,l.wraith=3,l.hpKill=5,l.piercing=3,l.poisonDamage=11,l.proc="Effect: Brain Hew",l.flavorText="Carving out the heart of a newborn is grizzly business, but, in dark elf society, it is a requirement to ascend to High Priestess.",l.req=11),"Poignard"===s&&(l.name="Pugius",l.ias=dS.round(.05+.1),l.enhancedDamage=2,l.magMit=7,l.globalHaste=-50,l.critDamage=5,l.allSkills=1,l.allResist=5,l.magicDamage=10,l.req=13),"Rondel"===s&&(l.name="Shark Tooth",l.ias=.2+.1,l.enhancedDamage=2,l.offense=3,l.globalHaste=-80,l.doubleAttack=3,l.leech=3,l.resistPoison=10,l.piercing=3,l.coldDamage=9,l.flavorText="Though lightweight and unorthodox, a serrated shark tooth attached to a hilt is a deadly weapon.",l.req=11),"Spear"===s&&(l.name="Trident of Edenburg",l.enhancedDamage=4,l.agi=8,l.sta=5,l.critChance=3,l.wraith=3,l.allResist=7,l.defense=3,l.coldDamage=14,l.proc="Effect: Stormy Seas",l.req=19),"Cinquedeas"===s&&(l.name="Serrated Bone Cinquedeas",l.ias=.2,l.enhancedDamage=2,l.agi=15,l.haste=-30,l.critDamage=6,l.piercing=4,l.physicalDamage=4,l.magicDamage=12,l.proc="Effect: Life Leech",l.flavorText="A weapon forged by the anuran necromancers of Kordata Ruins after some medical experiments on troll slaves.",l.req=22),"Stiletto"===s&&(dS.random()>.5?(l.name="Fanged Skull Carver",l.ias=.1,l.enhancedDamage=2,l.hpRegen=4,l.leech=4,l.fear=8,l.phyMit=6,l.critChance=6,l.critDamage=8,l.physicalDamage=11,l.flavorText="A lost treasure that was hidden deep in the nether chambers of Fahlnir Citadel. Long thought to be a mythical weapon, recent discoveries have proven otherwise.",l.req=31):(l.name="Martyr's Shiv",l.damage=7,l.delay=2200,l.leech=3,l.expFind=7,l.magMit=3,l.lightRadius=7,l.poisonDamage=12,l.req=24,l.rarity=4))),"cleaved"===d&&("Giant Sword"===s&&(l.name="Obsidian Flamberge",l.ias=.05+.1,l.enhancedDamage=4,l.expFind=5,l.allStats=5,l.leech=3,l.critChance=4,l.expFind=7,l.twoHandSlash=3,l.fireDamage=11),"Giant Axe"===s&&(l.name="Silvery Two-Handed Axe",l.ias=.05+.1,l.enhancedDamage=4,l.mp=14,l.hp=11,l.allStats=5,l.allResist=9,l.allSkills=1,l.coldDamage=24,l.req=11),"Champion Sword"===s&&(l.name="Blackened Iron Bastard Sword",l.ias=.05+.1,l.enhancedDamage=4,l.hp=21,l.defense=4,l.parry=4,l.twoHandSlash=4,l.physicalDamage=28,l.req=13),"Bastard Sword"===s&&(dS.random()>.5?(l.name="Gigantic Frostreaper",l.ias=.05+.1,l.enhancedDamage=6,l.hp=25,l.leech=4,l.doubleAttack=3,l.allStats=9,l.absorbCold=4,l.resistCold=11,l.coldDamage=36,l.proc="Effect: Gust of Everfrost",l.flavorText="The weapon of choice for adventurous Barbarians seeking to lay waste to odious vermin in the frigid north.",l.req=16):(l.name="Bishop's Justice",l.damage=19,l.delay=4e3,l.magicDamage=40,l.twoHandSlash=5,l.riposte=8,l.doubleAttack=6,l.allResist=7,l.req=11,l.rarity=4)),"Gothic Axe"===s&&(l.name="Executioner's Axe",l.enhancedDamage=9,l.mp=16,l.str=25,l.critDamage=13,l.fear=5,l.twoHandSlash=3,l.physicalDamage=42,l.leech=7,l.flavorText="The howls of terror can scarcely be heard from the anuran executioner's vestibule. The encrusted blood leaves few doubts about its deeds.",l.req=21),"Katana"===s&&(l.name="Mithril Two-Handed Sword",l.ias=.2,l.enhancedDamage=5,l.fireDamage=43,l.allResist=14,l.haste=-80,l.wraith=7,l.critChance=7,l.offense=4,l.doubleAttack=8,l.req=23),"Colossus Sword"===s&&(l.name="Lamentation Blade",l.ias=.05+.1,l.enhancedDamage=5,l.absorbCold=5,l.str=23,l.leech=7,l.wraith=7,l.sta=23,l.allResist=14,l.attack=12,l.coldDamage=46,l.proc="Effect: Wailing Sorrow",l.flavorText="Vera Sintella knew that she would never be fully trusted. Revenant Viston entrusted his inner sanctum to the Blood Guardians.",l.req=25),"Mythical Sword"===s&&(l.name="Razing Sword of Carthenage",l.ias=.05+.1,l.enhancedDamage=3,l.absorbFire=5,l.critDamage=10,l.critChance=9,l.allStats=13,l.allSkills=2,l.resistFire=28,l.resistMagic=28,l.physicalDamage=36,l.flavorText="Officers of the Fire Giants of Ashenflow Peak have been sighted wielding this blade in defense of Highlord Szarthax's Lair.",l.req=29)),"staff"===d&&("Staff"===s&&(l.name="Runed Totem Staff",l.mp=16,l.hp=16,l.wis=10,l.intel=10,l.castingHaste=-50,l.magicDamage=11,l.resistMagic=9,l.expFind=9),"Runic Staff"===s&&(l.name="Bane Ash",l.mp=25,l.castingHaste=-50,l.mpRegen=4,l.critChance=3,l.resistFire=11,l.fireDamage=25,l.silence=9,l.coldDamage=10),"Cedar Staff"===s&&(l.name="Serpent Lord",l.mp=16,l.allStats=10,l.enhancePoison=5,l.poisonDamage=23,l.leech=5,l.wraith=5,l.mpKill=15,l.resistPoison=40,l.req=14),"Quarterstaff"===s&&(l.name="Spire of Sentoth",l.mp=25,l.allSkills=1,l.enhanceLightning=5,l.mpRegen=7,l.intel=13,l.phyMit=5,l.lightningDamage=25,l.resistLightning=43,l.silence=12,l.req=17),"Cosmic Staff"===s&&(l.name="Staff of the Sentinel",l.mp=36,l.wis=11,l.intel=11,l.castingHaste=-90,l.stun=9,l.magicDamage=42,l.silence=13,l.lightRadius=15,l.allSkills=1,l.alteration=3,l.flavorText="A knowing glance seemed to confirm her suspicions. Even in private it seemed to know her inner-most thoughts.",l.req=22),"Archon Staff"===s&&(l.name="The Salamander",l.mp=50,l.mpRegen=8,l.enhanceFire=5,l.evocation=3,l.channeling=3,l.conjuration=3,l.wraith=7,l.leech=7,l.castingHaste=-100,l.fireDamage=48,l.allSkills=2,l.proc="Effect: Hydra Bolt",l.req=25,l.flavorText="Wrought from the netherworld and born once again with the blood of serpents, the reckoning is upon us and, this time, we came prepared.")),"smashed"===d&&("Giant Mace"===s&&(l.name="Crushflange",l.ias=.2,l.enhancedDamage=5,l.magicDamage=14,l.str=15,l.sta=6,l.lightRadius=8,l.stun=14,l.resistFire=11,l.critDamage=14),"Auric Maul"===s&&(l.name="Runic Warhammer",l.ias=.2,l.enhancedDamage=5,l.hpRegen=4,l.critChance=4,l.sta=8,l.wis=14,l.magMit=8,l.magicDamage=11),"Mallet"===s&&(l.name="Midnight Mallet",l.ias=.2,l.enhancedDamage=4,l.wraith=5,l.globalHaste=-50,l.phyMit=8,l.allSkills=1,l.defense=4,l.attack=4,l.coldDamage=23,l.flavorText="In darkness the werewolves and vampires swarmed about, yet they vanish like phantoms at dawn. Evil cannot withstand the holy fires of Yentus.",l.req=13),"Ogre Maul"===s&&(l.name="Ogre War Maul",l.ias=.25,l.enhancedDamage=3,l.leech=7,l.str=30,l.sta=30,l.stun=15,l.critDamage=14,l.physicalDamage=21,l.req=17),"Great Maul"===s&&(l.name="Bonesnap",l.ias=.2,l.enhancedDamage=4,l.defense=5,l.str=25,l.dex=15,l.leech=6,l.resistFire=25,l.resistCold=25,l.allSkills=3,l.physicalDamage=25,l.req=19),"Sledgehammer"===s&&(l.name="Blighthammer",l.ias=.2,l.enhancedDamage=5,l.critDamage=11,l.allStats=11,l.leech=7,l.wraith=9,l.fear=12,l.alteration=5,l.conjuration=8,l.poisonDamage=45,l.proc="Effect: Wretched Plague",l.req=22),"Umbral Hammer"===s&&(l.name="Steeldriver",l.ias=.2,l.enhancedDamage=3,l.critChance=9,l.critDamage=10,l.leech=7,l.twoHandBlunt=6,l.doubleAttack=7,l.riposte=5,l.physicalDamage=45,l.flavorText="Pain. Suffering. Despair. Crushing all in its path without mercy.",l.req=25),"Thunder Maul"===s&&(l.name="Gerke's Toy",l.enhancedDamage=5,l.allStats=13,l.wraith=9,l.hpRegen=5,l.haste=-60,l.critChance=10,l.twoHandBlunt=5,l.physicalDamage=55,l.proc="Effect: Thunderstorm",l.flavorText="Once in a while, Gerke is seen wandering the plains looking for lions to smash. His penchant for squishing hapless adventurers earned him an ignoble reputation.",l.req=28))),"shield"===m&&("shield"===d&&("Buckler"===s&&(dS.random()>.5?(l.name="Bark Shield",l.enhancedArmor=24,l.mp=16,l.agi=15,l.lightningDamage=2,l.expFind=7,l.leech=4,l.alteration=2,l.thorns=4):(l.name="Vagrant's Slab",l.armor=25,l.resistCold=25,l.resistFire=25,l.resistLightning=25,l.allStats=10,l.allSkills=1,l.hpRegen=2,l.req=12,l.rarity=4)),"Small Shield"===s&&(l.name="Shiny Brass Shield",l.enhancedArmor=28,l.hp=11,l.phyMit=5,l.magMit=5,l.leech=5,l.hpKill=7,l.critDamage=5,l.resistMagic=11),"Kite Shield"===s&&(l.name="Singed Guardian Shield",l.enhancedArmor=30,l.mp=16,l.wis=15,l.castingHaste=-60,l.absorbFire=3,l.fireDamage=5,l.resistFire=14,l.hpKill=9,l.req=11),"Round Shield"===s&&(l.name="Scute Shield",l.enhancedArmor=40,l.sta=11,l.oneHandBlunt=3,l.sta=10,l.defense=3,l.cold=9,l.globalHaste=-90,l.hpKill=5,l.req=14),"Gothic Shield"===s&&(l.name="Crested Viston Shield",l.enhancedArmor=35,l.hp=25,l.dex=12,l.hpKill=5,l.fear=8,l.leech=5,l.globalHaste=-100,l.resistMagic=10,l.resistLightning=10,l.resistPoison=10,l.req=19),"Crown Shield"===s&&(l.name="Chitin Shell Shield",l.enhancedArmor=40,l.hp=16,l.mp=25,l.critChance=5,l.haste=-50,l.resistPoison=9,l.cold=11,l.poisonDamage=9,l.req=21),"Aegis"===s&&(l.name="The Ward",l.enhancedArmor=45,l.defense=5,l.str=15,l.lightRadius=15,l.oneHandBlunt=4,l.leech=5,l.magMit=8,l.silence=13,l.allResist=14,l.req=23),"Monarch"===s&&(l.name="Steelclash",l.enhancedArmor=50,l.phyMit=9,l.parry=5,l.oneHandBlunt=5,l.castingHaste=-80,l.lightRadius=9,l.leech=5,l.wraith=5,l.allSkills=1,l.allResist=12,l.req=26)),"offhand"===d&&("Stein"===s&&(dS.random()>.5?(l.name="Stein of Gorgek",l.hp=21,l.mp=21,l.dex=10,l.intel=15,l.mpRegen=2,l.castingHaste=-40,l.expFind=5,l.alteration=3):(l.name="Drunkard's Stein",l.enhanceMagic=2,l.mpRegen=2,l.sta=14,l.cha=11,l.runSpeed=5,l.stun=7,l.goldFind=7,l.hpRegen=2)),"Dark Orb"===s&&(dS.random()>.5?(l.name="Shimmering Orb",l.armor=15,l.hp=23,l.conjuration=4,l.mpKill=9,l.mp=36,l.castingHaste=-70,l.resistPoison=10,l.req=10):(l.name="Chancellor's Bias",l.castingHaste=-120,l.mp=55,l.hp=40,l.silence=20,l.enhancePoison=3,l.mpKill=12,l.req=11,l.rarity=4)),"Ancient Tome"===s&&(l.name="Testament of Rinara",l.mp=28,l.mp=36,l.intel=12,l.cha=20,l.castingHaste=-60,l.allSkills=1,l.mpRegen=3,l.req=13),"Totem"===s&&(l.name="Paw of Rockgard",l.mp=40,l.wis=14,l.sta=10,l.agi=9,l.silence=12,l.castingHaste=-50,l.mpRegen=2,l.resistPoison=11,l.req=16),"Crystal Ball"===s&&(dS.random()>.5?(l.name="Manastone",l.fear=10,l.allStats=8,l.mp=55,l.channeling=6,l.lightRadius=12,l.mpRegen=7,l.mpKill=12,l.castingHaste=-90,l.silence=9,l.stun=10,l.flavorText="A legendary stone known for its mana restoration properties. Some believe that an anuran wizard inverted the energy from an evil eye's soul inside.",l.req=22):(l.name="Wyvern's Eye",l.hp=60,l.mp=25,l.mpRegen=5,l.mpKill=5,l.castingHaste=-110,l.enhanceLightning=5,l.req=20,l.rarity=4)),"Skull"===s&&(l.name="Skull of Fintler",l.mp=45,l.critDamage=6,l.mpKill=4,l.hpKill=8,l.conjuration=4,l.castingHaste=-90,l.silence=13,l.resistPoison=21,l.req=23),"Emblazoned Orb"===s&&(dS.random()>.5?(l.name="Glowing Black Stone",l.mp=45,l.intel=14,l.mpKill=9,l.mpRegen=4,l.critChance=3,l.silence=13,l.evocation=8,l.resistMagic=23,l.flavorText="A powerful stone possessed by a hapless, quirky gnome. Nobody knows for sure how she got her hands on it.",l.req=25):(l.name="Magnate's Sapphire",l.resistCold=15,l.mp=60,l.hp=35,l.mpRegen=4,l.critChance=5,l.castingHaste=-70,l.globalHaste=-120,l.req=21,l.rarity=4)),"Idol"===s&&(l.name="Pearl Fahlnir Totem",l.mp=50,l.str=-9,l.wis=11,l.allSkills=1,l.allResist=14,l.castingHaste=-90,l.req=28))),"range"===d&&("Short Bow"===s&&(l.name="Pluckstring",l.ias=.15,l.enhancedDamage=3,l.hp=14,l.agi=5,l.mpKill=2,l.lightRadius=5,l.attack=2,l.coldDamage=5),"Hunter's Bow"===s&&(l.name="Chirpstrike",l.ias=.15,l.enhancedDamage=3,l.attack=4,l.critDamage=3,l.hpKill=2,l.expFind=5,l.resistMagic=9,l.physicalDamage=4),"Composite Bow"===s&&(l.name="Runed Oak Bow",l.ias=.15,l.enhancedDamage=3,l.alteration=1,l.wis=5,l.resistCold=8,l.expFind=7,l.defense=2,l.coldDamage=5,l.req=13),"Siege Bow"===s&&(l.name="Raven Maw Bow",l.ias=.15,l.enhancedDamage=3,l.attack=2,l.str=6,l.dex=6,l.lightRadius=5,l.channeling=2,l.fireDamage=3,l.req=15),"Astral Bow"===s&&(l.name="Larktwitter Bow",l.ias=.15,l.enhancedDamage=3,l.mp=14,l.wis=7,l.magMit=3,l.resistMagic=9,l.absorbMagic=3,l.flavorText="The bow of a mischievous fairy known to flutter about Tendolin Meadows.",l.req=17),"Gothic Bow"===s&&(l.name="Stormstrike Bow",l.ias=.15,l.enhancedDamage=3,l.mp=16,l.parry=3,l.attack=3,l.str=12,l.lightningDamage=3,l.resistLightning=9,l.req=20),"Ward Bow"===s&&(l.name="Qalonscathe",l.ias=.15,l.enhancedDamage=3,l.critDamage=5,l.attack=5,l.dex=12,l.resistFire=9,l.fireDamage=3,l.req=22),"Hydra Bow"===s&&(l.name="Stormcaller Bow",l.ias=.15,l.enhancedDamage=2,l.critChance=3,l.absorbLightning=5,l.lightningDamage=5,l.hpKill=5,l.resistCold=9,l.flavorText="A bow imbued by Rinara to strike down on the Godless aberrations of Vandamor.",l.req=25)),"trinket"===d&&("Trinket"===s&&(dS.random()>.5?(l.name="Shyclasp's Fortune",l.goldFind=9,l.cha=10,l.sta=10,l.resistCold=4,l.resistLightning=3,l.resistPoison=7,l.resistFire=9,l.flavorText="A lucky charm used by an old drunkard while gambling in the desert.",l.req=13):(l.name="Emissary's Craft",l.allSkills=1,l.resistPoison=15,l.resistFire=10,l.dodge=3,l.evocation=5,l.req=12,l.rarity=4)),"Memento"===s&&(dS.random()>.5?(l.name="Omen of Will",l.mp=9,l.hpKill=7,l.mpKill=2,l.expFind=5,l.cold=9,l.defense=2,l.sta=5,l.req=19):(l.name="Magnate's Lamp",l.expFind=9,l.goldFind=12,l.lightRadius=12,l.hp=45,l.mp=25,l.resistFire=50,l.req=15,l.rarity=4)),"Charm"===s&&(l.name="Signet of the Scaled Order",l.mp=16,l.offense=2,l.evocation=3,l.fear=8,l.silence=9,l.absorbFire=2,l.absorbCold=2,l.resistFire=11,l.resistCold=11,l.flavorText="The signet used to identify fellow dragon luminaries.",l.req=30))}if(1===r){if("helmet"===m&&("Hood"===s&&(l.name="Vampire Cowl",l.enhancedArmor=65,l.coldDamage=5,l.sta=19,l.leech=3,l.wraith=3,l.phyMit=2,l.magMit=2,l.flavorText="This vampiric relic is a favorite amongst the cold-blooded harbingers that wander the depths of Viston's Redoubt.",l.req=36),"Cap"===s&&(dS.random()>.5?(l.name="Peasant Crown",l.enhancedArmor=60,l.allSkills=1,l.runSpeed=10,l.hpRegen=4,l.intel=19,l.sta=19,l.req=38):(l.name="Willow's Flare",l.enhancedArmor=90,l.enhanceFire=5,l.allSkills=2,l.resistFire=24,l.resistLightning=14,l.thorns=25,l.allStats=10,l.mpKill=3,l.absorbFire=3,l.req=42,l.rarity=4)),"Bandana"===s&&(l.name="Ebony Headband",l.enhancedArmor=65,l.fear=6,l.handtohand=4,l.attack=6,l.expFind=5,l.hp=35,l.globalHaste=-30,l.req=40),"Diadem"===s&&(dS.random()>.5?(l.name="Crystal Chitin Circlet",l.enhancedArmor=75,l.phyMit=4,l.abjuration=5,l.defense=5,l.allSkills=1,l.dex=16,l.abjuration=4,l.req=42):(l.name="Venova's Halo",l.enhancedArmor=90,l.allSkills=5,l.enhanceMagic=5,l.allResist=14,l.hp=35,l.mp=65,l.resistLightning=55,l.req=42,l.rarity=4)),"Dark Hood"===s&&(l.name="Blood Harvester",l.enhancedArmor=75,l.conjuration=4,l.hpKill=7,l.hpRegen=3,l.hp=30,l.leech=3,l.resistCold=21,l.req=44),"Coronet"===s&&(l.name="Crown of Thieves",l.enhancedArmor=75,l.dodge=4,l.goldFind=15,l.dex=25,l.hp=35,l.resistFire=33,l.leech=4,l.req=46),"Miter"===s&&(dS.random()>.5?(l.name="Halo of the Enlightened",l.enhancedArmor=75,l.critChance=3,l.sta=15,l.alteration=4,l.mp=42,l.allResist=10,l.silence=6,l.lightRadius=10,l.req=48):(l.name="Satyr's Turban",l.enhancedArmor=90,l.allSkills=1,l.resistMagic=22,l.resistFire=25,Nv(e,12,12,12,12),l.defense=8,l.mp=55,l.intel=25,l.req=43,l.rarity=4)),"Astral Hood"===s&&(dS.random()>.5?(l.name="Acolyte's Sacrament Hood",l.allSkills=2,l.alteration=5,l.enhanceMagic=2,l.hpKill=8,l.hp=40,l.mp=25,l.lightRadius=6,l.resistMagic=40,l.req=50):(l.name="Malefactor's Terminal",l.enhancedArmor=90,l.allSkills=1,l.lightRadius=20,l.enhanceAll=3,l.absorbLightning=5,l.resistLightning=20,l.resistPoison=13,l.resistCold=13,l.allStats=5,l.req=46,l.rarity=4)),"Mail Hood"===s&&(l.name="Doomchains",l.enhancedArmor=65,l.allStats=11,l.allSkills=1,l.attack=7,l.allResist=9,l.critDamage=7,l.req=38),"Coif"===s&&(l.name="Gleaming Sundered Coif",l.enhancedArmor=75,l.critDamage=6,l.evocation=4,l.channeling=4,l.mpKill=4,l.hpKill=8,l.lightRadius=12,l.resistLightning=36,l.req=42),"Armet"===s&&(l.name="Hager's Sparring Helmet",l.enhancedArmor=75,l.critChance=3,l.oneHandSlash=4,l.wis=25,l.physicalDamage=5,l.allStats=12,l.allResist=8,l.req=46),"Sallet"===s&&(l.name="Indomitable Guise",l.enhancedArmor=75,l.thorns=12,l.weight=1,l.absorbCold=2,l.sta=24,l.hpRegen=4,l.allResist=14,l.req=50),"Burgonet"===s&&(dS.random()>.5?(l.name="Duke's Adoration",l.enhancedArmor=100,l.resistMagic=35,l.resistCold=20,l.resistPoison=15,l.wis=25,l.cold=21,l.hp=20,l.req=42,l.rarity=4):(l.name="Daimyo's Enso",l.enhancedArmor=90,l.enhancePhysical=5,l.enhanceFire=9,l.critChance=7,l.critDamage=15,l.runSpeed=15,l.cold=40,l.castingHaste=-100,l.allStats=13,l.req=44,l.rarity=4)),"Great Helm"===s&&(l.name="Stealskull",l.enhancedArmor=75,l.globalHaste=-80,l.defense=5,l.leech=4,l.wraith=4,l.hpKill=10,l.mpKill=5,l.hp=15,l.req=42),"Barbute"===s&&(dS.random()>.5?(l.name="Lustrous Brass Helm",l.enhancedArmor=75,l.allStats=10,l.silence=6,l.allResist=15,l.enhanceMagic=3,l.magMit=3,l.req=46):(l.name="Guardian's Merlon",l.enhancedArmor=90,l.allSkills=2,l.allResists=13,l.hp=66,l.globalHaste=-70,l.enhancePhysical=7,l.absorbMagic=5,l.critChance=9,l.str=45,l.magMit=5,l.req=46,l.rarity=4)),"Royal Helm"===s&&(l.name="Augur's Skull",l.enhancedArmor=90,l.allSkills=2,l.resistCold=21,l.resistPoison=35,Nv(e,9,9,9,9),l.intel=20,l.doubleAttack=6,l.enhanceAll=2,l.req=42,l.rarity=4)),"neck"===m){if(c<=58){1===(h=~~(1+5*dS.random()))&&(l.name="Bloodletter's Vial",l.allSkills=1,l.runSpeed=15,l.hpRegen=7,l.stun=16,l.cold=12,l.goldFind=24,l.critChance=5,l.doubleAttack=3,l.riposte=6,l.req=49,l.rarity=4),2===h&&(l.name="The Rising Sun",l.lightRadius=4,l.enhanceFire=3,l.hpRegen=5,l.fireDamage=8,l.absorbFire=3,l.req=38),3===h&&(l.name="Disciple's Symbol of Rinara",l.wis=35,l.hpRegen=5,l.resistLightning=50,l.thorns=15,l.enhanceLightning=5,l.req=40),4===h&&(dS.random()>.5?(l.name="Entariz's Talisman",l.resistMagic=35,l.runSpeed=10,l.critChance=3,l.intel=30,l.castingHaste=-60,l.req=40):(l.name="Satyr's Opulence",l.alteration=5,l.conjuration=5,l.resistMagic=43,l.resistCold=20,l.intel=46,l.mpRegen=4,l.enhanceMagic=4,l.req=45,l.rarity=4)),5===h&&(dS.random()>.5?(l.name="Necklace of Whispering Winds",l.lightningDamage=8,l.alteration=4,l.conjuration=4,l.silence=10,l.mpKill=5,l.expFind=3,l.req=40):(l.name="Baron's Cadenza",l.agi=22,l.cold=35,l.allSkills=2,l.cha=15,l.phyMit=5,l.hp=33,l.castingHaste=-120,l.wraith=4,l.req=47,l.rarity=4))}if(c>=59&&c<=68){1===(h=~~(1+5*dS.random()))&&(l.name="Twinkling Fae Pendant",l.dex=25,l.agi=25,l.cha=25,l.lightRadius=9,l.oneHandSlash=4,l.resistLightning=35,l.req=42),2===h&&(l.name="Amulet of Bozrah",l.intel=33,l.resistMagic=40,l.conjuration=12,l.channeling=5,l.critDamage=5,l.flavorText="Rumors abound that this condemned item possesses a demonic power unknown to those outside the halls of necromancy.",l.req=42),3===h&&(l.name="Shadow Fang Necklace",l.attack=8,l.piercing=6,l.parry=5,l.hpKill=7,l.resistCold=32,l.agi=25,l.req=44),4===h&&(l.name="Amulet of the Storm",l.critChance=5,l.critDamage=10,l.castingHaste=-100,l.enhanceLightning=3,l.silence=12,l.absorbLightning=4,l.req=46),5===h&&(l.name="Mendicant's Agimat",l.alteration=7,l.abjuration=12,l.mpRegen=7,l.enhanceAll=3,l.resistCold=40,l.resistPoison=25,l.wis=25,l.castingHaste=-100,l.req=49,l.rarity=4)}if(c>=69){1===(h=~~(1+5*dS.random()))&&(l.name="Kanthrixen's Talisman",l.piercing=7,l.haste=-50,l.poisonDamage=15,l.absorbPoison=5,l.str=35,l.req=46),2===h&&(l.name="Amulet of the Dreadgazer",l.defense=5,l.hp=45,l.allResist=13,l.offense=5,l.phyMit=3,l.stun=12,l.req=46),3===h&&(l.name="Kaedorn Badge of Honor",l.hp=55,l.mp=33,l.lightRadius=10,l.twoHandSlash=7,l.allResist=6,l.flavorText="Awarded by Miranda Crossheart to those that earn the Star Citizen award for each month. Typically awarded for cleansing the land of mischievous gnolls that terrorize the countryside.",l.req=48),4===h&&(l.name="Hematite Pentacle",l.mp=60,l.intel=20,l.evocation=8,l.conjuration=4,l.enhanceMagic=5,l.castingHaste=-80,l.lightRadius=-15,l.req=48),5===h&&(l.name="Duke's Laurel",l.allSkills=3,l.globalHaste=-100,l.castingHaste=-150,l.silence=15,l.stun=25,l.enhanceMagic=5,l.mpRegen=5,l.leech=3,l.req=43,l.rarity=4)}}if("ring"===m){if(c<=58){1===(h=~~(1+5*dS.random()))&&(l.name="Gronk's Wedding Ring",l.str=15,l.attack=5,l.hp=20,l.stun=10,l.critDamage=10,l.flavorText='"Gronk make find of true love. Shiny make me strong. Broken Skull Clan no have ring like dis."',l.req=38),2===h&&(l.name="Augur's Pustule",l.allResist=10,l.absorbCold=5,l.leech=4,l.wraith=6,l.lightRadius=10,l.magMit=5,l.critChance=5,l.req=42,l.rarity=4),3===h&&(l.name="Willow's Seed",l.castingHaste=-60,l.absorbLightning=6,l.absorbCold=4,l.fear=20,l.mpRegen=3,l.hpRegen=3,l.allStats=7,l.req=42,l.rarity=4),4===h&&(l.name="Mendicant's Clover",l.haste=-80,l.mpRegen=7,l.leech=5,l.wis=15,l.intel=21,l.enhanceCold=5,l.critChance=3,l.req=42,l.rarity=4),5===h&&(l.name="Summoner's Gyre",l.castingHaste=-130,l.allSkills=3,l.hp=30,l.intel=15,l.critChance=5,l.conjuration=4,l.lightRadius=15,Rv(e,5),l.req=45,l.rarity=4)}if(c>=59&&c<=68){1===(h=~~(1+5*dS.random()))&&(l.name="Daimyo's Miyabi",l.wraith=6,l.wis=20,l.agi=15,l.enhanceFire=3,l.str=12,l.doubleAttack=6,l.resistCold=20,l.resistLightning=20,l.req=46,l.rarity=4),2===h&&(l.name="Wraith's Lesion",l.hp=33,l.mp=20,l.castingHaste=-80,l.critDamage=12,l.magMit=4,l.intel=15,l.enhanceMagic=3,l.req=43,l.rarity=4),3===h&&(l.name="Venova's Eternity",l.haste=-50,l.castingHaste=-70,l.hpRegen=5,l.mpRegen=5,l.allStats=8,l.absorbMagic=4,l.enhanceMagic=2,l.req=42,l.rarity=4),4===h&&(l.name="Band of Screaming Winds",l.hp=25,l.mp=25,l.resistLightning=25,l.critDamage=10,l.critChance=3,l.req=46),5===h&&(l.name="Bloodletter's Clot",l.leech=12,l.agi=35,l.enhancePhysical=4,l.piercing=6,l.attack=15,l.dex=15,l.haste=-50,l.req=48,l.rarity=4)}if(c>=69){1===(h=~~(1+4*dS.random()))&&(l.name="Ring of Rainbow Skies",l.offense=6,l.abjuration=6,l.allStats=7,l.allResist=11,l.req=48),2===h&&(l.name="Elusive Warping Ring",l.dodge=5,l.stun=5,l.runSpeed=8,l.dex=12,l.agi=15,l.haste=-40,l.req=48),3===h&&(l.name="Titan's Wrath",l.str=30,l.hp=25,l.critChance=3,l.stun=8,l.doubleAttack=8,l.req=50),4===h&&(l.name="Shirk's Wretched Ring",l.allStats=8,l.allResist=10,l.allSkills=1,l.haste=-30,l.req=50)}}if("shoulders"===m&&("Cloth Drape"===s&&(l.name="Spectre's Drape",l.enhancedArmor=65,l.hp=35,l.dex=8,l.intel=15,l.silence=10,l.fear=10,l.resistMagic=20,l.req=36),"Woven Drape"===s&&(l.name="Gnome Prodigy's Mantle",l.enhancedArmor=65,l.evocation=3,l.intel=21,l.abjuration=3,l.resistLightning=24,l.mpRegen=2,l.mp=20,l.req=40),"Azure Shawl"===s&&(l.name="Summoner's Residue",l.enhancedArmor=90,l.allResist=13,l.alteration=3,l.abjuration=3,l.intel=30,l.silence=38,l.fear=25,l.hp=21,l.req=42,l.rarity=4),"Archon Shawl"===s&&(dS.random()>.5?(l.name="Shawl of the Siren",l.enhancedArmor=75,l.sta=25,l.cha=35,l.fear=8,l.resistCold=24,l.resistFire=24,l.channeling=5,l.req=48):(l.name="Willow's Frost",l.enhancedArmor=90,l.allResist=18,l.absorbCold=7,l.wis=36,l.enhanceCold=10,l.silence=33,l.magMit=5,l.stun=20,l.sta=11,l.req=46,l.rarity=4)),"Leather Shoulders"===s&&(l.name="Gaulite Pads",l.enhancedArmor=65,l.allStats=7,l.riposte=5,l.parry=5,l.physicalDamage=3,l.defense=5,l.phyMit=5,l.req=36),"Studded Shoulders"===s&&(l.name="Simmering Mantle",l.enhancedArmor=65,l.absorbFire=2,l.resistFire=30,l.enhanceFire=2,l.evocation=5,l.thorns=8,l.goldFind=15,l.req=40),"Spiked Shoulders"===s&&(l.name="Shang Zhou's Defiance",l.enhancedArmor=75,l.handtohand=10,l.agi=15,l.stun=16,l.resistMagic=35,l.critDamage=8,l.req=44),"Brigand Shoulders"===s&&(l.name="Everlasting Grace",l.enhancedArmor=75,l.allStats=10,l.alteration=6,l.channeling=6,l.silence=12,l.allResist=10,l.weight=1,l.req=48),"Scaled Mantle"===s&&(dS.random()>.5?(l.name="Doubtful Repent",l.enhancedArmor=65,l.mp=35,l.wis=12,l.dex=10,l.expFind=8,l.abjuration=8,l.resistPoison=40,l.req=36):(l.name="Mendicant's Albatross",l.enhancedArmor=90,l.allResist=14,l.enhanceCold=9,l.enhancePoison=5,l.castingHaste=-60,l.critChance=7,l.cold=30,l.silence=45,l.req=42,l.rarity=4)),"Chain Mantle"===s&&(l.name="Scavenger's Embrace",l.enhancedArmor=65,l.stun=10,l.critDamage=8,l.allResist=8,l.hpKill=5,l.leech=3,l.doubleAttack=6,l.attack=6,l.req=40),"Kusari Mantle"===s&&(l.name="Rowyl's Forged Mantle",l.enhancedArmor=75,l.hp=25,l.agi=10,l.dex=10,l.critChance=2,l.resistLightning=15,l.resistCold=25,l.req=44),"Laminar Mantle"===s&&(l.name="Blitzing Vambrace",l.enhancedArmor=75,l.hp=25,l.offense=5,l.attack=8,l.cold=12,l.expFind=7,l.resistCold=30,l.req=48),"Cobalt Spaulders"===s&&(l.name="Solitude's Penance",l.enhancedArmor=65,l.hp=20,l.defense=4,l.twoHandSlash=8,l.wis=15,l.thorns=12,l.req=36),"Mithril Pauldrons"===s&&(l.name="Herbignat's Evisceration",l.enhancedArmor=65,l.hp=25,l.str=15,l.conjuration=8,l.channeling=4,l.twoHandBlunt=8,l.resistCold=35,l.req=40),"Sode"===s&&(dS.random()>.5?(l.name="Beguiler's Sonnet",l.enhancedArmor=75,l.mp=20,l.dex=15,l.cha=15,l.goldFind=15,l.expFind=15,l.weight=1,l.req=44):(l.name="Duke's Proclamation",l.enhancedArmor=90,l.allResist=8,l.allStats=5,l.enhanceMagic=5,l.alteration=3,l.hpKill=8,l.absorbMagic=3,l.mpRegen=3,l.req=42,l.rarity=4)),"Monarch Pauldrons"===s&&(dS.random()>.5?(l.name="Wing of Victory",l.enhancedArmor=75,l.hpKill=10,l.str=15,l.dex=15,l.allSkills=2,l.allResist=12,l.req=48):(l.name="Guardian's Bastion",l.enhancedArmor=80,l.resistLightning=45,l.hp=35,l.absorbCold=5,l.req=42,l.rarity=4))),"back"===m&&("Cape"===s&&(dS.random()>.5?(l.name="Hallowed Cloak",l.expFind=8,l.allStats=5,l.dex=5,l.hp=20,l.mp=20,l.allResist=5,l.silence=5,l.req=36):(l.name="Wraith's Pall",l.castingHaste=-200,l.intel=42,l.enhancePoison=7,l.enhanceFire=4,l.critChance=5,l.sta=17,l.lightRadius=15,l.allSkills=3,l.req=36,l.rarity=4)),"Cloak"===s&&(l.name="Cloak of Autumn",l.hpRegen=2,l.abjuration=4,l.alteration=4,l.thorns=15,l.resistFire=25,l.resistCold=25,l.req=37),"Woven Cloak"===s&&(dS.random()>.5?(l.name="Cloak of Penitence",l.intel=15,l.sta=12,l.cha=12,l.silence=12,l.enhanceMagic=2,l.magicDamage=5,l.req=38):(l.name="Duke's Ascension",l.haste=-60,l.globalHaste=-100,l.mp=50,l.dex=11,l.agi=12,l.str=11,l.evocation=5,l.req=42,l.rarity=4)),"Fur-Lined Cloak"===s&&(l.name="Cloak of Madness",l.fireDamage=5,l.hpKill=10,l.defense=4,l.offense=4,l.allResist=10,l.haste=-50,l.req=39),"Drake-hide Cloak"===s&&(l.name="Winter's Death",l.goldFind=12,l.piercing=7,l.absorbCold=3,l.coldDamage=10,l.resistCold=40,l.enhanceCold=3,l.req=40),"Brigand's Shroud"===s&&(l.name="Venova's Wings",l.castingHaste=-120,l.str=11,l.agi=9,l.allResist=10,l.hp=27,Nv(e,20,20,20,20),l.req=42,l.rarity=4),"Regal Shroud"===s&&(l.name="Monarch's Ceremonial Shroud",l.cha=20,l.sta=15,l.mp=20,l.parry=4,l.channeling=6,l.critDamage=7,l.lightRadius=12,l.req=41),"Orcish Cloak"===s&&(l.name="Brazen Rectifier's Cloak",l.hp=25,l.mp=25,l.mpKill=12,l.oneHandBlunt=8,l.fear=12,l.stun=8,l.req=42),"Elven Shroud"===s&&(l.name="Nature's Punishment",l.hpRegen=3,l.silence=12,l.allStats=12,l.enhanceLightning=5,l.absorbLightning=3,l.req=43),"Emerald Cloak"===s&&(dS.random()>.5?(l.name="Rinara's Loathing",l.wis=20,l.alteration=5,l.thorns=20,l.critChance=3,l.critDamage=8,l.resistLightning=50,l.req=43):(l.name="Daimyo's Wabi",l.haste=-80,l.castingHaste=-120,l.critDamage=8,l.dex=19,l.hp=16,l.mp=34,l.lightRadius=10,Nv(e,13,13,13,13),l.req=43,l.rarity=4)),"Aviak Cloak"===s&&(l.name="Cloak of the Underdark",l.attack=10,l.dodge=4,l.offense=4,l.dex=20,l.fear=10,l.poisonDamage=12,l.resistPoison=30,l.req=44),"Chlamys"===s&&(l.name="Molting Griffon Cloak",l.offense=5,l.hp=25,l.runSpeed=5,l.critChance=3,l.resistLightning=25,l.resistPoison=12,l.req=44),"Burnt Cape"===s&&(l.name="Rukishna Cloak",l.channeling=5,l.evocation=5,l.wis=15,l.intel=15,l.mpKill=5,l.resistFire=55,l.req=45),"Umbral Shroud"===s&&(l.name="Excrescent Cloak",l.allStats=5,l.allSkills=2,l.allResist=10,l.expFind=5,l.lightRadius=5,l.req=46),"Archon Cloak"===s&&(l.name="Nordic Sanctuary",l.abjuration=6,l.allStats=6,l.hp=30,l.resistCold=60,l.coldDamage=15,l.absorbCold=5,l.req=47),"Astral Cloak"===s&&(l.name="Solfeaux Berserker Cloak",l.str=9,l.dex=9,l.haste=-120,l.globalHaste=-60,l.sta=9,l.agi=9,l.hp=50,l.flavorText="A anuran relic imported from the far reaches of Vandamor. Rumored to be enchanted by a high-ranking anuran shaman.",l.req=47)),"chest"===m&&("Elven Robe"===s&&(l.name="Robe of the Blighted",l.enhancedArmor=65,l.sta=10,l.mp=100,l.intel=10,l.resistPoison=30,l.resistLightning=30,l.silence=15,l.flavorText="For a brief time this was the favored robe of Revenant Viston.",l.req=36),"Silk Robe"===s&&(dS.random()>.5?(l.name="The Spirit Shroud",l.enhancedArmor=65,l.magMit=12,l.allSkills=1,l.hpRegen=5,l.absorbCold=5,l.cold=20,l.req=40):(l.name="Satyr's Delusion",l.enhancedArmor=90,l.allSkills=3,l.allResist=13,l.allStats=13,Nv(e,10,10,10,10),l.enhanceAll=3,l.castingHaste=-100,l.lightRadius=10,l.req=47,l.rarity=4)),"Linen Robe"===s&&(dS.random()>.5?(l.name="Skin of the Serpent Lord",l.enhancedArmor=75,l.magMit=9,l.absorbPoison=2,l.poisonDamage=25,l.allSkills=1,l.castingHaste=-50,l.allResist=10,l.req=44):(l.name="Wraith's Husk",l.enhancedArmor=90,l.magMit=10,l.phyMit=24,l.hp=80,l.enhancePoison=12,l.critChance=8,l.critDamage=13,l.allResist=14,l.conjuration=20,l.req=44,l.rarity=4)),"Azure Robe"===s&&(dS.random()>.5?(l.name="Ambrosia Robe",l.enhancedArmor=75,l.intel=20,l.mpRegen=4,l.mpKill=10,l.resistMagic=45,l.resistCold=20,l.enhanceMagic=2,l.silence=8,l.req=48):(l.name="Summoner's Furnace",l.enhancedArmor=90,l.absorbFire=12,l.enhanceFire=8,l.enhanceLightning=5,l.enhanceCold=5,l.conjuration=13,l.evocation=5,l.phyMit=8,l.magMit=15,l.intel=22,l.req=48,l.rarity=4)),"Quilted Tunic"===s&&(l.name="Ghastly Vapors",l.enhancedArmor=65,l.handtohand=5,l.poisonDamage=15,l.hp=30,l.dodge=5,l.enhancePoison=6,l.allResist=9,l.absorbPoison=4,l.req=36),"Spiked Vestment"===s&&(l.name="Zealous Battle Wraps",l.enhancedArmor=65,l.attack=7,l.hpKill=15,l.handtohand=7,l.allStats=12,l.critDamage=7,l.req=40),"Leather Armor"===s&&(dS.random()>.5?(l.name="Skin of the Goblin Kin",l.enhancedArmor=75,l.leech=5,l.piercing=7,l.hpRegen=5,l.thorns=17,l.req=44):(l.name="Friar's Sacrifice",l.enhancedArmor=90,l.allResist=25,l.cha=24,l.str=45,l.phyMit=20,l.magMit=12,l.haste=-120,Nv(e,15,15,15,15),l.req=44,l.rarity=4)),"Studded Leather"===s&&(l.name="Bronze-Plated Pelt",l.enhancedArmor=75,l.defense=6,l.phyMit=12,l.magMit=12,l.hp=40,l.stun=13,l.req=48),"Chain Mail"===s&&(dS.random()>.5?(l.name="Raven Mail",l.enhancedArmor=65,l.haste=-40,l.dex=20,l.cold=8,l.stun=12,l.physicalDamage=13,l.req=36):(l.name="Bloodletter's Spleen",l.enhancedArmor=90,l.resistPoison=45,l.resistFire=38,l.fear=26,l.lightRadius=12,l.globalHaste=-80,l.enhancePhysical=5,l.critChance=4,l.hpKill=25,l.req=42,l.rarity=4)),"Ring Mail"===s&&(l.name="Soul Forge",l.enhancedArmor=65,l.hp=50,l.sta=23,l.oneHandSlash=5,l.lightRadius=5,l.fireDamage=24,l.resistFire=12,l.req=40),"Scale Mail"===s&&(l.name="Fanged Bulwark",l.enhancedArmor=75,l.str=10,l.defense=12,l.resistFire=15,l.thorns=30,l.req=44),"Kusari Mail"===s&&(l.name="Jin Tao's Wisdom",l.enhancedArmor=75,l.intel=11,l.magMit=10,l.stun=8,l.cold=8,l.castingHaste=-60,l.mpKill=7,l.allSkills=1,l.req=48),"Breast Plate"===s&&(l.name="Driela's Shell",l.enhancedArmor=65,l.hp=50,l.str=15,l.defense=4,l.resistPoison=20,l.resistLightning=20,l.resistFire=20,l.resistCold=50,l.cold=20,l.flavorText="A rare inter-dimensional treasure originally worn by the King of Maggots.",l.req=36),"Cuirass"===s&&(dS.random()>.5?(l.name="Bluntgarde",l.enhancedArmor=65,l.hp=60,l.phyMit=12,l.magMit=12,l.defense=5,l.req=40):(l.name="Guardian's Fortress",l.enhancedArmor=90,l.allSkills=3,l.hp=60,l.stun=15,l.fear=35,l.str=15,l.sta=25,l.enhancePhysical=5,l.lightRadius=12,l.req=40,l.rarity=4)),"Gothic Plate"===s&&(dS.random()>.5?(l.name="Morgann's Wrath",l.enhancedArmor=75,l.goldFind=15,l.hpKill=15,l.mpKill=8,l.allSkills=2,l.magMit=10,l.req=44):(l.name="Venova's Silks",l.enhancedArmor=90,l.enhanceMagic=8,l.enhancePhysical=3,Rv(e,5),l.silence=35,l.allResist=25,l.hp=75,l.mp=42,l.req=44,l.rarity=4)),"Archon Plate"===s&&(l.name="Raiment of Venova",l.enhancedArmor=75,l.magMit=12,l.abjuration=5,l.lightRadius=15,l.silence=15,l.cold=15,l.fear=15,l.stun=15,l.allSkills=1,l.weight=1,l.flavorText='"Doubt of divine providence must never infest your thoughts. An army full of doubt carries no angels on its shoulders." -Brek Stolrus, Cleric Guildmaster',l.req=48)),"bracers"===m&&("Jade Bracers"===s&&(l.name="Accursed Jade Bracer",l.enhancedArmor=65,l.conjuration=4,l.wis=12,l.sta=12,l.resistPoison=25,l.poisonDamage=6,l.expFind=5,l.req=36),"Bone Bracers"===s&&(l.name="Dragon Bone Bracelet",l.enhancedArmor=65,l.mp=25,l.str=15,l.agi=15,l.allSkills=2,l.hp=25,l.resistFire=15,l.resistCold=15,l.req=40),"Sapphire Bracers"===s&&(l.name="Summoner's Cinder",l.enhancedArmor=90,l.stun=20,l.enhanceFire=5,l.intel=20,l.critChance=5,l.critDamage=12,l.absorbFire=5,l.mp=15,l.req=45,l.rarity=4),"Opulent Bracers"===s&&(l.name="Ormir's Gift",l.enhancedArmor=75,l.expFind=8,l.hpKill=8,l.channeling=5,l.twoHandBlunt=12,l.lightningDamage=35,l.str=20,l.req=48),"Leather Bracers"===s&&(l.name="Staunch Battle Wraps",l.enhancedArmor=65,l.attack=5,l.oneHandBlunt=9,l.physicalDamage=6,l.resistMagic=20,l.parry=5,l.req=36),"Patent Bracers"===s&&(l.name="Soothing Smoked Bracer",l.enhancedArmor=65,l.channeling=10,l.mp=24,l.hpKill=8,l.alteration=7,l.fear=12,l.stun=12,l.req=40),"Bonded Bracers"===s&&(dS.random()>.5?(l.name="Burnt Treant Bracer",l.enhancedArmor=75,l.hp=20,l.wis=15,l.hpRegen=2,l.alteration=8,l.evocation=8,l.req=44):(l.name="Friar's Candor",l.enhancedArmor=90,l.globalHaste=-70,l.haste=-50,l.allSkills=1,l.critChance=3,l.critDamage=5,l.allStats=5,l.req=42,l.rarity=4)),"Elven Bracers"===s&&(l.name="Conqueror's Bracer",l.enhancedArmor=75,l.allStats=6,l.allSkills=2,l.critChance=4,l.globalHaste=-30,l.critDamage=8,l.req=48),"Scaled Bracers"===s&&(l.name="Bartender's Bracer",l.enhancedArmor=65,l.hp=15,l.str=12,l.handtohand=8,l.oneHandBlunt=8,l.weight=1,l.cold=8,l.allResist=5,l.req=36),"Laminar Bracers"===s&&(l.name="Daimyo's Honne",l.enhancedArmor=90,l.allResist=11,l.wis=20,l.absorbLightning=5,l.enhanceMagic=3,l.fear=12,l.stun=8,l.lightRadius=8,l.thorns=15,l.req=42,l.rarity=4),"Splinted Bracers"===s&&(l.name="Bloodletter's Serum",l.enhancedArmor=90,l.leech=4,l.resistCold=20,l.critDamage=7,l.magMit=5,l.agi=12,l.str=15,l.sta=20,l.req=42,l.rarity=4),"Kusari Bracers"===s&&(l.name="Marshall's Survival Bracer",l.enhancedArmor=75,l.runSpeed=8,l.hpKill=8,l.hpRegen=4,l.allResist=14,l.req=48),"Bronze Bracers"===s&&(dS.random()>.5?(l.name="Surestout's Bracer",l.enhancedArmor=65,l.hp=25,l.defense=4,l.parry=3,l.dodge=3,l.riposte=2,l.sta=15,l.req=36):(l.name="Baron's Coda",l.enhancedArmor=90,l.mp=45,l.cha=32,l.intel=15,l.allResist=12,l.allStats=12,l.stun=11,l.fear=25,l.req=42,l.rarity=4)),"Cobalt Bracers"===s&&(dS.random()>.5?(l.name="Feblizi's Bracer",l.enhancedArmor=65,l.cha=13,l.allResist=6,l.cold=6,l.stun=6,l.oneHandBlunt=6,l.req=40):(l.name="Guardian's Parapet",l.enhancedArmor=90,l.cold=45,l.allStats=9,l.critChance=7,l.critDamage=9,l.allResist=14,l.hp=35,l.req=38,l.rarity=4)),"Tetrarch Bracers"===s&&(l.name="Pindle's Valium Bracer",l.enhancedArmor=75,l.channeling=5,l.sta=14,l.thorns=15,l.weight=1,l.wis=14,l.magicDamage=7,l.req=44),"Gilded Bracers"===s&&(l.name="Desolate Binding",l.enhancedArmor=75,l.mpKill=5,l.agi=12,l.critChance=3,l.piercing=6,l.allResist=5,l.req=48)),"gloves"===m&&("Gloves"===s&&(l.name="Celestial Gloves",l.enhancedArmor=65,l.allStats=7,l.conjuration=4,l.allResist=7,l.agi=7,l.dex=7,l.intel=7,l.req=36),"Cloth Gloves"===s&&(dS.random()>.5?(l.name="Gloves of Wyrm Calling",l.enhancedArmor=65,l.fear=15,l.evocation=5,l.abjuration=3,l.resistCold=25,l.resistFire=25,l.req=40):(l.name="Malefactor's Ballast",l.enhancedArmor=90,l.castingHaste=-110,l.resistLightning=45,l.hp=25,l.mp=33,l.agi=19,l.intel=20,l.critChance=7,l.enhanceAll=3,l.req=43,l.rarity=4)),"Woven Gloves"===s&&(dS.random()>.5?(l.name="Hellish Gloves of Sadism",l.enhancedArmor=75,l.goldFind=15,l.intel=10,l.sta=12,l.enhanceFire=2,l.critChance=3,l.castingHaste=-50,l.resistFire=35,l.req=44):(l.name="Wraith's Flesh",l.enhancedArmor=90,l.castingHaste=-130,l.resistCold=50,l.resistFire=25,l.hpKill=12,l.mp=50,l.mpRegen=4,l.enhancePoison=5,l.enhanceMagic=3,l.req=42,l.rarity=4)),"Mesh Gloves"===s&&(l.name="Satyr's Satin",l.enhancedArmor=90,l.castingHaste=-100,l.enhanceMagic=4,l.hpRegen=3,l.mpRegen=5,l.critChance=5,l.sta=17,l.silence=25,l.req=42,l.rarity=4),"Rawhide Gloves"===s&&(dS.random()>.5?(l.name="Venom Grip",l.enhancedArmor=65,l.sta=12,l.handtohand=4,l.resistPoison=30,l.leech=4,l.poisonDamage=8,l.req=36):(l.name="Friar's Epiphany",l.enhancedArmor=90,l.haste=-130,l.globalHaste=-50,l.leech=10,l.resistMagic=50,l.resistFire=25,l.critDamage=15,l.critChance=6,l.riposte=4,l.req=46,l.rarity=4)),"Drakescale Gloves"===s&&(l.name="Gravepalm",l.enhancedArmor=65,l.hp=25,l.thorns=8,l.intel=12,l.str=19,l.fear=12,l.silence=8,l.stun=5,l.req=40),"Sharkskin Gloves"===s&&(l.name="Negated Grasp",l.enhancedArmor=75,l.mp=16,l.phyMit=2,l.magMit=3,l.dodge=5,l.defense=5,l.resistPoison=15,l.resistLightning=15,l.req=44),"Studded Gloves"===s&&(l.name="Ancestral Clutch",l.enhancedArmor=75,l.hp=30,l.hpRegen=2,l.globalHaste=-50,l.allStats=6,l.allSkills=1,l.fear=8,l.cold=5,l.req=48),"Lamellar Gauntlets"===s&&(l.name="Ghoulhide",l.enhancedArmor=65,l.coldDamage=15,l.resistCold=27,l.str=5,l.hp=20,l.wraith=4,l.goldFind=10,l.req=36),"Banded Gauntlets"===s&&(l.name="Flame Reckoning",l.enhancedArmor=65,l.absorbFire=7,l.castingHaste=-80,l.weight=1,l.enhanceFire=6,l.evocation=2,l.mpKill=4,l.fireDamage=15,l.thorns=15,l.silence=25,l.cold=75,l.flavorText='"Few mortals have hitherto dared to glimpse upon the countenance of Highlord Szarthax. Fewer still have lived to confirm his existence." -Brenthalion Aleslammer, Paladin Guildmaster',l.req=40),"Kusari Gauntlets"===s&&(l.name="Pyroclastic Grips",l.enhancedArmor=75,l.haste=-40,l.fireDamage=15,l.resistFire=32,l.attack=6,l.cold=12,l.req=44),"Brigandine Gauntlets"===s&&(l.name="Chameleon's Deception",l.enhancedArmor=75,l.cha=24,l.mp=30,l.weight=1,l.agi=15,l.alteration=5,l.allResist=12,l.req=48),"Cobalt Gauntlets"===s&&(l.name="Chaos Knight Gauntlets",l.enhancedArmor=65,l.hp=20,l.mp=20,l.intel=12,l.oneHandBlunt=4,l.abjuration=4,l.enhanceMagic=2,l.req=36),"Ornate Gauntlets"===s&&(dS.random()>.5?(l.name="Force Chain Gauntlets",l.enhancedArmor=65,l.hpKill=5,l.leech=4,l.wraith=3,l.doubleAttack=4,l.magMit=3,l.magicDamage=6,l.req=40):(l.name="Duke's Amity",l.enhancedArmor=90,l.castingHaste=-160,l.leech=5,l.wraith=12,l.enhanceMagic=3,l.allResist=11,l.agi=17,l.req=46,l.rarity=4)),"Tetrarch Gauntlets"===s&&(l.name="Qalon's Eruption",l.enhancedArmor=75,l.allSkills=1,l.sta=7,l.expFind=8,l.lightRadius=15,l.fireDamage=20,l.absorbFire=7,l.flavorText="A gaping maw of death bursts forth, scorching all in its wake.",l.req=44),"Gilded Gauntlets"===s&&(dS.random()>.5?(l.name="Gravedigger's Punishment",l.enhancedArmor=75,l.hp=20,l.str=28,l.twoHandBlunt=7,l.riposte=8,l.mpKill=3,l.hpKill=15,l.flavorText="The loathesome scent of death eminates like rotting flesh.",l.req=48):(l.name="Baron's Sonata",l.enhancedArmor=90,l.castingHaste=-80,l.leech=5,l.attack=20,l.mpRegen=3,l.resistPoison=22,l.resistFire=15,l.enhanceMagic=3,l.req=42,l.rarity=4))),"belt"===m&&("Sash"===s&&(dS.random()>.5?(l.name="Clasp of Ears",l.enhancedArmor=65,l.defense=3,l.leech=5,l.magMit=4,l.phyMit=6,l.flavorText="A collection of battle trophies adorned upon your waist serve as a grisly warning to your foes.",l.req=36):(l.name="Loam Addled Sash",l.enhancedArmor=65,l.str=8,l.mana=15,l.resistFire=10,l.resistMagic=10,l.abjuration=3,l.conjuration=2,l.req=36)),"Azure Sash"===s&&(dS.random()>.5?(l.name="Malefactor's Fuse",l.enhancedArmor=90,l.castingHaste=-130,l.resistFire=33,l.resistCold=20,l.intel=15,l.wis=15,l.absorbLightning=5,l.critDamage=8,l.allSkills=1,l.req=42,l.rarity=4):(l.name="Wraith's Lust",l.enhancedArmor=90,l.castingHaste=-100,l.intel=15,l.sta=12,l.resistFire=20,l.resistMagic=20,l.evocation=3,l.alteration=3,l.req=42,l.rarity=4)),"Leather Belt"===s&&(dS.random()>.5?(l.name="Terrorwhip",l.enhancedArmor=65,l.defense=3,l.physicalDamage=5,l.dex=20,l.thorns=15,l.req=36):(l.name="Honeycomb Belt",l.enhancedArmor=65,l.cha=5,l.mana=50,l.haste=-90,l.wis=15,l.expFind=12,l.offense=3,l.req=36)),"Heavy Belt"===s&&(dS.random()>.5?(l.name="Fairy's Trap",l.enhancedArmor=75,l.mpRegen=3,l.mp=25,l.sta=15,l.wraith=3,l.lightRadius=12,l.weight=1,l.req=42):(l.name="Friar's Gift",l.enhancedArmor=110,l.resistLightning=15,l.resistMagic=30,l.globalHaste=-150,l.dex=19,l.critChance=5,l.offense=4,l.req=45,l.rarity=4)),"Mesh Belt"===s&&(dS.random()>.5?(l.name="Runed Frontier Belt",l.enhancedArmor=65,l.str=10,l.dex=10,l.sta=10,l.haste=-150,l.weight=1,l.req=36):dS.random()>.5?(l.name="Girdle of Wurmslaying",l.enhancedArmor=65,l.str=10,l.wis=10,l.intel=10,l.allSkills=2,l.weight=1,l.allStats=5,l.req=36):(l.name="Bloodletter's Marrow",l.enhancedArmor=90,l.hp=63,l.fear=24,l.allResist=12,l.critDamage=15,l.globalHaste=-50,l.agi=24,l.resistMagic=21,l.resistLightning=25,l.req=45,l.rarity=4)),"Splinted Belt"===s&&(dS.random()>.5?(l.name="Glacial Dust",l.enhancedArmor=75,l.absorbCold=5,l.resistCold=20,l.coldDamage=15,l.enhanceCold=5,l.weight=1,l.req=42):(l.name="Pegasus Belt",l.enhancedArmor=75,l.runSpeed=10,l.agi=12,l.intel=12,l.str=12,l.critChance=3,l.haste=-150,l.req=42)),"Monarch Girdle"===s&&(dS.random()>.5?(l.name="Bone-Clasped Girdle",l.enhancedArmor=65,l.hp=75,l.mp=75,l.str=7,l.dex=7,l.sta=7,l.weight=1,l.req=36):(l.name="Belt of Concordance",l.enhancedArmor=65,l.str=10,l.cha=10,l.resistPoison=15,l.haste=-50,l.castingHaste=-50,l.allSkills=1,l.req=36)),"Mithril Girdle"===s&&(dS.random()>.5?(l.name="Guardian's Moat",l.enhancedArmor=90,l.resistPoison=25,l.haste=-80,l.globalHaste=-120,l.hp=25,l.thorns=12,l.leech=5,l.fear=15,l.req=45,l.rarity=4):(l.name="Bile Etched Obsidian Choker",l.enhancedArmor=75,l.sta=10,l.str=10,l.dex=10,l.hp=50,l.mp=50,l.allResist=5,l.req=42))),"legs"===m&&("Pants"===s&&(l.name="Imbued Viperskin",l.enhancedArmor=65,l.hp=30,l.agi=12,l.expFind=7,l.evocation=3,l.resistFire=15,l.resistPoison=25,l.req=38),"Cotton Pants"===s&&(l.name="Villainous Lordship Pants",l.enhancedArmor=65,l.mp=35,l.resistMagic=15,l.mpKill=6,l.critChance=4,l.goldFind=20,l.silence=20,l.req=42),"Linen Pants"===s&&(l.name="Mystical Vizier's Pants",l.enhancedArmor=75,l.critDamage=15,l.runSpeed=8,l.conjuration=3,l.evocation=5,l.channeling=7,l.req=46),"Silk Leggings"===s&&(l.name="Fantoam Pantaloons",l.enhancedArmor=75,l.hp=50,l.intel=11,l.allSkills=2,l.allResist=10,l.req=50),"Fur Pants"===s&&(dS.random()>.5?(l.name="Exalted Furs",l.enhancedArmor=65,l.allStats=8,l.phyMit=9,l.mpRegen=3,l.resistMagic=15,l.resistCold=15,l.req=38):(l.name="Willow's Gust",l.enhancedArmor=90,l.mpRegen=8,l.hpRegen=12,l.phyMit=20,l.hp=50,l.enhanceCold=9,l.enhanceLightning=12,l.castingHaste=-50,l.silence=35,l.req=45,l.rarity=4)),"Wolf-Hide Pants "===s&&(l.name="Abyssimal Pants",l.enhancedArmor=65,l.expFind=8,l.sta=13,l.wis=17,l.dodge=7,l.enhanceMagic=3,l.thorns=8,l.req=42),"Sharkskin Legs"===s&&(l.name="Ethereal Kraken Leggings",l.enhancedArmor=75,l.parry=5,l.defense=7,l.globalHaste=-80,l.dodge=5,l.cold=8,l.stun=10,l.req=46),"Studded Legs"===s&&(l.name="Friar's Penance",l.enhancedArmor=90,l.allResist=10,l.magMit=6,l.phyMit=10,l.hp=35,l.enhancePhysical=3,l.lightRadius=8,l.str=20,l.sta=16,l.agi=13,l.req=42,l.rarity=4),"Scaled Legs"===s&&(l.name="Accursed Serenity Leggings",l.enhancedArmor=65,l.agi=14,l.dex=25,l.goldFind=12,l.globalHaste=-60,l.magicDamage=8,l.silence=13,l.req=38),"Chausses"===s&&(l.name="Vorpal Leggings",l.enhancedArmor=65,l.hp=33,l.mp=22,l.wis=25,l.mpRegen=5,l.enhancePoison=4,l.req=42),"Kusazuri"===s&&(l.name="Honored Samurai Legplates",l.enhancedArmor=75,l.leech=5,l.dualWield=5,l.doubleAttack=8,l.riposte=8,l.dex=30,l.flavorText="The serpent-scaled order fears the samurai.",l.req=46),"Poleyn"===s&&(l.name="Haunted Wail",l.enhancedArmor=65,l.runSpeed=5,l.conjuration=9,l.allStats=8,l.fear=8,l.absorbMagic=3,l.req=50),"Cobalt Legplates"===s&&(dS.random()>.5?(l.name="Eternal Annihilator Legplates",l.enhancedArmor=65,l.hp=35,l.str=17,l.hpKill=20,l.globalHaste=-60,l.allResist=10,l.req=38):(l.name="Baron's Tenor",l.enhancedArmor=90,l.allResist=20,l.sta=25,l.absorbMagic=4,l.enhanceMagic=5,l.mpRegen=4,l.lightRadius=13,l.dualWield=11,l.intel=25,l.req=38,l.rarity=4)),"Iron Legplates"===s&&(dS.random()>.5?(l.name="Sinister Legplates",l.enhancedArmor=75,l.offense=6,l.attack=10,l.sta=11,l.allSkills=2,l.resistMagic=15,l.req=42):(l.name="Duke's Rule",l.enhancedArmor=90,l.resistCold=30,l.resistLightning=11,l.absorbFire=5,l.allStats=13,l.lightRadius=20,l.expFind=12,l.enhanceAll=3,l.req=42,l.rarity=4)),"Mithril Legplates"===s&&(dS.random()>.5?(l.name="Forlorn Lover's Legplates",l.enhancedArmor=75,l.castingHaste=-50,l.cha=15,l.enhanceMagic=2,l.channeling=4,l.mpKill=15,l.resistMagic=26,l.req=46):(l.name="Augur's Rancor",l.enhancedArmor=90,l.hp=95,l.resistFire=30,l.resistMagic=24,l.globalHaste=-50,l.defense=6,l.critDamage=5,l.enhanceMagic=5,l.allSkills=2,l.req=46,l.rarity=4)),"Royal Legplates"===s&&(l.name="Doomhaunch",l.enhancedArmor=65,l.hp=50,l.globalHaste=-80,l.critChance=5,l.critDamage=15,l.fireDamage=20,l.req=50)),"boots"===m&&("Boots"===s&&(dS.random()>.5?(l.name="Strideblazers",l.enhancedArmor=65,l.runSpeed=20,l.fireDamage=8,l.defense=3,l.goldFind=15,l.lightRadius=5,l.resistFire=30,l.req=36):(l.name="Apothic Boots",l.enhancedArmor=65,l.runSpeed=15,l.hp=25,l.agi=13,l.enhanceMagic=4,l.mpKill=3,l.critChance=2,l.resistPoison=25,l.req=36)),"Light Boots"===s&&(dS.random()>.5?(l.name="Sadist's Frostwalkers",l.enhancedArmor=75,l.thorns=7,l.critDamage=8,l.attack=6,l.runSpeed=25,l.resistCold=24,l.absorbCold=2,l.req=42):(l.name="Malefactor's Resistor",l.enhancedArmor=90,l.resistLightning=40,l.runSpeed=40,l.enhanceLightning=7,l.expFind=7,l.allResist=10,l.intel=33,l.req=43,l.rarity=4)),"Heavy Boots"===s&&(dS.random()>.5?(l.name="Miracle Workers",l.enhancedArmor=65,l.hp=55,l.dodge=5,l.dex=15,l.sta=10,l.runSpeed=20,l.channeling=4,l.req=36):(l.name="White Lotus Slippers",l.enhancedArmor=65,l.parry=4,l.riposte=6,l.offense=4,l.fireDamage=12,l.runSpeed=12,l.str=20,l.hp=30,l.allResist=3,l.req=36)),"Sharkskin Boots"===s&&(dS.random()>.5?dS.random()>.5?(l.name="Trek of Glory",l.enhancedArmor=75,l.goldFind=15,l.expFind=15,l.mpKill=8,l.hpKill=12,l.cold=10,l.runSpeed=30,l.req=42):(l.name="Friar's Grace",l.enhancedArmor=150,l.resistAll=12,l.enhancePhysical=7,l.critChance=7,l.globalHaste=-70,l.critDamage=12,l.fear=30,l.stun=30,l.req=42,l.rarity=4):dS.random()>.5?(l.name="Peerless Dragonhorn Boots",l.enhancedArmor=75,l.magMit=3,Rv(e,3),l.defense=5,l.resistMagic=12,l.agi=10,l.critChance=5,l.req=42):(l.name="Willow's Mildew",l.enhancedArmor=90,l.runSpeed=33,l.sta=23,l.wis=19,l.enhanceCold=5,l.evocation=3,l.alteration=3,l.dex=15,l.req=43,l.rarity=4)),"Chain Boots"===s&&(dS.random()>.5?(l.name="Silkweaver's Treads",l.enhancedArmor=65,l.hp=17,l.defense=4,l.mpKill=5,l.allStats=7,l.resistPoison=30,l.runSpeed=30,l.req=36):(l.name="Mendicant's Horseshoe",l.enhancedArmor=90,l.runSpeed=25,l.fear=25,l.stun=20,l.sta=13,l.dex=20,l.abjuration=5,l.evocation=3,l.channeling=8,l.conjuration=4,l.req=42,l.rarity=4)),"Sovereign Boots"===s&&(dS.random()>.5?(l.name="Battle Traveler",l.enhancedArmor=75,l.runSpeed=25,l.physicalDamage=15,l.sta=15,l.str=15,l.hpKill=15,l.thorns=7,l.goldFind=24,l.req=42):(l.name="Blazing Boots of Erasthule",l.enhancedArmor=75,l.runSpeed=13,l.absorbFire=5,l.piercing=6,l.dex=16,l.cha=10,l.agi=20,l.resistFire=20,l.castingHaste=-40,l.phyMit=2,l.req=42)),"Steel Boots"===s&&(dS.random()>.66?(l.name="Blood Rider",l.enhancedArmor=65,l.poisonDamage=6,l.critDamage=15,l.hp=25,l.weight=1,l.dex=40,l.req=36):dS.random()>.5?(l.name="Augur's Sludge",l.enhancedArmor=90,l.runSpeed=25,l.resistLightning=25,l.resistPoison=40,l.resistMagic=12,l.hp=35,l.mp=15,l.fear=35,l.enhanceAll=2,l.conjuration=8,l.req=42,l.rarity=4):(l.name="Baron's Rhythm",l.enhancedArmor=90,l.runSpeed=30,l.cold=15,l.expFind=10,l.stun=20,l.cha=24,l.dex=19,l.resistCold=25,l.resistPoison=25,l.hp=15,l.req=42,l.rarity=4)),"Sabatons"===s&&(dS.random()>.5?(l.name="Blessed Traveler",l.enhancedArmor=75,l.allStats=8,l.cold=15,l.allResist=13,l.runSpeed=40,l.alteration=5,l.req=42):(l.name="Boots of the Storm",l.enhancedArmor=75,l.str=10,l.hp=35,l.sta=10,l.resistCold=25,l.resistMagic=25,l.runSpeed=33,l.conjuration=4,l.evocation=2,l.req=42))),"weapons"===m&&("slashed"===d&&("Sword"===s&&(l.name="Clastocaust's Flame",l.enhancedDamage=6,l.hp=50,l.sta=10,l.fireDamage=30,l.resistFire=20,l.req=36,l.proc="Effect: Flame of the Thalens"),"Scimitar"===s&&(l.name="Scimitar of the Grovecaller",l.enhancedDamage=5,l.ias=.16666,l.hp=25,l.allSkills=2,l.thorns=12,l.wraith=5,l.lightningDamage=25,l.req=38,l.flavorText="Your lupine familiar can always be counted upon to tank a God for you.",l.proc="Effect: Grovecaller"),"Axe"===s&&(l.name="Fluxbladed Axe",l.enhancedDamage=9,l.str=12,l.sta=10,l.oneHandSlash=4,l.fear=9,l.magicDamage=30,l.req=40,l.flavorText="This artifact appears to be a rusty old axe adorned in twirling strands of ether.",l.proc="Effect: Chaos Flux"),"Claws"===s&&(l.name="Spined Dragon Claws",l.ias=.34,l.enhancedDamage=1,l.oneHandSlash=4,l.leech=6,l.critDamage=8,l.resistPoison=25,l.poisonDamage=15,l.flavorText="Falzitherin's oozing salivations appear to be encrusted upon the blades.",l.req=42),"Long Sword"===s&&(l.name="Hydraclash",l.enhancedDamage=8,l.fireDamage=21,l.allSkills=1,l.absorbFire=2,l.resistFire=30,l.enhanceFire=3,l.req=44,l.proc="Effect: Hydra Bolt"),"Chokuto"===s&&(dS.random()>.5?(l.name="Bloodmoon",l.enhancedDamage=9,l.globalHaste=-60,l.hpKill=12,l.mpKill=5,l.leech=5,l.conjuration=12,l.str=15,l.req=46):(l.name="Daimyo's Giri",l.damage=20,l.delay=2600,l.globalHaste=-300,l.fireDamage=75,l.enhanceFire=12,l.enhancePhysical=7,l.resistFire=60,l.leech=9,l.critChance=13,l.proc="Effect: Combustion",l.req=46,l.rarity=4)),"War Axe"===s&&(l.name="Axe of Resistance",l.enhancedDamage=10,l.allResist=20,l.allSkills=2,l.allStats=6,l.req=48),"Kusanagi"===s&&(l.name="Fernzephyr",l.ias=.25,l.enhancedDamage=4,l.critChance=7,l.critDamage=7,l.allStats=5,l.leech=6,l.thorns=21,l.lightningDamage=24,l.req=50)),"crushed"===d&&("Mace"===s&&(l.name="Spiroc Warhammer",l.enhancedDamage=8,l.mp=16,l.wis=15,l.hp=50,l.abjuration=4,l.mp=50,l.resistLightning=15,l.mpRegen=4,l.req=36),"Club"===s&&(dS.random()>.5?(l.name="Fleshrender",l.enhancedDamage=8,l.globalHaste=-50,l.str=12,l.allSkills=1,l.critDamage=15,l.critChance=4,l.physicalDamage=11,l.req=38):(l.name="Willow's Calamity",l.damage=21,l.delay=2800,l.allResist=18,l.allSkills=3,l.hp=65,l.castingHaste=-130,l.enhanceFire=13,l.enhanceMagic=6,l.stun=26,l.wis=35,l.req=38,l.rarity=4)),"Morning Star"===s&&(l.name="Rathmonan's Vortex",l.ias=.45,l.mp=100,l.abjuration=4,l.alteration=8,l.castingHaste=-80,l.lightningDamage=32,l.req=40,l.proc="Effect: Shock Nova"),"Spiked Club"===s&&(l.name="Moonfall",l.enhancedDamage=9,l.mpKill=4,l.physicalDamage=8,l.fireDamage=27,l.magMit=8,l.lightRadius=12,l.req=42,l.proc="Effect: Meteor Strike"),"Jagged Star"===s&&(l.name="Sureshrill Frost",l.enhancedDamage=10,l.allStats=7,l.absorbCold=3,l.physicalDamage=10,l.coldDamage=21,l.cold=15,l.req=44),"Scepter"===s&&(l.name="Truesight Hammer",l.enhancedDamage=11,l.wis=25,l.hpKill=8,l.mpKill=8,l.enhanceMagic=2,l.channeling=6,l.evocation=6,l.req=46,l.proc="Effect: Banish Summoned"),"Cudgel"===s&&(l.name="Earthshaker",l.enhancedDamage=13,l.critDamage=15,l.stun=12,l.mpRegen=3,l.castingHaste=-50,l.enhanceFire=2,l.enhancePhysical=4,l.evocation=8,l.req=48,l.proc="Effect: Tremor"),"Caduceus"===s&&(l.name="Venova's Dawn",l.enhancedDamage=10,l.hp=30,l.silence=15,l.enhanceAll=3,l.allSkills=2,l.wis=15,l.resistMagic=15,l.resistPoison=40,l.req=50,l.flavorText='"The harbinger of light carries his torch at the darkest hour." -Alimaja Shanthun, Cleric Guildmaster',l.proc="Effect: Banish Undead")),"pierced"===d&&("Dagger"===s&&(dS.random()>.5?(l.name="Spineripper",l.enhancedDamage=4,l.mp=25,l.castingHaste=-50,l.allSkills=1,l.expFind=8,l.wraith=8,l.dex=16,l.req=36):(l.name="Malefactor's Coil",l.damage=15,l.delay=1900,l.castingHaste=-150,l.enhanceCold=12,l.allResist=12,l.evocation=5,l.critChance=5,l.silence=50,l.conjuration=5,l.alteration=9,l.lightRadius=7,Rv(e,4),l.req=36,l.rarity=4)),"Dirk"===s&&(dS.random()>.5?(l.name="Stormspike",l.enhancedDamage=6,l.castingHaste=-70,l.silence=15,l.mpRegen=3,l.enhanceLightning=3,l.thorns=15,l.resistLightning=35,l.req=38):(l.name="Baron's Glissando",l.damage=18,l.delay=2400,l.haste=-220,l.cha=35,Rv(e,4),Nv(e,8,8,8,8),l.dex=24,l.sta=24,l.lightRadius=10,l.proc="Effect: Crash Cymbal",l.req=38,l.rarity=4)),"Kris"===s&&(l.name="Blade of the Fahlnir",l.enhancedDamage=7,l.dex=16,l.sta=12,l.parry=4,l.leech=5,l.dodge=5,l.riposte=3,l.runSpeed=10,l.req=40),"Poignard"===s&&(dS.random()>.5?(l.name="Fleshripper",l.enhancedDamage=4,l.leech=5,l.attack=7,l.critDamage=8,l.critChance=5,l.enhancePhysical=4,l.req=42):(l.name="Bloodletter's Lancet",l.damage=22,l.delay=2900,l.allStats=16,l.allSkills=2,l.globalHaste=-160,l.allResist=11,l.expFind=9,l.hpKill=12,l.fear=15,l.absorbPoison=4,l.proc="Effect: Incision",l.req=42,l.rarity=4)),"Rondel"===s&&(l.name="Dawnrider",l.ias=.15,l.enhancedDamage=6,l.cha=15,l.wraith=6,l.doubleAttack=6,l.resistMagic=25,l.magicDamage=15,l.allSkills=2,l.req=44),"Spear"===s&&(l.name="Thicket Slime Harpoon",l.enhancedDamage=6,l.mp=30,l.wis=15,l.critChance=5,l.conjuration=6,l.abjuration=5,l.castingHaste=-60,l.resistPoison=15,l.req=46),"Cinquedeas"===s&&(dS.random()>.5?(l.name="Vexthorne",l.ias=.27,l.enhancedDamage=4,l.offense=5,l.allSkills=2,l.critChance=6,l.physicalDamage=24,l.enhancePhysical=5,l.fear=8,l.req=48):(l.name="Satyr's Artifice",l.damage=15,l.delay=2e3,l.haste=-150,l.castingHaste=-100,l.enhanceAll=3,l.allResist=28,l.allSkills=2,l.lightRadius=15,l.proc="Effect: Elysian Litany",l.req=49,l.rarity=4)),"Stiletto"===s&&(l.name="Gold-Plated Stiletto",l.enhancedDamage=7,l.allStats=10,l.leech=6,l.wraith=6,l.goldFind=15,l.piercing=8,l.resistFire=25,l.req=50,l.proc="Effect: Dismiss Summoned")),"cleaved"===d&&("Giant Sword"===s&&(l.name="Steel Overcast",l.enhancedDamage=5,l.abjuration=8,l.evocation=6,l.defense=8,l.thorns=32,l.lightRadius=12,l.lightningDamage=44,l.req=36),"Giant Axe"===s&&(l.name="Crokyn Broad Axe",l.enhancedDamage=9,l.str=11,l.wis=25,l.intel=25,l.allResist=9,l.allSkills=2,l.magicDamage=50,l.proc="Effect: Crokyn",l.req=38),"Champion Sword"===s&&(dS.random()>.5?(l.name="Swordguard",l.enhancedDamage=10,l.leech=10,l.defense=8,l.parry=5,l.twoHandSlash=5,l.mpRegen=4,l.allResist=18,l.req=40):(l.name="Augur's Harvester",l.damage=50,l.delay=4400,l.globalHaste=-350,l.allResist=25,Fv(e,5,5,5,5,5),l.hp=80,l.mp=55,l.conjuration=15,l.poisonDamage=135,l.critChance=10,l.hpKill=15,l.str=25,l.sta=15,l.proc="Effect: Burning Rupture",l.req=40,l.rarity=4)),"Bastard Sword"===s&&(l.name="Dark Sword of Tolloth",l.enhancedDamage=11,l.hp=50,l.intel=30,l.globalHaste=-60,l.dex=25,l.twoHandSlash=6,l.resistCold=40,l.leech=15,l.req=42,l.flavorText='"Eat your enemies alive-body, mind, and soul!" -Loveal S\'Nez, Shadow Knight Guildmaster',l.proc="Effect: Soul Leech"),"Gothic Axe"===s&&(l.name="Polyburst Axe",l.enhancedDamage=12,l.allSkills=3,l.allStats=13,l.allResist=14,l.leech=10,l.wraith=10,l.req=44),"Katana"===s&&(l.name="Emperor's Katana of Resolve",l.enhancedDamage=11,l.attack=15,l.lightningDamage=55,l.leech=11,l.critChance=12,l.hpKill=15,l.globalHaste=-80,l.yPos=-448,l.req=46,l.proc="Effect: Rain of Swords"),"Colossus Sword"===s&&(l.name="Monsoon",l.enhancedDamage=13,l.haste=-100,l.str=30,l.sta=25,l.cold=15,l.doubleAttack=7,l.resistLightning=25,l.yPos=-448,l.req=48),"Mythical Sword"===s&&(l.name="Beckon",l.enhancedDamage=14,l.intel=35,l.conjuration=15,l.channeling=8,l.critDamage=20,l.fear=20,l.leech=9,l.enhanceMagic=3,l.poisonDamage=60,l.req=50)),"staff"===d&&("Staff"===s&&(l.name="Ribcracker",l.enhancedDamage=21,l.globalHaste=-120,l.dex=35,l.critChance=12,l.critDamage=11,l.physicalDamage=75,l.flavorText="It's not abuse if it doesn't leave a mark.",l.req=36),"Runic Staff"===s&&(l.name="Chromatic Malice",l.enhancedDamage=5,l.mp=25,l.intel=20,l.enhanceCold=2,l.enhanceLightning=2,l.enhanceFire=2,l.hp=50,l.allSkills=3,l.castingHaste=-100,l.thorns=30,l.allResist=30,l.req=38),"Cedar Staff"===s&&(l.name="Staff of Undead Heretics",l.enhancedDamage=6,l.mp=75,l.allStats=13,l.resistPoison=50,l.resistMagic=30,l.conjuration=12,l.mpKill=8,l.intel=25,l.enhancePoison=7,l.req=40),"Quarterstaff"===s&&(l.name="Sin Collector",l.enhancedDamage=7,l.mp=50,l.mpKill=12,l.allSkills=4,l.silence=12,l.fear=12,l.castingHaste=-80,l.intel=32,l.expFind=25,l.req=42),"Cosmic Staff"===s&&(dS.random()>.5?(l.name="Staff of the Earthcrafter",l.enhancedDamage=8,l.mp=50,l.wis=40,l.hp=60,l.enhanceLightning=6,l.allSkills=3,l.allResist=18,l.req=44):(l.name="Summoner's Conduit",l.damage=42,l.delay=3700,l.hp=63,l.mp=137,l.allSkills=5,l.enhanceLightning=15,l.enhanceCold=9,l.enhanceFire=9,l.conjuration=15,l.mpRegen=10,l.castingHaste=-200,l.fireDamage=199,l.req=44,l.rarity=4)),"Archon Staff"===s&&(l.name="Withered Totem of Gorgek",l.enhancedDamage=9,l.wis=30,l.intel=30,l.dex=20,l.abjuration=8,l.conjuration=8,l.evocation=5,l.mpRegen=3,l.hpRegen=5,l.castingHaste=-80,l.enhanceAll=4,l.req=46)),"smashed"===d&&("Giant Mace"===s&&(l.name="Blight, Hammer of Vedria",l.enhancedDamage=10,l.poisonDamage=36,l.wis=25,l.sta=25,l.intel=25,l.conjuration=5,l.globalHaste=-80,l.absorbPoison=4,l.resistPoison=40,l.req=36,l.proc="Effect: Scourge"),"Auric Maul"===s&&(dS.random()>.5?(l.name="Facesmasher",l.enhancedDamage=14,l.hp=60,l.armor=25,l.sta=15,l.allSkills=3,l.physicalDamage=40,l.req=38):(l.name="Venova's Martel",l.damage=55,l.delay=4800,l.critChance=20,l.enhanceAll=10,l.wis=50,l.sta=33,l.lightRadius=24,l.castingHaste=-250,l.haste=-100,l.leech=6,l.alteration=9,l.proc="Effect: Baptism",l.req=38,l.rarity=4)),"Mallet"===s&&(l.name="Shattermaul",l.enhancedDamage=14,l.leech=6,l.critChance=12,l.critDamage=20,l.twoHandBlunt=5,l.offense=8,l.physicalDamage=40,l.req=40),"Ogre Maul"===s&&(l.name="Bloodtree Stump",l.enhancedDamage=14,l.critChance=13,l.str=25,l.twoHandBlunt=7,l.globalHaste=-90,l.allResist=20,l.magicDamage=45,l.req=42),"Great Maul"===s&&(l.name="The Martel of Pain",l.enhancedDamage=13,l.wraith=9,l.leech=9,l.enhancePhysical=6,l.globalHaste=-120,l.thorns=26,l.physicalDamage=50,l.flavorText="My prediction is pain.",l.req=44),"Sledgehammer"===s&&(l.name="Gardash",l.enhancedDamage=14,l.haste=-60,l.allStats=13,l.leech=15,l.silence=15,l.alteration=10,l.conjuration=10,l.enhancePhysical=3,l.poisonDamage=50,l.req=46),"Umbral Hammer"===s&&(l.name="Barbarian Spiritist's Hammer",l.enhancedDamage=14,l.wis=28,l.intel=28,l.wraith=10,l.alteration=5,l.abjuration=9,l.enhanceCold=5,l.absorbCold=5,l.coldDamage=75,l.req=48,l.proc="Effect: Winter's Roar"),"Thunder Maul"===s&&(l.name="Ashenbone Warhammer",l.enhancedDamage=13,l.critDamage=25,l.doubleAttack=12,l.attack=20,l.goldFind=12,l.leech=12,l.globalHaste=-100,l.fear=20,l.enhancePhysical=6,l.physicalDamage=60,l.req=50))),"shield"===m&&("shield"===d&&("Buckler"===s&&(l.name="Arwen's Blessed Circle",l.enhancedArmor=65,l.defense=6,l.wraith=5,l.globalSkill=-60,l.alteration=4,l.oneHandBlunt=4,l.allResist=18,l.req=36),"Small Shield"===s&&(l.name="Runewood Shield",l.enhancedArmor=65,l.wis=21,l.mpRegen=3,l.alteration=6,l.abjuration=5,l.expFind=12,l.cold=15,l.fear=10,l.resistFire=40,l.req=38),"Kite Shield"===s&&(l.name="Wexxen's Rebuke",l.enhancedArmor=65,l.enhanceAll=2,l.coldDamage=35,l.fireDamage=45,l.lightningDamage=45,l.allResist=30,l.req=40),"Round Shield"===s&&(l.name="Shield of Prachen",l.enhancedArmor=65,l.attack=8,l.evocation=6,l.lightningDamage=25,l.runSpeed=12,l.cold=20,l.resistLightning=50,l.req=42),"Gothic Shield"===s&&(l.name="Destitute Wall",l.enhancedArmor=75,l.silence=10,l.mp=50,l.castingHaste=-80,l.mpKill=8,l.intel=25,l.allSkills=1,l.flavorText="A shield that inspires hopelessness in your foes.",l.req=44),"Crown Shield"===s&&(l.name="Shield of Prism Hues",l.enhancedArmor=75,l.cha=22,l.magMit=11,l.leech=9,l.globalHaste=-60,l.fear=12,l.allResist=35,l.req=46),"Aegis"===s&&(l.name="Ashenbone Shield",l.enhancedArmor=75,l.sta=15,l.hp=60,l.enhancePhysical=2,l.critChance=5,l.wraith=9,l.doubleAttack=6,l.resistPoison=45,l.req=48),"Monarch"===s&&(dS.random()>.5?(l.name="Shield of Conqueror",l.enhancedArmor=75,l.phyMit=6,l.absorbPoison=4,l.mpRegen=4,l.wraith=8,l.leech=10,l.str=30,l.resistMagic=35,l.resistPoison=50,l.flavorText='"With sword and shield in hand, we shall rout you out like a den of vipers." -Captain Tillin, Warrior Guildmaster',l.req=50):(l.name="Guardian's Wall",l.enhancedArmor=90,l.resistCold=45,l.resistMagic=30,l.hp=35,l.allSkills=1,Nv(e,15,15,15,15),Rv(e,4),l.req=42,l.rarity=4))),"offhand"===d&&("Stein"===s&&(dS.random()>.5?(l.name="Silandra's Special Brew",l.hp=25,l.mp=60,l.channeling=6,l.evocation=4,l.conjuration=6,l.goldFind=20,l.castingHaste=-60,l.req=36):(l.name="Satyr's Chalice",l.req=36,l.mp=133,l.hp=70,l.castingHaste=-110,l.enhanceMagic=10,l.mpRegen=10,l.defense=5,l.dodge=5,l.mpKill=19,l.hpRegen=5,l.rarity=4)),"Dark Orb"===s&&(l.name="Orb of Tashonia",l.armor=15,l.str=19,l.sta=19,l.mp=35,l.allSkills=3,l.castingHaste=-80,l.enhanceAll=3,l.req=38),"Ancient Tome"===s&&(l.name="Encyclopedia Necronomicon",l.hp=40,l.mp=55,l.allStats=10,l.enhancePoison=2,l.enhanceMagic=2,l.castingHaste=-60,l.conjuration=10,l.mpRegen=6,l.req=40),"Totem"===s&&(dS.random()>.5?(l.name="Margyn's Deranged Totem",l.mp=77,l.hp=55,l.conjuration=13,l.mpKill=10,l.castingHaste=-100,l.mpRegen=7,l.resistLightning=11,l.resistCold=17,l.resistMagic=33,l.resistPoison=33,l.req=42):(l.name="Mendicant's Effigy",l.mp=124,l.hp=45,l.conjuration=9,l.abjuration=15,l.mpKill=23,l.castingHaste=-200,l.wis=77,l.req=42,l.enhancePoison=9,l.rarity=4)),"Crystal Ball"===s&&(l.name="Vermillion Orb of Torrefaction",l.goldFind=14,l.critChance=7,l.mp=60,l.evocation=9,l.lightRadius=9,l.mpRegen=6,l.absorbFire=5,l.castingHaste=-90,l.silence=12,l.enhanceFire=5,l.req=44),"Skull"===s&&(l.name="Sirran's Memento",l.mp=45,l.critDamage=20,l.hpKill=9,l.mpKill=15,l.abjuration=10,l.castingHaste=-150,l.stun=15,l.resistMagic=35,l.resistCold=20,l.req=46),"Emblazoned Orb"===s&&(dS.random()>.5?(l.name="Eye of Ghalentus",l.mp=75,l.intel=24,l.armor=25,l.allSkills=3,l.castingHaste=-70,l.enhanceMagic=5,l.evocation=7,l.resistLightning=20,l.resistMagic=55,l.flavorText='"Even if you succeed, in time you will realize that my cause was just and you, too, will solemnly ache for your kind\'s own extinction." -Sanctum Guardian Ghalentus',l.req=48):(l.name="Malefactor's Yttrium",l.mp=199,l.hp=99,l.enhanceLightning=9,l.enhanceCold=9,l.enhanceFire=9,Nv(e,9,9,9,9),l.allResist=9,l.mpRegen=9,l.critChance=9,l.critDamage=9,l.allStats=9,l.castingHaste=-90,l.req=48,l.rarity=4)),"Idol"===s&&(l.name="Camin's False Idol",l.mp=50,l.enhanceAll=3,l.mpRegen=5,l.allStats=13,l.allResist=25,l.allSkills=3,l.req=50))),"range"===d&&("Short Bow"===s&&(l.name="Skystriker",l.enhancedDamage=5,l.allSkills=1,l.intel=15,l.attack=5,l.haste=-20,l.evocation=3,l.lightningDamage=10,l.req=36),"Hunter's Bow"===s&&(l.name="Adamant Volley",l.enhancedDamage=6,l.mp=25,l.mpKill=3,l.hpKill=3,l.defense=2,l.resistCold=35,l.coldDamage=12,l.req=38),"Composite Bow"===s&&(l.name="Juton's Venomburst",l.enhancedDamage=7,l.conjuration=3,l.intel=12,l.channeling=2,l.expFind=5,l.absorbPoison=2,l.poisonDamage=14,l.req=40),"Siege Bow"===s&&(l.name="Goldstrike Arch",l.enhancedDamage=9,l.hpRegen=2,l.attack=6,l.dex=15,l.lightRadius=9,l.resistLightning=20,l.magicDamage=15,l.req=42),"Astral Bow"===s&&(l.name="Panicstriker",l.ias=.26,l.riposte=4,l.globalHaste=-30,l.oneHandSlash=3,l.resistMagic=15,l.resistLightning=10,l.fear=12,l.req=44),"Gothic Bow"===s&&(l.name="Final Punishment",l.enhancedDamage=9,l.hp=20,l.dualWield=6,l.attack=5,l.dex=15,l.str=9,l.req=46),"Ward Bow"===s&&(dS.random()>.5?(l.name="Magewrath",l.enhancedDamage=10,l.mpRegen=1,l.alteration=3,l.mpKill=5,l.magMit=5,l.allSkills=1,l.req=48):(l.name="Daimyo's Yugen",l.damage=62,l.delay=5700,l.cold=25,l.silence=15,l.evocation=9,l.dualWield=9,l.leech=5,l.enhancePhysical=4,l.req=48,l.rarity=4)),"Hydra Bow"===s&&(l.name="Zidr's Crackling Thunder Bow",l.enhancedDamage=11,l.allStats=7,l.oneHandSlash=3,l.resistLightning=15,l.absorbLightning=2,l.lightningDamage=20,l.flavorText='"Even I get tired of shooting at the same target every day. Explore the world and conquer new frontiers." Zidr Shur, Ranger Guildmaster',l.req=50)),"trinket"===d){var f=dS.random();"Trinket"===s&&(f>.66?(l.name="Tempered Spirits",l.sta=15,l.wis=12,l.lightRadius=20,l.resistMagic=20,l.silence=13,l.expFind=6,l.req=36):f>.33?(l.name="Augur's Enmity",l.resistFire=25,l.enhancePoison=2,l.enhanceFire=2,l.critDamage=8,l.thorns=15,l.hp=25,l.evocation=3,l.abjuration=2,l.req=47,l.rarity=4):(l.name="Summoner's Ember",l.resistFire=15,l.enhanceFire=7,l.mpRegen=10,l.conjuration=8,l.hp=35,l.req=44,l.rarity=4)),"Memento"===s&&(l.name="Clay of Everliving Golem",l.hp=15,l.mp=15,l.allResist=10,l.hpRegen=3,l.offense=5,l.goldFind=12,l.req=38),"Charm"===s&&(l.name="Azulite's Breath",l.mpRegen=4,l.globalHaste=-30,l.critChance=3,l.silence=15,l.allStats=10,l.req=40)}}if(2===r){if("helmet"===m&&("Hood"===s&&(l.name="Wenerva's Cowl of Destruction",l.enhancedArmor=80,l.allStats=13,l.mp=50,l.expFind=12,l.evocation=13,l.silence=20,l.resistCold=50,l.enhanceCold=3,l.req=52),"Cap"===s&&(dS.random()>.5?(l.name="Cap of the Insubstantial",l.enhancedArmor=80,l.dex=35,l.cha=25,l.allSkills=3,l.stun=15,l.enhanceMagic=4,l.resistMagic=35,l.resistPoison=15,l.req=54):(l.name="Harlequin Crest",l.enhancedArmor=80,l.hp=112,l.mp=112,l.hpRegen=6,l.mpRegen=4,l.magMit=10,l.phyMit=10,l.allSkills=2,l.req=54)),"Bandana"===s&&(dS.random()>.32?(l.name="Brother Xave's Headband",l.enhancedArmor=85,l.hp=75,l.str=15,l.dex=10,l.sta=10,l.agi=10,l.handtohand=6,l.allResist=14,l.globalHaste=-120,l.flavorText='"Followers of the True Path find no value in the short-lived trends that bend impressionable minds. Divine virtue is found in the longstanding practices of our order." -Brother Xave, Legendary Monk of Qiromir',l.req=56):(l.name="Grandmaster's Symmetry",l.enhancedArmor=120,l.offense=8,l.defense=8,l.attack=25,l.hp=111,l.enhancePhysical=8,l.runSpeed=11,l.lightRadius=11,l.expFind=11,l.critChance=11,Fv(e,11,25,88,25,11),Nv(e,25,25,25,25),l.rarity=4,l.req=58)),"Diadem"===s&&(l.name="Phantasmist's Acumen",l.enhancedArmor=120,l.allSkills=3,l.cold=45,l.expFind=14,l.allStats=15,l.offense=25,l.defense=8,l.enhancePhysical=21,l.enhanceMagic=7,l.hpRegen=9,Fv(e,59,15,46,25,33),l.rarity=4,l.req=60),"Dark Hood"===s&&(dS.random()>.32?(l.name="Tattered Death Shroud",l.enhancedArmor=90,l.str=15,l.sta=25,l.wis=15,l.mp=25,l.conjuration=12,l.mpRegen=4,l.enhancePoison=5,l.allResist=10,l.req=60):(l.name="Warlock's Doom",l.enhancedArmor=120,l.fear=90,l.enhanceAll=7,l.allResist=15,l.conjuration=15,l.evocation=9,l.intel=33,l.dex=20,l.lightRadius=16,l.magMit=10,l.rarity=4,l.req=62)),"Coronet"===s&&(l.name="Diadem of the Ages",l.enhancedArmor=90,l.defense=8,Rv(e,4),l.stun=25,l.allResist=25,l.allSkills=2,l.enhanceAll=5,l.flavorText="Your consciousness is brief candlelight, but this diadem shines eternally.",l.req=62),"Miter"===s&&(l.name="Griffon's Tower",l.enhancedArmor=95,l.defense=8,l.evocation=11,l.channeling=6,l.enhanceLightning=9,l.castingHaste=-120,l.resistLightning=35,l.allSkills=1,l.req=64),"Astral Hood"===s&&(l.name="Rorvalen's Guardian",l.enhancedArmor=95,l.abjuration=9,l.conjuration=7,l.mpRegen=3,l.stun=20,l.cold=35,l.allResist=45,l.req=66),"Mail Hood"===s&&(l.name="Shendoma's Velium Crown",l.enhancedArmor=80,l.lightRadius=15,l.mpRegen=3,l.evocation=10,Fv(e,10,35,5,20,10),l.weight=1,l.enhanceCold=5,l.req=52),"Coif"===s&&(l.name="Xalgozian Coif",l.enhancedArmor=85,l.conjuration=8,l.alteration=7,l.hpKill=12,l.mpRegen=4,Nv(e,10,10,10,10),l.allResist=13,l.enhancePoison=5,l.req=56),"Armet"===s&&(l.name="Steel Shade",l.enhancedArmor=90,l.hpRegen=8,l.wraith=5,l.critChance=5,l.enhancePhysical=4,l.defense=7,l.absorbFire=7,l.req=60),"Sallet"===s&&(l.name="Valkyrie's Bane",l.enhancedArmor=95,l.weight=1,l.oneHandSlash=7,l.attack=8,l.critDamage=15,Fv(e,12,0,20,35,15),l.enhanceAll=4,l.enhancePhysical=4,l.req=64),"Burgonet"===s&&(l.name="High Priest's Abstention",l.enhancedArmor=120,l.allSkills=5,l.enhanceMagic=5,l.lightRadius=25,l.magMit=10,l.mp=70,l.allResist=15,l.critChance=4,l.absorbMagic=10,Nv(e,25,25,25,25),l.rarity=4,l.req=58),"Great Helm"===s&&(dS.random()>.32?(l.name="Iron Veil",l.enhancedArmor=85,l.defense=7,l.allResist=50,l.str=30,l.sta=30,l.lightRadius=-4,l.req=58):(l.name="Grave Lord's Deceit",l.enhancedArmor=120,l.critDamage=18,l.allResist=15,l.allSkills=3,l.silence=44,l.stun=30,l.lightRadius=17,l.goldFind=30,l.mpRegen=6,l.intel=55,l.rarity=4,l.req=60)),"Barbute"===s&&(dS.random()>.32?(l.name="Viston's Veil",l.enhancedArmor=90,l.weight=1,l.absorbCold=5,l.cold=25,l.dex=25,l.enhanceCold=10,l.allSkills=3,l.req=62):(l.name="Warlord's Scowl",l.enhancedArmor=120,l.allSkills=3,l.hp=75,l.enhancePhysical=7,l.allResist=21,Nv(e,25,25,25,25),l.absorbFire=5,l.critDamage=15,l.sta=40,l.rarity=4,l.req=62)),"Royal Helm"===s&&(l.name="Messiah's Crown",l.enhancedArmor=95,l.allStats=13,l.hpRegen=5,l.mpKill=8,l.enhanceAll=3,l.enhancePhysical=3,l.allResist=13,Nv(e,12,12,12,12),l.req=66)),"neck"===m){if(c<=83){1===(h=~~(1+4*dS.random()))&&(l.name="Highlord's Avarice",l.globalHaste=-40,l.thorns=15,l.critChance=9,l.critDamage=12,l.resistLightning=35,l.lightningDamage=15,l.haste=-120,l.allSkills=1,l.req=52),2===h&&(dS.random()>.32?(l.name="Miranda's Kaleidoscope",l.allStats=13,l.wraith=5,l.leech=5,l.allResist=35,l.allSkills=3,l.flavorText="A chromatic sheen glimmers from this pendant",l.req=53):(l.name="Assassin's Guile",l.armor=50,l.resistPoison=100,l.allStats=20,l.piercing=10,l.dualWield=15,l.haste=-180,l.absorbMagic=7,l.hp=85,l.leech=13,Nv(e,21,21,21,21),l.rarity=4,l.req=56)),3===h&&(l.name="Seraph's Melody",l.abjuration=12,l.alteration=10,l.wraith=10,l.lightRadius=8,l.allSkills=3,l.req=55),4===h&&(l.name="Beholder's Eye",l.conjuration=10,l.alteration=7,l.magMit=9,l.enhanceFire=6,l.fear=25,l.mpRegen=5,l.req=57)}if(c>=84&&c<=91){1===(h=~~(1+4*dS.random()))&&(dS.random()>.32?(l.name="Medal of Deep Thought",l.hp=75,l.mp=30,l.wis=11,l.intel=11,l.allResist=9,l.enhanceFire=6,l.req=61):(l.name="Warder's Zephyr",l.runSpeed=20,l.enhancePhysical=7,l.enhanceFire=7,l.enhanceMagic=7,l.allSkills=5,l.cold=45,l.leech=11,l.globalHaste=-120,Fv(e,0,33,55,77,22),l.rarity=4,l.req=62)),2===h&&(dS.random()>.32?(l.name="Necklace of Nightstalking",l.hp=60,l.dex=21,l.agi=28,l.dodge=13,l.runSpeed=10,l.piercing=7,l.req=62):(l.name="Crusader's Cathexis",l.enhanceAll=5,l.leech=12,l.enhanceMagic=12,l.absorbMagic=8,l.allSkills=3,l.critChance=9,l.silence=60,l.goldFind=23,l.lightRadius=19,Fv(e,32,85,40,0,0),l.rarity=4,l.req=62)),3===h&&(l.name="Amulet of the Void",l.armor=20,l.dex=20,l.cha=20,l.intel=20,l.agi=20,l.mp=50,l.enhanceMagic=7,l.req=63),4===h&&(dS.random()>.32?(l.name="Prime Lord's Torc",l.allStats=8,l.absorbMagic=7,l.resistFire=50,l.resistCold=35,l.castingHaste=-80,l.enhanceCold=3,l.enhanceFire=5,l.req=64):(l.name="Oracle's Sibyl",l.enhancePoison=11,l.enhanceCold=7,l.mp=77,l.hp=53,l.allSkills=3,l.mpKill=21,l.wis=42,l.intel=21,l.dex=33,l.cold=45,l.runSpeed=15,l.magMit=7,l.rarity=4,l.req=64))}if(c>=92){1===(h=~~(1+4*dS.random()))&&(l.name="Glamour of Rinara",l.cha=45,l.hpRegen=5,l.wraith=11,l.resistLightning=15,l.resistMagic=35,l.allSkills=3,l.enhanceMagic=6,l.req=64),2===h&&(dS.random()>.32?(l.name="Primal Grid",l.attack=25,l.allResist=30,l.hpKill=7,l.mpKill=5,l.magMit=5,l.enhancePhysical=6,l.req=65):(l.name="Sorcerer's Zodiac",l.allSkills=7,l.enhanceLightning=8,l.enhanceCold=6,l.allResist=42,l.intel=55,l.sta=40,l.fireDamage=66,l.lightningDamage=39,l.evocation=10,l.conjuration=10,l.silence=25,l.fear=25,l.critChance=9,l.rarity=4,l.req=64)),3===h&&(l.name="Stalker's Garrote",l.armor=30,l.str=35,l.dex=20,l.agi=35,l.hp=75,l.haste=-100,l.allResist=25,l.req=66),4===h&&(dS.random()>.32?(l.name="Lendiniara's Talisman",l.armor=16,l.allStats=14,l.hp=70,l.mp=70,l.leech=10,l.mpRegen=7,l.allResist=24,l.enhanceAll=4,l.enhancePhysical=4,l.req=66):(l.name="High Priest's Mastery",l.enhanceMagic=15,Fv(e,44,105,25,0,0),l.castingHaste=-100,l.wis=60,l.intel=35,l.sta=20,l.hpKill=12,l.mpKill=12,l.expFind=8,l.critDamage=24,l.rarity=4,l.req=68))}}if("ring"===m){if(c<=83){1===(h=~~(1+3*dS.random()))&&(l.name="Ring of the Sky",l.hp=45,l.sta=20,l.resistLightning=24,l.enhanceLightning=7,l.silence=15,l.allSkills=2,l.req=57),2===h&&(dS.random()>.32?(l.name="Carrion Zephyr",l.enhanceCold=5,l.enhancePoison=5,l.mpRegen=3,l.phyMit=5,l.leech=7,l.resistPoison=55,l.req=55):(l.name="High Priest's Piety",l.mp=35,l.hp=60,Nv(e,24,24,24,24),l.wis=30,l.intel=15,l.agi=24,l.critChance=5,l.allSkills=2,Rv(e,5),l.castingHaste=-60,l.rarity=4,l.req=55)),3===h&&(dS.random()>.32?(l.name="Ring of Winter",l.hp=55,l.mp=25,l.armor=15,l.wis=15,l.intel=15,l.resistMagic=20,l.resistCold=33,l.enhanceCold=6,l.req=55):(l.name="Warlock's Carnage",l.castingHaste=-100,l.enhanceAll=3,l.resistCold=50,l.resistLightning=35,l.physicalDamage=55,l.silence=25,l.stun=40,l.critChance=10,l.critDamage=16,l.allStats=10,l.attack=100,l.absorbLightning=25,l.rarity=4,l.req=55))}if(c>=84&&c<=91){1===(h=~~(1+3*dS.random()))&&(dS.random()>.32?(l.name="Reaper's Ring",l.sta=15,l.hp=40,l.mp=40,l.armor=12,l.enhanceAll=3,l.enhancePhysical=3,l.wraith=3,l.req=58):(l.name="Arch Mage's Periapt",l.intel=25,l.sta=25,l.mp=50,l.hp=35,l.enhanceAll=5,l.resistFire=32,l.resistCold=32,l.allSkills=4,l.critChance=5,l.critDamage=5,l.rarity=4,l.req=58)),2===h&&(dS.random()>.32?(l.name="Nature's Agony",l.str=12,l.armor=5,l.phyMit=9,l.thorns=23,l.resistPoison=25,l.absorbLightning=7,Nv(e,15,15,15,15),l.req=59):(l.name="Hierophant's Holocaust",l.enhanceFire=8,l.hpKill=10,l.mpKill=7,l.fear=30,l.absorbFire=15,l.resistFire=50,l.fireDamage=50,l.allSkills=2,l.critChance=5,l.rarity=4,l.req=59)),3===h&&(dS.random()>.32?(l.name="Signet of Desticor",l.castingHaste=-60,l.intel=29,l.mpKill=7,l.hpKill=12,l.enhancePoison=5,l.enhanceMagic=3,l.resistMagic=35,l.absorbPoison=9,l.flavorText='"Your corporeal forms are destined for decay. Resign yourself to your consummate death, for your kind are nothing more than a plague upon Vandamor." Desticor, the Pestilent',l.req=62):(l.name="Sorcerer's Pulsar",Fv(e,20,12,0,48,31),Nv(e,10,10,10,10),l.critChance=10,l.critDamage=25,l.allSkills=3,l.allStats=9,l.absorbFire=7,l.absorbMagic=7,l.armor=90,l.lightRadius=21,l.goldFind=13,l.fear=15,l.rarity=4,l.req=62))}if(c>=92){var h=~~(1+4*dS.random());1===h&&(l.name="Wisp's Cradle",l.sta=35,l.haste=-50,l.thorns=25,l.attack=15,l.enhanceLightning=5,l.goldFind=25,l.absorbLightning=9,l.req=63),2===h&&(dS.random()>.32?(l.name="Crystasia's Onyx Ring",l.hp=50,l.mp=50,l.armor=30,l.allResist=18,Rv(e,4),l.leech=4,l.req=63):(l.name="Grave Lord's Perfidy",l.leech=6,l.absorbMagic=6,l.wraith=6,l.castingHaste=-70,l.critDamage=12,l.sta=25,l.enhancePhysical=4,l.allSkills=2,l.resistLightning=49,l.resistCold=37,l.rarity=4,l.req=63)),3===h&&(dS.random()>.32?(l.name="Ring of Surlin",l.armor=10,l.str=30,l.sta=30,l.hp=60,l.resistMagic=50,l.attack=15,l.hpRegen=4,l.thorns=20,l.globalHaste=-60,l.enhancePhysical=5,l.flavorText='"Swear fealty to your King and a blood pact to your fellow dwarves. Your King and your race are the greatest gifts that the Gods ever gave you." Surlin Grimhelm',l.req=64):(l.name="Crusader's Allegiance",l.hpRegen=5,l.leech=7,l.wraith=4,l.resistLightning=24,l.resistCold=35,l.allSkills=2,l.mp=33,l.expFind=13,Nv(e,14,14,14,14),l.rarity=4,l.req=64)),4===h&&(dS.random()>.32?(l.name="Ormir's Cyclone",l.leech=6,l.wraith=6,l.allStats=9,l.allSkills=2,l.critChance=6,l.critDamage=15,l.enhanceLightning=6,l.absorbLightning=12,l.flavorText='"Only a fool denies the almighty forces of nature that regulate your very lives." Ormir',l.req=65):(l.name="Assassin's Helix",l.attack=30,l.offense=7,l.hpKill=20,l.allStats=15,l.lightRadius=12,l.goldFind=25,l.leech=5,l.stun=15,l.runSpeed=20,l.dodge=7,l.enhancePhysical=5,l.resistFire=50,l.resistLightning=50,l.rarity=4,l.req=66))}}if("shoulders"===m&&("Cloth Drape"===s&&(l.name="Glimmershard",l.enhancedArmor=80,l.intel=21,l.cha=15,l.allSkills=2,l.stun=12,l.enhanceMagic=3,l.goldFind=25,l.resistMagic=25,l.req=54),"Woven Drape"===s&&(l.name="Worn Cloth Mantle",l.enhancedArmor=85,l.str=12,l.cha=12,l.agi=15,l.allResist=7,l.absorbMagic=4,l.alteration=4,l.conjuration=6,l.req=58),"Azure Shawl"===s&&(l.name="Shawl of Perception",l.enhancedArmor=90,l.hp=30,l.mp=30,l.sta=18,l.wis=18,l.intel=18,l.allResist=9,l.silence=12,l.stun=8,l.req=62),"Archon Shawl"===s&&(l.name="Arch Mage's Debacle",l.enhancedArmor=120,l.enhanceFire=9,l.hp=80,Fv(e,38,37,55,8,0),l.silence=34,l.stun=15,l.intel=41,l.dex=23,l.lightRadius=17,l.thorns=12,l.absorbFire=6,l.rarity=4,l.req=65),"Leather Shoulders"===s&&(l.name="Poisoned Mantle",l.enhancedArmor=80,l.str=14,l.dex=14,l.sta=14,l.agi=14,l.resistPoison=30,l.enhancePoison=4,l.weight=1,l.req=54),"Studded Shoulders"===s&&(l.name="Pioneer's Raiment",l.enhancedArmor=85,l.hpKill=12,l.handtohand=10,l.oneHandBlunt=7,l.leech=4,l.mpKill=5,l.resistCold=35,l.runSpeed=15,l.goldFind=25,l.expFind=15,l.req=58),"Spiked Shoulders"===s&&(dS.random()>.32?(l.name="Planewalker's Shoulders",l.enhancedArmor=90,l.hp=25,l.fear=15,Rv(e,4),l.weight=1,l.allStats=7,l.allResist=10,l.req=62):(l.name="Hierophant's Blizzard",l.enhancedArmor=120,l.resistCold=60,l.absorbCold=9,l.enhanceCold=5,l.enhanceMagic=3,l.allSkills=2,l.mpRegen=5,l.critDamage=16,l.cold=100,l.stun=33,l.silence=33,l.rarity=4,l.req=62)),"Brigand Shoulders"===s&&(l.name="Smuggler's Shoulders",l.enhancedArmor=95,l.dodge=9,l.leech=5,l.resistCold=32,l.resistMagic=15,l.enhancePhysical=5,l.critDamage=13,l.critChance=5,l.goldFind=15,l.req=66),"Scaled Mantle"===s&&(l.name="Obulus Mantle",l.enhancedArmor=80,l.str=15,l.sta=15,l.mp=30,l.twoHandSlash=8,l.enhanceAll=2,l.silence=15,l.resistMagic=45,l.wraith=5,l.weight=1,l.req=54),"Chain Mantle"===s&&(l.name="Flamecloud Mantle",l.enhancedArmor=85,l.leech=3,l.resistLightning=35,l.cold=12,l.allResist=10,l.enhancePhysical=5,l.enhanceFire=3,l.doubleAttack=9,l.attack=2,l.req=58),"Kusari Mantle"===s&&(dS.random()>.32?(l.name="Beldron's Vambraces of Impiety",l.enhancedArmor=90,l.leech=5,l.intel=35,l.conjuration=8,l.channeling=6,l.twoHandBlunt=5,l.offense=5,l.resistMagic=35,l.resistLightning=12,l.req=62):(l.name="Oracle's Ailment",l.enhancedArmor=120,Fv(e,20,33,25,55,0),l.magMit=13,l.goldFind=23,l.hpKill=15,l.silence=45,l.stun=45,l.absorbPoison=10,l.allStats=20,l.enhanceAll=5,l.rarity=4,l.req=62)),"Laminar Mantle"===s&&(l.name="Onyx Chain Sleeves",l.enhancedArmor=95,l.allStats=13,l.hp=40,l.mp=40,l.allResist=18,l.enhancePoison=3,l.enhanceCold=5,l.weight=1,l.req=66),"Cobalt Spaulders"===s&&(l.name="Thunderous Spaulders",l.enhancedArmor=80,l.critChance=6,l.resistLightning=45,l.wraith=6,l.defense=5,l.silence=15,l.absorbLightning=6,l.lightningDamage=15,l.req=54),"Mithril Pauldrons"===s&&(dS.random()>.32?(l.name="Krelg's Pauldrons of Pain",l.enhancedArmor=85,l.doubleAttack=5,l.dualWield=4,l.offense=4,l.oneHandBlunt=5,l.str=30,l.critDamage=15,l.attack=15,l.leech=4,l.req=58):(l.name="Warlord's Disdain",l.enhancedArmor=135,l.offense=12,l.hpKill=15,l.str=25,l.dex=25,l.phyMit=5,l.thorns=20,l.critChance=5,l.resistPoison=75,l.resistFire=75,l.rarity=4,l.req=58)),"Sode"===s&&(dS.random()>.32?(l.name="Pauldrons of Blight",l.enhancedArmor=90,l.str=20,l.dex=15,l.hp=35,l.allResist=11,l.enhancePoison=5,l.absorbPoison=3,l.weight=1,l.poisonDamage=12,l.req=62):(l.name="Virtuoso's Orotund",l.enhancedArmor=120,l.allResist=25,l.channeling=12,l.abjuration=12,l.alteration=9,l.hp=35,l.enhancePhysical=12,l.allStats=12,l.fear=35,l.rarity=4,l.req=62)),"Monarch Pauldrons"===s&&(dS.random()>.32?(l.name="Wurm Claw Pauldrons",l.enhancedArmor=95,Nv(e,7,7,7,7),Rv(e,4),l.resistFire=25,l.resistCold=25,l.str=25,l.sta=15,l.intel=15,l.wis=15,l.hp=30,l.mp=30,l.req=66):(l.name="Crusader's Fervor",l.enhancedArmor=120,l.allStats=13,l.hp=39,l.critDamage=20,l.fear=35,l.hpKill=15,l.enhancePhysical=8,l.enhanceMagic=4,l.resistPoison=70,l.resistLightning=32,l.rarity=4,l.req=67))),"back"===m&&("Cape"===s&&(l.name="Hierophant's Cloak",l.mpRegen=4,l.allStats=7,l.thorns=15,l.abjuration=6,l.enhanceCold=4,l.enhanceLightning=5,l.castingHaste=-80,l.req=54),"Cloak"===s&&(l.name="Wraithcloak",l.mpKill=9,l.intel=25,l.wraith=5,l.allSkills=2,l.globalHaste=-50,l.poisonDamage=15,l.enhanceMagic=5,l.enhancePoison=7,l.req=55),"Woven Cloak"===s&&(dS.random()>.32?(l.name="Fallen Ancients' Cloak",l.dodge=2,l.intel=8,l.wis=6,l.channeling=4,l.phyMit=4,l.resistLightning=8,l.resistPoison=8,l.silence=9,l.req=55):(l.name="Grandmaster's Peace",l.globalHaste=-240,l.resistPoison=45,l.resistMagic=77,l.hp=45,l.allSkills=3,l.agi=35,l.dex=54,l.thorns=15,l.critDamage=16,Nv(e,20,20,20,20),l.rarity=4,l.req=55)),"Fur-Lined Cloak"===s&&(l.name="Goldensilk Cloak",l.intel=25,l.goldKill=20,l.cha=17,l.wis=20,l.enhanceMagic=6,l.evocation=8,l.alteration=10,l.castingHaste=-80,l.req=56),"Drake-hide Cloak"===s&&(dS.random()>.32?(l.name="Spirit Caller's Cloak",l.mpRegen=3,l.enhanceAll=3,l.dodge=2,l.alteration=6,l.evocation=4,l.abjuration=11,Nv(e,8,8,8,8),l.req=57):(l.name="Phantasmist's Catharsis",l.enhancedArmor=120,l.allResist=14,l.alteration=13,l.conjuration=9,l.enhanceMagic=5,l.hpKill=13,l.intel=35,l.wis=26,l.cha=22,l.hp=35,l.fear=36,l.rarity=4,l.req=57)),"Brigand's Shroud"===s&&(l.name="Imperial Assassin Shroud",l.hp=30,l.poisonDamage=20,l.agi=35,l.offense=10,l.piercing=5,l.resistMagic=15,l.resistPoison=25,l.haste=-150,l.req=58),"Regal Shroud"===s&&(l.name="Dimensional Cloak",l.absorbMagic=5,l.evocation=6,Fv(e,0,25,15,10,10),Nv(e,10,10,10,10),l.critChance=8,l.castingHaste=-120,l.req=58),"Orcish Cloak"===s&&(l.name="Illuminated Cloak",l.mp=35,l.wis=20,l.intel=25,l.silence=25,l.allSkills=3,Rv(e,4),l.expFind=20,l.req=59),"Elven Shroud"===s&&(l.name="Cloak of Thorns",l.absorbLightning=8,l.absorbCold=5,l.absorbFire=3,l.thorns=30,l.critChance=6,l.globalHaste=-80,l.haste=-50,l.allStats=8,l.req=60),"Emerald Cloak"===s&&(dS.random()>.32?(l.name="Cloak of Venom",l.poisonDamage=40,l.haste=-90,l.attack=8,l.absorbPoison=9,l.enhancePoison=5,l.leech=6,l.agi=20,l.allSkills=2,l.req=60):(l.name="Hierophant's Cyclone",l.allResist=18,l.enhancePhysical=10,l.phyMit=15,l.wis=40,l.sta=16,l.dex=23,l.hpRegen=6,l.mpRegen=6,l.castingHaste=-120,l.rarity=4,l.req=60)),"Aviak Cloak"===s&&(dS.random()>.32?(l.name="Fletcher's Cloak",l.attack=12,l.critDamage=6,l.critChance=6,l.hp=25,l.mp=25,l.resistLightning=20,l.enhanceAll=5,l.enhancePhysical=5,l.globalHaste=-120,l.req=61):(l.name="Warlock's Demise",l.castingHaste=-150,l.enhanceFire=7,l.enhanceMagic=4,Nv(e,20,20,20,20),l.allStats=12,l.expFind=12,l.allSkills=5,l.intel=42,l.wis=30,l.sta=15,l.rarity=4,l.req=61)),"Chlamys"===s&&(dS.random()>.32?(l.name="Cloak of Silver Eyes",l.mpKill=7,l.hpKill=11,l.leech=7,l.mpRegen=4,l.haste=-50,l.magMit=7,l.oneHandSlash=9,l.cold=16,l.req=61):(l.name="Assassin's Slander",l.allResist=19,l.allSkills=3,l.agi=25,l.sta=47,l.phyMit=15,l.critChance=7,l.goldFind=25,l.haste=-180,l.thorns=25,l.stun=35,l.fear=15,l.cold=27,l.rarity=4,l.req=62)),"Burnt Cape"===s&&(l.name="Cloak of Piety",l.wis=18,l.dex=18,l.hp=35,l.enhanceAll=2,l.enhancePhysical=2,l.handtohand=9,l.critDamage=15,l.haste=-50,l.globalHaste=-50,l.castingHaste=-50,l.flavorText="The worldly man leaves all treasures behind him. A pious man leaves all treasures in front of him.",l.req=62),"Umbral Shroud"===s&&(dS.random()>.32?(l.name="Demon Slayer's Shroud",l.hpKill=8,l.absorbFire=8,l.hpRegen=3,l.twoHandSlash=10,l.haste=-130,l.enhanceCold=6,l.enhanceFire=3,l.fear=24,l.req=63):(l.name="Grave Lord's Treachery",l.allResist=27,l.absorbLightning=7,l.absorbPoison=7,l.critChance=8,l.expFind=16,l.haste=-110,l.globalHaste=-150,l.magMit=13,l.str=33,l.stun=66,l.cold=52,l.rarity=4,l.req=64)),"Archon Cloak"===s&&(l.name="Dragoon's Glory",l.allStats=9,l.twoHandSlash=9,l.defense=6,l.globalHaste=-150,l.phyMit=3,l.attack=9,l.absorbCold=5,Fv(e,10,25,0,15,15),Nv(e,8,8,8,8),l.flavorText="In search of glory one must first search for resolve.",l.req=64),"Astral Cloak"===s&&(l.name="Prism Seer's Cloak",l.allStats=10,l.allSkills=3,l.resistMagic=35,l.resistFire=25,Rv(e,4),l.castingHaste=-160,l.silence=25,l.req=65)),"chest"===m&&("Elven Robe"===s&&(l.name="Robe of Fungus Growth",l.enhancedArmor=80,l.resistFire=30,l.wis=12,l.sta=36,l.allSkills=3,l.hpRegen=15,l.cold=25,l.req=54),"Silk Robe"===s&&(l.name="Sorcerer's Nebula",l.enhancedArmor=120,l.hp=100,l.mp=100,l.allResist=25,l.enhanceAll=7,l.hpKill=25,l.mpRegen=9,l.lightRadius=25,l.phyMit=25,l.magMit=16,l.critChance=7,l.critDamage=17,l.rarity=4,l.req=62),"Linen Robe"===s&&(dS.random()>.32?(l.name="Robe of Adversity",l.enhancedArmor=90,l.mp=55,l.sta=20,l.cha=20,l.intel=33,l.resistPoison=55,l.conjuration=10,l.resistMagic=20,l.fear=15,l.critChance=5,l.req=62):(l.name="Warlock's Abomination",l.enhancedArmor=120,l.enhancePoison=15,l.enhanceFire=5,l.enhanceMagic=7,l.fear=32,l.silence=58,l.mp=110,l.hp=75,l.critChance=8,l.phyMit=10,l.critChance=12,l.critDamage=15,l.rarity=4,l.req=62)),"Azure Robe"===s&&(l.name="Robe of the Pale Moon Sky",l.enhancedArmor=95,l.intel=20,l.wis=20,l.hp=85,l.mp=100,l.allResist=15,l.allSkills=2,l.castingHaste=-80,l.req=66),"Quilted Tunic"===s&&(l.name="Wyvern Hide Tunic",l.enhancedArmor=80,l.sta=15,l.wis=24,l.intel=11,l.mp=25,l.resistFire=25,l.resistMagic=15,l.mpRegen=5,Nv(e,7,7,7,7),l.castingHaste=-100,l.req=54),"Spiked Vestment"===s&&(l.name="The Gladiator's Vestment",l.enhancedArmor=85,Rv(e,5),l.thorns=20,l.magMit=18,l.phyMit=18,l.resistPoison=40,l.stun=25,l.cold=35,l.req=58),"Leather Armor"===s&&(l.name="Fungus Covered Scale Tunic",l.enhancedArmor=90,l.abjuration=8,l.enhancePoison=4,l.globalHaste=-50,l.str=21,l.hpKill=5,l.expFind=12,Fv(e,15,24,33,10,0),l.hpRegen=15,l.flavorText="A coveted artifact rumored to be hidden in the unknown depths of Kordata. Enchanted with the regenerative properties of fungus.",l.req=62),"Studded Leather"===s&&(l.name="Gelke's Valor",l.enhancedArmor=95,l.critChance=7,l.critDamage=12,l.enhancePhysical=3,l.enhanceFire=5,l.phyMit=13,l.sta=35,l.stun=25,l.allSkills=3,l.req=66),"Chain Mail"===s&&(dS.random()>.32?(l.name="Mithril Chains of the Underdark",l.enhancedArmor=80,l.hp=60,l.phyMit=15,l.critChance=7,l.conjuration=9,l.haste=-90,l.enhanceAll=5,l.enhancePhysical=5,Fv(e,10,35,20,5,5),l.cold=15,l.weight=1,l.flavorText="Famously worn by an outcast dark elven ranger. He spent his days wandering the dungeons of Vandamor in search of friendship, adventure, and his identity.",l.req=54):(l.name="Assassin's Deception",l.enhancedArmor=120,l.hp=120,l.allResist=30,l.doubleAttack=13,l.hpKill=25,l.enhancePhysical=9,l.agi=75,l.phyMit=25,l.magMit=15,l.absorbLightning=7,l.absorbMagic=10,l.absorbPoison=7,Nv(e,18,18,18,18),l.rarity=4,l.req=55)),"Ring Mail"===s&&(l.name="Anuran Scale Chestplate",l.enhancedArmor=85,l.hp=25,l.mp=35,l.cha=15,l.intel=25,l.wis=25,l.mpRegen=5,l.enhancePoison=6,l.enhanceMagic=5,l.allResist=14,l.allSkills=4,l.req=58),"Scale Mail"===s&&(l.name="Leviathan",l.enhancedArmor=90,l.phyMit=25,l.str=50,Rv(e,5),l.allResist=18,l.defense=10,l.coldDamage=25,l.cold=20,l.req=62),"Kusari Mail"===s&&(l.name="Chains of Sovereignty",l.enhancedArmor=95,l.leech=8,l.hpRegen=6,l.str=20,l.phyMit=15,l.magMit=21,l.allSkills=2,l.allResist=28,l.expFind=15,l.mpKill=15,l.hpKill=9,l.req=66),"Breast Plate"===s&&(dS.random()>.32?(l.name="Breastplate of Honor",l.enhancedArmor=80,l.hp=50,l.mp=50,l.allStats=14,l.allResist=14,l.allSkills=3,Nv(e,15,15,15,15),l.weight=1,l.req=54):(l.name="High Priest's Reverence",l.hp=175,l.fear=30,l.stun=55,l.silence=20,l.enhanceAll=5,l.allResist=35,l.allSkills=5,l.castingHaste=-100,l.lightRadius=25,l.weight=1,l.rarity=4,l.req=56)),"Cuirass"===s&&(dS.random()>.32?(l.name="Steel Carapace",l.enhancedArmor=85,l.resistMagic=40,l.thorns=35,l.resistCold=55,l.phyMit=24,l.stun=25,l.mpRegen=9,l.castingHaste=-100,l.conjuration=11,l.globalHaste=-100,l.enhanceAll=3,l.req=58):(l.name="Warlord's Blitzkrieg",l.enhancedArmor=120,l.hp=125,l.allSkills=5,l.enhancePhysical=8,l.doubleAttack=24,Fv(e,20,30,75,35,35),l.fear=40,l.str=55,l.magicDamage=14,l.lightningDamage=88,Rv(e,5),l.rarity=4,l.req=59)),"Gothic Plate"===s&&(dS.random()>.32?(l.name="Chestplate of Cremated Care",l.enhancedArmor=90,l.allStats=24,l.hp=30,l.mp=30,l.allResist=17,l.allSkills=1,l.enhanceFire=7,l.absorbFire=15,l.thorns=7,l.hpRegen=5,l.weight=1,l.flavorText='"The future is carved by men who fight in the arena. It costs nothing to mock a man who dares greatly; such people never dare enter the arena." -Tynkale, Paladin Guildmaster',l.req=62):(l.name="Grave Lord's Cozen",l.enhancedArmor=120,l.hp=100,l.mp=100,l.phyMit=35,l.enhanceAll=5,l.weight=1,l.allStats=20,l.mpKill=13,l.conjuration=10,l.doubleAttack=7,l.offense=7,l.resistPoison=79,l.resistLightning=37,l.rarity=4,l.req=62)),"Archon Plate"===s&&(dS.random()>.32?(l.name="Archon's Might",l.enhancedArmor=95,l.mpRegen=5,l.leech=5,l.castingHaste=-120,l.haste=-80,l.globalHaste=-120,l.absorbMagic=9,l.enhanceAll=6,l.enhancePhysical=6,l.str=30,l.runSpeed=15,l.allResist=25,l.cold=50,l.weight=1,l.flavorText='And those who cried, "appease, appease" are hung by those they tried to please. -Unknown',l.req=66):(l.name="Virtuoso's Bombast",l.enhancedArmor=120,l.allResist=35,Nv(e,32,32,32,32),l.enhanceMagic=9,l.enhancePhysical=4,l.hp=120,l.cha=48,l.hpRegen=4,l.mpRegen=4,l.dex=35,l.critChance=10,l.dex=35,l.allSkills=4,l.rarity=4,l.req=68))),"bracers"===m&&("Jade Bracers"===s&&(l.name="Stoutwraps",l.enhancedArmor=80,l.hp=25,l.intel=15,l.abjuration=5,l.alteration=4,l.resistPoison=25,l.resistMagic=25,Nv(e,15,15,15,15),l.req=54),"Bone Bracers"===s&&(dS.random()>.32?(l.name="Bracelet of Frostbite",l.enhancedArmor=85,l.hp=30,l.wis=12,l.intel=12,l.critDamage=9,l.silence=12,l.mpKill=6,l.resistCold=35,l.enhanceCold=3,l.req=58):(l.name="Phantasmist's Sagacity",l.enhancedArmor=120,l.allResist=16,Nv(e,13,13,13,13),Rv(e,3),l.critDamage=12,l.cha=25,l.intel=38,l.enhanceAll=4,l.allSkills=1,l.phyMit=9,l.thorns=10,l.rarity=4,l.req=62)),"Sapphire Bracers"===s&&(dS.random()>.32?(l.name="Hardened Clay Bracelet",l.enhancedArmor=90,l.allStats=13,l.goldFind=15,l.expFind=12,l.phyMit=7,l.magMit=7,l.stun=12,l.abjuration=4,l.req=62):(l.name="Arch Mage's Squall",l.enhancedArmor=120,l.critDamage=13,l.critChance=5,l.allResist=20,l.evocation=8,l.conjuration=14,Nv(e,25,25,25,25),l.enhanceCold=15,l.absorbCold=15,l.rarity=4,l.req=62)),"Opulent Bracers"===s&&(l.name="Clawed Guardian Bracer",l.enhancedArmor=95,l.intel=12,l.str=20,l.hp=50,l.allResist=15,l.fear=15,l.enhanceCold=5,l.enhanceFire=5,l.req=66),"Leather Bracers"===s&&(l.name="Spectre's Bracers",l.enhancedArmor=80,l.attack=3,l.alteration=7,l.mpKill=6,l.hpKill=6,l.allStats=6,l.fear=35,l.resistMagic=33,l.resistCold=22,l.req=54),"Patent Bracers"===s&&(l.name="Caretaker's Wraps",l.enhancedArmor=85,l.mp=25,l.hp=20,l.mpRegen=4,l.alteration=7,l.sta=15,Nv(e,13,13,13,13),l.critDamage=5,Rv(e,3),l.silence=15,l.req=58),"Bonded Bracers"===s&&(l.name="Crazed Lunatic Bracers",l.enhancedArmor=90,l.critChance=5,l.handtohand=8,l.globalHaste=-70,l.haste=-40,l.enhancePhysical=5,l.doubleAttack=7,l.req=62),"Elven Bracers"===s&&(l.name="Camii's Bracer of Vigor",l.alteration=5,l.piercing=5,l.agi=25,l.enhanceAll=3,l.enhancePhysical=3,l.runSpeed=10,l.haste=-50,l.castingHaste=-80,l.req=66),"Scaled Bracers"===s&&(dS.random()>.32?(l.name="Dragon Skin Bracelet",l.enhancedArmor=80,l.hp=75,l.goldFind=15,l.cold=15,l.fear=15,Fv(e,15,5,5,25,25),l.weight=1,l.req=54):(l.name="Warder's Reclaim",l.enhancedArmor=120,l.allResist=20,Nv(e,20,20,20,20),l.allStats=13,l.expFind=12,l.goldFind=20,l.lightRadius=15,l.enhancePhysical=5,l.weight=1,l.hpKill=15,l.rarity=4,l.req=55)),"Laminar Bracers"===s&&(l.name="Vampire Slayer's Bracer",l.enhancedArmor=85,l.allSkills=2,l.hpRegen=4,l.hpKill=12,l.mpKill=8,l.absorbMagic=5,l.fireDamage=12,l.enhanceFire=5,l.req=58),"Splinted Bracers"===s&&(l.name="Magmaburst Manacles",l.enhancedArmor=90,l.critDamage=9,l.resistFire=45,l.absorbFire=9,l.fireDamage=15,l.enhanceFire=6,l.weight=1,l.req=62),"Kusari Bracers"===s&&(l.name="Glimpsefade Bracers",l.enhancedArmor=95,l.dex=15,l.agi=25,l.runSpeed=5,l.dualWield=3,l.doubleAttack=3,l.resistMagic=10,Rv(e,3),l.cold=12,l.stun=8,l.enhancePhysical=2,l.phyMit=8,l.weight=1,l.req=66),"Bronze Bracers"===s&&(l.name="High Priest's Humility",l.enhancedArmor=120,Fv(e,0,0,15,35,35),l.enhanceAll=5,l.enhancePhysical=5,l.str=50,l.wis=25,l.sta=20,l.defense=10,l.alteration=7,l.abjuration=7,l.absorbPoison=10,l.rarity=4,l.req=57),"Cobalt Bracers"===s&&(l.name="Crusader's Fealty",l.enhancedArmor=120,l.allResist=13,l.mp=55,l.mpRegen=7,l.magMit=7,l.enhancePhysical=12,l.critChance=7,l.wis=30,l.sta=22,l.cold=45,l.weight=1,l.allSkills=2,l.rarity=4,l.req=59),"Tetrarch Bracers"===s&&(dS.random()>.32?(l.name="Dragon Tribe Bracers",l.enhancedArmor=90,l.critChance=6,l.goldFind=12,l.resistPoison=15,l.resistCold=15,l.resistFire=15,l.allSkills=3,l.enhanceAll=4,l.enhancePhysical=4,l.req=62):(l.name="Warlord's Defiance",l.enhancedArmor=120,l.allResist=16,l.haste=-70,l.critDamage=12,l.allStats=21,l.hp=50,l.defense=10,l.lightRadius=15,l.enhancePhysical=4,l.weight=1,Nv(e,12,12,12,12),l.rarity=4,l.req=63)),"Gilded Bracers"===s&&(l.name="Waking Dawn Bracers",l.enhancedArmor=95,l.weight=1,l.castingHaste=-50,l.magicDamage=25,l.cha=20,l.allStats=13,Rv(e,5),Nv(e,18,18,18,18),l.req=66)),"gloves"===m&&("Gloves"===s&&(l.name="Dainty Gloves",l.enhancedArmor=80,l.mp=35,l.cha=16,l.intel=24,l.alteration=4,l.abjuration=7,l.silence=12,l.castingHaste=-50,l.absorbMagic=9,l.magicDamage=12,l.req=54),"Cloth Gloves"===s&&(l.name="Arch Mage's Calamity",l.enhancedArmor=120,l.castingHaste=-120,l.globalHaste=-250,l.enhanceLightning=12,l.enhanceCold=5,l.lightRadius=10,l.allSkills=2,l.mpKill=15,l.hpKill=15,l.allStats=10,l.rarity=4,l.req=58),"Woven Gloves"===s&&(l.name="Phantasmist's Serendipity",l.enhancedArmor=120,l.castingHaste=-250,l.expFind=17,l.goldFind=25,l.lightRadius=30,l.critChance=7,l.critDamage=10,l.resistCold=35,l.resistFire=35,l.allStats=20,l.leech=12,l.wraith=12,l.rarity=4,l.req=62),"Mesh Gloves"===s&&(l.name="Gloves of Bladecalling",l.enhancedArmor=95,l.mp=50,l.sta=15,l.intel=15,l.conjuration=10,l.abjuration=6,l.castingHaste=-50,l.expFind=12,l.thorns=15,l.absorbMagic=3,l.req=66),"Rawhide Gloves"===s&&(l.name="Assassin's Hoax",l.enhancedArmor=120,l.enhancePhysical=9,l.agi=65,l.allResist=24,l.globalHaste=-200,l.critChance=7,l.critDamage=15,l.fear=45,l.leech=15,l.rarity=4,l.req=62),"Drakescale Gloves"===s&&(l.name="Gladeclutch",l.enhancedArmor=85,l.hp=45,l.mpRegen=4,l.leech=9,l.wraith=9,l.critChance=7,l.dodge=7,l.thorns=13,l.lightRadius=15,l.globalHaste=-50,l.haste=-50,l.req=58),"Sharkskin Gloves"===s&&(l.name="Tyrant's Iron Will",l.enhancedArmor=90,l.hp=50,l.hpRegen=5,l.hpKill=12,l.allResist=12,l.allSkills=3,l.phyMit=5,Nv(e,9,9,9,9),l.req=62),"Studded Gloves"===s&&(l.name="Soul Drainer",l.enhancedArmor=95,l.mp=21,l.wis=12,l.leech=7,l.wraith=7,l.mpKill=14,l.mpKill=14,Rv(e,7),l.attack=15,l.enhancePhysical=6,l.req=66),"Lamellar Gauntlets"===s&&(l.name="Twisted Steel Gauntlets",l.enhancedArmor=80,l.str=32,l.critDamage=16,l.haste=-100,l.physicalDamage=44,l.resistLightning=25,l.resistPoison=25,l.stun=25,l.req=54),"Banded Gauntlets"===s&&(l.name="Do'Vassir's Gauntlets of Might",l.enhancedArmor=85,l.hp=50,l.mp=50,l.allStats=18,l.castingHaste=-60,l.weight=1,l.enhanceAll=5,l.enhancePhysical=5,l.allResist=14,l.silence=25,l.req=58),"Kusari Gauntlets"===s&&(l.name="Eternal Loyalty Gauntlets",l.enhancedArmor=90,l.critChance=5,l.hpRegen=4,l.agi=35,l.lightRadius=17,l.leech=10,l.attack=15,l.enhancePhysical=6,l.req=62),"Brigandine Gauntlets"===s&&(dS.random()>.32?(l.name="Unholy Caller's Gauntlets",l.enhancedArmor=95,l.allStats=10,l.mpRegen=5,l.mpRegen=3,l.conjuration=7,l.castingHaste=-120,l.enhanceCold=6,l.enhancePoison=6,l.silence=12,l.fear=24,l.req=66):(l.name="Oracle's Contagion",l.enhancedArmor=120,l.globalHaste=-100,l.castingHaste=-160,l.resistFire=55,l.resistPoison=90,l.mp=40,l.alteration=8,l.evocation=5,l.enhancePhysical=9,l.enhancePoison=6,l.rarity=4,l.req=67)),"Cobalt Gauntlets"===s&&(l.name="Gutrender",l.enhancedArmor=80,l.str=40,l.twoHandSlash=9,l.critChance=10,l.critDamage=20,l.defense=12,l.stun=25,l.fear=15,l.physicalDamage=20,l.enhancePhysical=6,l.req=54),"Ornate Gauntlets"===s&&(l.name="Virtuoso's Conceit",l.enhancedArmor=120,l.mpKill=21,l.dualWield=16,l.dex=28,l.agi=40,l.critDamage=33,l.goldFind=40,l.hp=50,l.mpRegen=4,l.castingHaste=-200,Fv(e,37,39,25,15,0),l.rarity=4,l.req=62),"Tetrarch Gauntlets"===s&&(dS.random()>.32?(l.name="Queensguard Gauntlets",l.enhancedArmor=90,l.allSkills=4,l.allStats=10,Rv(e,4),l.enhanceMagic=6,l.silence=24,l.fireDamage=5,l.mpRegen=3,l.goldFind=40,l.req=62):(l.name="Warlord's Derision",l.enhancedArmor=120,l.haste=-200,l.enhancePhysical=7,l.leech=13,l.absorbFire=8,l.absorbPoison=8,l.resistCold=60,l.resistFire=60,l.hpKill=20,l.critChance=9,l.critDamage=15,l.rarity=4,l.req=62)),"Gilded Gauntlets"===s&&(l.name="Berserker's Vengeance Gauntlets",l.enhancedArmor=95,l.hpKill=15,l.leech=10,l.globalHaste=-150,l.haste=-150,l.allSkills=5,l.magMit=5,l.phyMit=7,l.req=66)),"belt"===m&&("Sash"===s&&(dS.random()>.5?(l.name="Girdle of Dark Power",l.enhancedArmor=80,l.hp=28,l.mp=28,l.castingHaste=-150,l.allResist=13,l.intel=15,l.str=15,l.conjuration=6,l.evocation=6,l.enhancePoison=6,l.req=54):dS.random()>.32?(l.name="Silver Girdle of Stability",l.enhancedArmor=80,l.hp=50,l.mp=50,l.allResist=10,l.str=8,l.wis=5,l.intel=5,l.allSkills=2,l.enhanceMagic=5,l.req=54):(l.name="Phantasmist's Insight",l.enhancedArmor=120,l.allResist=35,l.mp=90,l.alteration=5,l.cha=45,l.channeling=11,l.abjuration=7,l.intel=30,l.wis=30,l.absorbMagic=9,l.enhanceAll=5,l.phyMit=12,l.runSpeed=15,l.rarity=4,l.req=58)),"Azure Sash"===s&&(dS.random()>.5?(l.name="Arachnid Sash",l.enhancedArmor=90,l.mp=25,l.mpKill=15,l.mpRegen=7,l.fear=15,l.silence=25,l.castingHaste=-80,l.allSkills=5,l.req=62):dS.random()>.32?(l.name="Crystalline Silk Belt",l.enhancedArmor=90,l.hp=35,l.mp=35,l.wis=15,l.intel=25,l.abjuration=5,l.silence=25,l.castingHaste=-130,l.enhanceLightning=7,l.req=62):(l.name="Sorcerer's Equinox",l.enhancedArmor=120,l.enhanceCold=6,l.enhanceFire=6,Rv(e,4),l.castingHaste=-200,l.globalHaste=-200,l.critDamage=24,l.thorns=15,l.stun=25,l.fear=33,l.rarity=4,l.req=62)),"Leather Belt"===s&&(dS.random()>.5?dS.random()>.32?(l.name="Belt of the Destroyer",l.enhancedArmor=80,l.wis=30,l.str=15,l.intel=30,l.hp=50,l.enhanceFire=10,l.evocation=8,l.resistFire=45,l.castingHaste=-120,l.req=54):(l.name="Grandmaster's Affinity",l.enhancedArmor=120,l.haste=-180,l.globalHaste=-60,l.allStats=15,l.enhancePhysical=15,l.parry=12,l.handtohand=20,l.riposte=7,l.absorbMagic=12,l.cold=50,l.rarity=4,l.req=58):(l.name="Windraider's Belt",l.enhancedArmor=80,l.hpRegen=3,l.defense=5,l.enhanceFire=5,l.enhanceLightning=5,l.str=25,l.allResist=7,l.castingHaste=-120,l.globalHaste=-110,l.req=54)),"Heavy Belt"===s&&(dS.random()>.5?(l.name="Sarmina's Cord of Velocity",l.enhancedArmor=90,l.haste=-150,l.str=28,l.dex=28,l.sta=28,l.agi=28,l.enhanceAll=5,l.enhancePhysical=5,l.cold=30,l.absorbCold=12,l.absorbPoison=9,l.req=65):dS.random()>.32?(l.name="Belt of Dwarf Slaying",l.enhancedArmor=90,l.stun=24,l.critChance=7,l.intel=15,l.wis=15,l.str=15,l.allResist=5,l.mp=50,l.hp=50,l.attack=12,l.weight=1,l.req=65):(l.name="Assassin's Subversion",l.enhancedArmor=120,l.haste=-200,l.cold=50,l.absorbCold=10,Fv(e,15,25,10,75,0),l.lightRadius=21,l.hp=66,l.str=36,l.dex=50,l.allSkills=2,l.rarity=4,l.req=66)),"Mesh Belt"===s&&(dS.random()>.5?(l.name="Viston's Coil",l.enhancedArmor=80,l.leech=9,l.mpKill=11,l.weight=1,l.str=32,l.haste=-80,l.globalHaste=-80,l.enhancePhysical=5,l.enhancePoison=6,l.req=54):(l.name="White Dragon Scale Sash",l.enhancedArmor=80,l.wis=9,l.mp=75,l.resistCold=30,l.mpRegen=3,l.castingHaste=-100,l.allSkills=2,l.enhanceMagic=8,l.req=54)),"Splinted Belt"===s&&(dS.random()>.5?(l.name="Runebranded Cord",l.enhancedArmor=90,l.weight=1,l.str=15,l.dex=15,l.sta=15,l.haste=-100,l.globalHaste=-100,l.castingHaste=-100,l.allResist=10,l.allSkills=3,l.req=65):(l.name="Spiked Siren Hide Belt",l.enhancedArmor=90,l.hp=25,l.mp=25,l.allStats=13,l.allResist=7,l.haste=-200,l.enhanceCold=10,l.req=65)),"Monarch Girdle"===s&&(dS.random()>.5?(l.name="White Wolf-hide Girdle",l.enhancedArmor=80,l.str=11,l.dex=26,l.cold=35,l.haste=-200,l.weight=1,l.lightRadius=25,l.mpKill=12,l.fear=15,l.stun=15,l.resistCold=40,l.absorbCold=8,l.req=54):dS.random()>.32?(l.name="Belt of the Great Turtle",l.enhancedArmor=80,l.str=25,l.dex=25,l.hp=30,l.cold=50,l.stun=20,l.globalHaste=-160,l.haste=-120,l.abjuration=5,l.defense=5,l.req=54):(l.name="High Priest's Constraint",l.enhancedArmor=120,l.castingHaste=-120,l.haste=-150,l.globalHaste=-200,l.expFind=20,l.sta=30,l.dex=30,l.allSkills=3,l.phyMit=15,l.leech=7,l.weight=1,l.silence=33,l.enhanceMagic=4,l.enhancePhysical=7,l.rarity=4,l.req=59)),"Mithril Girdle"===s&&(dS.random()>.5?dS.random()>.32?(l.name="Grimden's Hearty Cord",l.enhancedArmor=90,l.stun=30,l.sta=35,l.hpRegen=4,l.mpRegen=6,l.castingHaste=-120,l.enhanceAll=5,Rv(e,7),l.req=64):(l.name="Virtuoso's Plangent",l.allResist=25,Fv(e,0,15,25,50,50),Nv(e,26,26,26,26),l.absorbLightning=10,l.haste=-140,l.weight=1,l.allSkills=2,l.enhanceMagic=6,l.critDamage=15,l.hp=60,l.rarity=4,l.req=65):(l.name="Grotesque Girdle",l.enhancedArmor=90,l.hp=75,l.mp=75,l.wis=25,l.intel=25,l.castingHaste=-80,l.mpRegen=5,l.leech=5,l.wraith=5,l.poisonDamage=25,l.weight=1,l.req=64))),"legs"===m&&("Pants"===s&&(l.name="Spider Queen's Leggings",l.enhancedArmor=80,l.conjuration=8,l.channeling=7,l.alteration=8,l.hp=35,l.mp=55,l.magMit=15,l.resistPoison=35,l.enhancePoison=6,l.req=54),"Cotton Pants"===s&&(l.name="Arch Angel's Trousers",l.enhancedArmor=85,l.allStats=13,l.abjuration=9,l.alteration=9,l.mpRegen=6,l.lightRadius=15,l.expFind=11,l.silence=16,l.resistMagic=24,l.resistLightning=15,l.allSkills=4,l.req=58),"Linen Pants"===s&&(dS.random()>.32?(l.name="Martyr's Destiny",l.enhancedArmor=90,l.critChance=9,l.enhanceFire=9,l.hpKill=30,l.mpKill=18,l.evocation=10,l.silence=16,l.fear=30,Fv(e,0,15,20,25,45),l.req=62):(l.name="Sorcerer's Quasar",l.enhancedArmor=120,Nv(e,20,20,20,20),l.enhanceLightning=8,l.enhanceMagic=5,l.sta=40,l.intel=45,l.mp=55,l.silence=44,l.stun=20,l.mpRegen=7,l.hpRegen=7,l.phyMit=10,l.rarity=4,l.req=62)),"Silk Leggings"===s&&(l.name="Sacred Striders",l.enhancedArmor=95,l.hp=80,l.mp=80,l.hpRegen=12,l.magMit=18,l.phyMit=13,l.allSkills=4,l.enhanceAll=6,l.resistMagic=65,l.req=66),"Fur Pants"===s&&(l.name="Hierophant's Cataclysm",l.enhancedArmor=120,l.allResist=24,l.hp=50,l.mp=50,l.alteration=9,l.abjuration=9,l.enhanceAll=4,Nv(e,15,15,15,15),l.thorns=30,l.runSpeed=15,l.critChance=5,l.critDamage=12,l.rarity=4,l.req=55),"Wolf-Hide Pants "===s&&(l.name="Tranquil Breeches",l.enhancedArmor=85,l.handtohand=15,l.riposte=9,l.parry=9,l.dodge=9,l.expFind=13,l.defense=6,l.physicalDamage=20,l.critChance=6,l.critDamage=12,Rv(e,5),Nv(e,12,12,12,12),l.req=58),"Sharkskin Legs"===s&&(l.name="Heavenly Gait",l.allStats=13,l.allSkills=3,Nv(e,13,13,13,13),l.globalHaste=-100,l.phyMit=12,l.magMit=21,l.weight=1,l.resistMagic=25,l.resistLightning=25,l.req=62),"Studded Legs"===s&&(dS.random()>.32?(l.name="Preacher's Disciple",l.enhancedArmor=95,l.mp=60,l.hp=40,l.alteration=3,l.hpRegen=5,l.mpRegen=7,Rv(e,4),l.enhanceLightning=7,l.enhanceMagic=7,l.req=66):(l.name="Grandmaster's Consonance",l.enhancedArmor=120,l.fear=35,l.stun=35,l.hp=80,l.critChance=9,l.globalHaste=-120,l.resistPoison=44,l.resistFire=60,l.hpKill=22,l.critDamage=17,l.str=40,l.rarity=4,l.req=67)),"Scaled Legs"===s&&(l.name="Coward's Redemption",l.fear=30,l.agi=35,l.runSpeed=15,l.hpRegen=4,l.allStats=14,l.enhancePhysical=6,l.req=54),"Chausses"===s&&(l.name="Cobrastrike Chausses",l.enhancedArmor=85,l.critChance=5,l.agi=35,l.hpKill=12,l.leech=5,l.wraith=3,l.piercing=10,l.resistFire=25,l.resistPoison=35,l.poisonDamage=24,l.req=58),"Kusazuri"===s&&(l.name="Dark Scale Greaves",l.enhancedArmor=90,l.hp=55,l.phyMit=21,l.magMit=15,l.dodge=7,l.cold=25,l.globalHaste=-80,l.enhancePhysical=6,l.req=62),"Poleyn"===s&&(dS.random()>.32?(l.name="Drunken Master's Shinguards",l.enhancedArmor=95,l.str=35,l.fear=8,l.stun=8,l.critDamage=14,l.absorbPoison=9,l.haste=-50,l.enhancePhysical=5,l.enhanceFire=6,l.weight=1,l.req=66):(l.name="Oracle's Malady",l.enhancedArmor=120,l.allResist=30,l.fear=40,l.hpRegen=7,l.allSkills=4,l.hpKill=25,l.critChance=10,l.critDamage=10,l.enhanceCold=5,l.enhancePoison=9,Rv(e,7),l.rarity=4,l.req=62)),"Cobalt Legplates"===s&&(l.name="Crackling Whisper",l.enhancedArmor=110,l.resistLightning=95,l.mp=75,l.hp=44,l.absorbLightning=7,l.enhanceLightning=12,l.allStats=12,l.critChance=7,l.silence=55,l.stun=25,l.mpRegen=9,l.weight=1,l.req=66),"Iron Legplates"===s&&(l.name="Tides of Dover",l.enhancedArmor=110,l.resistCold=80,l.resistMagic=55,l.resistLightning=33,l.allSkills=5,l.attack=20,l.lightRadius=25,l.globalHaste=-150,l.haste=-80,l.hpKill=25,l.leech=7,l.weight=1,l.absorbCold=10,Nv(e,25,25,25,25),l.req=62),"Mithril Legplates"===s&&(dS.random()>.32?(l.name="Call to Destiny",l.enhancedArmor=90,l.allSkills=2,l.enhanceAll=5,l.enhancePhysical=5,l.runSpeed=15,l.lightRadius=15,l.allResist=14,l.globalHaste=-150,l.cold=20,l.req=62):(l.name="Grave Lord's Chicane",l.enhancedArmor=120,l.hp=61,l.allResist=22,l.defense=120,l.parry=8,l.riposte=12,l.dodge=6,l.str=44,l.dex=31,l.intel=38,l.critChance=9,Nv(e,21,21,21,21),l.rarity=4,l.req=62)),"Royal Legplates"===s&&(dS.random()>.32?(l.name="Call to Providence",l.enhancedArmor=95,l.hp=65,l.mp=50,Nv(e,20,20,20,20),Fv(e,15,35,15,5,5),l.absorbMagic=15,l.alteration=9,l.enhanceMagic=9,l.req=66):(l.name="Warlord's Ferocity",l.enhancedArmor=120,l.phyMit=20,l.attack=34,l.stun=60,l.enhancePhysical=5,l.allResist=25,l.sta=36,l.runSpeed=15,l.globalHaste=-170,l.critChance=7,l.rarity=4,l.req=68))),"boots"===m&&("Boots"===s&&(dS.random()>.5?(l.name="Marrow Waders",l.enhancedArmor=80,l.leech=6,l.conjuration=9,l.runSpeed=20,l.str=15,l.dex=17,l.cold=20,l.hpRegen=3,l.mpRegen=3,l.resistCold=35,l.enhancePoison=3,l.req=54):(l.name="Blighted Boots",l.enhancedArmor=80,l.hp=20,l.runSpeed=25,l.agi=25,l.resistMagic=25,l.resistPoison=33,l.enhancePoison=7,l.enhanceMagic=5,l.mpRegen=3,l.critChance=3,l.req=54)),"Light Boots"===s&&(dS.random()>.5?dS.random()>.32?(l.name="Sandstorm Slippers",l.enhancedArmor=90,l.str=15,l.sta=15,l.runSpeed=20,l.allSkills=2,l.absorbFire=5,l.enhanceFire=5,l.stun=20,l.resistPoison=57,l.req=64):(l.name="Warlock's Nightmare",l.enhancedArmor=120,Fv(e,65,30,0,15,55),l.runSpeed=35,l.enhanceAll=3,l.stun=50,l.silence=25,l.critDamage=27,l.allStats=12,l.lightRadius=20,l.expFind=20,l.conjuration=12,l.rarity=4,l.req=65):(l.name="Frozen Thalen Boots",l.enhancedArmor=90,l.wis=11,l.castingHaste=-70,l.runSpeed=15,l.evocation=4,l.resistCold=45,l.enhanceCold=9,l.cold=50,l.channeling=9,l.req=64)),"Heavy Boots"===s&&(dS.random()>.5?(l.name="Lizardman Hide Boots",l.enhancedArmor=80,l.hp=25,l.str=25,l.cha=15,l.agi=25,l.critChance=5,l.enhanceAll=3,l.runSpeed=25,l.resistFire=35,l.weight=1,l.req=54):(l.name="Sandals of Harmony",l.enhancedArmor=80,l.mp=20,l.cha=26,l.resistCold=25,l.resistFire=25,l.resistLightning=40,Nv(e,12,12,12,12),l.runSpeed=35,l.lightRadius=15,l.alteration=7,l.req=54)),"Sharkskin Boots"===s&&(dS.random()>.5?dS.random()>.32?(l.name="Sirran's Boots of Insanity",l.enhancedArmor=90,l.runSpeed=35,l.intel=25,l.wis=25,l.sta=25,l.castingHaste=-50,l.hp=50,l.mp=50,l.weight=1,l.allResist=18,l.req=64):(l.name="Hierophant's Cascade",l.enhancedArmor=120,Fv(e,54,35,12,0,35),Nv(e,20,20,20,20),l.runSpeed=55,l.lightRadius=30,l.critChance=4,l.allStats=9,l.thorns=45,l.mpRegen=5,l.hpRegen=7,l.enhanceAll=3,l.rarity=4,l.req=66):dS.random()>.32?(l.name="White Dragonscale Boots",l.enhancedArmor=90,l.wis=17,l.intel=17,l.hp=10,l.mp=35,Fv(e,5,10,5,20,5),l.weight=1,l.mpRegen=5,l.req=64):(l.name="Grandmaster's Balance",l.enhancedArmor=200,l.runSpeed=50,l.allResist=22,l.enhancePhysical=8,l.allSkills=4,l.allStats=13,l.hpRegen=7,l.lightRadius=25,l.attack=30,l.fear=15,l.globalHaste=-100,l.rarity=4,l.req=67)),"Chain Boots"===s&&(dS.random()>.5?(l.name="Shadow Dancers",l.enhancedArmor=120,l.leech=5,l.agi=20,l.dex=25,l.stun=30,l.haste=-40,l.runSpeed=30,l.attack=8,l.enhancePhysical=3,l.weight=1,l.req=54):(l.name="Scaled Hierophant Boots",l.enhancedArmor=95,l.str=20,l.agi=10,l.sta=10,l.stun=30,Fv(e,12,0,12,12,12),l.runSpeed=25,l.enhanceLightning=7,l.weight=1,l.req=54)),"Sovereign Boots"===s&&(dS.random()>.5?(l.name="Maclaer's Boots of Silence",l.enhancedArmor=90,l.hp=17,l.allStats=9,Fv(e,12,20,15,25,0),l.cold=25,l.silence=35,l.defense=7,l.enhanceCold=5,l.req=64):dS.random()>.32?(l.name="Tortoise Shell Boots",l.enhancedArmor=90,l.hp=20,l.str=15,l.cold=45,l.stun=25,l.abjuration=7,l.defense=5,l.phyMit=3,l.magMit=3,l.enhanceCold=4,l.req=64):(l.name="Warder's Preserve",l.enhancedArmor=120,l.allResist=30,Rv(e,3),l.hpRegen=5,l.mpRegen=5,l.hp=33,l.mp=24,l.str=25,l.sta=25,l.agi=36,l.runSpeed=44,l.critChance=7,l.critDamage=17,l.rarity=4,l.req=66)),"Steel Boots"===s&&(dS.random()>.32?(l.name="Boots of the Dead Dream",l.enhancedArmor=80,l.hp=25,l.mp=50,l.str=15,l.wis=15,l.intel=15,l.enhanceAll=3,l.weight=1,l.haste=-60,l.req=54):(l.name="Crusader's Vehemence",l.enhancedArmor=120,Fv(e,15,24,0,33,50),l.runSpeed=25,l.str=33,l.lightRadius=35,l.hpKill=7,l.mpKill=10,l.enhancePhysical=6,l.enhanceMagic=6,l.stun=23,l.fear=15,l.alteration=12,l.rarity=4,l.req=59)),"Sabatons"===s&&(dS.random()>.5?(l.name="Reviled March",l.enhancedArmor=90,l.twoHandBlunt=7,l.abjuration=6,l.globalHaste=-50,l.cha=27,l.enhanceAll=3,l.enhancePhysical=3,l.runSpeed=40,l.allSkills=3,l.allResist=9,l.req=64):(l.name="Boots of the Vindicator",l.enhancedArmor=90,l.str=25,l.sta=25,l.wis=25,l.intel=25,l.runSpeed=25,l.hp=50,l.resistLightning=25,l.resistPoison=15,l.req=64))),"weapons"===m&&("slashed"===d&&("Sword"===s&&(l.name="Gallantine's Gleaming Bastard Sword",l.enhancedDamage=13,l.hp=45,l.alteration=6,l.abjuration=6,l.magicDamage=18,l.fear=15,l.wraith=9,l.haste=-80,l.enhancePhysical=6,l.enhanceMagic=5,l.req=54,l.proc="Effect: Holy Burst"),"Scimitar"===s&&(l.name="Nature Covenant's Scimitar",l.enhancedDamage=7,l.hp=10,l.mp=90,l.str=15,l.sta=15,l.wis=20,l.mpRegen=5,l.mpRegen=5,l.allSkills=3,l.globalHaste=-100,l.castingHaste=-150,l.enhanceAll=6,l.enhancePhysical=6,l.req=56,l.flavorText='"Be neither here nor there, left or right, up or down. Adapting to your surroundings is the key to survival." -Sana Treewind',l.proc="Effect: Wrath of Nature"),"Axe"===s&&(l.name="Green Jade Axe",l.enhancedDamage=15,l.str=10,l.hp=25,l.leech=6,l.hpKill=8,l.attack=12,l.globalHaste=-80,l.resistPoison=45,l.poisonDamage=35,l.enhancePoison=7,l.enhancePhysical=6,l.req=58),"Claws"===s&&(l.name="Claw of Darafar",l.ias=.35,l.enhancedDamage=5,l.oneHandSlash=4,l.leech=9,l.haste=-120,l.enhancePhysical=6,l.globalHaste=-80,l.allSkills=3,l.critChance=7,l.critDamage=11,l.req=60,l.flavorText="In a fit of rage, all obstacles in his path were reduced to dust.",l.proc="Effect: Frenzy"),"Long Sword"===s&&(l.name="Harmonic Short Sword",l.enhancedDamage=16,l.sta=5,l.str=15,l.dex=10,l.cha=20,l.hp=60,l.castingHaste=-140,l.wraith=10,l.runSpeed=15,Rv(e,4),l.enhanceMagic=9,l.req=62,l.proc="Effect: Dance of the Blade"),"Chokuto"===s&&(dS.random()>.32?(l.name="Azure Zephyr",l.enhancedDamage=3,l.ias=.42,l.hp=50,l.globalHaste=-150,l.haste=-100,l.str=15,l.dex=5,l.sta=10,l.leech=7,l.wraith=7,l.critChance=9,l.enhancePhysical=6,l.req=64):(l.name="Warder's Hailrend",l.damage=25,l.delay=2400,l.coldDamage=49,l.enhancePhysical=13,l.enhanceFire=5,l.wraith=9,l.leech=5,l.fear=43,l.haste=-120,l.critDamage=20,l.critChance=7,l.hpKill=9,l.mp=30,l.rarity=4,l.proc="Effect: Hail Storm",l.req=67)),"War Axe"===s&&(l.name="Axe of the Phased Dragon",l.enhancedDamage=19,l.fear=12,l.thorns=33,l.haste=-200,l.expFind=12,l.allStats=13,l.leech=8,l.wraith=3,l.magicDamage=35,l.allSkills=4,l.enhancePhysical=9,l.req=66),"Kusanagi"===s&&(dS.random()>.32?(l.name="Artremian Blade",l.ias=.25,l.enhancedDamage=7,l.haste=-150,l.resistLightning=33,l.mpRegen=9,l.silence=25,l.str=15,l.dex=10,l.sta=5,l.hp=50,l.enhancePhysical=6,l.enhanceLightning=10,l.allSkills=1,l.lightningDamage=55,l.req=68,l.proc="Effect: Earthcall"):(l.name="Warder's Magmahew",l.damage=29,l.delay=2700,l.fireDamage=58,l.enhancePhysical=11,l.enhanceMagic=7,l.leech=7,l.stun=50,l.globalHaste=-150,l.castingHaste=-100,l.critChance=13,l.hp=40,l.mpKill=7,l.rarity=4,l.proc="Effect: Magma Eruption",l.req=62))),"crushed"===d&&("Mace"===s&&(l.name="Stone Crusher",l.enhancedDamage=15,l.mp=25,l.str=30,l.globalHaste=-100,l.castingHaste=-120,l.mpRegen=5,l.critDamage=14,l.critChance=9,l.enhancePhysical=5,l.enhanceMagic=6,l.resistLightning=14,l.physicalDamage=28,l.req=54),"Club"===s&&(l.name="Cane of Harmony",l.enhancedDamage=15,l.globalHaste=-130,l.str=15,l.dex=15,l.cha=24,l.intel=24,l.magMit=8,l.dodge=6,l.parry=5,l.lightRadius=21,l.critDamage=15,l.expFind=12,l.hpRegen=5,Rv(e,5),l.enhancePhysical=7,l.req=56),"Morning Star"===s&&(l.name="Water Sprinkler of Yentus",l.enhancedDamage=19,l.sta=10,l.cha=15,l.wis=25,l.mp=100,l.castingHaste=-150,l.haste=-70,l.mp=100,l.enhanceMagic=10,l.enhancePhysical=6,l.alteration=6,l.abjuration=6,l.lightRadius=15,l.magicDamage=25,l.expFind=20,l.flavorText="Redeem your soul in a codified lifestyle free from degeneracy.",l.req=58),"Spiked Club"===s&&(l.name="Singed Cudgel",l.enhancedDamage=17,l.mp=50,l.wis=24,l.leech=6,l.mpRegen=6,l.castingHaste=-90,l.globalHaste=-120,l.evocation=12,l.resistFire=30,l.fireDamage=30,l.allSkills=4,l.enhanceAll=5,l.enhancePhysical=5,l.req=60,l.proc="Effect: Blaze"),"Jagged Star"===s&&(l.name="Star of the Guardian",l.enhancedDamage=11,l.armor=25,l.phyMit=9,l.magMit=5,l.leech=7,l.thorns=15,l.wis=25,l.castingHaste=-70,l.skillHaste=-70,l.lightRadius=25,l.defense=5,l.abjuration=9,Rv(e,4),Nv(e,10,10,10,10),l.allResist=10,l.enhancePhysical=5,l.req=62,l.proc="Effect: Angel's Blessing"),"Scepter"===s&&(l.name="Ebony Mace",l.enhancedDamage=19,l.critChance=7,l.globalHaste=-150,l.castingHaste=-120,l.wraith=9,l.leech=9,l.alteration=4,l.absorbCold=8,l.conjuration=6,l.coldDamage=35,l.enhancePhysical=7,l.enhanceFire=6,l.enhanceMagic=6,l.req=64),"Cudgel"===s&&(l.name="Fists of Qiromir",l.ias=.35,l.armor=12,l.attack=12,l.enhancedDamage=7,l.str=20,l.dex=10,l.sta=10,l.hp=60,l.enhancePhysical=9,l.critChance=9,l.critChance=13,l.globalHaste=-200,l.leech=10,l.xPos=-384,l.yPos=-576,l.req=66,l.flavorText="Honor your ancestors with your actions.",l.proc="Effect: Celestial Tranquility"),"Caduceus"===s&&(l.name="Waking Nightmare",l.enhancedDamage=16,l.str=5,l.sta=10,l.cha=5,l.intel=20,l.hp=20,l.mp=80,l.haste=-90,l.castingHaste=-160,l.allSkills=4,l.enhancePoison=10,l.enhanceFire=7,l.enhanceMagic=7,Fv(e,15,10,15,5,5),l.req=68,l.flavorText="Conquer the naive among you with deception and lies. Infiltrate them and spread disease in their minds and actions.",l.proc="Effect: Torment of Shadows")),"pierced"===d&&("Dagger"===s&&(l.name="Dragon Claw Main Gauche",l.enhancedDamage=5,l.armor=15,l.hp=22,l.mp=35,l.mpKill=5,l.mpRegen=5,l.castingHaste=-150,l.haste=-70,l.evocation=6,l.silence=16,Fv(e,10,0,12,15,15),l.enhanceAll=5,l.enhancePhysical=5,l.req=54),"Dirk"===s&&(l.name="Bone Razor",l.ias=.2,l.enhancedDamage=7,l.hpKill=12,l.haste=-170,l.leech=13,l.critDamage=8,l.agi=30,l.enhancePoison=10,l.enhancePhysical=7,l.resistPoison=35,l.absorbPoison=6,l.poisonDamage=54,l.req=56),"Kris"===s&&(l.name="Razor Fang of Sartuz",l.ias=.11,l.enhancedDamage=8,l.hp=20,l.dex=20,l.leech=16,l.wraith=7,l.hpKill=9,l.mpKill=9,l.allSkills=3,l.enhanceMagic=10,l.enhancePhysical=6,l.magicDamage=30,l.req=58,l.proc="Effect: Blessing of Nature"),"Poignard"===s&&(l.name="Chromaspike",l.enhancedDamage=12,l.intel=25,l.castingHaste=-200,l.enhanceAll=6,l.allSkills=3,l.allResist=24,l.mpRegen=5,l.silence=30,l.mpKill=10,l.req=60),"Rondel"===s&&(l.name="Ragestriker",l.ias=.15,l.enhancedDamage=11,l.armor=9,l.attack=20,l.haste=-110,l.globalHaste=-120,l.str=20,l.dex=20,l.sta=10,l.agi=10,l.hp=60,l.leech=9,l.resistPoison=20,l.resistLightning=20,l.resistMagic=10,l.enhancePhysical=6,l.fireDamage=35,l.flavorText="Seeds of chaos are potent creators of opportunity.",l.req=62),"Spear"===s&&(l.name="Spear of the Ancients",l.enhancedDamage=10,l.str=10,l.dex=10,l.sta=10,l.wis=25,l.hp=30,l.mp=60,l.mpRegen=4,l.hpRegen=4,l.castingHaste=-160,l.enhanceCold=7,l.enhancePoison=7,l.allSkills=3,l.coldDamage=35,l.req=64,l.flavorText="Act as though your every action were designed by God himself. Addled Scholars are crippled by their doubt.",l.proc="Effect: Curse of the Spirits"),"Cinquedeas"===s&&(l.name="Orcish Croaking Dirk",l.enhancedDamage=12,l.armor=9,l.cha=15,l.agi=25,l.resistPoison=25,l.resistMagic=25,l.piercing=9,l.expFind=12,l.haste=-120,l.leech=7,l.magicDamage=28,l.enhancePhysical=7,l.cold=15,l.stun=15,l.req=66),"Stiletto"===s&&(dS.random()>.32?(l.name="Nightfall",l.enhancedDamage=11,l.str=28,l.dex=28,l.agi=15,l.leech=4,l.hp=25,l.offense=9,l.attack=15,l.critChance=9,l.critDamage=13,l.enhanceMagic=14,l.enhancePhysical=9,l.magicDamage=45,l.req=68,l.proc="Effect: Loathing Darkness"):(l.name="Warlock's Nemesis",l.damage=26,l.delay=2200,l.allResist=50,l.castingHaste=-250,l.magMit=21,l.phyMit=15,Rv(e,7),l.lightRadius=12,l.intel=75,l.enhancePoison=13,l.enhanceMagic=8,l.rarity=4,l.req=68))),"cleaved"===d&&("Giant Sword"===s&&(l.name="Kordata Battle Sword",l.enhancedDamage=16,l.expFind=12,l.allStats=18,l.leech=10,l.wraith=10,l.critChance=4,l.haste=-100,l.globalHaste=-200,l.enhancePhysical=7,l.expFind=7,l.offense=13,l.physicalDamage=65,l.req=54),"Giant Axe"===s&&(l.name="Wenerva's Axe of Slaughter",l.enhancedDamage=20,l.armor=25,l.hp=75,l.mp=40,l.haste=-200,l.globalHaste=-240,l.enhancePhysical=10,l.str=25,l.dex=25,l.sta=25,l.agi=25,l.leech=15,l.wraith=10,l.physicalDamage=72,l.req=56,l.proc="Effect: Shatter"),"Champion Sword"===s&&(l.name="Curse of Ghalentus",l.enhancedDamage=22,l.str=40,l.dex=30,l.intel=30,l.hp=50,l.mp=35,l.haste=-300,l.globalHaste=-150,l.castingHaste=-200,l.enhancePhysical=14,l.enhanceMagic=6,l.enhanceFire=6,l.leech=24,l.conjuration=14,Fv(e,15,45,15,30,30),l.poisonDamage=85,l.req=58,l.flavorText='"Death is a blessing upon the weak who lead wretched, ill-conceived lives." -Dragoon Zornin',l.proc="Effect: Soul Consumption"),"Bastard Sword"===s&&(l.name="Fiery Defender",l.enhancedDamage=22,l.str=40,l.sta=20,l.wis=30,l.hp=66,l.mp=25,l.haste=-150,l.globalHaste=-150,l.castingHaste=-300,l.enhancePhysical=12,l.enhanceMagic=14,l.wraith=20,l.alteration=10,l.abjuration=10,l.magicDamage=85,l.req=60,l.flavorText='"Rouse your comrades to battle when justice demands it." -Reklon Gnallen, Paladin Guildmaster',l.proc="Effect: Holy Shock"),"Gothic Axe"===s&&(dS.random()>.32?(l.name="Executioner's Blade",l.enhancedDamage=21,l.str=60,l.haste=-150,l.globalHaste=-250,l.enhancePhysical=14,l.critChance=13,l.critDamage=18,l.fear=20,l.parry=7,l.resistCold=100,l.resistPoison=60,l.twoHandSlash=13,l.physicalDamage=75,l.leech=16,l.req=62):(l.name="Grave Lord's Crescent",l.damage=89,l.delay=5900,l.coldDamage=101,l.attack=33,l.offense=15,l.absorbCold=17,l.enhancePhysical=12,l.fear=75,l.leech=16,l.wraith=25,l.critChance=15,l.haste=-250,l.rarity=4,l.req=67)),"Katana"===s&&(l.name="Serrated Blade of War",l.enhancedDamage=20,l.str=40,l.dex=30,l.sta=30,l.hp=90,l.haste=-200,l.globalHaste=-250,l.enhancePhysical=19,l.critChance=13,l.critDamage=18,l.defense=13,l.parry=13,l.riposte=13,l.twoHandSlash=13,l.physicalDamage=85,l.leech=15,l.req=64,l.flavorText='"There are no nations without men willing to bleed for them." -Manik Compolten',l.proc="Effect: Rage of Carthak"),"Colossus Sword"===s&&(l.name="Flamebelcher",l.enhancedDamage=21,l.str=40,l.sta=20,l.cold=50,l.haste=-150,l.globalHaste=-150,l.enhancePhysical=19,l.enhanceFire=13,l.critDamage=18,l.attack=25,l.parry=13,l.riposte=13,l.resistFire=120,l.absorbFire=25,l.fireDamage=222,l.leech=10,l.req=66,l.proc="Effect: Flame Nova"),"Mythical Sword"===s&&(l.name="The Grandfather",l.enhancedDamage=21,l.allStats=20,l.allSkills=6,l.haste=-250,l.globalHaste=-250,l.enhancePhysical=24,l.hp=80,l.attack=20,l.doubleAttack=24,l.lightRadius=30,l.resistLightning=75,l.resistPoison=75,l.physicalDamage=96,Nv(e,40,40,40,40),l.flavorText="A grandfather's illegible inscription is carved into the hilt.",l.req=68)),"staff"===d&&("Staff"===s&&(l.name="Arwen's Wisdom",l.enhancedDamage=11,l.intel=56,l.armor=115,l.magMit=8,l.defense=13,l.allSkills=4,l.castingHaste=-300,l.expFind=30,l.enhanceAll=10,l.req=54),"Runic Staff"===s&&(l.name="Prentian Apothic Staff",l.enhancedDamage=15,l.sta=25,l.wis=36,l.castingHaste=-200,l.critChance=3,l.alteration=14,l.resistMagic=50,l.resistPoison=75,l.enhanceMagic=12,l.fear=45,l.silence=30,l.req=56),"Cedar Staff"===s&&(l.name="Ornate Prism Staff",l.enhancedDamage=15,l.str=20,l.dex=10,l.sta=20,l.intel=50,l.mp=125,l.castingHaste=-330,l.mpRegen=13,l.alteration=15,l.enhanceMagic=15,l.enhanceFire=15,l.enhanceCold=15,l.enhanceLightning=10,l.critChance=13,l.silence=50,Fv(e,10,20,10,20,20),l.req=58,l.flavorText="The three elements and holy magic empower the Ornate Prism Staff.",l.proc="Effect: Barrier of Force"),"Quarterstaff"===s&&(l.name="Staff of Occult Rites",l.enhancedDamage=17,l.hp=50,l.mp=50,l.sta=25,l.wis=27,l.castingHaste=-150,l.critChance=15,l.hpKill=20,l.mpKill=30,l.hpRegen=12,l.allSkills=5,l.resistCold=77,l.resistMagic=55,l.enhanceCold=24,l.cold=75,l.silence=20,l.flavorText='"You cannot count on others to perform important tasks. If you want it done right, do it yourself." -Mate Basterson',l.req=60),"Cosmic Staff"===s&&(dS.random()>.32?(l.name="Staff of Sentoth",l.enhancedDamage=24,l.armor=35,l.str=10,l.sta=20,l.agi=25,l.cha=30,l.intel=40,l.hp=40,l.mp=60,l.castingHaste=-250,l.haste=-400,l.alteration=10,l.abjuration=7,l.enhanceMagic=24,l.silence=35,l.stun=35,l.req=63,l.flavorText="A slithering serpent quietly percolates your destruction.",l.proc="Effect: Speed of the Shissar"):(l.name="Arch Mage's Catastrophe",l.damage=102,l.delay=6e3,l.enhanceFire=15,l.enhanceCold=15,l.enhanceLightning=25,l.allSkills=10,l.allResist=30,l.mp=330,l.hp=136,l.mpKill=45,l.critChance=20,l.mpRegen=15,l.lightRadius=40,l.rarity=4,l.req=66)),"Archon Staff"===s&&(l.name="Hierophant's Crook",l.str=30,l.dex=30,l.wis=30,l.castingHaste=-300,l.allSkills=4,Rv(e,9),l.enhancePhysical=28,l.enhanceFire=13,l.enhanceCold=10,l.enhanceLightning=14,l.stun=60,l.silence=25,l.fireDamage=150,l.coldDamage=66,l.lightningDamage=255,l.goldFind=50,l.req=66,l.proc="Effect: Earthquake")),"smashed"===d&&("Giant Mace"===s&&(l.name="Blackstone Maul",l.enhancedDamage=16,l.str=30,l.wis=40,l.intel=30,l.castingHaste=-200,l.enhancePoison=10,l.enhanceCold=10,l.allSkills=4,l.resistLightning=44,l.resistCold=28,l.resistFire=120,l.mp=56,l.mpKill=7,l.physicalDamage=61,l.leech=10,l.req=54),"Auric Maul"===s&&(l.name="Shatterfrost",l.enhancedDamage=11,l.haste=-120,l.globalHaste=-150,l.castingHaste=-120,l.enhancePhysical=10,l.enhanceCold=18,l.critDamage=24,l.cold=45,l.evocation=12,l.resistCold=80,l.absorbCold=16,l.coldDamage=115,l.wraith=12,l.req=56,l.proc="Effect: Cone of Frost"),"Mallet"===s&&(l.name="Earth Shifter",l.enhancedDamage=20,l.hp=45,l.mp=45,l.allSkills=9,l.castingHaste=-120,l.enhanceLightning=9,l.enhanceCold=9,l.enhanceFire=9,l.hpRegen=8,l.mpRegen=5,l.absorbLightning=12,l.absorbFire=8,l.lightningDamage=173,l.req=58,l.proc="Effect: Fissure"),"Ogre Maul"===s&&(l.name="The Cranium Basher",l.enhancedDamage=11,l.str=50,l.sta=20,l.stun=30,l.haste=-250,l.globalHaste=-100,l.enhancePhysical=14,l.critChance=24,l.offense=10,l.riposte=18,l.twoHandBlunt=13,l.physicalDamage=85,l.leech=13,l.req=60,l.proc="Effect: Amplify Damage"),"Great Maul"===s&&(l.name="Granite Face Smasher",l.enhancedDamage=17,l.str=40,l.wis=40,l.intel=40,l.haste=-200,l.castingHaste=-250,l.enhanceAll=9,l.allSkills=5,Nv(e,15,15,15,15),Rv(e,6),l.poisonDamage=90,l.magicDamage=90,l.coldDamage=90,l.mpRegen=10,l.flavorText='"Ha, ha! Me never find weapon that smash as gud as this." -Gronk, Warrior Guildmaster.',l.req=62),"Sledgehammer"===s&&(l.name="Runestone Maul",l.enhancedDamage=19,l.allStats=24,l.enhanceAll=18,l.critChance=14,l.defense=15,l.dodge=12,l.alteration=10,l.abjuration=18,l.channeling=24,l.lightRadius=35,l.magicDamage=75,l.physicalDamage=311,l.req=64),"Umbral Hammer"===s&&(l.name="Blackstar Mace of Slagnon",l.enhancedDamage=22,l.str=30,l.sta=40,l.wis=40,l.hp=112,l.mp=100,l.castingHaste=-250,l.globalHaste=-150,l.enhancePhysical=15,l.enhanceMagic=15,l.critDamage=25,l.allSkills=6,l.resistPoison=90,l.magicDamage=85,l.leech=8,l.mpRegen=15,l.req=66,l.proc="Effect: Blessing of the Blackstar"),"Thunder Maul"===s&&(dS.random()>.5?(l.name="Hammer of the Dragonborn",l.enhancedDamage=23,l.allStats=28,l.allSkills=7,Nv(e,25,25,25,25),l.haste=-250,l.globalHaste=-250,l.castingHaste=-250,l.enhanceAll=10,l.critChance=18,Rv(e,9),l.physicalDamage=90,l.leech=15,l.mpRegen=9,l.req=68,l.proc="Effect: Primal Corruption"):(l.name="Hallowed Gavel of Pharmakos",l.damage=83,l.delay=5500,l.critChance=24,l.enhanceAll=8,l.enhancePhysical=16,l.str=45,l.sta=70,l.dex=33,l.expFind=20,l.allSkills=9,Nv(e,40,40,40,40),l.globalHaste=-180,l.haste=-300,l.magicDamage=172,l.absorbMagic=20,l.leech=15,l.mpRegen=9,l.req=68,l.proc="Effect: Kelpie Snare")))),"shield"===m&&("shield"===d&&("Buckler"===s&&(l.name="Blackoak Shield",l.enhancedArmor=80,l.hp=55,l.dex=50,l.lightningDamage=35,l.enhancePhysical=6,l.leech=12,l.stun=35,l.cold=50,l.resistLightning=55,l.resistCold=35,l.resistFire=35,l.absorbLightning=15,l.req=54),"Small Shield"===s&&(l.name="Spirit Ward",l.enhancedArmor=80,l.hp=35,l.mp=50,l.castingHaste=-90,l.phyMit=10,l.magMit=20,l.leech=9,l.wraith=12,l.stun=25,l.absorbCold=8,l.allResist=35,l.req=56),"Kite Shield"===s&&(l.name="Stormshield",l.enhancedArmor=85,l.defense=10,l.str=30,l.thorns=15,l.resistCold=60,l.resistLightning=25,l.phyMit=35,l.globalHaste=-70,l.stun=60,l.req=58),"Round Shield"===s&&(dS.random()>.5?(l.name="Gnoll Commander's Battle Shield",l.enhancedArmor=85,l.sta=15,l.str=15,l.hp=35,Fv(e,0,40,0,40,40),Rv(e,9),l.globalHaste=-100,l.haste=-50,l.leech=15,l.req=60):(l.name="March of Vithe",l.enhancedArmor=100,l.cha=45,l.dex=35,l.intel=25,l.allSkills=5,l.hp=70,Fv(e,25,75,30,60,45),l.enhanceAll=4,l.castingHaste=-90,l.haste=-90,l.leech=9,l.wraith=9,l.mpKill=12,l.proc="Effect: Ostinato",l.req=60)),"Gothic Shield"===s&&(l.name="Head Hunter's Pride",l.enhancedArmor=90,l.defense=6,l.resistFire=30,l.resistPoison=55,l.hpKill=30,l.fear=25,l.stun=25,l.leech=10,l.wraith=15,l.castingHaste=-120,l.globalHaste=-70,l.poisonDamage=24,l.req=62),"Crown Shield"===s&&(l.name="Bladestopper",l.enhancedArmor=90,l.hp=50,l.sta=30,l.phyMit=18,l.parry=9,l.riposte=9,l.allResist=28,l.absorbFire=15,l.fireDamage=40,l.stun=25,l.req=64),"Aegis"===s&&(dS.random()>.32?(l.name="Shield of Elders",l.enhancedArmor=95,l.allStats=24,l.allResists=28,l.lightRadius=25,l.allSkills=3,l.leech=15,l.mpRegen=8,l.stun=40,l.req=66):(l.name="Crusader's Aegis",l.enhancedArmor=120,l.hp=69,l.mp=56,l.allResist=32,Nv(e,50,50,50,50),l.thorns=30,l.leech=20,l.castingHaste=-120,l.phyMit=16,l.magMit=22,Rv(e,12),l.rarity=4,l.req=68)),"Monarch"===s&&(l.name="Shield of the Clawed Guardian",l.enhancedArmor=95,l.str=20,l.sta=20,l.wis=15,l.intel=15,l.hp=50,l.mp=50,l.castingHaste=-90,l.globalHaste=-90,l.haste=-90,l.leech=16,l.critChance=9,Fv(e,15,50,15,25,25),Nv(e,35,35,35,35),l.req=68)),"offhand"===d&&("Stein"===s&&(l.name="The Holy Grail",l.allResist=35,l.intel=55,l.wis=35,l.cha=40,l.stun=35,l.fear=24,l.mp=215,l.hp=125,l.allSkills=3,l.critChance=12,l.castingHaste=-180,l.enhanceMagic=15,l.enhanceLightning=9,l.enhancePoison=9,l.hpRegen=13,l.mpRegen=9,l.req=56),"Dark Orb"===s&&(dS.random()>.32?(l.name="Cone of the Mystics",l.wis=35,l.intel=35,l.mp=72,l.alteration=7,l.conjuration=10,l.channeling=13,l.mpKill=16,l.castingHaste=-130,l.enhanceCold=12,l.enhancePoison=7,l.mpRegen=7,l.req=56):(l.name="Virtuoso's Resonance",l.mp=155,l.hp=114,l.castingHaste=-150,l.critChance=10,l.critDamage=20,l.enhanceMagic=8,l.leech=20,l.wraith=20,l.magMit=35,l.stun=30,l.cha=68,l.rarity=4,l.req=62)),"Ancient Tome"===s&&(l.name="Book of Obulus",l.mp=77,l.hp=37,l.intel=40,l.wis=40,l.fear=35,l.castingHaste=-150,l.conjuration=13,l.enhanceMagic=7,l.enhancePoison=12,l.resistFire=25,l.resistMagic=25,l.mpRegen=6,l.hpRegen=6,l.req=58),"Totem"===s&&(dS.random()>.32?(l.name="Death's Fathom",l.mp=90,l.mpKill=15,l.silence=20,l.enhanceCold=13,l.enhanceLightning=18,l.castingHaste=-100,l.allSkills=3,l.resistFire=35,l.yPos=-576,l.req=60):(l.name="Hierophant's Cloudburst",l.mp=200,l.enhanceCold=12,l.enhanceLightning=8,l.castingHaste=-180,l.hp=55,l.mpRegen=12,l.hpRegen=5,l.evocation=12,l.alteration=7,l.lightRadius=15,l.wis=44,Fv(e,15,15,52,99,0),l.rarity=4,l.req=65)),"Crystal Ball"===s&&(dS.random()>.32?(l.name="Silver Disk",l.armor=20,l.dex=50,l.sta=40,l.agi=20,l.hp=50,l.resistMagic=30,l.mp=35,l.defense=7,l.mpRegen=13,l.hpRegen=7,l.mpKill=12,l.castingHaste=-200,l.req=62):(l.name="Phantasmist's Kismet",l.castingHaste=-200,l.hp=210,l.thorns=35,l.critChance=10,l.resistMagic=120,l.enhanceMagic=12,l.magMit=15,l.allSkills=3,l.silence=100,l.stun=40,l.cha=90,l.rarity=4,l.req=66)),"Skull"===s&&(dS.random()>.32?(l.name="Fatesealer",l.str=25,l.dex=25,l.wis=50,l.intel=50,l.hp=75,l.mp=75,l.evocation=14,l.castingHaste=-120,l.critChance=10,l.critDamage=12,l.yPos=-576,l.req=64):(l.name="Oracle's Fetish",l.mp=155,l.castingHaste=-170,l.hpRegen=10,l.mpRegen=15,l.expFind=15,l.lightRadius=22,l.allResist=55,l.conjuration=10,l.abjuration=15,l.enhancePoison=10,l.silence=33,l.rarity=4,l.req=62)),"Emblazoned Orb"===s&&(dS.random()>.32?(l.name="Orb of the Dark Magus",l.mp=100,l.str=25,l.dex=15,l.sta=20,l.intel=40,l.castingHaste=-150,l.mpKill=11,l.mpRegen=8,l.enhanceFire=14,l.enhanceLightning=9,l.enhanceCold=10,l.critChance=5,l.evocation=9,l.conjuration=12,l.resistFire=50,l.resistCold=50,l.resistMagic=50,l.flavorText="The key to elemental mastery lies in knowledge of oneself.",l.req=66):(l.name="Sorcerer's Pleiades",l.castingHaste=-120,l.enhanceAll=6,Nv(e,30,30,30,30),l.allSkills=6,l.expFind=10,l.lightRadius=15,l.magMit=30,l.mpRegen=12,l.resistLightning=99,l.resistMagic=53,l.intel=77,l.hp=55,l.rarity=4,l.req=68)),"Idol"===s&&(l.name="Clastocaust's Temper",l.allStats=18,l.enhanceAll=10,l.allSkills=5,l.allResist=19,l.silence=33,l.critChance=10,Rv(e,6),l.yPos=-576,l.req=68))),"range"===d&&("Short Bow"===s&&(l.name="Eaglecaller",l.enhancedDamage=13,l.hp=24,l.resistLightning=20,l.parry=5,l.evocation=3,l.dex=25,l.allSkills=1,l.physicalDamage=20,l.enhancePhysical=2,l.req=54),"Hunter's Bow"===s&&(l.name="Hail of Death",l.enhancedDamage=16,l.critDamage=7,l.haste=-40,l.hpKill=8,l.offense=4,l.resistPoison=35,l.poisonDamage=35,l.enhanceCold=2,l.req=56),"Composite Bow"===s&&(l.name="Widowmaker",l.enhancedDamage=15,l.evocation=5,l.critChance=3,l.oneHandSlash=6,l.fear=15,l.absorbPoison=5,l.fireDamage=20,l.enhanceFire=2,l.req=58),"Siege Bow"===s&&(l.name="Treant Bow",l.enhancedDamage=17,l.hpRegen=2,l.wis=12,l.sta=20,l.alteration=5,l.evocation=5,l.enhanceLightning=3,l.lightningDamage=30,l.req=60),"Astral Bow"===s&&(l.name="Demoncaller's Wrath",l.enhancedDamage=16,l.mp=25,l.conjuration=5,l.magMit=5,l.channeling=7,l.enhancePoison=2,l.enhanceMagic=2,l.req=62),"Gothic Bow"===s&&(l.name="Wind Saber",l.enhancedDamage=15,l.dex=15,l.wis=15,l.agi=15,l.enhancePhysical=2,l.resistCold=24,l.absorbLightning=3,l.req=64),"Ward Bow"===s&&(dS.random()>.32?(l.name="Bow of the Destroyer",l.enhancedDamage=11,l.mp=50,l.str=15,l.dex=15,l.agi=15,l.allResist=13,l.req=66):(l.name="Warder's Tempest",l.damage=81,l.delay=5500,l.attack=16,l.resistLightning=58,l.riposte=7,l.evocation=13,l.enhanceMagic=7,l.enhanceFire=11,l.dex=29,l.silence=33,l.chill=20,Rv(e,7),l.rarity=4,l.req=62)),"Hydra Bow"===s&&(l.name="Windforce",l.enhancedDamage=20,l.str=20,l.dex=10,l.enhanceAll=3,l.enhancePhysical=3,l.haste=-50,l.wraith=6,l.flavorText="The mountains trembled and the heavens let loose the hail of death.",l.req=68)),"trinket"===d){if("Trinket"===s){var g=dS.random();g>.67?(l.name="Left Eye of Kurnst",l.wis=15,l.intel=15,l.mp=50,l.castingHaste=-50,l.resistMagic=25,l.resistPoison=15,l.mpRegen=3,l.enhanceMagic=2,l.req=54):g>.33?(l.name="Oracle's Presage",l.mpRegen=5,l.hpRegen=5,l.defense=5,l.allSkills=1,l.hp=45,l.lightRadius=15,l.expFind=12,l.enhanceCold=6,l.allResist=10,Nv(e,23,23,23,23),l.rarity=4,l.req=62):(l.name="Arch Mage's Mojo",l.mpRegen=5,l.hpRegen=5,l.enhanceAll=3,Rv(e,3),l.allSkills=5,l.allStats=10,l.allResist=10,Nv(e,15,15,15,15),l.rarity=4,l.req=65)}"Memento"===s&&(dS.random()>.32?(l.name="Pulsating Gem",l.armor=7,l.allStats=10,l.allSkills=2,l.globalHaste=-50,l.cold=10,l.fireDamage=9,l.offense=3,l.enhancePhysical=2,l.req=58):(l.name="Virtuoso's Fanfare",l.enhancedArmor=120,l.hp=90,l.lightRadius=22,l.expFind=12,l.runSpeed=20,l.fear=20,l.stun=35,l.mpKill=8,l.hpKill=12,Rv(e,6),l.rarity=4,l.req=64)),"Charm"===s&&(dS.random()>.32?(l.name="Blue Resistance Stone",l.armor=10,l.hp=20,l.allStats=7,Fv(e,5,5,10,35,15),Rv(e,4),Nv(e,9,9,9,9),l.enhanceCold=3,l.req=62):(l.name="Grandmaster's Comity",l.leech=15,l.allResist=13,l.allSkills=5,l.phyMit=9,l.magMit=12,l.str=35,l.agi=55,l.lightRadius=33,l.expFind=12,l.enhancePhysical=8,l.thorns=8,l.rarity=4,l.req=68))}}}function Xv(e){var a=0,n=0;return e>0&&(n=e)>5&&(n=5),a+=4*n,n=0,e>5&&(n=e-5)>5&&(n=5),a+=3*n,n=0,e>10&&(n=e-10)>5&&(n=5),a+=2*n,n=0,e>15&&(n=e-15),(a+=n)>100&&(a=100),a}function Vv(a,n,t,i,o){function r(){for(var e=0,a=zy.key.length;e<a;e++)bS.item[M][zy.key[e]]=zy.val[e]}function l(e){var a=0;return"Normal"===e?a=1:"Exceptional"===e?a=2:"All"===e&&(a=3),a}var s=jv(Wy[a].level);n&&(s=n);var d=zv(a),c=(E=Yv(0,s,d))[0],m=E[1],u=E[2],f=E[3],h=E[4],g=E[5],p=E[6],b=E[7];if("shield"===n)if("Necromancer"===Yy.job||"Enchanter"===Yy.job||"Magician"===Yy.job||"Wizard"===Yy.job){if("offhand"!==p)return void Vv(a,n,t,i)}else if("shield"!==p)return void Vv(a,n,t,i);if("range"!==n||"trinket"===p)if(o&&p!==o)Vv(a,n,t,i,o);else if(t&&p!==t)Vv(a,n,t,i);else{var v=0,y=0;if(2===Wy[a].rare&&(y=25),0===Wy[a].rare&&(y=70),3===Wy[a].rare){P=zy.difficulty-1;if(y=200,3===Wy[a].rare){var k=qn();"Lanfeld Outpost"===k&&3===bS.Q[P].Crushbone&&(y=700),"Arcturin's Crypt"===k&&3===bS.Q[P].EstateofUnrest&&(y=700),"Temple of Prenssor"===k&&3===bS.Q[P].CazicThule&&(y=700),"Ashenflow Peak"===k&&4===bS.Q[P].NagafensLair&&(y=700),"Galeblast Fortress"===k&&4===bS.Q[P].PermafrostKeep&&(y=700),"Viston's Redoubt"===k&&4===bS.Q[P].KedgeKeep&&(y=700),"Nimgaul"===k&&1===bS.Q[P].PlaneofFear&&(y=700),"Dire Sanctum"===k&&1===bS.Q[P].PlaneofHate&&(y=700)}}var S=function(e){var a=0,n=0;return e<=20?a=e:e>20&&e<=40?(a=20,n=e-20,a+=n*=.8):e>40&&e<=60?(a=36,n=e-40,a+=n*=.6):e>60&&e<=80?(a=48,n=e-60,a+=n*=.4):e>80&&(a=56,n=e-80,a+=n*=.2),a>100&&(a=100),a}(zy.lightRadiusEquip);"Halfling"===Yy.race&&(S+=10);var I=0,w=Ab();w>1&&(I=10,3===w?I=25:4===w?I=50:5===w&&(I=80)),3===Wy[a].rare&&(I=0),y+=S+I;var C=bH;if(100*dS.random()<3+y/10+Xv(C)/9?v=3:100*dS.random()<12+y/2+Xv(C)/4?v=2:100*dS.random()<75+y+Xv(C)&&(v=1),0===Wy[a].rare&&((v+=1)<2&&(v=2),v>3&&(v=3)),"ring"===s||"neck"===s||"offhand"===p||"trinket"===p)if(1===v||2===v)b=0;else if(0===v)return void Vv(a,n,t,i);if(i&&(v=i),"helmet"===s&&3===v&&Wy[a]<20)Vv(a,n,t,i,o);else{var M=Kv();if(!1!==M){if(r(),bS.item[M].rarity=v,bS.item[M].itemSlot=s,bS.item[M].xPos=m,bS.item[M].yPos=u,bS.item[M].name=f,bS.item[M].armor=c,bS.item[M].damage=h,bS.item[M].delay=g,bS.item[M].type=p,bS.item[M].quality=b,3===v)Ov(M,s,d,p,f,0,b);else if(2===v){var T=0,B=0;sa()>0&&(T=1),sa()>1&&(B=2);var D=~~(1+3*dS.random()+T),L=~~(1+3*dS.random()+B);D+L<4&&(D=2,L=2);for(H=1;H<=D;H++)$v(M,s,p,a,f);for(var H=1;H<=L;H++)Uv(M,s,p,a,f);bS.item[M].name=Wv(s,p,f)}else 1===v&&(dS.random()<=.5?($v(M,s,p,a,f),dS.random()>.5&&Uv(M,s,p,a,f)):(Uv(M,s,p,a,f),dS.random()<=.5&&$v(M,s,p,a,f)));4===bS.item[M].rarity&&(v=4);var A=!1;if(0===v){(x=l(Lmy.normalFilter))>b&&(A=!0)}else if(1===v){(x=l(Lmy.magicFilter))>b&&(A=!0)}else if(2===v){(x=l(Lmy.rareFilter))>b&&(A=!0)}else if(3===v){(x=l(Lmy.uniqueFilter))>b&&(A=!0)}else if(4===v){var x=l(Lmy.setFilter);x>b&&(A=!0)}if(!0===A)return 0===b&&fa("You discarded an item: "+qy(f,v)),1===b&&fa("You discarded an <span class='exceptionalItem'>Exceptional </span>item: "+qy(f,v)),2===b&&fa("You discarded an <span class='eliteItem'>Elite </span>item: "+qy(f,v)),void r();"ring"!==s&&"neck"!==s&&"offhand"!==p&&"trinket"!==p||bS.item[M].rarity<3&&(bS.item[M].quality=0),bS.item[M].enhancedDamage&&(bS.item[M].damage+=bS.item[M].enhancedDamage),bS.item[M].enhancedArmor&&(bS.item[M].armor=bS.item[M].armor+dS.round(bS.item[M].armor*(bS.item[M].enhancedArmor/100))),bS.item[M].ias&&(bS.item[M].delay=bS.item[M].delay*(1-bS.item[M].ias),bS.item[M].delay=dS.round(bS.item[M].delay/100),bS.item[M].delay*=100,bS.item[M].ias=dS.round(100*bS.item[M].ias));var E=qy(bS.item[M].name,bS.item[M].rarity),G=" an ",q=" a ";if(1===b){G=" an "+(P="<span class='exceptionalItem'>Exceptional </span>"),q=" an "+P}if(2===b){var P;G=" an "+(P="<span class='eliteItem'>Elite </span>"),q=" a "+P}var Q="You found "+G+"item: "+E;1===v?(Q="You found"+q+"magic item: "+E,Yy.magicFound+=1):2===v?(Q="You found"+q+"rare item: "+E,Yy.raresFound+=1):3===v?(Q="You found"+q+"unique item: "+E,Yy.uniquesFound+=1):4===v&&(Q="You found"+q+"set item: "+E,Yy.setFound+=1),fa(Q),v>=3&&(zy.lastDrop=bS.item[M].name,NS||e.ajax({data:{run:"addLoot",itemName:bS.item[M].name,rarity:bS.item[M].rarity,name:Yy.name}}));var R=_i(Gw[a].offsetLeft+Wy[a].imageWidth/2-32+100*dS.random()-50,Gw[a].offsetTop+Wy[a].imageHeight/2-32+100*dS.random()-50,64,64);R.style.background="url('"+jS+"') "+bS.item[M].xPos+"px "+bS.item[M].yPos+"px",NG.eWin.appendChild(R);var F=200,N=~~dS.random()*F,j=F-=N;dS.random()>.5&&(N*=-1),dS.random()>.5&&(j*=-1),cS.set(R,{scale:0}),cS.to(R,1,{left:"+="+N,top:"+="+j,scale:1,ease:pS.Bout}),cS.to(R,1,{rotation:720}),cS.to(R,2,{delay:1,top:-14,left:1066,scale:.625,ease:pS.qout,onComplete:function(){Ki(this)}}),n&&Nn("Quest Reward: "),function(){"On"===kw.hideMenu&&cS.to(mS.getElementById("window5Id"),0,{startAt:{opacity:1},delay:8,opacity:0});cS.to(mS.getElementById("itemNotify"),.5,{startAt:{opacity:1},opacity:.5,ease:pS.lin,repeat:-1,yoyo:!0})}(),"On"===kw.hideMenu&&cS.to(mS.getElementById("window5Id"),.5,{startAt:{opacity:1},delay:6,opacity:0}),Ba(),Cy(M),gS.item(M)}else xy("There is no room in your inventory to collect new items.")}}else Vv(a,n,t,i,o)}function _v(){ow=!0,"On"===kw.hideMenu&&cS.to(mS.getElementById("window5Id"),0,{startAt:{opacity:1},delay:8,opacity:0});var e=mS.getElementById("talentNotify");cS.set(e,{opacity:1})}function $v(e,a,n,t,i){var o=~~(1+39*dS.random());1===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.attack||"offhand"===n)return void $v(e,a,n,t,i);var r=6*dS.random()+4;"ring"!==a&&"shoulders"!==a&&"back"!==a&&"bracers"!==a&&"gloves"!==a&&"boots"!==a||(r=3*dS.random()+2);"smashed"!==n&&"staff"!==n&&"cleaved"!==n||(r=12*dS.random()+8);r=Jv(r,t),o.name="Platinum "+o.name,o.attack=r}(e,a,n,t,i),2===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.physicalDamage||o.poisonDamage||o.magicDamage||o.lightningDamage||o.coldDamage||o.fireDamage||"weapons"!==a)return void $v(e,a,n,t,i);var r=11*dS.random()+12;"smashed"!==n&&"staff"!==n&&"cleaved"!==n||(r=36*dS.random()+24);r=Jv(r,t),o.name="Deadly "+o.name,o.physicalDamage=r}(e,a,n,t,i),3===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.physicalDamage||o.poisonDamage||o.magicDamage||o.lightningDamage||o.coldDamage||o.fireDamage||"weapons"!==a)return void $v(e,a,n,t,i);var r=11*dS.random()+12;"smashed"!==n&&"staff"!==n&&"cleaved"!==n||(r=54*dS.random()+36);r=Jv(r,t),o.name="Toxic "+o.name,o.poisonDamage=r}(e,a,n,t,i),4===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.physicalDamage||o.poisonDamage||o.magicDamage||o.lightningDamage||o.coldDamage||o.fireDamage||"weapons"!==a)return void $v(e,a,n,t,i);var r=11*dS.random()+12;"smashed"!==n&&"staff"!==n&&"cleaved"!==n||(r=54*dS.random()+36);r=Jv(r,t),o.name="Sacred "+o.name,o.magicDamage=r}(e,a,n,t,i),5===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.physicalDamage||o.poisonDamage||o.magicDamage||o.lightningDamage||o.coldDamage||o.fireDamage||"weapons"!==a)return void $v(e,a,n,t,i);var r=11*dS.random()+12;"smashed"!==n&&"staff"!==n&&"cleaved"!==n||(r=54*dS.random()+36);r=Jv(r,t),o.name="Shocking "+o.name,o.lightningDamage=r}(e,a,n,t,i),6===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.physicalDamage||o.poisonDamage||o.magicDamage||o.lightningDamage||o.coldDamage||o.fireDamage||"weapons"!==a)return void $v(e,a,n,t,i);var r=11*dS.random()+12;"smashed"!==n&&"staff"!==n&&"cleaved"!==n||(r=54*dS.random()+36);r=Jv(r,t),o.name="Boreal "+o.name,o.coldDamage=r}(e,a,n,t,i),7===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.physicalDamage||o.poisonDamage||o.magicDamage||o.lightningDamage||o.coldDamage||o.fireDamage||"weapons"!==a)return void $v(e,a,n,t,i);var r=11*dS.random()+12;"smashed"!==n&&"staff"!==n&&"cleaved"!==n||(r=54*dS.random()+36);r=Jv(r,t),o.name="Flaming "+o.name,o.fireDamage=r}(e,a,n,t,i),8===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.enhancedDamage||"weapons"!==a&&"range"!==n||(r=!0);"staff"===n&&(r=!1);if(!1===r)return void $v(e,a,n,t,i);var l=Wy[t].level,s=~~(1+dS.random()*(l/33));"smashed"!==n&&"staff"!==n&&"cleaved"!==n&&"range"!==n||(s=~~(1+dS.random()*(l/16.5)));o.enhancedDamage=s,o.name="Savage "+o.name,o.damage+=s}(e,a,n,t,i),9===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.enhancePhysical||"slashed"!==n&&"crushed"!==n&&"piercing"!==n&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n||(r=!0);"staff"===n&&(r=!1);if(!1===r)return void $v(e,a,n,t,i);var l=11*dS.random()+12;(l=Jv(l,t))<5&&(l=5);o.name="King's "+o.name,o.enhancePhysical=l}(e,a,n,t,i),10===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.mp)return void $v(e,a,n,t,i);var r=30*dS.random()+20;"offhand"===n&&(r=60*dS.random()+40);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=36*dS.random()+24);r=Jv(r,t),o.name="Dragon's "+o.name,o.mp=r}(e,a,n,t,i),11===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.lightRadius)return void $v(e,a,n,t,i);var r=~~(1+10*dS.random());r<2&&(r=2);o.name="Lucky "+o.name,o.lightRadius=r}(e,a,n,t,i),12===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.resistPoison||o.allResist)return void $v(e,a,n,t,i);var r=12*dS.random()+8;"neck"!==a&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n&&"offhand"!==n||(r=24*dS.random()+16);r=Jv(r,t),o.name="Emerald "+o.name,o.resistPoison=r}(e,a,n,t,i),13===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.resistMagic||o.allResist)return void $v(e,a,n,t,i);var r=12*dS.random()+8;"neck"!==a&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n&&"offhand"!==n||(r=24*dS.random()+16);r=Jv(r,t),o.name="Divine "+o.name,o.resistMagic=r}(e,a,n,t,i),14===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.resistLightning||o.allResist)return void $v(e,a,n,t,i);var r=12*dS.random()+8;"neck"!==a&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n&&"offhand"!==n||(r=24*dS.random()+16);r=Jv(r,t),o.name="Ocher "+o.name,o.resistLightning=r}(e,a,n,t,i),15===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.resistCold||o.allResist)return void $v(e,a,n,t,i);var r=12*dS.random()+8;"neck"!==a&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n&&"offhand"!==n||(r=24*dS.random()+16);r=Jv(r,t),o.name="Sapphire "+o.name,o.resistCold=r}(e,a,n,t,i),16===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.resistFire||o.allResist)return void $v(e,a,n,t,i);var r=12*dS.random()+8;"neck"!==a&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n&&"offhand"!==n||(r=24*dS.random()+16);r=Jv(r,t),o.name="Ruby "+o.name,o.resistFire=r}(e,a,n,t,i),17===o&&function(e,a,n,t,i){var o=bS.item[e],r=Wy[t].level;if(o.resistPoison||o.resistMagic||o.resistLightning||o.resistCold||o.resistFire||o.allResist||r<24)return void $v(e,a,n,t,i);var l=9*dS.random()+6;"neck"!==a&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n&&"offhand"!==n||(l=11*dS.random()+12);l=Jv(l,t),o.name="Chromatic "+o.name,o.allResist=l}(e,a,n,t,i),18===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.oneHandSlash||"offhand"===n||"crushed"===n||"pierced"===n||"cleaved"===n||"smashed"===n||"staff"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Soldier's "+o.name,o.oneHandSlash=l,itemHasSkill=!0}(e,a,n,t,i),19===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.twoHandSlash||"shield"===n||"offhand"===n||"crushed"===n||"pierced"===n||"slashed"===n||"smashed"===n||"staff"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Knight's "+o.name,o.twoHandSlash=l}(e,a,n,t,i),20===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.oneHandBlunt||"offhand"===n||"slashed"===n||"pierced"===n||"cleaved"===n||"smashed"===n||"staff"===n||"shield"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Keeper's "+o.name,o.oneHandBlunt=l}(e,a,n,t,i),21===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.twoHandBlunt||"shield"===n||"offhand"===n||"crushed"===n||"pierced"===n||"cleaved"===n||"slashed"===n||"shield"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Warden's "+o.name,o.twoHandBlunt=l}(e,a,n,t,i),22===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.piercing||"offhand"===n||"crushed"===n||"slashed"===n||"cleaved"===n||"smashed"===n||"staff"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Assassin's "+o.name,o.piercing=l}(e,a,n,t,i),23===o&&function(e,a,n,t,i){var o=bS.item[e],r=n,l=a;if(o.handtohand||"offhand"===r||"range"===r||"cleaved"===r||"slashed"===r||"pierced"===r||"smashed"===r||"staff"===r)return void $v(e,a,n,t,i);var s=Wy[t].level,d=~~(1+dS.random()*(s/24.75));"helmet"!==l&&"neck"!==l&&"chest"!==l&&"legs"!==l&&"shield"!==l&&"offhand"!==l||(d=~~(1+dS.random()*(s/16.5)));o.name="Pugilist's "+o.name,o.handtohand=d}(e,a,n,t,i),24===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.offense||"offhand"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Master's "+o.name,o.offense=l}(e,a,n,t,i),25===o&&function(e,a,n,t,i){var o=bS.item[e],r=Wy[t].level;if(o.dualWield||"offhand"===n||"shield"===n||"cleaved"===n||"smashed"===n||"staff"===n||r<12)return void $v(e,a,n,t,i);var l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));o.name="Hunter's "+o.name,o.dualWield=l}(e,a,n,t,i),26===o&&function(e,a,n,t,i){var o=bS.item[e],r=Wy[t].level;if(o.doubleAttack||"offhand"===n||r<15)return void $v(e,a,n,t,i);var l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Slayer's "+o.name,o.doubleAttack=l}(e,a,n,t,i),27===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.defense)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Guardian's "+o.name,o.defense=l}(e,a,n,t,i),28===o&&function(e,a,n,t,i){var o=bS.item[e],r=Wy[t].level;if(o.dodge||r<4)return void $v(e,a,n,t,i);var l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Acrobat's "+o.name,o.dodge=l}(e,a,n,t,i),29===o&&function(e,a,n,t,i){var o=bS.item[e],r=Wy[t].level;if(o.parry||"offhand"===n||r<10)return void $v(e,a,n,t,i);var l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Athletic "+o.name,o.parry=l}(e,a,n,t,i),30===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.riposte||"offhand"===n||r<28)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Fencer's "+o.name,o.riposte=l}(e,a,n,t,i),31===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.alteration||"shield"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Spiritual "+o.name,o.alteration=l}(e,a,n,t,i),32===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.evocation||"shield"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Evoker's "+o.name,o.evocation=l}(e,a,n,t,i),33===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.conjuration||"shield"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Summoner's "+o.name,o.conjuration=l}(e,a,n,t,i),34===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.abjuration||"shield"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Caretaker's "+o.name,o.abjuration=l}(e,a,n,t,i),35===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.channeling||"shield"===n)return void $v(e,a,n,t,i);var r=Wy[t].level,l=~~(1+dS.random()*(r/24.75));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=~~(1+dS.random()*(r/16.5)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/12.375)));o.name="Focused "+o.name,o.channeling=l}(e,a,n,t,i),36===o&&function(e,a,n,t,i){var o=bS.item[e],r=Wy[t].level;if(o.allSkills||r<24)return void $v(e,a,n,t,i);var l=~~(1+dS.random()*(r/49.5));"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a||(l=~~(1+dS.random()*(r/33)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=~~(1+dS.random()*(r/24.75)));o.name="Empyrean "+o.name,o.allSkills=l}(e,a,n,t,i),37===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.hpKill)return void $v(e,a,n,t,i);var r=6*dS.random()+4;"neck"!==a&&"chest"!==a&&"legs"!==a&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n||(r=12*dS.random()+8);r=Jv(r,t),o.name="Triumphant "+o.name,o.hpKill=r}(e,a,n,t,i),38===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.mpKill)return void $v(e,a,n,t,i);var r=3*dS.random()+2;"neck"!==a&&"chest"!==a&&"legs"!==a&&"cleaved"!==n&&"smashed"!==n&&"staff"!==n&&"shield"!==n||(r=6*dS.random()+4);"offhand"===n&&(r=24*dS.random()+16);r=Jv(r,t),o.name="Vulpine "+o.name,o.mpKill=r}(e,a,n,t,i),39===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.enhancedArmor||"helmet"!==a&&"cloth"!==n&&"leather"!==n&&"chain"!==n&&"plate"!==n||(r=!0);if(!1===r)return void $v(e,a,n,t,i);var l=60*dS.random()+40;(l=Jv(l,t))<5&&(l=5);l>100&&(l=100);o.enhancedArmor=l,o.name="Godly "+o.name}(e,a,n,t,i)}function Uv(e,a,n,t,i){var o=~~(1+30*dS.random());1===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.str)return void Uv(e,a,n,t,i);var r=12*dS.random()+8;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(r=11*dS.random()+12);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=24*dS.random()+16);r=Jv(r,t),o.name+=" of the Titans",o.str=r}(e,a,n,t,i),2===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.sta)return void Uv(e,a,n,t,i);var r=12*dS.random()+8;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(r=11*dS.random()+12);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=24*dS.random()+16);r=Jv(r,t),o.name+=" of the Colossus",o.sta=r}(e,a,n,t,i),3===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.agi)return void Uv(e,a,n,t,i);var r=12*dS.random()+8;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(r=11*dS.random()+12);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=24*dS.random()+16);r=Jv(r,t),o.name+=" of Deflection",o.agi=r}(e,a,n,t,i),4===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.dex)return void Uv(e,a,n,t,i);var r=12*dS.random()+8;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n||(r=11*dS.random()+12);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=24*dS.random()+16);"offhand"===n&&(r=36*dS.random()+24);r=Jv(r,t),o.name+=" of Perfection",o.dex=r}(e,a,n,t,i),5===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.intel)return void Uv(e,a,n,t,i);var r=12*dS.random()+8;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n||(r=11*dS.random()+12);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=24*dS.random()+16);"offhand"===n&&(r=36*dS.random()+24);r=Jv(r,t),o.name+=" of Sorcery",o.intel=r}(e,a,n,t,i),6===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.wis)return void Uv(e,a,n,t,i);var r=12*dS.random()+8;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n||(r=11*dS.random()+12);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=24*dS.random()+16);"offhand"===n&&(r=36*dS.random()+24);r=Jv(r,t),o.name+=" of Preservation",o.wis=r}(e,a,n,t,i),7===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.cha)return void Uv(e,a,n,t,i);var r=12*dS.random()+8;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n||(r=11*dS.random()+12);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=24*dS.random()+16);"offhand"===n&&(r=36*dS.random()+24);r=Jv(r,t),o.name+=" of Grace",o.cha=r}(e,a,n,t,i),8===o&&function(e,a,n,t,i){var o=bS.item[e],r=Wy[t].level;if(o.allStats||r<24)return void Uv(e,a,n,t,i);var l=6*dS.random()+4;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(l=9*dS.random()+6);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=12*dS.random()+8);l=Jv(l,t),o.name+=" of the Angels",o.allStats=l}(e,a,n,t,i),9===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.hp)return void Uv(e,a,n,t,i);var r=11*dS.random()+12;"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(r=30*dS.random()+20);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(r=36*dS.random()+24);r=Jv(r,t),o.name+=" of the Whale",o.hp=r}(e,a,n,t,i),10===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.hpRegen||"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=~~(1+dS.random()*(l/16.5));o.name+=" of Regrowth",o.hpRegen=s}(e,a,n,t,i),11===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.mpRegen||"helmet"!==a&&"neck"!==a&&"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=~~(1+dS.random()*(l/16.5));o.name+=" of the Wraith",o.mpRegen=s}(e,a,n,t,i),12===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.critChance||"range"===a||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=~~(1+dS.random()*(l/24.75));"neck"!==a&&"chest"!==a&&"legs"!==a||(s=~~(1+dS.random()*(l/16.5)));"slashed"!==n&&"crushed"!==n&&"pierced"!==n&&"shield"!==n&&"offhand"!==n||(s=~~(1+dS.random()*(l/12.375)));"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(s=~~(1+dS.random()*(l/6.1175)));o.name+=" of Slaughter",o.critChance=s}(e,a,n,t,i),13===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.critDamage||"range"===a||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=dS.round(6*dS.random()+4);"cleaved"!==n&&"smashed"!==n&&"staff"!==n||(l=dS.round(12*dS.random()+8));o.name+=" of Maiming",o.critDamage=l}(e,a,n,t,i),14===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;"weapons"!==a&&"shield"!==n&&"ring"!==a&&"neck"!==a&&"gloves"!==a||(r=!0);o.wraith&&(r=!1);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level;(s=dS.round(dS.random()*(l/11.25)))>8&&(s=8);if("offhand"===n||"shield"===n||"cleaved"===n||"smashed"===n||"staff"===n){var s=dS.round(dS.random()*(l/5.9375));s>16&&(s=16)}s<2&&(s=2);o.name+=" of the Wraith",o.wraith=s}(e,a,n,t,i),15===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.phyMit||"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=10*dS.random()+6;l=Jv(l,t),o.name+=" of Protection",o.phyMit=l}(e,a,n,t,i),16===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.magMit||"chest"!==a&&"legs"!==a&&"shield"!==n&&"offhand"!==n||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=10*dS.random()+6;l=Jv(l,t),o.name+=" of Negation",o.magMit=l}(e,a,n,t,i),17===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.goldFind||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=dS.round(dS.random()*(l/4.95));s<3&&(s=3);o.name+=" of Wealth",o.goldFind=s}(e,a,n,t,i),18===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.expFind||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=dS.round(dS.random()*(l/9.9));s<2&&(s=2);o.name+=" of the Scholar",o.expFind=s}(e,a,n,t,i),19===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.haste||"gloves"!==a&&"amulet"!==a&&"shield"!==n||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=-1*~~(1+dS.random()*(l/.99));"shield"===n&&(s=-1*~~(1+dS.random()*(l/.61175)));s/=10,s=dS.round(s),(s*=10)>-20&&(s=-20);o.name+=" of Alacrity",o.haste=s}(e,a,n,t,i),20===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.globalHaste||"legs"!==a&&"amulet"!==a&&"shield"!==n||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=-1*~~(1+dS.random()*(l/.99));"shield"===n&&(s=-1*~~(1+dS.random()*(l/.61175)));s/=10,s=dS.round(s),(s*=10)>-20&&(s=-20);o.name+=" of Swiftness",o.globalHaste=s}(e,a,n,t,i),21===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.castingHaste||"ring"!==a&&"offhand"!==n&&"shield"!==n||(r=!0);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=-1*~~(1+dS.random()*(l/.99));"offhand"===n&&(s=-1*~~(1+dS.random()*(l/.495)));s/=10,s=dS.round(s),(s*=10)>-20&&(s=-20);o.name+=" of the Magus",o.castingHaste=s}(e,a,n,t,i),22===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.thorns)return void Uv(e,a,n,t,i);var r=6*dS.random()+4;r=Jv(r,t),o.name+=" of Razors",o.thorns=r}(e,a,n,t,i),23===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.weight||"helmet"!==a&&"shoulders"!==a&&"chest"!==a&&"bracers"!==a&&"gloves"!==a&&"belt"!==a&&"legs"!==a&&"boots"!==a||(r=!0);"cloth"===n&&(r=!1);if(!1===r)return void Uv(e,a,n,t,i);o.name+=" of Ease",o.weight=1}(e,a,n,t,i),24===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.runSpeed||"boots"!==a)return void Uv(e,a,n,t,i);var r=Wy[t].level,l=dS.round(dS.random()*(r/2.475));l<5&&(l=5);o.name+=" of Speed",o.runSpeed=l}(e,a,n,t,i),25===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.stun||"weapons"===a)return void Uv(e,a,n,t,i);var r=Wy[t].level,l=dS.round(dS.random()*(r/9.9));if("shield"===n||"offhand"===n)l=dS.round(dS.random()*(r/4.95));l<2&&(l=2);o.name+=" of Stability",o.stun=l}(e,a,n,t,i),26===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.fear||"weapons"===a)return void Uv(e,a,n,t,i);var r=Wy[t].level,l=dS.round(dS.random()*(r/9.9));if("shield"===n||"offhand"===n)l=dS.round(dS.random()*(r/4.95));l<2&&(l=2);o.name+=" of Courage",o.fear=l}(e,a,n,t,i),27===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.cold||"weapons"===a)return void Uv(e,a,n,t,i);var r=Wy[t].level,l=dS.round(dS.random()*(r/9.9));if("shield"===n||"offhand"===n)l=dS.round(dS.random()*(r/4.95));l<2&&(l=2);o.name+=" of Thawing",o.cold=l}(e,a,n,t,i),28===o&&function(e,a,n,t,i){var o=bS.item[e];if(o.silence||"weapons"===a)return void Uv(e,a,n,t,i);var r=Wy[t].level,l=dS.round(dS.random()*(r/9.9));if("shield"===n||"offhand"===n)l=dS.round(dS.random()*(r/4.95));l<2&&(l=2);o.name+=" of Resolve",o.silence=l}(e,a,n,t,i),29===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;"weapons"!==a&&"shield"!==n&&"ring"!==a&&"neck"!==a&&"gloves"!==a||(r=!0);o.leech&&(r=!1);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level;(s=dS.round(dS.random()*(l/11.25)))>8&&(s=8);if("offhand"===n||"shield"===n||"cleaved"===n||"smashed"===n||"staff"===n){var s=dS.round(dS.random()*(l/5.9375));s>16&&(s=16)}s<2&&(s=2);o.name+=" of the Leech",o.leech=s}(e,a,n,t,i),30===o&&function(e,a,n,t,i){var o=bS.item[e],r=!1;o.ias||"slashed"!==n&&"crushed"!==n&&"pierced"!==n&&"smashed"!==n&&"staff"!==n&&"cleaved"!==n||(r=!0);"staff"===n&&(r=!1);if(!1===r)return void Uv(e,a,n,t,i);var l=Wy[t].level,s=dS.random()*(l/330);s<.075&&(s=.05);s>=.075&&s<.125&&(s=.1);s>=.125&&s<.175&&(s=.15);s>=.175&&s<.225&&(s=.2);s>=.225&&s<.275&&(s=.25);s>=.275&&(s=.3);o.ias=s}(e,a,n,t,i)}function Jv(e,a){return e*=Wy[a].level/99,dS.ceil(e)}function Zv(){for(var e=Yy.level-1-(Yy.talent1+Yy.talent2+Yy.talent3+Yy.talent4+Yy.talent5+Yy.talent6+Yy.talent7+Yy.talent8+Yy.talent9+Yy.talent10+Yy.talent11+Yy.talent12),a=0;a<=2;a++)bS.Q[a].Crushbone>=4&&e++,bS.Q[a].EstateofUnrest>=4&&e++,bS.Q[a].CazicThule>=4&&e++,bS.Q[a].NagafensLair>=5&&e++;return e}function ey(){var e="",a=oI.charAt(0).toLowerCase()+oI.slice(1);e=zy[a+"TalentTooltips"](),mS.getElementById("LPtalents").innerHTML=e,"Warrior"===Yy.job&&(Yy.talent1>0&&xi("talent2","-512px 0"),Yy.talent2>0&&xi("talent3","-1024px 0"),Yy.talent3>0&&xi("talent4","-448px 0"),Yy.talent5>0&&xi("talent6","-384px 0"),Yy.talent6>0&&xi("talent7","-704px 0"),Yy.talent7>0&&xi("talent8","-1088px 0"),Yy.talent9>0&&xi("talent10","-832px 0"),Yy.talent10>0&&xi("talent11","-576px 0"),Yy.talent11>0&&xi("talent12","-640px 0")),"Monk"===Yy.job?(Yy.talent1>0&&xi("talent2","-960px 0"),Yy.talent2>0&&xi("talent3","-1088px 0"),Yy.talent3>0&&xi("talent4","-768px 0"),Yy.talent5>0&&xi("talent6","-320px 0"),Yy.talent6>0&&xi("talent7","-704px 0"),Yy.talent7>0&&xi("talent8","-448px 0"),Yy.talent9>0&&xi("talent10","-512px 0"),Yy.talent10>0&&xi("talent11","-640px 0"),Yy.talent11>0&&xi("talent12","-1024px 0")):"Rogue"===Yy.job?(Yy.talent1>0&&xi("talent2","-832px 0"),Yy.talent2>0&&xi("talent3","-256px 0"),Yy.talent3>0&&xi("talent4","-448px 0"),Yy.talent5>0&&xi("talent6","-576px 0"),Yy.talent6>0&&xi("talent7","-896px 0"),Yy.talent7>0&&xi("talent8","-640px 0"),Yy.talent9>0&&xi("talent10","-1024px 0"),Yy.talent10>0&&xi("talent11","-384px 0"),Yy.talent11>0&&xi("talent12","-768px 0")):"Paladin"===Yy.job?(Yy.talent1>0&&xi("talent2","-448px 0"),Yy.talent2>0&&xi("talent3","-512px 0"),Yy.talent3>0&&xi("talent4","-960px 0"),Yy.talent5>0&&xi("talent6","-384px 0"),Yy.talent6>0&&xi("talent7","-704px 0"),Yy.talent7>0&&xi("talent8","-1088px 0"),Yy.talent9>0&&xi("talent10","-576px 0"),Yy.talent10>0&&xi("talent11","-768px 0"),Yy.talent11>0&&xi("talent12","-896px 0")):"Shadow Knight"===Yy.job?(Yy.talent1>0&&xi("talent2","-320px 0"),Yy.talent2>0&&xi("talent3","-128px -64px"),Yy.talent3>0&&xi("talent4","-960px 0"),Yy.talent5>0&&xi("talent6","-512px 0"),Yy.talent6>0&&xi("talent7","-448px 0"),Yy.talent7>0&&xi("talent8","-576px 0"),Yy.talent9>0&&xi("talent10","-1024px 0"),Yy.talent10>0&&xi("talent11","-768px 0"),Yy.talent11>0&&xi("talent12","-640px 0")):"Ranger"===Yy.job?(Yy.talent1>0&&xi("talent2","-896px 0"),Yy.talent2>0&&xi("talent3","-704px 0"),Yy.talent3>0&&xi("talent4","-768px 0"),Yy.talent5>0&&xi("talent6","-384px 0"),Yy.talent6>0&&xi("talent7","-576px 0"),Yy.talent7>0&&xi("talent8","-640px 0"),Yy.talent9>0&&xi("talent10","-960px 0"),Yy.talent10>0&&xi("talent11","-1088px 0"),Yy.talent11>0&&xi("talent12","-448px 0")):"Bard"===Yy.job?(Yy.talent1>0&&xi("talent2","-384px 0"),Yy.talent2>0&&xi("talent3","-896px 0"),Yy.talent3>0&&xi("talent4","-960px 0"),Yy.talent5>0&&xi("talent6","-576px 0"),Yy.talent6>0&&xi("talent7","-832px 0"),Yy.talent7>0&&xi("talent8","-1088px 0"),Yy.talent9>0&&xi("talent10","-512px 0"),Yy.talent10>0&&xi("talent11","-704px 0"),Yy.talent11>0&&xi("talent12","-1024px 0")):"Druid"===Yy.job?(Yy.talent1>0&&xi("talent2","-320px 0"),Yy.talent2>0&&xi("talent3","-448px 0"),Yy.talent3>0&&xi("talent4","-896px 0"),Yy.talent5>0&&xi("talent6","-640px 0"),Yy.talent6>0&&xi("talent7","-704px 0"),Yy.talent7>0&&xi("talent8","-768px 0"),Yy.talent9>0&&xi("talent10","-512px 0"),Yy.talent10>0&&xi("talent11","-576px 0"),Yy.talent11>0&&xi("talent12","-832px 0")):"Cleric"===Yy.job?(Yy.talent1>0&&xi("talent2","-896px 0"),Yy.talent2>0&&xi("talent3","-384px 0"),Yy.talent3>0&&xi("talent4","-704px 0"),Yy.talent5>0&&xi("talent6","-576px 0"),Yy.talent6>0&&xi("talent7","-960px 0"),Yy.talent7>0&&xi("talent8","-640px 0"),Yy.talent9>0&&xi("talent10","-512px 0"),Yy.talent10>0&&xi("talent11","-768px 0"),Yy.talent11>0&&xi("talent12","-832px 0")):"Shaman"===Yy.job?(Yy.talent1>0&&xi("talent2","-384px 0"),Yy.talent2>0&&xi("talent3","-512px 0"),Yy.talent3>0&&xi("talent4","-768px 0"),Yy.talent5>0&&xi("talent6","-576px 0"),Yy.talent6>0&&xi("talent7","-640px 0"),Yy.talent7>0&&xi("talent8","-832px 0"),Yy.talent9>0&&xi("talent10","-960px 0"),Yy.talent10>0&&xi("talent11","-1024px 0"),Yy.talent11>0&&xi("talent12","-704px 0")):"Necromancer"===Yy.job?(Yy.talent1>0&&xi("talent2","-576px 0"),Yy.talent2>0&&xi("talent3","-704px 0"),Yy.talent3>0&&xi("talent4","-960px 0"),Yy.talent5>0&&xi("talent6","-512px 0"),Yy.talent6>0&&xi("talent7","-640px 0"),Yy.talent7>0&&xi("talent8","-896px 0"),Yy.talent9>0&&xi("talent10","-256px 0"),Yy.talent10>0&&xi("talent11","-320px 0"),Yy.talent11>0&&xi("talent12","-832px 0")):"Enchanter"===Yy.job?(Yy.talent1>0&&xi("talent2","-384px 0"),Yy.talent2>0&&xi("talent3","-896px 0"),Yy.talent3>0&&xi("talent4","-704px 0"),Yy.talent5>0&&xi("talent6","-512px 0"),Yy.talent6>0&&xi("talent7","-960px 0"),Yy.talent7>0&&xi("talent8","-576px 0"),Yy.talent9>0&&xi("talent10","-448px 0"),Yy.talent10>0&&xi("talent11","-640px 0"),Yy.talent11>0&&xi("talent12","-768px 0")):"Magician"===Yy.job?(Yy.talent1>0&&xi("talent2","-896px 0"),Yy.talent2>0&&xi("talent3","-256px 0"),Yy.talent3>0&&xi("talent4","-704px 0"),Yy.talent5>0&&xi("talent6","-384px 0"),Yy.talent6>0&&xi("talent7","-576px 0"),Yy.talent7>0&&xi("talent8","-640px 0"),Yy.talent9>0&&xi("talent10","-320px 0"),Yy.talent10>0&&xi("talent11","-1024px 0"),Yy.talent11>0&&xi("talent12","-512px 0")):"Wizard"===Yy.job&&(Yy.talent1>0&&xi("talent2","-384px 0"),Yy.talent2>0&&xi("talent3","-576px 0"),Yy.talent3>0&&xi("talent4","-1024px 0"),Yy.talent5>0&&xi("talent6","-512px 0"),Yy.talent6>0&&xi("talent7","-640px 0"),Yy.talent7>0&&xi("talent8","-768px 0"),Yy.talent9>0&&xi("talent10","-448px 0"),Yy.talent10>0&&xi("talent11","-896px 0"),Yy.talent11>0&&xi("talent12","-960px 0"))}function ay(){Zv()<=0&&cS.set(mS.getElementById("talentNotify"),{opacity:0}),ow=!1}function ny(){function e(e){return dS.round(-100*ve(e))}function n(e){return dS.round(50-ye(e)/1500*100)}function t(e){return dS.round(50-ke(1500,e)/1500*100)}!0===ow&&(Ay(),ay());var i=Yy;if("Main"===fw)c="<table id='charStats1'><tr><td width='180px'>"+i.title+" "+i.name+" "+i.lastName+"</td><td width='95px'>&nbsp;</td></tr><tr><td>"+i.gender+" "+i.race+" "+i.job+"</td><td>&nbsp;</td></tr><tr><td>Level:</td><td>"+i.level+"</td></tr><tr><td>Next Level:</td><td>"+(99===i.level?0:va()-i.exp)+"</td></tr><tr><td>Total Experience:</td><td>"+i.exp+"</td></tr><tr><td>Attack:</td><td>"+ne()+"</td></tr><tr><td>Armor:</td><td>"+ae()+"</td></tr><tr><td>Armor vs Target:</td><td>"+function(){var e;if(!1===ya())hL>0?((a=(2*ae()/hL).toFixed(1))>80&&(a=80),e=a+"%"):e="---";else if(Wy[bL].name){var a=(2*ae()/Pt(bL)).toFixed(1);a>80&&(a=80),e=a+"%"}else e="---";return e}()+"</td></tr><tr><td>Gold:</td><td>"+i.gold+"</td></tr><tr><td>Health:</td><td><span id='myhp'>"+i.hp+"</span> / <span>"+i.maxHp+"</span></td></tr><tr><td>"+function(){var e="Mana:";return"Rogue"===i.job&&(e="Technique Points:"),"Monk"===i.job&&(e="Spirit:"),"Warrior"===i.job&&(e="Fury Points:"),e}()+"</td><td><span id='mymp'>"+i.mp+"</span> / <span>"+zy.maxMpFunct()+"</span></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='color:#ffd700'>Attributes</td><td>&nbsp;</td></tr><tr><td title='Makes melee attacks stronger'>Strength:</td><td>"+te()+"</td></tr><tr><td title='Increases your maximum health'>Stamina:</td><td>"+ie()+"</td></tr><tr><td title='Increases physical mitigation, dodge, parry, and riposte'>Agility:</td><td>"+oe()+"</td></tr><tr><td title='Increases crit chance, crit damage, weapon proc chance, and hit chance'>Dexterity:</td><td>"+re()+"</td></tr><tr><td title='Increases maximum mana for wisdom-based casters, magic mitigation, and healing power'>Wisdom:</td><td>"+le()+"</td></tr><tr><td title='Increases maximum mana for intelligence-based casters, spell damage, and makes you learn skills faster'>Intelligence:</td><td>"+se()+"</td></tr><tr><td title='Increases item sale value, bard song damage, and affects various enchanter/bard skills'>Charisma:</td><td>"+de()+"</td></tr></table><table id='charStats2'><tr><td width='180px' style='color:#ffd700'>Skills</td><td width='63px'>&nbsp;</td></tr><tr><td title='Improves damage from one-hand slashing weapons'>One-hand Slashing:</td><td>"+Ce()+"</td></tr><tr><td title='Improves damage from two-hand slashing weapons'>Two-hand Slashing:</td><td>"+Me()+"</td></tr><tr><td title='Improves damage from one-hand blunt weapons'>One-hand Blunt:</td><td>"+Te()+"</td></tr><tr><td title='Improves damage from two-hand blunt weapons'>Two-hand Blunt:</td><td>"+Be()+"</td></tr><tr><td title='Improves damage from piercing weapons'>Piercing:</td><td>"+De()+"</td></tr><tr><td title='Improves damage from hand-to-hand combat'>Hand to Hand:</td><td>"+Le()+"</td></tr><tr><td title='Improves all melee damage'>Offense:</td><td>"+He()+"</td></tr><tr><td title='Increases the chance of auto attacking with your off-hand'>Dual Wield:</td><td>"+Ae()+"</td></tr><tr><td title='Increases the chance of double attacking with your auto attack'>Double Attack:</td><td>"+xe()+"</td></tr><tr><td title='Improves your armor against melee attacks'>Defense:</td><td>"+Ee()+"</td></tr><tr><td title='Improves your chance of dodging physical attacks'>Dodge:</td><td>"+Ge()+"</td></tr><tr><td title='Improves your chance of parrying physical attacks'>"+("Monk"!==i.job?"Parry:":"Block:")+"</td><td>"+qe()+"</td></tr><tr><td title='Improves your chance of riposting physical attacks'>Riposte:</td><td>"+Pe()+"</td></tr><tr><td title='Improves the damage/effects of "+("Bard"===i.job?"singing-based songs":"alteration-based spells")+"'>"+("Bard"!==i.job?"Alteration:":"Singing:")+"</td><td>"+Qe()+"</td></tr><tr><td title='Improves the damage/effects of "+("Bard"===i.job?"percussion-based songs":"evocation-based spells")+"'>"+("Bard"!==i.job?"Evocation:":"Percussion:")+"</td><td>"+Re()+"</td></tr><tr><td title='Improves the damage/effects of "+("Bard"===i.job?"wind-based songs":"conjuration-based spells")+"'>"+("Bard"!==i.job?"Conjuration:":"Wind:")+"</td><td>"+Fe()+"</td></tr><tr><td title='Improves the damage/effects of "+("Bard"===i.job?"string-based songs":"abjuration-based spells")+"'>"+("Bard"!==i.job?"Abjuration:":"String:")+"</td><td>"+Ne()+"</td></tr><tr><td title='"+("Bard"===i.job?"Improves the damage/effects of brass-based songs":"Increases your ability to channel spells without suffering knockback")+"'>"+("Bard"!==i.job?"Channeling:":"Brass:")+"</td><td>"+je()+"</td></tr></table>";else if("Offensive"===fw)c="<table id='charStats1'><tr><td width='180px' style='color:#ffd700'>Offensive Stats</td><td width='95px'>&nbsp;</td></tr><tr><td title='Chance that your melee attacks will hit your target'>Hit Chance:</td><td>"+(100-zy.mobDodgeChance(bL))+"%</td></tr><tr><td title='Increases your auto attack speed and reduces your weapon delay values'>Attack Haste:</td><td>"+e(!0)+" | "+e(!1)+"%</td></tr><tr><td title='Reduces your global skill cooldown time'>Skill Haste:</td><td>"+n(!0)+" | "+n(!1)+"%</td></tr><tr><td title='Reduces the casting time of your spells'>Casting Haste:</td><td>"+t(!0)+" | "+t(!1)+"%</td></tr><tr><td title='Increases your critical hit chance'>Critical Chance:</td><td>"+Se(!0).toFixed(1)+" | "+(100*Se()).toFixed(1)+"%</td></tr><tr><td title='Increases your critical hit damage'>Critical Damage:</td><td>"+P(100*zy.criticalDamage())+"%</td></tr><tr><td title='Increases your reflected damage against melee attacks'>Thorns:</td><td>"+zy.thornsEquip+"</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='color:#ffd700'>Enhanced Damage</td><td>&nbsp;</td></tr><tr><td title='Increases all melee damage'>Physical:</td><td>"+zy.enhancePhysicalEquip+"</td></tr><tr><td title='Increases all poison damage'>Poison:</td><td>"+(zy.enhancePoisonEquip+zy.enhanceAllEquip)+"</td></tr><tr><td title='Increases all arcane damage'>Arcane:</td><td>"+(zy.enhanceMagicEquip+zy.enhanceAllEquip)+"</td></tr><tr><td title='Increases all lightning damage'>Lightning:</td><td>"+(zy.enhanceLightningEquip+zy.enhanceAllEquip)+"</td></tr><tr><td title='Increases all cold damage'>Cold:</td><td>"+(zy.enhanceColdEquip+zy.enhanceAllEquip)+"</td></tr><tr><td title='Increases all fire damage'>Fire:</td><td>"+(zy.enhanceFireEquip+zy.enhanceAllEquip)+"</td></tr></table><table id='charStats2'><tr><td width='180px' style='color:#ffd700'>Swordsmanship</td><td width='63px'>&nbsp;</td></tr><tr><td title='The chance of attacking with your off-hand weapon'>Dual Wield Chance:</td><td>"+Ve().toFixed(1)+"%</td></tr><tr><td title='The chance of double attacking with your auto attack'>Double Attack Chance:</td><td>"+_e().toFixed(1)+"%</td></tr><tr><td title='The chance of parrying a physical attack. Parry restarts your auto attack'>Parry Chance:</td><td>"+Ke().toFixed(1)+"%</td></tr><tr><td title='The chance of riposting a physical attack'>Riposte Chance:</td><td>"+We().toFixed(1)+"%</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td width='180px' style='color:#ffd700'>Added Melee Damage</td><td width='63px'>&nbsp;</td></tr><tr><td title='Physical damage added to each melee attack'>Physical Damage:</td><td>"+zy.physicalDamageEquip+"</td></tr><tr><td title='Poison damage added to each melee attack'>Poison Damage:</td><td>"+zy.poisonDamageEquip+"</td></tr><tr><td title='Arcane damage added to each melee attack'>Arcane Damage:</td><td>"+zy.magicDamageEquip+"</td></tr><tr><td title='Lightning damage added to each melee attack'>Lightning Damage:</td><td>"+zy.lightningDamageEquip+"</td></tr><tr><td title='Cold damage added to each melee attack'>Cold Damage:</td><td>"+zy.coldDamageEquip+"</td></tr><tr><td title='Fire damage added to each melee attack'>Fire Damage:</td><td>"+zy.fireDamageEquip+"</td></tr></table>";else if("Defensive"===fw)var o=ce(),r=me(),l=ue(),s=fe(),d=he(),c="<table id='charStats1'><tr><td width='180px' style='color:#ffd700'>Resistances</td><td width='95px'>&nbsp;</td></tr><tr><td title='Resistance against poison attacks'>Resist Poison:</td><td>"+o+" | "+dS.round(o/400*100)+"%</td></tr><tr><td title='Resistance against arcane attacks'>Resist Arcane:</td><td>"+r+" | "+dS.round(r/400*100)+"%</td></tr><tr><td title='Resistance against lightning attacks'>Resist Lightning:</td><td>"+l+" | "+dS.round(l/400*100)+"%</td></tr><tr><td title='Resistance against cold attacks'>Resist Cold:</td><td>"+s+" | "+dS.round(s/400*100)+"%</td></tr><tr><td title='Resistance against fire attacks'>Resist Fire:</td><td>"+d+" | "+dS.round(d/400*100)+"%</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='color:#ffd700'>Absorption</td><td>&nbsp;</td></tr><tr><td title='Health absorbed from each poison attack'>Poison:</td><td>"+zy.absorbPoisonEquip+"%</td></tr><tr><td title='Health absorbed from each arcane attack'>Arcane:</td><td>"+zy.absorbMagicEquip+"%</td></tr><tr><td title='Health absorbed from each lightning attack'>Lightning:</td><td>"+zy.absorbLightningEquip+"%</td></tr><tr><td title='Health absorbed from each cold attack'>Cold:</td><td>"+zy.absorbColdEquip+"%</td></tr><tr><td title='Health absorbed from each fire attack'>Fire:</td><td>"+zy.absorbFireEquip+"%</td></tr></table><table id='charStats2'><tr><td width='180px' style='color:#ffd700'>Defensive Stats</td><td width='63px'>&nbsp;</td></tr><tr><td title='The chance of using your shield to block a physical or magical attack'>Shield Block Chance:</td><td>"+~~(100*SI)+"%</td></tr><tr><td title='The chance of dodging a physical attack'>Dodge Chance:</td><td>"+Ye().toFixed(1)+"%</td></tr><tr><td title='The maximum amount that is randomly subtracted from physical attacks'>Physical Reduction:</td><td>"+Ie()+"</td></tr><tr><td title='The maximum amount that is randomly subtracted from magical attacks'>Magical Reduction:</td><td>"+we()+"</td></tr><tr><td title='Your life leech rating'>Life Leech Rating:</td><td>"+~~(100*zy.leechEquip)+"</td></tr><tr><td title='Your mana leech rating'>Mana Leech Rating:</td><td>"+~~zy.wraithEquip+"</td></tr><tr><td title='Health absorbed from each slain mob'>Health Per Kill:</td><td>"+zy.hpKillEquip+"</td></tr><tr><td title='Mana absorbed from each slain mob'>Mana Per Kill:</td><td>"+zy.mpKillEquip+"</td></tr><tr><td title='Health regeneration per tick'>Health Regeneration:</td><td>"+zy.hpRegenEquip+"</td></tr><tr><td title='Mana regeneration per tick'>Mana Regeneration:</td><td>"+zy.mpRegenEquip+"</td></tr><tr><td title='Your run speed affects your chance to successfully run from battle'>Run Speed:</td><td>"+zy.runSpeedEquip+"%</td></tr><tr><td title='Reduces the duration of fear'>Fear Reduction:</td><td>"+zy.fearEquip+"%</td></tr><tr><td title='Reduces the duration of stun'>Stun Reduction:</td><td>"+zy.stunEquip+"%</td></tr><tr><td title='Reduces the duration of chill'>Chill Reduction:</td><td>"+zy.chillEquip+"%</td></tr><tr><td title='Reduces the duration of silence'>Silence Reduction:</td><td>"+zy.silenceEquip+"%</td></tr></table>";else if("Talents"===fw)c='<div id="LPtalents"></div><div id="RPtalents"><div id="talentsLeft">Talent Points Remaining: '+Zv()+'</div><div id="talentTree1"></div><div id="talentTree2"></div><div id="talentTree3"></div><div id="talent1" class="talentButton strongShadow">'+i.talent1+'</div><div id="talent2" class="talentButton strongShadow">'+i.talent2+'</div><div id="talent3" class="talentButton strongShadow">'+i.talent3+'</div><div id="talent4" class="talentButton strongShadow">'+i.talent4+'</div><div id="talent5" class="talentButton strongShadow">'+i.talent5+'</div><div id="talent6" class="talentButton strongShadow">'+i.talent6+'</div><div id="talent7" class="talentButton strongShadow">'+i.talent7+'</div><div id="talent8" class="talentButton strongShadow">'+i.talent8+'</div><div id="talent9" class="talentButton strongShadow">'+i.talent9+'</div><div id="talent10" class="talentButton strongShadow">'+i.talent10+'</div><div id="talent11" class="talentButton strongShadow">'+i.talent11+'</div><div id="talent12" class="talentButton strongShadow">'+i.talent12+"</div></div>";else if("Conquests"===fw){c="<table id='charStats1'><tr><td width='180px' style='color:#ffd700'>History</td><td width='95px'>&nbsp;</td></tr><tr><td>Days Played:</td><td>"+function(){var e=0,n=Yy.playtime;return n>=864e5&&(e=a.floor(n/864e5),n%=864e5),e}()+"</td></tr><tr><td>Hours Played:</td><td>"+function(){var e=0,n=Yy.playtime;n>=864e5&&(a.floor(n/864e5),n%=864e5);return n>=36e5&&(e=a.floor(n/36e5),n%=36e5),e}()+"</td></tr><tr><td>Minutes Played:</td><td>"+function(){var e=0,n=Yy.playtime;n>=864e5&&(a.floor(n/864e5),n%=864e5);n>=36e5&&(a.floor(n/36e5),n%=36e5);return n>=6e4&&(e=a.floor(n/6e4),n%=6e4),e}()+"</td></tr><tr><td title='Total mobs slain'>Kills:</td><td>"+i.mobsSlain+"</td></tr><tr><td title='Your total deaths'>Deaths:</td><td>"+i.deaths+"</td></tr><tr><td title='Total champion mobs slain'>Champion Kills:</td><td>"+i.championsSlain+"</td></tr><tr><td title='Total rare mobs slain'>Rare Kills:</td><td>"+i.raresSlain+"</td></tr><tr><td title='Total bosses slain'>Bosses Kills:</td><td>"+i.epicQuests+"</td></tr><tr><td title='Total successful escapes from battle'>Escapes:</td><td>"+i.escapes+"</td></tr><tr><td>Total Gold Found:</td><td>"+i.totalGold+"</td></tr><tr><td>Magic Items Found:</td><td>"+i.magicFound+"</td></tr><tr><td>Rare Items Found:</td><td>"+i.raresFound+"</td></tr><tr><td>Unique Items Found:</td><td>"+i.uniquesFound+"</td></tr><tr><td>Set Items Found:</td><td>"+i.setFound+"</td></tr><tr><td>Equipment Upgrades:</td><td>"+i.upgrades+"</td></tr><tr><td>Quests Completed:</td><td>"+i.quests+"</td></tr></table><table id='charStats2'><tr><td width='180px' style='color:#ffd700'>Combo Ratings</td><td width='63px'>&nbsp;</td></tr><tr><td title='Highest rated combo in any zone'>Highest Rated Combo:</td><td>"+i.comboOverall+"</td></tr>";i.comboMistmoore>0&&(c+="<tr><td title='Highest rated combo in Fahlnir Citadel'>Fahlnir Citadel:</td><td>"+i.comboMistmoore+"</td></tr>"),i.comboLowerGuk>0&&(c+="<tr><td title='Highest rated combo in Kordata Ruins'>Kordata Ruins:</td><td>"+i.comboLowerGuk+"</td></tr>"),i.comboCazicThule>0&&(c+="<tr><td title='Highest rated combo in Temple of Prenssor'>Temple of Prenssor:</td><td>"+i.comboCazicThule+"</td></tr>"),i.comboKedgeKeep>0&&(c+="<tr><td title=\"Highest rated combo in Viston's Redoubt\">Viston's Redoubt:</td><td>"+i.comboKedgeKeep+"</td></tr>"),i.comboPermafrost>0&&(c+="<tr><td title='Highest rated combo in Galeblast Fortress'>Galeblast Fortress:</td><td>"+i.comboPermafrost+"</td></tr>"),i.comboSolB>0&&(c+="<tr><td title='Highest rated combo in Ashenflow Peak'>Ashenflow Peak:</td><td>"+i.comboSolB+"</td></tr>"),i.comboPlaneofHate>0&&(c+="<tr><td title='Highest rated combo in Dire Sanctum'>Dire Sanctum:</td><td>"+i.comboPlaneofHate+"</td></tr>"),i.comboPlaneofFear>0&&(c+="<tr><td title='Highest rated combo in Nimgaul'>Nimgaul:</td><td>"+i.comboPlaneofFear+"</td></tr>"),c+="<tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td style='color:#ffd700'>Providence</td><td>&nbsp;</td></tr><tr><td title='Increases the amount of gold found'>Gold Gain:</td><td>"+zy.goldFindEquip+"%</td></tr><tr><td title='Increases the amount of experience gained from mobs'>Exp Gain:</td><td>"+zy.expFindEquip+"%</td></tr><tr><td title='Increases your chance of finding rare treasure'>Magic Find:</td><td>"+zy.lightRadiusEquip+"</td></tr></table>"}NG.statContent.innerHTML=c,"Talents"===fw&&ey()}function ty(a){var n=a.split("|");Yy.gold=1*n[0],kw.gold=1*n[1],e("#inventoryGoldAmount").text(Yy.gold),e("#cityGold").html("<div id='goldIcon' class='goldIcon'></div> "+Yy.gold),e("#bankGoldAmount").text(kw.gold)}function iy(){e.ajax({url:"/classic/php/town1.php",data:{run:"setCrystals"}}).done(function(a){e("#cityCrystalAmount").text(a)})}function oy(e,a){Nw[e].removeChild(a)}function ry(e,a,n,t,i,o,r,l){var s=new uS.Bitmap(e);if(i===E&&(i=1),o===E&&(o=1),!0===r){var d=s.image.width/2,c=s.image.height/2;s.set({x:n+d,y:t+c,scaleX:i,scaleY:o,regX:d,regY:c})}else s.set({x:n,y:t,scaleX:i,scaleY:o});return!0===l?Nw[a].addChildAt(s,0):Nw[a].addChild(s),s}function ly(e,a,n){return a===E&&(a=25),n===E&&(n=25),s1=new uS.Bitmap("/classic/images1/"+e+".png"),s1.cache(0,0,a,n),s1.cacheCanvas}function sy(e,a,n,t,i,o,r,l){var s=new uS.Bitmap("/classic/images1/"+e+".png"),d=s.image.width,c=s.image.height,m=i/d,u=o/c;if(r===E)s.setTransform(n,t,m,u,0,0,0,0,0);else{var f=d/2,h=c/2;s.setTransform(n+f,t+h,m,u,0,0,0,f,h)}return l?Nw[a].addChildAt(s,0):Nw[a].addChild(s),s}function dy(){Qa("ring"===Sw[0].itemSlot||"neck"===Sw[0].itemSlot||"trinket"===Sw[0].type?"equipRing":"weapons"===Sw[0].itemSlot?"equipWeapon":"shield"===Sw[0].itemSlot?"equipShield":"plate"===Sw[0].type?"equipPlate":"chain"===Sw[0].type?"equipChain":"equipLeather")}function cy(){var a=mS.getElementById("charsheetId");if(1===hH)return hH=0,ny(),a.className="buttonsManageOff",a.style.backgroundPosition="0 -40px",e("#window1").css("display","block"),0===pH&&gy(),void(parseInt(e("#options").css("top"),10)>=0&&uy());a.className="buttonsManage",a.style.backgroundPosition="0 0",e("#window1").css("display","none"),hH=1}function my(){(!0===KI||kw.ks>=6)&&(Fa(),ZI?xy("You must exit the Merchant before visiting the bank!"):"none"===e("#bank").css("display")?(e("#bankContainer").empty(),e.ajax({url:"/classic/php/loadData1.php",data:{run:"loadBank"}}).done(function(a){var n=1*a.gold;e("#bankGoldAmount").text(n),kw.gold=n,(pI=1*a.totalBankSlots)<1080&&e("#addBankSlots").css("display","block"),a.bank.forEach(function(e,a){bS.bank[a].name=e.name,e.name;var n=L.parse(e.json);for(var t in n)bS.bank[a][t]=n[t]}),xn(pI)}).fail(function(){Nn("Server Error. Cannot load bank.")}),e("#bank").css("display","block"),sw=""):(e("#bank,#goldInputWrap").css("display","none"),e("#bankContainer").empty(),Ba()))}function uy(){var a=e("#options"),n=mS.getElementById("optionsId");"-900px"===a.css("top")?(!function(){var e="";e+='<div id="optionsTable"><div id="optionHeader" class="strongShadow winHeader">Options</div><table id="optionSettingWrap" class="strongShadow" width="100%"><tr><td class="optionLeft"><div id="tooltipStatus" class="optionButtonWrap">'+kw.tooltipMode+'</div></td><td class="optionRight">Tooltip Status: Choose between Long, Short, and Off. Long tooltips show full explanations of each skill.</td></tr><tr><td class="optionLeft"><div id="normalFilter" class="optionButtonWrap lootFilter">'+Lmy.normalFilter+'</div></td><td class="optionRight">Normal Item Filter : Set your <b>normal item</b> filter by quality.</td></tr><tr><td class="optionLeft"><div id="magicFilter" class="optionButtonWrap lootFilter">'+Lmy.magicFilter+'</div></td><td class="optionRight">Magic Item Filter : Set your <b>'+j("magic item")+'</b> filter by quality.</td></tr><tr><td class="optionLeft"><div id="rareFilter" class="optionButtonWrap lootFilter">'+Lmy.rareFilter+'</div></td><td class="optionRight">Rare Item Filter : Set your <b>'+z("rare item")+'</b> filter by quality.</td></tr><tr><td class="optionLeft"><div id="uniqueFilter" class="optionButtonWrap lootFilter">'+Lmy.uniqueFilter+'</div></td><td class="optionRight">Unique Item Filter : Set your <b>'+Y("unique item")+'</b> filter by quality.</td></tr><tr><td class="optionLeft"><div id="setFilter" class="optionButtonWrap lootFilter">'+Lmy.setFilter+'</div></td><td class="optionRight">Set Item Filter : Set your <b>'+K("set item")+"</b> filter by quality.</td></tr>",!1===HS&&(e+='<tr><td class="optionLeft"><div id="showCombatLog" class="optionButtonWrap">'+kw.showCombatLog+'</div></td><td class="optionRight">Show Combat Log: Show or hide the combat log. Performance will improve while off.</td></tr><tr><td class="optionLeft"><div id="spamFilter" class="optionButtonWrap">'+kw.chatMyHit+'</div></td><td class="optionRight">Combat Spam: Enable or Disable your own damage messages.</td></tr>');e+='<tr><td class="optionLeft"><div id="weatherStatus" class="optionButtonWrap">'+kw.videoSetting+'</div></td><td class="optionRight">Video Settings: Use video settings that work best on your device.</td></tr><tr><td class="optionLeft"><div id="autoAttackOption" class="optionButtonWrap">'+Lmy.autoAttackOption+'</div></td><td class="optionRight">Auto Attack: Automatically begin your auto attack when entering battle or when using melee skills.</td></tr><tr><td class="optionLeft"><div id="hideMenu" class="optionButtonWrap">'+kw.hideMenu+'</div></td><td class="optionRight">Auto Hide Menu: Set whether the menu automatically fades out.</td></tr><tr><td class="optionLeft"><div id="fastDestroy" class="optionButtonWrap">'+kw.fastDestroy+'</div></td><td class="optionRight">Fast Destroy: Destroys items in one click. If turned off it takes two clicks.</td></tr>',!1===HS&&(e+='<tr><td class="optionLeft"><div id="debugMode" class="optionButtonWrap">'+kw.debugMode+'</div></td><td class="optionRight">Debug Mode: Enable debug messages to help report bugs in the game.</td></tr><tr><td class="optionLeft2"><div id="audioUp" class="audioAdjust">▲</div><div id="audioDown" class="audioAdjust">▼</div></td><td class="optionRight">Audio Volume: <span id="soundStatus">'+kw.soundStatus+'</span></td></tr><tr><td class="optionLeft2"><div id="audioUp2" class="audioAdjust">▲</div><div id="audioDown2" class="audioAdjust">▼</div></td><td class="optionRight">Music Volume: <span id="musicStatus">'+kw.musicStatus+"</span></td></tr>");e+='</table><div id="hotkeys" class="strongShadow">Hotkeys</div><table id="hotkeyTable" width="100%" style="padding:10px"><tr><td class="controlLeft">1-0</td><td class="controlRight">Row 1 Buttons</td><td class="controlLeft">SHIFT+1-0</td><td class="controlRight">Row 2 Buttons</td><td class="controlLeft">ESC</td><td width="18%" class="controlRight">Pause</td></tr><tr><td class="controlLeft">SPACE BAR</td><td class="controlRight">Cancel Spell / Close Windows</td><td class="controlLeft">SPACE BAR</td><td class="controlRight">Clear All Windows</td><td class="controlLeft">B</td><td class="controlRight">Bank</td></tr><tr><td class="controlLeft">G</td><td class="controlRight">Inventory</td><td class="controlLeft">C</td><td class="controlRight">Character Sheet</td><td class="controlLeft">X</td><td class="controlRight">Options</td></tr><tr><td class="controlLeft">TAB</td><td class="controlRight">Next Target</td><td class="controlLeft">SHIFT+TAB</td><td class="controlRight">Previous Target</td><td class="controlLeft">SHIFT+R</td><td class="controlRight">Run</td></tr><tr><td class="controlLeft">A</td><td class="controlRight">Toggle Attack</td><td class="controlLeft">SHIFT+A</td><td class="controlRight">Set Pet Target</td><td class="controlLeft">D</td><td class="controlRight">Pull Next Monster</td></tr><tr><td class="controlLeft">S</td><td width="18%" class="controlRight">Use Racial Skill</td><td class="controlLeft">M or Z</td><td class="controlRight">Show Map</td><td class="controlLeft">T</td><td class="controlRight">Show Talents</td></tr><tr><td class="controlLeft">CTRL+Left Click</td><td width="18%" class="controlRight">Fast Sell at Merchant</td><td class="controlLeft">Q</td><td class="controlRight">Quest Journal</td><td class="controlLeft">Hold SHIFT</td><td class="controlRight">Compare Equipped Item</td></tr></table></div>',mS.getElementById("options").innerHTML=e}(),n.className="buttonsManageOff",n.style.backgroundPosition="-120px -40px",a.css("top",10),0===pH&&gy(),0===hH&&cy(),0===gH&&py(),"block"===e("#bank").css("display")&&my()):(n.className="buttonsManage",n.style.backgroundPosition="-120px 0",a.css("top",-900),e("#options").empty())}function fy(){var a=mS.getElementById("questId");1===hw?(hw=0,a.className="buttonsManageOff",a.style.backgroundPosition="-240px -40px",Av(),e("#questJournal").css("display","block"),parseInt(e("#options").css("top"),10)>=0&&uy(),cS.set("#questNotify",{opacity:0})):(a.className="buttonsManage",a.style.backgroundPosition="-240px 0",e("#questJournal").css("display","none"),hw=1)}function hy(){var a=zy.difficulty-1,n='<div id="zoneSelect" class="strongShadow staggeredGrey"><div id="mapActWrap"><div id="act1" class="zoneSelectHeader">I</div>';if(bS.Q[a].Crushbone>=4&&(n+='<div id="act2" class="zoneSelectHeader">II</div>'),bS.Q[a].EstateofUnrest>=4&&(n+='<div id="act3" class="zoneSelectHeader">III</div>'),bS.Q[a].CazicThule>=4&&(n+='<div id="act4" class="zoneSelectHeader">IV</div>'),n+="</div>",1===iI&&(n+='<div id="edenburg" class="zoneSelectButton">Edenburg</div><div id="greaterFaydark" class="zoneSelectButton">Salubrin Forest</div>',bS.Q[a].GreaterFaydark>=4&&(n+='<div id="lesserFaydark" class="zoneSelectButton">Tendolin Meadows</div>',bS.Q[a].LesserFaydark>=2&&(n+='<div id="blackburrow1" class="zoneSelectButton">Greenthorn Cavern 1</div>',bS.Q[a].Blackburrow>=2&&(n+='<div id="blackburrow2" class="zoneSelectButton">Greenthorn Cavern 2</div>'),bS.Q[a].Blackburrow>=3&&(n+='<div id="blackburrow3" class="zoneSelectButton">Greenthorn Cavern 3</div>'),bS.Q[a].Blackburrow>=4&&(n+='<div id="befallen1" class="zoneSelectButton">Riven Grotto 1</div>',bS.Q[a].Befallen>=2&&(n+='<div id="befallen2" class="zoneSelectButton">Riven Grotto 2</div>'),bS.Q[a].Befallen>=3&&(n+='<div id="befallen3" class="zoneSelectButton">Riven Grotto 3</div>'),bS.Q[a].Befallen>=4&&(n+='<div id="crushbone1" class="zoneSelectButton">Lanfeld Outpost 1</div>',bS.Q[a].Crushbone>=2&&(n+='<div id="crushbone2" class="zoneSelectButton">Lanfeld Outpost 2</div>'),bS.Q[a].Crushbone>=3&&(n+='<div id="crushbone3" class="zoneSelectButton">Lanfeld Outpost 3</div>')))))),2===iI&&bS.Q[a].Crushbone>=4&&(n+='<div id="surefallGlade" class="zoneSelectButton">Aspen Grove</div>',bS.Q[a].Najena>=1&&(n+='<div id="najena1" class="zoneSelectButton">Braxxen\'s Bastille 1</div>'),bS.Q[a].Najena>=2&&(n+='<div id="najena2" class="zoneSelectButton">Braxxen\'s Bastille 2</div>'),bS.Q[a].Najena>=3&&(n+='<div id="najena3" class="zoneSelectButton">Braxxen\'s Bastille 3</div>'),bS.Q[a].Najena>=4&&(n+='<div id="upperGuk1" class="zoneSelectButton">Kordata Marshlands 1</div>',bS.Q[a].UpperGuk>=2&&(n+='<div id="upperGuk2" class="zoneSelectButton">Kordata Marshlands 2</div>'),bS.Q[a].UpperGuk>=3&&(n+='<div id="upperGuk3" class="zoneSelectButton">Kordata Marshlands 3</div>'),bS.Q[a].UpperGuk>=4&&(n+='<div id="unrest1" class="zoneSelectButton">Arcturin\'s Crypt 1</div>',bS.Q[a].EstateofUnrest>=2&&(n+='<div id="unrest2" class="zoneSelectButton">Arcturin\'s Crypt 2</div>'),bS.Q[a].EstateofUnrest>=3&&(n+='<div id="unrest3" class="zoneSelectButton">Arcturin\'s Crypt 3</div>')))),3===iI&&bS.Q[a].EstateofUnrest>=4&&(n+='<div id="artremia" class="zoneSelectButton">Artremia</div>',bS.Q[a].CastleMistmoore>=1&&(n+='<div id="castleMistmoore1" class="zoneSelectButton">Fahlnir Citadel 1</div>'),bS.Q[a].CastleMistmoore>=2&&(n+='<div id="castleMistmoore2" class="zoneSelectButton">Fahlnir Citadel 2</div>'),bS.Q[a].CastleMistmoore>=3&&(n+='<div id="castleMistmoore3" class="zoneSelectButton">Fahlnir Citadel 3</div>'),bS.Q[a].CastleMistmoore>=4&&(n+='<div id="lowerGuk1" class="zoneSelectButton">Kordata Ruins 1</div>',bS.Q[a].LowerGuk>=2&&(n+='<div id="lowerGuk2" class="zoneSelectButton">Kordata Ruins 2</div>'),bS.Q[a].LowerGuk>=3&&(n+='<div id="lowerGuk3" class="zoneSelectButton">Kordata Ruins 3</div>'),bS.Q[a].LowerGuk>=4&&(n+='<div id="cazic1" class="zoneSelectButton">Temple of Prenssor 1</div>',bS.Q[a].CazicThule>=2&&(n+='<div id="cazic2" class="zoneSelectButton">Temple of Prenssor 2</div>'),bS.Q[a].CazicThule>=3&&(n+='<div id="cazic3" class="zoneSelectButton">Temple of Prenssor 3</div>')))),4===iI&&bS.Q[a].CazicThule>=4&&(n+='<div id="fenwoven" class="zoneSelectButton">Fenwoven</div>',bS.Q[a].KedgeKeep>=1&&(n+='<div id="kedge1" class="zoneSelectButton">Viston\'s Redoubt 1</div>'),bS.Q[a].KedgeKeep>=2&&(n+='<div id="kedge2" class="zoneSelectButton">Viston\'s Redoubt 2</div>'),bS.Q[a].KedgeKeep>=3&&(n+='<div id="kedge3" class="zoneSelectButton">Viston\'s Redoubt 3</div>'),bS.Q[a].KedgeKeep>=4&&(n+='<div id="kedge4" class="zoneSelectButton">Viston\'s Redoubt 4</div>'),bS.Q[a].KedgeKeep>=5&&(n+='<div id="permafrost1" class="zoneSelectButton">Galeblast Fortress 1</div>',bS.Q[a].PermafrostKeep>=2&&(n+='<div id="permafrost2" class="zoneSelectButton">Galeblast Fortress 2</div>'),bS.Q[a].PermafrostKeep>=3&&(n+='<div id="permafrost3" class="zoneSelectButton">Galeblast Fortress 3</div>'),bS.Q[a].PermafrostKeep>=4&&(n+='<div id="permafrost4" class="zoneSelectButton">Galeblast Fortress 4</div>'),bS.Q[a].PermafrostKeep>=5&&(n+='<div id="solb1" class="zoneSelectButton">Ashenflow Peak 1</div>',bS.Q[a].NagafensLair>=2&&(n+='<div id="solb2" class="zoneSelectButton">Ashenflow Peak 2</div>'),bS.Q[a].NagafensLair>=3&&(n+='<div id="solb3" class="zoneSelectButton">Ashenflow Peak 3</div>'),bS.Q[a].NagafensLair>=4&&(n+='<div id="solb4" class="zoneSelectButton">Ashenflow Peak 4</div>'),bS.Q[a].NagafensLair>=5&&(n+='<div id="planeofhate" class="zoneSelectButton">Dire Sanctum</div>'),bS.Q[a].PlaneofHate>=2&&(n+='<div id="planeoffear" class="zoneSelectButton">Nimgaul</div>')))),n+="</div>",mS.getElementById("zoneSelectWrap").innerHTML=n,e("#act"+iI).addClass("viewingAct"),0===e("#NGmap").length){var t=mS.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="-5px",t.style.width="1280px",t.style.height="720px",t.id="NGmap",t.style.background="url('/classic/images1/worldMap.jpg')",e("#travelMap").prepend(t);var i=mS.createElement("div");i.style.top="0px",i.id="zoneMarker",e("#NGmap").append(i)}}function gy(){if("Game"===zy.view){if(Yy.hp<=0)return;if(!0===ya())return void Nn("This menu is disabled during combat.");var a=mS.getElementById("travelId");1===pH?(a.className="buttonsManageOff",a.style.backgroundPosition="-80px -40px",e("#worldMap").css("top",0),pH=0,hy(),ua(),Xn(),Dy(),cS.set("#mapNotify",{opacity:0})):(a.className="buttonsManage",a.style.backgroundPosition="-80px 0",e("#worldMap").css("top",-900),pH=1)}}function py(){a=e("#destroyItem");kw.ks>=7?a.text("Sell"):a.text("Destroy");var a=mS.getElementById("inventoryId");1===gH?(!function(){var e="";e+='<li id="helmetBG" class="equipmentBG helmet">HELMET<img id="helmet" src="" class="equipment"></li><li id="neckBG" class="equipmentBG neck">NECK<img id="neck" src="" class="equipment"></li><li id="ring1BG" class="equipmentBG ring1">RING1<img id="ring1" src="" class="equipment"></li><li id="ring2BG" class="equipmentBG ring2">RING2<img id="ring2" src="" class="equipment"></li><li id="shouldersBG" class="equipmentBG shoulders">SHOULDERS<img id="shoulders" src="" class="equipment"></li><li id="backBG" class="equipmentBG back">BACK<img id="back" src="" class="equipment"></li><li id="chestBG" class="equipmentBG chest">CHEST<img id="chest" src="" class="equipment"></li><li id="bracersBG" class="equipmentBG bracers">BRACERS<img id="bracers" src="" class="equipment"></li><li id="glovesBG" class="equipmentBG gloves">GLOVES<img id="gloves" src="" class="equipment"></li><li id="beltBG" class="equipmentBG belt">BELT<img id="belt" src="" class="equipment"></li><li id="legsBG" class="equipmentBG legs">LEGS<img id="legs" src="" class="equipment"></li><li id="bootsBG" class="equipmentBG boots">BOOTS<img id="boots" src="" class="equipment"></li><li id="weapon1BG" class="equipmentBG weapon1">PRIMARY<img id="weapon1" src="" class="equipment"></li><li id="weapon2BG" class="equipmentBG weapon2">SECONDARY<img id="weapon2" src="" class="equipment"></li><li id="rangeBG" class="equipmentBG range">RANGE<img id="range" src="" class="equipment"></li>',mS.getElementById("gearContainer").innerHTML=e,mS.getElementById("inventoryGoldAmount").textContent=Yy.gold;for(var a="",n=0;n<=23;n++)a+="<li class='inventoryBG' id='inv"+n+"BG'>ITEM<img src='images1/blank.png' id='inv"+n+"' class='inventory'></li>";mS.getElementById("inventoryContainer").innerHTML=a,Xn(),Vn(),_n()}(),a.className="buttonsManageOff",a.style.backgroundPosition="-40px -40px",e("#inventoryWindow").css("display","block"),gH=0,0===pH&&gy(),parseInt(e("#options").css("top"),10)>=0&&uy(),cS.set("#itemNotify",{opacity:0})):(a.className="buttonsManage",a.style.backgroundPosition="-40px 0",e("#inventoryWindow,#goldInputWrap").css("display","none"),Ba(),gH=1,mS.getElementById("gearContainer").innerHTML="",mS.getElementById("inventoryContainer").innerHTML="",sw="")}function by(){var e=Ab();0!==e&&(++bL>4&&(bL=0),1===e?Wy[bL].name?yy():by():Wy[bL].name&&!Wy[bL].charmStatus?yy():by())}function vy(){var e=Ab();e<1||(--bL<0&&(bL=4),1===e?Wy[bL].name?yy():vy():Wy[bL].name&&!Wy[bL].charmStatus?yy():vy())}function yy(e){ny();for(var a=0;a<=4;a++)a!==bL&&(qw[a].style.color="#00FA9A",Pw[a].src="/classic/images1/mobShadow.png");0===zy.autoAttackStatus?(qw[bL].style.color="#f33",Pw[bL].src="/classic/images1/mobShadowRed.png"):qw[bL].style.color="#ff0",NG.mobName.textContent=Wy[bL].name,NG.mobLevel.textContent=Wy[bL].level,xa(),mS.getElementById("mobIcons"+bL).style.display="block";var n="ui-draggable";0===Wy[bL].rare?(NG.mobBar.className=n,NG.mobPlate.src="/classic/images1/rarePlate.png",NG.mobPlate.className="nameplateGold"):2===Wy[bL].rare?(NG.mobBar.className=n,NG.mobPlate.src="/classic/images1/championPlate.png",NG.mobPlate.className="nameplateBlue"):3===Wy[bL].rare?(NG.mobBar.className=n,NG.mobPlate.src="/classic/images1/bossPlate.png",NG.mobPlate.className="nameplateRed"):1===Wy[bL].rare&&(NG.mobBar.className=n,NG.mobPlate.src="/classic/images1/normalPlate.png",NG.mobPlate.className="nameplateBlack"),NG.mobTraits.innerHTML=Wy[bL].traits,e||zy.drawMonsterHp(bL,!0),"Warrior"===Yy.job&&Ri()}function ky(a){e("#inv"+a).attr("src",jS),bS.item[a]!==E&&(bS.item[a].name?e("#inv"+a).css({left:bS.item[a].xPos,top:bS.item[a].yPos}):e("#inv"+a).attr("src","/classic/images1/blank.png"))}function Sy(e){function a(e,n){!0===n?(e.style.border="2px solid #f00",n=!1,Yk=cS.delayedCall(.15,function(){a(e,n)})):(e.style.border="2px solid #900",n=!0,Yk=cS.delayedCall(.15,function(){a(e,n)}))}Yk.kill(),a(e,!0)}function Iy(){if(ew>0)return!1;var a=Wk,n=Kk,t=e("#"+a),i=e("#"+n),o=!1,r=bS.eq[Ok],l=bS.eq[Xk],s=bS.item[Ok],d=bS.item[Xk];if(i.hasClass("bank"))o=!1,(t.hasClass("inventory")||0===Wk.indexOf("bank"))&&(o=!0);else if(i.hasClass("inventory"))t.hasClass("equipment")&&("helmet"===a&&"helmet"===d.itemSlot&&(o=!0),"neck"===a&&"neck"===d.itemSlot&&(o=!0),"ring1"!==a&&"ring2"!==a||"ring"===d.itemSlot&&(o=!0),"shoulders"===a&&"shoulders"===d.itemSlot&&(o=!0),"back"===a&&"back"===d.itemSlot&&(o=!0),"chest"===a&&"chest"===d.itemSlot&&(o=!0),"bracers"===a&&"bracers"===d.itemSlot&&(o=!0),"gloves"===a&&"gloves"===d.itemSlot&&(o=!0),"belt"===a&&"belt"===d.itemSlot&&(o=!0),"legs"===a&&"legs"===d.itemSlot&&(o=!0),"boots"===a&&"boots"===d.itemSlot&&(o=!0),"shield"!==r.itemSlot||"slashed"!==d.type&&"crushed"!==d.type&&"pierced"!==d.type||(o=!0),"weapons"===r.itemSlot&&""===d.itemSlot&&(o=!0),"shield"===r.itemSlot&&"shield"===d.itemSlot&&(o=!0),"shield"===r.itemSlot&&""===d.itemSlot&&(o=!0),"range"===r.itemSlot&&""===d.itemSlot&&(o=!0),"smashed"!==r.type&&"staff"!==r.type&&"cleaved"!==r.type||"smashed"!==d.type&&"staff"!==d.type&&"cleaved"!==d.type||(o=!0),"crushed"!==r.type&&"pierced"!==r.type&&"slashed"!==r.type||"shield"!==d.itemSlot||"weapon2"!==a||(o=!0),"range"===r.type&&"range"===d.type&&(o=!0),"weapon1"!==a||"slashed"!==d.type&&"crushed"!==d.type&&"pierced"!==d.type||(o=!0),"weapon1"!==a||bS.eq[13].name||"weapons"!==d.itemSlot||(o=!0),"weapon2"!==a||"slashed"!==r.type&&"crushed"!==r.type&&"pierced"!==r.type||"slashed"!==d.type&&"crushed"!==d.type&&"pierced"!==d.type||(o=!0),"crushed"!==r.type&&"pierced"!==r.type&&"slashed"!==r.type||"shield"!==d.type||"weapon1"!==a||(o=!1),Yy.dualWield<1&&"shield"===r.itemSlot&&"shield"!==d.itemSlot&&(o=!1)),d.name||(o=!0),t.hasClass("inventory")&&(o=!0),t.hasClass("bank")&&(o=!0);else if(i.hasClass("equipment")&&("helmet"===n&&t.hasClass("inventory")&&"helmet"===s.itemSlot&&(o=!0),"neck"===n&&t.hasClass("inventory")&&"neck"===s.itemSlot&&(o=!0),"ring1"!==n&&"ring2"!==n||(t.hasClass("inventory")&&"ring"===s.itemSlot&&(o=!0),t.hasClass("equipment")&&"ring"===r.itemSlot&&(o=!0)),"shoulders"===n&&t.hasClass("inventory")&&"shoulders"===s.itemSlot&&(o=!0),"back"===n&&t.hasClass("inventory")&&"back"===s.itemSlot&&(o=!0),"chest"===n&&t.hasClass("inventory")&&"chest"===s.itemSlot&&(o=!0),"bracers"===n&&t.hasClass("inventory")&&"bracers"===s.itemSlot&&(o=!0),"gloves"===n&&t.hasClass("inventory")&&"gloves"===s.itemSlot&&(o=!0),"belt"===n&&t.hasClass("inventory")&&"belt"===s.itemSlot&&(o=!0),"legs"===n&&t.hasClass("inventory")&&"legs"===s.itemSlot&&(o=!0),"boots"===n&&t.hasClass("inventory")&&"boots"===s.itemSlot&&(o=!0),"weapon1"===n&&(t.hasClass("inventory")&&"weapons"===s.itemSlot&&(o=!0),t.hasClass("equipment")&&"weapons"===r.itemSlot&&(o=!0,"shield"===r.itemSlot&&(o=!1)),t.hasClass("inventory")&&("cleaved"!==s.type&&"smashed"!==s.type&&"staff"!==s.type||bS.eq[13].name||(o=!0),"cleaved"!==s.type&&"smashed"!==s.type&&"staff"!==s.type||!bS.eq[13].name||(o=!1))),"weapon2"===n&&(t.hasClass("inventory")&&"weapons"===s.itemSlot&&Yy.dualWield>=1&&(o=!0),t.hasClass("inventory")&&"shield"===s.itemSlot&&(o=!0),t.hasClass("equipment")&&"weapons"===r.itemSlot&&Yy.dualWield>=1&&(o=!0),"shield"===l.itemSlot&&(o=!1),"shield"===l.itemSlot&&"shield"===s.itemSlot&&(o=!0),"slashed"!==s.type&&"crushed"!==s.type&&"pierced"!==s.type||"shield"!==l.itemSlot||(o=!0),!t.hasClass("equipment")||"smashed"!==r.type&&"staff"!==r.type&&"cleaved"!==r.type||(o=!1),"smashed"!==s.type&&"staff"!==s.type&&"cleaved"!==s.type||(o=!1),"shield"!==s.itemSlot||"smashed"!==bS.eq[12].type&&"staff"!==bS.eq[12].type&&"cleaved"!==bS.eq[12].type||(o=!1),"weapons"===s.itemSlot&&("smashed"!==bS.eq[12].type&&"staff"!==bS.eq[12].type&&"cleaved"!==bS.eq[12].type||(o=!1),"smashed"!==s.type&&"staff"!==s.type&&"cleaved"!==s.type||(o=!1)),Yy.dualWield<1&&"shield"===bS.eq[13].itemSlot&&"shield"!==s.itemSlot&&(o=!1)),"range"===n&&t.hasClass("inventory")&&"range"===s.itemSlot&&(o=!0),s.req>Yy.level))return"level";return o}function wy(){function e(e){return"equipment"===e?e="eq":"inventory"===e&&(e="item"),e}if(!0===aw||!0===ZI||"inventory"===xw&&Ok>23)return Ba(),Fa(),void Nn("You cannot sort items while shopping at the merchant.");if(yS=xw,kS=Ew,SS=Ok,wS=Xk,IS=Wk,CS=Kk,"inventory"===Ew){for(var a in Sw[0])Sw[1][a]=bS.item[Xk][a];for(var a in Sw[0])bS.item[Xk][a]=Sw[0][a]}if("equipment"===Ew){for(var a in Sw[0])Sw[1][a]=bS.eq[Xk][a];for(var a in Sw[0])bS.eq[Xk][a]=Sw[0][a]}if("bank"===Ew){for(var a in Sw[0])Sw[1][a]=bS.bank[Xk][a];for(var a in Sw[0])bS.bank[Xk][a]=Sw[0][a]}if("inventory"===xw)for(var a in Sw[0])bS.item[Ok][a]=Sw[1][a];if("equipment"===xw)for(var a in Sw[0])bS.eq[Ok][a]=Sw[1][a];if("bank"===xw)for(var a in Sw[0])bS.bank[Ok][a]=Sw[1][a];""===bS.eq[12].type&&(bS.eq[12].type="punched",Ia()),""===bS.eq[13].type&&Ae()>=1&&(bS.eq[13].type="punched",Ia()),bS.eq[14].damage<1&&(bS.eq[14].damage=1),(bS.eq[14].delay<1||bS.eq[14].delay>3e4)&&(bS.eq[14].delay=3e4);var n=e(xw),t=e(Ew);NG.ttItem.style.display="none",gS.itemSwap(n,Ok,t,Xk)}function Cy(e){var a=n.getElementById("inv"+e);null!==a&&(bS.item[e].name?(a.src=jS,a.style.left=bS.item[e].xPos+"px",a.style.top=bS.item[e].yPos+"px"):a.src="/classic/images1/blank.png")}function My(e){var a=n.getElementById("inv"+e);null!==a&&(bS.item[e].name?(a.src=jS,a.style.left=bS.item[e].xPos+"px",a.style.top=bS.item[e].yPos+"px"):a.src="/classic/images1/blank.png")}function Ty(){Rk=function(){var e=bS.item[Ok].upgrade+1,a="armor";"weapons"!==bS.item[Ok].itemSlot&&"offhand"!==bS.item[Ok].type||(a="weapon");var n=25;return 2===e?n=50:3===e?n=100:4===e?n=200:5===e?n=400:6===e?n=750:7===e?n=1250:8===e?n=2e3:9===e?n=3e3:10===e&&(n=5e3),"weapon"===a&&(n*=2),n}(),$I=!0;var a="Success is guaranteed!";10===bS.item[Ok].upgrade&&(a="This item is fully upgraded! Congratulations!"),e("#upgradeConfirm2").html("Attempt to upgrade "+qy(bS.item[Ok].name,bS.item[Ok].rarity)+" for "+Rk+" gold?<br><br>"+a)}function By(){if(Ba(),kw.ks>=7){var a=Qv(Ok);Qa("buyitem");fa("You sold "+qy(bS.item[Ok].name,bS.item[Ok].rarity)+" for "+a+" gold.",5),e.ajax({url:"/classic/php/town1.php",data:{run:"sellItem",cost:a,name:Yy.name}}).done(function(n){Yy.gold+=a,Yy.gold>999999999&&(Yy.gold=999999999),e("#cityGold").html("<div id='goldIcon' class='goldIcon'></div> "+Yy.gold),e("#inventoryGoldAmount").text(Yy.gold),ny()})}fa("You destroyed "+qy(bS.item[Ok].name,bS.item[Ok].rarity)+".");for(var n=0,t=zy.key.length;n<t;n++)bS.item[Ok][zy.key[n]]=zy.val[n];Cy(Ok),gS.item(Ok),NG.ttItem.style.display="none"}function Dy(e,a){a||(a=1),e===E&&(e=qn(),a=0);var n=[0],t=[];"Edenburg"===e&&(n=[5]),"Salubrin Forest"===e&&(n=[30],t=[360,200]),"Tendolin Meadows"===e&&(n=[50],t=[300,310]),"Greenthorn Cavern"===e&&(n=[70],t=[360,430]),"Riven Grotto"===e&&(n=[100],t=[450,480]),"Lanfeld Outpost"===e&&(n=[150],t=[500,560]),"Aspen Grove"===e&&(n=[180]),"Braxxen's Bastille"===e&&(n=[220],t=[565,760]),"Kordata Marshlands"===e&&(n=[200],t=[455,670]),"Arcturin's Crypt"===e&&(n=[250],t=[460,830]),"Artremia"===e&&(n=[300]),"Fahlnir Citadel"===e&&(n=[290],t=[360,990]),"Kordata Ruins"===e&&(n=[220],t=[340,740]),"Temple of Prenssor"===e&&(n=[200],t=[240,660]),"Fenwoven"===e&&(n=[320]),"Viston's Redoubt"===e&&(n=[335],t=[265,1095]),"Galeblast Fortress"===e&&(n=[342],t=[130,1040]),"Ashenflow Peak"===e&&(n=[350],t=[80,1130]),"Dire Sanctum"===e&&(n=[355],t=[40,1135]),"Nimgaul"===e&&(n=[355],t=[20,1150]);var i=!1,o=mS.getElementById("zoneMarker");if(i=!0,"Edenburg"!==e&&"Aspen Grove"!==e&&"Artremia"!==e&&"Fenwoven"!==e||(o.innerHTML="",i=!1),e===o.textContent&&(i=!1),!0===i){o.innerHTML="";var r=function(e){for(var a="",n=0,t=(e=e.split("")).length;n<t;n++)a+="<span class='aniSpan'>"+e[n]+"</span>";return a}(e);o.innerHTML=r,cS.staggerFromTo(".aniSpan",.35,{opacity:0},{force3D:"auto",ease:pS.lin,opacity:1},.02),cS.staggerTo(".aniSpan",.1,{delay:.35,color:"#ffd700",textShadow:"0 0 15px #ffd700, 0 0 8px #ffd700, 0 0 4px #ffd700, 0 0 2px #ffd700,0 0 1px #ffd700",force3D:"auto",ease:pS.Qin,onComplete:function(){cS.to(this.target,.1,{force3D:"auto",color:"#333311",textShadow:"1px 0 #aa6, 0 1px #aa6, -1px 0 #aa6, 0 -1px #aa6"})}},.03),o.style.top=t[0]+"px",o.style.left=t[1]+"px"}cS.to("#NGmap",1.5,{left:-1*n[0]})}function Ly(e){if("Off"!==kw.tooltipMode){var a,n,t=mS.getElementById(e);"mobDetails"===e?(a=t.parentNode.offsetWidth/2-150,n=t.parentNode.offsetLeft+a):(a=t.offsetWidth/2-150,n=t.offsetLeft+a),n<30?n=30:n>950&&(n=950);var i=t.offsetTop;"mobDetails"===e&&(i=t.parentNode.offsetTop);var o=NG.tooltip.offsetHeight;if(i>340)i-=10+o;else{i+=("myhpbardiv"===e?96:"mobBar"===e?50:t.offsetHeight)+10}"window6"===e&&(n=60,i=325),NG.tooltip.style.cssText="top:"+i+"px; left:"+n+"px; visibility: visible;"}}function Hy(){"Game"===zy.view&&(cS.resumeAll(),US=!1,mS.getElementById("paused").style.display="none")}function Ay(a){fw="Talents",e(".statButton").css({backgroundPosition:"0 0"}),e("#talentStat").css({backgroundPosition:"0 100%"}),a&&cy()}function xy(e,a){var n=mS.createElement("span");n.className="error",n.innerHTML=e+"<br>",a&&(n.style.color=a),NG.errorMsg.appendChild(n),cS.delayedCall(2.5,function(){Wi(n)})}function Ey(a,n){if(pk){if(a===E){return}n||(lI=a);var t=!1;if(-1!==(Xk=a.parent().index())){if(a.hasClass("inventory")&&bS.item[Xk].name&&(Gy(a),t=!0,dI="inventory"),a.hasClass("equipment")&&bS.eq[Xk].name&&(Gy(a),t=!0,dI="equipment"),a.hasClass("bank")){var i=Xk+90*aI;bS.bank[i].name&&(Gy(a),t=!0,dI="bank")}a.hasClass("city")&&(Xk=a.parent().index()+24,bS.item[Xk].name&&(Gy(a),t=!0),dI="inventory")}!0===t&&(NG.ttItem.style.left=rw<640?"800px":"160px",NG.ttItem.style.display="block",NG.ttItem.style.top=~~((768-$NG.ttItem.height())/2)+"px"),e("#ttItemName").text()||(NG.ttItem.style.display="none")}}function Gy(a){if(a===E)a=e("#"+Kk);Xk=a.parent().index(),a.hasClass("inventory")&&W(a,"item"),a.hasClass("equipment")&&W(a,"eq"),a.hasClass("bank")&&(Xk+=90*aI,W(a,"bank")),a.hasClass("city")&&(Xk=a.parent().index()+24,W(a,"item")),e("#ttItemName").text()||(NG.ttItem.style.display="none")}function qy(e,a){return 0===a?'<span class="white">'+e+"</span>":1===a?'<span class="magical">'+e+"</span>":2===a?'<span class="rare">'+e+"</span>":3===a?'<span class="unique">'+e+"</span>":4===a?'<span class="set">'+e+"</span>":void 0}function Py(e){function a(){if("Bard"!==Yy.job){if(sH)return}else if(!TM)return;var e=ry(n,6,357,550);cS.to(e,1,{y:968,scaleX:.5,scaleY:.5,ease:o,onComplete:function(){oy(6,e)}});var i=ry(n,6,897,550);cS.to(i,1,{y:968,scaleX:.5,scaleY:.5,ease:o,onComplete:function(){oy(6,i)}}),cS.delayedCall(t,a)}if("High"===kw.videoSetting){var n=ly(e+"particle50"),t=.1;HS&&(t=.15);var i=pS.Qout,o=pS.Qin,r=sy(e+"Light3",6,170,363,0,0,!0);r.image.onload=function(){cS.to(r,.1,{startAt:{scaleX:1,scaleY:1},scaleX:.9,scaleY:.9,repeat:-1,yoyo:!0,onUpdate:function(){("Bard"!==Yy.job&&sH||"Bard"===Yy.job&&!TM)&&(cS.to(r,.2,{scaleX:0,scaleY:0,ease:i,onComplete:function(){oy(6,r)}}),cS.to(l,.2,{scaleX:0,scaleY:0,ease:i,onComplete:function(){oy(6,l)}}))}})};var l=sy(e+"Light3",6,710,363,0,0,!0);l.image.onload=function(){cS.to(l,.5,{startAt:{scaleX:1,scaleY:1},scaleX:.9,scaleY:.9,repeat:-1,yoyo:!0})},a()}}function Qy(e){function a(){if("Bard"!==Yy.job){if(sH)return}else if(!TM)return;var e=7*~~(6*dS.random()-3),i=345+e+10,r=ry(n,6,357,550);cS.to(r,1.25,{y:-90,x:i,scaleX:.5,scaleY:.5,ease:o,onComplete:function(){oy(6,r)}});var l=885+e+10,s=ry(n,6,897,550);cS.to(s,1.25,{y:-90,x:l,scaleX:.5,scaleY:.5,ease:o,onComplete:function(){oy(6,s)}}),cS.delayedCall(t,a)}if("High"===kw.videoSetting){var n=ly(e+"particle50"),t=.1;HS&&(t=.15);var i=pS.Qout,o=pS.Qin,r=sy(e+"Light3",6,170,363,0,0,!0);r.image.onload=function(){cS.to(r,.25,{startAt:{scaleX:1,scaleY:1},scaleX:.9,scaleY:.9,repeat:-1,yoyo:!0,onUpdate:function(){("Bard"!==Yy.job&&sH||"Bard"===Yy.job&&!TM)&&(cS.to(r,.2,{scaleX:0,scaleY:0,ease:i,onComplete:function(){oy(6,r)}}),cS.to(l,.2,{scaleX:0,scaleY:0,ease:i,onComplete:function(){oy(6,l)}}))}})};var l=sy(e+"Light3",6,710,363,0,0,!0);l.image.onload=function(){cS.to(l,.25,{startAt:{scaleX:1,scaleY:1},scaleX:.9,scaleY:.9,repeat:-1,yoyo:!0})},a()}}function Ry(a,t){var i=mS.getElementById("loreMsg");if(XS.kill(),a&&(VS=a.split("<br><br>")),"Game"===zy.view)if(VS[0]===E)e("#lore").css("display","none"),e("#loreMsg, #introText").html(""),cS.set("#loreClick",{bottom:10}),"Salubrin Forest"===qn()&&1===Yy.difficulty&&0===Yy.exp&&1===Yy.level&&function(){var a=10;cS.delayedCall(1,function(){function t(e){cS.fromTo(e,.5,{opacity:0},{opacity:1,ease:pS.lin,onComplete:function(){cS.delayedCall(a-1,function(){cS.to(e,.5,{opacity:0})})}})}var i=_i(60,420,"auto","auto");i.className="strongShadow tutorial",i.textContent="Pull Next Monster",NG.eWin.appendChild(i),On("#addmonsterId"),t(i),cS.delayedCall(a,function(){e(".tutorial").remove();var i=_i(60,470,"auto","auto");i.className="strongShadow tutorial",i.textContent="Toggle Auto Attack",NG.eWin.appendChild(i),On("#toggleattackId"),t(i),cS.delayedCall(a,function(){e(".tutorial").remove();var i=_i(60,520,"auto","auto");i.className="strongShadow tutorial",i.textContent="Attempt To Run",NG.eWin.appendChild(i),On("#runId"),t(i),cS.delayedCall(a,function(){e(".tutorial").remove();var i=_i(0,-50,500,"auto");i.className="strongShadow tutorial",i.style.textAlign="center",i.style.position="absolute",i.textContent="Class Skill Buttons",n.getElementById("window3").appendChild(i),On("#window3"),t(i),cS.delayedCall(a,function(){e(".tutorial").remove()})})})})})}();else{if(t===E){t=0;"Aspen Grove"===(d=qn())||"Braxxen's Bastille"===d||"Kordata Marshlands"===d||"Arcturin's Crypt"===d?t=-96:"Artremia"===d||"Fahlnir Citadel"===d||"Kordata Ruins"===d||"Temple of Prenssor"===d?t=-192:"Fenwoven"!==d&&"Viston's Redoubt"!==d&&"Galeblast Fortress"!==d&&"Ashenflow Peak"!==d&&"Dire Sanctum"!==d&&"Nimgaul"!==d||(t=-288)}for(var o=(s=VS[0].replace(/<\/span>/g,"")).split(" "),r=0,l=o.length;r<l;r++)"<span"===o[r]&&delete o[r];var s=(s=o.join(" ")).split("class='gold'>").join("");i.innerHTML=s,mS.getElementById("lorePortrait").style.backgroundPosition=t+"px 0","none"===e("#lore").css("display")&&e("#lore").css("display","block"),cS.to("#loreClick",.5,{startAt:{bottom:10},bottom:15,repeat:-1,yoyo:!0})}else if("Intro"===zy.view)if(VS[0]===E){mS.getElementById("introText").style.display="none",mS.getElementById("introClick").style.display="none",e("#loreMsg, #introText").html("");var d=qn();"Edenburg"===d&&(cS.set("#loreClick",{bottom:10}),cS.to(canWorldMap,3,{scaleX:2.5,scaleY:2.5,x:1320,y:230,ease:pS.lin}),cS.to("#intro",3,{alpha:0,onComplete:function(){cS.set("#intro",{display:"none"}),mS.getElementById("gameView").style.display="block",cS.fromTo("#gameView",1,{opacity:0},{opacity:1}),zy.view="Game"}}))}else mS.getElementById("introText").style.display="block",mS.getElementById("introText").innerHTML=VS[0],cS.to("#introClick",.5,{startAt:{bottom:140},bottom:145,repeat:-1,yoyo:!0}),cS.to("#loreClick",.5,{startAt:{bottom:10},bottom:15,repeat:-1,yoyo:!0})}function Fy(){function e(){var a=360*dS.random(),n=sy("whiteparticle50",7,xt(630,130,a),Et(470,130,a),25,25);n.image.onload=function(){cS.to(n,i,{startAt:{alpha:0},ease:o,alpha:1}),cS.to(n,i,{x:640,y:480,scaleX:.1,scaleY:.1,ease:o,onComplete:function(){oy(7,n)}})},!0===OS&&cS.delayedCall(t,e)}var a="Miranda",n=qn();"Aspen Grove"===n||"Braxxen's Bastille"===n||"Kordata Marshlands"===n||"Arcturin's Crypt"===n?a="Rendo":"Artremia"===n||"Fahlnir Citadel"===n||"Kordata Ruins"===n||"Temple of Prenssor"===n?a="Valeska":"Fenwoven"!==n&&"Viston's Redoubt"!==n&&"Galeblast Fortress"!==n&&"Ashenflow Peak"!==n&&"Dire Sanctum"!==n&&"Nimgaul"!==n||(a="Arwen"),fa(a+" creates a magic portal to your quest's destination.");var t=.01,i=2;!0===HS&&(t=.15,i=1);var o=pS.Qout;townPortal=Vi(480,320,320,320,"portal"),townPortal.style.opacity=0,townPortal.id="townPortal",NG.gameView.appendChild(townPortal),OS=!0,cS.to(townPortal,3.5,{rotation:360,repeat:-1,ease:pS.lin}),cS.fromTo(townPortal,1,{scale:0},{scale:1,ease:pS.Bout,onComplete:function(){cS.to(townPortal,3,{scale:.9,yoyo:!0,repeat:-1,ease:pS.lin})}}),e(),cS.to(townPortal,1.25,{opacity:1}),zy.showPortal=!1}function Ny(e){return e>60&&(e=dS.ceil(e/60)+"m"),e}function jy(e,a,n){if("object"==typeof WS[n]&&WS[n].kill(),a<1)mS.getElementById(n).textContent="";else if(a%1==0)mS.getElementById(n).textContent=Ny(a),WS[n]=cS.delayedCall(1,function(){jy(e,--a,n)});else{var t=a%1,i=dS.ceil(a/1);mS.getElementById(n).textContent=Ny(i),a-=t,WS[n]=cS.delayedCall(t,function(){jy(e,a,n)})}}-1===t.pathname.indexOf("nevergrounds")?nevergrounds=!1:nevergrounds=!0;var zy={oldExp:0,lostGold:0,lostExp:0,view:"Main",difficulty:1,subjugateStatus:1,autoAttackStatus:1,amplifyDamageStatus:!1,coldBloodBonus:0,gaspingFrenzyStatus:!1,petAlive:!1,blindStatus:1,speed:.5,showPortal:!1,lastDrop:"",draggingWindows:!1,familiarName:""};zy.hardcoreDeathStatus=!1;var Yy,Ky=0,Wy=[];!function(){tlMob=[],tlMobSh=[],mobEnvenomTimer=[],mobEngulfingDarknessTimer=[],mobStaticFieldTimer=[],mobBlizzardTimer=[],mobConflagrationTimer=[],mobsEnvenomTimer=[],mobsEngulfingDarknessTimer=[],mobsStaticFieldTimer=[],mobsBlizzardTimer=[],mobsConflagrationTimer=[],mobFearTimers=[],mobGlobeOfDarknessTimers=[],mobMindNumbTimers=[],mobWeakenTimers=[],mobYawnTimers=[],MthornsTimers=[],MlavaTimers=[],MenrageTimers=[],MflurryTimers=[],MamplifyMagicTimers=[],MsanctuaryTimers=[],MbarrierTimers=[],MironMaidenTimers=[],mobsSilenceTimer=[];for(var e=0;e<=5;e++)Wy[e]={name:"",level:0,maxHp:0,hp:0,xp:0,str:0,def:0,intel:0,tc:0,gold:0,item1:"",item2:"",skill1:"",skill2:"",skill3:"",skill4:"",poison:0,magic:0,lightning:0,fire:0,cold:0,image:"",mp:20,envenomTicks:0,engulfingDarknessTicks:0,staticFieldTicks:0,blizzardTicks:0,conflagrationTicks:0,castFreq:0,harmTouch:!1,rune:!1,runeHp:0,skeleton:!1,elemental:!1,thorns:!1,lavaShield:!1,resolution:!1,resolutionStatus:!1,weaken:!1,attackNow:!1,imageWidth:0,speed:0,castSpeed:0,rare:1,dotDamage:0,castingStatus:!1,attack:q(),doubleAttack:!1,rootStatus:0,snareStatus:!1,blindStatus:!1,stunStatus:!1,fearStatus:!1,dazeStatus:!1,dazeTimer:q(),hemorrhageTickCount:0,hemorrhageTickDamage:0,hemorrhageInterval:q(),furiousScorn:0,lacerate:0,widowStrikeDamage:0,widowStrikeTickCount:0,widowStrikeInterval:q(),afflictionTickInterval:q(),chillStatus:!1,riftStatus:!1,faerieFlameTick:0,igniteBloodTickInterval:q(),cascadingDarknessTickInterval:q(),faerieFlameTickCount:0,faerieFlameTickInterval:q(),scourgeTickInterval:q(),doomingDarknessTickCount:0,doomingDarknessTick:0,doomingDarknessInterval:q(),siphonStrength:0,heatBloodTickCount:0,heatBloodTick:0,heatBloodInterval:q(),thornsActive:1,lavaShieldActive:1,resolutionActive:1,dotActive:q(),thornsTimer:q(),lavaShieldTimer:q(),spellActive:q(),stunTimer:q(),blindTimer:q(),fearTimer:q(),rootTimer:q(),sleepStatus:!1,sleepTimer:q(),consonantChain:0,slowTimer:q(),euphonicHymn:0,euphonicHymnTimer:q(),petDot:!1,charmStatus:!1,wolf:!0,fearAnimate:q(),silenceStatus:!1,silenced:!1,animateStun:q(),enrageStatus:!1,enrageTimer:q(),flurryStatus:!1,flurryTimer:q(),ampMagicStatus:!1,ampMagicTimer:q(),sanctuaryStatus:!1,sanctuaryTimer:q(),barrierStatus:!1,barrierTimer:q(),drainStatus:!1,ironMaidenStatus:!1,ironMaidenTimer:q(),fleeStatus:0,fleeNow:!1,coldTimer:q(),enrage:!1,flurry:!1,ampMagic:!1,sanctuary:!1,barrier:!1,ironMaiden:!1,layHands:!1,martyr:!1,martyrTiming:q(),silenceTimer:q(),dronesOfDoomTick:0,dronesOfDoomTickCount:0,dronesOfDoomTickInterval:q(),sylvanCreepInterval:q(),driftingDeathTick:0,driftingDeathTickCount:0,driftingDeathInterval:0,scourgeTick:0,scourgeTickCount:0,scourgeInterval:0,scourgeStatus:!1,slowStatus:!1,togorsInsectsTimeout:q(),regenStatus:!0,afflictionTick:0,afflictionTickCount:0,afflictionInterval:0,afflictionStatus:!1,frozenStatus:!1,frozenTimer:q(),shiftlessDeedsTimeout:q(),devouringPlagueTick:0,devouringPlagueTickCount:0,devouringPlagueInterval:q(),cascadingDarknessTick:0,cascadingDarknessTickCount:0,cascadingDarknessInterval:0,igniteBloodTick:0,igniteBloodTickCount:0,igniteBloodInterval:0,bondOfDeathTick:0,bondOfDeathTickCount:0,bondOfDeathInterval:q(),asystoleTickInterval:q(),gaspingEmbraceTickInterval:q(),driftingDeathTickInterval:q(),asystoleTick:0,asystoleTickCount:0,asystoleInterval:0,asystoleStatus:!1,ImageBaseY:0,ImageBaseX:0,shiftlessStatus:0,gaspingEmbraceTick:0,gaspingEmbraceTickCount:0,gaspingEmbraceInterval:0,gaspingEmbraceStatus:!1,fallingStatus:!1,shatterStatus:!1,stasisFieldStatus:!1,traits:"",ID:0,shreddingAura:!1,tashaniaStatus:!1,attackStatus:1},tlMob[e]=G(),tlMobSh[e]=G(),mobEnvenomTimer[e]=q(),mobEngulfingDarknessTimer[e]=q(),mobStaticFieldTimer[e]=q(),mobBlizzardTimer[e]=q(),mobConflagrationTimer[e]=q(),mobsEnvenomTimer[e]=q(),mobsEngulfingDarknessTimer[e]=q(),mobsStaticFieldTimer[e]=q(),mobsBlizzardTimer[e]=q(),mobsConflagrationTimer[e]=q(),mobFearTimers[e]=q(),mobGlobeOfDarknessTimers[e]=q(),mobMindNumbTimers[e]=q(),mobWeakenTimers[e]=q(),mobYawnTimers[e]=q(),MthornsTimers[e]=q(),MlavaTimers[e]=q(),MenrageTimers[e]=q(),MflurryTimers[e]=q(),MamplifyMagicTimers[e]=q(),MsanctuaryTimers[e]=q(),MbarrierTimers[e]=q(),MironMaidenTimers[e]=q(),mobsSilenceTimer[e]=q()}();var Oy=0,Xy=0,Vy=0,_y=0,$y=0,Uy=0,Jy=0,Zy=0,ek=0,ak=0,nk=0,tk=0,ik=0,ok=0,rk=0,lk=0,sk=0,dk=0,ck=0,mk=0,uk=0,fk=1,hk=[],gk=0,pk=!1,bk=10,vk=10,yk=0,kk=0,Sk=0,Ik=0,wk=0,Ck=5,Mk=5,Tk=!1,Bk=1,Dk=q(),Lk=!1,Hk=q(),Ak=!1,xk=q(),Ek=!1,Gk=q(),qk=!1,Pk=!1,Qk="",Rk=0,Fk=q(),Nk=!1,jk=!1,zk=!1,Yk=q(),Kk="",Wk="",Ok=0,Xk=0,Vk=q(),_k=q(),$k=q(),Uk=0,Jk=1,Zk=1,eS=1,aS=1,nS=q(),tS=q(),iS=0,oS=0,rS=q(),lS=q(),sS={Miner:0,Minotaur:0,Golem:0,Martyr:0,Bishop:0,Samurai:0,Emissary:0,Sage:0,Vagabond:0,Vagrant:0,Chancellor:0,Magnate:0,Orator:0,Wyvern:0,Guardian:0,Duke:0,Augur:0,Venova:0,Baron:0,Daimyo:0,Bloodletter:0,Mendicant:0,Friar:0,Willow:0,Wraith:0,Satyr:0,Summoner:0,Malefactor:0,Warlord:0,Assassin:0,Grandmaster:0,Crusader:0,GraveLord:0,Warder:0,Virtuoso:0,Hierophant:0,HighPriest:0,Oracle:0,Warlock:0,Phantasmist:0,ArchMage:0,Sorcerer:0};U(),zy.maxHpFunct=function(){var e=Yy.level,a=Yy.job,n=ie()*wH.hpTier*(e/50)+13*e+20+zy.hpEquip+Zy;"Ranger"===a&&!0===KC&&(n*=1+Ue()/100*1.42),"Bard"===a&&(n*=1+1.55*Ue()/100),sS.Warlord>=4&&(n+=300);var t=0;return sS.Hierophant>=6&&(t+=.3),sS.ArchMage>=6&&(t+=.15),n=~~(n*(1+t)),Yy.maxHp=n,n},zy.maxMpFunct=function(){var e=100,a=Yy.level,n=zy.mpEquip,t=wH.mpClass,i=wH.mpTier;if("intCaster"===t?e=dS.ceil(se()*i*(a/50)+13*a+15+n+125):"intHybrid"===t?e=dS.ceil(se()*i*(a/50)+13*(a-8)+15+n+75):"wisCaster"===t?e=dS.ceil(le()*i*(a/50)+13*a+15+n+125):"wisHybrid"===t&&(e=dS.ceil(le()*i*(a/50)+13*(a-8)+15+n+75)),"hybrid"===wH.jobType&&a<=8&&(e=0),"melee"!==wH.mpClass){var o=0;sS.ArchMage>=6&&(o+=.15),e=~~(e*(1+o))}return e},zy.criticalDamage=function(){var e=50;return(e+=re()/25+zy.critDamageEquip+0)/100},function(){if("localhost"===t.host){n.getElementById("curtain").style.overflow="auto"}}(),e.ajaxSetup({type:"POST",url:"/classic/php/ng1.php"});var dS=a,cS=i,mS=n,uS=createjs,fS={},hS={},gS={},pS={},bS={};pS.sin=b.easeIn,pS.sinout=b.easeInOut,pS.sout=b.easeOut,pS.lin=Linear.easeIn,pS.Qout=Quad.easeOut,pS.Qin=Quad.easeIn,pS.Qinout=Quad.easeInOut,pS.qout=Quart.easeOut,pS.qin=Quart.easeIn,pS.cout=g.easeOut,pS.cin=g.easeIn,pS.cinout=g.easeInOut,pS.xout=p.easeOut,pS.xin=p.easeIn,pS.binout=f.easeInOut,pS.bout=f.easeOut,pS.Bout=m.easeOut,pS.Bin=m.easeIn,cS.defaultOverwrite="all",cS.defaultEase=pS.Qout,cS.globalTimeScale(1);var vS=0,yS="",kS="",SS="",IS=0,wS="",CS=0,MS=0,TS=0,BS="",DS=!1,LS=!1,HS=(/Xbox/i.test(navigator.userAgent),function(){var e=!1;navigator.userAgent.toLowerCase().indexOf("playstation")>=0&&(e=!0)}(),/Nintendo/i.test(navigator.userAgent),/Silk|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),AS=!!B.opera||navigator.userAgent.indexOf(" OPR/")>=0,xS="undefined"!=typeof InstallTrigger,ES=A.prototype.toString.call(B.HTMLElement).indexOf("Constructor")>0,GS=!!B.chrome&&!AS,qS=!1,PS=!!navigator.userAgent.match(/Trident\/7\./);e(B).on("load resize orientationchange",function(){});QS="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||B;(QS._gsQueue||(QS._gsQueue=[])).push(function(){"use strict";var e=function(a){var n=a.nodeType,t="";if(1===n||9===n||11===n){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)t+=e(a)}else if(3===n||4===n)return a.nodeValue;return t},n=function(e,n){for(var t=n.length,i="";--e>-1;)i+=n[0|a.random()*t];return i},t=function(e){this.chars=e.split(""),this.sets=[],this.length=50;var a;for(a=0;20>a;a++)this.sets[a]=n(80,this.chars);this.grow=function(e){for(a=0;20>a;a++)this.sets[a]+=n(e-this.length,this.chars);this.length=e}},i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=i.toLowerCase(),r={upperCase:new t(i),lowerCase:new t(o),upperAndLowerCase:new t(i+o)},l=QS._gsDefine.plugin({propName:"scrambleText",version:"0.2.2",API:2,overwriteProps:["scrambleText","text"],init:function(n,i,o){if(this._prop="innerHTML"in n?"innerHTML":"textContent"in n?"textContent":0,!this._prop)return!1;this._target=n,"object"!=typeof i&&(i={text:i});var l,s,d;return this._delimiter=l=i.delimiter||"",this._original=e(n).replace(/\s+/g," ").split("&nbsp;").join("").split(l),this._text=(i.text||i.value||"").replace(/\s+/g," ").split(l),this._hasClass=!1,"string"==typeof i.newClass&&(this._newClass=i.newClass,this._hasClass=!0),"string"==typeof i.oldClass&&(this._oldClass=i.oldClass,this._hasClass=!0),this._text.length-this._original.length,this._length=this._original.join(l).length,this._lengthDif=this._text.join(l).length-this._length,this._fillChar=i.fillChar||i.chars&&-1!==i.chars.indexOf(" ")?"&nbsp;":"",this._charSet=d=r[i.chars||"upperCase"]||new t(i.chars),this._speed=.016/(i.speed||1),this._prevScrambleTime=0,this._setIndex=0|20*a.random(),(s=this._length+a.max(this._lengthDif,0))>d.length&&d.grow(s),this._chars=d.sets[this._setIndex],this._revealDelay=i.revealDelay||0,this._tweenLength=!1!==i.tweenLength,this._tween=o,!0},set:function(e){var n,t,i,o,r,l,s=this._text.length,d=this._delimiter,c=this._tween._time,m=c-this._prevScrambleTime;this._revealDelay&&(this._tween.vars.runBackwards&&(c=this._tween._duration-c),e=0===c?0:this._revealDelay>c?1e-6:c===this._tween._duration?1:this._tween._ease.getRatio((c-this._revealDelay)/(this._tween._duration-this._revealDelay))),0>e?e=0:e>1&&(e=1),n=0|e*s+.5,t=this._text.slice(0,n).join(d),i=this._original.slice(n).join(d),e&&((m>this._speed||-this._speed>m)&&(this._setIndex=(this._setIndex+(0|19*a.random()))%20,this._chars=this._charSet.sets[this._setIndex],this._prevScrambleTime+=m),i=this._chars.substr(t.length,0|this._length+(this._tweenLength?1-(e=1-e)*e*e*e:1)*this._lengthDif-t.length+.5)),this._hasClass?(o=this._newClass&&0!==n,r=this._oldClass&&n!==s,l=(o?"<span class='"+this._newClass+"'>":"")+t+(o?"</span>":"")+(r?"<span class='"+this._oldClass+"'>":"")+d+i+(r?"</span>":"")):l=t+d+i,this._target[this._prop]="&nbsp;"===this._fillChar&&-1!==l.indexOf("  ")?l.split("  ").join("&nbsp;&nbsp;"):l}}).prototype;l._newClass=l._oldClass="";for(l in r)r[l.toLowerCase()]=r[l],r[l.toUpperCase()]=r[l]}),QS._gsDefine&&QS._gsQueue.pop()();var QS;(function(e){"use strict";var a=e.GreenSockGlobals||e,t=function(e){var n,t=e.split("."),i=a;for(n=0;t.length>n;n++)i[t[n]]=i=i[t[n]]||{};return i}("com.greensock.utils"),i=function(e){var a=e.nodeType,n="";if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue;return n},o=n,r=o.defaultView?o.defaultView.getComputedStyle:function(){},l=/([A-Z])/g,s=function(e,a,n,t){var i;return(n=n||r(e,null))?(e=n.getPropertyValue(a.replace(l,"-$1").toLowerCase()),i=e||n.length?e:n[a]):e.currentStyle&&(n=e.currentStyle,i=n[a]),t?i:parseInt(i,10)||0},d=function(e){return!!(e.length&&e[0]&&(e[0].nodeType&&e[0].style&&!e.nodeType||e[0].length&&e[0][0]))},c=")eefec303079ad17405c",m=/(?:<br>|<br\/>|<br \/>)/gi,u="<div style='position:relative;display:inline-block;"+(o.all&&!o.addEventListener?"*display:inline;*zoom:1;'":"'"),f=function(e){var a=-1!==(e=e||"").indexOf("++"),n=1;return a&&(e=e.split("++").join("")),function(){return u+(e?" class='"+e+(a?n++:"")+"'>":">")}},h=t.SplitText=a.SplitText=function(e,a){if("string"==typeof e&&(e=h.selector(e)),!e)throw"cannot split a null element.";this.elements=d(e)?function(e){var a,n,t,i=[],o=e.length;for(a=0;o>a;a++)if(n=e[a],d(n))for(t=n.length,t=0;n.length>t;t++)i.push(n[t]);else i.push(n);return i}(e):[e],this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=a||{},this.split(a)},g=function(e,a,n){var t=e.nodeType;if(1===t||9===t||11===t)for(e=e.firstChild;e;e=e.nextSibling)g(e,a,n);else(3===t||4===t)&&(e.nodeValue=e.nodeValue.split(a).join(n))},p=function(e,a){for(var n=a.length;--n>-1;)e.push(a[n])},b=function(e,a,n,t,l){m.test(e.innerHTML)&&(e.innerHTML=e.innerHTML.replace(m,c));var d,u,h,b,v,y,k,S,I,w,C,M,T,B,D=i(e),L=a.type||a.split||"chars,words,lines",H=-1!==L.indexOf("lines")?[]:null,A=-1!==L.indexOf("words"),x=-1!==L.indexOf("chars"),E="absolute"===a.position||!0===a.absolute,G=E?"&#173; ":" ",q=-999,P=r(e),Q=s(e,"paddingLeft",P),R=s(e,"borderBottomWidth",P)+s(e,"borderTopWidth",P),F=s(e,"borderLeftWidth",P)+s(e,"borderRightWidth",P),N=s(e,"paddingTop",P)+s(e,"paddingBottom",P),j=s(e,"paddingLeft",P)+s(e,"paddingRight",P),z=s(e,"textAlign",P,!0),Y=e.clientHeight,K=e.clientWidth,W=f(a.wordsClass),O=f(a.charsClass),X=-1!==(a.linesClass||"").indexOf("++"),V=a.linesClass,_=-1!==D.indexOf("<"),$=!0,U=[],J=[],Z=[];for(X&&(V=V.split("++").join("")),_&&(D=D.split("<").join("{{LT}}")),d=D.length,b=W(),v=0;d>v;v++)if(")"===(k=D.charAt(v))&&D.substr(v,20)===c)b+=($?"</div>":"")+"<BR/>",$=!1,v!==d-20&&D.substr(v+20,20)!==c&&(b+=" "+W(),$=!0),v+=19;else if(" "===k&&" "!==D.charAt(v-1)&&v!==d-1&&D.substr(v-20,20)!==c){for(b+=$?"</div>":"",$=!1;" "===D.charAt(v+1);)b+=G,v++;(")"!==D.charAt(v+1)||D.substr(v+1,20)!==c)&&(b+=G+W(),$=!0)}else b+=x&&" "!==k?O()+k+"</div>":k;for(e.innerHTML=b+($?"</div>":""),_&&g(e,"{{LT}}","<"),d=(y=e.getElementsByTagName("*")).length,S=[],v=0;d>v;v++)S[v]=y[v];if(H||E)for(v=0;d>v;v++)I=S[v],((h=I.parentNode===e)||E||x&&!A)&&(w=I.offsetTop,H&&h&&w!==q&&"BR"!==I.nodeName&&(u=[],H.push(u),q=w),E&&(I._x=I.offsetLeft,I._y=w,I._w=I.offsetWidth,I._h=I.offsetHeight),H&&(A!==h&&x||(u.push(I),I._x-=Q),h&&v&&(S[v-1]._wordEnd=!0),"BR"===I.nodeName&&I.nextSibling&&"BR"===I.nextSibling.nodeName&&H.push([])));for(v=0;d>v;v++)I=S[v],h=I.parentNode===e,"BR"!==I.nodeName?(E&&(M=I.style,A||h||(I._x+=I.parentNode._x,I._y+=I.parentNode._y),M.left=I._x+"px",M.top=I._y+"px",M.position="absolute",M.display="block",M.width=I._w+1+"px",M.height=I._h+"px"),A?h&&""!==I.innerHTML?J.push(I):x&&U.push(I):h?(e.removeChild(I),S.splice(v--,1),d--):!h&&x&&(w=!H&&!E&&I.nextSibling,e.appendChild(I),w||e.appendChild(o.createTextNode(" ")),U.push(I))):H||E?(e.removeChild(I),S.splice(v--,1),d--):A||e.appendChild(I);if(H){for(E&&(C=o.createElement("div"),e.appendChild(C),T=C.offsetWidth+"px",w=C.offsetParent===e?0:e.offsetLeft,e.removeChild(C)),M=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(B=!E||!A&&!x,v=0;H.length>v;v++){for(u=H[v],(C=o.createElement("div")).style.cssText="display:block;text-align:"+z+";position:"+(E?"absolute;":"relative;"),V&&(C.className=V+(X?v+1:"")),Z.push(C),d=u.length,y=0;d>y;y++)"BR"!==u[y].nodeName&&(I=u[y],C.appendChild(I),B&&(I._wordEnd||A)&&C.appendChild(o.createTextNode(" ")),E&&(0===y&&(C.style.top=I._y+"px",C.style.left=Q+w+"px"),I.style.top="0px",w&&(I.style.left=I._x-w+"px")));0===d&&(C.innerHTML="&nbsp;"),A||x||(C.innerHTML=i(C).split(String.fromCharCode(160)).join(" ")),E&&(C.style.width=T,C.style.height=I._h+"px"),e.appendChild(C)}e.style.cssText=M}E&&(Y>e.clientHeight&&(e.style.height=Y-N+"px",Y>e.clientHeight&&(e.style.height=Y+R+"px")),K>e.clientWidth&&(e.style.width=K-j+"px",K>e.clientWidth&&(e.style.width=K+F+"px"))),p(n,U),p(t,J),p(l,Z)},v=h.prototype;v.split=function(e){this.isSplit&&this.revert(),this.vars=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var a=this.elements.length;--a>-1;)this._originals[a]=this.elements[a].innerHTML,b(this.elements[a],this.vars,this.chars,this.words,this.lines);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},v.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var e=this._originals.length;--e>-1;)this.elements[e].innerHTML=this._originals[e];return this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},h.selector=e.$||e.jQuery||function(a){var t=e.$||e.jQuery;return t?(h.selector=t,t(a)):void 0===n?a:n.querySelectorAll?n.querySelectorAll(a):n.getElementById("#"===a.charAt(0)?a.substr(1):a)},h.version="0.3.3"})(QS="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||B),function(e){"use strict";var a=function(){return(QS.GreenSockGlobals||QS).SplitText};"function"==typeof define&&define.amd?define(["TweenLite"],a):"undefined"!=typeof module&&module.exports&&(module.exports=a())}(),function(e){e.widget("ui.swappable",e.ui.sortable,{_mouseStart:function(a,t,i){var o=this.options;if(o.helper="original",this.currentContainer=this,this.helper=this._createHelper(a),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!=n&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",a,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",a,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,a),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(a),!0},_mouseStop:function(a,t){if(a){var i=this.options,o=a.target,r=e(o).closest(i.items),l=this.currentItem.closest(i.items),s=e(l).next();if(e(r).after(l),e(s).after(r),e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,a),this.options.revert){var d=this,c=d.placeholder.offset();d.reverting=!0,e(this.helper).animate({left:c.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==n.body?0:this.offsetParent[0].scrollLeft),top:c.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==n.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(a)})}else this._clear(a,t);return!1}},_clear:function(a,n){this.reverting=!1;var t=[];if(this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)"auto"!=this._storedCSS[i]&&"static"!=this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!n&&t.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||n||t.push(function(e){this._trigger("update",e,this._uiHash())}),!e.contains(this.element[0],this.currentItem[0])){n||t.push(function(e){this._trigger("remove",e,this._uiHash())});for(i=this.containers.length-1;i>=0;i--)e.contains(this.containers[i].element[0],this.currentItem[0])&&!n&&(t.push(function(e){return function(a){e._trigger("receive",a,this._uiHash(this))}}.call(this,this.containers[i])),t.push(function(e){return function(a){e._trigger("update",a,this._uiHash(this))}}.call(this,this.containers[i])))}for(i=this.containers.length-1;i>=0;i--)n||t.push(function(e){return function(a){e._trigger("deactivate",a,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(t.push(function(e){return function(a){e._trigger("out",a,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",a,this._uiHash());for(i=0;i<t.length;i++)t[i].call(this,a);this._trigger("stop",a,this._uiHash())}return!1}if(n||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(i=0;i<t.length;i++)t[i].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0}}),e.extend(e.ui.swappable,{version:"0.9.5"})}(jQuery);var RS={glb:!1,my:!1,item:!1,eq:!1,q:!1,difficulty:1},FS=40,NS=!1,jS="/classic/images1/item-ng.png";"localhost"===t.hostname&&(NS=!0);for(var zS={martyr:!1},YS="/classic/sound1/",KS="/classic/music1/",WS={},OS=!1,XS=q(),VS=[],_S=(G(),!1),$S=q(),US=!1,JS=!1,ZS=80,eI=648,aI=0,nI=1e3,tI=!1,iI=1,oI="Warrior",rI="MP",lI="",sI="",dI="",cI=G(),mI=0,uI=q(),fI=q(),hI=!1,gI=0,pI=0,bI=0,vI=[],yI=[],kI=0,SI=0,II=!1,wI=!1,CI=0,MI=!1,TI=!1,BI=!1,DI="talent1",LI=500,HI="poison",AI=0,xI=0,EI=0,GI=0,qI=0,PI=0,QI=0,RI=0,FI=0,NI=0,jI=0,zI=0,YI=0,KI=!1,WI=0,OI=!1,XI=!1,VI=!1,_I=0,$I=!1,UI=!1,JI=!0,ZI=!1,ew=0,aw=!1,nw=0,tw=0,iw=0,ow=!1,rw=0,lw=0,sw="",dw=0,cw="",mw=!0,uw=!1,fw="Main",hw=1,gw=q(),pw=!1,bw=[],vw=!1,yw=0;yw<=4;yw++)bw[yw]=q();bS.Q=[],da(),Yy={name:"",lastName:"",gender:"Male",job:"",race:"",level:null,exp:0,hp:0,maxHp:0,mp:0,maxMp:0,str:0,sta:0,agi:0,dex:0,wis:0,intel:0,cha:0,oneHandSlash:0,offense:0,defense:0,dualWield:0,doubleAttack:0,dodge:0,parry:0,riposte:0,alteration:0,evocation:0,conjuration:0,abjuration:0,channeling:0,twoHandSlash:0,oneHandBlunt:0,piercing:0,twoHandBlunt:0,handToHand:0,svpoison:0,svmagic:0,svlightning:0,svcold:0,svfire:0,gold:0,zone:"",playtime:0,deaths:0,mobsSlain:0,championsSlain:0,escapes:0,totalGold:0,uniquesFound:0,setFound:0,raresFound:0,magicFound:0,upgrades:0,raresSlain:0,randomEvents:0,scriptedEvents:0,quests:0,comboPermafrost:0,comboKedgeKeep:0,comboSolB:0,comboMistmoore:0,comboLowerGuk:0,comboCazicThule:0,comboPlaneofFear:0,comboPlaneofHate:0,comboOverall:0,subzone:1,zoneN:"",zoneH:"",subzoneN:1,subzoneH:1,title:"",difficulty:1,talent1:0,talent2:0,talent3:0,talent4:0,talent5:0,talent6:0,talent7:0,talent8:0,talent9:0,talent10:0,talent11:0,talent12:0,hardcoreMode:!1,patch:0,story:"Intro"},ma();var kw={musicStatus:70,soundStatus:100,tooltipMode:"Long",videoSetting:"High",hideMenu:"Off",chatMyHit:"Off",fastDestroy:"On",lastCharacter:1,showCombatLog:"On",debugMode:"Off",gold:0,ks:0};!0===HS&&(kw.tooltipMode="Off",kw.musicStatus=0,kw.soundStatus=0,kw.showCombatLog="Off"),ua(),NS||(B.onerror=function(e,a,n){return"On"===kw.debugMode&&(fa("ERROR: "+e,2),fa("URL: "+a,2),fa("LINE: "+n,2)),!0}),zy.key=["hp","mp","str","sta","agi","dex","intel","wis","cha","allStats","hpRegen","mpRegen","armor","enhancedArmor","attack","oneHandSlash","twoHandSlash","oneHandBlunt","twoHandBlunt","piercing","handtohand","offense","dualWield","doubleAttack","defense","dodge","parry","riposte","alteration","evocation","conjuration","abjuration","channeling","allSkills","critChance","critDamage","phyMit","magMit","resistPoison","resistMagic","resistLightning","resistCold","resistFire","allResist","goldFind","expFind","thorns","absorbPoison","absorbMagic","absorbLightning","absorbCold","absorbFire","name","rarity","itemSlot","type","damage","delay","physicalDamage","poisonDamage","magicDamage","lightningDamage","coldDamage","fireDamage","enhancePhysical","enhancePoison","enhanceMagic","enhanceLightning","enhanceCold","enhanceFire","enhanceAll","hpKill","mpKill","lightRadius","runSpeed","xPos","yPos","haste","globalHaste","castingHaste","proc","req","flavorText","upgrade","weight","enhancedDamage","ias","stun","fear","cold","silence","leech","wraith","quality"],zy.val=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"",0,"","",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"",0,"",0,0,0,0,0,0,0,0,0,0,0],bS.eq=[],function(){for(var e=0;e<=14;e++){bS.eq[e]={};for(var a=0,n=zy.key.length;a<n;a++)bS.eq[e][zy.key[a]]=zy.val[a]}}(),bS.item=[],function(){for(var e=0;e<=43;e++){bS.item[e]={};for(var a=0,n=zy.key.length;a<n;a++)bS.item[e][zy.key[a]]=zy.val[a]}}(),bS.bank=[],function(){for(var e=0;e<1080;e++){bS.bank[e]={};for(var a=0,n=zy.key.length;a<n;a++)bS.bank[e][zy.key[a]]=zy.val[a]}}();var Sw=[];!function(){for(var e=0;e<2;e++){Sw[e]={};for(var a=0,n=zy.key.length;a<n;a++)Sw[e][zy.key[a]]=zy.val[a]}}();var Iw,ww,Cw,Mw,Tw,Bw,Dw,Lw,Hw,Aw=!1,xw="",Ew="",Gw=[],qw=[],Pw=[],Qw=[],Rw=[],Fw=[],Nw=[],jw=[],zw=[],Yw=[];!function(){for(a=0;a<=5;a++)Gw[a]=mS.getElementById("mob"+a);for(a=0;a<=5;a++)qw[a]=mS.getElementById("mobName"+a);for(a=0;a<=5;a++)Pw[a]=mS.getElementById("mobShadow"+a);for(Fw=[],Nw=[],jw=[],zw=[],Yw=[],a=0;a<=4;a++)Fw[a]=mS.getElementById("mobPic"+a),Nw[a]=new uS.Stage(Fw[a]),Nw[a].snapToPixelEnabled=!0,TweenLite.ticker.addEventListener("tick",Nw[a].update,Nw[a]),jw[a]=new uS.Bitmap("/classic/images1/blank.png"),Qw[a]={},Qw[a].poison=q(),Qw[a].magic=q(),Qw[a].lightning=q(),Qw[a].fire=q(),Qw[a].cold=q(),Rw[a]=q(),zw[a]={},zw[a].poison=new uS.Bitmap("/classic/images1/blank.png"),zw[a].magic=new uS.Bitmap("/classic/images1/blank.png"),zw[a].lightning=new uS.Bitmap("/classic/images1/blank.png"),zw[a].fire=new uS.Bitmap("/classic/images1/blank.png"),zw[a].cold=new uS.Bitmap("/classic/images1/blank.png"),Yw[a]=q();for(var e=["cWin","cWin2","cWin3","cWin4"],a=5;a<=8;a++)Fw[a]=mS.getElementById(e.shift()),Nw[a]=new uS.Stage(Fw[a]),TweenLite.ticker.addEventListener("tick",Nw[a].update,Nw[a]);spellCurtainStage=new uS.Stage(mS.getElementById("spellcurtain")),TweenLite.ticker.addEventListener("tick",spellCurtainStage.update,spellCurtainStage),monsterhpbarId=new uS.Stage(mS.getElementById("monsterhpbarId")),monsterhpbarId.snapToPixelEnabled=!0,TweenLite.ticker.addEventListener("tick",monsterhpbarId.update,monsterhpbarId),(n=new uS.Graphics).beginFill("#ee0").drawRect(0,0,300,24),monsterHpBar2=new uS.Shape(n),monsterHpBar2.alpha=.5,monsterhpbarId.addChild(monsterHpBar2),(n=new uS.Graphics).lf(["#800","#c00","#c00","#800"],[0,.3,.7,1],0,0,0,24).drawRect(0,0,300,24),monsterHpBar1=new uS.Shape(n),monsterhpbarId.addChild(monsterHpBar1),monsterText=new uS.Text("","13px Arial","#fff"),monsterText.set({x:150,y:13,textAlign:"center",textBaseline:"middle"}),monsterText.shadow=new uS.Shadow("#000",1,1,0),monsterhpbarId.addChild(monsterText),Lw=new uS.Stage(mS.getElementById("myhpbarId")),monsterhpbarId.snapToPixelEnabled=!0,TweenLite.ticker.addEventListener("tick",Lw.update,Lw),(n=new uS.Graphics).lf(["#800","#c00","#c00","#800"],[0,.3,.7,1],0,0,0,14).drawRect(0,0,192,14),Iw=new uS.Shape(n),Lw.addChild(Iw),(ww=new uS.Text("","12px Arial","#fff")).set({x:96,y:8,textAlign:"center",textBaseline:"middle"}),ww.shadow=new uS.Shadow("#000",1,1,0),Lw.addChild(ww),pethpbarId=new uS.Stage(mS.getElementById("pethpbarId")),monsterhpbarId.snapToPixelEnabled=!0,TweenLite.ticker.addEventListener("tick",pethpbarId.update,pethpbarId),(n=new uS.Graphics).lf(["#800","#c00","#c00","#800"],[0,.3,.7,1],0,0,0,14).drawRect(0,0,192,14),Tw=new uS.Shape(n),pethpbarId.addChild(Tw),(Bw=new uS.Text("","12px Arial","#fff")).set({x:96,y:8,textAlign:"center",textBaseline:"middle"}),Bw.shadow=new uS.Shadow("#000",1,1,0),pethpbarId.addChild(Bw),Dw=new uS.Stage(mS.getElementById("spellbarId")),monsterhpbarId.snapToPixelEnabled=!0,TweenLite.ticker.addEventListener("tick",Dw.update,Dw);var n;(n=new uS.Graphics).lf(["#808","#c0c","#c0c","#808"],[0,.3,.7,1],0,0,0,14).drawRect(0,0,125,14);var t=new uS.Shape(n);Dw.addChild(t)}(),ga(),zy.leechRatio=.25,zy.wraithRatio=.15;var Kw=!1,Ww=!1,Ow=1,Xw=1,Vw=1,_w=1,$w=q(),Uw=q(),Jw=q(),Zw=q(),eC=q(),aC=(q(),q()),nC=q(),tC=1,iC=!0,oC=!1,rC=!1,iC=!1,lC=!1,sC=!1,dC=!1,cC=!1,mC=q(),uC=q(),fC=1,hC=q(),gC=q(),pC=1,bC=1,vC=0,yC=q(),kC=1,SC=!1,IC=q(),wC=q(),CC=0,MC=q(),TC=q(),BC=q(),DC=!1,LC=0,HC=0,AC=1,xC=q(),EC=0,GC=q(),qC=!1,PC=!1,QC=!1,RC=q(),FC=q(),NC=!1,jC=!1,zC=!1,YC=!1,KC=!1,WC=q(),OC=q(),XC=q(),VC=!1,_C=0,$C=q(),UC=0,JC=!1,ZC=q(),eM=!1,aM=0,nM=0,tM=q(),iM=!0,oM=0,rM=q(),lM=!1,sM=0,dM=0,cM=!1,mM=0,uM=q(),fM=!1,hM=q(),gM=0,pM=!1,bM=q(),vM=0,yM=!1,kM=!1,SM=q(),IM=!1,wM=0,CM=q(),MM=q(),TM=!1,BM=!1,DM=0,LM=0,HM=0,AM=q(),xM=q(),EM=!1,GM=q(),qM=q(),PM=!1,QM=q(),RM=q(),FM=!1,NM=q(),jM=q(),zM=!1,YM=q(),KM=q(),WM=0,OM=0,XM=q(),VM=!1,_M=q(),$M=q(),UM=0,JM=0,ZM=0,eT=0,aT=q(),nT=q(),tT=q(),iT=!1,oT=q(),rT=q(),lT=q(),sT=q(),dT=q(),cT=q(),mT=!1,uT=q(),fT=q(),hT=0,gT=!1,pT=0,bT=0,vT=q(),yT=!1,kT=0,ST=q(),IT=!1,wT=0,CT=0,MT=0,TT=0,BT=0,DT=q(),LT=!1,HT=0,AT=q(),xT=0,ET=!0,GT=!1,qT=q(),PT=!1,QT=0,RT=0,FT=q(),NT=!1,jT=!1,zT=0,YT=q(),KT=!1,WT=0,OT=0,XT=0,VT=0,_T=0,$T=q(),UT=0,JT=q(),ZT=!1,eB=0,aB=q(),nB=!1,tB=0,iB=0,oB=0,rB=0,lB=q(),sB=!1,dB=q(),cB=q(),mB=!1,uB=!1,fB=!1,hB=0,gB=0,pB=0,bB=q(),vB=!1,yB=q(),kB=0,SB=0,IB=0,wB=!1,CB=q(),MB=q(),TB=!1,BB=!1,DB=!1,LB=0,HB=0,AB=q(),xB=!1,EB=0,GB=0,qB=!1,PB=q(),QB=!1,RB=!1,NB=0,jB=0,zB=0,YB=0,KB=0,WB=0,OB=0,XB=q(),VB=0,_B=!1,$B=q(),UB=q(),JB=q(),ZB=q(),eD=q(),aD=q(),nD=q(),tD=q(),iD=q(),oD=q(),rD=q(),lD=q(),sD=q(),dD=q(),cD=q(),mD=q(),uD=q(),fD=q(),hD=(q(),q()),gD=q(),pD=q(),bD=q(),vD=q(),yD=q(),kD=q(),SD=q(),ID=q(),wD=q(),CD=q(),MD=q(),TD=q(),BD=q(),DD=q(),LD=q(),HD=q(),AD=q(),xD=q(),XI=!1,ED=q(),GD=1,qD="",PD="",QD="",RD=Yy.level-~~(3*dS.random()),FD=0,ND=0,jD=0,zD=0,YD=0,KD=0,WD=0,OD=0,XD=0,VD=0,_D="",$D="",UD="",JD="",ZD=10,eL=q(),aL=!1,nL=!1,tL=!1,iL=!1,oL=!1,rL=!1;Wy[0].petDot=!1,Wy[1].petDot=!1,Wy[2].petDot=!1,Wy[3].petDot=!1;var lL=0,sL=0,dL=q(),cL=q(),mL=q(),uL=q(),fL=1,hL=0,gL=0,pL="",bL=1,vL=0,yL=0,kL=0,SL=0,IL=1,wL=1,CL=1,ML=1,TL=1,BL=1,DL=1,LL=1,HL=0,AL=10,xL=1,EL=100,GL=1,qL=1,PL=0,RL=1,FL=1,NL=1,jL=0,zL=1,YL=q(),KL=q(),WL=q(),OL=q(),XL=q(),VL=(q(),q()),_L=q(),$L=q(),UL=q(),XL=q(),JL=1,ZL=1,eH=1,aH=!1,nH=(new H,new H,1),tH="evocation",iH="",oH=0,rH=0,lH=1,sH=1,dH=q(),cH=q(),mH=q(),uH=q(),fH=0,hH=1,gH=1,pH=1,bH=0,vH=0,gH=1;zy.levelMax=[100,276,441,624,825,1044,1281,1536,1809,2650,3014,3396,3796,4214,5400,5904,6426,6966,7524,9100,9744,10406,11086,11784,13750,14534,15336,16156,16994,19650,20584,21536,22506,23494,26600,27684,28786,29906,31044,34600,35834,37086,38356,39644,44100,45494,46906,48336,49784,54750,56304,57876,59466,61074,67100,68824,70566,72326,74104,81300,83204,85126,87066,89024,97500,99594,101706,103836,105984,115850,118144,120456,122786,125134,135750,138244,140756,143286,145834,166800,169614,172446,175296,178164,206550,209754,212976,216216,219474,267750,271544,275356,279186,283034,676400,3775584,23652286,68686338],zy.drawMonsterHp=function(e,a){if(e===bL){var n=Wy[e].hp/Wy[e].maxHp;!0===a?(cS.killTweensOf(monsterHpBar1),cS.killTweensOf(monsterHpBar2),cS.set([monsterHpBar1,monsterHpBar2],{scaleX:n})):(cS.to(monsterHpBar1,.25,{scaleX:n,ease:pS.cout}),cS.to(monsterHpBar2,.5,{scaleX:n,ease:pS.xin}));var t=Wy[e].hp+" / "+Wy[e].maxHp+" - "+dS.ceil(100*n)+"%";monsterText.text=t,"Warrior"===Yy.job&&Ri()}},zy.drawMyHp=function(){var e=zy.maxHpFunct();Yy.hp>e&&(Yy.hp=e);var a=Yy.hp/e,n=mS.getElementById("myhp");void 0!==n&&null!=n&&(n.textContent=Yy.hp),cS.to(Iw,.25,{scaleX:a});var t=Yy.hp+" / "+e+" "+dS.ceil(100*a)+"%";if(ww.text=t,"Shaman"===Yy.job&&!1===zH.d.cannibalize&&(Yy.hp<dS.round(.18*Yy.maxHp)?Ei("cannibalize","-700% -300%"):Ei("cannibalize","-700% 0")),!0===zy.petAlive){ND>FD&&(ND=FD);a=ND/FD;cS.to(Tw,.25,{scaleX:a});i=ND+" / "+FD+" "+dS.ceil(100*a)+"%";Bw.text=i}else if(!0===Wy[hT].charmStatus){Wy[hT].hp>Wy[hT].maxHp&&(Wy[hT].hp=Wy[hT].maxHp);a=Wy[hT].hp/Wy[hT].maxHp;cS.to(Tw,.25,{scaleX:a});var i=Wy[hT].hp+" / "+Wy[hT].maxHp+" "+dS.ceil(100*a)+"%";Bw.text=i}},zy.drawMyMp=function(e){e&&(Yy.mp=Yy.mp+e),Yy.maxMp=zy.maxMpFunct(),Yy.mp<0&&(Yy.mp=0),("Monk"===Yy.job||"Rogue"===Yy.job||"Warrior"===Yy.job)&&Yy.mp>=100&&(Yy.mp=100),Yy.mp>Yy.maxMp&&(Yy.mp=Yy.maxMp);var a=Yy.mp/Yy.maxMp;if(Yy.level<=8&&("Ranger"===Yy.job&&(a=0,Yy.mp=0),"Paladin"===Yy.job&&(a=0,Yy.mp=0),"Shadow Knight"===Yy.job&&(a=0,Yy.mp=0)),cS.to(Cw,.25,{scaleX:a}),Yy.maxMp>0){if("MP"===rI){n=Yy.mp+" / "+Yy.maxMp+" "+dS.ceil(100*a)+"%";Mw.text=n}else{var n=Yy.mp+" / "+Yy.maxMp;Mw.text=n}var t=mS.getElementById("mymp");void 0!==t&&null!==t&&(t.textContent=Yy.mp)}zy[wH.CheckSkills]()},spellCanceled=!1,e(n).ready(function(){e("button").on("click",function(){return!1})}),e(n).ready(function(){e("img").on("dragstart",function(e){e.preventDefault()})}),e(function(){e("#deathScreen").on("click","#battleReportOK",function(){!function(){e("#deathScreen").css("display","none"),cv("#ffff99"),spellCurtain.alpha=.7,cS.to(spellCurtain,3,{alpha:0,ease:pS.Qin}),e("#mobBar").css("visibility","hidden"),"Warrior"!==Yy.job&&"Monk"!==Yy.job&&"Rogue"!==Yy.job||(Yy.mp=0),zy.maxHpFunct(),zy.maxMpFunct(),Yy.hp=~~(Yy.maxHp/2),Yy.mp=0,zy.drawMyHp(),zy.drawMyMp(),pL="",NG.mobTraits.innerHTML="";for(var a=0;a<=4;a++)Wy[a].name="",Wy[a].ID=0,Wy[a].attackStatus=1,it(a),qw[a].innerHTML="";Fn(),Nn("You have been resurrected!"),Nn("You lost "+zy.lostGold+" gold."),fa("You lost "+zy.lostGold+" gold.",2),zy.lostExp>0&&(Nn("You lost "+zy.lostExp+" experience!"),fa("You lost "+zy.lostExp+" experience!",2)),ny(),iS.restart(),oS.restart(),ca(),Qn(),zy.showPortal&&Fy()}(),Yt()}),e("#intro").on("click","#resetGame",function(){Tn()})});var yH=function(){var e=!1;return(AS||xS||GS)&&(e=!0),e}(),kH=function(){var e=!1;return(qS||PS||ES)&&(e=!0),e}(),SH="ogg";!0===kH&&(SH="mp3"),function(){musicAssets=[],musicStrings=[],musicAssetsNumber=0;for(var e=0;e<=9;e++)musicAssets[e]="",musicStrings[e]=""}(),e("#bgmusic").on("ended",function(){var e=mS.getElementById("bgmusic");e.currentTime=0,e.play()}),e("#bgamb1").on("ended",function(){var e=mS.getElementById("bgamb1");e.currentTime=0,e.play()}),e("#bgamb2").on("ended",function(){var e=mS.getElementById("bgamb2");e.currentTime=0,e.play()});var IH=!!mS.createElement("audio").canPlayType;pageDoneLoading=!1,e(function(){e("#pethpbardiv, #spellbardiv").draggable({containment:"#gameView",scroll:!1,stop:function(){Na(e(this).attr("id"))}}),e("#myhpbardiv").draggable({containment:"#gameView",scroll:!1,cancel:"#buffWindow",stop:function(){Na(e(this).attr("id"))}}),e("#mobBar").draggable({containment:"#gameView",scroll:!1,cancel:".mobIcons",stop:function(){Na(e(this).attr("id"))}}),e("#window1,#inventoryWindow,#questJournal").draggable({containment:"#gameView",scroll:!1,handle:"#statHeader,#invHeader,#questHeader",start:function(){zy.draggingWindows=!0},stop:function(){Na(e(this).attr("id")),cS.delayedCall(.05,function(){zy.draggingWindows=!1})}})}),e("#lastName").on("keydown",function(a){var n=a.keyCode;if(!(n>=65&&n<=90||8===n||46===n||n>=35&&n<=37||39===n))return!1;var t=e("#lastName");Yy.lastName=t.val()}),e("#gameView").on("click","#lastNameOK",function(){if(!(e("#lastName").val().length<2)){var a=e("#lastName").val().replace(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz]/g,"");Yy.lastName=a.charAt(0).toUpperCase()+a.slice(1),e("#lastNameWrap").css("display","none"),fa("You shall now be known as "+Yy.name+" "+Yy.lastName+"!",2),e("#myName").html(Yy.name+" "+Yy.lastName)}}),e("#gameView").on("click","#lastNameCancel",function(){e("#lastNameWrap").css("display","none"),Pk=!1}),e("#charnameinput").on("keydown",function(a){var n=a.keyCode;if(!(n>=65&&n<=90||8===n||46===n||n>=35&&n<=37||39===n))return!1;var t=e("#charnameinput");Yy.name=t.val()}),e("#window3").on("mouseenter","#window3a > li",function(){!0===hI&&e(this).css({boxShadow:"-25px 0 rgba(112, 192, 255, .25) inset, 25px 0 rgba(112, 192, 255, .25) inset, 0 -25px rgba(112, 192, 255, .25) inset, 0 25px rgba(112, 192, 255, .25) inset"})}).on("mouseleave","#window3a > li",function(){!0===hI&&e(this).css({boxShadow:"1px 0 #000 inset, 0 1px 0 #000 inset, 0 -1px #000 inset, -1px 0 #000 inset"})});var wH;e(function(){e("#window5Id").on("mouseenter",function(){cS.to(mS.getElementById("window5Id"),.2,{opacity:1})}).on("mouseleave",function(){"On"===kw.hideMenu&&cS.to(mS.getElementById("window5Id"),.2,{opacity:0})})}),e(".chatLogs").on("mousedown",function(){_S=!0}).on("mouseup",function(){_S=!1}),e(function(){e("#characterSelectScreen").on("click","#enterworld",function(){function a(){RS.my&&RS.item&&RS.eq&&RS.q&&yn()}var n=e("#characterslot"+fH).children().first().text();n&&(e("#characterSelectScreen").remove(),Nn("Loading data: "+n),e.ajax({url:"/classic/php/loadData1.php",data:{run:"loadItem",name:n}}).done(function(t){"string"==typeof t?"false"==t&&(Nn("Your previous character has not timed out yet.",0,0,15e3),Nn("Use Camp when you're done playing your character.",0,0,15e3)):(t.forEach(function(e,a){bS.item[a].name=e.name;var n=L.parse(e.json);for(var t in n)bS.item[a][t]=n[t]}),RS.item=!0,e.ajax({url:"/classic/php/loadData1.php",data:{run:"loadMy",name:n,ng:"false"}}).done(function(e){if("Your session has expired."==e)return xy(e),void kn();if("down"==e)return xy("The server is down for maintenance. Please try again later."),void kn();if(e.dead)return xy("This character was slain and cannot be revived."),xy("Rest in peace, "+n+"."),void kn();if("Account has been suspended."==e)return xy(e),void kn();if("Account has been banned."==e)return xy(e),void kn();var t=L.parse(L.stringify(e.json));delete e.json,Yy=e;for(var i in t)Yy[i]=t[i];gS.my("local"),RS.my=!0,a(),function(){var e=[];"Warrior"===Yy.job&&(e=["kick","slam","punchedRed","hemorrhage","bloodDrop","shockwave","subjugate","decisiveBlow","tremor","absorbSpell","bulwark","buffRings","intrepidMight","kick","yellowLight3","burst","blueNova"]),"Monk"===Yy.job&&(e=["fearImage2","tigerStrike","eagleStrike","whiteLight3","cheetahStrike","cobraStrike","dragonStrike","burst","burstRed","craneKick","windmillKick","tremor","ancestralFlurry","ancestralFlurry2","lineNova","burstGreen","chakraBlast","smoke","whiteRays","yellowLight3","flyingKick","frostNova","lightningBlast"]),"Rogue"===Yy.job&&(e=["blindImage","shadowStrike","widowStrike","poisonDrop","burst","burstRed","lacerate","bloodDrop","lineNovaWhite","tremorFG","tremorBG","prowlingGash","coldBlood","ancientWill","tremor","mirageStrike","poisonSpray"]),"Shadow Knight"===Yy.job&&(e=["fearImage2","slam","crescentCleave","deathStrike","harmTouch","bloodDrop","purpleLight3","orangeLight3","tealLight3","magentaLight3","lineNovaRed","lifeTap","greenLight3","darkTremor","redLight3"]),"Paladin"===Yy.job&&(e=["rootImage","slam","rebuke","retribution","purge","vengeance","lineNovaPink","vengeanceL","blueLight3","magentaLight3","greenLight3","whiteLight3","tremor","yellowLight3","tealLight3","lineNovaMagenta","ardentJudgment","buffRings","lightningBlast","benediction","benedictionFloor"]),"Ranger"===Yy.job&&(e=["orbIcon","kick","redLight3","blueLight3","greenLight3","yellowLight3","tealLight3","rngFire","rngSmoke","rngFireOut","counterShot","arrow","lineNova","ignite","snare","whiteLight3","buffRings","lightningBlast","petExplosion"]),"Bard"===Yy.job&&(e=["sleepImage","drainFG","blueLight3","greenLight3","tealLight3","redLight3","orangeLight3","yellowLight3","whiteLight3","drainBG","purpleLight3","heart","lineNovaMagenta","rngSmoke","chainFG","chainBG","benediction","benedictionFloor","tremorFG","tremorBG","burst"]),"Druid"===Yy.job&&(e=["rootImage","redLight3","purpleLight3","blueLight3","greenLight3","whiteLight3","orangeLight3","yellowLight3","tealLight3","ignite","lightningBlast","fissure","boulder","tornado","snare"]),"Cleric"===Yy.job&&(e=["rootImage","orangeLight3","yellowLight3","blueLight3","tealLight3","martyrsBlessing","greenLight3","magentaLight3","lineNovaMagenta","expelCorruption","lineNova","holyMight","buffRings","guardianAngel","benediction","benedictionFloor","tremor","lightningNova","retribution"]),"Shaman"===Yy.job&&(e=["rootImage","sleepImage","freezeRoot","tealLight3","redLight3","greenLight3","blueLight3","purpleLight3","frostStrike","poisonNova","whiteLight3"]),"Necromancer"===Yy.job&&(e=["fearImage2","greenLight3","yellowLight3","redLight3","purpleLight3","magentaLight3","boneSpirit","lifeTap","buffRings","diamondSkin","asystole","detonation","corpseExplosion","howlingTerror","lineNovaRed","orangeLight3"]),"Enchanter"===Yy.job&&(e=["blueLight3","magentaLight3","orangeLight3","whiteLight3","purpleLight3","tealLight3","heart","mysticRune","windmillKick","colorShift"]),"Magician"===Yy.job&&(e=["iceIcon","blindImage","snare","redLight3","yellowLight3","greenLight3","whiteLight3","tealLight3","orangeLight3","lavaBolt","frozenOrb","fireparticle50","manaShield","purpleRings","psionic1","psionic2","psionic3","psionic4","petExplosion","alteredState2","tremor","freezeRoot","yellowOrb"]),"Wizard"===Yy.job&&(e=["iceIcon","freezeRoot","frostNova","iceBolt","tealLight3","blueLight3","redLight3","whiteLight3","yellowLight3","orangeLight3","chargedBolts","chargedBolts2","magicMissile","fireball","glacialSpike","iceComet","meteor","fissure","chainLightning","chainFG","chainBG","fireBolt","staticBolt","tremor"]),e.push("bloodSpray");for(var a=0,n=e.length;a<n;a++){var t=new Image;t.src="/classic/images1/"+e[a]+".png",vI[400+a]=t}}()}).fail(function(){Nn("Server Error! Failed to load character values.")}),e.ajax({url:"php/loadData1.php",data:{run:"loadEq",name:n}}).done(function(e){e.forEach(function(e,a){if(bS.eq[a].name=e.name,e.json){var n=L.parse(e.json);for(var t in n)bS.eq[a][t]=n[t]}}),RS.eq=!0,a(),Hn()}).fail(function(){Nn("Server Error! Failed to load equipment values.")}),da(),e.ajax({url:"/classic/php/loadData1.php",data:{run:"loadQ",diff:Yy.difficulty-1,name:n}}).done(function(e){for(var n=0;n<=2;n++){var t=L.parse(e[n]);for(var i in t)bS.Q[n][i]=t[i]}zy.difficulty=RS.difficulty,RS.q=!0,function(){var e=sa();if(bS.Q[e].repeatCm3)for(bS.Q[e].repeatCm3=0,a=1;a<=6;a++)bS.Q[e]["CM"+a]=0;if(bS.Q[e].repeatCt3)for(bS.Q[e].repeatCt3=0,bS.Q[e].CazicThule=4,a=1;a<=3;a++)bS.Q[e]["CT"+a]=0;if(bS.Q[e].repeatKk3)for(bS.Q[e].repeatKk3=0,a=1;a<=5;a++)bS.Q[e]["KK"+a]=0;if(bS.Q[e].repeatKk4)for(bS.Q[e].repeatKk4=0,a=6;a<=8;a++)bS.Q[e]["KK"+a]=0;if(bS.Q[e].repeatNl3)for(bS.Q[e].repeatNl3=0,a=1;a<=2;a++)bS.Q[e]["NL"+a]=0;if(bS.Q[e].repeatLg3)for(bS.Q[e].repeatLg3=0,a=1;a<=5;a++)bS.Q[e]["LG"+a]=0;if(bS.Q[e].repeatNl4||bS.Q[e].NL12>=2)for(bS.Q[e].repeatNl4=0,a=7;a<=12;a++)bS.Q[e]["NL"+a]=0;if(bS.Q[e].repeatPk4)for(bS.Q[e].repeatPk4=0,a=1;a<=9;a++)bS.Q[e]["PK"+a]=0;if(bS.Q[e].PF22>=1)for(a=1;a<=22;a++)bS.Q[e]["PF"+a]=0;if(bS.Q[e].PH13>=1)for(a=1;a<=13;a++)bS.Q[e]["PH"+a]=0;if(bS.Q[e].NagafensLair>5&&(bS.Q[e].NagafensLair=5),bS.Q[e].PermafrostKeep>5&&(bS.Q[e].PermafrostKeep=5),bS.Q[e].KedgeKeep>5&&(bS.Q[e].KedgeKeep=5),bS.Q[e].PlaneofFear>2&&(bS.Q[e].PlaneofFear=2),bS.Q[e].PlaneofHate>2&&(bS.Q[e].PlaneofHate=2),bS.Q[e].Crushbone>4||bS.Q[e].repeatCB||bS.Q[e].CB5>=2)for(bS.Q[e].repeatCB=0,bS.Q[e].Crushbone=4,a=1;a<=5;a++)bS.Q[e]["CB"+a]=0;if(bS.Q[e].EstateofUnrest>4||bS.Q[e].repeatER){bS.Q[e].repeatER=0,bS.Q[e].EstateofUnrest=4;for(var a=1;a<=5;a++)bS.Q[e]["ER"+a]=0}gS.quests()}(),a()}).fail(function(){Nn("Server Error! Failed to load quest values."),kn()}))}).fail(function(){Nn("Server Error! Failed to load item values.")}))}).on("click","#createcharacter",function(){e(".characterActive:visible, .characterDisabled:visible").length>=16?xy("You cannot create anymore characters!"):(fH=iw,on(),za(),Ya(),bk=5,vk=15,yk=0,kk=0,Sk=0,wk=5,Ik=0,rn(),mS.getElementById("createWindowId").style.display="block",Sn(),cS.to("#characterSelectScreen",0,{opacity:0,onComplete:function(){this.target.css("display","none"),e("#ccBg").css("display","block"),cS.to("#ccBg",.5,{startAt:{opacity:0},opacity:1,ease:pS.lin,onComplete:function(){var a=e("#charnameinput");a.focus(),Yy.name=a.val(),sn(),zy.view="Create"}})}}))}).on("mousedown","#characterslot1",function(){In(1)}).on("mousedown","#characterslot2",function(){In(2)}).on("mousedown","#characterslot3",function(){In(3)}).on("mousedown","#characterslot4",function(){In(4)}).on("mousedown","#characterslot5",function(){In(5)}).on("mousedown","#characterslot6",function(){In(6)}).on("mousedown","#characterslot7",function(){In(7)}).on("mousedown","#characterslot8",function(){In(8)}).on("mousedown","#characterslot9",function(){In(9)}).on("mousedown","#characterslot10",function(){In(10)}).on("mousedown","#characterslot11",function(){In(11)}).on("mousedown","#characterslot12",function(){In(12)}).on("mousedown","#characterslot13",function(){In(13)}).on("mousedown","#characterslot14",function(){In(14)}).on("mousedown","#characterslot15",function(){In(15)}).on("mousedown","#characterslot16",function(){In(16)}).on("click","#deletecharacter",function(){Qa("button_2"),""!==e("#characterslot"+fH).children().first().text()&&(e("#deletecharfade").css({opacity:0,display:"block"}).animate({opacity:.66},311,"easeOutQuad"),e("#deletecharconfirm,#deleteConfirm,#deleteCancel").css({opacity:0,display:"block"}).animate({opacity:1},311,"easeOutQuad"),e("#deleteconfirmmsg").html("Delete "+e("#characterslot"+fH).children().first().text()+"?<br>Are You Sure?"),e("#deleteConfirm").removeClass("disabled"))}).on("click","#deleteConfirm",function(){!function(){if(!0!==e("#deleteConfirm").hasClass("disabled")){var a=e("#characterslot"+fH).children().first().text();Qa("button_2"),e("#deleteConfirm").addClass("disabled"),e("#deleteconfirmmsg").html("Deleting "+a+". Please Wait."),cS.delayedCall(.1,function(){e("#deletecharfade").stop(!0,!0).animate({opacity:0},99,function(){e(this).css("display","none")}),e("#deletecharconfirm,#deleteConfirm,#deleteCancel").animate({opacity:0},99,function(){e(this).css("display","none")}),e.ajax({data:{run:"deleteCharacter",name:a}}).done(function(e){mS.getElementById("characterslot"+fH).style.display="none";for(var a=1;a<=16;a++)"inline-block"!==mS.getElementById("characterslot"+a).style.display||In(a);tw-=1,$n(),zn()}).fail(function(){Nn("Failed to contact the server.")})})}}()}).on("click","#deleteCancel",function(){Dn()}).on("click","#deletecharfade",function(){Dn()}),e("#createWindowId").on("click","#createbuttonId",function(){var a=e("#charnameinput").val().replace(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz]/g,"");return Yy.name=a.charAt(0).toUpperCase()+a.slice(1),""===Yy.name?(e("#charnameinput").focus(),void e("#creationInfo").html("Enter your character's name!")):Yy.name.length<2?(e("#charnameinput").focus(),void e("#creationInfo").html("Your name must be at least two characters long!")):void(!1===LS&&(zy.lockScreen(),Nn("Contacting server..."),e.ajax({data:{run:"addCharacterSlot"}}).done(function(a){if("maxed"==a)Nn("You cannot have more than 16 character slots per account.");else if("buyCrystals"==a)Nn("Please purchase Never Crystals to unlock additional character slots.");else if("pay150"==a){Qa("buyitem"),Nn("Character slot purchased for 150 Never Crystals.");var n=1*e("#crystalCount").text();e("#crystalCount").text(n-150),dn()}else"create"==a&&dn();zy.unlockScreen()}).fail(function(){Tv()})))}).on("click","#cancelbuttonId",function(){Qa("button_2"),e("#ccBg").css({display:"none",opacity:0}),e("#characterSelectScreen").css({display:"block",opacity:0}),In(iw),zn()}).on("click","#humanId",function(){za()}).on("click","#eruditeId",function(){Yy.race="Erudite",ja(),mS.getElementById("creationInfo").innerHTML="Erudites live in the city of Wexxen and are a racial offshoot of humans known for their acumen and their intellect. Despite their common ancestry with humans, generations of geographic isolation and cultural dedication to the magic have left them weaker than their human counterparts. With the largest intelligence bonus of any race, they are gifted spellcasters, but they manage to make formidable paladins and shadow knights as well.<br><br>Racial skill: Surround yourself with a chromatic aegis that makes you highly resistant to all magic."}).on("click","#barbarianId",function(){Yy.race="Barbarian",ja(),mS.getElementById("creationInfo").innerHTML="Barbarians share common ancestry to humans and live in the city of Fenwoven. They evolved as a stronger, hardier race due to the harsh conditions of the frigid north, but lost some of their innovative qualities due to a strong tribal mindset. TheRenowned for their ferocity in battle, they receive a generous boost to strength, stamina, and wisdom. Barbarians are known to be excellent shaman and warriors, though they make surprisingly adept rogues as well.<br><br>Racial skill: Summon the strength of your ancestors to bolster your might, increasing all damage."}).on("click","#highelfId",function(){Yy.race="High Elf",ja(),mS.getElementById("creationInfo").innerHTML="High elves live in the city of Prentia. They are descendants of a royal elven bloodline who once ruled the Empire before the Age of Shattering. High Elves are an intrinsically spiritual race that have deep cultural commitment to their God, Altheim, the God of Light. Their commitment to the arcane arts has softened their bodies over the generations, but they have excellent intelligence and wisdom. Despite their light frames, they are known to make great Paladins due to their excellent healing skills.<br><br>Racial skill: Enhanced passive mana regeneration."}).on("click","#woodelfId",function(){Yy.race="Wood Elf",ja(),mS.getElementById("creationInfo").innerHTML="Wood elves dwell in the city of Artremia. Their culture is deeply aligned with Rinara, the Goddess of nature. They spiritually hold that what is natural is considered the most holy. In turn, Rinara's providence blesses wood elves with excellent agility and dexterity. Among the elven races, their wisdom is second only to the high elves.<br><br>Racial skill: Wood Elves use a skill called Camouflage to blend into their surroundings. Camouflage makes them untargetable for six seconds and their next attack benefits from enhanced damage."}).on("click","#darkelfId",function(){Yy.race="Dark Elf",ja(),mS.getElementById("creationInfo").innerHTML="Dark elves are known for their savagery compared to their elven relatives. They have long been left to their own devices deep in the subterranean city of Vedria. There they are rumored to practice summon demons and perform ritual sacrifice and worship Wenerva, the Goddess of Destruction. Their unforgiving culture have made them hostile, but deadly with both magic and steel.<br><br>Racial skill: Absorb health from your target based on your damage."}).on("click","#halfelfId",function(){Yy.race="Half Elf",ja(),mS.getElementById("creationInfo").innerHTML="Half elves hail from the city of Kaedorn. They carry are a mixture of human and elven blood in their veins. Due to their multi-racial background, they have a blend of abilities and traits from both races. Since the Age of Shattering, they have managed to establish a city for themselves in an attempt to carve out their own unique identity and culture.<br><br>Racial skill: Hybrid vigor snaps you free from stun and fear effects and rapidly restores health."}).on("click","#dwarfId",function(){Yy.race="Dwarf",ja(),mS.getElementById("creationInfo").innerHTML="Dwarves are a hardy race from the depths of Dunhoven, a subterranean city. Worship of Grynnhoven, the God of the Underworld, is powerfully woven into daily Dwarven life as each gem mined is seen as a divine blessing. Dwarf healers are renowned as some of the finest in all of Vandamor due to their natural wisdom. They are also stout warriors and thieves thanks to their rare gifts of strength, agility, and dexterity<br><br>Racial skill: Your skin turns to granite, greatly reducing all damage taken."}).on("click","#gnomeId",function(){Yy.race="Gnome",ja(),mS.getElementById("creationInfo").innerHTML="Gnomes are a race of brilliant scholars, engineers, and tinkerers from Brindomir. Their passion for knowledge makes them excellent spellcasters, yet some are known to wield the steel on occasion. Their ingenuity always seems to yield a solution from nowhere in the thick of battle.<br><br>Racial skill: All gnomes can trap their target in a Warp Field, sealing them from the field of combat. While trapped in a warp field, they are unable to fight or be fought. Gnomes are also immune to silence effects."}).on("click","#halflingId",function(){Yy.race="Halfling",ja(),mS.getElementById("creationInfo").innerHTML="Halflings are a race of pranksters, acrobats, and bandits from Aspen Grove. They are known to be among the most gifted scouts in all of Vandamor. They have a quirky ability to disappear at a moment's notice. They are also touted for their natural healing skills.<br><br>Racial skill: Halflings have reduced run skill cooldown, gain experience faster, find more treasure, and have the ability to hide. While you are hidden, you may ambush targets for enhanced damage."}).on("click","#trollId",function(){Yy.race="Troll",ja(),mS.getElementById("creationInfo").innerHTML="Trolls are a race from the city of Slagnon. With very few exceptions, Trolls worship Megnemon, the God of Sacrifice, who believe that their God requires blood sacrifice in order to enjoy continued strength and prosperity as a race. They are a cannibalistic, warmongering race with astonishing resilience in battle. They are feared throughout Vandamor due to their super strength, stamina, and regeneration.<br><br>Racial skill: Increased passive health regeneration."}).on("click","#ogreId",function(){Yy.race="Ogre",ja(),mS.getElementById("creationInfo").innerHTML="Ogres are a race from the city of Gorgek in. Firm belief in might makes right makes widespread worship of Trogmaar, the God of War, very common among the Ogres. Despite their bumbling intellects, they are superb warriors and Shadow Knights. Their strength and stamina are second to none, but they lack almost everything else.<br><br>Racial skill: Ogres cannot be stunned."}).on("click","#warriorId",function(){Ya()}).on("click","#monkId",function(){Ka()}).on("click","#rogueId",function(){Wa()}).on("click","#paladinId",function(){Oa()}).on("click","#rangerId",function(){Xa()}).on("click","#skId",function(){Va()}).on("click","#bardId",function(){_a()}).on("click","#clericId",function(){$a()}).on("click","#druidId",function(){Ua()}).on("click","#shamanId",function(){Ja()}).on("click","#necromancerId",function(){Za()}).on("click","#enchanterId",function(){en()}).on("click","#magicianId",function(){an()}).on("click","#wizardId",function(){nn()}).on("click","#maleId",function(){on()}).on("click","#femaleId",function(){mS.getElementById("creationInfo").innerHTML="Females receive a bonus to wisdom and passive health regeneration.",Yy.gender="Female",Ck=0,Mk=0,Gwis=5,mS.getElementById("femaleId").className="genderButtonsOff strongShadow ccActive",mS.getElementById("maleId").className="genderButtonsOff strongShadow ccDisabled",rn()}).on("click","#normalId",function(){Sn()}).on("click","#hardcoreId",function(){e("#normalId").removeClass("ccActive ccDisabled").addClass("ccDisabled"),e("#hardcoreId").removeClass("ccActive ccDisabled").addClass("ccActive"),Yy.hardcoreMode=!0,xy("WARNING: Hardcore death is permanent!")}),e("#cityWrap").on("click","#bankId",function(){my()}).on("click","#talentsId",function(){e("#upgradeOK").text("Ok"),e("#upgradeCANCEL").text("Cancel"),Fa(),VI=!1,TI=!0,UI=!1,JI=!0,e("#upgradeConfirm").css("left",350),Rk=dS.ceil(dS.pow(Yy.level,1.6)),e("#upgradePrompt").html("Reset all talents?");var a="<div class='cityCostAmount goldIcon'>"+Rk+"</div>";e("#upgradeConfirm2").html(a)}),e("#charsheetId").on("click",function(){cy()}),e("#inventoryId").on("click",function(){py()}),e("#travelId").on("click",function(){gy()}),e("#optionsId").on("click",function(){uy()}),e("#questId").on("click",function(){fy()}),e("#campId").on("click",function(){!function(){if("Game"===zy.view)if("true"===Yy.hardcoreMode&&Yy.hp<=0);else{if(!0===ya())return void xy("You cannot camp during a battle!");B.onbeforeunload=null,JS=!0,Nn("Saving Game... Please Wait"),Da(),Bn()}}()})}),e(n).ready(function(){e("#normalLabel").on("click",function(){Yy.difficulty=1,RS.difficulty=1,wn()}),e("#nightmareLabel").on("click",function(){Yy.difficulty=2,RS.difficulty=2,wn()}),e("#hellLabel").on("click",function(){Yy.difficulty=3,RS.difficulty=3,wn()})}),gS.itemSwap=function(a,n,t,i){Cn();var o=L.parse(L.stringify(bS[a][n])),r=L.parse(L.stringify(bS[t][i]));delete o.name,delete r.name;var l=L.stringify(o),s=L.stringify(r);e.ajax({url:"/classic/php/itemSwap2.php",data:{name1:bS[a][n].name,name2:bS[t][i].name,data1:l,data2:s,itemDragType:a,dragSlot:n,itemDropType:t,dropSlot:i,name:Yy.name}}).done(function(e){Mn()}).fail(function(e){Tv()})},gS.item=function(a){Cn();var n=L.parse(L.stringify(bS.item[a]));delete n.name,e.ajax({url:"/classic/php/game1.php",data:{run:"updateItem",json:L.stringify(n),itemName:bS.item[a].name,Slot:a,slotType:"item",name:Yy.name}}).done(function(e){Mn()}).fail(function(e){Tv()})},gS.eq=function(a){Cn();var n=L.parse(L.stringify(bS.eq[a]));delete n.name,e.ajax({url:"/classic/php/game1.php",data:{run:"updateItem",json:L.stringify(n),itemName:bS.eq[a].name,Slot:a,slotType:"eq",name:Yy.name}}).done(function(e){Mn()}).fail(function(e){Tv()})},gS.bank=function(a){Cn();var n=L.parse(L.stringify(bS.bank[a]));delete n.name,e.ajax({url:"/classic/php/game1.php",data:{run:"updateItem",json:L.stringify(n),itemName:bS.bank[a].name,Slot:a,slotType:"bank",name:Yy.name}}).done(function(e){Mn()}).fail(function(e){Tv()})},gS.GLB=function(){e.ajax({url:"/classic/php/game1.php",data:{run:"updateGLB",GLB:kw}}).fail(function(e){Tv()})},gS.my=function(a){if(!zy.hardcoreDeathStatus){var n=L.parse(L.stringify(Yy)),t=["name","lastName","exp","gold","title","hardcoreMode","job","level","race","difficulty","zone","zoneH","zoneN","subzone","subzoneN","subzoneH","comboOverall","views"],n={};for(var i in Yy)-1===t.indexOf(i)&&(n[i]=Yy[i]);e.ajax({url:"/classic/php/game1.php",data:{run:"updateMy",my:Yy,json:L.stringify(n)}}).done(function(e){!0===JS&&(Nn("Logging out..."),Tn())}).fail(function(e){Tv()})}},gS.Lmy=function(){localStorage.setItem("Lmy"+(FS+fH),L.stringify(Lmy))},gS.quests=function(){var a=L.stringify(bS.Q[sa()]);e.ajax({url:"/classic/php/game1.php",data:{run:"updateQuests",diff:sa(),Q:a,name:Yy.name}}).fail(function(e){Tv()})},e("#bank").on("click",".bankTabActive, .bankTabDisabled",function(){for(var a=n.getElementsByClassName("bankTab"),t=0,i=a.length;t<i;t++)a[t].className="bankTab bankTabDisabled";this.className="bankTab bankTabActive",aI=e(this).index(),xn(pI),Qa("button_2")}),e(function(){e("#window2zoneday").on("load",function(){dw++})}),e(function(){function a(){e.ajax({url:"/classic/php/keepAlive.php"}).always(function(){v(function(){a()},3e5)})}ua(),jn(),v(function(){!function(){var a="#loginPassword";null===localStorage.getItem("email")&&(a="#loginEmail"),e(a).focus()}()},1500),function(){if(null!==localStorage.getItem("email")){var a=localStorage.getItem("email");e("#loginEmail").val(a),e("#rememberEmail").prop("checked",!0)}}(),vw=!0,v(function(){a()},6e4)}),Xn(),e(function(){e("#gameView").on("mousedown",".equipment, .inventory, .bank, .city",function(){function a(){for(var e in Sw[0])Sw[0][e]=bS.item[Ok][e]}if(!(ew>0)){kw.ks>=7?mS.getElementById("destroyItem").textContent="Sell":mS.getElementById("destroyItem").textContent="Destroy",l=e(this);var n=bS.item[Ok],t=this.parentNode;if(this.id===Wk){if("equipment"===this.className)return void Ba();if("bank"===this.className){if(!1===(i=Kv()))return xy("There is no room in your inventory for that item."),void Ba();Xk=e("#"+(Kk="inv"+i)).parent().index();o=e("#"+Wk);Ew="inventory",Yk.kill(),mS.getElementById(Wk).parentNode.style.border="2px solid #111";return!0===(r=Iy())?(wy(),Gy(o)):!1===r?xy("You cannot put that item there."):"level"===r&&xy("Your level is not high enough to equip this item."),Qa("equipAccessory"),Aw=!1,void(Wk="")}}else if("city"===this.className){Ok=l.parent().index()+24;n=bS.item[Ok];if(ZI=!0,n.name){Ba(),Wk=l.attr("id"),Aw=!0,mS.getElementById(Wk).parentNode.style.border="2px solid #111",Sy(t),aw=!0,Qa("button_2");s=Qv(Ok);Rk=s;d=qy(bS.item[Ok].name,bS.item[Ok].rarity);return fa(cw+' says, "Buy '+d+" for "+s+' gold?"'),void a()}return xy("This item was previously sold. Please choose another item."),void Ba()}if(!0===l.hasClass("equipment")&&(ZI=!1),aw=!1,VI){if(Qa("button_2"),l.hasClass("bank")||l.hasClass("equipment"))return xy("You must select an item in your inventory!"),void Fa();Wk=l.attr("id"),Ok=l.parent().index();n=bS.item[Ok];if(xw="inventory","/classic/images1/blank.png"===l.attr("src"))Wk="",Aw=!1,xy("There seems to be nothing there."),Fa();else{if(n.upgrade>=10)return xy("That item cannot be upgraded anymore."),void Fa();if("cloth"!==n.type&&"leather"!==n.type&&"chain"!==n.type&&"plate"!==n.type&&"slashed"!==n.type&&"crushed"!==n.type&&"pierced"!==n.type&&"cleaved"!==n.type&&"smashed"!==n.type&&"shield"!==n.type&&"offhand"!==n.type&&"staff"!==n.type)return xy("That type of item cannot be upgraded."),void Fa();l=e(this).parent();if(Wk.length>0){if(Rk=25*(n.upgrade+1),Yy.gold<Rk)return xy("You don't have enough gold."),void Fa();Ty()}}}else{if(Wk.length>0&&!0===Aw){if(""!==Wk&&Wk===l.attr("id")){if(l.hasClass("bank")){ZI=!1;var i=Kv();if(!1===i)return xy("There is no room in your inventory for that item."),void Ba();Xk=e("#"+(Kk="inv"+i)).parent().index();o=e("#"+Wk);Ew="inventory",Yk.kill(),mS.getElementById(Wk).parentNode.style.border="2px solid #111";return!0===(r=Iy())?(wy(),Gy(o)):!1===r?xy("You cannot put that item there."):"level"===r&&xy("Your level is not high enough to equip this item."),dy(),Aw=!1,void(Wk="")}if(l.hasClass("inventory")){"helmet"===n.itemSlot&&(Kk="helmet",Xk=e("#helmet").parent().index()),"neck"===n.itemSlot&&(Kk="neck",Xk=e("#neck").parent().index()),"ring"===n.itemSlot&&(Kk="ring1",Xk=e("#ring1").parent().index()),"shoulders"===n.itemSlot&&(Kk="shoulders",Xk=e("#shoulders").parent().index()),"back"===n.itemSlot&&(Kk="back",Xk=e("#back").parent().index()),"chest"===n.itemSlot&&(Kk="chest",Xk=e("#chest").parent().index()),"bracers"===n.itemSlot&&(Kk="bracers",Xk=e("#bracers").parent().index()),"gloves"===n.itemSlot&&(Kk="gloves",Xk=e("#gloves").parent().index()),"belt"===n.itemSlot&&(Kk="belt",Xk=e("#belt").parent().index()),"legs"===n.itemSlot&&(Kk="legs",Xk=e("#legs").parent().index()),"boots"===n.itemSlot&&(Kk="boots",Xk=e("#boots").parent().index()),"weapons"===n.itemSlot&&(Kk="weapon1",Xk=e("#weapon1").parent().index()),"shield"!==n.type&&"offhand"!==n.type||(Kk="weapon2",Xk=e("#weapon2").parent().index()),"range"===n.itemSlot&&(Kk="range",Xk=e("#range").parent().index());var o=e("#"+Wk);Ew="equipment",wS=Xk,Yk.kill(),mS.getElementById(Wk).parentNode.style.border="2px solid #111";return!0===(r=Iy())?(wy(),Gy(o)):!1===r?xy("You cannot put that item there."):"level"===r&&xy("Your level is not high enough to equip this item."),dy(),Aw=!1,void(Wk="")}return}if(Kk=l.attr("id"),Xk=l.parent().index(),wS=Xk,!0===l.hasClass("inventory")){if(!0===aw)return;Ew="inventory"}!0===l.hasClass("equipment")&&(ZI=!1,Ew="equipment"),!0===l.hasClass("bank")&&(ZI=!1,Ew="bank",Xk+=90*aI),Yk.kill(),null!=mS.getElementById(Wk)&&(mS.getElementById(Wk).parentNode.style.border="2px solid #111");var r=Iy();return!0===r?wy():!1===r?xy("You cannot put that item there."):"level"===r&&xy("Your level is not high enough to equip this item."),dy(),Aw=!1,void(Wk="")}if(Yk.kill(),Wk&&(mS.getElementById(Wk).parentNode.style.border="2px solid #111"),Wk=l.attr("id"),Ok=l.parent().index(),!0===l.hasClass("inventory")&&(xw="inventory"),!0===l.hasClass("equipment")&&(ZI=!1,xw="equipment"),!0===l.hasClass("bank")&&(ZI=!1,xw="bank",Ok+=90*aI),"/classic/images1/blank.png"===l.attr("src"))Wk="",Aw=!1;else{Qa("equipAccessory");var l=e(this).parent();if(Wk.length>0&&(Aw=!0,Yk.kill(),Sy(t),!0===ZI)){Aw=!0,aw=!1;var s=Qv(Ok),d=qy(n.name,n.rarity);fa(cw+' says, "Sell '+d+" for "+s+' gold?"')}if("inventory"===xw&&a(),"equipment"===xw)for(var c in Sw[0])Sw[0][c]=bS.eq[Ok][c];if("bank"===xw)for(var c in Sw[0])Sw[0][c]=bS.bank[Ok][c]}}}})}),e("#gameView").on("mouseup",".inventory",function(e){"inventory"===xw&&!0===Aw&&!0===ZI&&e.ctrlKey&&Pv()}),e("#gameView").on("click","#logout",function(){Un()}),e("#addBankSlots").on("click",function(){!1===LS&&(zy.lockScreen(!0),Nn("Contacting server..."),e.ajax({url:"/classic/php/town1.php",data:{run:"addBankSlots"}}).done(function(e){Ga(e);var a=e.split("|");"maxed"==a[0]?Nn("You cannot have more than 1080 bank slots per account."):"buyCrystals"==a[0]?Nn("Please purchase Never Crystals from the title screen to purchase bank slots."):"pay40"==a[0]&&(Qa("buyitem"),Nn("You added 10 bank slots for 40 Never Crystals."),Nn("Bank Slots Available: "+a[2]),Nn("Crystals Remaining: "+a[3]),Ta(),my(),iy()),zy.unlockScreen()}).fail(function(){Tv()}))}),zy.lockScreen=function(e){LS=!0,e?cS.set("#lockOverlay",{display:"block"}):cS.set("#lockOverlay",{boxShadow:"0 720px rgba(0,0,0,.7) inset",display:"block"})},zy.unlockScreen=function(e){LS=!1,e||(e=0),cS.to("#lockOverlay",e,{boxShadow:"0 720px rgba(0,0,0,0) inset",onComplete:function(){cS.set("#lockOverlay",{display:"none"})}})},e(".fire").on("click",function(){var e=this.id;zy[e](e)}),e("#gameView").on("dragstart","img",function(e){e.preventDefault()}),(new Image).src="/classic/backgrounds/home.jpg";var CH=0;zy.mobDodgeChance=function(e){var a=1.25*Wy[e].level;return(a-=Z(re()))>30&&(a=30),a<5&&(a=5),a},zy.WarriorPhyEnh=function(e,a,n){var t=0;if("Kick"===e)t+=2*$e();else if("Pummel"===e)t+=2.6*Ue()/100*bS.eq[13].armor;else if("Shockwave"===e)t+=1.75*Ze()/100*bS.eq[13].armor;else if("Slam"===e)t+=1.25*ea();else if("Hemorrhage"===e)t+=2.1*aa();else if("Intrepid Might"===e)t+=2.7*ta();else if("Avenging Strike"===e){var i=1*ia();Yy.talent9>=20&&(i+=5),t+=i}else"Subjugate"===e?t+=2.4*ra():"Decisive Blow"===e&&(t+=1.8*la());return n===E&&!0===BI&&(t+=10*oa(),BI=!1),t},zy.RoguePhyEnh=function(e,a,n){var t=0;if("Lacerate"===e)t+=3.3*$e();else if("Sonic Strike"===e){if(t+=2.8*Je(),Yy.talent3>=20&&n===E){Yc(a=bL);var i=yc(3+ne()/7,.8);Wy[a].fallingStatus=!0,Ch(a),cS.delayedCall(1.4,function(){xb(dS.round(.1*Wy[a].maxHp),a),cS.delayedCall(1.4,function(){Wy[a].fallingStatus=!1})}),Li("Gravity Flux",a,"fallingIcon",1400,-128),zy.myMagicDamage("magic",i,a,ee(),"Chaos Flux")}}else if("Mirage Strike"===e)t+=3.3*Ze();else if("Shadow Strike"===e){var o=ea();Yy.talent5>=20&&(o+=5),t+=o}else"Backstab"===e?t+=1.75*aa():"Stagger Shot"===e?(t+=6.3*na(),Yy.talent8>=20&&n===E&&ud(a,!0)):"Prowlish Gash"===e&&(t+=3.3*la());return 0===AC&&Yy.talent10>=20&&(t+=1.2*oa()),t},zy.MonkPhyEnh=function(e,a,n){var t=0;if("Eagle Strike"===e)t+=5*$e();else if("Stone Fist Reversal"===e)t+=6.6*Ue();else if("Chakra Blast"===e)t+=1.9*Ze();else if("Windmill Kick"===e)t+=2.25*ea();else if("Cheetah Strike"===e)t+=2*aa();else if("Flying Kick"===e)t+=1.8*na();else if("Tiger Strike"===e){var i=1*ia();Yy.talent9>=20&&(i+=5),t+=i}else"Crane Kick"===e?t+=2.5*oa():"Ancestral Flurry"===e&&(t+=1.8*ra());return!0===Wy[a].fearStatus&&Yy.talent12>=20&&n===E&&(t+=1.2*la()),t},zy.PaladinPhyEnh=function(e,a,n){var t=0;if("Slam"===e)t+=1.75*$e();else if("Purge"===e){var i=ia();Yy.talent9>=20&&(i+=5),t+=i,!0===fb(a)&&n===E&&(t+=50)}else"Rebuke"===e?t+=2.75*ea():"Vengeance"===e&&(t+=2.2*aa(),!0===Wy[a].attackNow&&n===E&&(t+=50));return n===E&&(Yy.talent10>=20&&!0===Wy[a].stunStatus&&(t+=40),Yy.talent7>=20&&!0===Wy[a].blindStatus&&(t+=30)),!0===JC&&(t+=yaulpBonus),t},zy.ShadowKnightPhyEnh=function(e,a,n,t){var i=0;if("Crescent Cleave"===e){var o=$e();Yy.talent1>=20&&(o+=5),i+=o}else"Death Strike"===e?(i+=1.8*Ue(),Yy.talent2>=20&&n===E&&Qm(a,12,1e3)):"Slam"===e?i+=2.5*ea():"Gasping Frenzy"===e?i+=1.6*ia():"Harm Touch"===e&&(i+=5*na());return n===E&&(Yy.talent12>=20&&(Wy[a].heatBloodTickCount>0&&(i+=15),vM>0&&(i+=vM)),!0===Wy[a].fearStatus&&(i+=.85*ra()),Yy.talent3>=20&&hu(a,3e3,-32),"Death Strike"===e&&zy.popupHeal(dS.ceil(t/9))),i},zy.RangerPhyEnh=function(e,a,n){var t=0;if("Kick"===e)t+=1.8*$e();else if("Counter Shot"===e)t+=1.5*ea();else if("Trueshot Arrow"===e)t+=2.1*aa(),kI>500&&(kI=500),t+=kI;else if("Rapid Shot"===e){var i=ia();Yy.talent9>=20&&(i+=5),t+=i}else"Volley Shot"===e&&(t+=1.33*la());return Wy[a].faerieFlameTickCount>0&&n===E&&(t+=15),t},zy.BardPhyEnh=function(e,a,n){var t=0;if(!0===BM&&(t+=3.5*$e()),n===E){if(Yy.talent2>=20&&dS.random()>.85){xm(a,!0),Qa("handofgod");i=yc(ne()/4.2,.8);cS.delayedCall(.15,function(){zy.myMagicDamage("magic",i,a,ee(),"Wistful Tidings")})}if(Wy[a].euphonicHymn>0&&(t+=40+4.75*Ze()),Yy.talent4>=20&&dS.random()>.92){dr(a),Qa("flshhit4");var i=dS.ceil(ne()/3,.8);cS.delayedCall(.15,function(){zy.myMagicDamage("magic",i,a,ee(),"Sonic Disruption")}),ao(a,1e3,-32,0,"Sonic Disruption")}!0===Lk&&(t+=20+5.25*Ze()),sS.Baron>=6&&Wy[a].consonantChain>0&&(t+=15)}return t},zy.DruidPhyEnh=function(){return 0},zy.ClericPhyEnh=function(e,a,n){var t=0;if(n===E){if(Yy.talent5>=20&&dS.random()>.85){_l(a),Qa("dirge");i=yc(ne()/3.4,.8);cS.delayedCall(.25,function(){zy.myMagicDamage("magic",i,a,ee(),"Divine Justice")})}if(Yy.talent7>=20&&dS.random()>.92){im(a),Qa("bolthammercast");i=yc(ne()/2.3,.8);cS.delayedCall(.15,function(){zy.myMagicDamage("magic",i,a,ee(),"elemental"),ao(a,750,-480,0,"Fist of the Heavens")})}if(Yy.talent8>=20&&xT>0&&dS.random()>.67){El(a),Qa("handofgodbolt");var i=yc(ne()/1.25,.75);cS.delayedCall(.15,function(){zy.myMagicDamage("magic",i,a,ee(),"Vicar's Wrath")})}!0===Wy[a].martyr&&(t+=12.5*aa())}return t},zy.ShamanPhyEnh=function(e,a,n){var t=0;return!0===II&&(t+=60),t},zy.NecromancerPhyEnh=function(e,a,n){var t=0;return Yy.talent12>=20&&xT>0&&(t+=15),!0===Wy[a].fearStatus&&n===E&&(t+=1.33*ra()),t},zy.EnchanterPhyEnh=function(e,a,n){var t=0;return Yy.talent4>=20&&xT>0&&(t+=20),!0===vB&&function(){if(a=dS.ceil(Fe()/2.4*(1+6.2*na()/100)),zy.myMagicDamage("magic",yc(a,.85),bL,!1,"Enchant Weapon"),Yy.talent7>=20){var e=1*dS.random();if(e>.75)a=dS.ceil(Fe()/2.8*(1+6.2*na()/100)),zy.myMagicDamage("poison",yc(a,.8),bL,!1,"Enchant Weapon");else if(e>.5)a=dS.ceil(Fe()/2*(1+6.2*na()/100)),zy.myMagicDamage("lightning",yc(a,.25),bL,!1,"Enchant Weapon");else if(e>.25)a=dS.ceil(Fe()/3.3*(1+6.2*na()/100)),zy.myMagicDamage("cold",yc(a,.9),bL,!1,"Enchant Weapon");else{var a=dS.ceil(Fe()/2.5*(1+6.2*na()/100));zy.myMagicDamage("fire",yc(a,.6),bL,!1,"Enchant Weapon")}}}(),t},zy.MagicianPhyEnh=function(){return 0},zy.WizardPhyEnh=function(){return 0},zy.mobDefense=function(e){var a=Wy[e].def;return!0===Wy[e].resolutionStatus&&(a-=5),Wy[e].lacerate>0&&(a+=Wy[e].lacerate),Wy[e].shadowVortex>0&&(a+=Wy[e].shadowVortex),!0===Wy[e].scourgeStatus&&(a+=12),!0===Wy[e].asystoleStatus&&(a+=24),Wy[e].barrier&&("Cleric"===Yy.job&&Yy.talent6>=20||(a-=67)),"Ranger"===Yy.job&&Yy.talent6>=20&&a>100&&(a=100),a<33&&(a=33),a/100},zy.myPhysicalDamage=function(a,n,t,i,o,r){if(r===E){if(""===Wy[n].name||!0===Wy[n].charmStatus)return;if(!1===zy.gaspingFrenzyStatus)if("Subjugate"===t||"Shockwave"===t||"Harm Touch"===t);else{if(100*dS.random()<zy.mobDodgeChance(n))return fa(Wy[n].name+" dodged your attack."),zy.popupMsg("MISS",n),"Warrior"===Yy.job&&Yy.level>=9&&(zy.subjugateStatus=0,gC.kill(),gC=cS.delayedCall(8,vo),zy.checkWarriorSkills()),void(1===Wy[n].attackStatus&&hi(!0));if(0===zy.blindStatus&&2*dS.random()>1)return fa(Yy.name+" is blinded by darkness."),zy.popupMsg("MISS",n),void("Warrior"===Yy.job&&Yy.level>=9&&(zy.subjugateStatus=0,gC.kill(),gC=cS.delayedCall(8,vo),zy.checkWarriorSkills()))}if(1===zy.autoAttackStatus&&"On"===Lmy.autoAttackOption&&Si(),zy.updateRootStatus(n),!i)i=ee();"Rogue"===Yy.job&&1===zy.coldBloodBonus&&0!==t.indexOf("You ")&&(cS.delayedCall(.01,function(){zy.coldBloodBonus=0}),e("#coldBloodIcon").remove(),zy.popupHeal(dS.ceil(yc(oe()/3,.8))),MI=!0,i=!0),!0===i&&(a+=a*zy.criticalDamage(),"Monk"===Yy.job&&(Yy.mp+=3))}p=zy.enhancePhysicalEquip;if("bow"===o?p+=bI:0!==t.indexOf("You ")&&(p+=gI),r===E&&(!0===zy.amplifyDamageStatus&&(p+=100,zy.amplifyDamageStatus=!1),0===tC&&"Rogue"===Yy.job&&(p+=60,"Halfling"===Yy.race&&(p+=30)),!0===PC&&("Rogue"===Yy.job?(p+=60,Yy.talent2<20&&(PC=!1)):(p+=90,PC=!1),e("#evadeIcon").remove(),ao(bL,5e3,-416),Qa("bash")),sS.Willow>=6&&Wy[n].rootStatus>0&&(p+=30),!0===Wy[n].frozenStatus)){var l=0;!0===Wy[n].shatterStatus&&(cS.to("#iceIcon"+n,.5,{opacity:0,onComplete:function(){e(this).remove()}}),cS.to(jw[n],1,{easel:{tint:"#08f",tintAmount:0}}),l=75,Wy[n].frozenTimer.kill(),Wy[n].frozenStatus=!1,Wy[n].shatterStatus=!1),a=dS.round(1.25*a+l),p+=25+l,1===zy.autoAttackStatus&&"On"===Lmy.autoAttackOption&&Si()}"Barbarian"===Yy.race&&!0===oC&&(p+=100),!0===lC&&(p+=25);var s=0;if(r===E&&(p+=zy[wH.PhyEnh](t,n,r,a)),a+=a*(p/100),r===E&&(a*=zy.mobDefense(n)),!0===Wy[n].stasisFieldStatus&&r===E)return a=0,zy.slotDamage(a,n),a;if("bow"===o){if(Yy.talent8>=20&&r===E&&dS.random()>.7){pf(n,!0),Qa("explode"+dS.ceil(3*dS.random()));for(k=0;k<=4;k++)if((k+1===n||k===n||k-1===n)&&""!==Wy[k].name){S=yc(ne()/7,.8);zy.myMagicDamage("fire",S,k,!1,"elemental")}}Yy.talent11>=1&&!0===NC&&r===E&&dS.random()<1.2*ra()/100&&(Qa("lightning2"),""!==Wy[n].name&&(ou(n),zy.myMagicDamage("lightning",yc(dS.ceil(ne()/5),.5),n,!1,"elemental")))}var d=0;if(r===E){if(zy.poisonDamageEquip>0){var c=1+(zy.enhanceAllEquip+zy.enhancePoisonEquip)/100;d+=dS.round(dS.random()*(c*zy.poisonDamageEquip)*(Wy[n].poison/100))}var m=_();if(m>0){var u=1+(zy.enhanceAllEquip+zy.enhanceMagicEquip)/100;d+=dS.round(dS.random()*(u*m)*(Wy[n].magic/100))}if(zy.lightningDamageEquip>0){var f=1+(zy.enhanceAllEquip+zy.enhanceLightningEquip)/100;d+=dS.round(dS.random()*(f*zy.lightningDamageEquip)*(Wy[n].lightning/100))}if(zy.coldDamageEquip>0){var h=1+(zy.enhanceAllEquip+zy.enhanceColdEquip)/100;d+=dS.round(dS.random()*(h*zy.coldDamageEquip)*(Wy[n].cold/100))}if(zy.fireDamageEquip>0){var g=1+(zy.enhanceAllEquip+zy.enhanceFireEquip)/100;d+=dS.round(dS.random()*(g*zy.fireDamageEquip)*(Wy[n].fire/100))}if(d>0){if(d<1&&(d=1),"Monk"===Yy.job){var p=0;p+=1.5*na(),d=dS.round(d+d*(p/100))}vi(d,n,HI)}}if(zy.physicalDamageEquip>0&&(r===E?a+=dS.random()*zy.physicalDamageEquip*zy.mobDefense(n):2===r?a+=zy.physicalDamageEquip:a++),r===E){var b=0;if(Wy[n].level>Yy.level&&(b+=Wy[n].level-Yy.level),!0===Wy[n].riftStatus&&(b+=nd()-1.25*Ze()),b>75&&(b=75),(a-=a*(b/100))<1&&(a=dS.ceil(dS.random()*Yy.level/10)),"Decisive Blow"===t&&Yy.talent12>=20&&zy.myMagicDamage("magic",a,n,!1,"Champion's Rage"),"Rogue"===Yy.job){if("Lacerate"===t&&Yy.talent1>=20){s+=~~(.2*a)}Yy.talent7>=20&&!0===MI&&(MI=!1,dS.random()>.95&&3!==Wy[n].rare&&(a=Wy[n].hp))}}if(a=dS.ceil(a),r)return dS.ceil(a);if(Wy[n].runeHp>0?(Wy[n].runeHp-=a,Wy[n].runeHp<=0&&e("#MruneIcon"+n).remove(),Qa("blockBlunt")):Wy[n].hp-=a,"On"===kw.chatMyHit&&""!==Wy[n].name&&t!==E&&fa(t==="You "+bS.eq[12].type||t==="You "+bS.eq[13].type?"staff"===bS.eq[12].type?"You smashed "+Wy[n].name+" for "+a+" damage.":t+" "+Wy[n].name+" for "+a+" damage.":t+" hits "+Wy[n].name+" for "+a+" damage."),"Shadow Knight"===Yy.job&&Yy.talent10>=20&&!0===zy.petAlive&&dS.random()>.65){var v=kb()/2,y=dS.ceil(v+dS.random()*v);zy.petPhysical(y,n)}if((zy.leechEquip>0||s>0)&&zy.popupHeal(a*zy.leechRatio*zy.leechEquip+s),zy.wraithEquip>0&&("Warrior"===Yy.job||"Monk"===Yy.job||"Rogue"===Yy.job||zy.popupMana(zy.wraithRatio*a*(zy.wraithEquip/100))),!1===i?zy.slotDamage(a,n):zy.slotDamageCrit(a,n),1===Wy[n].attackStatus&&hi(!0),zy.drawMonsterHp(n),zy.checkForDeadMonsters(),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+n).remove()),"Dark Elf"===Yy.race)!0===rC&&zy.popupHeal(dS.ceil(a/8));else if("Shadow Knight"===Yy.job){if(!0===kM){100*dS.random()>80&&zy.popupHeal(dS.ceil(a/8))}}else if("Monk"===Yy.job){if(0===Zk&&zy.popupHeal(dS.ceil(a/25)),"Chakra Blast"===t&&(zy.popupHeal(dS.ceil(.75*a)),Yy.talent4>=20))for(var k=0;k<=4;k++)if(Wy[k].name){var S=3.4*a;zy.myMagicDamage("magic",S,k,ee(),"Chi Blast")}}else"Ranger"===Yy.job?"Counter Shot"===t&&(Yy.level>8&&zy.popupMana(dS.ceil(a/18)),Ht(n)):"Paladin"===Yy.job&&"Vengeance"===t&&Yy.level>8&&zy.popupMana(dS.ceil(a/17));if("bow"===o||"Shockwave"===t||"range"===o)return a;if(0===Wy[n].thornsActive)if("Monk"===Yy.job&&Yy.talent11>=20);else{fa("You are pierced by thorns for "+dS.ceil(Wy[n].level/10)+" damage.",3);var I=dS.ceil(Wy[n].level/10);Yy.hp-=I,xI+=I,Yy.hp<=0&&(fa("You have been slain by a shield of thorns!".fontcolor("#ff0000")),ot())}if(0===Wy[n].lavaShieldActive)if("Monk"===Yy.job&&Yy.talent11>=20);else{fa("You are burned by lava for "+dS.ceil(Wy[n].level/6)+" damage.",3);var w=dS.ceil(Wy[n].level/6);Yy.hp-=w,xI+=w,Yy.hp<=0&&(fa("You have been slain by a shield of lava!".fontcolor("#ff0000")),ot())}if(!0===Wy[n].ironMaiden)if("Monk"===Yy.job&&Yy.talent11>=20);else{var C=dS.ceil(.2*Wy[n].intel);fa("Iron Maiden reflects "+C+" damage.",3),Yy.hp-=C,xI+=C,ny(),zy.drawMyHp(),Yy.hp<=0&&(fa("You have been slain by Iron Maiden!".fontcolor("#ff0000")),ot())}return a},zy.WarriorMagEnh=function(){return 0},zy.MonkMagEnh=function(e,a,n,t){var i=0;return"Dragon Strike"===e&&(i+=7.3*ta()),i},zy.RogueMagEnh=function(){return 0},zy.PaladinMagEnh=function(e,a,n,t){var i=0;return"Holy Might"===e?i+=4.5*oa():"Ardent Judgment"===e&&(!0===fb(a)&&!0!==t&&(i+=50),i+=3.5*na()),!0!==t&&(Yy.talent10>=20&&!0===Wy[a].stunStatus&&(i+=40),Yy.talent7>=20&&!0===Wy[a].blindStatus&&(i+=30)),!0===JC&&(i+=yaulpBonus),i},zy.ShadowKnightMagEnh=function(e,a,n,t){var i=0;return"Life Tap"===e&&(i+=1.75*aa()),!0!==t&&(!0===Wy[a].fearStatus&&(i+=.85*ra()),Yy.talent12>=20&&Wy[a].heatBloodTickCount>0&&(i+=15)),i},zy.RangerMagEnh=function(e,a,n,t){var i=0;return"Ignite"===e&&(i+=4.2*ta()),!1===mw&&(i+=20),Wy[a].faerieFlameTickCount>0&&!0!==t&&(i+=15),i},zy.BardMagEnh=function(e,a,n,t){var i=0;return"Chords of Dissonance"===e?i+=4.7*ea():"Desperate Dirge"===e?i+=3.6*ta():"Brusco's Boastful Bellow"===e&&(i+=4.75*oa()),!0!==t&&sS.Baron>=6&&Wy[a].consonantChain>0&&(i+=15),i},zy.DruidMagEnh=function(e,a,n,t){var i=0;if("Starfire"===e){var o=2*ia();Yy.talent9>=20&&(o+=10),i+=o}else"Lightning Blast"===e&&(i+=6.8*ra());return!1===mw&&(i+=20),i},zy.ClericMagEnh=function(e,a,n,t){var i=0;if("Smite"===e){var o=2*$e();Yy.talent1>=20&&(o+=10),i+=o}else"Holy Wrath"===e?i+=9.5*Ze():"Sound of Force"===e?i+=8.4*ea():"Expel Corruption"===e&&(i+=6.2*ia(),!0===fb(a)&&!0!==t&&(i+=50));return!0===GT&&(i+=75),!0===Wy[a].martyr&&!0!==t&&(i+=12.5*aa(),i+=30),i},zy.ShamanMagEnh=function(e,a,n,t){var i=0;if("Frost Strike"===e){var o=2*$e();Yy.talent1>=20&&(o+=10),i+=o}else"Glacial Impact"===e?i+=5.5*Ze():"Poison Nova"===e&&(i+=6.2*aa());return!0===Wy[a].afflictionStatus&&!0!==t&&(i+=10),!0===II&&(i+=60),i},zy.NecromancerMagEnh=function(e,a,n,t){var i=0;if("Bone Spirit"===e){o=2*ia();Yy.talent9>=20&&(o+=10),i+=o}else if("Fireball"===e){var o=2*ia();Yy.talent9>=20&&(o+=10),i+=o}else"Drain Soul"===e?i+=2.8*$e():"Corpse Explosion"===e?i+=5.7*na():"Detonate Soul"===e&&(i+=7.8*na());return Yy.talent12>=20&&xT>0&&(i+=15),!0!==t&&(Yy.talent7>=20&&"poison"===n&&dS.random()>.76&&jt(),!0===Wy[a].fearStatus&&(i+=1.33*ra())),i},zy.EnchanterMagEnh=function(e,a,n,t){var i=0;if("Chaos Flux"===e){var o=2*$e();Yy.talent1>=20&&(o+=10),i+=o}else"Gravity Flux"===e&&(i+=6.3*ra());return Yy.talent4>=20&&xT>0&&(i+=20),!0===Wy[a].tashaniaStatus&&!0!==t&&(i+=Ne()/20),i},zy.MagicianMagEnh=function(e,a,n,t){var i=0;if("Lava Bolt"===e){var o=2*$e();Yy.talent1>=20&&(o+=10),i+=o}else"Firestorm"===e?i+=6.3*Je():"Armageddon"===e?i+=5.4*Ze():"Frozen Orb"===e?i+=4.8*oa():"Psionic Storm"===e?i+=6.1*la():"Elemental Lightning"===e?i+=7.3*ta():"Elemental Glacier"===e?i+=7.3*ta():"Elemental Inferno"===e&&(i+=7.3*ta());return i},zy.WizardMagEnh=function(a,n,t,i){var o=0;if("Charged Bolts"===a)o+=4.2*$e();else if("Arcane Missiles"===a)o+=4.9*Ue();else if("Chain Lightning"===a)o+=6.3*Je(),sS.Malefactor>=6&&(o+=50);else if("Ice Bolt"===a){var r=2*ea();Yy.talent5>=20&&(r+=10),o+=r}else"Deep Freeze"===a?o+=4.5*aa():"Glacial Spike"===a?o+=5.3*na():"Ice Comet"===a?o+=6.5*ta():"Fireball"===a?o+=5.9*oa():"Meteor"===a&&(o+=6.7*la());return Yy.talent4>=20&&"lightning"===t&&(o+=15),Yy.talent8>=20&&"cold"===t&&(o+=15),Yy.talent12>=20&&"fire"===t&&(o+=15),!0===_B&&!0!==i&&"elemental"!==a&&(o+=~~(100+Fe()/2),o+=4.1*ra(),_B=!1,e("#harnessEtherIcon").remove()),o},zy.myMagicDamage=function(a,n,t,i,o,r,l){if(!0!==l){if(""===Wy[t].name||!0===Wy[t].charmStatus)return;!0===i&&(n+=n*zy.criticalDamage());var s=!1;if("Druid"===Yy.job&&Yy.talent10>=20&&Wy[t].driftingDeathTickCount>0&&(s=!0),!0===Wy[t].stasisFieldStatus)return n=0,void zy.slotDamage(n,t);if(!1===s&&"physical"!==a){var d=Wy[t][a];sS.ArchMage>=6&&(d+=45),sS.HighPriest>=6&&(d+=(d+100)/2),"Magician"===Yy.job&&Yy.talent4>=20&&"fire"===a&&d<100&&(d=(d+100)/2),n*=d/100}}dS.random()>.25&&("Earthquake"===o||"Hurricane"===o||"elemental"===o||zy.updateRootStatus(t));var c=0;if(!0!==r&&(c+=zy.enhanceAllEquip,c+=zy["enhance"+a[0].toUpperCase()+a.slice(1)+"Equip"]),"Barbarian"===Yy.race&&!0===oC&&(c+=100),!0===lC&&(c+=25),!0!==l){if(!0===zy.amplifyDamageStatus&&(c+=100,zy.amplifyDamageStatus=!1),!0===Wy[t].frozenStatus){var m=0;!0===Wy[t].shatterStatus&&(cS.to("#iceIcon"+t,.5,{opacity:0,onComplete:function(){e("#iceIcon"+t).remove(),cS.to(jw[t],1,{easel:{tint:"#08f",tintAmount:0}})}}),m=75,Wy[t].frozenTimer.kill(),Wy[t].frozenStatus=!1,Wy[t].shatterStatus=!1),c+=25+m,1===zy.autoAttackStatus&&"On"===Lmy.autoAttackOption&&Si()}sS.Willow>=6&&Wy[t].rootStatus>0&&(c+=30)}if(c+=zy[wH.MagEnh](o,t,a,l),"Bard"!==Yy.job?c+=Z(se())/6:c+=Z(de())/6,n+=n*(c/100),!0!==l){var u=0;Wy[t].level>Yy.level&&(u+=Wy[t].level-Yy.level),"Ranger"===Yy.job&&!0===Wy[t].riftStatus&&(u+=nd()-1.25*Ze()),u>75&&(u=75),!0===Wy[t].sanctuary&&("Cleric"===Yy.job&&Yy.talent6>=20||"Enchanter"===Yy.job&&Yy.talent12>=20||(u=75)),n=~~(n-n*(u/100))}if(!0===l)return dS.ceil(n);if(n<1&&(n=1),n=~~(1+n),Wy[t].runeHp>0?(Wy[t].runeHp-=n,Wy[t].runeHp<=0&&e("#MruneIcon"+t).remove(),Qa("blockBlunt")):(Wy[t].hp-=n,!0===r&&fa(Wy[t].name+o+" for "+n+" damage.",4),ln(t,a,.1),"Arcane Missiles"===o&&Wy[t].hp<=0&&function(e){zy.popupMana(dS.ceil(1.5*Wy[e].level)),zy.popupHeal(dS.ceil(2.5*Wy[e].level))}(t)),"On"===kw.chatMyHit&&!0!==r&&""!==Wy[t].name&&o!==E&&("elemental"===o||("falling"===o?fa(Wy[t].name+" falls for "+n+" damage."):fa(o+" hits "+Wy[t].name+" for "+n+" "+a+" damage.",4))),zy.leechEquip>0&&zy.popupHeal(n*zy.leechRatio*zy.leechEquip),zy.wraithEquip>0&&("Warrior"===Yy.job||"Monk"===Yy.job||"Rogue"===Yy.job||zy.popupMana(zy.wraithRatio*n*(zy.wraithEquip/100))),!1===i||i===E?"elemental"!==o?yi(n,t,a):vi(n,t,a):function(e,a,n){var t=Gw[a].offsetTop+Wy[a].cY/2;t<100&&(t=100);var i=Gw[a].offsetLeft+Wy[a].cX;if(zy[n+"Increment"](e),"Low"!==kw.videoSetting){var o=gi();pi(o,e,"#ff2",24,t,i),cS.to(text[o],.2,{startAt:{scaleX:6,scaleY:6},scaleX:1,scaleY:1,ease:pS.lin}),cS.to(text[o],.4,{y:"-=50",repeat:1,yoyo:!0,onComplete:function(){text[o].text=""}}),cS.to(text[o],.8,{x:"+="+(200*dS.random()-100)}),cS.to(text[o],.4,{delay:.4,alpha:0})}}(n,t,a),1===Wy[t].attackStatus&&hi(!1),zy.drawMonsterHp(t),zy.checkForDeadMonsters(),!0===Wy[t].sleepStatus&&(Wy[t].sleepStatus=!1,e("#sleepIcon"+t).remove()),"Burst of Flame"===o)return dS.round(n);if("Dark Elf"===Yy.race&&!0===rC&&zy.popupHeal(dS.ceil(n/16)),"Shadow Knight"===Yy.job&&!0===kM){100*dS.random()>80&&zy.popupHeal(dS.ceil(n/8))}if("Gnome"===Yy.race&&!0===dC){var f=dS.ceil(n/18);zy.popupMana(f)}return dS.round(n)},zy.WarriorDotEnh=function(e,a,n,t){var i=0;return"Hemorrhage"===e&&(i+=2.1*aa()),i},zy.MonkDotEnh=function(){return 0},zy.RogueDotEnh=function(e,a,n,t){var i=0;return"Widow Strike"===e&&(i+=7.25*ra()),i},zy.PaladinDotEnh=function(e,a,n,t){var i=0;return!0!==t&&(Yy.talent10>=20&&!0===Wy[a].stunStatus&&(i+=40),Yy.talent7>=20&&!0===Wy[a].blindStatus&&(i+=30)),!0===JC&&(i+=yaulpBonus),i},zy.ShadowKnightDotEnh=function(e,a,n,t){var i=0;return"Dooming Darkness"===e?i+=3.6*ta():"Heat Blood"===e&&(i+=5.7*la()),!0!==t&&(!0===Wy[a].fearStatus&&(i+=.85*ra()),Yy.talent12>=20&&Wy[a].heatBloodTickCount>0&&(i+=15)),i},zy.RangerDotEnh=function(e,a,n,t){var i=0;return"Faerie Flame"===e&&(i+=3.1*na()),!1===mw&&(i+=20),Wy[a].faerieFlameTickCount>0&&!0!==t&&(i+=15),i},zy.BardDotEnh=function(){return 0},zy.DruidDotEnh=function(e,a,n,t){var i=0;return"Drones of Doom"===e?i+=6.2*$e():"Drifting Death"===e?i+=2.5*oa():"Volcano"===e?i+=6.2*la():"Earthquake"!==e||t||du(1,4,4,100),!1===mw&&(i+=20),i},zy.ClericDotEnh=function(e,a,n,t){var i=0;return!0===Wy[a].martyr&&!0!==t&&(i+=12.5*aa(),i+=30),i},zy.ShamanDotEnh=function(e,a,n,t){var i=0;return"Scourge"===e?i+=6.5*ea():"Affliction"===e?i+=4.2*na():"Devouring Plague"===e&&(i+=4.8*ta()),!0===Wy[a].afflictionStatus&&!0!==t&&(i+=10),!0===II&&(i+=60),i},zy.NecromancerDotEnh=function(e,a,n,t){var i=0;return"Cascading Darkness"===e?i+=5.8*oa():"Ignite Blood"===e?i+=4.7*Ue():"Bond of Death"===e?i+=3.6*Je():"Asystole"===e&&(i+=5.2*la()),!0!==t&&(!0===Wy[a].fearStatus&&(i+=1.33*ra()),Yy.talent7>=20&&"poison"===n&&dS.random()>.76&&jt()),Yy.talent12>=20&&xT>0&&(i+=15),i},zy.EnchanterDotEnh=function(e,a,n,t){var i=0;return"Gasping Embrace"===e&&(i+=5.9*ia()),Yy.talent4>=20&&xT>0&&(i+=20),!0===Wy[a].tashaniaStatus&&!0!==t&&(i+=Ne()/20),i},zy.MagicianDotEnh=function(){return 0},zy.WizardDotEnh=function(){return 0},zy.myDotDamage=function(a,n,t,i,o){if(!0!==o){if(""===Wy[n].name)return;if(!0===Wy[n].stasisFieldStatus)return a=0,void zy.slotDamage(a,n);if("physical"!==t){var r=Wy[n][t];sS.ArchMage>=6&&(r+=45),sS.HighPriest>=6&&(r+=(r+100)/2),a*=r/100}var l=!1;!0===ee()&&(l=!0,a+=a*zy.criticalDamage())}var s=0;if(s+=zy.enhanceAllEquip,s+=zy["enhance"+t[0].toUpperCase()+t.slice(1)+"Equip"],"Barbarian"===Yy.race&&!0===oC&&(s+=100),!0===lC&&(s+=25),!0!==o&&sS.Willow>=6&&Wy[n].rootStatus>0&&(s+=30),s+=zy[wH.DotEnh](i,n,t,o),"physical"!==t&&(s+=Z(se())/6),a+=a*(s/100),!0!==o){var d=0;Wy[n].level>Yy.level&&(d+=Wy[n].level-Yy.level),"Ranger"===Yy.job&&!0===Wy[n].riftStatus&&(d+=nd()-1.25*Ze()),d>75&&(d=75),!0===Wy[n].sanctuary&&("Cleric"===Yy.job&&Yy.talent6>=20||"Enchanter"===Yy.job&&Yy.talent12>=20||(d=75)),a-=a*(d/100)}if(a=dS.ceil(a),!0===o)return a;if(a<1&&(a=1),zy.leechEquip>0&&zy.popupHeal(a*zy.leechRatio*zy.leechEquip),zy.wraithEquip>0&&("Warrior"===Yy.job||"Monk"===Yy.job||"Rogue"===Yy.job||zy.popupMana(zy.wraithRatio*a*(zy.wraithEquip/100))),Wy[n].runeHp>0?(Wy[n].runeHp-=a,Wy[n].runeHp<=0&&e("#MruneIcon"+n).remove()):Wy[n].hp-=a,zy.popupDotDamage(a,n,t,l),ln(n,t,.033),"Shaman"===Yy.job&&"Devouring Plague"===i&&(zy.popupHeal(.3*a,!0),Yy.talent8>=20&&(zy.popupMana(.1*a),Wy[n].mp-=1,(Wy[n].mp=0)&&(Wy[n].mp=0))),"Necromancer"===Yy.job&&"Bond of Death"===i&&zy.popupHeal(a,!0),1===Wy[n].attackStatus&&hi(!1),zy.drawMonsterHp(n),zy.checkForDeadMonsters(),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+n).remove()),"Dark Elf"===Yy.race&&!0===rC&&zy.popupHeal(dS.ceil(a/16)),"Gnome"===Yy.race&&!0===dC){var c=dS.ceil(a/18);zy.popupMana(c)}return a},zy.checkForDeadMonsters=function(){for(var a=0,n=0;n<=4;n++)if(Wy[n].hp<=0&&Wy[n].name){if(Wy[n].attackStatus=1,1===zy.autoAttackStatus);if(2===Wy[n].rare&&(Yy.championsSlain+=1),!0===Wy[n].mobMartyr){Wy[n].mobMartyr=!1,fa(Wy[n].name+" heals all allies!",1),ti(3*Wy[n].str,n,"uses Martyr's Sacrifice and hits");for(var t=0;t<=4;t++)Wy[t].name&&n!==t&&(Wy[t].hp+=15*Wy[n].str,zy.popupHealSlot(15*Wy[n].str,1))}Wy[n].fireEnchanted&&(Wy[n].fireEnchanted=!1,ii(2*Wy[n].intel,n,"Fiery Explosion","fire")),Wy[n].coldEnchanted&&(Wy[n].coldEnchanted=!1,ii(2*Wy[n].intel,n,"Glacial Shatter","cold")),Wy[n].lightningEnchanted&&(Wy[n].lightningEnchanted=!1,ii(2*Wy[n].intel,n,"Static Discharge","lightning")),Wy[n].poisonEnchanted&&(Wy[n].poisonEnchanted=!1,ii(2*Wy[n].intel,n,"Poison Nova","poison")),Wy[n].attack.kill(),Wy[n].thornsTimer.kill(),Wy[n].spellActive.kill(),VL.kill(),Wy[n].widowStrikeInterval.kill(),Wy[n].hemorrhageInterval.kill(),Wy[n].thornsActive=1,Wy[n].lavaShieldActive=1,Wy[n].furiousScorn=0,Wy[n].lacerate=0,Wy[n].castingStatus=!1,a=1,bH+=1,vH+=zt(n),Wy[n].snareStatus=!1,Wy[n].faerieFlameTickInterval.kill(),Wy[n].dazeTimer.kill(),Wy[n].dazeStatus=!1,Wy[n].doomingDarknessInterval.kill(),Wy[n].heatBloodInterval.kill(),Wy[n].martyr=!1,Wy[n].togorsInsectsTimeout.kill(),Wy[n].slowStatus=!1,Wy[n].regenStatus=!0,Wy[n].afflictionStatus=!1,e("#detonateSoul"+n).remove(),Wy[n].riftStatus=!1,cS.to("#orbIcon"+n,.5,{opacity:0,onComplete:function(){e("#orbIcon"+n).remove()}}),e(".freezeIcon"+n).remove(),"Necromancer"===Yy.job&&jt(),"Warrior"===Yy.job&&(kC=0,zy.checkWarriorSkills(),IC.kill(),IC=cS.delayedCall(5,Bo)),function(e){Wy[e].skill1="",Wy[e].skill2="",Wy[e].skill3="",Wy[e].skill4="",Wy[e].harmTouch=1,Wy[e].rune=1,Wy[e].skeleton=1,Wy[e].wolf=1,Wy[e].elemental=1,Wy[e].thorns=1,Wy[e].lavaShield=1,Wy[e].resolution=1,Wy[e].enrageStatus=!1,Wy[e].ironMaidenStatus=!1,Wy[e].flurryStatus=!1,Wy[e].ampMagicStatus=!1,Wy[e].sanctuaryStatus=!1,Wy[e].barrierStatus=!1,Wy[e].drainStatus=!1,Wy[e].silenceStatus=!1}(n)}a>0&&("Necromancer"===Yy.job&&zy.checkNecromancerSkills(),Wt(),Yt())},e(function(){$NG.gameView.on("mouseenter","#addmonsterId",function(){!1===ya()?(NG.tooltipname.innerHTML="Pull Next Monster",NG.tooltipmsg.innerHTML="Pull a monster to battle. Use while in combat to build chain combos that reward extra gold, experience, and magic find."):(NG.tooltipname.innerHTML="Pull Random Monster",NG.tooltipmsg.innerHTML="Pull an additional random monster to build combo bonuses. Combo bonuses yield greater experience and treasure.")}),$NG.gameView.on("mouseenter","#runId",function(){var e=(nt()/2).toPrecision(3),a=6;"Halfling"===Yy.race&&(a=5),e=(e+"%").fontcolor("#00ff00"),NG.tooltipname.innerHTML="Run",NG.tooltipmsg.innerHTML="Cooldown: "+R(a)+" Seconds<BR><BR>You have a "+e+" chance to successfully run from battle. Failed run attempts increase your escape chance on successive attempts."}),$NG.gameView.on("mouseenter","#toggleattackId",function(){var e=Qt((1+ne()/4500)*(10*bS.eq[12].damage),.2,"attack",E,E,!0),a=Qt((1+ne()/4500)*(10*bS.eq[13].damage),.2,"attack",E,E,!0),n=Qt((1+ne()/4500)*(10*bS.eq[12].damage),.5,"attack",E,E,!0),t=_e().toPrecision(3);t=(t+"%").fontcolor("#00ff00");var i=Ve().toPrecision(3);i=(i+"%").fontcolor("#00ff00");var o=((pe()/1e3).toPrecision(2)+"").fontcolor("#00ff00"),r=((be()/1e3).toPrecision(2)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Auto Attack";var l="";if(l+="Toggle your auto attacks on or off.<br><br>","cleaved"===bS.eq[12].type||"smashed"===bS.eq[12].type||"staff"===bS.eq[12].type?l+="Primary Speed: "+o+" seconds<br>Primary Damage: "+n[0]+" to "+n[1]:l+="Primary Speed: "+o+" seconds<br>Primary Damage: "+e[0]+" to "+e[1],"punched"!==bS.eq[13].type&&"slashed"!==bS.eq[13].type&&"crushed"!==bS.eq[13].type&&"pierced"!==bS.eq[13].type||(l+="<br>Secondary Speed: "+r+" seconds<br>Secondary Damage: "+a[0]+" to "+a[1]),(Yy.doubleAttack>=1||Yy.dualWield>=1)&&(l+="<br><br>",Yy.doubleAttack>=1&&(l+="Double Attack Chance: "+t+"<br>"),Yy.dualWield>=1&&(l+="Dual Wield Chance: "+i)),"Bard"===Yy.job){if(Yy.talent2>=20){var s=Rt(ne()/4.2,.8,"magic","Wistful Tidings");l+="<BR><BR>Wistful Tidings has a "+Q("15%")+" chance to strike your target for "+s[0]+" to "+s[1]+" arcane damage."}if(Yy.talent4>=20){e=Rt(ne()/3,.8,"magic","Sonic Disruption");l+="<BR><BR>Sonic Disruption has a "+Q("8%")+" chance to strike your target for "+e[0]+" to "+e[1]+" arcane damage and stun your target for "+Q("1")+" second."}}if("Cleric"===Yy.job){if(Yy.talent5>=20){var d=Rt(ne()/3.4,.8,"magic","Divine Justice");l+="<BR><BR>Divine Justice has a "+Q("15%")+" chance to strike your target for "+d[0]+" to "+d[1]+" arcane damage."}if(Yy.talent8>=20){var c=Rt(ne()/1.25,.75,"magic","Vicar's Wrath");l+="<BR><BR>Vicar's Wrath has a "+Q("22%")+" chance to strike your target for "+c[0]+" to "+c[1]+" arcane damage if a shield is active."}}NG.tooltipmsg.innerHTML=l}),$NG.window3.on("mouseenter","#togglepetattackId",function(){NG.tooltipname.innerHTML="Set Pet Target",NG.tooltipmsg.innerHTML="Set your pet's target."}),e(".statButton").on("click",function(){var a=e(this).text();fw=a,e(".statButton").css({backgroundPosition:"0 0"}),e(this).css({backgroundPosition:"0 100%"}),ny()})}),text=[],textNum=0,function(){for(var e=0;e<=40;e++)text[e]=new uS.Text("","24px Arial","#fff"),text[e].textAlign="center",text[e].shadow=new uS.Shadow("#000",1,1,0),Nw[5].addChild(text[e])}(),zy.damageShieldIncrement=function(e){jI+=e},zy.physicalIncrement=function(e){GI+=e,EI++,AI+=e},zy.poisonIncrement=function(e){qI+=e,EI++,AI+=e},zy.magicIncrement=function(e){PI+=e,EI++,AI+=e},zy.lightningIncrement=function(e){QI+=e,EI++,AI+=e},zy.coldIncrement=function(e){RI+=e,EI++,AI+=e},zy.fireIncrement=function(e){FI+=e,EI++,AI+=e},zy.popupMsg=function(e,a){var n=Gw[a].offsetTop+Wy[a].cY/2;n<100&&(n=100);var t=Gw[a].offsetLeft+Wy[a].cX;if("Low"!==kw.videoSetting){var i=gi();pi(i,e,"#fff",24,n,t),cS.to(text[i],.2,{startAt:{scaleX:2,scaleY:2},scaleX:1,scaleY:1,ease:pS.lin}),cS.to(text[i],.4,{y:"-=60",repeat:1,yoyo:!0,onComplete:function(){text[i].text=""}}),cS.to(text[i],.8,{x:"+="+(200*dS.random()-100)}),cS.to(text[i],.4,{delay:.4,alpha:0})}},zy.slotDamage=function(e,a,n,t){var i=Gw[a].offsetTop+Wy[a].cY/2;i<100&&(i=100);var o=Gw[a].offsetLeft+Wy[a].cX;if(t===E&&(EI++,GI+=e,AI+=e),Qa("flshhit1"),dS.random()>.8&&Qa("blankAudio"===Wy[a].audio2?"gethit"+dS.ceil(4*dS.random())+"m":Wy[a].audio2),"Low"!==kw.videoSetting){if(!0===n){r=gi();Oi(a,~~(2*dS.random()+1)),pi(r,e,"#f22",24,i,o)}else{var r;pi(r=gi(),e,"#fff",24,i,o)}cS.to(text[r],.2,{startAt:{scaleX:2,scaleY:2},scaleX:1,scaleY:1,ease:pS.lin}),cS.to(text[r],.4,{y:"-=60",repeat:1,yoyo:!0,onComplete:function(){text[r].text=""}}),cS.to(text[r],.8,{x:"+="+(200*dS.random()-100)}),cS.to(text[r],.4,{delay:.4,alpha:0})}},zy.slotDamageCrit=function(e,a){var n=Gw[a].offsetTop+Wy[a].cY/2;n<100&&(n=100);var t=Gw[a].offsetLeft+Wy[a].cX;if(EI++,GI+=e,AI+=e,Qa("flshhit2"),"Low"!==kw.videoSetting){var i=gi();Oi(a,~~(2*dS.random()+1)),pi(i,e,"#ff2",24,n,t),Xi(a),cS.to(text[i],.2,{startAt:{scaleX:2,scaleY:2},scaleX:1,scaleY:1,ease:pS.lin}),cS.to(text[i],.5,{y:"-=60",repeat:1,ease:pS.xout,yoyo:!0,onComplete:function(){text[i].text=""}}),cS.to(text[i],.8,{x:"+="+(200*dS.random()-100)}),cS.to(text[i],.5,{delay:.4,alpha:0})}},zy.popupDotDamage=function(e,a,n,t){var i=Gw[a].offsetTop+Wy[a].cY/2;i<100&&(i=100);var o=Gw[a].offsetLeft+Wy[a].cX;if(zy[n+"Increment"](e),"Low"!==kw.videoSetting){if(!1===t){pi(r=gi(),e,"#fff",24,i,o),cS.to(text[r],.7,{y:"-=100",onComplete:function(){text[r].text=""}})}else{var r=gi();pi(r,e,"#ff2",24,i,o),cS.to(text[r],.7,{y:"-=100",onComplete:function(){text[r].text=""}})}cS.to(text[r],.2,{delay:.5,alpha:0})}},zy.popupHealSlot=function(e,a){if(5!==a)var n=Gw[a].offsetLeft+Wy[a].cX,t=Gw[a].offsetTop+Wy[a].cY/2;else n=dS.ceil(Gw[a].offsetLeft+lL/2),Gw[a].offsetTop;if(t<100&&(t=100),"Low"!==kw.videoSetting){var i=gi();pi(i,e,"#ffff66",24,t,n),cS.to(text[i],1.75,{y:"-=150",onComplete:function(){text[i].text=""}})}},zy.popupHeal=function(e,a){if(!0!==a){var n=0;"Magician"===Yy.job&&Yy.talent7>=20&&(n+=12),sS.Oracle>=6&&(n+=30);var t=Z(le())/6.6;t>0&&(n+=t),e=~~(e*(1+n/100))}for(var i=!1,o=0;o<=4;o++)Wy[o].name&&1==Wy[o].cripplingAura&&(i=!0);!0===i&&(e*=.5),e=e<1?1:~~e,Yy.hp+=e,zI+=e,zy.drawMyHp()},zy.popupMana=function(e){e=e<1?1:~~e,!0===_B&&(e*=2.5),!0===qB&&(e*=2.8),e=dS.round(e);var a=zy.maxMpFunct();Yy.mp+=e,YI+=e,Yy.mp>a&&(Yy.mp=a),zy.drawMyMp()},zy.WarriorDoneCD=function(){!0===zH.cd.warriorkickId&&(Qi("warriorkickId",!1,!1),Ei("warriorkickId","-300% 0")),!0===zH.cd.slamId&&(Qi("slamId",!1,!1),Ei("slamId","-400% 0")),Qi("avengingstrikeId",!1,!1),Ei("avengingstrikeId","-500% 0"),!0===zH.cd.hemorrhageId&&(Qi("hemorrhageId",!1,!1),Ei("hemorrhageId","-600% 0")),!0===zH.cd.shockwaveId&&(Qi("shockwaveId",!1,!1),Ei("shockwaveId","-700% 0")),!0===zH.cd.pummelId&&(Qi("pummelId",!1,!1),Ei("pummelId","-800% 0")),!0===zH.cd.subjugateId&&(Qi("subjugateId",!1,!1),Ei("subjugateId","-900% 0")),!0===zH.cd.decisiveblowId&&(Qi("decisiveblowId",!1,!1),Ei("decisiveblowId","-1000% 0")),!0===zH.cd.absorbspellId&&(Qi("absorbspellId",!1,!1),Ei("absorbspellId","-1100% 0")),!0===zH.cd.frenziedrampageId&&(Qi("frenziedrampageId",!1,!1),Ei("frenziedrampageId","-1200% 0")),!0===zH.cd.enrageId&&(Qi("enrageId",!1,!1),Ei("enrageId","-1300% 0")),!0===zH.cd.furiousscornId&&(Qi("furiousscornId",!1,!1),Ei("furiousscornId","-1400% 0")),!0===zH.cd.triageId&&(Qi("triageId",!1,!1),Ei("triageId","-1500% 0")),!0===zH.cd.bulwarkId&&(Qi("bulwarkId",!1,!1),Ei("bulwarkId","-1600% 0"))},zy.WarriorCooldowns=function(){!1===zH.d.warriorkickId&&(Qi("warriorkickId",!0,!0),Ei("warriorkickId","-300% -200%")),!1===zH.d.slamId&&(Qi("slamId",!0,!0),Ei("slamId","-400% -200%")),Qi("avengingstrikeId",!0,!0),Ei("avengingstrikeId","-500% -200%"),!1===zH.d.hemorrhageId&&(Qi("hemorrhageId",!0,!0),Ei("hemorrhageId","-600% -200%")),!1===zH.d.shockwaveId&&(Qi("shockwaveId",!0,!0),Ei("shockwaveId","-700% -200%")),"-512px 0"===NG.pummelId.style.backgroundPosition?(Qi("pummelId",!0,!0),Ei("pummelId","-800% -200%")):"-512px -192px"===NG.pummelId.style.backgroundPosition&&(Qi("pummelId",!0,!0),Ei("pummelId","-800% -300%")),"-576px 0"===NG.subjugateId.style.backgroundPosition?(Qi("subjugateId",!0,!0),Ei("subjugateId","-900% -200%")):"-576px -192px"===NG.subjugateId.style.backgroundPosition&&(Qi("subjugateId",!0,!0),Ei("subjugateId","-900% -300%")),"-640px 0"===NG.decisiveblowId.style.backgroundPosition?(Qi("decisiveblowId",!0,!0),Ei("decisiveblowId","-1000% -200%")):"-640px -192px"===NG.decisiveblowId.style.backgroundPosition&&(Qi("decisiveblowId",!0,!0),Ei("decisiveblowId","-1000% -300%")),!1===zH.d.absorbspellId&&(Qi("absorbspellId",!0,!0),Ei("absorbspellId","-1100% -200%")),!1===zH.d.frenziedrampageId&&(Qi("frenziedrampageId",!0,!0),Ei("frenziedrampageId","-1200% -200%")),!1===zH.d.enrageId&&(Qi("enrageId",!0,!0),Ei("enrageId","-1300% -200%")),!1===zH.d.furiousscornId&&(Qi("furiousscornId",!0,!0),Ei("furiousscornId","-1400% -200%")),!1===zH.d.triageId&&(Qi("triageId",!0,!0),Ei("triageId","-1500% -200%")),!1===zH.d.bulwarkId&&(Qi("bulwarkId",!0,!0),Ei("bulwarkId","-1600% -200%"))},zy.checkWarriorSkills=function(){0!==Vw&&0!==_w&&(Yy.mp<10&&!1===zH.d.slamId&&Ei("slamId","-400% -300%"),Yy.mp>=10&&!1===zH.d.slamId&&Ei("slamId","-400% 0"),Yy.mp<15&&!1===zH.d.hemorrhageId&&Ei("hemorrhageId","-600% -300%"),Yy.mp>=15&&!1===zH.d.hemorrhageId&&Ei("hemorrhageId","-600% 0"),Yy.mp<15&&!1===zH.d.shockwaveId&&Ei("shockwaveId","-700% -300%"),Yy.mp>=15&&!1===zH.d.shockwaveId&&Ei("shockwaveId","-700% 0"),!1===zH.d.pummelId&&((Yy.mp<10||1===fC)&&Ei("pummelId","-800% -300%"),Yy.mp>=10&&0===fC&&Ei("pummelId","-800% 0")),(Yy.mp<5||1===zy.subjugateStatus)&&!1===zH.d.subjugateId&&Ei("subjugateId","-900% -300%"),Yy.mp>=5&&0===zy.subjugateStatus&&!1===zH.d.subjugateId&&Ei("subjugateId","-900% 0"),Yy.mp<15&&!1===zH.d.absorbspellId&&Ei("absorbspellId","-1100% -300%"),Yy.mp>=15&&!1===zH.d.absorbspellId&&Ei("absorbspellId","-1100% 0"),(Yy.mp<25||1===kC)&&Ei("frenziedrampageId","-1200% -300%"),Yy.mp>=25&&0===kC&&Ei("frenziedrampageId","-1200% 0"),Yy.mp<20&&!1===zH.d.furiousscornId&&Ei("furiousscornId","-1400% -300%"),Yy.mp>=20&&!1===zH.d.furiousscornId&&Ei("furiousscornId","-1400% 0"),Yy.mp<25&&!1===zH.d.triageId&&Ei("triageId","-1500% -300%"),Yy.mp>=25&&!1===zH.d.triageId&&Ei("triageId","-1500% 0"),Yy.mp<15&&!1===zH.d.bulwarkId&&Ei("bulwarkId","-1600% -300%"),Yy.mp>=15&&!1===zH.d.bulwarkId&&Ei("bulwarkId","-1600% 0"),Vo(),Ri())},zy.RogueDoneCD=function(){Qi("shadowstrikeId",!1,!1),Ei("shadowstrikeId","-300% 0"),!0===zH.cd.sonicstrikeId&&(Qi("sonicstrikeId",!1,!1),Ei("sonicstrikeId","-400% 0")),!0===zH.cd.hyperstrikeId&&(Qi("hyperstrikeId",!1,!1),Ei("hyperstrikeId","-500% 0")),!0===zH.cd.widowstrikeId&&(Qi("widowstrikeId",!1,!1),Ei("widowstrikeId","-600% 0")),!0===zH.cd.miragestrikeId&&(Qi("miragestrikeId",!1,!1),Ei("miragestrikeId","-700% 0")),!0===zH.cd.lacerateId&&(Qi("lacerateId",!1,!1),Ei("lacerateId","-800% 0")),!0===zH.cd.backstabId&&(Qi("backstabId",!1,!1),Ei("backstabId","-900% 0")),!0===zH.cd.staggershotId&&(Qi("staggershotId",!1,!1),Ei("staggershotId","-1000% 0")),!0===zH.cd.lobotomizeId&&(Qi("lobotomizeId",!1,!1),Ei("lobotomizeId","-1100% 0")),!0===zH.cd.prowlinggashId&&(Qi("prowlinggashId",!1,!1),Ei("prowlinggashId","-1200% 0")),!0===zH.cd.evadeId&&(Qi("evadeId",!1,!1),Ei("evadeId","-1300% 0")),!0===zH.cd.coldbloodId&&(Qi("coldbloodId",!1,!1),Ei("coldbloodId","-1400% 0")),!0===zH.cd.flashpowderId&&(Qi("flashpowderId",!1,!1),Ei("flashpowderId","-1500% 0")),!0===zH.cd.illusivemistId&&(Qi("illusivemistId",!1,!1),Ei("illusivemistId","-1600% 0"))},zy.RogueCooldowns=function(){Qi("shadowstrikeId",!0,!0),Ei("shadowstrikeId","-300% -200%"),!1===zH.d.sonicstrikeId&&(Qi("sonicstrikeId",!0,!0),Ei("sonicstrikeId","-400% -200%")),!1===zH.d.hyperstrikeId&&(Qi("hyperstrikeId",!0,!0),Ei("hyperstrikeId","-500% -200%")),!1===zH.d.widowstrikeId&&(Qi("widowstrikeId",!0,!0),Ei("widowstrikeId","-600% -200%")),!1===zH.d.miragestrikeId&&(Qi("miragestrikeId",!0,!0),Ei("miragestrikeId","-700% -200%")),!1===zH.d.lacerateId&&(Qi("lacerateId",!0,!0),Ei("lacerateId","-800% -200%")),!1===zH.d.backstabId&&(Qi("backstabId",!0,!0),Ei("backstabId","-900% -200%")),!1===zH.d.staggershotId&&(Qi("staggershotId",!0,!0),Ei("staggershotId","-1000% -200%")),!1===zH.d.lobotomizeId&&(Qi("lobotomizeId",!0,!0),Ei("lobotomizeId","-1100% -200%")),!1===zH.d.prowlinggashId&&(Qi("prowlinggashId",!0,!0),Ei("prowlinggashId","-1200% -200%")),!1===zH.d.evadeId&&(Qi("evadeId",!0,!0),Ei("evadeId","-1300% -200%")),!1===zH.d.coldbloodId&&(Qi("coldbloodId",!0,!0),Ei("coldbloodId","-1400% -200%")),!1===zH.d.flashpowderId&&(Qi("flashpowderId",!0,!0),Ei("flashpowderId","-1500% -200%")),!1===zH.d.illusivemistId&&(Qi("illusivemistId",!0,!0),Ei("illusivemistId","-1600% -200%"))},zy.checkRogueSkills=function(){0!==Vw&&0!==_w&&"Rogue"===Yy.job&&(!1===zH.cd.shadowstrikeId&&Ei("shadowstrikeId","-300% 0"),!1===zH.cd.sonicstrikeId&&!1===zH.d.sonicstrikeId&&Ei("sonicstrikeId","-400% 0"),!1===zH.cd.hyperstrikeId&&Ei("hyperstrikeId","-500% 0"),!1===zH.cd.widowstrikeId&&Ei("widowstrikeId","-600% 0"),!1===zH.cd.miragestrikeId&&!1===zH.d.miragestrikeId&&Ei("miragestrikeId","-700% 0"),!1===zH.d.lacerateId&&(Yy.mp<20?Ei("lacerateId","-800% -300%"):Ei("lacerateId","-800% 0")),!1===zH.d.backstabId&&(Yy.mp<20?Ei("backstabId","-900% -300%"):Ei("backstabId","-900% 0")),!1===zH.d.staggershotId&&(Yy.mp<20?Ei("staggershotId","-1000% -300%"):Ei("staggershotId","-1000% 0")),!1===zH.d.lobotomizeId&&(Yy.mp<20?Ei("lobotomizeId","-1100% -300%"):Ei("lobotomizeId","-1100% 0")),!1===zH.d.prowlinggashId&&(Yy.mp<20?Ei("prowlinggashId","-1200% -300%"):Ei("prowlinggashId","-1200% 0")),!1===zH.d.evadeId&&Ei("evadeId","-1300% 0"),!1===zH.d.coldbloodId&&Ei("coldbloodId","-1400% 0"),!1===zH.d.flashpowderId&&Ei("flashpowderId","-1500% 0"),!1===zH.d.illusivemistId&&Ei("illusivemistId","-1600% 0"),!1===zH.d.ancientwillId&&(!1===qC&&Ei("ancientwillId","-1700% -300%"),0!==_w&&0!==Vw&&0!==Xw||!0!==qC||Ei("ancientwillId","-1700% 0")))},zy.MonkDoneCD=function(){Qi("tigerstrikeId",!1,!1),Ei("tigerstrikeId","-300% 0"),!0===zH.cd.eaglestrikeId&&(Qi("eaglestrikeId",!1,!1),Ei("eaglestrikeId","-400% 0")),!0===zH.cd.cheetahstrikeId&&(Qi("cheetahstrikeId",!1,!1),Ei("cheetahstrikeId","-500% 0")),!0===zH.cd.cobrastrikeId&&(Qi("cobrastrikeId",!1,!1),Ei("cobrastrikeId","-600% 0")),!0===zH.cd.dragonstrikeId&&(Qi("dragonstrikeId",!1,!1),Ei("dragonstrikeId","-700% 0")),!0===zH.cd.cranekickId&&(Qi("cranekickId",!1,!1),Ei("cranekickId","-800% 0")),!0===zH.cd.windmillkickId&&(Qi("windmillkickId",!1,!1),Ei("windmillkickId","-900% 0")),!0===zH.cd.ancestralflurryId&&(Qi("ancestralflurryId",!1,!1),Ei("ancestralflurryId","-1000% 0")),!0===zH.cd.flyingkickId&&(Qi("flyingkickId",!1,!1),Ei("flyingkickId","-1100% 0")),!0===zH.cd.chakrablastId&&(Qi("chakrablastId",!1,!1),Ei("chakrablastId","-1200% 0")),!0===zH.cd.feigndeathId&&(Qi("feigndeathId",!1,!1),Ei("feigndeathId","-1300% 0")),!0===zH.cd.mendId&&(Qi("mendId",!1,!1),Ei("mendId","-1400% 0")),!0===zH.cd.stonefistsId&&(Qi("stonefistsId",!1,!1),Ei("stonefistsId","-1500% 0")),!0===zH.cd.intimidationId&&(Qi("intimidationId",!1,!1),Ei("intimidationId","-1600% 0")),!0===zH.cd.innerpeaceId&&(Qi("innerpeaceId",!1,!1),Ei("innerpeaceId","-1700% 0"))},zy.MonkCooldowns=function(){Qi("tigerstrikeId",!0,!0),Ei("tigerstrikeId","-300% -200%"),!1===zH.d.eaglestrikeId&&(Qi("eaglestrikeId",!0,!0),Ei("eaglestrikeId","-400% -200%")),!1===zH.d.cheetahstrikeId&&(Qi("cheetahstrikeId",!0,!0),Ei("cheetahstrikeId","-500% -200%")),!1===zH.d.cobrastrikeId&&(Qi("cobrastrikeId",!0,!0),Ei("cobrastrikeId","-600% -200%")),!1===zH.d.dragonstrikeId&&(Qi("dragonstrikeId",!0,!0),Ei("dragonstrikeId","-700% -200%")),!1===zH.d.cranekickId&&(Qi("cranekickId",!0,!0),Ei("cranekickId","-800% -200%")),!1===zH.d.windmillkickId&&(Qi("windmillkickId",!0,!0),Ei("windmillkickId","-900% -200%")),!1===zH.d.ancestralflurryId&&(Qi("ancestralflurryId",!0,!0),Ei("ancestralflurryId","-1000% -200%")),!1===zH.d.flyingkickId&&(Qi("flyingkickId",!0,!0),Ei("flyingkickId","-1100% -200%")),!1===zH.d.chakrablastId&&(Qi("chakrablastId",!0,!0),Ei("chakrablastId","-1200% -200%")),!1===zH.d.feigndeathId&&(Qi("feigndeathId",!0,!0),Ei("feigndeathId","-1300% -200%")),!1===zH.d.mendId&&(Qi("mendId",!0,!0),Ei("mendId","-1400% -200%")),!1===zH.d.stonefistsId&&(Qi("stonefistsId",!0,!0),Ei("stonefistsId","-1500% -200%")),!1===zH.d.intimidationId&&(Qi("intimidationId",!0,!0),Ei("intimidationId","-1600% -200%")),!1===zH.d.innerpeaceId&&(Qi("innerpeaceId",!0,!0),Ei("innerpeaceId","-1700% -200%"))},zy.checkMonkSkills=function(){0!==Vw&&0!==_w&&"Monk"===Yy.job&&(!1===zH.d.tigerstrikeId&&Ei("tigerstrikeId","-300% 0"),!1===zH.d.eaglestrikeId&&Ei("eaglestrikeId","-400% 0"),!1===zH.d.cheetahstrikeId&&Ei("cheetahstrikeId","-500% 0"),!1===zH.d.cobrastrikeId&&Ei("cobrastrikeId","-600% 0"),!1===zH.d.dragonstrikeId&&Ei("dragonstrikeId","-700% 0"),!1===zH.d.cranekickId&&(Yy.mp<20?Ei("cranekickId","-800% -300%"):Ei("cranekickId","-800% 0")),!1===zH.d.windmillkickId&&(Yy.mp<25?Ei("windmillkickId","-900% -300%"):Ei("windmillkickId","-900% 0")),!1===zH.d.ancestralflurryId&&(Yy.mp<24?Ei("ancestralflurryId","-1000% -300%"):Ei("ancestralflurryId","-1000% 0")),!1===zH.d.chakrablastId&&(Yy.mp<35?Ei("chakrablastId","-1200% -300%"):Ei("chakrablastId","-1200% 0")),!1===zH.d.flyingkickId&&(Yy.mp<25?Ei("flyingkickId","-1100% -300%"):Ei("flyingkickId","-1100% 0")))},zy.PaladinDoneCD=function(){!0===zH.cd.palslamId&&(Qi("palslamId",!1,!1),Ei("palslamId","-300% 0")),!0===zH.cd.rebukeId&&(Qi("rebukeId",!1,!1),Ei("rebukeId","-400% 0")),Qi("purgeId",!1,!1),Ei("purgeId","-500% 0"),!0===zH.cd.vengeanceId&&(Qi("vengeanceId",!1,!1),Ei("vengeanceId","-600% 0")),!0===zH.cd.layhandsId&&(Qi("layhandsId",!1,!1),Ei("layhandsId","-700% 0")),!0===zH.cd.greaterhealingId&&(Qi("greaterhealingId",!1,!1),Ei("greaterhealingId","-800% 0")),!0===zH.cd.holymightId&&(Qi("holymightId",!1,!1),Ei("holymightId","-900% 0")),!0===zH.cd.palrootId&&(Qi("palrootId",!1,!1),Ei("palrootId","-1000% 0")),!0===zH.cd.ardentjudgment&&(Qi("ardentjudgment",!1,!1),Ei("ardentjudgment","-1100% 0")),!0===zH.cd.yaulpId&&(Qi("yaulpId",!1,!1),Ei("yaulpId","-1200% 0")),!0===zH.cd.cleanseId&&(Qi("cleanseId",!1,!1),Ei("cleanseId","-1300% 0")),!0===zH.cd.flashoflightId&&(Qi("flashoflightId",!1,!1),Ei("flashoflightId","-1400% 0"))},zy.PaladinCooldowns=function(){!1===zH.d.palslamId&&(Qi("palslamId",!0,!0),Ei("palslamId","-300% -200%")),!1===zH.d.rebukeId&&(Qi("rebukeId",!0,!0),Ei("rebukeId","-400% -200%")),Qi("purgeId",!0,!0),Ei("purgeId","-500% -200%"),!1===zH.d.vengeanceId&&(Qi("vengeanceId",!0,!0),Ei("vengeanceId","-600% -200%")),!1===zH.d.layhandsId&&(Qi("layhandsId",!0,!0),Ei("layhandsId","-700% -200%")),!1===zH.d.greaterhealingId&&(Qi("greaterhealingId",!0,!0),Ei("greaterhealingId","-800% -200%")),!1===zH.d.holymightId&&(Qi("holymightId",!0,!0),Ei("holymightId","-900% -200%")),!1===zH.d.palrootId&&(Qi("palrootId",!0,!0),Ei("palrootId","-1000% -200%")),!1===zH.d.ardentjudgment&&(Qi("ardentjudgment",!0,!0),Ei("ardentjudgment","-1100% -200%")),!1===zH.d.yaulpId&&(Qi("yaulpId",!0,!0),Ei("yaulpId","-1200% -200%")),!1===zH.d.cleanseId&&(Qi("cleanseId",!0,!0),Ei("cleanseId","-1300% -200%")),!1===zH.d.flashoflightId&&(Qi("flashoflightId",!0,!0),Ei("flashoflightId","-1400% -200%"))};var MH={cost:{greaterHealing:90,holyMight:35,root:50,ardentJudgment:60,yaulp:35,cleanse:75,flashOfLight:30,valor:100,spiritArmor:120,divineProvidence:60,symbolOfRyltan:135}};zy.checkPaladinSkills=function(){0!==Vw&&0!==_w&&"Paladin"===Yy.job&&(!1===zH.d.greaterhealingId&&(Yy.mp<MH.cost.greaterHealing?Ei("greaterhealingId","-800% -300%"):Ei("greaterhealingId","-800% 0%")),!1===zH.d.holymightId&&(Yy.mp<MH.cost.holyMight?Ei("holymightId","-900% -300%"):Ei("holymightId","-900% 0%")),!1===zH.d.ardentjudgment&&(Yy.mp<MH.cost.ardentJudgment?Ei("ardentjudgment","-1100% -300%"):Ei("ardentjudgment","-1100% 0%")),!1===zH.d.yaulpId&&(Yy.mp<MH.cost.yaulp?Ei("yaulpId","-1200% -300%"):Ei("yaulpId","-1200% 0%")),!1===zH.d.cleanseId&&(Yy.mp<MH.cost.cleanse?Ei("cleanseId","-1300% -300%"):Ei("cleanseId","-1300% 0%")),!1===zH.d.flashoflightId&&(Yy.mp<MH.cost.flashOfLight?Ei("flashoflightId","-1400% -300%"):Ei("flashoflightId","-1400% 0%")),!1===zH.d.palrootId&&(Yy.mp<MH.cost.root?Ei("palrootId","-1000% -300%"):Ei("palrootId","-1000% 0%")),!1===zH.d.valorId&&(Yy.mp<MH.cost.valor?Ei("valorId","-1500% -300%"):Ei("valorId","-1500% 0%")),!1===zH.d.spiritarmorId&&(Yy.mp<MH.cost.spiritArmor?Ei("spiritarmorId","-1600% -300%"):Ei("spiritarmorId","-1600% 0%")),!1===zH.d.divineprovidenceId&&(Yy.mp<MH.cost.divineProvidence?Ei("divineprovidenceId","-1700% -300%"):Ei("divineprovidenceId","-1700% 0%")),!1===zH.d.symbolofryltanId&&(Yy.mp<MH.cost.symbolOfRyltan?Ei("symbolofryltanId","-200% -300%"):Ei("symbolofryltanId","-200% -100%")))},zy.ShadowKnightDoneCD=function(){!0===zH.cd.shdslamId&&(Qi("shdslamId",!1,!1),Ei("shdslamId","-300% 0")),Qi("crescentcleaveId",!1,!1),Ei("crescentcleaveId","-400% 0"),!0===zH.cd.deathstrikeId&&(Qi("deathstrikeId",!1,!1),Ei("deathstrikeId","-500% 0")),!0===zH.cd.gaspingfrenzyId&&(Qi("gaspingfrenzyId",!1,!1),Ei("gaspingfrenzyId","-600% 0")),!0===zH.cd.harmtouchId&&(Qi("harmtouchId",!1,!1),Ei("harmtouchId","-700% 0")),!0===zH.cd.shdlifetapId&&(Qi("shdlifetapId",!1,!1),Ei("shdlifetapId","-800% 0")),!0===zH.cd.doomingdarknessId&&(Qi("doomingdarknessId",!1,!1),Ei("doomingdarknessId","-900% 0")),!0===zH.cd.heatbloodId&&(Qi("heatbloodId",!1,!1),Ei("heatbloodId","-1000% 0")),!0===zH.cd.strengthendeadId&&(Qi("strengthendeadId",!1,!1),Ei("strengthendeadId","-1100% 0")),!0===zH.cd.shdfearId&&(Qi("shdfearId",!1,!1),Ei("shdfearId","-1200% 0")),!0===zH.cd.siphonstrengthId&&(Qi("siphonstrengthId",!1,!1),Ei("siphonstrengthId","-1300% 0")),!0===zH.cd.shdfeigndeathId&&(Qi("shdfeigndeathId",!1,!1),Ei("shdfeigndeathId","-1400% 0")),!0===zH.cd.shadowvortexId&&(Qi("shadowvortexId",!1,!1),Ei("shadowvortexId","-1500% 0"))},zy.ShadowKnightCooldowns=function(){!1===zH.d.shdslamId&&(Qi("shdslamId",!0,!0),Ei("shdslamId","-300% -200%")),Qi("crescentcleaveId",!0,!0),Ei("crescentcleaveId","-400% -200%"),!1===zH.d.deathstrikeId&&(Qi("deathstrikeId",!0,!0),Ei("deathstrikeId","-500% -200%")),!1===zH.d.gaspingfrenzyId&&(Qi("gaspingfrenzyId",!0,!0),Ei("gaspingfrenzyId","-600% -200%")),!1===zH.d.harmtouchId&&(Qi("harmtouchId",!0,!0),Ei("harmtouchId","-700% -200%")),!1===zH.d.shdlifetapId&&(Qi("shdlifetapId",!0,!0),Ei("shdlifetapId","-800% -200%")),!1===zH.d.doomingdarknessId&&(Qi("doomingdarknessId",!0,!0),Ei("doomingdarknessId","-900% -200%")),!1===zH.d.heatbloodId&&(Qi("heatbloodId",!0,!0),Ei("heatbloodId","-1000% -200%")),!1===zH.d.strengthendeadId&&(Qi("strengthendeadId",!0,!0),Ei("strengthendeadId","-1100% -200%")),!1===zH.d.shdfearId&&(Qi("shdfearId",!0,!0),Ei("shdfearId","-1200% -200%")),!1===zH.d.siphonstrengthId&&(Qi("siphonstrengthId",!0,!0),Ei("siphonstrengthId","-1300% -200%")),!1===zH.d.shdfeigndeathId&&(Qi("shdfeigndeathId",!0,!0),Ei("shdfeigndeathId","-1400% -200%")),!1===zH.d.shadowvortexId&&(Qi("shadowvortexId",!0,!0),Ei("shadowvortexId","-1500% -200%"))};var TH={cost:{summonDead:100,lifeTap:90,doomingDarkness:30,fear:75,siphonStrength:30,heatBlood:40,vampiricEmbrace:75,resistCold:50,feignDeath:35,shadowVortex:30}};zy.checkShadowKnightSkills=function(){0!==Vw&&0!==_w&&"Shadow Knight"===Yy.job&&(!1===zy.petAlive&&!1===zH.d.summondeadId&&(Yy.mp<TH.cost.summonDead&&Ei("summondeadId","-1600% -300%"),(Yy.mp>=TH.cost.summonDead||!0===zy.petAlive)&&Ei("summondeadId","-1600% 0%")),!1===zH.d.shdlifetapId&&(Yy.mp<TH.cost.lifeTap?Ei("shdlifetapId","-800% -300%"):Ei("shdlifetapId","-800% 0%")),!1===zH.d.doomingdarknessId&&(Yy.mp<TH.cost.doomingDarkness?Ei("doomingdarknessId","-900% -300%"):Ei("doomingdarknessId","-900% 0%")),!1===zH.d.heatbloodId&&(Yy.mp<TH.cost.heatBlood?Ei("heatbloodId","-1000% -300%"):Ei("heatbloodId","-1000% 0%")),!1===zH.d.shdfearId&&(Yy.mp<TH.cost.fear?Ei("shdfearId","-1200% -300%"):Ei("shdfearId","-1200% 0%")),!1===zH.d.siphonstrengthId&&(Yy.mp<TH.cost.siphonStrength?Ei("siphonstrengthId","-1300% -300%"):Ei("siphonstrengthId","-1300% 0%")),!1===zH.d.shdfeigndeathId&&(Yy.mp<TH.cost.feignDeath?Ei("shdfeigndeathId","-1400% -300%"):Ei("shdfeigndeathId","-1400% 0%")),!1===zH.d.shadowvortexId&&(Yy.mp<TH.cost.shadowVortex?Ei("shadowvortexId","-1500% -300%"):Ei("shadowvortexId","-1500% 0%")),!1===zH.d.vampiricembraceId&&(Yy.mp<TH.cost.vampiricEmbrace?Ei("vampiricembraceId","-1700% -300%"):Ei("vampiricembraceId","-1700% 0%")),!1===zH.d.resistcoldId&&(Yy.mp<TH.cost.resistCold?Ei("resistcoldId","-200% -300%"):Ei("resistcoldId","-200% -100%")))},zy.RangerDoneCD=function(){!0===zH.cd.rangerkickId&&(Qi("rangerkickId",!1,!1),Ei("rangerkickId","-300% 0")),Qi("rapidshotId",!1,!1),Ei("rapidshotId","-400% 0"),!0===zH.cd.countershotId&&(Qi("countershotId",!1,!1),Ei("countershotId","-500% 0")),!0===zH.cd.trueshotarrowId&&(Qi("trueshotarrowId",!1,!1),Ei("trueshotarrowId","-600% 0")),!0===zH.cd.volleyshotId&&(Qi("volleyshotId",!1,!1),Ei("volleyshotId","-700% 0")),!0===zH.cd.lighthealingId&&(Qi("lighthealingId",!1,!1),Ei("lighthealingId","-800% 0")),!0===zH.cd.faerieflameId&&(Qi("faerieflameId",!1,!1),Ei("faerieflameId","-900% 0")),!0===zH.cd.igniteId&&(Qi("igniteId",!1,!1),Ei("igniteId","-1000% 0")),!0===zH.cd.snareId&&(Qi("snareId",!1,!1),Ei("snareId","-1100% 0")),!0===zH.cd.wardersrift&&(Qi("wardersrift",!1,!1),Ei("wardersrift","-1200% 0")),!0===zH.cd.weaponshieldId&&(Qi("weaponshieldId",!1,!1),Ei("weaponshieldId","-1300% 0"))},zy.RangerCooldowns=function(){Qi("rapidshotId",!0,!0),Ei("rapidshotId","-400% -200%"),!1===zH.d.rangerkickId&&(Qi("rangerkickId",!0,!0),Ei("rangerkickId","-300% -200%")),!1===zH.d.trueshotarrowId&&(Qi("trueshotarrowId",!0,!0),Ei("trueshotarrowId","-600% -200%")),!1===zH.d.volleyshotId&&(Qi("volleyshotId",!0,!0),Ei("volleyshotId","-700% -200%")),!1===zH.d.lighthealingId&&(Qi("lighthealingId",!0,!0),Ei("lighthealingId","-800% -200%")),!1===zH.d.faerieflameId&&(Qi("faerieflameId",!0,!0),Ei("faerieflameId","-900% -200%")),!1===zH.d.igniteId&&(Qi("igniteId",!0,!0),Ei("igniteId","-1000% -200%")),!1===zH.d.snareId&&(Qi("snareId",!0,!0),Ei("snareId","-1100% -200%")),!1===zH.d.wardersrift&&(Qi("wardersrift",!0,!0),Ei("wardersrift","-1200% -200%")),!1===zH.d.weaponshieldId&&(Qi("weaponshieldId",!0,!0),Ei("weaponshieldId","-1300% -200%"))};var BH={cost:{lightHealing:90,faerieFlame:50,ignite:40,thistlecoat:80,snare:35,feetLikeCat:40,shieldOfBrambles:60,wardersRift:90,spiritOfTheWolf:50}};zy.checkRangerSkills=function(){0!==Vw&&0!==_w&&"Ranger"===Yy.job&&(!1===zH.cd.rapidshotId&&(Qi("rapidshotId",!1,!1),Ei("rapidshotId","-400% 0%")),!1===zH.d.rangerkickId&&(Qi("rangerkickId",!1,!1),Ei("rangerkickId","-300% 0%")),!1===zH.d.trueshotarrowId&&(Qi("trueshotarrowId",!1,!1),Ei("trueshotarrowId","-600% 0%")),!1===zH.d.volleyshotId&&(Qi("volleyshotId",!1,!1),Ei("volleyshotId","-700% 0%")),!1===jC?Ei("countershotId","-500% -300%"):Ei("countershotId","-500% 0%"),!1===zH.d.lighthealingId&&(Yy.mp<BH.cost.lightHealing?Ei("lighthealingId","-800% -300%"):Ei("lighthealingId","-800% 0%")),!1===zH.d.wardersrift&&(Yy.mp<BH.cost.wardersRift?Ei("wardersrift","-1200% -300%"):Ei("wardersrift","-1200% 0%")),!1===zH.d.igniteId&&(Yy.mp<BH.cost.ignite?Ei("igniteId","-1000% -300%"):Ei("igniteId","-1000% 0%")),!1===zH.d.faerieflameId&&(Yy.mp<BH.cost.faerieFlame?Ei("faerieflameId","-900% -300%"):Ei("faerieflameId","-900% 0%")),!1===zH.d.snareId&&(Yy.mp<BH.cost.snare?Ei("snareId","-1100% -300%"):Ei("snareId","-1100% 0%")),!1===zH.d.shieldofbramblesId&&(Yy.mp<BH.cost.shieldOfBrambles?Ei("shieldofbramblesId","-1600% -300%"):Ei("shieldofbramblesId","-1600% 0%")),!1===zH.d.thistlecoatId&&(Yy.mp<BH.cost.thistlecoat?Ei("thistlecoatId","-1400% -300%"):Ei("thistlecoatId","-1400% 0%")),!1===zH.d.feetlikecatId&&(Yy.mp<BH.cost.feetLikeCat?Ei("feetlikecatId","-1500% -300%"):Ei("feetlikecatId","-1500% 0%")),!1===zH.d.rangersowId&&(Yy.mp<BH.cost.spiritOfTheWolf?Ei("rangersowId","-1700% -300%"):Ei("rangersowId","-1700% 0%")))},zy.BardDoneCD=function(){!0===zH.cd.chordsofdissonance&&(Qi("chordsofdissonance",!1,!1),Ei("chordsofdissonance","-300% 0")),!0===zH.cd.chantofbattle&&(Qi("chantofbattle",!1,!1),Ei("chantofbattle","-400% 0")),!0===zH.cd.accelerando&&(Qi("accelerando",!1,!1),Ei("accelerando","-500% 0")),!0===zH.cd.hymnofrestoration&&(Qi("hymnofrestoration",!1,!1),Ei("hymnofrestoration","-600% 0")),!0===zH.cd.songofthesirens&&(Qi("songofthesirens",!1,!1),Ei("songofthesirens","-700% 0")),!0===zH.cd.boastfulbellow&&(Qi("boastfulbellow",!1,!1),Ei("boastfulbellow","-800% 0")),!0===zH.cd.elementalrhythms&&(Qi("elementalrhythms",!1,!1),Ei("elementalrhythms","-900% 0")),!0===zH.cd.lucidlullaby&&(Qi("lucidlullaby",!1,!1),Ei("lucidlullaby","-1000% 0")),!0===zH.cd.consonantchain&&(Qi("consonantchain",!1,!1),Ei("consonantchain","-1100% 0")),!0===zH.cd.dissension&&(Qi("dissension",!1,!1),Ei("dissension","-1200% 0")),!0===zH.cd.chorusofclarity&&(Qi("chorusofclarity",!1,!1),Ei("chorusofclarity","-1300% 0")),!0===zH.cd.anthemdearms&&(Qi("anthemdearms",!1,!1),Ei("anthemdearms","-1400% 0")),!0===zH.cd.euphonichymn&&(Qi("euphonichymn",!1,!1),Ei("euphonichymn","-1500% 0")),!0===zH.cd.shieldofsongs&&(Qi("shieldofsongs",!1,!1),Ei("shieldofsongs","-1600% 0")),!0===zH.cd.desperatedirge&&(Qi("desperatedirge",!1,!1),Ei("desperatedirge","-1700% 0"))},zy.BardCooldowns=function(){!1===zH.d.chordsofdissonance&&(Qi("chordsofdissonance",!0,!0),Ei("chordsofdissonance","-300% -200%")),!1===zH.d.chantofbattle&&(Qi("chantofbattle",!0,!0),Ei("chantofbattle","-400% -200%")),!1===zH.d.accelerando&&(Qi("accelerando",!0,!0),Ei("accelerando","-500% -200%")),!1===zH.d.hymnofrestoration&&(Qi("hymnofrestoration",!0,!0),Ei("hymnofrestoration","-600% -200%")),!1===zH.d.songofthesirens&&(Qi("songofthesirens",!0,!0),Ei("songofthesirens","-700% -200%")),!1===zH.d.boastfulbellow&&(Qi("boastfulbellow",!0,!0),Ei("boastfulbellow","-800% -200%")),!1===zH.d.elementalrhythms&&(Qi("elementalrhythms",!0,!0),Ei("elementalrhythms","-900% -200%")),!1===zH.d.lucidlullaby&&(Qi("lucidlullaby",!0,!0),Ei("lucidlullaby","-1000% -200%")),!1===zH.d.consonantchain&&(Qi("consonantchain",!0,!0),Ei("consonantchain","-1100% -200%")),!1===zH.d.dissension&&(Qi("dissension",!0,!0),Ei("dissension","-1200% -200%")),!1===zH.d.chorusofclarity&&(Qi("chorusofclarity",!0,!0),Ei("chorusofclarity","-1300% -200%")),!1===zH.d.anthemdearms&&(Qi("anthemdearms",!0,!0),Ei("anthemdearms","-1400% -200%")),!1===zH.d.euphonichymn&&(Qi("euphonichymn",!0,!0),Ei("euphonichymn","-1500% -200%")),!1===zH.d.shieldofsongs&&(Qi("shieldofsongs",!0,!0),Ei("shieldofsongs","-1600% -200%")),!1===zH.d.desperatedirge&&(Qi("desperatedirge",!0,!0),Ei("desperatedirge","-1700% -200%"))};var DH={cost:{chordsOfDissonance:40,hymnOfRestoration:30,songOfTheSirens:60,boastfulBellow:40,lucidLullaby:70,consonantChain:25,dissension:70,euphonicHymn:40,shieldOfSongs:120,desperateDirge:75}};zy.checkBardSkills=function(){0!==Vw&&0!==_w&&"Bard"===Yy.job&&!1===TM&&(Yy.mp<DH.cost.chordsOfDissonance?(Gi("chordsofdissonance",!0),Ei("chordsofdissonance","-300% -300%")):(Gi("chordsofdissonance",!1),Ei("chordsofdissonance","-300% 0%")),Yy.mp<DH.cost.songOfTheSirens?(Gi("songofthesirens",!0),Ei("songofthesirens","-700% -300%")):(Gi("songofthesirens",!1),Ei("songofthesirens","-700% 0%")),Yy.mp<DH.cost.hymnOfRestoration?(Gi("hymnofrestoration",!0),Ei("hymnofrestoration","-600% -300%")):(Gi("hymnofrestoration",!1),Ei("hymnofrestoration","-600% 0%")),Yy.mp<DH.cost.boastfulBellow?(Gi("boastfulbellow",!0),Ei("boastfulbellow","-800% -300%")):(Gi("boastfulbellow",!1),Ei("boastfulbellow","-800% 0%")),Yy.mp<DH.cost.lucidLullaby?(Gi("lucidlullaby",!0),Ei("lucidlullaby","-1000% -300%")):(Gi("lucidlullaby",!1),Ei("lucidlullaby","-1000% 0%")),Yy.mp<DH.cost.euphonicHymn?(Gi("euphonichymn",!0),Ei("euphonichymn","-1500% -300%")):(Gi("euphonichymn",!1),Ei("euphonichymn","-1500% 0%")),Yy.mp<DH.cost.consonantChain?(Gi("consonantchain",!0),Ei("consonantchain","-1100% -300%")):(Gi("consonantchain",!1),Ei("consonantchain","-1100% 0%")),Yy.mp<DH.cost.dissension?(Gi("dissension",!0),Ei("dissension","-1200% -300%")):(Gi("dissension",!1),Ei("dissension","-1200% 0%")),Yy.mp<DH.cost.shieldOfSongs?(Gi("shieldofsongs",!0),Ei("shieldofsongs","-1600% -300%")):(Gi("shieldofsongs",!1),Ei("shieldofsongs","-1600% 0%")),Yy.mp<DH.cost.desperateDirge?(Gi("desperatedirge",!0),Ei("desperatedirge","-1700% -300%")):(Gi("desperatedirge",!1),Ei("desperatedirge","-1700% 0%")))},zy.DruidDoneCD=function(){Qi("starfire",!1,!1),Ei("starfire","-300% 0"),!0===zH.cd.dronesofdoom&&(Qi("dronesofdoom",!1,!1),Ei("dronesofdoom","-400% 0")),!0===zH.cd.druhealing&&(Qi("druhealing",!1,!1),Ei("druhealing","-500% 0")),!0===zH.cd.tornado&&(Qi("tornado",!1,!1),Ei("tornado","-600% 0")),!0===zH.cd.engulfingroots&&(Qi("engulfingroots",!1,!1),Ei("engulfingroots","-700% 0")),!0===zH.cd.driftingdeath&&(Qi("driftingdeath",!1,!1),Ei("driftingdeath","-800% 0")),!0===zH.cd.lightningblast&&(Qi("lightningblast",!1,!1),Ei("lightningblast","-900% 0")),!0===zH.cd.earthquake&&(Qi("earthquake",!1,!1),Ei("earthquake","-1000% 0")),!0===zH.cd.hurricane&&(Qi("hurricane",!1,!1),Ei("hurricane","-1100% 0")),!0===zH.cd.sylvangrasp&&(Qi("sylvangrasp",!1,!1),Ei("sylvangrasp","-1200% 0")),!0===zH.cd.volcano&&(Qi("volcano",!1,!1),Ei("volcano","-1300% 0"))},zy.DruidCooldowns=function(){Qi("starfire",!0,!0),Ei("starfire","-300% -200%"),!1===zH.d.dronesofdoom&&(Qi("dronesofdoom",!0,!0),Ei("dronesofdoom","-400% -200%")),!1===zH.d.druhealing&&(Qi("druhealing",!0,!0),Ei("druhealing","-500% -200%")),!1===zH.d.tornado&&(Qi("tornado",!0,!0),Ei("tornado","-600% -200%")),!1===zH.d.engulfingroots&&(Qi("engulfingroots",!0,!0),Ei("engulfingroots","-700% -200%")),!1===zH.d.driftingdeath&&(Qi("driftingdeath",!0,!0),Ei("driftingdeath","-800% -200%")),!1===zH.d.lightningblast&&(Qi("lightningblast",!0,!0),Ei("lightningblast","-900% -200%")),!1===zH.d.earthquake&&(Qi("earthquake",!0,!0),Ei("earthquake","-1000% -200%")),!1===zH.d.hurricane&&(Qi("hurricane",!0,!0),Ei("hurricane","-1100% -200%")),!1===zH.d.sylvangrasp&&(Qi("sylvangrasp",!0,!0),Ei("sylvangrasp","-1200% -200%")),!1===zH.d.volcano&&(Qi("volcano",!0,!0),Ei("volcano","-1300% -200%"))};var LH={cost:{dronesOfDoom:25,greaterHealing:80,skinLikeNature:110,engulfingRoots:40,shieldOfSpikes:75,driftingDeath:40,spiritOfTheWolf:50,chloroplast:75,sylvanGrasp:80}};zy.checkDruidSkills=function(){0!==Vw&&0!==_w&&"Druid"===Yy.job&&(!1===zH.d.dronesofdoom&&(Yy.mp<LH.cost.dronesOfDoom?Ei("dronesofdoom","-400% -300%"):Ei("dronesofdoom","-400% 0%")),!1===zH.d.druhealing&&(Yy.mp<LH.cost.greaterHealing?Ei("druhealing","-500% -300%"):Ei("druhealing","-500% 0%")),!1===zH.d.skinlikenature&&(Yy.mp<LH.cost.skinLikeNature?Ei("skinlikenature","-1400% -300%"):Ei("skinlikenature","-1400% 0%")),!1===zH.d.engulfingroots&&(Yy.mp<LH.cost.engulfingRoots?Ei("engulfingroots","-700% -300%"):Ei("engulfingroots","-700% 0%")),!1===zH.d.shieldofspikes&&(Yy.mp<LH.cost.shieldOfSpikes?Ei("shieldofspikes","-1500% -300%"):Ei("shieldofspikes","-1500% 0%")),!1===zH.d.driftingdeath&&(Yy.mp<LH.cost.driftingDeath?Ei("driftingdeath","-800% -300%"):Ei("driftingdeath","-800% 0%")),!1===zH.d.sylvangrasp&&(Yy.mp<LH.cost.sylvanGrasp?Ei("sylvangrasp","-1200% -300%"):Ei("sylvangrasp","-1200% 0%")),!1===zH.d.chloroplast&&(Yy.mp<LH.cost.chloroplast?Ei("chloroplast","-1700% -300%"):Ei("chloroplast","-1700% 0%")),!1===zH.d.drusow&&(Yy.mp<LH.cost.spiritOfTheWolf?Ei("drusow","-1600% -300%"):Ei("drusow","-1600% 0%")))},zy.ClericDoneCD=function(){Qi("smite",!1,!1),Ei("smite","-300% 0"),!0===zH.cd.soundofforce&&(Qi("soundofforce",!1,!1),Ei("soundofforce","-400% 0")),!0===zH.cd.superiorhealing&&(Qi("superiorhealing",!1,!1),Ei("superiorhealing","-500% 0")),!0===zH.cd.bindingearth&&(Qi("bindingearth",!1,!1),Ei("bindingearth","-600% 0")),!0===zH.cd.expelcorruption&&(Qi("expelcorruption",!1,!1),Ei("expelcorruption","-700% 0")),!0===zH.cd.searingrevelation&&(Qi("searingrevelation",!1,!1),Ei("searingrevelation","-800% 0")),!0===zH.cd.martyrsblessing&&(Qi("martyrsblessing",!1,!1),Ei("martyrsblessing","-900% 0")),!0===zH.cd.guardianangel&&(Qi("guardianangel",!1,!1),Ei("guardianangel","-1000% 0")),!0===zH.cd.holywrath&&(Qi("holywrath",!1,!1),Ei("holywrath","-1100% 0")),!0===zH.cd.markofjudgement&&(Qi("markofjudgement",!1,!1),Ei("markofjudgement","-1200% 0")),!0===zH.cd.benediction&&(Qi("benediction",!1,!1),Ei("benediction","-1300% 0"))},zy.ClericCooldowns=function(){Qi("smite",!0,!0),Ei("smite","-300% -200%"),!1===zH.d.soundofforce&&(Qi("soundofforce",!0,!0),Ei("soundofforce","-400% -200%")),!1===zH.d.superiorhealing&&(Qi("superiorhealing",!0,!0),Ei("superiorhealing","-500% -200%")),!1===zH.d.bindingearth&&(Qi("bindingearth",!0,!0),Ei("bindingearth","-600% -200%")),!1===zH.d.expelcorruption&&(Qi("expelcorruption",!0,!0),Ei("expelcorruption","-700% -200%")),!1===zH.d.searingrevelation&&(Qi("searingrevelation",!0,!0),Ei("searingrevelation","-800% -200%")),!1===zH.d.martyrsblessing&&(Qi("martyrsblessing",!0,!0),Ei("martyrsblessing","-900% -200%")),!1===zH.d.guardianangel&&(Qi("guardianangel",!0,!0),Ei("guardianangel","-1000% -200%")),!1===zH.d.holywrath&&(Qi("holywrath",!0,!0),Ei("holywrath","-1100% -200%")),!1===zH.d.markofjudgement&&(Qi("markofjudgement",!0,!0),Ei("markofjudgement","-1200% -200%")),!1===zH.d.benediction&&(Qi("benediction",!0,!0),Ei("benediction","-1300% -200%"))};var HH={cost:{soundOfForce:30,superiorHealing:80,resolution:100,bindingEarth:50,expelCorruption:60,armorOfFaith:120,divineSanctuary:60,guardianAngel:45,holyWrath:50,symbolOfNaltron:135}};zy.checkClericSkills=function(){0!==Vw&&0!==_w&&"Cleric"===Yy.job&&(!1===zH.d.soundofforce&&(Yy.mp<HH.cost.soundOfForce?Ei("soundofforce","-400% -300%"):Ei("soundofforce","-400% 0%")),!1===zH.d.superiorhealing&&(Yy.mp<HH.cost.superiorHealing?Ei("superiorhealing","-500% -300%"):Ei("superiorhealing","-500% 0%")),!1===zH.d.resolution&&(Yy.mp<HH.cost.resolution?Ei("resolution","-1400% -300%"):Ei("resolution","-1400% 0%")),!1===zH.d.bindingearth&&(Yy.mp<HH.cost.bindingEarth?Ei("bindingearth","-600% -300%"):Ei("bindingearth","-600% 0%")),!1===zH.d.expelcorruption&&(Yy.mp<HH.cost.expelCorruption?Ei("expelcorruption","-700% -300%"):Ei("expelcorruption","-700% 0%")),!1===zH.d.armoroffaith&&(Yy.mp<HH.cost.armorOfFaith?Ei("armoroffaith","-1500% -300%"):Ei("armoroffaith","-1500% 0%")),!1===zH.d.divinesanctuary&&(Yy.mp<HH.cost.divineSanctuary?Ei("divinesanctuary","-1600% -300%"):Ei("divinesanctuary","-1600% 0%")),!1===zH.d.guardianangel&&(Yy.mp<HH.cost.guardianAngel?Ei("guardianangel","-1000% -300%"):Ei("guardianangel","-1000% 0%")),!1===zH.d.holywrath&&(Yy.mp<HH.cost.holyWrath?Ei("holywrath","-1100% -300%"):Ei("holywrath","-1100% 0%")),!1===zH.d.symbolofnaltron&&(Yy.mp<HH.cost.symbolOfNaltron?Ei("symbolofnaltron","-1700% -300%"):Ei("symbolofnaltron","-1700% 0%")))},zy.ShamanDoneCD=function(){Qi("froststrike",!1,!1),Ei("froststrike","-300% 0%"),!0===zH.cd.scourge&&(Qi("scourge",!1,!1),Ei("scourge","-400% 0%")),!0===zH.cd.shmhealing&&(Qi("shmhealing",!1,!1),Ei("shmhealing","-500% 0%")),!0===zH.cd.togorsinsects&&(Qi("togorsinsects",!1,!1),Ei("togorsinsects","-600% 0%")),!0===zH.cd.cannibalize&&(Qi("cannibalize",!1,!1),Ei("cannibalize","-700% 0%")),!0===zH.cd.enstill&&(Qi("enstill",!1,!1),Ei("enstill","-800% 0%")),!0===zH.cd.poisonnova&&(Qi("poisonnova",!1,!1),Ei("poisonnova","-900% 0%")),!0===zH.cd.affliction&&(Qi("affliction",!1,!1),Ei("affliction","-1000% 0%")),!0===zH.cd.reclaimblood&&(Qi("reclaimblood",!1,!1),Ei("reclaimblood","-1100% 0%")),!0===zH.cd.glacialimpact&&(Qi("glacialimpact",!1,!1),Ei("glacialimpact","-1200% 0%")),!0===zH.cd.devouringplague&&(Qi("devouringplague",!1,!1),Ei("devouringplague","-1300% 0%"))},zy.ShamanCooldowns=function(){Qi("froststrike",!0,!0),Ei("froststrike","-300% -200%"),!1===zH.d.scourge&&(Qi("scourge",!0,!0),Ei("scourge","-400% -200%")),!1===zH.d.shmhealing&&(Qi("shmhealing",!0,!0),Ei("shmhealing","-500% -200%")),!1===zH.d.togorsinsects&&(Qi("togorsinsects",!0,!0),Ei("togorsinsects","-600% -200%")),!1===zH.d.cannibalize&&(Qi("cannibalize",!0,!0),Ei("cannibalize","-700% -200%")),!1===zH.d.enstill&&(Qi("enstill",!0,!0),Ei("enstill","-800% -200%")),!1===zH.d.poisonnova&&(Qi("poisonnova",!0,!0),Ei("poisonnova","-900% -200%")),!1===zH.d.affliction&&(Qi("affliction",!0,!0),Ei("affliction","-1000% -200%")),!1===zH.d.reclaimblood&&(Qi("reclaimblood",!0,!0),Ei("reclaimblood","-1100% -200%")),!1===zH.d.glacialimpact&&(Qi("glacialimpact",!0,!0),Ei("glacialimpact","-1200% -200%")),!1===zH.d.devouringplague&&(Qi("devouringplague",!0,!0),Ei("devouringplague","-1300% -200%"))};var AH={cost:{scourge:25,greaterHealing:80,callOfTheAncients:100,guardianSpirit:125,togorsInsects:60,poisonNova:40,spiritOfTheWolf:50,affliction:40,reclaimBlood:70,glacialImpact:45,talismanOfAltuna:140,devouringPlague:80,enstill:50}};zy.checkShamanSkills=function(){0!==Vw&&0!==_w&&"Shaman"===Yy.job&&(!1===zH.d.scourge&&(Yy.mp<AH.cost.scourge?Ei("scourge","-400% -300%"):Ei("scourge","-400% 0%")),!1===zH.d.shmhealing&&(Yy.mp<AH.cost.greaterHealing?Ei("shmhealing","-500% -300%"):Ei("shmhealing","-500% 0%")),!1===zH.d.togorsinsects&&(Yy.mp<AH.cost.togorsInsects?Ei("togorsinsects","-600% -300%"):Ei("togorsinsects","-600% 0%")),!1===zH.d.enstill&&(Yy.mp<AH.cost.enstill?Ei("enstill","-800% -300%"):Ei("enstill","-800% 0%")),!1===zH.d.poisonnova&&(Yy.mp<AH.cost.poisonNova?Ei("poisonnova","-900% -300%"):Ei("poisonnova","-900% 0%")),!1===zH.d.affliction&&(Yy.mp<AH.cost.affliction?Ei("affliction","-1000% -300%"):Ei("affliction","-1000% 0%")),!1===zH.d.reclaimblood&&(Yy.mp<AH.cost.reclaimBlood?Ei("reclaimblood","-1100% -300%"):Ei("reclaimblood","-1100% 0%")),!1===zH.d.glacialimpact&&(Yy.mp<AH.cost.glacialImpact?Ei("glacialimpact","-1200% -300%"):Ei("glacialimpact","-1200% 0%")),!1===zH.d.devouringplague&&(Yy.mp<AH.cost.devouringPlague?Ei("devouringplague","-1300% -300%"):Ei("devouringplague","-1300% 0%")),!1===zH.d.calloftheancients&&(Yy.mp<AH.cost.callOfTheAncients?Ei("calloftheancients","-1400% -300%"):Ei("calloftheancients","-1400% 0%")),!1===zy.petAlive&&!1===zH.d.guardianspirit&&(Yy.mp<AH.cost.guardianSpirit?Ei("guardianspirit","-1500% -300%"):Ei("guardianspirit","-1500% 0%")),!1===zH.d.shmsow&&(Yy.mp<AH.cost.spiritOfTheWolf?Ei("shmsow","-1600% -300%"):Ei("shmsow","-1600% 0%")),!1===zH.d.talismanofaltuna&&(Yy.mp<AH.cost.talismanOfAltuna?Ei("talismanofaltuna","-1700% -300%"):Ei("talismanofaltuna","-1700% 0%")))},zy.NecromancerDoneCD=function(){Qi("bonespirit",!1,!1),Ei("bonespirit","-300% 0%"),!0===zH.cd.cascadingdarkness&&(Qi("cascadingdarkness",!1,!1),Ei("cascadingdarkness","-400% 0%")),!0===zH.cd.invokefear&&(Qi("invokefear",!1,!1),Ei("invokefear","-500% 0%")),!0===zH.cd.drainsoul&&(Qi("drainsoul",!1,!1),Ei("drainsoul","-600% 0%")),!0===zH.cd.feigndeath&&(Qi("feigndeath",!1,!1),Ei("feigndeath","-700% 0%")),!0===zH.cd.augmentdeath&&(Qi("augmentdeath",!1,!1),Ei("augmentdeath","-800% 0%")),!0===zH.cd.igniteblood&&(Qi("igniteblood",!1,!1),Ei("igniteblood","-900% 0%")),!0===zH.cd.corpseexplosion&&(Qi("corpseexplosion",!1,!1),Ei("corpseexplosion","-1000% 0%")),!0===zH.cd.bondofdeath&&(Qi("bondofdeath",!1,!1),Ei("bondofdeath","-1100% 0%")),!0===zH.cd.diamondskin&&(Qi("diamondskin",!1,!1),Ei("diamondskin","-1200% 0%")),!0===zH.cd.asystole&&(Qi("asystole",!1,!1),Ei("asystole","-1300% 0%")),!0===zH.cd.detonatesoul&&(Qi("detonatesoul",!1,!1),Ei("detonatesoul","-1400% 0%")),!0===zH.cd.howlingterror&&(Qi("howlingterror",!1,!1),Ei("howlingterror","-1500% 0%"))},zy.NecromancerCooldowns=function(){Qi("bonespirit",!0,!0),Ei("bonespirit","-300% -200%"),!1===zH.d.cascadingdarkness&&(Qi("cascadingdarkness",!0,!0),Ei("cascadingdarkness","-400% -200%")),!1===zH.d.invokefear&&(Qi("invokefear",!0,!0),Ei("invokefear","-500% -200%")),!1===zH.d.drainsoul&&(Qi("drainsoul",!0,!0),Ei("drainsoul","-600% -200%")),!1===zH.d.feigndeath&&(Qi("feigndeath",!0,!0),Ei("feigndeath","-700% -200%")),!1===zH.d.augmentdeath&&(Qi("augmentdeath",!0,!0),Ei("augmentdeath","-800% -200%")),!1===zH.d.igniteblood&&(Qi("igniteblood",!0,!0),Ei("igniteblood","-900% -200%")),!1===zH.d.corpseexplosion&&(Qi("corpseexplosion",!0,!0),Ei("corpseexplosion","-1000% -200%")),!1===zH.d.bondofdeath&&(Qi("bondofdeath",!0,!0),Ei("bondofdeath","-1100% -200%")),!1===zH.d.diamondskin&&(Qi("diamondskin",!0,!0),Ei("diamondskin","-1200% -200%")),!1===zH.d.asystole&&(Qi("asystole",!0,!0),Ei("asystole","-1300% -200%")),!1===zH.d.detonatesoul&&(Qi("detonatesoul",!0,!0),Ei("detonatesoul","-1400% -200%")),!1===zH.d.howlingterror&&(Qi("howlingterror",!0,!0),Ei("howlingterror","-1500% -200%"))};var xH={cost:{invokeDeath:100,cascadingDarkness:25,invokeFear:75,drainSoul:90,archShielding:120,feignDeath:35,augmentDeath:50,igniteBlood:35,corpseExplosion:25,bondOfDeath:65,diamondSkin:140,howlingTerror:60,detonateSoul:35}};zy.checkNecromancerSkills=function(){0!==Vw&&0!==_w&&"Necromancer"===Yy.job&&(!1===zH.d.cascadingdarkness&&(Yy.mp<xH.cost.cascadingDarkness?Ei("cascadingdarkness","-400% -300%"):Ei("cascadingdarkness","-400% 0%")),Ei("corpseexplosion","-1000% -300%"),!0===sB&&(Yy.mp<xH.cost.corpseExplosion||Ei("corpseexplosion","-1000% 0%")),!1===zH.d.invokefear&&(Yy.mp<xH.cost.invokeFear?Ei("invokefear","-500% -300%"):Ei("invokefear","-500% 0%")),!1===zH.d.drainsoul&&(Yy.mp<xH.cost.drainSoul?Ei("drainsoul","-600% -300%"):Ei("drainsoul","-600% 0%")),!1===zH.d.archshielding&&(Yy.mp<xH.cost.archShielding?Ei("archshielding","-1700% -300%"):Ei("archshielding","-1700% 0%")),!1===zH.d.feigndeath&&(Yy.mp<xH.cost.feignDeath?Ei("feigndeath","-700% -300%"):Ei("feigndeath","-700% 0%")),!1===zH.d.igniteblood&&(Yy.mp<xH.cost.igniteBlood?Ei("igniteblood","-900% -300%"):Ei("igniteblood","-900% 0%")),!1===zH.d.bondofdeath&&(Yy.mp<xH.cost.bondOfDeath?Ei("bondofdeath","-1100% -300%"):Ei("bondofdeath","-1100% 0%")),!1===zH.d.detonatesoul&&(Yy.mp<xH.cost.detonateSoul?Ei("detonatesoul","-1400% -300%"):Ei("detonatesoul","-1400% 0%")),!1===zH.d.howlingterror&&(Yy.mp<xH.cost.howlingTerror?Ei("howlingterror","-1500% -300%"):Ei("howlingterror","-1500% 0%")),!1===zy.petAlive&&!1===zH.d.invokedeath&&(Yy.mp<xH.cost.invokeDeath&&Ei("invokedeath","-1600% -300%"),(Yy.mp>=xH.cost.invokeDeath||!0===zy.petAlive)&&Ei("invokedeath","-1600% 0%")))},zy.EnchanterDoneCD=function(){Qi("chaosflux",!1,!1),Ei("chaosflux","-300% 0%"),!0===zH.cd.gaspingembrace&&(Qi("gaspingembrace",!1,!1),Ei("gaspingembrace","-400% 0%")),!0===zH.cd.cajolingwhispers&&(Qi("cajolingwhispers",!1,!1),Ei("cajolingwhispers","-500% 0%")),!0===zH.cd.colorshift&&(Qi("colorshift",!1,!1),Ei("colorshift","-600% 0%")),!0===zH.cd.mesmerize&&(Qi("mesmerize",!1,!1),Ei("mesmerize","-700% 0%")),!0===zH.cd.shiftlessdeeds&&(Qi("shiftlessdeeds",!1,!1),Ei("shiftlessdeeds","-800% 0%")),!0===zH.cd.alacrity&&(Qi("alacrity",!1,!1),Ei("alacrity","-900% 0%")),!0===zH.cd.gravityflux&&(Qi("gravityflux",!1,!1),Ei("gravityflux","-1000% 0%")),!0===zH.cd.mysticrune&&(Qi("mysticrune",!1,!1),Ei("mysticrune","-1100% 0%")),!0===zH.cd.tashania&&(Qi("tashania",!1,!1),Ei("tashania","-1200% 0%")),!0===zH.cd.enthrall&&(Qi("enthrall",!1,!1),Ei("enthrall","-1300% 0%"))},zy.EnchanterCooldowns=function(){Qi("chaosflux",!0,!0),Ei("chaosflux","-300% -200%"),!1===zH.d.gaspingembrace&&(Qi("gaspingembrace",!0,!0),Ei("gaspingembrace","-400% -200%")),!1===zH.d.cajolingwhispers&&(Qi("cajolingwhispers",!0,!0),Ei("cajolingwhispers","-500% -200%")),!1===zH.d.colorshift&&(Qi("colorshift",!0,!0),Ei("colorshift","-600% -200%")),!1===zH.d.mesmerize&&(Qi("mesmerize",!0,!0),Ei("mesmerize","-700% -200%")),!1===zH.d.shiftlessdeeds&&(Qi("shiftlessdeeds",!0,!0),Ei("shiftlessdeeds","-800% -200%")),!1===zH.d.alacrity&&(Qi("alacrity",!0,!0),Ei("alacrity","-900% -200%")),!1===zH.d.gravityflux&&(Qi("gravityflux",!0,!0),Ei("gravityflux","-1000% -200%")),!1===zH.d.mysticrune&&(Qi("mysticrune",!0,!0),Ei("mysticrune","-1100% -200%")),!1===zH.d.tashania&&(Qi("tashania",!0,!0),Ei("tashania","-1200% -200%")),!1===zH.d.enthrall&&(Qi("enthrall",!0,!0),Ei("enthrall","-1300% -200%"))};var EH={cost:{gaspingEmbrace:25,cajolingWhispers:60,colorShift:35,mesmerize:30,discordantBarrier:120,shiftlessDeeds:65,enchantWeapon:80,adorningGrace:60,alacrity:60,gravityFlux:50,mysticRune:95,tashania:25,enthrall:40,clarity:50}};zy.checkEnchanterSkills=function(){0!==Vw&&0!==_w&&"Enchanter"===Yy.job&&(!1===zH.d.gaspingembrace&&(Yy.mp<EH.cost.gaspingEmbrace?Ei("gaspingembrace","-400% -300%"):Ei("gaspingembrace","-400% 0%")),!1===zH.d.cajolingwhispers&&(Yy.mp<EH.cost.cajolingWhispers?Ei("cajolingwhispers","-500% -300%"):Ei("cajolingwhispers","-500% 0%")),!1===zH.d.colorshift&&(Yy.mp<EH.cost.colorShift?Ei("colorshift","-600% -300%"):Ei("colorshift","-600% 0%")),!1===zH.d.mesmerize&&(Yy.mp<EH.cost.mesmerize?Ei("mesmerize","-700% -300%"):Ei("mesmerize","-700% 0%")),!1===zH.d.discordantbarrier&&(Yy.mp<EH.cost.discordantBarrier?Ei("discordantbarrier","-1400% -300%"):Ei("discordantbarrier","-1400% 0%")),!1===zH.d.shiftlessdeeds&&(Yy.mp<EH.cost.shiftlessDeeds?Ei("shiftlessdeeds","-800% -300%"):Ei("shiftlessdeeds","-800% 0%")),!1===zH.d.enchantweapon&&(Yy.mp<EH.cost.enchantWeapon?Ei("enchantweapon","-1500% -300%"):Ei("enchantweapon","-1500% 0%")),!1===zH.d.adorninggrace&&(Yy.mp<EH.cost.adorningGrace?Ei("adorninggrace","-1600% -300%"):Ei("adorninggrace","-1600% 0%")),!1===zH.d.alacrity&&(Yy.mp<EH.cost.alacrity?Ei("alacrity","-900% -300%"):Ei("alacrity","-900% 0%")),!1===zH.d.gravityflux&&(Yy.mp<EH.cost.gravityFlux?Ei("gravityflux","-1000% -300%"):Ei("gravityflux","-1000% 0%")),!1===zH.d.mysticrune&&(Yy.mp<EH.cost.mysticRune?Ei("mysticrune","-1100% -300%"):Ei("mysticrune","-1100% 0%")),!1===zH.d.tashania&&(Yy.mp<EH.cost.tashania?Ei("tashania","-1200% -300%"):Ei("tashania","-1200% 0%")),!1===zH.d.clarity&&(Yy.mp<EH.cost.clarity?Ei("clarity","-1700% -300%"):Ei("clarity","-1700% 0%")),!1===zH.d.enthrall&&(Yy.mp<EH.cost.enthrall?Ei("enthrall","-1300% -300%"):Ei("enthrall","-1300% 0%")))},zy.MagicianDoneCD=function(){Qi("lavabolt",!1,!1),Ei("lavabolt","-300% 0%"),!0===zH.cd.firestorm&&(Qi("firestorm",!1,!1),Ei("firestorm","-400% 0%")),!0===zH.cd.frozenorb&&(Qi("frozenorb",!1,!1),Ei("frozenorb","-500% 0%")),!0===zH.cd.burnout&&(Qi("burnout",!1,!1),Ei("burnout","-600% 0%")),!0===zH.cd.manashield&&(Qi("manashield",!1,!1),Ei("manashield","-700% 0%")),!0===zH.cd.psionicstorm&&(Qi("psionicstorm",!1,!1),Ei("psionicstorm","-800% 0%")),!0===zH.cd.reclaimelements&&(Qi("reclaimelements",!1,!1),Ei("reclaimelements","-900% 0%")),!0===zH.cd.elementalfury&&(Qi("elementalfury",!1,!1),Ei("elementalfury","-1000% 0%")),!0===zH.cd.armageddon&&(Qi("armageddon",!1,!1),Ei("armageddon","-1100% 0%")),!0===zH.cd.stasisfield&&(Qi("stasisfield",!1,!1),Ei("stasisfield","-1200% 0%")),!0===zH.cd.alteredstate&&(Qi("alteredstate",!1,!1),Ei("alteredstate","-1300% 0%"))},zy.MagicianCooldowns=function(){Qi("lavabolt",!0,!0),Ei("lavabolt","-300% -200%"),!1===zH.d.firestorm&&(Qi("firestorm",!0,!0),Ei("firestorm","-400% -200%")),!1===zH.d.frozenorb&&(Qi("frozenorb",!0,!0),Ei("frozenorb","-500% -200%")),!1===zH.d.burnout&&(Qi("burnout",!0,!0),Ei("burnout","-600% -200%")),!1===zH.d.manashield&&(Qi("manashield",!0,!0),Ei("manashield","-700% -200%")),!1===zH.d.psionicstorm&&(Qi("psionicstorm",!0,!0),Ei("psionicstorm","-800% -200%")),!1===zH.d.reclaimelements&&(Qi("reclaimelements",!0,!0),Ei("reclaimelements","-900% -200%")),!1===zH.d.elementalfury&&(Qi("elementalfury",!0,!0),Ei("elementalfury","-1000% -200%")),!1===zH.d.armageddon&&(Qi("armageddon",!0,!0),Ei("armageddon","-1100% -200%")),!1===zH.d.stasisfield&&(Qi("stasisfield",!0,!0),Ei("stasisfield","-1200% -200%")),!1===zH.d.alteredstate&&(Qi("alteredstate",!0,!0),Ei("alteredstate","-1300% -200%"))};var GH={cost:{elemental:100,shieldOfLava:80,firestorm:25,phantomPlate:120,frozenOrb:40,elementalArmor:75,psionicStorm:45,reclaimElements:90,stasisField:60,armageddon:60}};zy.checkMagicianSkills=function(){0!==Vw&&0!==_w&&"Magician"===Yy.job&&("an earth elemental pet"!==PD&&(Yy.mp<GH.cost.elemental?Ei("earthelemental","-200% -300%"):Ei("earthelemental","-1700% 0%")),"an air elemental pet"!==PD&&(Yy.mp<GH.cost.elemental?Ei("airelemental","-200% -300%"):Ei("airelemental","-1700% -100%")),"a fire elemental pet"!==PD&&(Yy.mp<GH.cost.elemental?Ei("fireelemental","-200% -300%"):Ei("fireelemental","-1700% -200%")),"a frost elemental pet"!==PD&&(Yy.mp<GH.cost.elemental?Ei("frostelemental","-200% -300%"):Ei("frostelemental","-1700% -300%")),!1===zH.d.shieldoflava&&(Yy.mp<GH.cost.shieldOfLava?Ei("shieldoflava","-1400% -300%"):Ei("shieldoflava","-1400% 0%")),!1===zH.d.firestorm&&(Yy.mp<GH.cost.firestorm?Ei("firestorm","-400% -300%"):Ei("firestorm","-400% 0%")),!1===zH.d.phantomplate&&(Yy.mp<GH.cost.phantomPlate?Ei("phantomplate","-1500% -300%"):Ei("phantomplate","-1500% 0%")),!1===zH.d.frozenorb&&(Yy.mp<GH.cost.frozenOrb?Ei("frozenorb","-500% -300%"):Ei("frozenorb","-500% 0%")),!1===zH.d.elementalarmor&&(Yy.mp<GH.cost.elementalArmor?Ei("elementalarmor","-1600% -300%"):Ei("elementalarmor","-1600% 0%")),!1===zH.d.psionicstorm&&(Yy.mp<GH.cost.psionicStorm?Ei("psionicstorm","-800% -300%"):Ei("psionicstorm","-800% 0%")),!1===zH.d.reclaimelements&&(Yy.mp<GH.cost.reclaimElements?Ei("reclaimelements","-900% -300%"):Ei("reclaimelements","-900% 0%")),!1===zH.d.armageddon&&(Yy.mp<GH.cost.armageddon?Ei("armageddon","-1100% -300%"):Ei("armageddon","-1100% 0%")),!1===zH.d.stasisfield&&(Yy.mp<GH.cost.stasisField?Ei("stasisfield","-1200% -300%"):Ei("stasisfield","-1200% 0%")))},zy.WizardDoneCD=function(){Qi("icebolt",!1,!1),Ei("icebolt","-300% 0%"),!0===zH.cd.chargedbolts&&(Qi("chargedbolts",!1,!1),Ei("chargedbolts","-400% 0%")),!0===zH.cd.frostnova&&(Qi("frostnova",!1,!1),Ei("frostnova","-500% 0%")),!0===zH.cd.magicmissiles&&(Qi("magicmissiles",!1,!1),Ei("magicmissiles","-600% 0%")),!0===zH.cd.fireball&&(Qi("fireball",!1,!1),Ei("fireball","-700% 0%")),!0===zH.cd.deepfreeze&&(Qi("deepfreeze",!1,!1),Ei("deepfreeze","-800% 0%")),!0===zH.cd.chainlightning&&(Qi("chainlightning",!1,!1),Ei("chainlightning","-900% 0%")),!0===zH.cd.glacialspike&&(Qi("glacialspike",!1,!1),Ei("glacialspike","-1000% 0%")),!0===zH.cd.iceblock&&(Qi("iceblock",!1,!1),Ei("iceblock","-1100% 0%")),!0===zH.cd.icecomet&&(Qi("icecomet",!1,!1),Ei("icecomet","-1200% 0%")),!0===zH.cd.counterspell&&(Qi("counterspell",!1,!1),Ei("counterspell","-1300% 0%")),!0===zH.cd.harnessEther&&(Qi("harnessEther",!1,!1),Ei("harnessEther","-1400% 0%")),!0===zH.cd.meteor&&(Qi("meteor",!1,!1),Ei("meteor","-1500% 0%")),!0===zH.cd.mirrorimages&&(Qi("mirrorimages",!1,!1),Ei("mirrorimages","-1600% 0%"))},zy.WizardCooldowns=function(){Qi("icebolt",!0,!0),Ei("icebolt","-300% -200%"),!1===zH.d.chargedbolts&&(Qi("chargedbolts",!0,!0),Ei("chargedbolts","-400% -200%")),!1===zH.d.frostnova&&(Qi("frostnova",!0,!0),Ei("frostnova","-500% -200%")),!1===zH.d.magicmissiles&&(Qi("magicmissiles",!0,!0),Ei("magicmissiles","-600% -200%")),!1===zH.d.fireball&&(Qi("fireball",!0,!0),Ei("fireball","-700% -200%")),!1===zH.d.deepfreeze&&(Qi("deepfreeze",!0,!0),Ei("deepfreeze","-800% -200%")),!1===zH.d.chainlightning&&(Qi("chainlightning",!0,!0),Ei("chainlightning","-900% -200%")),!1===zH.d.glacialspike&&(Qi("glacialspike",!0,!0),Ei("glacialspike","-1000% -200%")),!1===zH.d.iceblock&&(Qi("iceblock",!0,!0),Ei("iceblock","-1100% -200%")),!1===zH.d.icecomet&&(Qi("icecomet",!0,!0),Ei("icecomet","-1200% -200%")),!1===zH.d.counterspell&&(Qi("counterspell",!0,!0),Ei("counterspell","-1300% -200%")),!1===zH.d.harnessEther&&(Qi("harnessEther",!0,!0),Ei("harnessEther","-1400% -200%")),!1===zH.d.meteor&&(Qi("meteor",!0,!0),Ei("meteor","-1500% -200%")),!1===zH.d.mirrorimages&&(Qi("mirrorimages",!0,!0),Ei("mirrorimages","-1600% -200%"))};var qH={cost:{chargedBolts:25,frostNova:25,magicMissiles:20,viziersShielding:110,fireball:40,deepFreeze:50,chainLightning:30,glacialSpike:40,counterspell:20,harnessEther:30}};zy.checkWizardSkills=function(){0!==Vw&&0!==_w&&"Wizard"===Yy.job&&(!1===zH.d.chargedbolts&&(Yy.mp<qH.cost.chargedBolts?Ei("chargedbolts","-400% -300%"):Ei("chargedbolts","-400% 0%")),!1===zH.d.frostnova&&(Yy.mp<qH.cost.frostNova?Ei("frostnova","-500% -300%"):Ei("frostnova","-500% 0%")),!1===zH.d.magicmissiles&&(Yy.mp<qH.cost.magicMissiles?Ei("magicmissiles","-600% -300%"):Ei("magicmissiles","-600% 0%")),!1===zH.d.viziersshielding&&(Yy.mp<qH.cost.viziersShielding?Ei("viziersshielding","-1700% -300%"):Ei("viziersshielding","-1700% 0%")),!1===zH.d.fireball&&(Yy.mp<qH.cost.fireball?Ei("fireball","-700% -300%"):Ei("fireball","-700% 0%")),!1===zH.d.deepfreeze&&(Yy.mp<qH.cost.deepFreeze?Ei("deepfreeze","-800% -300%"):Ei("deepfreeze","-800% 0%")),!1===zH.d.chainlightning&&(Yy.mp<qH.cost.chainLightning?Ei("chainlightning","-900% -300%"):Ei("chainlightning","-900% 0%")),!1===zH.d.glacialspike&&(Yy.mp<qH.cost.glacialSpike?Ei("glacialspike","-1000% -300%"):Ei("glacialspike","-1000% 0%")),!1===zH.d.counterspell&&(Yy.mp<qH.cost.counterspell?Ei("counterspell","-1300% -300%"):Ei("counterspell","-1300% 0%")),!1===zH.d.harnessEther&&(Yy.mp<qH.cost.harnessEther?Ei("harnessEther","-1400% -300%"):Ei("harnessEther","-1400% 0%")))},e(function(){$NG.window3.on("mouseenter","#warriorkickId",function(){var e="8".fontcolor("#ff0000"),a=40+3*Yy.talent1;a>100&&(a=100);var n=Qt(ne()/6*(1+bS.eq[11].armor/80),.7,"Kick");NG.tooltipname.innerHTML="Kick",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Deliver a swift kick causing "+n[0]+" to "+n[1]+" physical damage. Your boots' armor value affects Kick's damage.<br><br>Effect: "+a+"% chance to interrupt your target's spell."})}),e(function(){$NG.window3.on("mouseenter","#slamId",function(){var e="10".fontcolor("#00ff00"),a="12".fontcolor("#ff0000"),n="3.5".fontcolor("#00ff00"),t=Qt(ne()/4*(1+bS.eq[13].armor/80),.8,"Slam");NG.tooltipname.innerHTML="Slam",NG.tooltipmsg.innerHTML="Cost: "+e+" Fury<br>Cooldown: "+a+" Seconds<br><br>Slams knocks your target to the ground causing "+t[0]+" to "+t[1]+" physical damage. Your shield's armor value affects Slam's damage.<br><br>Effect: Stuns your target for "+n+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#avengingstrikeId",function(){var e="25".fontcolor("#00ff00"),a=(dS.ceil(Yy.maxHp/200)+"").fontcolor("#00ff00"),n=Qt(ne()/16,.5,"Avenging Strike");NG.tooltipname.innerHTML="Avenging Strike",NG.tooltipmsg.innerHTML="Avenging Strike hits your target for "+n[0]+" to "+n[1]+" weapon damage.<br><br>Effect: If you have more than 80 Fury, Avenging Strike will cost "+e+" Fury and you will regenerate "+a+" health every second for 6 seconds."})}),e(function(){$NG.window3.on("mouseenter","#hemorrhageId",function(){var e="15".fontcolor("#00ff00"),a="2%".fontcolor("#00ff00"),n=[],t="your target";Yy.talent6>=20&&(t="three targets"),n[0]='<span class="green">'+~~(.9*(ne()/12+5))+"</span>",n[1]='<span class="green">'+~~(ne()/12+5)+"</span>",NG.tooltipname.innerHTML="Hemorrhage";var i="Cost: "+e+" Fury<br><br>Hemorrhage causes "+t+" to bleed for "+n[0]+" to "+n[1]+" physical damage every second for 24 seconds. Damage increases by "+a+" each tick.<br><br>";Yy.talent11>=20&&(i+="Hemorrhage ticks have an "+Q("8%")+" chance to activate Subjugate"),NG.tooltipmsg.innerHTML=i})}),e(function(){$NG.window3.on("mouseenter","#shockwaveId",function(){var e="12".fontcolor("#00ff00"),a="24".fontcolor("#ff0000"),n=Qt(ne()/3.5*(1+bS.eq[13].armor/50),.8,"Shockwave");NG.tooltipname.innerHTML="Shockwave";var t="Cost: "+e+" Fury<br>Cooldown: "+a+" Seconds<br><br>Unleash a sonic wave causing "+n[0]+" to "+n[1]+" physical damage on all targets. Your shield's armor value affects Shockwave's damage.<br><br>Effect: Stuns all targets for 3.5 seconds.<BR><BR>Special: Shockwave cannot be dodged.";NG.tooltipmsg.innerHTML=t})}),e(function(){$NG.window3.on("mouseenter","#pummelId",function(){var e="10".fontcolor("#00ff00"),a="6".fontcolor("#ff0000"),n="";sS.Guardian>=6&&(n="five times ");var t=Qt(ne()/10,.8,"Pummel");NG.tooltipname.innerHTML="Pummel",NG.tooltipmsg.innerHTML="Cost: "+e+" Fury<br>Cooldown: "+a+" Seconds<br><br>Pummel your target "+n+"for "+t[0]+" to "+t[1]+" physical damage. Pummel is activated by stunning your target.<br><br>Effect: Makes you invincible for 2 seconds."})}),e(function(){$NG.window3.on("mouseenter","#subjugateId",function(){var e="5".fontcolor("#00ff00"),n=1+a.abs(1-Yy.hp/Yy.maxHp),t=Qt(yc(ne()/5*n,1),.8,"Subjugate");NG.tooltipname.innerHTML="Subjugate";var i="Cost: "+e+" Fury<br><br>Subjugate your target for "+t[0]+" to "+t[1]+" physical damage. Subjugate increases its damage as your health value decreases. Subjugate is activated for 8 seconds when a mob dodges your physical attack or when hemorrhage stops ticking.";i+="<BR><BR>Special: Subjugate cannot be dodged.",NG.tooltipmsg.innerHTML=i})}),e(function(){$NG.window3.on("mouseenter","#decisiveblowId",function(){var e="15".fontcolor("#00ff00"),a="5".fontcolor("#ff0000"),n=Qt(ne()/2.5,.8,"Decisive Blow");NG.tooltipname.innerHTML="Decisive Blow",NG.tooltipmsg.innerHTML="Cost: "+e+" Fury<br>Cooldown: "+a+" Seconds<br><br>Decisively strike your target for "+n[0]+" to "+n[1]+" physical damage. Decisive Blow is activated when your current target is below 40% health."})}),e(function(){$NG.window3.on("mouseenter","#absorbspellId",function(){var e="15".fontcolor("#00ff00"),a="24";Yy.talent7>=20&&(a="12");var n="Absorb Spell";Yy.talent7>0&&(n="Reflect");var t=a.fontcolor("#ff0000");NG.tooltipname.innerHTML=n,NG.tooltipmsg.innerHTML="Cost: "+e+" Fury<br>Cooldown: "+t+" Seconds<br><br>For three seconds you can negate the next spell cast on you and convert its damage to health and fury."})}),e(function(){$NG.window3.on("mouseenter","#frenziedrampageId",function(){var e="25".fontcolor("#00ff00"),a=Qt(ne()/16,.8,"Frenzied Rampage"),n="50%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Frenzied Rampage",NG.tooltipmsg.innerHTML="Cost: "+e+" Fury<br><br>Frenzied Rampage hits your target for "+a[0]+" to "+a[1]+" physical damage. Frenzied Rampage is activated when any mob dies.<br><br>Effect: Makes you invincible for 1.5 seconds and adds "+n+" haste for 8 seconds."})}),e(function(){$NG.window3.on("mouseenter","#furiousscornId",function(){var e="20".fontcolor("#00ff00");NG.tooltipname.innerHTML="Furious Scorn",NG.tooltipmsg.innerHTML="Cost: "+e+" Fury<br><br>Furious Scorn discourages your opponents and debuffs their strength by "+Q("15%")+"."})}),e(function(){$NG.window3.on("mouseenter","#enrageId",function(){var e="30".fontcolor("#ff0000");NG.tooltipname.innerHTML="Enrage";var a="Cooldown: "+e+" Seconds<br><br>Enrage instantly generates 40 Fury.";Yy.talent10>=1&&(a+="<BR><BR>After using enrage your next attack is amplified by "+Q(10*oa())+" percent."),Yy.talent10>=20&&(a+="<BR><BR>Effect: Enrage triggers frenzy."),NG.tooltipmsg.innerHTML=a})}),e(function(){$NG.window3.on("mouseenter","#triageId",function(){var e="25".fontcolor("#00ff00"),a="60".fontcolor("#ff0000");NG.tooltipname.innerHTML="Triage",NG.tooltipmsg.innerHTML="Cost: "+e+" Fury<br>Cooldown: "+a+" Seconds<br><br>A surge of adrenaline heals your wounds for a varying percentage of your maximum health every second for 15 seconds. The percentage healed increases as your current health value decreases."})}),e(function(){$NG.window3.on("mouseenter","#bulwarkId",function(){var e="15".fontcolor("#00ff00"),a=40+Je(),n=15;Yy.talent3>=20&&(n=20);var t="<span color='green'>"+a+"%</span>",i="60".fontcolor("#ff0000");NG.tooltipname.innerHTML="Bulwark",NG.tooltipmsg.innerHTML="Cost: "+e+" Fury<br>Cooldown: "+i+" Seconds<br><br>Assume a defensive position for "+n+" seconds. Bulwark reduces all damage by "+t+"."})}),e(function(){$NG.window3.on("mouseenter","#intrepidmightId",function(){var e="12".fontcolor("#ff0000"),a=Qt(ne()/7,.8,"Intrepid Might");NG.tooltipname.innerHTML="Intrepid Might",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Fearlessly strike your target for "+a[0]+" to "+a[1]+" physical damage. Intrepid Might can only be used while stunned, feared, or rooted.<br><br>Effect: Makes you invincible for 1 second. Breaks stun, fear, and root"})}),e(function(){$NG.window3.on("mouseenter","#shadowstrikeId",function(){var e=Q("20"),a=Qt(ne()/16,.5,"Shadow Strike");NG.tooltipname.innerHTML="Shadow Strike",NG.tooltipmsg.innerHTML="Generate: "+e+" Technique Points<br><br>Shadow Strike your target for "+a[0]+" to "+a[1]+" physical damage.<br><br>Effect: Makes you invincible for .1 seconds."})}),e(function(){$NG.window3.on("mouseenter","#lacerateId",function(){var e="All".fontcolor("#00ff00"),a=(Yy.mp,0);Wy[bL].lacerate>0&&(a=20);var n=(Yy.mp+a)/100+1,t=Qt((ne()/10+Z(oe()/6))*n,.8,"Lacerate"),i="2%".fontcolor("#00ff00"),o="10%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Lacerate";var r="Cost: "+e+" Technique Points<br>",l=Q("12");Yy.talent1>=20&&(r+="Cooldown: "+l+" Seconds<br>"),r+="<br>Lacerate your target for "+t[0]+" to "+t[1]+" physical damage. The damage multiplier varies based on your TP value. Target bleeds for "+Q("4-20")+" seconds based on combo points.<br><br>Effect: Increases physical damage by "+i+" to "+o+". Your finishers will benefit from a passive 20-point technique point bonus on all lacerated targets",Yy.talent1>=20&&(r+="<br><br>Effect: Leech 20% of Lacerate damage."),NG.tooltipmsg.innerHTML=r})}),e(function(){$NG.window3.on("mouseenter","#evadeId",function(){var e="40".fontcolor("#ff0000"),a="60%".fontcolor("00ff00");(dS.ceil(35+qp()/4.4/4)+"").fontcolor("#00ff00"),(100*dS.ceil(qp()/4.4/2/10)+"%").fontcolor("#00ff00");NG.tooltipname.innerHTML="Evade",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Disappear from combat for five seconds. If you attack while evading, you will ambush your target and stun them for five seconds and inflict an additional "+a+" damage.<br><br>Effect: Evade makes mobs unable to target you. DoTs will still hit you and cancel Evade."})}),e(function(){$NG.window3.on("mouseenter","#sonicstrikeId",function(){var e="20".fontcolor("#00ff00"),a="15".fontcolor("#ff0000"),n=Qt(ne()/7,.7,"Sonic Strike");NG.tooltipname.innerHTML="Sonic Strike",NG.tooltipmsg.innerHTML="Generate: "+e+" Technique Points<br>Cooldown: "+a+" Seconds<br><br>Sonic Strike hits for "+n[0]+" to "+n[1]+" physical damage.<br><br>Effect: Causes a sonic wave that disrupts your target's spell."})}),e(function(){$NG.window3.on("mouseenter","#backstabId",function(){var e="All".fontcolor("#00ff00"),a="15".fontcolor("#ff0000"),n=0;Wy[bL].lacerate>0&&(n=20),"pierced"===bS.eq[12].type&&(n+=20);var t=(Yy.mp+n)/100+1,i=Qt((ne()/2+Z(oe()/2))*t,.8,"Backstab");NG.tooltipname.innerHTML="Backstab",NG.tooltipmsg.innerHTML="Cost: "+e+" Technique Points<br>Cooldown: "+a+" Seconds<br><br>Backstab your target for "+i[0]+" to "+i[1]+" physical damage. The minimum damage and multiplier varies based on your TP value. Agility affects your minimum damage. If you have a piercing weapon in your main hand, all finishers will benefit from a passive 20-point technique point bonus."})}),e(function(){$NG.window3.on("mouseenter","#coldbloodId",function(){var e="60".fontcolor("#ff0000"),a="100%".fontcolor("#00ff00"),n=(dS.ceil(oe()/3)+"").fontcolor("#00ff00"),t=(dS.ceil(oe()/3+Yy.level/3)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Cold Blood",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Your next skill-based attack has a "+a+" chance of a critical hit and you absorb "+n+" to "+t+" health."})}),e(function(){$NG.window3.on("mouseenter","#flashpowderId",function(){var e="15".fontcolor("#ff0000");(dS.ceil(1+qp()/4.4/3)+"").fontcolor("#00ff00"),"50%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Flash Powder";var a=Rt(ne()/1.3,.75,"fire","Flash Powder"),n="Cooldown: "+e+" Seconds<br><br>Blind your target by throwing flash powder in their eyes. They lose track of you, but if you attack them again the effect will wear off.";Yy.talent10>=20&&(n+="<br><br>Flash powder ignites for "+a[0]+" to "+a[1]+" fire damage."),NG.tooltipmsg.innerHTML=n})}),e(function(){$NG.window3.on("mouseenter","#hyperstrikeId",function(){var e="20".fontcolor("#00ff00"),a=Qt(ne()/24,.7,"Hyper Strike"),n="30%".fontcolor("#00ff00"),t="30".fontcolor("#00ff00");NG.tooltipname.innerHTML="Hyper Strike",NG.tooltipmsg.innerHTML="Generate: "+e+" Technique Points<br><br>Hyper Strike hits for "+a[0]+" to "+a[1]+" physical damage.<br><br>Effect: Buffs your skill haste "+n+" for "+t+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#illusivemistId",function(){var e="12".fontcolor("#00ff00"),a="24".fontcolor("#ff0000"),n="50%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Illusive Mist",NG.tooltipmsg.innerHTML="Cooldown: "+a+" Seconds<br><br>Your outline shifts making you difficult to attack. All damage is reduced by "+n+" for "+e+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#staggershotId",function(){var e="All".fontcolor("#00ff00"),a="25".fontcolor("#ff0000"),n=0;Wy[bL].lacerate>0&&(n=20);var t=(Yy.mp+n)/100+Z(oe()/4)+1,i=Qt(ne()/10*t,.7,"Stagger Shot"),o=((50*Yy.mp+1500)/1e3+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Stagger Shot",NG.tooltipmsg.innerHTML="Cost: "+e+" Technique Points<br>Cooldown: "+a+" Seconds<br><br>Stagger Shot your target for "+i[0]+" to "+i[1]+" physical damage. The minimum damage and stun duration varies based on your TP value.<br><br>Effect: Stun your target for "+o+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#roguehideId",function(){var e=60;"Halfling"===Yy.race&&(e+=30),NG.tooltipname.innerHTML="Hide",NG.tooltipmsg.innerHTML="Attacking while hidden will increase your initial attacks' damage by "+Q(e+"%")+" and stun your target for 5 seconds."})}),e(function(){$NG.window3.on("mouseenter","#widowstrikeId",function(){var e="20".fontcolor("#00ff00"),a=Ft(~~(ne()/16),.9,"poison","Widow Strike");NG.tooltipname.innerHTML="Widow Strike",NG.tooltipmsg.innerHTML="Generate: "+e+" Technique Points<br><br>Widow Strike inflicts "+a[0]+" to "+a[1]+" poison damage every second for 24 seconds. Damage is based on your weapon skill and your weapon's damage.<br><br>Effect: Prevents all passive regeneration effects."})}),e(function(){$NG.window3.on("mouseenter","#lobotomizeId",function(){var e="All".fontcolor("#00ff00"),a="22".fontcolor("#ff0000"),n=0;Wy[bL].lacerate>0&&(n=20);var t=(Yy.mp+n)/100+Z(oe()/5)+1,i=Qt(ne()/7*t,.8,"Lobotomize"),o=(2e3+50*Yy.mp)/1e3+"".fontcolor("#00ff00");NG.tooltipname.innerHTML="Lobotomize",NG.tooltipmsg.innerHTML="Cost: "+e+" Technique Points<br>Cooldown: "+a+" Seconds<br><br>Lobotomize your target for "+i[0]+" to "+i[1]+" physical damage. The minimum damage and silence duration varies based on your TP value.<br><br>Effect: Silences your target for "+o+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#ancientwillId",function(){var e="20".fontcolor("#ff0000"),a=((dS.ceil(1+qp()/4.4/3)+"").fontcolor("#00ff00"),"50%".fontcolor("#00ff00"),"40".fontcolor("#00ff00"));NG.tooltipname.innerHTML="Ancient Will",NG.tooltipmsg.innerHTML="Generate: "+a+" Technique Points<br>Cooldown: "+e+" Seconds<br><br>You are possessed by an ancient presence that breaks you from fear, stun, and root effects. In your moment of desperation you are shielded by two mirages.<br><br>Ancient Will is activated when you are affected by stun, fear, or root."})}),e(function(){$NG.window3.on("mouseenter","#miragestrikeId",function(){var e="20".fontcolor("#00ff00"),a=Q("15");Yy.talent4>=20&&Q("13");var n=Qt(ne()/4,.8,"Mirage Strike");NG.tooltipname.innerHTML="Mirage Strike",NG.tooltipmsg.innerHTML="Generate: "+e+" Technique Points<br>Cooldown: "+a+" Seconds<br><br>Mirage Strike hits for "+n[0]+" to "+n[1]+" physical damage.<br><br>Effect: Create two mirages that act as decoys in combat. You can have up to five mirages at once. Mirages can absorb physical, magical, and dot-based damage."})}),e(function(){$NG.window3.on("mouseenter","#prowlinggashId",function(){var e="All".fontcolor("#00ff00"),a=Q("30");Yy.talent12>=20&&Q("12");var n=0;Wy[bL].lacerate>0&&(n=20);var t=(Yy.mp+n)/20*1.25;Yy.talent12>=20&&(t=dS.round(2*t)),0===(t=~~t)&&(t=""),t=Q(t);var i=(Yy.mp+n)/100+1,o=Qt((ne()/8+Z(oe()/3))*i,.5,"Prowling Gash");NG.tooltipname.innerHTML="Prowling Gash",NG.tooltipmsg.innerHTML="Cooldown: "+a+" Seconds<br>Cost: "+e+" Technique Points<br><br>Unleash a cone of "+t+" physical attacks for "+o[0]+" to "+o[1]+" physical damage. The damage varies based on your TP value."})}),e(function(){$NG.window3.on("mouseenter","#tigerstrikeId",function(){var e="5".fontcolor("#00ff00"),a=Qt(ne()/16,.5,"Tiger Strike");NG.tooltipname.innerHTML="Tiger Strike",NG.tooltipmsg.innerHTML="Generate: "+e+" Spirit<br><br>Tiger Strike your target and adjacent targets for "+a[0]+" to "+a[1]+" physical damage."})}),e(function(){$NG.window3.on("mouseenter","#cranekickId",function(){var e="20".fontcolor("#00ff00"),a=1+Yy.mp/200,n=Qt(ne()/9*(1+bS.eq[11].armor/80)*a,.7,"Crane Kick");NG.tooltipname.innerHTML="Crane Kick",NG.tooltipmsg.innerHTML="Cost: "+e+" Spirit<br><br>Crane Kick hits your target and adjacent targets causing "+n[0]+" to "+n[1]+" physical damage. Damage increases with your current spirit value. Your boots' armor value affects Crane Kick's damage."})}),e(function(){$NG.window3.on("mouseenter","#feigndeathId",function(){var e="15".fontcolor("#ff0000");NG.tooltipname.innerHTML="Feign Death",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Slow your heartbeat to a crawl and fall to the ground. Some opponents may be convinced you are actually dead. While feigning your death, you cannot be ambushed."})}),e(function(){$NG.window3.on("mouseenter","#eaglestrikeId",function(){var e="5".fontcolor("#00ff00"),a="12".fontcolor("#ff0000"),n=Qt(ne()/10,.9,"Eagle Strike"),t="50%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Eagle Strike";var i="Generate: "+e+" Spirit<br>Cooldown: "+a+" Seconds<br><br>Eagle Strike your target for "+n[0]+" to "+n[1]+" physical damage.<br><br>Effect: Your critical hit rate is increased by "+t+" for 4 seconds.";Yy.talent1>=20&&(i+="<br><br>Effect: Stun target for "+Q("3")+" seconds."),NG.tooltipmsg.innerHTML=i})}),e(function(){$NG.window3.on("mouseenter","#windmillkickId",function(){var e="25".fontcolor("#00ff00"),a=25;sS.Friar>=6&&(a-=13);var n=Qt(ne()/2.5*(1+bS.eq[11].armor/60),.8,"Windmill Kick"),t=Rt(ne()/3,.85,"cold","Wave of Frost");NG.tooltipname.innerHTML="Windmill Kick";var i="Cost: "+e+" Spirit<br>Cooldown: "+Q(a)+" Seconds<br><br>Windmill Kick hits your target causing "+n[0]+" to "+n[1]+" physical damage. Your boots' armor value affects Windmill Kick's damage.<br><br>";Yy.talent5>=20&&(i+="A Wave of Frost hits your target for "+t[0]+" to "+t[1]+" cold damage, slowing all targets for seven seconds.<br><br>"),i+="Effect: Casting targets are interrupted and makes you invincible for 1 second.",NG.tooltipmsg.innerHTML=i})}),e(function(){$NG.window3.on("mouseenter","#mendId",function(){var e="30".fontcolor("#ff0000"),a="25%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Mend",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Mend your wounds and recover "+a+" of your maximum health value."})}),e(function(){$NG.window3.on("mouseenter","#cheetahstrikeId",function(){var e="5".fontcolor("#00ff00"),a="30".fontcolor("#ff0000"),n="33%".fontcolor("#00ff00"),t=Qt(ne()/10,.8,"Cheetah Strike"),i=Rt(ne()/1.5,.6,"lightning","Thunderbolt");NG.tooltipname.innerHTML="Cheetah Strike";var o="Generate: "+e+" Spirit<br>Cooldown: "+a+" Seconds<br><br>Cheetah Strike your target for "+t[0]+" to "+t[1]+" physical damage.<br><br>";Yy.talent6>=20&&(o+="A Thunderbolt hits three targets for "+i[0]+" to "+i[1]+" lightning damage.<br><br>"),o+="Effect: Buff your haste by "+n+" for 12 seconds.",NG.tooltipmsg.innerHTML=o})}),e(function(){$NG.window3.on("mouseenter","#ancestralflurryId",function(){var e="24".fontcolor("#00ff00"),a="35".fontcolor("#ff0000"),n=Qt(ne()/14,.5,"Ancestral Flurry");NG.tooltipname.innerHTML="Ancestral Flurry",NG.tooltipmsg.innerHTML="Cost: "+e+" Spirit<br>Cooldown: "+a+" Seconds<br><br>Unleash a 12-hit combo on your target. Each strike hits for "+n[0]+" to "+n[1]+" physical damage.<br><br>Effect: You are invincible for the duration of the flurry."})}),e(function(){$NG.window3.on("mouseenter","#stonefistsId",function(){var e="20".fontcolor("#ff0000");(dS.round(Yy.level/1.5)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Stone Fist Reversal",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Assume a defensive stance for three seconds. All physical attacks are countered for its duration."})}),e(function(){$NG.window3.on("mouseenter","#cobrastrikeId",function(){var e="5".fontcolor("#00ff00"),a="20".fontcolor("#ff0000"),n="4%".fontcolor("#00ff00"),t=Qt(ne()/20,.5,"Cobra Strike");NG.tooltipname.innerHTML="Cobra Strike",NG.tooltipmsg.innerHTML="Generate: "+e+" Spirit<br>Cooldown: "+a+" Seconds<br><br>Cobra Strike your target for "+t[0]+" to "+t[1]+" physical damage.<br><br>Effect: "+n+" of physical damage inflicted is converted to health."})}),e(function(){$NG.window3.on("mouseenter","#chakrablastId",function(){var e="35".fontcolor("#00ff00"),a="30".fontcolor("#ff0000"),n=Qt(ne()/5,.8,"Chakra Blast",!0),t=Rt(3.4*n[1],.8,"magic","Chi Blast"),i="75%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Chakra Blast";var o="Cost: "+e+" Spirit<br>Cooldown: "+a+" Seconds<br><br>Chakra Blast your target for "+Q(n[0])+" to "+Q(n[1])+" physical damage. You are healed for "+i+" of the inflicted damage value.<br><br>";Yy.talent4>=20&&(o+="A potent Chi Blast strikes all targets for "+t[0]+" to "+t[1]+" arcane damage<br><br>"),o+="Effect: Makes you invincible for 1 second.",NG.tooltipmsg.innerHTML=o})}),e(function(){$NG.window3.on("mouseenter","#intimidationId",function(){var e="45".fontcolor("#ff0000"),a=((dS.ceil(8+qp()/4.4/7)+"").fontcolor("#00ff00"),"140%".fontcolor("#00ff00"),"12-20");Yy.talent3>=20&&(a="24-40"),NG.tooltipname.innerHTML="Intimidation",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Reveal your indomitable spirit and strike fear into your opponent.<br><br>Effect: Fear your target for "+Q(a)+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#flyingkickId",function(){var e="25".fontcolor("#00ff00"),a="24".fontcolor("#ff0000"),n=Qt(ne()/1.2*(1+bS.eq[11].armor/40),.8,"Flying Kick"),t=Rt(ne()/4,.9,"cold","Ice Bolt"),i=Rt(ne()/2.6,.7,"fire","Fire Bolt"),o=Rt(ne()/2,.3,"lightning","Static Bolt");NG.tooltipname.innerHTML="Flying Kick";var r="Cost: "+e+" Spirit<br>Cooldown: "+a+" Seconds<br><br>Perform a Flying Kick on your target causing "+n[0]+" to "+n[1]+" physical damage. Your boots' armor value affects Flying Kick's damage.<br><br>";Yy.talent7>=20&&(r+="An Ice Bolt hits your target for "+t[0]+" to "+t[1]+" cold damage.<br>",r+="A Fire Bolt hits your target for "+i[0]+" to "+i[1]+" fire damage.<br>",r+="A Static Bolt hits your target for "+o[0]+" to "+o[1]+" lightning damage.<br><br>"),r+="Effect: Makes you invincible for 1 second.",NG.tooltipmsg.innerHTML=r})}),e(function(){$NG.window3.on("mouseenter","#dragonstrikeId",function(){var e="12".fontcolor("#00ff00"),a="20".fontcolor("#ff0000"),n=Rt(ne()/10,.8,"fire","Dragon Strike");NG.tooltipname.innerHTML="Dragon Strike",NG.tooltipmsg.innerHTML="Generate: "+e+" Spirit<br>Cooldown: "+a+" Seconds<br><br>Deliver a flaming uppercut on your current target for "+n[0]+" to "+n[1]+" fire damage. Hits your primary target three times and hits adjacent targets once.<br><br>Effect: Makes you invincible for 1 second."})}),e(function(){$NG.window3.on("mouseenter","#innerpeaceId",function(){var e="5".fontcolor("#00ff00"),a="75".fontcolor("#ff0000");Yy.talent3>=20&&(a=Q("60"));(dS.ceil(8+qp()/4.4/7)+"").fontcolor("#00ff00"),"140%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Inner Peace",NG.tooltipmsg.innerHTML="Cooldown: "+a+" Seconds<br><br>Effect: Auto attacks generate an additional "+e+" spirit for 10 seconds."})}),e(function(){$NG.window3.on("mouseenter","#palslamId",function(){var e="12".fontcolor("#ff0000"),a="3.5".fontcolor("#00ff00"),n=Qt(ne()/4*(1+bS.eq[13].armor/80),.7,"Slam");NG.tooltipname.innerHTML="Slam",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Slam your target for "+n[0]+" to "+n[1]+" physical damage. Your shield's armor value increases damage.<br><br>Effect: Stuns your target for "+a+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#rebukeId",function(){var e="8".fontcolor("#ff0000"),a=Qt(ne()/9,.8,"Rebuke"),n=Rt(ne()/2.2,.75,"lightning","Thunderbolt");NG.tooltipname.innerHTML="Rebuke";var t="Cooldown: "+e+" Seconds<br><br>Rebuke your target for "+a[0]+" to "+a[1]+" physical damage.<br><br>";Yy.talent5>=20&&(t+="A Thunderbolt hits five targets for "+n[0]+" to "+n[1]+" lightning damage.<br><br>"),t+="Effect: Makes you invincible for 1 second. If attacked while invincible, you will automatically counter-attack with Repudiate.",NG.tooltipmsg.innerHTML=t})}),e(function(){$NG.window3.on("mouseenter","#purgeId",function(){"12".fontcolor("#ff0000");var e=Qt(ne()/16,.5,"Purge");NG.tooltipname.innerHTML="Purge",NG.tooltipmsg.innerHTML="Purge your target for "+e[0]+" to "+e[1]+" weapon damage. Purge's damage is increased on undead targets."})}),e(function(){$NG.window3.on("mouseenter","#vengeanceId",function(){var e,a="16".fontcolor("#ff0000"),n=Yy.hp/Yy.maxHp;n>.8?e=ne()/5:n>.6?e=ne()/4:n>.4?e=ne()/3:n>.2?e=ne()/2:n>0&&(e=ne());var t=Qt(e,.8,"Vengeance"),i=Rt(ne()/1.3,.4,"magic","Holy Bolt");NG.tooltipname.innerHTML="Vengeance";var o="Cooldown: "+a+" Seconds<br><br>Strikes your target for "+t[0]+" to "+t[1]+" physical damage. Vengeance's damage is increased as your health gets lower.<br><br>";Yy.talent5>=20&&(o+="A divine hail of twelve Holy Bolts hits random targets for "+i[0]+" to "+i[1]+" arcane damage.<br><br>"),o+="Effect: Absorbs mana based on your damage inflicted.<br><br>Effect: Vengeance stuns your target if you interrupt your target's physical attack.",NG.tooltipmsg.innerHTML=o})}),e(function(){$NG.window3.on("mouseenter","#layhandsId",function(){var e=(3e5-5e3*Ue())/1e3,a=ts(.7*Yy.maxHp,.9);NG.tooltipname.innerHTML="Lay Hands";var n="Cooldown: "+Q(e)+" Seconds<br><br>Lay Hands to recover "+a[0]+" to "+a[1]+" health. Lay Hands can be used while feared or stunned.";Yy.talent2>=20&&(n+="<BR><BR>Effect: Lay Hands activates Divine Retaliation, riposting all physical attacks for 20 seconds."),NG.tooltipmsg.innerHTML=n})}),zy.greaterHealingFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),Lu("blue"),qi("greaterhealingId",!0),Ei("greaterhealingId","-800% -100%"),cS.delayedCall(20,ls),jy(mS.getElementById("greaterhealingId"),20,"greaterhealingId");var e=yc(1.6*Qe()*(1.35*Je()/100+1),.9);zy.popupHeal(e),zy.drawMyMp(-oH)}},e(function(){$NG.window3.on("mouseenter","#greaterhealingId",function(){var e="20".fontcolor("#ff0000"),a=ts(1.6*Qe()*(1.35*Je()/100+1),.9);NG.tooltipname.innerHTML="Greater Healing",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.greaterHealing)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Greater Healing heals for "+a[0]+" to "+a[1]+" hit points."})}),e(function(){$NG.window3.on("mouseenter","#holymightId",function(){var e="18".fontcolor("#ff0000"),a=Rt(Re(),.9,"magic","Holy Might"),n="4.5".fontcolor("#00ff00");NG.tooltipname.innerHTML="Holy Might",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.holyMight)+" Mana Points<br>Cast Time: "+ld(1500)+" Second<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Holy Might hits your target for "+a[0]+" to "+a[1]+" arcane damage.<br><br>Effect: Stuns your target for "+n+" seconds."})}),zy.holyMightFinish=function(){if(!1!==Lb()){Qa("spellDoneSlam"),qi("holymightId",!0),Ei("holymightId","-900% -100%"),cS.delayedCall(18,cs),jy(mS.getElementById("holymightId"),18,"holymightId");var e=yc(Re(),.9);fa(Wy[bL].name+" is struck by a sudden force.",3),ao(bL,4500,-288),"High"===kw.videoSetting&&Lr(bL,"lineNovaMagenta"),zy.myMagicDamage("magic",e,bL,ee(),"Holy Might"),zy.drawMyMp(-oH)}},e(function(){$NG.window3.on("mouseenter","#palrootId",function(){var e="8".fontcolor("#ff0000");"".fontcolor("#00ff00");NG.tooltipname.innerHTML="Root",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.root)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Roots your target in place. Rooted targets cannot melee you."})}),zy.palRootFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),qi("palrootId",!0),Ei("palrootId","-1000% -100%"),cS.delayedCall(8,fs),jy(mS.getElementById("palrootId"),8,"palrootId"),zy.drawMyMp(-oH);var a=bL;if(!0!==Gb(a))if(!0!==ac(a)){fa(Wy[bL].name+" is rooted.",3);Cg(a),Wy[a].rootStatus=4,e("#rootIcon"+a+",#rootBuffIcon"+a).remove(),kv(a,!0);Li("Root",a,"rootBuffIcon",0,-320),0===zy.autoAttackStatus&&Si()}else fa(Wy[bL].name+" resisted Root.",1);else fa(Wy[bL].name+" is immune to Root.",1)}},e(function(){$NG.window3.on("mouseenter","#ardentjudgment",function(){var e="12".fontcolor("#ff0000"),a=Rt(2.7*Re(),.8,"magic","Ardent Judgment"),n="50%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Ardent Judgment",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.ardentJudgment)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Ardent Judgment hits your target for "+a[0]+" to "+a[1]+" arcane damage. Undead targets take an additional "+n+" damage."})}),zy.ardentJudgmentFinish=function(){if(qi("ardentjudgment",!0),Ei("ardentjudgment","-1100% -100%"),cS.delayedCall(12,ps),jy(mS.getElementById("ardentjudgment"),12,"ardentjudgment"),!1!==Lb()){Qa("spellDoneFlames"),zy.drawMyMp(-oH);var e=yc(2.7*Re(),.8),a=bL;"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX-100,n=sy("ardentJudgment",5,a,-25,200,0);n.image.onload=function(){cS.to(n,.15,{scaleY:725/600,onComplete:function(){oy(5,n)}})};var t=sy("ardentJudgment",5,a,-25,200,0);t.image.onload=function(){cS.to(t,.15,{scaleY:725/600,alpha:.2,onComplete:function(){cS.to(t,1,{alpha:0,onComplete:function(){oy(5,t)}})}}),cS.delayedCall(.15,fp,[a+100,800])}}(a),zy.myMagicDamage("magic",e,a,ee(),"Ardent Judgment")}},e(function(){$NG.window3.on("mouseenter","#yaulpId",function(){var e=8;sS.Duke>=6&&(e=12);var a="30".fontcolor("#ff0000"),n=dS.ceil(Qe()/7+le()/9+ra());NG.tooltipname.innerHTML="Yaulp",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.yaulp)+" Mana Points<br>Cast Time: "+ld(1e3)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+a+" Seconds<br><br>Emit a mighty yaulp to boost your damage by "+Q(n+"%")+" and unleash a frenzy of attacks for "+Q(e)+" seconds."})}),zy.yaulpFinish=function(){if(qi("yaulpId",!0),Ei("yaulpId","-1200% -100%"),cS.delayedCall(30,ks),jy(mS.getElementById("yaulpId"),30,"yaulpId"),!1!==Lb()){var e=8e3;sS.Duke>=6&&(e+=4e3),Qa("fanaticism"),zy.drawMyMp(-oH),fa("You feel a surge of divine power as you let forth a mighty yaulp.",3),ZC.kill(),ZC=cS.delayedCall(e/1e3,vs),yaulpBonus=dS.ceil(Qe()/7+le()/9)+ra(),nS.kill(),tS.kill(),nS=cS.delayedCall(0,Ct),tS=cS.delayedCall(0,Mt),ki(0),JC=!0,ny();if(hD.kill(),hD=cS.delayedCall(e/1e3,function(){wi("yaulpIcon")}),Bi("Yaulp","yaulpIcon",e,-384),Yy.talent11>=20){var a=dS.ceil(ae()/5);xT=a,wi("yaulpShieldIcon"),Bi("Protective Bubble","yaulpShieldIcon",0,-384)}}},e(function(){$NG.window3.on("mouseenter","#cleanseId",function(){NG.tooltipname.innerHTML="Fervent Prayer",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.cleanse)+" Mana Points<br>Cooldown: "+R("30")+" Seconds<br><br>Cast Time: "+ld(1500)+" Second<br>Spell Type: Abjuration<br><br>Fervent Prayer removes all damage-over-time spells and makes you invincible for five seconds."})}),zy.cleanseFinish=function(){if(!1!==Lb()){qi("cleanseId",!0),Ei("cleanseId","-1300% -100%"),cS.delayedCall(30,Cs),jy(mS.getElementById("cleanseId"),30,"cleanseId"),Qa("cleansing"),fa("Your prayer provides divine protection.",3),dp(5e3),Bi("Fervent Prayer","ferventPrayerIcon",5e3,-416),zy.drawMyMp(-oH);for(var a=0;a<=4;a++)Wy[a].dotActive.kill(),Wy[a].envenomTicks=0,Wy[a].engulfingDarknessTicks=0,Wy[a].staticFieldTicks=0,xD.kill(),Wy[a].blizzardTicks=0,OI=!1,Wy[a].conflagrationTicks=0,e("#mobEnvenomIcon"+a).remove(),e("#mobEngulfingDarknessIcon"+a).remove(),e("#mobStaticFieldIcon"+a).remove(),e("#mobBlizzardIcon"+a).remove(),e("#mobConflagrationIcon"+a).remove();e("#mobChilledIcon").remove(),zy.drawMyMp(),ny(),"High"===kw.videoSetting&&Ms()}},e(function(){$NG.window3.on("mouseenter","#flashoflightId",function(){var e=Q("60");Yy.talent12>=20&&(e=Q("30"));"45".fontcolor("#00ff00");var a=Rt(ne()*(6.9*la()/100),.85,"magic","Blinding Justice"),n="your target";Yy.talent12>=20&&(n="three targets"),NG.tooltipname.innerHTML="Flash of Light";var t="Cost: "+Q(MH.cost.flashOfLight)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Blast your target's eyes with a flash of holy light that dazes them for 25 seconds. Dazed targets have a "+Q("30%")+" chance to miss.";Yy.talent12>0&&(t+="<BR><BR>Blinding Justice hits "+n+" for "+a[0]+" to "+a[1]+" arcane damage."),NG.tooltipmsg.innerHTML=t})}),zy.flashOfLightFinish=function(){qi("flashoflightId",!0),Ei("flashoflightId","-1400% -100%");var e=6e4;if(Yy.talent12>=20&&(e=3e4),cS.delayedCall(e/1e3,Bs),jy(mS.getElementById("flashoflightId"),e/1e3,"flashoflightId"),!1!==Lb()){Qa("spellCastHeal3"),zy.drawMyMp(-oH),fa(Wy[bL].name+" is dazed by a flash of light.",3);var a=bL;if(Yy.talent12<1){t=25e3;Wy[a].level>Yy.level&&(t-=dS.pow(Wy[a].level-Yy.level,1.25)),Ls(a,t,-448),"High"===kw.videoSetting&&sm(a)}else for(var n=0;n<=4;n++)if(Wy[n].name&&n>=a-1&&n<=a+1){var t=25e3;Wy[n].level>Yy.level&&(t-=dS.pow(Wy[n].level-Yy.level,1.25));var i=yc(ne()*(6.9*la()/100),.85);Yy.talent12>0&&zy.myMagicDamage("magic",i,n,ee(),"Blinding Justice"),Ls(n,t,-448),"High"===kw.videoSetting&&sm(n)}}},e(function(){$NG.window3.on("mouseenter","#valorId",function(){var e="54".fontcolor("#00ff00"),a=dS.ceil(.44*Ne()*(5.1*Ze()/100+1)),n=dS.ceil(.6*Ne()*(10.75*Ze()/100+1));NG.tooltipname.innerHTML="Valor",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.valor)+" Mana Points<br>Cast Time: "+ld(4e3)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your hit points by "+Q(n)+" and your armor by "+Q(a)+" for "+e+" minutes."})}),zy.valorFinish=function(){if(!1!==Lb()){Au("yellow","easeInBack",5,25,120,4),Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You feel valorous.",3),!0===eM&&(nk-=aM,Zy-=nM),tM.kill(),tM=cS.delayedCall(3240,As),aM=dS.ceil(.44*Ne()*(5.1*Ze()/100+1)),nM=dS.ceil(.6*Ne()*(10.75*Ze()/100+1)),Zy+=nM,nk+=aM,eM=!0,zy.drawMyHp(),ny();UB.kill(),UB=cS.delayedCall(3240,function(){wi("valorIcon")}),Bi("Valor","valorIcon",324e4,-480)}},e(function(){$NG.window3.on("mouseenter","#spiritarmorId",function(){var e="54".fontcolor("#00ff00"),a=(dS.ceil(.55*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Spirit Armor",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.spiritArmor)+" Mana Points<br>Cast Time: "+ld(6e3)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your armor by "+a+" for "+e+" minutes."})}),zy.spiritArmorFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("Translucent armor gathers around you.",3),!0===iM&&(nk-=oM),rM.kill(),rM=cS.delayedCall(3240,Es),oM=dS.ceil(.55*Ne()),nk+=oM,iM=!0,ny();pD.kill(),pD=cS.delayedCall(3240,function(){wi("spiritArmorIcon")}),Bi("Spirit Armor","spiritArmorIcon",324e4,-512),Au("blue","easeInBack",5,25,150,5)}},e(function(){$NG.window3.on("mouseenter","#divineprovidenceId",function(){var e="36".fontcolor("#00ff00"),a=dS.ceil(.12*Ne()+2.6*ta());NG.tooltipname.innerHTML="Divine Providence",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.divineProvidence)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your poison and magic resistance by "+Q(a)+" for "+e+" minutes."})}),zy.divineProvidenceFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You feel protected from poison and lightning.",3),!0===lM&&(ik-=sM,ok-=dM),rM.kill(),rM=cS.delayedCall(2160,qs),sM=dS.ceil(.12*Ne()+2.6*ta()),dM=dS.ceil(.12*Ne()+2.6*ta()),ik+=sM,ok+=dM,lM=!0,ny();dD.kill(),dD=cS.delayedCall(2160,function(){wi("resistIcon")}),Bi("Divine Providence","resistIcon",216e4,-544),Au("white","easeInQuad",5,15,120,3)}},e(function(){$NG.window3.on("mouseenter","#symbolofryltanId",function(){"4".fontcolor("#00ff00");var e="54".fontcolor("#00ff00"),a=(dS.ceil(.7*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Symbol of Marshan",NG.tooltipmsg.innerHTML="Cost: "+Q(MH.cost.symbolOfRyltan)+" Mana Points<br>Cast Time: "+ld(4e3)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your hit points by "+a+" for "+e+" minutes."})}),zy.symbolOfRyltanFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("The Symbol of Marshan flashes before your eyes.",3),!0===cM&&(Zy-=mM),uM.kill(),uM=cS.delayedCall(3240,Qs),mM=dS.ceil(.7*Ne()),Zy+=mM,cM=!0,ny(),zy.drawMyHp();var e="symbolOfRyltanIcon";gD.kill(),gD=cS.delayedCall(3240,function(){wi(e)}),Bi("Symbol of Marshan",e,324e4,-64,-32),Au("teal","easeInQuad",5,25,160,5)}},e(function(){$NG.window3.on("mouseenter","#rangerkickId",function(){var e="8".fontcolor("#ff0000"),a=Qt(ne()/6*(1+bS.eq[11].armor/80),.7,"Kick"),n=40+3*Yy.talent1;n>100&&(n=100),NG.tooltipname.innerHTML="Kick",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Kick hits your target and inflicts "+a[0]+" to "+a[1]+" physical damage. Your boots' armor value increases kick's damage.<br><br>Effect: "+Q(n+"%")+" chance to interrupt your target's spell."})}),e(function(){$NG.window3.on("mouseenter","#rapidshotId",function(){var e=Qt(ne()/16,.2,"Rapid Shot",0,"bow"),a=Rt(ne()/7,.8,"fire","elemental");NG.tooltipname.innerHTML="Rapid Shot";var n="three";Yy.talent12>=20&&(n="four");var t="Rapid Strike hits "+n+" times for "+e[0]+" to "+e[1]+" physical bow damage.<br><br>";Yy.talent8>=20&&(t+="Your arrows have a "+Q("30%")+" chance to inflict "+a[0]+" to "+a[1]+" fire damage.<br><br>"),t+="If no bow is equipped, magic arrows are fired instead.",NG.tooltipmsg.innerHTML=t})}),e(function(){$NG.window3.on("mouseenter","#countershotId",function(){var e="15%".fontcolor("#00ff00"),a=Qt(ne()/3,.8,"Counter Shot",0,"bow"),n=Rt(ne()/7,.8,"fire","elemental");NG.tooltipname.innerHTML="Counter Shot";var t="Physical damage received has a "+e+" chance to activate Counter Shot.<br><br>Counter Shot hits for "+a[0]+" to "+a[1]+" physical bow damage. <br><br>";Yy.talent8>=20&&(t+="Your arrows have a "+Q("30%")+" chance to inflict "+n[0]+" to "+n[1]+" fire damage.<br><br>"),t+="Effect: Interrupts your target's spell and absorbs mana.<br><br>",Yy.talent5>=20&&(t+="Effect: Stuns your target for 1.5 seconds.<br><br>"),t+="If no bow is equipped, magic arrows are fired instead.",NG.tooltipmsg.innerHTML=t})}),e(function(){$NG.window3.on("mouseenter","#trueshotarrowId",function(){var e=30;sS.Daimyo>=6&&(e-=6);var a=Qt(5+ne()/2,.8,"Trueshot Arrow",0,"bow"),n=Rt(ne()/7,.8,"fire","elemental"),t=10;!0===Wy[bL].snareStatus&&(t+=7),!0===NC&&(t+=7),NG.tooltipname.innerHTML="Trueshot Arrow";var i="your target twice";Yy.talent7>=20&&(i="your target twice and a third arrow hits three targets");var o="Cooldown: "+Q(e)+" Seconds<br><br>Trueshot Arrow hits "+i+" for "+a[0]+" to "+a[1]+" physical bow damage.<br><br>A successful parry has a "+Q(t+"%")+" chance to amplify your next trueshot arrow by 50%.<br><br>",r=kI;kI>=500&&(r=500),o+="Current Amplification: "+Q(r+"%")+"<div id='ampWrap'><div id='ampBar'></div></div>",Yy.talent8>=20&&(o+="Your arrows have a "+Q("30%")+" chance to inflict "+n[0]+" to "+n[1]+" fire damage.<br><br>"),o+="If no bow is equipped, magic arrows are fired instead.",NG.tooltipmsg.innerHTML=o;r=r/500*100;mS.getElementById("ampBar").style.width=r+"%",cS.to("#ampBar",.3,{backgroundColor:"#aa8a00",repeat:-1,yoyo:!0})})}),e(function(){$NG.window3.on("mouseenter","#volleyshotId",function(){var e="20".fontcolor("#ff0000"),a=Qt(ne()/12,.6,"Volley Shot",0,"bow"),n=Rt(ne()/7,.8,"fire","elemental"),t=0;!0===NC&&(t=1);for(var i=0;i<=4;i++)!0===Wy[i].snareStatus&&(t+=1);var o=1;Yy.talent10>=20&&(o=1.5);var r=(dS.round((5+t)*o)+"").fontcolor("#00ff00"),l=(dS.round((7+t)*o)+"").fontcolor("#00ff00"),s=(dS.round((9+t)*o)+"").fontcolor("#00ff00"),d=(dS.round((12+t)*o)+"").fontcolor("#00ff00"),c=(dS.round((15+t)*o)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Volley Shot";var m="Cooldown: "+e+" Seconds<br><br>Volley Shot hits random targets for "+a[0]+" to "+a[1]+" physical bow damage. More arrows are fired as the number of targets increases.<br><br>1 target: "+r+" shots<br>2 target: "+l+" shots<br>3 target: "+s+" shots<br>4 target: "+d+" shots<br>5 target: "+c+" shots<br><br>";Yy.talent8>=20&&(m+="Your arrows have a "+Q("30%")+" chance to inflict "+n[0]+" to "+n[1]+" fire damage.<br><br>"),m+="If no bow is equipped, magic arrows are fired instead.",NG.tooltipmsg.innerHTML=m})}),e(function(){$NG.window3.on("mouseenter","#lighthealingId",function(){var e="16".fontcolor("#ff0000"),a=ts(1.4*Qe(),.9);NG.tooltipname.innerHTML="Light Healing",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.lightHealing)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Light Healing heals for "+a[0]+" to "+a[1]+" hit points."})}),zy.lightHealingFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),Lu("teal"),qi("lighthealingId",!0),Ei("lighthealingId","-800% -100%"),cS.delayedCall(16,Js),jy(mS.getElementById("lighthealingId"),16,"lighthealingId");var e=yc(1.4*Qe(),.9);zy.popupHeal(e),zy.drawMyMp(-oH)}},e(function(){$NG.window3.on("mouseenter","#wardersrift",function(){var e="45".fontcolor("#ff0000");NG.tooltipname.innerHTML="Warder's Rift",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.wardersRift)+" Mana Points<br>Cast Time: Instant<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Warder's Rift envelopes your target inside an umbral barrier. All damage between you and the target is reduced by "+Q(P(nd())+"%")+" for "+Q("35")+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#igniteId",function(){var e="10".fontcolor("#ff0000"),a=Rt(2.7*Re(),.85,"fire","Ignite");NG.tooltipname.innerHTML="Ignite",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.ignite)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Ignite hits your target for "+a[0]+" to "+a[1]+" fire damage."})}),zy.igniteFinish=function(){if(!1!==Lb()){Qa("spellDoneFlames"),qi("igniteId",!0),Ei("igniteId","-1000% -100%"),cS.delayedCall(10,od),jy(mS.getElementById("igniteId"),10,"igniteId"),zy.drawMyMp(-oH);var e=yc(2.7*Re(),.85);"High"===kw.videoSetting&&Gm(bL),zy.myMagicDamage("fire",e,bL,ee(),"Ignite")}},e(function(){$NG.window3.on("mouseenter","#faerieflameId",function(){var e=Ft(1+.28*Fe(),.9,"magic","Faerie Flame"),a="15%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Faerie Flame",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.faerieFlame)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Conjuration<br><br>Faerie Flame ticks for "+e[0]+" to "+e[1]+" arcane damage every second for 21 seconds.<br><br>Effect: Increases all damage inflicted by "+a+"."})}),zy.faerieFlameFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal");var e=bL;Ru(e,"blue",125,50,35,250,pS.Qout,15,5,-150,1.2),zy.drawMyMp(-oH),rH=dS.ceil(1+.28*Fe());fa(Wy[bL].name+"'s outline is illuminated by faerie flames.",3),Wy[e].faerieFlameTickCount=1,Wy[e].faerieFlameTick=rH,Wy[e].faerieFlameTickInterval.kill(),Wy[e].faerieFlameTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){""===Wy[a].name&&(Wy[a].faerieFlameTickInterval.kill(),Wy[a].faerieFlameTickCount=0),zy.myDotDamage(Wy[a].faerieFlameTick,a,e,"Faerie Flame"),Wy[a].faerieFlameTickCount+=1,22===Wy[a].faerieFlameTickCount&&(Wy[a].faerieFlameTickInterval.kill(),Wy[a].faerieFlameTickCount=0)}("magic",e)}});Li("Faerie Flame",e,"faerieFlameIcon",21e3,-288),1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#snareId",function(){var e="5".fontcolor("#ff0000"),a="7%".fontcolor("#00ff00"),n="33%".fontcolor("#00ff00"),t="5%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Snare",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.snare)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Snare reduces your target's mobility and attack speed by "+n+".<br><br>Effects:<br>Increases the numbers of arrows fired by Volley Shot by 1.<br>Increases parry's chance to amplify your next Trueshot Arrow by "+a+".<br>Increases received physical damage's chance to activate Counter Shot by "+t+"."})}),zy.snareFinish=function(){if(!1!==Lb()){1===Wy[bL].attackStatus&&hi(!0),Qa("spellDoneHeal"),qi("snareId",!0),Ei("snareId","-1100% -100%"),cS.delayedCall(5,cd),jy(mS.getElementById("snareId"),5,"snareId"),zy.drawMyMp(-oH);var e=bL;ud(e),Li("Snare",e,"snareIcon",0,-352)}},e(function(){$NG.window3.on("mouseenter","#shieldofbramblesId",function(){"1.5".fontcolor("#00ff00");var e="15".fontcolor("#00ff00"),a=(dS.ceil(.04*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Shield of Brambles",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.shieldOfBrambles)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Abjuration<br><br>Shield of Brambles reflects "+a+" damage when hit by physical attacks for "+e+" minutes."})}),zy.shieldOfBramblesFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("yellow","easeInBack",25,11,120,3.5),zy.drawMyMp(-oH),fa("You are covered in a veil of thorns.",3),zC=!0,WC.kill(),WC=cS.delayedCall(420,hd);var e="damageShieldIcon";sD.kill(),sD=cS.delayedCall(900,function(){wi(e)}),Bi("Shield of Brambles",e,9e5,-512)}},e(function(){$NG.window3.on("mouseenter","#weaponshieldId",function(){var e="40".fontcolor("#ff0000"),a="10".fontcolor("#00ff00");NG.tooltipname.innerHTML="Weapon Shield",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Weapon Shield ripostes all physical attacks for "+a+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#thistlecoatId",function(){var e="40".fontcolor("#00ff00"),a=(dS.ceil(.47*Ne())+"").fontcolor("#00ff00"),n=(dS.ceil(.0125*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Thistlecoat",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.thistlecoat)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Abjuration<br><br>Thistlecoat buffs your armor by "+a+" and reflects "+n+" damage when hit by physical attacks for "+e+" minutes."})}),zy.thistlecoatFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("green","easeInBack",5,25,120,4),zy.drawMyMp(-oH),fa("Your skin is strengthened by a veil of barbs.",3),!0===KC&&(nk-=thistlecoatArmorBoost),OC.kill(),OC=cS.delayedCall(2400,yd),thistlecoatArmorBoost=dS.ceil(.47*Ne()),nk+=thistlecoatArmorBoost,KC=!0,ny();SD.kill(),SD=cS.delayedCall(2400,function(){wi("thistlecoatIcon")}),Bi("Thistlecoat","thistlecoatIcon",24e5,-448)}},e(function(){$NG.window3.on("mouseenter","#feetlikecatId",function(){var e="36".fontcolor("#00ff00"),a=(dS.ceil(.22*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Feet Like Cat",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.feetLikeCat)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Abjuration<br><br>Feet Like Cat buffs your agility by "+a+" for "+e+" minutes."})}),zy.feetLikeCatFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("yellow","easeInBack",5,25,0,3),zy.drawMyMp(-oH),fa("You feel more agile.",3),!0===VC&&(Uy-=_C),XC.kill(),XC=cS.delayedCall(2160,Sd),_C=dS.ceil(.22*Ne()),Uy+=_C,VC=!0,ny();kD.kill(),kD=cS.delayedCall(2160,function(){wi("feetLikeCatIcon")}),Bi("Feet Like Cat","feetLikeCatIcon",216e4,-480)}},e(function(){$NG.window3.on("mouseenter","#rangersowId",function(){var e="30".fontcolor("#00ff00"),a="7%".fontcolor("#00ff00"),n="5%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Spirit of the Wolf",NG.tooltipmsg.innerHTML="Cost: "+Q(BH.cost.spiritOfTheWolf)+" Mana Points<br>Cast Time: "+ld(3500)+" Seconds<br>Spell Type: Alteration<br><br>Spirit of the Wolf buffs your attack power by "+a+" and your mobility for "+e+" minutes.<br><br>Effects:<br>Increases the numbers of arrows fired by Volley Shot by 1.<br>Increases parry's chance to amplify your next Trueshot Arrow by "+a+".<br>Increases received physical damage's chance to activate Counter Shot by "+n+"."})}),zy.spiritOfTheWolfFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("teal","easeInSine",5,15,100,3),zy.drawMyMp(-oH),fa("You are surrounded by a brief lupine aura.",3),$C.kill(),$C=cS.delayedCall(1800,wd),NC=!0,ny();var e="spiritOfTheWolfIcon";tD.kill(),tD=cS.delayedCall(1800,function(){wi(e)}),Bi("Spirit of the Wolf",e,18e5,-544)}},e(function(){$NG.window3.on("mouseenter","#shdslamId",function(){var e="15".fontcolor("#ff0000"),a="2.5".fontcolor("#00ff00"),n=Qt(ne()/4*(1+bS.eq[13].armor/80),.7,"Slam");NG.tooltipname.innerHTML="Slam",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Slam inflicts "+n[0]+" to "+n[1]+" physical damage on your target. Your shield's armor value increases the damage.<br><br>Effect: Stuns your target for "+a+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#crescentcleaveId",function(){"8".fontcolor("#ff0000");var e=Qt(ne()/16,.5,"Crescent Cleave");NG.tooltipname.innerHTML="Crescent Cleave",NG.tooltipmsg.innerHTML="Crescent Cleave hits your target and adjacent targets for "+e[0]+" to "+e[1]+" physical damage."})}),e(function(){$NG.window3.on("mouseenter","#deathstrikeId",function(){var e="12".fontcolor("#ff0000"),a=Qt(ne()/3.3,.7,"Death Strike");NG.tooltipname.innerHTML="Death Strike",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Death Strike hits for "+a[0]+" to "+a[1]+" physical damage.<br><br>Effect: Absorbs health based on damage inflicted."})}),e(function(){$NG.window3.on("mouseenter","#gaspingfrenzyId",function(){var e=Qt((1+ne()/4500)*(10*bS.eq[12].damage),.5,"Gasping Frenzy"),a=Qt((1+ne()/4500)*(10*bS.eq[12].damage),.2,"Gasping Frenzy");NG.tooltipname.innerHTML="Gasping Frenzy";var n="Cooldown: "+Q("20")+" Seconds<br><br>";"cleaved"===bS.eq[12].type||"smashed"===bS.eq[12].type||"staff"===bS.eq[12].type?n+="Gasping Frenzy hits for "+e[0]+" to "+e[1]+" physical damage. The number of attacks varies based on your health value.<br><br>":n+="Gasping Frenzy hits for "+a[0]+" to "+a[1]+" physical damage. The number of attacks varies based on your health value.<br><br>",n+="Below 100% health: "+Q("3")+" attacks<br>Below 80% health: "+Q("5")+" attacks<br>Below 60% health: "+Q("8")+" attacks<br>Below 40% health: "+Q("12")+" attacks<br>Below 20% health: "+Q("18")+" attacks<br><br>Effect: Absorbs mana based on damage inflicted.",NG.tooltipmsg.innerHTML=n})}),e(function(){$NG.window3.on("mouseenter","#harmtouchId",function(){var e=120,a=Qt(40+2.25*ne(),.9,"Harm Touch"),n="your target";Yy.talent7>=20&&(e-=40,n="three targets"),sS.Augur>=6&&(e-=40),NG.tooltipname.innerHTML="Harm Touch",NG.tooltipmsg.innerHTML="Cooldown: "+Q(e+" Seconds")+"<br><br>Harm Touch hits "+n+" for "+a[0]+" to "+a[1]+" physical damage."})}),e(function(){$NG.window3.on("mouseenter","#summondeadId",function(){NG.tooltipname.innerHTML="Summon Dead",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.summonDead)+" Mana Points<br>Cast Time: "+ld(6e3)+" Seconds<br>Spell Type: Conjuration<br><br>Summon Dead conjures a skeleton warrior to fight by your side."})}),zy.summonDeadFinish=function(){if(!1!==Lb()){Qa("spellCastAbjure"),sH=1,Qa("skeleton_att"),zy.drawMyMp(-oH),fa(Yy.name+" animates an undead servant.",3),RD=1+~~(Yy.level/2.2),lL=160+dS.ceil(RD/3),sL=2.096*lL,QD=PD="a dark skeleton",FD=dS.ceil(50+50*RD),Yy.talent9>=20&&(FD*=2),ND=FD,bb(),jD=dS.ceil(2*RD),zD=dS.ceil(3*RD),YD=100,KD=100,WD=100,OD=100,XD=100,_D="kick",$D="kick",UD="kick",JD="kick",ZD=10,zy.petAlive=!0,VD=3e3,GD=1,zy.checkShadowKnightSkills(),e("#pethpbardiv").css("display","block"),Ei("summondeadId","-1600% -100%"),zy.drawMyHp(),$NG.petImage.attr("src","/classic/images1/a dark skeleton.png").width(lL+"px"),$NG.mob5.stop(!0,!0).height(sL).width(lL+"px").css({left:a,bottom:60,opacity:1,display:"block"});var a=190+(290-lL)/2,n=e("#petName").width(),t=lL/2-n/2;e("#petName").css("left",t)}},e(function(){$NG.window3.on("mouseenter","#shdlifetapId",function(){var e=Q("40");Yy.talent6>=20&&(e=Q("30"));var a=Rt(2*Re(),.9,"magic","Life Tap");NG.tooltipname.innerHTML="Life Tap",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.lifeTap)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Life Tap hits your target for "+a[0]+" to "+a[1]+" arcane damage and you absorb it as health."})}),zy.shdLifeTapFinish=function(){if(!1!==Lb()){Qa("spellCastAbjure"),zy.drawMyMp(-oH),qi("shdlifetapId",!0),Ei("shdlifetapId","-800% -100%");var e=4e4;Yy.talent6>=20&&(e=3e4),cS.delayedCall(e/1e3,jd),jy(mS.getElementById("shdlifetapId"),e/1e3,"shdlifetapId"),rH=yc(2*Re(),.9);fa(Yy.name+' says, "Ah, I feel much better now."'),"High"===kw.videoSetting&&Yd(bL);var a=zy.myMagicDamage("magic",rH,bL,!1,"Life Tap");zy.popupHeal(a,!0)}},e(function(){$NG.window3.on("mouseenter","#doomingdarknessId",function(){var e="your target",a=Ft(1+.29*Fe(),.9,"magic","Dooming Darkness");"15%".fontcolor("#00ff00");Yy.talent8>=20&&(e="all targets"),NG.tooltipname.innerHTML="Dooming Darkness",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.doomingDarkness)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Conjuration<br><br>Dooming Darkness ticks for "+a[0]+" to "+a[1]+" arcane damage on "+e+" every second for 15 seconds.<br><br>Effect: Reduces run speed of "+e+"."})}),zy.doomingDarknessFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),zy.drawMyMp(-oH);for(var e=0;e<=4;e++)(e===bL||Yy.talent8>=20)&&Wy[e].name&&(rH=yc(1+.29*Fe(),.9),fa(Wy[e].name+" is engulfed in darkness.",3),Wy[e].doomingDarknessTickCount=1,Wy[e].doomingDarknessTick=rH,function(e){Wy[e].doomingDarknessInterval.kill(),Wy[e].doomingDarknessInterval=cS.to("",1,{repeat:-1,onRepeat:function(){Wd("magic",e)}}),Li("Dooming Darkness",e,"doomingDarknessIcon",15e3,-288)}(e),Ru(e,"magenta",150,50,15,100,pS.Qout,25,5,-50,.5));1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#heatbloodId",function(){var e=Ft(.36*Qe(),.9,"fire","Heat Blood");NG.tooltipname.innerHTML="Heat Blood",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.heatBlood)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Alteration<br><br>Heat Blood ticks for "+e[0]+" to "+e[1]+" fire damage every second for 21 seconds."})}),zy.heatBloodFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),zy.drawMyMp(-oH),rH=yc(.36*Qe(),.9);zy.drawMyHp(),zy.drawMyMp(),fa(Wy[bL].name+"'s blood simmers.",3);var e=bL;Wy[e].heatBloodTickCount=0,Wy[e].heatBloodTick=rH,Wy[e].heatBloodInterval.kill(),Wy[e].heatBloodInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[a].name)return Wy[a].heatBloodInterval.kill(),void(Wy[a].heatBloodTickCount=0);zy.myDotDamage(Wy[a].heatBloodTick,a,e,"Heat Blood"),Wy[a].heatBloodTickCount+=1,21===Wy[a].heatBloodTickCount&&(Wy[a].heatBloodInterval.kill(),Wy[a].heatBloodTickCount=0)}("fire",e)}});Li("Heat Blood",e,"heatBloodIcon",21e3,-320),Ru(e,"red",200,60,10,250,pS.cin,15,9,-100,.5),1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#strengthendeadId",function(){var e="90".fontcolor("#ff0000");Yy.talent11>=20&&(e=Q("45"));var a="30".fontcolor("#00ff00"),n=ts(2*Qe(),.9);NG.tooltipname.innerHTML="Strengthen Dead",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Command your pet to enrage in a vicious frenzy for "+a+" seconds. Your pet recovers "+n[0]+" to "+n[1]+" health."})}),e(function(){$NG.window3.on("mouseenter","#shdfearId",function(){var e="45".fontcolor("#ff0000");(dS.ceil(1.4*Qe())+"").fontcolor("#00ff00"),(dS.ceil(1.4*Qe()+(le()-60+Yy.level/50)/3)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Fear",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.fear)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Fear your target for a random duration. Feared targets cower before you and will not attack."})}),zy.shdFearFinish=function(){if(!1!==Lb()){Qa("spellCastEvoke2"),zy.drawMyMp(-oH),qi("shdfearId",!0),Ei("shdfearId","-1200% -100%"),cS.delayedCall(45,Jd),jy(mS.getElementById("shdfearId"),45,"shdfearId");var e=bL,a=(4e4*dS.random()+5e3)*nc(e);Wy[e].level>Yy.level&&(a-=dS.pow(Wy[e].level-Yy.level,1.25)),a<1e4&&(a=1e4),a>25e3&&(a=25e3),tc(e,a,-384)}},e(function(){$NG.window3.on("mouseenter","#siphonstrengthId",function(){var e="5".fontcolor("#00ff00"),a=(dS.ceil(.18*Qe())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Siphon Strength",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.siphonStrength)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Alteration<br><br>Reduce your target's strength by "+Q("12%")+" and buff your own strength by "+a+" for "+e+" minutes."})}),zy.siphonStrengthFinish=function(){if(!1!==Lb()){1===Wy[bL].attackStatus&&hi(!0),Qa("spellDoneHeal"),zy.drawMyMp(-oH),fa(Wy[bL].name+" weakens.",3),!0===pM&&(Oy-=gM),hM.kill(),hM=cS.delayedCall(300,oc),gM=dS.ceil(.18*Qe()),Oy+=gM,pM=!0;var e=bL;Wy[e].siphonStrength=12,ny();Li("Siphon Strength",e,a="siphonStrengthIcon",n=3e5,t=-416);var a="siphonStrengthSelfIcon",n=3e5,t=-416;bD.kill(),bD=cS.delayedCall(n/1e3,function(){wi(a)}),Bi("Siphon Strength",a,n,t),"High"===kw.videoSetting&&function(e){function a(e){var i=320*dS.random()+320*dS.random()+320*dS.random()+320*dS.random(),o=(dS.random(),sy("orangeparticle50",5,n,t,6,6));o.image.onload=function(){cS.to(o,1*dS.random()+.25,{scaleX:1,scaleY:1,x:i-13,y:720,ease:pS.Qin,onComplete:function(){oy(5,o)}})},e<40&&a(++e)}var n=Gw[e].offsetLeft+Wy[e].cX-3,t=Gw[e].offsetTop+Wy[e].cY-3;mv("#f80",.3,1),a(0)}(e)}},e(function(){$NG.window3.on("mouseenter","#shdfeigndeathId",function(){var e="25".fontcolor("#ff0000");NG.tooltipname.innerHTML="Feign Death",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.feignDeath)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Abjuration<br>Cooldown: "+e+" Seconds<br><br>Surrounded yourself in the stench of death. All foes may believe you have died and leave the battle. When used outside of combat, mobs cannot ambush you."})}),zy.shdFeignDeathFinish=function(){if(!1!==Lb()){if(Qa("spellDoneSlam"),zy.drawMyMp(-oH),cS.delayedCall(25,lc),qi("shdfeigndeathId",!0),Ei("shdfeigndeathId","-1400% -100%"),jy(mS.getElementById("shdfeigndeathId"),25,"shdfeigndeathId"),!0===ya()){if(dS.random()>.65)return fa("You fall to the ground. Convinced of your death, the enemy leaves the battle.",3),void tt();fa("You fall to the ground, but nobody is fooled this time.",3)}else{if(fa("You feign your death."),0===tC)return;Ei("shdfeigndeathId","-1300% -100%"),fa("You feign your death."),tC=0}var e="death_mb";"Female"===Yy.gender&&(e="death_fl"),Qa(e)}},e(function(){$NG.window3.on("mouseenter","#shadowvortexId",function(){var e="3".fontcolor("#00ff00"),a="10%".fontcolor("#00ff00"),n="10%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Shadow Vortex",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.shadowVortex)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br><br>Your target takes "+n+" more physical damage and all physical damage taken is reduced by "+a+" for "+e+" minutes."})}),zy.shadowVortexFinish=function(){if(!1!==Lb()){1===Wy[bL].attackStatus&&hi(!0),Qa("spellDoneHeal"),zy.drawMyMp(-oH),fa(Wy[bL].name+" is surrounded by a vortex of shadows.",3),bM.kill(),bM=cS.delayedCall(180,cc),vM=10,yM=!0;var e=bL;Wy[e].shadowVortex=vM,ny();Li("Shadow Vortex",e,a="shadowVortexIcon",18e4,-480);var a="shadowVortexSelfIcon";vD.kill(),vD=cS.delayedCall(180,function(){wi(a)}),Bi("Shadow Vortex",a,18e4,-480),"High"===kw.videoSetting&&function(e){function a(e){var i=320*dS.random()+320*dS.random()+320*dS.random()+320*dS.random(),o=(dS.random(),sy("purpleparticle50",5,n,t,6,6));o.image.onload=function(){cS.to(o,1*dS.random()+.25,{x:i-13,y:720,ease:pS.Qin,scaleX:1,scaleY:1,onComplete:function(){oy(5,o)}})},e<50&&a(++e)}var n=Gw[e].offsetLeft+Wy[e].cX-3,t=Gw[e].offsetTop+Wy[e].cY-3;mv("#800",.4,1.2),a(0)}(e)}},e(function(){$NG.window3.on("mouseenter","#vampiricembraceId",function(){var e="30".fontcolor("#00ff00");NG.tooltipname.innerHTML="Vampiric Embrace",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.vampiricEmbrace)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Alteration<br><br>Vampiric Embrace gives physical and arcane damage a chance to drain health based on damage inflicted for "+e+" minutes."})}),zy.vampiricEmbraceFinish=function(){if(!1!==Lb()){Qa("spellDoneHarm"),zy.drawMyMp(-oH),fa("Your hand begins to glow.",3),SM.kill(),SM=cS.delayedCall(1800,uc),kM=!0;var e="vampiricEmbraceIcon";yD.kill(),yD=cS.delayedCall(1800,function(){wi(e)}),Bi("Vampiric Embrace",e,18e5,-544),Au("green","easeInBack",5,15,120,3)}},e(function(){$NG.window3.on("mouseenter","#resistcoldId",function(){var e="36".fontcolor("#00ff00"),a=(dS.ceil(.4*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Resist Cold",NG.tooltipmsg.innerHTML="Cost: "+Q(TH.cost.resistCold)+" Mana Points<br>Cast Time: "+ld(4500)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your cold resistance by "+a+" for "+e+" minutes."})}),zy.resistColdFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You feel resistant to cold.",3),!0===IM&&(lk-=wM),CM.kill(),CM=cS.delayedCall(2160,hc),wM=dS.ceil(.4*Ne()),lk+=wM,IM=!0,ny();dD.kill(),dD=cS.delayedCall(2160,function(){wi("resistIcon")}),Bi("Resist Cold","resistIcon",216e4,-64,-32),Au("teal","easeInBack",5,19,0,3.5)}},e(function(){$NG.window3.on("mouseenter","#chantofbattle",function(){var e="3".fontcolor("#00ff00");!0===PM&&(e="6".fontcolor("#00ff00"));var a=Qe(),n=(dS.ceil(.06*a)+"").fontcolor("#00ff00"),t=(dS.ceil(.1*a)+"").fontcolor("#00ff00"),i=(dS.ceil(.1*a)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Chant of Battle";var o="Spell Type: Singing<br><br>Chant of Battle buffs your armor by "+n+", your strength by "+t+", and your dexterity by "+i+" for "+e+" verses every 6 seconds.";if(Yy.talent1>0){o+="<BR><BR>All physical damage is enhanced "+Q((3.5*$e()).toFixed(1)+"%")+"."}if(Yy.talent1>=20){o+="<BR><BR>While Chant of Battle is active, it enchants your weapons with "+Q(~~(ne()/20))+" arcane damage."}NG.tooltipmsg.innerHTML=o})}),e(function(){$NG.window3.on("mouseenter","#chordsofdissonance",function(){var e=6;!0===PM&&(e+=3),Yy.talent5>=20&&(e*=2);var a=Rt(.54*Ne()+5,.8,"magic","Chords of Dissonance");NG.tooltipname.innerHTML="Chords of Dissonance",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.chordsOfDissonance)+" Mana Points<br>Spell Type: String<br><br>Chords of Dissonance ticks on all targets for "+a[0]+" to "+a[1]+" arcane damage for "+Q(e)+" verses every 3 seconds."})}),e(function(){$NG.window3.on("mouseenter","#accelerando",function(){var e="6".fontcolor("#00ff00");NG.tooltipname.innerHTML="Accelerando",NG.tooltipmsg.innerHTML="Spell Type: Percussion<br><br>Accelerando extends the number of verses in your songs for "+e+" verses over 36 seconds."})}),e(function(){$NG.window3.on("mouseenter","#hymnofrestoration",function(){var e="3".fontcolor("#00ff00");if(!0===PM&&(e="6".fontcolor("#00ff00")),Yy.talent2>0)var a=(1.55*Ue()).toFixed(1);var n=ts(1+dS.ceil(.35*Ne()*(1+1.35*Ue()/100)),1);NG.tooltipname.innerHTML="Hymn of Restoration";var t="Cost: "+Q(DH.cost.hymnOfRestoration)+" Mana Points<br>Spell Type: String<br><br>Hymn of Restoration restores "+n[1]+" hit points for "+e+" verses every 6 seconds.";Yy.talent2>0&&(t+="<BR><BR>Maximum health is increased "+Q(a+"%")+" while the hymn is active."),NG.tooltipmsg.innerHTML=t})}),e(function(){$NG.window3.on("mouseenter","#anthemdearms",function(){var e="3".fontcolor("#00ff00");!0===PM&&(e="6".fontcolor("#00ff00"));var n=(dS.ceil(.11*je())+"").fontcolor("#00ff00"),t=(a.abs(dS.ceil(-.85*je()-11.5*Je())/10).toFixed(1)+"%").fontcolor("#00ff00");NG.tooltipname.innerHTML="Anthem De Arms";var i="Spell Type: Brass<br><br>Anthem De Arms creates an aura that buffs your strength by "+n+" and your haste by "+t+" for "+e+" verses every 6 seconds. This aura's haste effect also affects any charmed allies.";if(Yy.talent3>0){i+="<BR><BR>Anthem De Arms buffs your attack power by "+Q((1.68*Je()).toFixed(1)+"%")+" while active."}NG.tooltipmsg.innerHTML=i})}),e(function(){$NG.window3.on("mouseenter","#boastfulbellow",function(){var e="3".fontcolor("00ff00");!0===PM&&(e="4".fontcolor("00ff00"));var a=Rt(1.6*Re(),.8,"magic","Boastful Bellow");NG.tooltipname.innerHTML="Boastful Bellow",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.boastfulBellow)+" Mana Points<br>Spell Type: Percussion<br><br>Boastful Bellow strikes your target for "+a[0]+" to "+a[1]+" arcane damage for "+e+" verses every 6 seconds.<br><br>Effect: Your target's spell is interrupted."})}),e(function(){$NG.window3.on("mouseenter","#elementalrhythms",function(){var e="4".fontcolor("#00ff00");!0===PM&&(e="5".fontcolor("#00ff00"));var a=(dS.ceil(.18*Re()+2.3*aa())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Elemental Rhythms",NG.tooltipmsg.innerHTML="Spell Type: Percussion<br><br>Elemental Rhythms buffs magic, lightning, cold, and fire resistance by "+a+" for "+e+" verses every 6 seconds."})}),e(function(){$NG.window3.on("mouseenter","#lucidlullaby",function(){NG.tooltipname.innerHTML="Lucid Lullaby",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.lucidLullaby)+" Mana Points<br>Spell Type: Wind<br><br>Lucid Lullaby puts all targets to sleep. Singing Lucid Lullaby automatically causes area effect damage songs to stop."})}),e(function(){$NG.window3.on("mouseenter","#consonantchain",function(){var e=((9e3+140*de())/1e3).toFixed();e=(e+"").fontcolor("#00ff00");var a=(dS.ceil(3*Qe()*(1+1.2*ra()/100))/1e3).toFixed(2);NG.tooltipname.innerHTML="Consonant Chain",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.consonantChain)+" Mana Points<br>Spell Type: Singing<br><br>Consonant Chain slows your target's attacks by "+Q(a)+" seconds for "+e+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#dissension",function(){var e=ts(5+dS.ceil(.9*je()),.9);NG.tooltipname.innerHTML="Dissension",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.dissension)+" Mana Points<br>Spell Type: Brass<br><br>Dissension mana drains all targets and converts it to health. You recover "+e[0]+" to "+e[1]+" hit points from each target."})}),e(function(){$NG.window3.on("mouseenter","#chorusofclarity",function(){var e="3".fontcolor("#00ff00");!0===PM&&(e="6".fontcolor("#00ff00"));(dS.ceil(.1*Qe())+"").fontcolor("#00ff00"),(dS.ceil(.15*Qe())+"").fontcolor("#00ff00"),(dS.ceil(.15*Qe())+"").fontcolor("#00ff00");var a=dS.round(Qe()/35*(1+5.3*na()/100));NG.tooltipname.innerHTML="Chorus of Clarity",NG.tooltipmsg.innerHTML="Spell Type: Singing<br><br>Chorus of Clarity increases your natural mana regeneration rate by "+Q(a)+" for "+e+" verses every 6 seconds."})}),e(function(){$NG.window3.on("mouseenter","#euphonichymn",function(){var e=(6*Qe()/30.3).toFixed(1);e=(e+"%").fontcolor("#00ff00");var a=4.75*Ze()+40,n=((9e3+400*de())/1e3).toFixed();n=(n+"").fontcolor("#00ff00"),NG.tooltipname.innerHTML="Euphonic Hymn",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.euphonicHymn)+" Mana Points<br>Spell Type: Singing<br><br>Euphonic Hymn enhances all physical damage on all targets by "+Q(a+"%")+" for "+n+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#shieldofsongs",function(){var e=dS.ceil(.8*je()*(1+3.15*la()/100));NG.tooltipname.innerHTML="Shield of Songs",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.shieldOfSongs)+" Mana Points<br>Spell Type: Brass<br><br>Shield of Songs protects you with a magical barrier that absorbs "+Q(e)+" health."})}),e(function(){$NG.window3.on("mouseenter","#desperatedirge",function(){var e="6".fontcolor("#00ff00");!0===PM&&(e="9".fontcolor("#00ff00"));var a=Rt(2.5*Ne(),.85,"magic","Desperate Dirge");NG.tooltipname.innerHTML="Desperate Dirge",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.desperateDirge)+" Mana Points<br>Spell Type: String<br><br>Desperate Dirge ticks on all targets for "+a[0]+" to "+a[1]+" arcane damage for "+e+" verses every 3 seconds."})}),e(function(){$NG.window3.on("mouseenter","#songofthesirens",function(){"3".fontcolor("#00ff00");!0===PM&&"6".fontcolor("#00ff00"),NG.tooltipname.innerHTML="Song of the Sirens",NG.tooltipmsg.innerHTML="Cost: "+Q(DH.cost.songOfTheSirens)+" Mana Points<br>Spell Type: Wind<br><br>Solon's Song of the Sirens charms your target. Charmed mobs can be released by clicking the mob's charm icon."})}),e(function(){$NG.window3.on("mouseenter","#smite",function(){var e=Rt(3+2.5*Re(),.8,"magic","Smite");NG.tooltipname.innerHTML="Smite",NG.tooltipmsg.innerHTML="Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Evocation<br><br>Smite hits your target for "+e[0]+" to "+e[1]+" arcane damage."})}),zy.smiteFinish=function(){if(!1!==Lb()){Qa("spellDoneFlames"),Yc(bL);var e=yc(3+2.5*Re(),.8);zy.myMagicDamage("magic",e,bL,ee(),"Smite")}},e(function(){$NG.window3.on("mouseenter","#soundofforce",function(){var e="18".fontcolor("#ff0000"),a=Rt(1.8*Re(),.9,"magic","Sound of Force"),n="5.5".fontcolor("#00ff00");NG.tooltipname.innerHTML="Sound of Force";var t="Cost: "+Q(HH.cost.soundOfForce)+" Mana Points<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Sound of Force hits your target for "+a[0]+" to "+a[1]+" arcane damage<br><br>Effect: Stuns your target for "+n+" seconds.";NG.tooltipmsg.innerHTML=t})}),e(function(){$NG.window3.on("mouseenter","#superiorhealing",function(){var e,a="7".fontcolor("#ff0000"),n=ts(2*Qe(),.9),t=(dS.ceil(1.6*Qe()+(le()-60)*(Yy.level/50))+"").fontcolor("#00ff00"),i=(dS.ceil(1.6*Qe()+(le()-60)*(Yy.level/50)+(3+Pp()/4.4))+"").fontcolor("#00ff00");e=Yy.level>=28?"Mark of Judgement":"(Level 28) Mark of Judgement",NG.tooltipname.innerHTML="Superior Healing",NG.tooltipmsg.innerHTML="Cost: "+Q(HH.cost.superiorHealing)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+a+" Seconds<br><br>Superior Healing heals for "+n[0]+" to "+n[1]+" hit points.<br><br>If "+e+" is active, Superior Healing inflicts "+t+" to "+i+" arcane damage on all targets."})}),zy.superiorHealingFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),Lu("blue"),qi("superiorhealing",!0),Ei("superiorhealing","-500% -100%"),cS.delayedCall(7,Vc),jy(mS.getElementById("superiorhealing"),7,"superiorhealing"),zy.drawMyMp(-oH);var e=yc(2*Qe(),.9);if(zy.popupHeal(e),!0===GT||Yy.talent12>=20)for(var a=0;a<=4;a++)if(""!==Wy[a].name){var n=dS.ceil((le()-60)*(Re()/5/50)+1.6*Qe()+dS.random()*(3+Pp()/4.4));zy.myMagicDamage("magic",n,a,ee(),"Superior Healing")}}},e(function(){$NG.window3.on("mouseenter","#resolution",function(){var e="54".fontcolor("#00ff00"),a=(dS.ceil(.66*Ne())+"").fontcolor("#00ff00"),n=(dS.ceil(1.02*Ne()*(12.5*Ue()/100+1))+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Resolution";var t="Cost: "+Q(HH.cost.resolution)+" Mana Points<br>Cast Time: "+ld(4e3)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your hit points by "+n+" and your armor by "+a+" for "+e+" minutes.";if(Yy.talent2>0){t+="<BR><BR>Casting haste is increased by "+Q((1.4*Ue()).toFixed(1)+"%")+"."}NG.tooltipmsg.innerHTML=t})}),zy.resolutionFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You feel resolute.",3),!0===gT&&(nk-=pT,Zy-=bT),vT.kill(),vT=cS.delayedCall(3240,Uc),pT=dS.ceil(.66*Ne()),bT=dS.ceil(1.02*Ne()*(12.5*Ue()/100+1)),Zy+=bT,nk+=pT,gT=!0,ny(),zy.drawMyHp();UB.kill(),UB=cS.delayedCall(3240,function(){wi("hpbuffIcon")}),Bi("Resolution","hpbuffIcon",324e4,-448),Au("orange","easeInBack",5,25,120,4)}},e(function(){$NG.window3.on("mouseenter","#bindingearth",function(){var e="8".fontcolor("#ff0000");NG.tooltipname.innerHTML="Binding Earth";var a="Cost: "+Q(HH.cost.bindingEarth)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Roots your target in place. Rooted targets cannot melee you.";if(Yy.talent3>0){var n=Rt(Qe()*(1.85*Je()/100),.9,"magic","elemental");a+="<BR><BR>Binding Earth inflicts "+n[0]+" to "+n[1]+" per second while active."}NG.tooltipmsg.innerHTML=a})}),zy.bindingEarthFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),qi("bindingearth",!0),Ei("bindingearth","-600% -100%"),cS.delayedCall(8,Zc),jy(mS.getElementById("bindingearth"),8,"bindingearth"),zy.drawMyMp(-oH);a=bL;if(!0!==Gb(a))if(!0!==ac(a)){fa(Wy[bL].name+" is rooted.",3);var a;Cg(a=bL),Wy[a].rootStatus=5,e("#rootIcon"+a+",#rootBuffIcon"+a).remove(),kv(a,!0);Li("Binding Earth",a,"rootBuffIcon",0,-192),0===zy.autoAttackStatus&&Si()}else fa(Wy[bL].name+" resisted Binding Earth.",1);else fa(Wy[bL].name+" is immune to Binding Earth.",1)}},e(function(){$NG.window3.on("mouseenter","#expelcorruption",function(){var e="8".fontcolor("#ff0000"),a=Rt(3.7*Re(),.85,"magic","Expel Corruption"),n="your target";Yy.talent9>=20&&(n="three targets"),NG.tooltipname.innerHTML="Expel Corruption",NG.tooltipmsg.innerHTML="Cost: "+Q(HH.cost.expelCorruption)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Expel Corruption hits "+n+" for "+a[0]+" to "+a[1]+" arcane damage. Undead targets take an additional "+Q("50%")+" damage."})}),zy.expelCorruptionFinish=function(e){if(e||!1!==Lb()){Qa("spellDoneFlames"),e||(qi("expelcorruption",!0),Ei("expelcorruption","-700% -100%"),cS.delayedCall(8,nm),jy(mS.getElementById("expelcorruption"),8,"expelcorruption"),zy.drawMyMp(-oH));var a=bL;if(Yy.talent9>=20){for(var n=0;n<=4;n++)if(Wy[n].name&&n>=a-1&&n<=a+1){"High"===kw.videoSetting&&im(n);t=yc(3.7*Re(),.85);zy.myMagicDamage("magic",t,n,ee(),"Expel Corruption")}}else{"High"===kw.videoSetting&&im(a);var t=yc(3.7*Re(),.85);zy.myMagicDamage("magic",t,a,ee(),"Expel Corruption")}}},e(function(){$NG.window3.on("mouseenter","#searingrevelation",function(){var e="20".fontcolor("#ff0000"),a=Rt(2.1*Qe(),.8,"magic","Searing Revelation"),n="(Level 28) Mark of Judgement";Yy.level>=28&&(n="Mark of Judgement"),NG.tooltipname.innerHTML="Searing Revelation";var t="Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Conjuration<br>Cooldown: "+e+" Second<br><br>Searing Revelation dazes your target for "+Q("60")+" seconds. Dazed targets' physical attacks have a "+Q("30%")+" chance to miss<br><br>If "+n+" is active, Searing Revelation inflicts "+a[0]+" to "+a[1]+" arcane damage.";if(Yy.talent10>=1){var i=Rt(Fe()*(1+.389*oa()),.8,"magic","Searing Revelation");t+="<BR><BR>Searing Revelation blasts your target for "+i[0]+" to "+i[1]+" arcane damage.",Yy.talent10>=20&&(t+="<BR><BR>Effect: Searing Revelation has a "+Q("24%")+" chance to confuse your target.")}NG.tooltipmsg.innerHTML=t})}),zy.searingRevelationFinish=function(){if(!1!==Lb()){qi("searingrevelation",!0),Ei("searingrevelation","-800% -100%"),cS.delayedCall(20,rm),jy(mS.getElementById("searingrevelation"),20,"searingrevelation"),Qa("spellCastHeal3"),"High"===kw.videoSetting&&sm(bL);var e=bL;fa(Wy[e].name+" is dazed by blistering holy light.",3);var a=6e4;if(Wy[e].level>Yy.level&&(a-=dS.pow(Wy[e].level-Yy.level,1.25)),!0===GT||Yy.talent12>=20){n=yc(2.1*Qe(),.8);zy.myMagicDamage("magic",n,e,ee(),"Searing Revelation")}if(Ls(e,a,-256),Yy.talent10>=1){var n=yc(Fe()*(1+.389*oa()),.8);cS.delayedCall(.25,function(){zy.myMagicDamage("magic",n,e,ee(),"Searing Revelation")})}}},e(function(){$NG.window3.on("mouseenter","#martyrsblessing",function(){var e="30".fontcolor("#ff0000"),a=30+12.5*aa(),n="40%".fontcolor("#00ff00"),t="10".fontcolor("#00ff00"),i=6.3*aa();NG.tooltipname.innerHTML="Martyr's Blessing";var o="Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Increase all arcane damage on your target by "+Q(a+"%")+".";Yy.talent6>=1&&(o+=" Damage received is increased by "+Q(i+"%")+"."),o+=" Converts "+n+" of damage received into mana. Effect lasts for "+t+" seconds.",NG.tooltipmsg.innerHTML=o})}),e(function(){$NG.window3.on("mouseenter","#armoroffaith",function(){var e="54".fontcolor("#00ff00"),a=(dS.ceil(1.05*Ne()*(1+11.3*na()/100))+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Armor of Faith";var n="Cost: "+Q(HH.cost.armorOfFaith)+" Mana Points<br>Cast Time: "+ld(6e3)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your armor by "+a+" for "+e+" minutes.";if(Yy.talent7>0){n+="<BR><BR>Buffs attack haste by "+Q((1.6*na()).toFixed(1)+"%")+"."}NG.tooltipmsg.innerHTML=n})}),zy.armorOfFaithFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You feel the favor of the gods upon you.",3),!0===yT&&(nk-=kT),ST.kill(),ST=cS.delayedCall(3240,fm),kT=dS.ceil(1.05*Ne()*(1+11.3*na()/100)),nk+=kT,yT=!0,ny();var e="armorOfFaithIcon";JB.kill(),JB=cS.delayedCall(3240,function(){wi(e)}),Bi("Armor of Faith",e,324e4,-480),Au("blue","easeInBack",5,25,120,5)}},e(function(){$NG.window3.on("mouseenter","#divinesanctuary",function(){var e="36".fontcolor("#00ff00"),a=(dS.ceil(.3*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Divine Sanctuary",NG.tooltipmsg.innerHTML="Cost: "+Q(HH.cost.divineSanctuary)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs all resistances by "+a+" for "+e+" minutes."})}),zy.divineSanctuaryFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You are protected by a chromatic shell.",3),!0===IT&&(ik-=wT,ok-=CT,rk-=MT,lk-=TT,sk-=BT),DT.kill(),DT=cS.delayedCall(2160,gm),wT=dS.ceil(.3*Ne()),CT=dS.ceil(.3*Ne()),MT=dS.ceil(.3*Ne()),TT=dS.ceil(.3*Ne()),BT=dS.ceil(.3*Ne()),ik+=wT,ok+=CT,rk+=MT,lk+=TT,sk+=BT,IT=!0,ny();var e="divineSanctuaryIcon";ZB.kill(),ZB=cS.delayedCall(2160,function(){wi(e)}),Bi("Divine Sanctuary",e,216e4,-512),Au("yellow","easeInBack",5,25,120,3)}},e(function(){$NG.window3.on("mouseenter","#symbolofnaltron",function(){var e="54".fontcolor("#00ff00"),a=(dS.ceil(.95*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Symbol of Yentus",NG.tooltipmsg.innerHTML="Cost: "+Q(HH.cost.symbolOfNaltron)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your hit points by "+a+" for "+e+" minutes."})}),zy.symbolOfNaltronFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("The Symbol of Yentus flashes before your eyes.",3),!0===LT&&(Zy-=HT),AT.kill(),AT=cS.delayedCall(3240,bm),HT=dS.ceil(.95*Ne()),Zy+=HT,LT=!0,ny(),zy.drawMyHp();var e="symbolOfNaltronIcon";eD.kill(),eD=cS.delayedCall(3240,function(){wi(e)}),Bi("Symbol of Yentus",e,324e4,-544),Au("teal","easeInBack",5,25,150,6)}},e(function(){$NG.window3.on("mouseenter","#guardianangel",function(){"54".fontcolor("#00ff00");var e,a="30".fontcolor("#ff0000"),n=(dS.ceil(.8*Ne()*(1+2.25*ta()/100))+"").fontcolor("#00ff00"),t=Rt(1.7*Qe(),.85,"magic","Guardian Angel");e=Yy.level>=28?"Mark of Judgement":"(Level 28) Mark of Judgement",NG.tooltipname.innerHTML="Guardian Angel",NG.tooltipmsg.innerHTML="Cost: "+Q(HH.cost.guardianAngel)+" Mana Points<br>Spell Type: Abjuration<br>Cooldown: "+a+" Seconds<br><br>A guardian angel intervenes on your behalf to shield you from all damage. Your guardian angel absorbs "+n+" damage.<br><br>Effect: Can be used while stunned or feared.<br><br>If "+e+" is active, all targets receive "+t[0]+" to "+t[1]+" arcane damage."})}),e(function(){$NG.window3.on("mouseenter","#holywrath",function(){var e=40;Yy.talent3>=20&&(e=24);var a=Rt(3.1*Re(),.85,"magic","Holy Wrath"),n="7.5".fontcolor("#00ff00"),t="your target";Yy.talent4>=20&&(t="three targets"),NG.tooltipname.innerHTML="Holy Wrath",NG.tooltipmsg.innerHTML="Cost: "+Q(HH.cost.holyWrath)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+R(e)+" Seconds<br><br>Holy Wrath hits "+t+" for "+a[0]+" to "+a[1]+" arcane damage. Summoned pets take devastating damage.<br><br>Effect: Stuns "+t+" for "+n+" seconds."})}),zy.holyWrathFinish=function(){if(!1!==Lb()){Qa("spellDoneSlam"),qi("holywrath",!0),Ei("holywrath","-1100% -100%");var e=4e4;Yy.talent3>=20&&(e=24e3),cS.delayedCall(e/1e3,Im),jy(mS.getElementById("holywrath"),e/1e3,"holywrath"),zy.drawMyMp(-oH);var a=bL;if(Yy.talent4>=20){for(var n=0;n<=4;n++)if(Wy[n].name&&n>=a-1&&n<=a+1){"High"===kw.videoSetting&&Cm(n);t=yc(3.1*Re(),.85);-1!==Wy[n].name.indexOf(" pet")&&(t*=6),fa(Wy[n].name+" is struck by a sonic force.",3),ao(n,7500,-352),zy.myMagicDamage("magic",t,n,ee(),"Holy Wrath")}}else{"High"===kw.videoSetting&&Cm(a);var t=yc(3.1*Re(),.85);-1!==Wy[a].name.indexOf(" pet")&&(t*=6),fa(Wy[a].name+" is struck by a sonic force.",3),ao(a,7500,-352),zy.myMagicDamage("magic",t,a,ee(),"Holy Wrath")}}},e(function(){$NG.window3.on("mouseenter","#markofjudgement",function(){var e="30".fontcolor("#ff0000");Yy.talent11>=20&&(e=Q("20"));var a="6".fontcolor("#00ff00");NG.tooltipname.innerHTML="Mark of Judgement";var n="Cast Time: "+ld(1500)+" Second<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Mark of Judgement empowers all holy magic by "+Q("75%")+" and reduces cast time by "+Q("50%")+" for "+a+" seconds.";if(Yy.talent11>0){var t=Rt(Fe()*(1+.26*ra()),.8,"magic","Holy Nova");n+="<BR><BR>Holy Nova hits all targets for "+t[0]+" to "+t[1]+" arcane damage."}n+="<BR><BR>Effect: While Mark of Judgement is active, Superior Healing, Searing Revelation, Guardian Angel, and Benediction will unleash a magical offensive attack.",NG.tooltipmsg.innerHTML=n})}),zy.markOfJudgementFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),"High"===kw.videoSetting&&function(){function e(n){var t=1380*dS.random()-50,i=425*dS.random(),o=ry(a,5,t,i,.3,.3,!0);cS.to(o,1*dS.random()+1,{x:640,y:720,scaleX:1,scaleY:1,ease:pS.Qin,onComplete:function(){oy(5,o)}}),++n<40&&e(n)}var a=ly("yellowparticle50");e(0)}(),qi("markofjudgement",!0),Ei("markofjudgement","-1200% -100%");e=3e4;Yy.talent11>=20&&(e=2e4),cS.delayedCall(e/1e3,Tm),jy(mS.getElementById("markofjudgement"),e/1e3,"markofjudgement"),fa("You glimmer with the judgement of holy light.",3);var e=6e3,a="markOfJudgementIcon";if(GT=!0,qT=cS.delayedCall(e/1e3,Dm),cS.delayedCall(e/1e3,function(){wi(a)}),Bi("Mark of Judgement",a,e,-384),Yy.talent11>=1){fo("lightningNova"),fo("lightningNova");for(var n=0;n<=4;n++)if(""!==Wy[n].name){var t=yc(Fe()*(1+.26*ra()),.8);zy.myMagicDamage("magic",t,n,ee(),"Holy Nova")}}}},e(function(){$NG.window3.on("mouseenter","#benediction",function(){"1".fontcolor("#00ff00");var e=Rt(Fe()*(1+.475*la()),.75,"magic","Benediction"),a="7".fontcolor("#00ff00"),n="15".fontcolor("#00ff00");NG.tooltipname.innerHTML="Benediction",NG.tooltipmsg.innerHTML="Spell Type: Conjuration<br>Cooldown: "+Q("60")+" Seconds<br><br>Benediction summons a blast of holy light, stunning all targets for "+a+" to "+n+" seconds.<br><br>If Mark of Judgment is active, Benediction inflicts "+e[0]+" to "+e[1]+" arcane damage."})}),e(function(){$NG.window3.on("mouseenter","#starfire",function(){var e=Rt(3+2.7*Re(),.8,"fire","Starfire");NG.tooltipname.innerHTML="Starfire",NG.tooltipmsg.innerHTML="Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Evocation<br><br>Starfire hits your target for "+e[0]+" to "+e[1]+" fire damage."})}),zy.starfireFinish=function(){if(!1!==Lb()){Qa("spellDoneBoom"),"High"===kw.videoSetting&&Gm(bL);var e=yc(3+2.7*Re(),.8);zy.myMagicDamage("fire",e,bL,ee(),"Starfire")}},e(function(){$NG.window3.on("mouseenter","#dronesofdoom",function(){var e=Ft(1+.33*Fe(),.9,"magic","Drones of Doom");"15%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Drones of Doom";var a="Cost: "+Q(LH.cost.dronesOfDoom)+" Mana Points<br>Spell Type: Conjuration<br><br>Drones of Doom ticks for "+e[0]+" to "+e[1]+" arcane damage every second for 18 seconds.";Yy.talent1>=20&&(a+="<BR><BR>Affected mobs' damage is reduced by "+Q("10%")+"."),NG.tooltipmsg.innerHTML=a})}),e(function(){$NG.window3.on("mouseenter","#druhealing",function(){var e="6".fontcolor("#ff0000"),a=ts(1.8*Qe()*(1+1.25*Ue()/100),.9),n=ts(1.8*Qe()*(1+1.25*Ue()/100)/20,.9);NG.tooltipname.innerHTML="Greater Healing";var t="Cost: "+Q(LH.cost.greaterHealing)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Greater Healing heals for "+a[0]+" to "+a[1]+" hit points.";Yy.talent2>=20&&(t+="<BR><BR>Greater Healing leaves a regen effect healing "+n[0]+" to "+n[1]+" health every second over six seconds."),NG.tooltipmsg.innerHTML=t})}),zy.druHealingFinish=function(){function e(a,t){Yy.hp<=0?wi("tunaresKissIcon"+t):(a++,zy.popupHeal(n),a<6?cS.delayedCall(1,function(){e(a,t)}):wi("tunaresKissIcon"+t))}if(!1!==Lb()){Qa("spellDoneHeal"),Lu("teal"),qi("druhealing",!0),Ei("druhealing","-500% -100%"),cS.delayedCall(6,Fm),jy(mS.getElementById("druhealing"),6,"druhealing"),zy.drawMyMp(-oH);var a=yc(1.8*Qe()*(1+1.25*Ue()/100),.9);if(zy.popupHeal(a),Yy.talent2>=20){var n=dS.ceil(a/20),t=Lt();Bi("Rinara's Kiss","tunaresKissIcon"+t,7e3,-160);cS.delayedCall(1,function(){e(0,t)})}}},e(function(){$NG.window3.on("mouseenter","#skinlikenature",function(){var e="54".fontcolor("#00ff00"),a=(dS.ceil(.35*Ne())+"").fontcolor("#00ff00"),n=(dS.ceil(.6*Ne()*(9.5*Ze()/100+1))+"").fontcolor("#00ff00"),t=(dS.ceil(Yy.level/12)+1+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Skin Like Nature",NG.tooltipmsg.innerHTML="Cost: "+Q(LH.cost.skinLikeNature)+" Mana Points<br>Cast Time: "+ld(4500)+" Seconds<br>Spell Type: Abjuration<br><br>Skin Like Nature buffs your hit points by "+n+" and your armor by "+a+" for "+e+" minutes.<br><br>Effect: Buffs your passive health regeneration by "+t+" per tick."})}),zy.skinLikeNatureFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("green","easeInBack",5,25,120,4),zy.drawMyMp(-oH),fa("Your skin shimmers with divine power.",3),!0===PT&&(Zy-=RT,nk-=QT),FT.kill(),FT=cS.delayedCall(3240,zm),QT=dS.ceil(.35*Ne()),RT=dS.ceil(.6*Ne()*(9.5*Ze()/100+1)),Zy+=RT,nk+=QT,PT=!0,ny(),zy.drawMyHp();var e="skinLikeNatureIcon";aD.kill(),aD=cS.delayedCall(3240,function(){wi(e)}),Bi("Skin Like Nature",e,324e4,-448),U()}},e(function(){$NG.window3.on("mouseenter","#tornado",function(){var e="6".fontcolor("#ff0000"),a=Rt(1.6*Re()*(1+3*ea()/100),.8,"physical","Tornado"),n=Rt(.55*Re()*(1+3*ea()/100),.8,"physical","Tornado");NG.tooltipname.innerHTML="Tornado";var t="Spell Type: Evocation";Yy.talent5<20&&(t+="<br>Cooldown: "+e+" Seconds"),t+="<br><br>Tornado hits your target for "+a[0]+" to "+a[1]+" physical damage. <BR><BR>Secondary tornadoes have a chance to hit random targets for "+n[0]+" to "+n[1]+" physical damage.",NG.tooltipmsg.innerHTML=t})}),e(function(){$NG.window3.on("mouseenter","#engulfingroots",function(){var e=Rt(1.6*Qe(),.85,"physical","Engulfing Roots");NG.tooltipname.innerHTML="Engulfing Roots";var a="Cost: "+Q(LH.cost.engulfingRoots)+" Mana Points<br>Cast Time: "+ld(1e3)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+R(6)+" Seconds<br><br>Engulfing Roots hits your target for "+e[0]+" to "+e[1]+" hit points. Your target is rooted, leaving them unable to physically attack you.";if(Yy.talent3>0){var n=Rt(Qe()/6*(6.5*Je()/100),.9,"poison","elemental");a+="<BR><BR>Elemental damage strikes for "+n[0]+" to "+n[1]+" poison damage every second while rooted."}NG.tooltipmsg.innerHTML=a})}),zy.engulfingRootsFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),qi("engulfingroots",!0),Ei("engulfingroots","-700% -100%"),cS.delayedCall(6,Vm),jy(mS.getElementById("engulfingroots"),6,"engulfingroots"),zy.drawMyMp(-oH);var a=bL;if(!0!==Gb(a))if(!0!==ac(a)){fa(Wy[a].name+" is rooted.",3);Cg(a),Wy[a].rootStatus=5,e("#rootIcon"+a+",#rootBuffIcon"+a).remove(),kv(a,!0);var n=yc(1.6*Qe()*zy.mobDefense(bL),.85);zy.myMagicDamage("physical",n,bL,ee(),"Engulfing Roots");Li("Engulfing Roots",a,"rootBuffIcon",0,-224)}else fa(Wy[a].name+" resisted Engulfing Roots.",1);else fa(Wy[a].name+" is immune to Engulfing Roots.",1)}},e(function(){$NG.window3.on("mouseenter","#shieldofspikes",function(){var e="15".fontcolor("#00ff00"),a=(dS.ceil(.11*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Shield of Spikes",NG.tooltipmsg.innerHTML="Cost: "+Q(LH.cost.shieldOfSpikes)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Abjuration<br><br>Buff yourself with a shield of spikes for "+e+" minutes. Shield of Spikes reflects "+a+" physical damage every time you take physical damage."})}),zy.shieldOfSpikesFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("green","easeInQuad",25,11,120,3),zy.drawMyMp(-oH),fa("You are covered in a veil of thorns.",3),NT=!0,WC.kill(),WC=cS.delayedCall(720,Um);var e="shieldOfSpikesIcon";nD.kill(),nD=cS.delayedCall(900,function(){wi(e)}),Bi("Shield of Spikes",e,9e5,-480)}},e(function(){$NG.window3.on("mouseenter","#driftingdeath",function(){var e=Ft(.5*Fe(),.9,"magic","Drifting Death");NG.tooltipname.innerHTML="Drifting Death";var a="Cost: "+Q(LH.cost.driftingDeath)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Conjuration<br><br>Drifting Death engulfs all targets and ticks for "+e[0]+" to "+e[1]+" arcane damage every second for 24 seconds.";Yy.talent10>=20&&(a+="<BR><BR>Spells ignore all resists of mobs affected by Drifting Death."),NG.tooltipmsg.innerHTML=a})}),zy.driftingDeathFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),zy.drawMyMp(-oH);for(var e=0;e<=4;e++)Wy[e].name&&(rH=yc(.5*Fe(),.9),fa(Wy[e].name+" is engulfed by a thousand stings.",3),Wy[e].driftingDeathTickCount=1,Wy[e].driftingDeathTick=rH,Wy[e].driftingDeathTickInterval.kill(),Zm("magic",e),Li("Drifting Death",e,"driftingDeathIcon",24e3,-256),Ru(e,"green",300,40,20,-300,pS.Qin,5,12,100,1.5));1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#drusow",function(){var e="30".fontcolor("#00ff00"),a="15%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Spirit of the Wolf",NG.tooltipmsg.innerHTML="Cost: "+Q(LH.cost.spiritOfTheWolf)+" Mana Points<br>Cast Time: "+ld(3500)+" Seconds<br>Spell Type: Alteration<br><br>Spirit of the Wolf buffs your attack power by "+a+" and your chance to run from battle for "+e+" minutes."})}),zy.druSowFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("teal","easeInSine",5,15,100,3),zy.drawMyMp(-oH),fa("You are surrounded by a brief lupine aura.",3),$C.kill(),$C=cS.delayedCall(1800,au),NC=!0,ny();var e="spiritOfTheWolfIcon";tD.kill(),tD=cS.delayedCall(1800,function(){wi(e)}),Bi("Spirit of the Wolf",e,18e5,-512)}},e(function(){$NG.window3.on("mouseenter","#lightningblast",function(){var e="10".fontcolor("#ff0000"),a=Rt(4*Re(),.4,"lightning","Lightning Blast");NG.tooltipname.innerHTML="Lightning Blast";var n="Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Lightning Blast hits all targets for "+a[0]+" to "+a[1]+" lightning damage.";Yy.talent11>=20&&(n+="<BR><BR>Effect: Lightning Blast stuns each target for a random duration."),NG.tooltipmsg.innerHTML=n})}),zy.lightningBlastFinish=function(){if(!1!==Lb()){Qa("lightning"+~~(3*dS.random()+1)),qi("lightningblast",!0),Ei("lightningblast","-900% -100%"),cS.delayedCall(10,tu),jy(mS.getElementById("lightningblast"),10,"lightningblast");for(var e=0;e<=4;e++)if(""!==Wy[e].name){var a=yc(4*Re(),.4);"High"===kw.videoSetting&&ou(e),zy.myMagicDamage("lightning",a,e,ee(),"Lightning Blast"),Yy.talent11>=20&&ao(e,1e3*dS.pow(1*dS.random()+1,2),-288)}}},e(function(){$NG.window3.on("mouseenter","#earthquake",function(){var e="50".fontcolor("#ff0000");Yy.talent6>=20&&(e=R("38"));var a=Ft(.95*Re()*(1+3.75*aa()/100),.7,"physical","Earthquake");NG.tooltipname.innerHTML="Earthquake";var n="Cast Time: "+ld(1500)+" Second<br>Spell Type: Evocation<br>Cooldown: "+e+" Second<br><br>Earthquake for "+a[0]+" to "+a[1]+" physical damage. Earthquake hits random targets 32 times.";Yy.talent6>=20&&(n+="<BR><BR>Earthquake has an "+Q("8%")+" chance to stun for "+Q("2.5")+" seconds."),n+="<BR><BR>Effect: Interrupts the spellcaster when they take damage.",NG.tooltipmsg.innerHTML=n})}),zy.earthquakeFinish=function(){function e(a){if(Ab()>0){var n=gb();if(a%3==0&&Qa("earthquakeloop1",0,1200),a%5==0&&Qa("earthquakeloop2",0,500),""!==Wy[n].name){var t=yc(.95*Re()*(1+3.75*aa()/100)*zy.mobDefense(n),.7);Ht(n),Yy.talent6>=20&&dS.random()>.92&&ao(n,2500,-320),zy.myDotDamage(t,n,"physical","Earthquake")}}++a<=32&&cS.delayedCall(.333,function(){e(a)})}if(!1!==Lb()){qi("earthquake",!0),Ei("earthquake","-1000% -100%");var a=5e4;Yy.talent6>=20&&(a=38e3),cS.delayedCall(a/1e3,lu),jy(mS.getElementById("earthquake"),a/1e3,"earthquake"),Qa("earthquakeloop1",0,1500);e(0)}},e(function(){$NG.window3.on("mouseenter","#chloroplast",function(){var e="8".fontcolor("#00ff00"),a=dS.ceil(Qe()/16);NG.tooltipname.innerHTML="Chloroplast",NG.tooltipmsg.innerHTML="Cost: "+Q(LH.cost.chloroplast)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Abjuration<br><br>Chloroplast regenerates "+Q(a)+" health every 3 seconds for "+e+" minutes."})}),zy.chloroplastFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),Au("green","easeInBack",25,11,120,6),zy.drawMyMp(-oH),fa("You begin to regenerate.",3),jT=!0,zT=0;var e=dS.ceil(Qe()/16);YT.kill(),YT=cS.to("",3,{repeat:-1,onRepeat:function(){!function(e){zT+=1,zy.popupHeal(e),zy.drawMyHp(),160===zT&&(YT.kill(),jT=!1)}(e)}});iD.kill(),iD=cS.delayedCall(480,function(){wi("chloroplastIcon")}),Bi("Chloroplast","chloroplastIcon",48e4,-544)}},e(function(){$NG.window3.on("mouseenter","#hurricane",function(){var e="18".fontcolor("#ff0000"),a=Ft(.3*Fe()*(1+4.15*na()/100),.85,"cold","Hurricane"),n="33%".fontcolor("#00ff00"),t="15".fontcolor("#00ff00");NG.tooltipname.innerHTML="Hurricane";var i="Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Hurricane hits all targets for "+a[0]+" to "+a[1]+" cold damage every second for "+t+" seconds.";Yy.talent7>=20&&(i+="<BR><BR>Hurricane has a "+Q("12%")+" chance to freeze your target for "+Q("3.5")+" seconds."),i+="<BR><BR>Effect: Reduces all targets' attack speed by "+n+" and their run speed is reduced.",NG.tooltipmsg.innerHTML=i})}),zy.hurricaneFinish=function(){function e(a){for(var n=0;n<=4;n++)if(""!==Wy[n].name){Qa("blue3");var t=yc(.3*Fe()*(1+4.15*na()/100),.85);hu(n,5e3,-352),Yy.talent7>=20&&dS.random()>.88&&ip(n,3500,-352),zy.myDotDamage(t,n,"cold","Hurricane")}(a+=1)<15&&cS.delayedCall(1,function(){e(a)})}if(!1!==Lb()){"High"===kw.videoSetting&&function(){var e=Vi(0,240,3840,597,"hurricane");e.style.opacity=0;var a=e.cloneNode();a.id="hurricaneImage",NG.eWin3.appendChild(a),cS.to(a,7.5,{left:-2580,force3D:"auto",ease:pS.lin,onComplete:function(){a.style.left="0px",cS.to(a,7.5,{force3D:"auto",left:-2580,ease:pS.lin})}}),cS.to(a,2,{opacity:1,ease:pS.lin}),cS.to(a,1,{opacity:0,ease:pS.lin,delay:14,onComplete:function(){Ki(this)}});var n=e.cloneNode();n.id="hurricaneImage2",NG.eWin3.appendChild(n),cS.to(n,15,{left:-2580,force3D:"auto",ease:pS.sinout}),cS.to(n,2,{opacity:1,ease:pS.lin}),cS.to(n,1,{opacity:0,ease:pS.lin,delay:14,onComplete:function(){Ki(this)}})}(),qi("hurricane",!0),Ei("hurricane","-1100% -100%"),cS.delayedCall(18,uu),jy(mS.getElementById("hurricane"),18,"hurricane");e(0)}},e(function(){$NG.window3.on("mouseenter","#sylvangrasp",function(){var e="60".fontcolor("#ff0000");Yy.talent8>=20&&(e=Q("30"));var a=Rt(1.5*Qe()*(1+6.7*ta()/100),.9,"physical","Sylvan Creep");NG.tooltipname.innerHTML="Sylvan Creep";var n="Cost: "+Q(LH.cost.sylvanGrasp)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Sylvan Creep hits all targets for "+a[0]+" to "+a[1]+" physical damage. All targets are snared, reducing their attack speed and casting speed.";if(Yy.talent3>0){var t=Rt(Qe()/6*(6.5*Je()/100),.9,"poison","elemental");n+="<BR><BR>Elemental damage strikes for "+t[0]+" to "+t[1]+" poison damage every second."}NG.tooltipmsg.innerHTML=n})}),zy.sylvanGraspFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),qi("sylvangrasp",!0),Ei("sylvangrasp","-1200% -100%");var e=6e4;Yy.talent8>=20&&(e=3e4),cS.delayedCall(e/1e3,pu),jy(mS.getElementById("sylvangrasp"),e/1e3,"sylvangrasp"),zy.drawMyMp(-oH);for(var a=0;a<=4;a++)if(""!==Wy[a].name){ud(a),damage=yc(1.5*Qe()*(1+6.7*ta()/100)*zy.mobDefense(a),.85);zy.myMagicDamage("physical",damage,a,ee(),"Sylvan Creep"),Li("Sylvan Creep",a,"snareBuffIcon",0,-384),Yy.talent3>=1&&function(){var e=a;Wy[e].sylvanCreepInterval.kill(),Wy[e].sylvanCreepInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[a].name)Wy[a].sylvanCreepInterval.kill(),Wy[a].snareStatus=!1;else{var n=yc(Qe()/6*(6.5*Je()/100),.9);zy.myDotDamage(n,a,e,"Sylvan Creep")}}("poison",e)}})}()}0===zy.autoAttackStatus&&Si(),1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#volcano",function(){var e="60".fontcolor("#ff0000");Yy.talent12>=20&&(e="30".fontcolor("#ff0000"));var a=Ft(.18*Re(),.82,"fire","Volcano"),n=Rt(3.5*Re(),.5,"lightning","Thunder Storm"),t="10".fontcolor("#00ff00");NG.tooltipname.innerHTML="Volcano";var i="Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Volcano hits your target for "+a[0]+" to "+a[1]+" fire damage 100 times over "+t+" seconds.";Yy.talent12>=20&&(i+="<BR><BR>Effect: Volcano summons a violent thunderstorm that strikes random targets 35 times for "+n[0]+" to "+n[1]+" over a long duration. Multiple thunder storms can overlap."),NG.tooltipmsg.innerHTML=i})}),zy.volcanoFinish=function(){function e(a,n){if(""!==Wy[n].name){var t=yc(.18*Re(),.82);"High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX,n=sy("fissure",7,a-300,668,0,0,!0);n.image.onload=function(){cS.to(n,1,{scaleX:1.25,scaleY:1.25}),cS.to(n,1.5,{scaleX:.5,scaleY:.5,alpha:0,delay:1,onComplete:function(){oy(7,n)}})};var t=a-25+800*dS.random()-400,i=ry(hS.boulder,5,a-75,720,1,1);cS.to(i,.3,{y:-160,x:t,onComplete:function(){oy(5,i)}})}(n),zy.myDotDamage(t,n,"fire","Volcano"),Qa("explode"+~~(3*dS.random()+1))}++a<=100&&cS.delayedCall(.1,function(){e(a,n)})}if(!1!==Lb()){qi("volcano",!0),Ei("volcano","-1300% -100%");var a=6e4;Yy.talent12>=20&&(a=3e4),cS.delayedCall(a/1e3,yu),jy(mS.getElementById("volcano"),a/1e3,"volcano");var n=bL;hS.boulder=ly("boulder",150,150),hS.fissure=ly("fissure",600,180),e(0,n),Yy.talent12>=20&&function(){function e(a){var n=gb();if(n!==E){ou(n),Qa("lightning"+~~(3*dS.random()+1));var t=yc(3.5*Re(),.5);zy.myMagicDamage("lightning",t,n,!1,"Thunder Storm")}a<35&&cS.delayedCall(5.5*dS.random()+.5,function(){e(++a)})}cS.delayedCall(3,function(){e(0)})}()}},e(function(){$NG.window3.on("mouseenter","#rangertrackId",function(){"3".fontcolor("#ff0000");NG.tooltipname.innerHTML="Track",NG.tooltipmsg.innerHTML="Cooldown: "+Q("180")+" Seconds<br><br>Attempt to track your quarry to find valued targets in the zone."})}),e(function(){$NG.window3.on("mouseenter","#froststrike",function(){var e=Rt(3+2.1*Re(),.85,"cold","Frost Strike");NG.tooltipname.innerHTML="Frost Strike",NG.tooltipmsg.innerHTML="Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Evocation<br><br>Frost Strike hits your target for "+e[0]+" to "+e[1]+" cold damage."})}),zy.frostStrikeFinish=function(){if(!1!==Lb()){Qa("spellDoneSlam"),"High"===kw.videoSetting&&function(e){var a=sy("frostStrike",5,Gw[e].offsetLeft+Wy[e].cX-100,Gw[e].offsetTop+Wy[e].cY-100,200,200,!0);a.image.onload=function(){cS.to(a,.8,{scaleY:2,scaleX:2,alpha:0,onComplete:function(){oy(5,a)}})},Gt(e,"teal")}(bL);var e=yc(3+2.1*Re(),.85);zy.myMagicDamage("cold",e,bL,ee(),"Frost Strike")}},e(function(){$NG.window3.on("mouseenter","#scourge",function(){"5".fontcolor("#ff0000");var e=Ft(1+.42*Fe(),.9,"poison","Scourge"),a="12%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Scourge";var n="Cost: "+Q(AH.cost.scourge)+" Mana Points<br>Spell Type: Conjuration<br><br>Scourge ticks for "+e[0]+" to "+e[1]+" poison damage every second for 18 seconds.<br><br>";n+="Effect: Decreases your target's physical damage and increases physical damage received by "+a+".",NG.tooltipmsg.innerHTML=n})}),e(function(){$NG.window3.on("mouseenter","#shmhealing",function(){var e="7".fontcolor("#ff0000"),a=ts(1.8*Qe(),.9);NG.tooltipname.innerHTML="Greater Healing",NG.tooltipmsg.innerHTML="Cost: "+Q(AH.cost.greaterHealing)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Greater Healing heals for "+a[0]+" to "+a[1]+" hit points."})}),zy.shmHealingFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),Lu("blue"),qi("shmhealing",!0),Ei("shmhealing","-500% -100%"),cS.delayedCall(7,Bu),jy(mS.getElementById("shmhealing"),7,"shmhealing");var e=yc(1.8*Qe(),.9);zy.popupHeal(e),zy.drawMyMp(-oH)}},e(function(){$NG.window3.on("mouseenter","#calloftheancients",function(){var e="24".fontcolor("#00ff00"),a=(dS.ceil((1+.15*Ne())*(1+.026*ia()))+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Call of the Ancients";var n="Cost: "+Q(AH.cost.callOfTheAncients)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Abjuration<br><br>Buffs your strength, stamina, agility, dexterity, and wisdom by "+a+" for "+e+" minutes.";Yy.talent9>=20&&(n+="<BR><BR>While Call of the Ancients is active, your attack haste is enhanced by "+Q("42%")+"."),NG.tooltipmsg.innerHTML=n})}),zy.callOfTheAncientsFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You are strengthened by the might of your ancestors.",3),!0===KT&&(Oy-=WT,Xy-=OT,Uy-=XT,$y-=VT,_y-=_T),$T.kill(),$T=cS.delayedCall(1440,xu);var e=dS.ceil((1+.15*Ne())*(1+.026*ia()));Oy+=WT=e,Xy+=OT=e,Uy+=XT=e,$y+=VT=e,_y+=_T=e,KT=!0,zy.drawMyHp(),ny();var a="callOfTheAncientsIcon";oD.kill(),oD=cS.delayedCall(1440,function(){wi(a)}),Bi("Call of the Ancients",a,144e4,-448),Au("purple","easeInBack",5,25,120,4)}},e(function(){$NG.window3.on("mouseenter","#togorsinsects",function(){var e="20".fontcolor("#ff0000"),a=(Qe()/5*42/30.3).toFixed(1),n="your target";Yy.talent2>=20&&(n="all targets"),a=(a+"%").fontcolor("#00ff00"),NG.tooltipname.innerHTML="Togor's Insects";var t="Cost: "+Q(AH.cost.togorsInsects)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Togor's Insects slows the attack speed of "+n+" by two seconds for 60 seconds.";if(Yy.talent2>=1){var i=Ft(Qe()*(1+.165*Ue())/20,.9,"poison","Togor's Pestilence");t+="<BR><BR>Togor's Pestilence plagues your target for "+i[0]+" to "+i[1]+" poison damage every seconds over 50 seconds."}NG.tooltipmsg.innerHTML=t})}),zy.togorsInsectsFinish=function(){if(!1!==Lb()){1===Wy[bL].attackStatus&&hi(!0),Qa("spellDoneHeal"),qi("togorsinsects",!0),Ei("togorsinsects","-600% -100%"),cS.delayedCall(20,Gu),jy(mS.getElementById("togorsinsects"),20,"togorsinsects"),zy.drawMyMp(-oH);var e=bL,a=yc(Qe()*(1+.165*Ue())/20,.9);if(Yy.talent2>=20)for(var n=0;n<=4;n++)Wy[n].name&&("High"===kw.videoSetting&&Ru(n,"white"),Pu(n,"slowIcon",6e4),Qu(n,a,50,1e3,"poison","Togor's Pestilence","togorsPestilence",-192,-32,!0));else"High"===kw.videoSetting&&Ru(e,"white"),Pu(e,"slowIcon",6e4),Yy.talent2>=1&&Qu(e,a,50,1e3,"poison","Togor's Pestilence","togorsPestilence",-192,-32,!0)}},e(function(){$NG.window3.on("mouseenter","#cannibalize",function(){var e="45".fontcolor("#ff0000"),a=(dS.round(.18*Yy.maxHp)+"").fontcolor("#00ff00"),n=(dS.round(.33*Yy.maxHp)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Cannibalize",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Cannibalize sacrifices "+a+" health for "+n+" mana."})}),fS.cannibalize=function(e){cS.to(e,2,{alpha:0,scaleX:0,scaleY:0,ease:pS.Qin,onComplete:function(){oy(5,e)}})},e(function(){$NG.window3.on("mouseenter","#poisonnova",function(){var e="6".fontcolor("#ff0000"),a=Rt(2.4*Re(),.9,"poison","Poison Nova"),n=Ft(Fe()/3.3,.9,"poison","Blighted Breath");NG.tooltipname.innerHTML="Poison Nova";var t="Cost: "+Q(AH.cost.poisonNova)+" Mana Points<br>Cast Time: "+ld(1500)+" Second<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Poison Nova hits all targets for "+a[0]+" to "+a[1]+" poison damage.";Yy.talent6>=20&&(t+="<BR><BR>Poison Nova does an additional "+n[0]+" to "+n[1]+" poison damage every second over six seconds."),NG.tooltipmsg.innerHTML=t})}),zy.poisonNovaFinish=function(){if(!1!==Lb()){Qa("poisonnova"),fo("poisonNova"),qi("poisonnova",!0),Ei("poisonnova","-900% -100%"),cS.delayedCall(6,Yu),jy(mS.getElementById("poisonnova"),6,"poisonnova"),zy.drawMyMp(-oH);for(var e=0;e<=4;e++)if(""!==Wy[e].name){if(Yy.talent6>=20){Qu(e,a=yc(Fe()/3.3,.9),6,1e3,"poison","Blighted Breath","blightedBreath",-288)}var a=yc(2.4*Re(),.9);zy.myMagicDamage("poison",a,e,ee(),"Poison Nova")}}},e(function(){$NG.window3.on("mouseenter","#enstill",function(){var e="9".fontcolor("#ff0000"),a=Ft(Qe()*(1+.235*Je())/20,.9,"poison","elemental");ts((Qe()-50)/8,.75);NG.tooltipname.innerHTML="Enstill";var n="Cost: "+Q(AH.cost.enstill)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Enstill roots your target, leaving them unable to physically attack you.";Yy.talent3>0&&(n+="<BR><BR>Enstill plagues your target for "+a[0]+" to "+a[1]+" poison damage every second that root is active.",Yy.talent3>=20&&(n+="<BR><BR>If root is active when a target is slain, you recover "+a[0]+" to "+a[1]+" health and mana.")),NG.tooltipmsg.innerHTML=n})}),zy.enstillFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),qi("enstill",!0),Ei("enstill","-800% -100%"),cS.delayedCall(9,Ou),jy(mS.getElementById("enstill"),9,"enstill"),zy.drawMyMp(-oH);var a=bL;if(!0!==Gb(a))if(!0!==ac(a)){fa(Wy[a].name+" is rooted.",3);Cg(a),Wy[a].rootStatus=4,e("#rootIcon"+a+",#rootBuffIcon"+a).remove(),kv(a,!0);Li("Enstill",a,"rootBuffIcon",0,-256),0===zy.autoAttackStatus&&Si()}else fa(Wy[a].name+" resisted Enstill.",1);else fa(Wy[bL].name+" is immune to Enstill.",1)}},e(function(){$NG.window3.on("mouseenter","#shmsow",function(){var e="40".fontcolor("#00ff00"),a=15;Yy.talent11>0&&(a=(a=15+5.8*ra()/100*15).toFixed(1)),NG.tooltipname.innerHTML="Spirit of the Wolf",NG.tooltipmsg.innerHTML="Cost: "+Q(AH.cost.spiritOfTheWolf)+" Mana Points<br>Cast Time: "+ld(3500)+" Seconds<br>Spell Type: Alteration<br><br>Buffs your attack power by "+Q(a+"%")+" and your chance to run from battle for "+e+" minutes."})}),zy.shmSowFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("teal","easeInSine",5,15,100,3),zy.drawMyMp(-oH),fa("You are surrounded by a brief lupine aura.",3),$C.kill(),$C=cS.delayedCall(2400,_u),NC=!0,ny();var e="spiritOfTheWolfIcon";tD.kill(),tD=cS.delayedCall(2400,function(){wi(e)}),Bi("Spirit of the Wolf",e,24e5,-512)}},e(function(){$NG.window3.on("mouseenter","#affliction",function(){var e=Ft(.53*Fe(),.9,"poison","Affliction"),a="10%".fontcolor("#00ff00"),n="your target";Yy.talent7>=20&&(n="three targets"),NG.tooltipname.innerHTML="Affliction",NG.tooltipmsg.innerHTML="Cost: "+Q(AH.cost.affliction)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Conjuration<br><br>Affliction hits "+n+" and ticks for "+e[0]+" to "+e[1]+" poison damage every second for 24 seconds.<br><br>Effect: Increases all arcane damage by "+a+"."})}),zy.afflictionFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),zy.drawMyMp(-oH);a=bL;if(Yy.talent7>=20){for(var e=0;e<=4;e++)if(Wy[e].name&&e>=a-1&&e<=a+1){var a;Wy[a=e].name&&Uu(a,24e3)}}else Uu(a,24e3)}},e(function(){$NG.window3.on("mouseenter","#reclaimblood",function(){var e="45".fontcolor("#ff0000"),a=ts(Qe()/5.7*(1+.024*la()),.9),n="21".fontcolor("#00ff00");NG.tooltipname.innerHTML="Reclaim Blood";var t="Cost: "+Q(AH.cost.reclaimBlood)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Reclaim Blood regenerates "+a[0]+" to "+a[1]+" health every 3 seconds for "+n+" seconds.";Yy.talent12>=20&&(t+="<BR><BR>Effect: Reclaim Blood triggers Bloodlust. Bloodlust reduces all spellcasting time by "+Q("60%")+" and enhances all physical damage by "+Q("60%")+"."),NG.tooltipmsg.innerHTML=t})}),zy.reclaimBloodFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),"High"===kw.videoSetting&&function(){for(var e=0;e<=50;e++)!function(){var e=~~(1280*dS.random()),a=~~(50*dS.random()+300),n=~~(20*dS.random()+5);if(Y1=n<10?510:n>=10&&n<15?530:n>=15&&n<20?560:595,n<15)(t=sy("redparticle50",5,e,Y1,25,25)).image.onload=function(){cS.to(t,2*dS.random()+.5,{y:a,ease:pS.sinout,scaleX:0,scaleY:0,onComplete:function(){oy(5,t)}})};else{var t=sy("redparticle50",5,e,Y1,25,25);t.image.onload=function(){cS.to(t,2*dS.random()+.5,{y:a,scaleX:0,scaleY:0,ease:pS.sinout,onComplete:function(){oy(5,t)}})}}}()}(),qi("reclaimblood",!0),Ei("reclaimblood","-1100% -100%"),cS.delayedCall(45,Zu),jy(mS.getElementById("reclaimblood"),45,"reclaimblood"),zy.drawMyMp(-oH),fa("You reclaim the lifeblood of fallen spirits.",3),UT=0;var e=yc(Qe()/5.7*(1+.024*la()),.9);JT.kill(),JT=cS.to("",3,{repeat:-1,onRepeat:function(){!function(e){UT+=1,zy.popupHeal(e),7===UT&&JT.kill()}(e)}});a=21e3;if(Bi("Reclaim Blood","reclaimBloodIcon",a,-352),Yy.talent12>=20){II=!0;var a;Bi("Bloodlust","bloodlust",a=1e4,-352,-32),cS.delayedCall(a/1e3,function(){II=!1})}}},e(function(){$NG.window3.on("mouseenter","#talismanofaltuna",function(){var e="54".fontcolor("#00ff00"),a=(dS.ceil(.77*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Talisman of Trogmaar",NG.tooltipmsg.innerHTML="Cost: "+Q(AH.cost.talismanOfAltuna)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Abjuration<br><br>Talisman of Trogmaar buffs your hit points by "+a+" for "+e+" minutes."})}),zy.talismanOfAltunaFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("green","easeInBack",5,25,150,5),zy.drawMyMp(-oH),fa("You feel tough.",3),!0===ZT&&(Zy-=eB),aB.kill(),aB=cS.delayedCall(3240,nf),eB=dS.ceil(.77*Ne()),Zy+=eB,ZT=!0,ny(),zy.drawMyHp();var e="talismanOfAltunaIcon";rD.kill(),rD=cS.delayedCall(3240,function(){wi(e)}),Bi("Talisman of Trogmaar",e,324e4,-544)}},e(function(){$NG.window3.on("mouseenter","#glacialimpact",function(){var e="20".fontcolor("#ff0000"),a=7;sS.Mendicant>=6&&(a+=5);var n=Rt(2.3*Re(),.9,"cold","Glacial Impact"),t="25%".fontcolor("#00ff00"),i="your target";Yy.talent4>=20&&(i="three targets"),NG.tooltipname.innerHTML="Glacial Impact",NG.tooltipmsg.innerHTML="Cost: "+Q(AH.cost.glacialImpact)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Glacial Impact hits "+i+" for "+n[0]+" to "+n[1]+" cold damage<br><br>Effect: Freezes your target in place for "+Q(a)+" seconds. Frozen targets take "+t+" more damage."})}),zy.glacialImpactFinish=function(e,a){if(!1!==Lb()||a){if(Qa("spellDoneSlam"),!a){var n=2e4;Yy.talent7>=20&&(n=1e4),qi("glacialimpact",!0),Ei("glacialimpact","-1200% -100%"),cS.delayedCall(n/1e3,of),jy(mS.getElementById("glacialimpact"),n/1e3,"glacialimpact"),zy.drawMyMp(-oH)}e===E&&(e=bL);var t=7e3;if(sS.Mendicant>=6&&(t+=5e3),Yy.talent4>=20){for(var i=0;i<=4;i++)if(Wy[i].name&&i>=e-1&&i<=e+1){ip(i,t,-384);o=yc(2.3*Re(),.9);zy.myMagicDamage("cold",o,i,ee(),"Glacial Impact")}}else{ip(e,t,-384);var o=yc(2.3*Re(),.9);zy.myMagicDamage("cold",o,e,ee(),"Glacial Impact")}}},e(function(){$NG.window3.on("mouseenter","#devouringplague",function(){var e="90".fontcolor("#ff0000"),a=Ft(.36*Fe(),.9,"poison","Devouring Plague"),n="30%".fontcolor("#00ff00"),t="";Yy.talent8>=20&&(t=" and "+Q("10%")+" of the damage as mana"),NG.tooltipname.innerHTML="Devouring Plague",NG.tooltipmsg.innerHTML="Cost: "+Q(AH.cost.devouringPlague)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Devouring Plague ticks for "+a[0]+" to "+a[1]+" poison damage every 3 seconds for 27 seconds. Devouring Plague spreads to adjacent targets.<br><br>Effect: Absorb "+n+" of the damage as health"+t+"."})}),zy.devouringPlagueFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),Ru(bL,"purple",320,20,45,-180,pS.sin,7,12,100,.8),qi("devouringplague",!0),Ei("devouringplague","-1300% -100%"),cS.delayedCall(90,sf),jy(mS.getElementById("devouringplague"),90,"devouringplague"),zy.drawMyMp(-oH);var e=bL;fa(Wy[e].name+" is infected with a voracious plague.",3),Wy[e].devouringPlagueTickCount=1;for(var a=0;a<=4;a++)rH=yc(.36*Fe(),.9),Wy[a].devouringPlagueTick=rH;Wy[e].devouringPlagueInterval.kill(),Wy[e].devouringPlagueInterval=cS.to("",3,{repeat:-1,onRepeat:function(){cf(e)}}),Li("Devouring Plague",e,"devouringPlagueIcon",24e3,-416),1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#guardianspirit",function(){NG.tooltipname.innerHTML="Guardian Spirit",NG.tooltipmsg.innerHTML="Cost: "+Q(AH.cost.guardianSpirit)+" Mana Points<br>Cast Time: "+ld(4500)+" Seconds<br>Spell Type: Conjuration<br><br>Summon a Guardian Spirit to fight by your side."})}),zy.guardianSpiritFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),sH=1,zy.drawMyMp(-oH),fa("You summon a Guardian Spirit.",3),RD=1+~~(Yy.level/1.7);var a=~~(dS.random()*(.15*RD));RD-=a,lL=300+dS.ceil(RD/3),sL=.7435*lL,QD=PD="a wolf",FD=dS.ceil((50+45*RD)*(1+.147*oa())),ND=FD,bb(),jD=dS.ceil(2*RD),zD=dS.ceil(2*RD),YD=100,KD=100,WD=100,OD=100,XD=100,_D="kick",$D="kick",UD="kick",JD="kick",ZD=10,zy.petAlive=!0,VD=2600,GD=1,zy.checkShamanSkills(),e("#pethpbardiv").css("display","block"),Ei("guardianspirit","-1500% -100%"),zy.drawMyHp();var n=190+(290-lL)/2;$NG.petImage.attr("src","/classic/images1/a wolf.png").width(lL),$NG.mob5.stop(!0,!0).height(sL).width(lL+"px").css({left:n,bottom:60,opacity:1,display:"block"});var t=e("#petName").width(),i=lL/2-t/2;e("#petName").css("left",i)}},e(function(){$NG.window3.on("mouseenter","#bonespirit",function(){var e=3e3,a="Bone Spirit",n="magic",t=Rt(3+2.25*Re(),.8,"magic","Bone Spirit");Yy.talent4>=20&&(e=2500,a="Fireball",n="fire",t=Rt(3+4.3*Re(),.8,"fire","Fireball"));NG.tooltipname.innerHTML=a,NG.tooltipmsg.innerHTML="Cast Time: "+ld(e)+" Seconds<br>Spell Type: Evocation<br><br>"+a+" hits your target for "+t[0]+" to "+t[1]+" "+n+" damage."})}),zy.boneSpiritFinish=function(e){if(e===E){if(!1===Lb())return;e=bL}if(Yy.talent4<20){Qa("bonespirit",0,1e3),function(e){function a(e){var n=ry(i,5,540,597,1,1,!1,!0);n.set({x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY,alpha:o.alpha}),cS.to(n,1.5,{alpha:0,onComplete:function(){oy(5,n)}}),++e<6&&cS.delayedCall(.2,function(){a(e)})}if("High"===kw.videoSetting&&Wy[e].name){var n=Gw[e].offsetLeft+Wy[e].cX-50,t=Gw[e].offsetTop+Wy[e].cY-50,i=ly("boneSpirit",200,200),o=ry(i,5,540,597);o.alpha=.7,cS.to(o,1.2,{y:t,x:n,scaleX:.5,scaleY:.5,ease:pS.Qin,onComplete:function(){Gt(e,"purple","blank"),oy(5,o)}}),a(0)}}(e);var a=yc(3+2.25*Re(),.8);cS.delayedCall(1.2,function(){Qa("holybolt"),zy.myMagicDamage("magic",a,e,ee(),"Bone Spirit")})}else zy.fireballFinish(!0,e);Yy.talent5>=20&&""===qD&&(zy.invokeDeathFinish(!0),BS=bL,Ii())},e(function(){$NG.window3.on("mouseenter","#invokedeath",function(){(dS.ceil(3+1.8*Re()+(se()-70)/8)+"").fontcolor("#00ff00"),(dS.ceil(3+1.8*Re()+(se()-70)/8+Pp()/4.4/2)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Invoke Death",NG.tooltipmsg.innerHTML="Cost: "+Q(xH.cost.invokeDeath)+" Mana Points<br>Cast Time: "+ld(6e3)+" Seconds<br>Spell Type: Conjuration<br><br>Invoke Death conjures a skeleton warrior to fight by your side."})}),zy.invokeDeathFinish=function(a){if(!a){if(!1===Lb())return;sH=1,zy.drawMyMp(-oH)}Qa("spellCastAbjure"),Qa("skeleton_att"),fa(Yy.name+" animates an undead servant.",3),RD=1+~~(Yy.level/1.2),lL=175+dS.ceil(RD/3),sL=2.096*lL,QD=PD="a dark skeleton",FD=dS.ceil((50+50*RD)*(1+.163*ea())),ND=FD,bb(),jD=dS.ceil(2*RD),zD=dS.ceil(3*RD),YD=100,KD=100,WD=100,OD=100,XD=100,_D="kick",$D="kick",UD="kick",JD="kick",Yy.talent5>=20&&(_D="bash",$D="bash",UD="bash",JD="bash"),ZD=9,zy.petAlive=!0,VD=2500,GD=1,zy.checkNecromancerSkills(),e("#pethpbardiv").css("display","block"),Ei("invokedeath","-1600% -100%"),zy.drawMyHp();var n=190+(290-lL)/2;$NG.petImage.attr("src","/classic/images1/a dark skeleton.png").width(lL),$NG.mob5.stop(!0,!0).height(sL).width(lL).css({left:n,bottom:60,opacity:1,display:"block"});var t=e("#petName").width(),i=lL/2-t/2;e("#petName").css("left",i)},e(function(){$NG.window3.on("mouseenter","#cascadingdarkness",function(){"5".fontcolor("#ff0000");var e=Ft(1+.38*Fe(),.9,"magic","Cascading Darkness");NG.tooltipname.innerHTML="Cascading Darkness",NG.tooltipmsg.innerHTML="Cost: "+Q(xH.cost.cascadingDarkness)+" Mana Points<br>Spell Type: Conjuration<br><br>Cascading Darkness ticks for "+e[0]+" to "+e[1]+" arcane damage every second for 18 seconds. Damage increases with each successive tick."})}),e(function(){$NG.window3.on("mouseenter","#corpseexplosion",function(){var e=Rt(2.4*Re(),.85,"physical","Corpse Explosion");NG.tooltipname.innerHTML="Corpse Explosion",NG.tooltipmsg.innerHTML="Cost: "+Q(xH.cost.corpseExplosion)+" Mana Points<br>Spell Type: Evocation<br><br>Corpse Explosion hits all targets for "+e[0]+" to "+e[1]+" physical damage. Corpse Explosion is activated for five seconds when you kill any mob."})}),e(function(){$NG.window3.on("mouseenter","#invokefear",function(){var e="25".fontcolor("#ff0000"),a=Ft(Qe()*(1+.27*Ze())/20,.8,"cold","Chill of Death");NG.tooltipname.innerHTML="Invoke Fear";var n="Cost: "+Q(xH.cost.invokeFear)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Fear your target for a random duration. Feared targets cower before you and will not attack.";Yy.talent4>0&&(n+="<BR><BR>Chill of Death hits your target for "+a[0]+" to "+a[1]+" cold damage every second until fear expires."),NG.tooltipmsg.innerHTML=n})}),zy.invokeFearFinish=function(){if(!1!==Lb()){Qa("spellCastEvoke2"),zy.drawMyMp(-oH),qi("invokefear",!0),Ei("invokefear","-500% -100%"),cS.delayedCall(25,vf),jy(mS.getElementById("invokefear"),25,"invokefear");var e=bL,a=(4e4*dS.random()+5e3)*nc(e);if(Wy[e].level>Yy.level&&(a-=dS.pow(Wy[e].level-Yy.level,1.25)),a<1e4&&(a=1e4),a>25e3&&(a=25e3),tc(e,a,-160),Yy.talent4>=1){Qu(e,yc(dS.ceil(Qe()*(1+.27*Ze())/20),.8),30,1e3,"cold","Chill of Death","chillOfDeath",-480)}}},e(function(){$NG.window3.on("mouseenter","#drainsoul",function(){var e=30;sS.Wraith>=6&&(e-=6);var a=Rt(1.8*Re(),.9,"magic","Drain Soul");NG.tooltipname.innerHTML="Drain Soul",NG.tooltipmsg.innerHTML="Cost: "+Q(xH.cost.drainSoul)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+Q(e)+" Seconds<br><br>Drain Soul hits your target for "+a[0]+" to "+a[1]+" arcane damage and it is absorbed as health."})}),zy.drainSoulFinish=function(){if(!1!==Lb()){Qa("spellCastAbjure"),"High"===kw.videoSetting&&Yd(bL),zy.drawMyMp(-oH),qi("drainsoul",!0),Ei("drainsoul","-600% -100%");var e=3e4;sS.Wraith>=6&&(e-=6e3),cS.delayedCall(e/1e3,Sf),jy(mS.getElementById("drainsoul"),e/1e3,"drainsoul"),rH=yc(1.8*Re(),.9),fa(Yy.name+' says, "Ah, I feel much better now."'),Yy.talent1>=20&&Qm(bL,45,1e3,-192);var a=zy.myMagicDamage("magic",rH,bL,!1,"Drain Soul");zy.popupHeal(a,!0)}},e(function(){$NG.window3.on("mouseenter","#archshielding",function(){var e="54".fontcolor("#00ff00"),a=Ne(),n=((dS.ceil(.1*a)+"").fontcolor("#00ff00"),(dS.ceil(.07*a)+"").fontcolor("#00ff00")),t=(dS.ceil(.4*a)+"").fontcolor("#00ff00"),i=(dS.ceil(.1*a)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Arch Shielding",NG.tooltipmsg.innerHTML="Cost: "+Q(xH.cost.archShielding)+" Mana Points<br>Cast Time: "+ld(4e3)+" Seconds<br>Spell Type: Abjuration<br><br>Arch Shielding buffs your armor by "+n+", your health by "+t+", and your poison and magic resistance by "+i+" for "+e+" minutes."})}),zy.archShieldingFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You feel protected by a vile presence.",3),!0===nB&&(Zy-=tB,nk-=iB,ik-=oB,ok-=rB),lB.kill(),lB=cS.delayedCall(3240,Cf);var e=Ne();iB=dS.ceil(.07*e),tB=dS.ceil(.4*e),oB=dS.ceil(.1*e),rB=dS.ceil(.1*e),Zy+=tB,nk+=iB,ik+=oB,ok+=rB,nB=!0,zy.drawMyHp(),ny();UB.kill(),UB=cS.delayedCall(3240,function(){wi("hpbuffIcon")}),Bi("Arch Shielding","hpbuffIcon",324e4,-544),Au("green","easeInQuad",5,15,120,4)}},e(function(){$NG.window3.on("mouseenter","#feigndeath",function(){var e="25".fontcolor("#ff0000");NG.tooltipname.innerHTML="Feign Death",NG.tooltipmsg.innerHTML="Cost: "+Q(xH.cost.feignDeath)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Abjuration<br>Cooldown: "+e+" Seconds<br><br>Your heart stops and you fall to the ground. All targets may believe you have died and leave the battlefield. When used out of combat, you cannot be ambushed."})}),zy.necFeignDeathFinish=function(){if(!1!==Lb()){if(Qa("spellDoneSlam"),zy.drawMyMp(-oH),cS.delayedCall(25,Tf),jy(mS.getElementById("feigndeath"),25,"feigndeath"),qi("feigndeath",!0),Ei("feigndeath","-700% -100%"),!0===ya())dS.random()>.65?(fa("You fall to the ground. Convinced of your death, all enemies leave the battle.",3),tC=0,tt()):fa("You fall to the ground, but nobody is fooled this time.",3);else{if(fa("You feign your death."),0===tC)return;Ei("feigndeath","-700% -100%"),fa("You feign your death."),tC=0}var e="death_mb";"Female"===Yy.gender&&(e="death_fl"),Qa(e)}},e(function(){$NG.window3.on("mouseenter","#augmentdeath",function(){var e="90".fontcolor("#ff0000"),a="30".fontcolor("#00ff00"),n=(dS.ceil(3.5*Fe()+dS.random()*(Yy.level/6))+"").fontcolor("#00ff00");(dS.ceil(.15*Ne())+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Augment Death",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Heal your pet for "+n+" health and buff your pet's attack speed for "+a+" seconds"})}),e(function(){$NG.window3.on("mouseenter","#igniteblood",function(){var e=(dS.ceil(Fe()/5)+"").fontcolor("#00ff00"),a=Ft(.64*Fe(),.9,"fire","Ignite Blood"),n="your target";Yy.talent2>=20&&(n="all targets"),NG.tooltipname.innerHTML="Ignite Blood",NG.tooltipmsg.innerHTML="Cost: "+e+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Conjuration<br><br>Ignite Blood hits "+n+" and ticks for "+a[0]+" to "+a[1]+" fire damage every second for 24 seconds."})}),zy.igniteBloodFinish=function(){var e=!1;if(Yy.talent2>=20&&(e=!0),!1!==Lb()){Qa("spellDoneHeal");var a=bL;zy.drawMyMp(-oH);for(var n=0;n<=4;n++)Wy[n].name&&(n!==a&&!0!==e||(Ru(n,"red",150,0,10,-200,pS.sinout,25,3,100),rH=yc(.64*Fe(),.9),fa(Wy[n].name+"'s blood ignites.",3),Wy[n].igniteBloodTickCount=1,Wy[n].igniteBloodTick=rH,Ef(0,n),Li("Ignite Blood",n,"igniteBloodIcon",24e3,-288)));1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#diamondskin",function(){var e=R("120")+" Seconds",a=("24".fontcolor("#00ff00"),(dS.ceil(1.25*Ne())+"").fontcolor("#00ff00"));NG.tooltipname.innerHTML="Diamond Skin";var n="The barrier fades after "+Q(9)+" seconds.";Yy.talent12>=20&&(n="",e=R("60")+" Seconds");var t="Spell Type: Abjuration<br>Cooldown: "+e+"<br><br>Surround yourself with a diamond barrier that can absorb "+a+" damage."+n;NG.tooltipmsg.innerHTML=t})}),e(function(){$NG.window3.on("mouseenter","#bondofdeath",function(){var e=Ft(.166*Qe(),.9,"magic","Bond of Death"),a="your target";Yy.talent3>=20&&(a="three targets"),NG.tooltipname.innerHTML="Bond of Death",NG.tooltipmsg.innerHTML="Cost: "+Q(xH.cost.bondOfDeath)+" Mana Points<br>Cooldown: "+R("30")+" Seconds<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Alteration<br><br>Bond of Death hits "+a+" and ticks for "+e[0]+" to "+e[1]+" arcane damage every 3 seconds for one minute. You absorb all damage as health."})}),zy.bondOfDeathFinish=function(){if(!1!==Lb()){qi("bondofdeath",!0),Ei("bondofdeath","-1100% -100%"),cS.delayedCall(30,Ff),jy(mS.getElementById("bondofdeath"),30,"bondofdeath"),Qa("spellDoneHeal");var e=bL;zy.drawMyMp(-oH);var a=!1;Yy.talent3>=20&&(a=!0);for(var n=0;n<=4;n++)Wy[n].name&&n>=e-1&&n<=e+1&&(n!==e&&!0!==a||(Ru(n,"yellow",150,0,10,100,pS.cout),fa(Wy[n].name+"'s life force drains away.",3),Wy[n].bondOfDeathTickCount=1,rH=yc(.166*Qe(),.9),Wy[n].bondOfDeathTick=rH,jf(n),Li("Bond of Death",n,"bondOfDeathIcon",6e4,-352)));1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#asystole",function(){var e=Ft(.466*Qe(),.9,"poison","Asystole"),a="8%".fontcolor("#00ff00"),n="24%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Asystole",NG.tooltipmsg.innerHTML="Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Conjuration<br><br>Asystole ticks for "+e[0]+" to "+e[1]+" poison damage every second for 30 seconds.<br><br>Effect: Debuffs your target's physical damage by "+a+" and increases their physical damage received by "+n+"."})}),zy.asystoleFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal");var e=bL;Ru(e,"green",250,0,10,50,pS.Bout),rH=yc(.466*Qe(),.9);zy.drawMyMp(),fa(Wy[e].name+" clutches their chest.",3);var a=Yy.level;a>50&&(a=50),!1===Wy[e].asystoleStatus&&(Wy[e].asystoleStatus=!0),Wy[e].asystoleTickCount=1,Wy[e].asystoleTick=rH,Wy[e].asystoleTickInterval.kill(),Wy[e].asystoleTickInterval=cS.to("",1,{repeat:-1,onRepeat:function(){!function(e,a){if(""===Wy[e].name)return Wy[e].asystoleTickInterval.kill(),Wy[e].asystoleTickCount=0,void(Wy[e].asystoleStatus=!1);zy.myDotDamage(Wy[e].asystoleTick,e,a,"Asystole"),Wy[e].asystoleTickCount+=1,31===Wy[e].asystoleTickCount&&(Wy[e].asystoleTickInterval.kill(),Wy[e].asystoleTickCount=0)}(e,"poison")}});Li("Asystole",e,"asystoleIcon",3e4,-416),1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#detonatesoul",function(){var e="30".fontcolor("#ff0000"),a=Rt(3*Re()*(1+7.8*ta()/100),.85,"magic","Detonate Soul");NG.tooltipname.innerHTML="Detonate Soul";var n="Cost: "+Q(xH.cost.detonateSoul)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Detonate Soul hits your target after 5 seconds for "+a[0]+" to "+a[1]+" arcane damage.<br><br>Effect: If you kill the mob before it detonates, you will harvest mana from your target's spirit.";Yy.talent8>=20&&(n+="<BR><BR>Detonate Soul chills all targets for 9 seconds."),NG.tooltipmsg.innerHTML=n})}),zy.detonateSoulFinish=function(){if(!1!==Lb()){Qa("confuse");var e=bL,a=Wy[e].ID;"High"===kw.videoSetting&&Of(e,a),qi("detonatesoul",!0),Ei("detonatesoul","-1400% -100%"),cS.delayedCall(30,Kf),jy(mS.getElementById("detonatesoul"),30,"detonatesoul"),zy.drawMyMp(-oH);var n=yc(3*Re()*(1+7.8*ta()/100),.85);mB=!0,fa("A pulsing charge is affixed to "+Wy[e].name+"'s soul.",3),cB.kill(),cB=cS.delayedCall(5,function(){!function(e){if(Wy[e].ID===a&&Wy[e].name){if(Qa("corpseexplodecast"),Yy.talent8>=20)for(var t=0;t<=4;t++)Wy[t].name&&hu(t,9e3,-448);zy.myMagicDamage("magic",n,e,ee(),"Detonate Soul")}mB=!1}(e)}),Li("Detonate Soul",e,"detonateSoulIcon",5e3,-448)}},e(function(){$NG.window3.on("mouseenter","#howlingterror",function(){var e="90".fontcolor("#ff0000"),a=Ft(Qe()*(1+.27*Ze())/20,.8,"cold","Chill of Death");NG.tooltipname.innerHTML="Howling Terror";var n="Cost: "+Q(xH.cost.howlingTerror)+" Mana Points<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Howling Terror fears all targets for a random duration.";Yy.talent4>0&&(n+="<BR><BR>Chill of Death hits all feared targets for "+a[0]+" to "+a[1]+" cold damage every second."),NG.tooltipmsg.innerHTML=n})}),e(function(){$NG.window3.on("mouseenter","#chaosflux",function(){var e=Rt(3+2.1*Re(),.8,"magic","Chaos Flux");NG.tooltipname.innerHTML="Chaos Flux",NG.tooltipmsg.innerHTML="Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Evocation<br><br>Chaos Flux hits your target for "+e[0]+" to "+e[1]+" arcane damage.<br><br>Effect: Interrupts your target's spell. There is a 25% chance that your target will be launched into the air and take falling damage upon landing."})}),zy.chaosFluxFinish=function(){if(!1!==Lb()){Qa("spellDoneFlames");var e=bL;Yc(e);var a=yc(3+2.1*Re(),.8);dS.random()>.75&&(Wy[e].fallingStatus=!0,Ch(e),cS.delayedCall(1.4,function(){var a=Wy[e];xb(3===a.rare?dS.round(.025*a.maxHp):1===a.rare?dS.round(.1*a.maxHp):dS.round(.066*a.maxHp),e),cS.delayedCall(1.4,function(){Wy[e].fallingStatus=!1})}),Li("Gravity Flux",e,"fallingIcon",1400,-96));zy.myMagicDamage("magic",a,e,ee(),"Chaos Flux"),Ht(e)}},e(function(){$NG.window3.on("mouseenter","#gaspingembrace",function(){"5".fontcolor("#ff0000");var e=Ft(1+.355*Fe(),.9,"magic","Gasping Embrace"),a="your target";Yy.talent9>=20&&(a="all targets"),NG.tooltipname.innerHTML="Gasping Embrace",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.gaspingEmbrace)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Conjuration<br><br>Gasping Embrace hits "+a+" and ticks for "+e[0]+" to "+e[1]+" arcane damage every second for 21 seconds.<br><br>Effect: Debuffs your target's strength by "+Q("12%")+"."})}),zy.gaspingEmbraceFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),zy.drawMyMp(-oH);var e=bL,a=!1;Yy.talent9>=20&&(a=!0);for(var n=0;n<=4;n++)Wy[n].name&&n>=e-1&&n<=e+1&&(n!==e&&!0!==a||!1===Wy[n].charmStatus&&(Ru(n,"magenta",250),rH=yc(1+.355*Fe(),.9),fa(Wy[n].name+" feels a shortness of breath.",3),Wy[n].gaspingEmbraceStatus=!0,Wy[n].gaspingEmbraceTickCount=1,Wy[n].gaspingEmbraceTick=rH,Jf(n,"magic"),Li("Gasping Embrace",n,"gaspingEmbraceIcon",21e3,-128)));1===Wy[bL].attackStatus&&hi(!0)}},e(function(){$NG.window3.on("mouseenter","#cajolingwhispers",function(){var e="5".fontcolor("#ff0000");NG.tooltipname.innerHTML="Cajoling Whispers",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.cajolingWhispers)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Cajoling Whispers charms your target to fight by your side. Charmed mobs can be released by clicking the mob's charm icon."})}),zy.cajolingWhispersFinish=function(){if(!1!==Lb()){1===Wy[bL].attackStatus&&hi(!0),Qa("spellDoneBuff");var a=bL;if("High"===kw.videoSetting&&function(e){function a(e){var o=150*dS.random()-75,r=60*dS.random()-30,l=ry(i,5,n+o,t+r);cS.to(l,1,{y:"+=100",alpha:0,ease:pS.Qin}),++e<8&&cS.delayedCall(.05,function(){a(e)})}var n=Gw[e].offsetLeft+Wy[e].cX-25,t=Gw[e].offsetTop+Wy[e].cY-25,i=ly("heart",50,50);a(0)}(a),qi("cajolingwhispers",!0),Ei("cajolingwhispers","-500% -100%"),cS.delayedCall(5,eh),jy(mS.getElementById("cajolingwhispers"),5,"cajolingwhispers"),iH="Cajoling Whispers",zy.drawMyMp(-oH),!0===ac(a)||3===Wy[a].rare)fa(Wy[a].name+" resisted "+iH+".",1);else{if(fa(Wy[a].name+" has been charmed.",3),Ht(a),Wy[a].charmStatus=!0,hT=a,qD=Wy[hT].name,e("#pethpbardiv").css("display","block"),0===e("#petBarName").length){var n=e('<div id="petBarName">').html(Wy[hT].level+" - "+qD);e("#pethpbardiv").append(n)}else e("#petBarName").html(Wy[hT].level+" - "+qD);zy.drawMyHp();var t=de()-60;t<10&&(t=10);var i=(2e4+dS.random()*(100*Fe())+dS.random()*(600*t)+1500*t)*nc(a);i+=1e3*zy.alterationEquip,Wy[a].level>Yy.level&&(i-=dS.pow(Wy[a].level-Yy.level,2.2)),i<=8e3&&(i=8e3),Yy.talent8<20?(Dk.kill(),Dk=cS.delayedCall(i/1e3,nh)):i=0,Li("Charmed",a,"charmIcon",i,-160)}}},e(".mobIcons").on("click","#charmIcon0,#charmIcon1,#charmIcon2,#charmIcon3,#charmIcon4",function(){"Enchanter"===Yy.job&&nh(bL),"Bard"===Yy.job&&jc(bL)}),e(function(){$NG.window3.on("mouseenter","#colorshift",function(){var e="20".fontcolor("#ff0000"),a=Rt(Qe()*(1+8.7*Ue()/100),.87,"magic","Color Shift");NG.tooltipname.innerHTML="Color Shift";var n="Cost: "+Q(EH.cost.colorShift)+" Mana Points<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Color Shift stuns all target for 6 seconds.";Yy.talent2>=1&&(n+="<BR><BR>Color Shift hits all targets for "+a[0]+" to "+a[1]+" arcane damage."),Yy.talent2>=20&&(n+="<BR><BR>Effect: Color Shift has a "+Q("35%")+" chance of Whirl Till You Hurl, which stuns your target for an additional "+Q("3.6")+" seconds."),NG.tooltipmsg.innerHTML=n})}),e(function(){$NG.window3.on("mouseenter","#mesmerize",function(){var e="6".fontcolor("#ff0000"),a=Rt(Qe()*(18.5*oa()/100),.85,"magic","Jubilee");if(0===Yy.talent10)var n="Mesmerize your target for a random duration. Mesmerized targets will not attack until you attack them.",t="Mesmerize";else var n="Jubilee hits three targets for "+a[0]+" to "+a[1]+" arcane damage.",t="Jubilee";NG.tooltipname.innerHTML=t;var i="Cost: "+Q(EH.cost.mesmerize)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>";i+=n,NG.tooltipmsg.innerHTML=i})}),zy.mesmerizeFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),qi("mesmerize",!0),Ei("mesmerize","-700% -100%"),cS.delayedCall(6,lh),jy(mS.getElementById("mesmerize"),6,"mesmerize");var e=bL;if(Yy.talent10<1){if(!0===ac(e)||3===Wy[e].rare)return void fa(Wy[e].name+" resisted "+iH+".",1);0===zy.autoAttackStatus&&Si(),dh(e),fa(Wy[e].name+" has been mesmerized.",3);n=(5e3+450*(de()-70)+dS.random()*(100*de()))*nc(e);n+=500*zy.conjurationEquip,Wy[e].level>Yy.level&&(n-=dS.pow(Wy[e].level-Yy.level,1.2)),n<15e3&&(n=15e3),n>75e3&&(n=75e3),yr(e,n,"Mesmerized",-224)}else for(var a=0;a<=4;a++)if(Wy[a].name&&a>=e-1&&a<=e+1){!function(e,a,n){function t(r){var l=Gw[e].offsetLeft+Wy[e].imageWidth/2+200*dS.random()-100-a/2,s=o+dS.random()*Wy[e].cY+10,d=sy(n+"particle50",5,l,s,25,25),c=1.5*dS.random()+.5;d.image.onload=function(){cS.to(d,c,{x:l+i,scaleX:.1,scaleY:.1,onComplete:function(){oy(5,d)}}),cS.to(d,c,{y:"+="+(dS.random()*(2.5*Wy[e].cY)+a),ease:pS.Qin})},r<=60&&t(++r)}if("High"===kw.videoSetting){a||(a=50);var i=(a-3)/2;n||(n="white");var o=Gw[e].offsetTop-a/2;t(0)}}(a),fa(Wy[a].name+" is blasted by a jubilee of light.",3);var n=2500*nc(a),t=yc(Qe()*(18.5*oa()/100),.85);zy.myMagicDamage("magic",t,a,ee(),"Jubilee"),""!==Wy[a].name&&yr(a,n,"Mesmerized",-224)}}},e(function(){$NG.window3.on("mouseenter","#discordantbarrier",function(){var e="54".fontcolor("#00ff00"),a=Ne(),n=Je(),t=(dS.ceil(.18*a*(6.8*n/100+1))+"").fontcolor("#00ff00"),i=(dS.ceil(.4*a*(8.3*n/100+1))+"").fontcolor("#00ff00"),o=(dS.ceil(.3*a)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Discordant Barrier",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.discordantBarrier)+" Mana Points<br>Cast Time: "+ld(4e3)+" Seconds<br>Spell Type: Abjuration<br><br>Discordant Barrier buffs your armor by "+t+", your hit points by "+i+", and your magic resistance by "+o+" for "+e+" minutes."})}),zy.discordantBarrierFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You are encased by a translucent shield.",3),!0===fB&&(Zy-=hB,nk-=gB,ok-=pB),bB.kill(),bB=cS.delayedCall(3240,mh);var e=Ne(),a=Je();gB=dS.ceil(.18*e*(6.8*a/100+1)),hB=dS.ceil(.4*e*(8.3*a/100+1)),pB=dS.ceil(.3*e),Zy+=hB,nk+=gB,ok+=pB,fB=!0,zy.drawMyHp(),ny();UB.kill(),UB=cS.delayedCall(3240,function(){wi("hpbuffIcon")}),Bi("Discordant Barrier","hpbuffIcon",324e4,-448),Au("teal","easeInBack",5,25,120,4)}},e(function(){$NG.window3.on("mouseenter","#shiftlessdeeds",function(){var e="15".fontcolor("#ff0000"),a="your target's";Yy.talent6>=20&&(a="three targets");var n=Ft(Qe()/3.7*(aa()/24),.9,"cold","Shiftless Frost");NG.tooltipname.innerHTML="Shiftless Deeds";var t="Cost: "+Q(EH.cost.shiftlessDeeds)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Shiftless Deeds slows "+a+"' attack speed by 1.5 seconds for 2 minutes.";Yy.talent6>=1&&(t+="<BR><BR>Shiftless Frost hits "+a+" and ticks for "+n[0]+" to "+n[1]+" cold damage every second for 35 seconds."),NG.tooltipmsg.innerHTML=t})}),zy.shiftlessDeedsFinish=function(){if(!1!==Lb()){1===Wy[bL].attackStatus&&hi(!0),Qa("spellDoneHeal");var e=bL;if(qi("shiftlessdeeds",!0),Ei("shiftlessdeeds","-800% -100%"),cS.delayedCall(15,fh),jy(mS.getElementById("shiftlessdeeds"),15,"shiftlessdeeds"),zy.drawMyMp(-oH),!0===ac(e))fa(Wy[e].name+" resisted "+iH+".",1);else{var a=!1;Yy.talent6>=20&&(a=!0);for(var n=0;n<=4;n++)if(Wy[n].name&&n>=e-1&&n<=e+1&&(n===e||!0===a)&&!1===Wy[n].charmStatus&&(Ru(n,"white",250,60,50,100,pS.Qinout),gh(n),Yy.talent6>=1)){Qu(n,yc(dS.ceil(Qe()/3.7*(aa()/24)),.9),35,1e3,"cold","Shiftless Frost","shiftlessFrost",-256,-32,!0)}}}},e(function(){$NG.window3.on("mouseenter","#enchantweapon",function(){var e="30".fontcolor("#00ff00"),a=Rt(dS.ceil(Fe()/2.4*(1+6.2*na()/100)),.85,"magic","Enchant Weapon");NG.tooltipname.innerHTML="Enchant Weapon";var n="Cost: "+Q(EH.cost.enchantWeapon)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Conjuration<br><br>Enchant Weapon enchants your weapon with "+a[0]+" to "+a[1]+" arcane damage for "+e+" minutes.";if(Yy.talent7>=20){n+="<BR><BR>A second random type of magical attack hits your target:";var t=Rt(dS.ceil(Fe()/2.8*(1+6.2*na()/100)),.8,"poison","Enchant Weapon");n+="<br>"+t[0]+" to "+t[1]+" poison damage";var i=Rt(dS.ceil(Fe()/2*(1+6.2*na()/100)),.25,"lightning","Enchant Weapon");n+="<br>"+i[0]+" to "+i[1]+" lightning damage";var o=Rt(dS.ceil(Fe()/3.3*(1+6.2*na()/100)),.9,"cold","Enchant Weapon");n+="<br>"+o[0]+" to "+o[1]+" cold damage";var r=Rt(dS.ceil(Fe()/2.5*(1+6.2*na()/100)),.6,"fire","Enchant Weapon");n+="<br>"+r[0]+" to "+r[1]+" fire damage"}NG.tooltipmsg.innerHTML=n})}),zy.enchantWeaponFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),Au("teal","easeInBack",5,25,150,3),zy.drawMyMp(-oH),fa("Your weapon shimmers with fluxing strands of chaos.",3),vB=!0,yB.kill(),yB=cS.delayedCall(1800,bh);var e="enchantWeaponIcon";cD.kill(),cD=cS.delayedCall(1800,function(){wi(e)}),Bi("Enchant Weapon",e,18e5,-480)}},e(function(){$NG.window3.on("mouseenter","#adorninggrace",function(){var e="24".fontcolor("#00ff00"),a=Ne(),n=(dS.ceil(.2*a)+"").fontcolor("#00ff00"),t=(dS.ceil(.08*a)+"").fontcolor("#00ff00"),i=(dS.ceil(.08*a)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Adorning Grace",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.adorningGrace)+" Mana Points<br>Cast Time: "+ld(3500)+" Seconds<br>Spell Type: Abjuration<br><br>Adorning Grace buffs your wisdom by "+n+", your intelligence by "+t+", and your charisma by "+i+" for "+e+" minutes."})}),zy.adorningGraceFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You are adorned by an aura of radiant grace.",3),!0===wB&&(Jy-=kB,Vy-=SB,_y-=IB),CB.kill(),CB=cS.delayedCall(1440,yh);var e=Ne();kB=dS.ceil(.08*e),SB=dS.ceil(.08*e),IB=dS.ceil(.2*e),Jy+=kB,Vy+=SB,_y+=IB,wB=!0,ny();var a="adorningGraceIcon";mD.kill(),mD=cS.delayedCall(1440,function(){wi(a)}),Bi("Adorning Grace",a,144e4,-512),Au("purple","easeInBack",5,25,120,3)}},e(function(){$NG.window3.on("mouseenter","#alacrity",function(){var e="40%".fontcolor("#00ff00"),a="5".fontcolor("#00ff00");NG.tooltipname.innerHTML="Alacrity",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.alacrity)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Alteration<br><br>Alacrity creates an aura that buffs your haste by "+e+" for "+a+" minutes. This aura automatically affects charmed allies."})}),zy.alacrityFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH);fa("You feel much faster.",3),fI.kill(),fI=cS.delayedCall(300,function(){uB=!1,ny()}),uB=!0,Bi("Alacrity","hasteIcon",3e5,-288),Au("teal","easeInQuad",25,11,120,2),ny()}},e(function(){$NG.window3.on("mouseenter","#gravityflux",function(){var e="20".fontcolor("#ff0000");Yy.talent11>=20&&(e=Q("12"));var a=Rt(2.7*Re(),.85,"magic","Gravity Flux");NG.tooltipname.innerHTML="Gravity Flux",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.gravityFlux)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Gravity Flux hits all targets for "+a[0]+" to "+a[1]+" arcane damage. All targets are launched up in the air and take falling damage upon landing.<br><br>Effect: Interrupts all targets' spells."})}),zy.gravityFluxFinish=function(){if(!1!==Lb()){Qa("spellDoneFlames"),qi("gravityflux",!0),Ei("gravityflux","-1000% -100%");var e=2e4;Yy.talent11>=20&&(e=12e3),cS.delayedCall(e/1e3,Ih),jy(mS.getElementById("gravityflux"),e/1e3,"gravityflux"),zy.drawMyMp(-oH);for(var a=0;a<=4;a++)if(""!==Wy[a].name&&!1===Wy[a].charmStatus){var n=yc(2.7*Re(),.85);Yc(a),zy.myMagicDamage("magic",n,a,ee(),"Gravity Flux"),Ht(a),Wy[a].fallingStatus=!0,Ch(a),Li("Gravity Flux",a,"stunIcon",1400,-320),Mh(a)}}},e(function(){$NG.window3.on("mouseenter","#mysticrune",function(){var e=40;sS.Satyr>=6&&(e-=10);var a=(dS.ceil(1.1*Ne()*(1+2.1*Ze()/100))+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Mystic Rune",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.mysticRune)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Abjuration<br>Cooldown: "+Q(e)+" Seconds<br><br>Mystic Rune surrounds you and absorbs "+a+" damage until it is depleted."})}),zy.mysticRuneFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),qi("mysticrune",!0),Ei("mysticrune","-1100% -100%");var e=4e4;sS.Satyr>=6&&(e-=1e4),cS.delayedCall(e/1e3,Bh),jy(mS.getElementById("mysticrune"),e/1e3,"mysticrune"),fa("A dark shimmer of runes surrounds you.",3),zy.drawMyMp(-oH),xT=dS.ceil(1.1*Ne()*(1+2.1*Ze()/100));wi("shieldHpIcon"),Bi("Mystic Rune","shieldHpIcon",0,-352),"High"===kw.videoSetting&&function(){mv("#08f",.3,2);var e=sy("mysticRune",5,440,297,400,400,!0);e.image.onload=function(){cS.to(e,3,{y:720,alpha:0,rotation:1440,onComplete:function(){oy(5,e)}})},Lh()}()}},e(function(){$NG.window3.on("mouseenter","#tashania",function(){var e="8".fontcolor("#00ff00"),a=(dS.round(Ne()/20)+"%").fontcolor("#00ff00"),n=Ft(Ne()/2.1*(la()/24),.9,"magic","Tashania's Bark");NG.tooltipname.innerHTML="Tashania";var t="Cost: "+Q(EH.cost.tashania)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Abjuration<br>Cooldown: "+e+" Seconds<br><br>Tashania increases arcane damage on all targets' by "+a+".";Yy.talent12>=20&&(t+="<BR><BR>Tashania's Bark hits all targets and ticks for "+n[0]+" to "+n[1]+" arcane damage over "+Q("20")+" seconds. Tashania's Bark can stack multiple times."),NG.tooltipmsg.innerHTML=t})}),zy.tashaniaFinish=function(){if(!1!==Lb()){1===Wy[bL].attackStatus&&hi(!0),qi("tashania",!0),Ei("tashania","-1200% -100%"),cS.delayedCall(8,Ah),jy(mS.getElementById("tashania"),8,"tashania"),Qa("spellDoneHeal"),zy.drawMyMp(-oH);for(var e=0;e<=4;e++)if(""!==Wy[e].name&&(Wy[e].tashaniaStatus=!0,fa(Wy[e].name+" hears the barking of Tashania.",3),Li("Tashania",e,"tashaniaIcon",0,-384),Yy.talent12>=1)){Qu(e,yc(Ne()/2.1*(la()/24),.9),20,1e3,"magic","Tashania's Bark","tashaniasBark",-384,-32,!0)}Eo("orange")}},e(function(){$NG.window3.on("mouseenter","#clarity",function(){var e="30".fontcolor("#00ff00");NG.tooltipname.innerHTML="Clarity",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.clarity)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Alteration<br><br>Clarity buffs your mana regeneration for "+e+" minutes."})}),zy.clarityFinish=function(){if(!1!==Lb()){fa("A cool breeze slips through your mind.",3),zy.drawMyMp(-oH),MB.kill(),MB=cS.delayedCall(1800,function(){TB=!1}),TB=!0;uD.kill(),uD=cS.delayedCall(1800,function(){wi("clarityIcon")}),Bi("Clarity","clarityIcon",18e5,-544),Au("blue","easeInBack",5,25,100,6)}},e(function(){$NG.window3.on("mouseenter","#enthrall",function(){var e="25".fontcolor("#ff0000");NG.tooltipname.innerHTML="Enthrall",NG.tooltipmsg.innerHTML="Cost: "+Q(EH.cost.enthrall)+" Mana Points<br>Cast Time: "+ld(1500)+" Seconds<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Enthrall mesmerizes all targets for a random duration. Mesmerized targets will not attack until you attack them."})}),zy.enthrallFinish=function(){if(!1!==Lb()){0===zy.autoAttackStatus&&Si(),Qa("spellDoneBuff"),qi("enthrall",!0),Ei("enthrall","-1300% -100%"),cS.delayedCall(25,qh),jy(mS.getElementById("enthrall"),25,"enthrall"),zy.drawMyMp(-oH);for(var e=0;e<=4;e++)if(""!==Wy[e].name&&!1===Wy[e].charmStatus){if(!0===ac(e)||3===Wy[e].rare){fa(Wy[e].name+" resisted "+iH+".",1);continue}fa(Wy[e].name+" has been enthralled.",3);var a=(380*(de()-70)+dS.random()*(70*de())+2500)*nc(e);a+=600*zy.conjurationEquip,Wy[e].level>Yy.level&&(a-=dS.pow(Wy[e].level-Yy.level,1.2)),a<11e3&&(a=11e3),a>55e3&&(a=55e3),!Wy[e].phased&&Wy[e].name&&(Gw[e].style.opacity=1),yr(e,a,"Mesmerized",-416),dh(e)}}},e(function(){$NG.window3.on("mouseenter","#lavabolt",function(){var e=Rt(3+2.3*Fe(),.8,"fire","Lava Bolt");NG.tooltipname.innerHTML="Lava Bolt",NG.tooltipmsg.innerHTML="Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Conjuration<br><br>Lava Bolt hits your target for "+e[0]+" to "+e[1]+" fire damage."})}),zy.lavaBoltFinish=function(){if(!1!==Lb()){Qa("spellDoneBoom");var e=bL;"High"===kw.videoSetting&&function(e){var a=sy("lavaBolt",5,Gw[e].offsetLeft+Wy[e].cX-100,Gw[e].offsetTop+Wy[e].cY-100,200,200,!0);a.image.onload=function(){cS.to(a,.8,{scaleX:2,scaleY:2,alpha:0,onComplete:function(){oy(5,a)}})},Gt(e,"orange","blank")}(e);var a=yc(3+2.3*Fe(),.8);zy.myMagicDamage("fire",a,e,ee(),"Lava Bolt"),Yy.talent5>=20&&""===qD&&("a fire elemental"===QD?zy.fireElementalFinish(!0):"an earth elemental"===QD?zy.earthElementalFinish(!0):"an air elemental"===QD?zy.airElementalFinish(!0):"a frost elemental"===QD&&zy.frostElementalFinish(!0),BS=bL,Ii())}},e(function(){$NG.window3.on("mouseenter","#earthelemental",function(){NG.tooltipname.innerHTML="Earth Elemental",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.elemental)+" Mana Points<br>Cast Time: "+ld(6e3)+" Seconds<br>Spell Type: Conjuration<br><br>Summon an Earth Elemental to fight by your side. Earth Elementals have high health, good resistance against all elements, strong lightning resistance, strong defense, and cast snare."})}),zy.earthElementalFinish=function(a){if(!a){if(!1===Lb())return;sH=1,zy.drawMyMp(-oH)}Qa("elem_att3"),fa(Yy.name+" summons an Earth Elemental.",3),RD=1+~~(Yy.level/1.2),lL=300+dS.ceil(RD/3),sL=1.156*lL,QD=PD="an earth elemental",FD=dS.ceil((50+55*RD)*(1+.131*ea())),ND=FD,bb(),jD=dS.ceil(2*RD),zD=dS.ceil(3*RD),YD=150,KD=150,WD=300,OD=150,XD=150,_D="snare",$D="snare",UD="snare",JD="snare",ZD=5,zy.petAlive=!0,VD=3e3,GD=1,e("#pethpbardiv").css("display","block"),Ei("earthelemental","-200% -100%"),zy.drawMyHp();var n=190+(290-lL)/2;$NG.petImage.attr("src","/classic/images1/an earth elemental.png").width(lL+"px"),$NG.mob5.stop(!0,!0).height(sL).width(lL+"px").css({left:n,bottom:60,opacity:1,display:"block"});var t=e("#petName").width(),i=lL/2-t/2;e("#petName").css("left",i)},e(function(){$NG.window3.on("mouseenter","#airelemental",function(){NG.tooltipname.innerHTML="Air Elemental",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.elemental)+" Mana Points<br>Cast Time: "+ld(6e3)+" Seconds<br>Spell Type: Conjuration<br><br>Summon an Air Elemental to fight by your side. Air Elementals have medium health, good magic and lightning resistance, strong offense, increased attack speed, and bash their targets."})}),zy.airElementalFinish=function(a){if(!a){if(!1===Lb())return;sH=1,zy.drawMyMp(-oH)}Qa("elem_att3"),fa(Yy.name+" summons an Air Elemental.",3),RD=1+~~(Yy.level/1.2),lL=300+dS.ceil(RD/3),sL=1.13*lL,QD=PD="an air elemental",FD=dS.ceil((50+45*RD)*(1+.131*ea())),ND=FD,bb(),jD=dS.ceil(3*RD),zD=dS.ceil(2*RD),YD=100,KD=200,WD=200,OD=100,XD=100,_D="bash",$D="bash",UD="bash",JD="bash",ZD=9,zy.petAlive=!0,VD=2400,GD=1,e("#pethpbardiv").css("display","block"),Ei("airelemental","-200% -100%"),zy.drawMyHp();var n=190+(290-lL)/2;$NG.petImage.attr("src","/classic/images1/an air elemental.png").width(lL+"px"),$NG.mob5.stop(!0,!0).height(sL).width(lL+"px").css({left:n,bottom:60,opacity:1,display:"block"});var t=e("#petName").width(),i=lL/2-t/2;e("#petName").css("left",i)},e(function(){$NG.window3.on("mouseenter","#fireelemental",function(){NG.tooltipname.innerHTML="Fire Elemental",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.elemental)+" Mana Points<br>Cast Time: "+ld(6e3)+" Seconds<br>Spell Type: Conjuration<br><br>Summon an Fire Elemental to fight by your side. Fire Elementals have weak health, strong offense, strong fire resistance, increased attack speed, and cast burst of flame. They are covered in a shield of flames which reflects fire damage when physically attacked."})}),zy.fireElementalFinish=function(a){if(!a){if(!1===Lb())return;sH=1,zy.drawMyMp(-oH)}Qa("elem_att3"),fa(Yy.name+" summons a Fire Elemental.",3),RD=1+~~(Yy.level/1.2),lL=300+dS.ceil(RD/3),sL=1.12*lL,QD=PD="a fire elemental",FD=dS.ceil((50+35*RD)*(1+.131*ea())),ND=FD,bb(),jD=dS.ceil(3*RD),zD=dS.ceil(2*RD),YD=100,KD=100,WD=100,OD=300,XD=50,_D="burstofflame",$D="burstofflame",UD="burstofflame",JD="burstofflame",ZD=7,zy.petAlive=!0,VD=2200,GD=1,e("#pethpbardiv").css("display","block"),Ei("fireelemental","-200% -100%"),zy.drawMyHp();var n=190+(290-lL)/2;$NG.petImage.attr("src","/classic/images1/a fire elemental.png").width(lL+"px"),$NG.mob5.stop(!0,!0).height(sL).width(lL+"px").css({left:n,bottom:60,opacity:1,display:"block"});var t=e("#petName").width(),i=lL/2-t/2;e("#petName").css("left",i)},e(function(){$NG.window3.on("mouseenter","#frostelemental",function(){var e="6".fontcolor("#00ff00");NG.tooltipname.innerHTML="Frost Elemental",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.elemental)+" Mana Points<br>Cast Time: "+e+" Seconds<br>Spell Type: Conjuration<br><br>Summon an Frost Elemental to fight by your side. Frost Elementals have strong health, strong cold resistance, strong defense, and cast freeze."})}),zy.frostElementalFinish=function(a){if(!a){if(!1===Lb())return;sH=1,zy.drawMyMp(-oH)}Qa("elem_att3"),fa(Yy.name+" summons a Frost Elemental.",3),RD=1+~~(Yy.level/1.2),lL=300+dS.ceil(RD/3),sL=1.2594*lL,QD=PD="a frost elemental",FD=dS.ceil((50+55*RD)*(1+.131*ea())),ND=FD,bb(),jD=dS.ceil(2*RD),zD=dS.ceil(3*RD),YD=100,KD=100,WD=100,OD=50,XD=300,_D="freeze",$D="freeze",UD="freeze",JD="freeze",ZD=9,zy.petAlive=!0,VD=3e3,GD=1,e("#pethpbardiv").css("display","block"),Ei("frostelemental","-200% -100%"),zy.drawMyHp();var n=190+(290-lL)/2;$NG.petImage.attr("src","/classic/images1/a frost elemental.png").width(lL+"px"),$NG.mob5.stop(!0,!0).height(sL).width(lL+"px").css({left:n,bottom:60,opacity:1,display:"block"});var t=e("#petName").width(),i=lL/2-t/2;e("#petName").css("left",i)},e(function(){$NG.window3.on("mouseenter","#shieldoflava",function(){var e="15".fontcolor("#00ff00"),a=(dS.ceil(.18*Ne())+"").fontcolor("#00ff00"),n=Rt(Ne()/2.6,.8,"fire","Magma Burst");NG.tooltipname.innerHTML="Shield of Lava";var t="Cost: "+Q(GH.cost.shieldOfLava)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Abjuration<br><br>You are surrounded by a Shield of Lava, which reflects "+a+" fire damage every time you are physically attacked for "+e+" minutes.";Yy.talent2>=20&&(t+="<BR><BR>While Shield of Lava is active, Magma Burst hits all targets for "+n[0]+" to "+n[1]+" fire damage every "+Q("4.2")+" seconds."),NG.tooltipmsg.innerHTML=t})}),zy.shieldOfLavaFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You are enveloped by lava.",3),BB=!0,WC.kill(),WC=cS.delayedCall(900,Yh);var e="damageShieldIcon";sD.kill(),sD=cS.delayedCall(900,function(){wi(e)}),Bi("Shield of Lava",e,9e5,-448),Au("red","easeInBack",15,5,120,3)}},e(function(){$NG.window3.on("mouseenter","#firestorm",function(){var e="15".fontcolor("#ff0000"),a=Rt(.7*Re(),.7,"fire","Firestorm"),n=3+dS.ceil(Re()/40);Yy.talent3>=20&&(n=dS.round(2*n)),n=Q(n),NG.tooltipname.innerHTML="Firestorm",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.firestorm)+" Mana Points<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Firestorm hits your primary target and hits random targets up to "+n+" additional times for "+a[0]+" to "+a[1]+" fire damage."})}),e(function(){$NG.window3.on("mouseenter","#phantomplate",function(){var e="54".fontcolor("#00ff00"),a=(dS.ceil(.66*Ne()*(1+9.7*ia()/100))+"").fontcolor("#00ff00"),n=(dS.ceil(.12*Ne()*(1+11.1*ia()/100))+"").fontcolor("#00ff00"),t=(dS.ceil(Yy.level/10)+2+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Phantom Plate",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.phantomPlate)+" Mana Points<br>Cast Time: "+ld(3500)+" Seconds<br>Spell Type: Abjuration<br><br>Phantom Plate buffs your armor by "+n+", your health by "+a+", and your health regeneration by "+t+" for "+e+" minutes."})}),zy.phantomPlateFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You are covered in illusionary armor.",3),!0===DB&&(Zy-=LB,nk-=HB),AB.kill(),AB=cS.delayedCall(3240,_h),HB=dS.ceil(.12*Ne()*(1+11.1*ia()/100)),LB=dS.ceil(.66*Ne()*(1+9.7*ia()/100)),Zy+=LB,nk+=HB,DB=!0,zy.drawMyHp(),ny();UB.kill(),UB=cS.delayedCall(3240,function(){wi("hpbuffIcon")}),Bi("Phantom Plate","hpbuffIcon",324e4,-480),Au("green","easeInBack",5,25,120,4),U()}},e(function(){$NG.window3.on("mouseenter","#frozenorb",function(){var e="16".fontcolor("#ff0000"),a=Rt(.2*Re(),.87,"cold","Frozen Orb"),n="33%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Frozen Orb";var t="Cost: "+Q(GH.cost.frozenOrb)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Frozen Orb hits all targets "+Q("10")+" times for "+a[0]+" to "+a[1]+" cold damage. Adjacent targets take diminished damage based on distance.";t+="<BR><BR>Effect: All targets' attack speed is reduced by "+n+".",Yy.talent10>=20&&(t+="<BR><BR>Effect: All targets are frozen for "+Q("3")+" seconds."),NG.tooltipmsg.innerHTML=t})}),zy.frozenOrbFinish=function(){function e(e,a){return a-1!==n&&a+1!==n||(e=dS.ceil(.8*e)),a-2!==n&&a+2!==n||(e=dS.ceil(.6*e)),a-3!==n&&a+3!==n||(e=dS.ceil(.4*e)),a-4!==n&&a+4!==n||(e=dS.ceil(.2*e)),e}function a(){if(10!==t){Qa("icespike"+~~(3*dS.random()+1));for(var n=0;n<=4;n++)if(""!==Wy[n].name){var i=yc(.2*Re(),.87);i=e(i,n),hu(n,6e3,-160),zy.myMagicDamage("cold",i,n,ee(),"Frozen Orb")}t++,cS.delayedCall(.1,a)}}if(!1!==Lb()){qi("frozenorb",!0),Ei("frozenorb","-500% -100%"),cS.delayedCall(16,Uh),jy(mS.getElementById("frozenorb"),16,"frozenorb"),zy.drawMyMp(-oH);var n=bL,t=0;if(Yy.talent10>=20)for(var i=0;i<=4;i++)Wy[i].name&&ip(i,3e3,-160);a(),"High"===kw.videoSetting&&function(e){function a(e){x2=1330*dS.random()-25,y2=125*dS.random()+550,y3=13*e;var n=ry(t,5,628,y3);cS.to(n,1.5,{x:x2,scaleX:.2,scaleY:.2,onComplete:function(){oy(5,n)}}),cS.to(n,1.5,{y:y2,ease:pS.bout}),e<40&&cS.delayedCall(.01,function(){a(++e)})}var n=sy("frozenOrb",5,Gw[e].offsetLeft+Wy[e].cX-320,-640,640,640,!0);n.image.onload=function(){cS.to(n,.75,{y:470,onComplete:function(){cS.to(n,1,{y:540,alpha:0,ease:pS.lin})}}),cS.to(n,2,{rotation:-1800,ease:pS.cin,onComplete:function(){oy(5,n)}})};var t=ly("tealparticle50");a(0)}(n)}},e(function(){$NG.window3.on("mouseenter","#burnout",function(){var e="35".fontcolor("#ff0000"),a="60%".fontcolor("#00ff00"),n="25".fontcolor("#00ff00"),t=dS.ceil(5.2*Fe()+dS.random()*(Yy.level/6));NG.tooltipname.innerHTML="Burnout",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Burnout boosts your pet's attack speed by "+a+" for "+n+" seconds and recovers "+Q(t)+" health."})}),e(function(){$NG.window3.on("mouseenter","#elementalarmor",function(){var e="36".fontcolor("#00ff00"),a=(dS.ceil(.17*Ne()*(1+3.3*ra()/100))+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Elemental Armor";var n="Cost: "+Q(GH.cost.elementalArmor)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Abjuration<br><br>Elemental Armor buffs your cold and fire resistance by "+a+" for "+e+" minutes.";Yy.talent11>=20&&(n+="<BR><BR>While Elemental Armor is active, your casting haste is enhanced by "+Q("35%")+"."),NG.tooltipmsg.innerHTML=n})}),zy.elementalArmorFinish=function(){if(!1!==Lb()){zy.drawMyMp(-oH),fa("You feel protected from fire and ice.",3),!0===xB&&(lk-=EB,sk-=GB),rM.kill(),rM=cS.delayedCall(2160,ig);var e=dS.ceil(.17*Ne()*(1+3.3*ra()/100));lk+=EB=e,sk+=GB=e,xB=!0,ny();dD.kill(),dD=cS.delayedCall(2160,function(){wi("resistIcon")}),Bi("Elemental Armor","resistIcon",216e4,-512),Au("orange","easeInBack",5,25,120,3)}},e(function(){$NG.window3.on("mouseenter","#manashield",function(){var e="45".fontcolor("#ff0000"),a="16".fontcolor("#00ff00"),n="75%".fontcolor("#00ff00");"75%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Mana Shield",NG.tooltipmsg.innerHTML="Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Mana Shield mitigates all damage by "+n+". Damage taken also reduces your mana. Mana shield lasts for "+a+" seconds.<br><br>Effect: All mana gained is increased by 280%"})}),e(function(){$NG.window3.on("mouseenter","#psionicstorm",function(){var e=25;sS.Summoner>=6&&(e-=13);var a=Rt(1.5*Re(),.33,"lightning","Psionic Storm"),n="your target";Yy.talent12>=20&&(n="three targets"),NG.tooltipname.innerHTML="Psionic Storm",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.psionicStorm)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+Q(e)+" Seconds<br><br>Psionic Storm hits "+n+" "+Q("6")+" times for "+a[0]+" to "+a[1]+" lightning damage."})}),zy.psionicStormFinish=function(){function e(){if(i){for(var a=0;a<=4;a++)if(Wy[a].name&&a>=n-1&&a<=n+1){o=yc(1.5*Re(),.33);ug(a),zy.myMagicDamage("lightning",o,a,ee(),"Psionic Storm")}}else{var o=yc(1.5*Re(),.33);ug(n),zy.myMagicDamage("lightning",o,n,ee(),"Psionic Storm")}Qa("zap"+~~(3*dS.random()+1)),6!==++t&&cS.delayedCall(.25,e)}if(!1!==Lb()){qi("psionicstorm",!0),Ei("psionicstorm","-800% -100%");var a=25e3;sS.Summoner>=6&&(a-=13e3),cS.delayedCall(a/1e3,cg),jy(mS.getElementById("psionicstorm"),a/1e3,"psionicstorm");var n=bL,t=0;zy.drawMyMp(-oH);var i=!1;Yy.talent12>=20&&(i=!0),e()}},e(function(){$NG.window3.on("mouseenter","#reclaimelements",function(){var e="24".fontcolor("#ff0000"),a=ts(2.1*Qe()*(1+2.2*na()/100),.9);NG.tooltipname.innerHTML="Reclaim Elements",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.reclaimElements)+" Mana Points<br>Cast Time: "+ld(2500)+" Seconds<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Reclaim Elements drains health from your pet, absorbing "+a[0]+" to "+a[1]+" health. Your pet loses double the amount healed."})}),zy.reclaimElementsFinish=function(){if(!1!==Lb()){Qa("spellDoneHeal"),cS.delayedCall(24,hg),jy(mS.getElementById("reclaimelements"),24,"reclaimelements"),qi("reclaimelements",!0),Ei("reclaimelements","-900% -100%"),zy.drawMyMp(-oH),fa(qD+" channels elemental power to you.",3);var e=yc(2.1*Qe()*(1+2.2*na()/100),.9),a=dS.ceil(2*e);a>ND?ND=1:ND-=a,"High"===kw.videoSetting&&function(){function e(t){var i=sy("yellowOrb",6,a,n,200,200);i.image.onload=function(){cS.to(i,.2,{y:660,x:540,ease:pS.Qin,onComplete:function(){cS.to(i,.5,{alpha:0,ease:pS.lin,onComplete:function(){oy(6,i)}})}})},++t<10&&cS.delayedCall(.05,function(){e(t)})}var a=Gw[5].offsetLeft+lL/2-100,n=Gw[5].offsetTop+sL/2-100;e(0)}(),zy.popupHeal(e)}},e(function(){$NG.window3.on("mouseenter","#elementalfury",function(){(dS.ceil(3+6.2*Re()+(se()-70)/6)+"").fontcolor("#00ff00"),(dS.ceil(3+6.2*Re()+(se()-70)/6+Re()/2)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Elemental Fury";var e=40;Yy.talent8>=20&&(e=20);var a="Cooldown: "+Q(e)+" Seconds<br><br>Command your elemental to unleash its fury.<br><br>";if("an earth elemental"===PD)a+="Earth Elemental casts Punishing Earth which snares all targets.";else if("an air elemental"===PD){n=Rt(3*Fe(),.35,"lightning","Chaos Lightning");a+="Air Elemental casts Chaos Lightning, striking your pet's target "+Q(2+dS.round(Fe()/60))+" times for "+n[0]+" to "+n[1]+" lightning damage."}else if("a fire elemental"===PD){n=Rt(1.1*Re(),.77,"fire","Pulsing Inferno");a+="Fire Elemental casts Pulsing Inferno, striking all targets "+Q("7")+" times for "+n[0]+" to "+n[1]+" fire damage."}else if("a frost elemental"===PD){var n;a+="Frost Elemental casts Glacier, striking three targets for "+(n=Rt(1.6*Re(),.9,"cold","Glacier"))[0]+" to "+n[1]+" cold damage.<BR><BR>Effect: Your targets are frozen for "+Q("5")+" to "+Q("10")+" seconds."}NG.tooltipmsg.innerHTML=a})}),e(function(){$NG.window3.on("mouseenter","#armageddon",function(){var e="30".fontcolor("#ff0000"),a=("45".fontcolor("#00ff00"),Rt(.6*Re(),.69,"fire","Armageddon"));NG.tooltipname.innerHTML="Armageddon",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.armageddon)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+e+" Seconds<br><br>Armageddon creates a meteor shower to rain fiery destruction on all targets. Each meteor hits for "+a[0]+" to "+a[1]+" fire damage."})}),zy.armageddonFinish=function(){function e(a){if(!1===ya())a<=45&&cS.delayedCall(.25*dS.random()+.05,function(){e(++a)});else{var n=hb();if(function(e){if(a=Gw[e].offsetLeft+Wy[e].cX,!Wy[e].name)var a=320*e+240;var n=sy("armageddon",5,a-1500,-1033,400,400);n.image.onload=function(){cS.to(n,.5,{x:a-300,y:267,ease:pS.lin,onComplete:function(){oy(5,n),fp(a,800)}})}}(n),Qa("explode"+~~(3*dS.random()+1)),""!==Wy[n].name){!function(e,a){cS.delayedCall(.5,function(){zy.myMagicDamage("fire",a,e,ee(),"Armageddon")})}(n,yc(.6*Re(),.69))}a<=45&&cS.delayedCall(.25*dS.random()+.05,function(){e(++a)})}}!1!==Lb()&&(qi("armageddon",!0),Ei("armageddon","-1100% -100%"),cS.delayedCall(30,kg),jy(mS.getElementById("armageddon"),30,"armageddon"),zy.drawMyMp(-oH),cS.delayedCall(2,function(){e(0)}))},e(function(){$NG.window3.on("mouseenter","#stasisfield",function(){var e="80".fontcolor("#ff0000"),a="35".fontcolor("#00ff00"),n="45".fontcolor("#00ff00");NG.tooltipname.innerHTML="Stasis Field",NG.tooltipmsg.innerHTML="Cost: "+Q(GH.cost.stasisField)+" Mana Points<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Stasis Field seals your target in a dimensional rift. Your target cannot attack or be attacked for "+a+" to "+n+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#alteredstate",function(){var e="60".fontcolor("#ff0000"),a=((dS.ceil(3+1.8*Re()+(se()-70)/8)+"").fontcolor("#00ff00"),(dS.ceil(3+1.8*Re()+(se()-70)/8+Pp()/4.4/2)+"").fontcolor("#00ff00"),"6".fontcolor("#00ff00"));NG.tooltipname.innerHTML="Altered State",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Seconds<br><br>Altered State reverses the state of reality and causes all damage to heal you for "+a+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#icebolt",function(){var e="cold";if(Yy.talent1>=20&&(e="lightning"),Yy.talent10>=20&&(e="fire"),"cold"===e)var a="Ice Bolt",n=Rt(3+1.85*Re(),.85,"cold","Ice Bolt");else if("lightning"===e)var a="Static Bolt",n=Rt(3+3.1*Re(),.45,"lightning","Static Bolt");else var a="Fire Bolt",n=Rt(3+2.5*Re(),.75,"lightning","Fire Bolt");NG.tooltipname.innerHTML=a;var t="Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br><br>"+a+" hits your target for "+n[0]+" to "+n[1]+" "+e+" damage.";"cold"===e&&(t+="<br><br>Effect: Slows your target "+Q("33%")+" for "+Q("5")+" seconds."),NG.tooltipmsg.innerHTML=t})}),zy.iceBoltFinish=function(){if(!1!==Lb()){var e=bL,a="cold";Yy.talent1>=20&&(a="lightning"),Yy.talent10>=20&&(a="fire"),"High"===kw.videoSetting&&function(e,a){var n=Gw[e].offsetLeft+Wy[e].cX-100,t=Gw[e].offsetTop+Wy[e].cY-100,i="iceBolt",o="teal";"lightning"===a&&(i="staticBolt",o="yellow"),"fire"===a&&(i="fireBolt",o="orange");var r=sy(i,5,540,618,300,300,!0);r.image.onload=function(){cS.to(r,.2,{rotation:540,scaleX:.4,scaleY:.4,x:n+100,y:t+100,onComplete:function(){oy(5,r),Gt(e,o,"blank")}})}}(e,a),cS.delayedCall(.2,function(){if("cold"===a){var n=yc(3+1.85*Re(),.85),t="Ice Bolt";Qa("spellDoneSlam")}else if("lightning"===a){var n=yc(3+3.1*Re(),.45),t="Static Bolt";Qa("zap"+dS.ceil(3*dS.random()))}else{var n=yc(3+2.5*Re(),.75),t="Fire Bolt";Qa("explode"+~~(3*dS.random()+1))}zy.myMagicDamage(a,n,e,ee(),t),"cold"===a&&hu(e,5e3,-96),Lp(a,n,e)})}},e(function(){$NG.window3.on("mouseenter","#chargedbolts",function(){var e=8;Yy.talent3>=20&&(e/=2);var a=Rt(1.6*Re(),.2,"lightning","Charged Bolts"),n=dS.ceil(Re()/65)+1;NG.tooltipname.innerHTML="Charged Bolts",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.chargedBolts)+" Mana Points<br>Spell Type: Evocation<br>Cooldown: "+Q(e)+" Seconds<br><br>Charged Bolts hits random targets up to "+Q(n)+" times for "+a[0]+" to "+a[1]+" lightning damage. Your current target takes a guaranteed hit."})}),e(function(){$NG.window3.on("mouseenter","#frostnova",function(){var e="12".fontcolor("#ff0000");NG.tooltipname.innerHTML="Frost Nova",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.frostNova)+" Mana Points<br>Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Frost Nova roots all targets to the ground in an ice formation."})}),e(function(){$NG.window3.on("mouseenter","#magicmissiles",function(){var e=Rt(1.1*Fe(),.77,"magic","Arcane Missiles");NG.tooltipname.innerHTML="Arcane Missiles",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.magicMissiles)+" Mana Points<br>Spell Type: Conjuration<br>Cooldown: "+Q("15")+" Seconds<br><br>Arcane Missiles launches five projectiles at your target for "+e[0]+" to "+e[1]+" arcane damage.<br><br>Effect: Arcane Missiles absorb health and mana on a killing blow. The amount absorbed is based on your target's level"})}),e(function(){$NG.window3.on("mouseenter","#viziersshielding",function(){var e="54".fontcolor("#00ff00"),a=Ne(),n=ia(),t=(dS.ceil(.75*a*(11.3*n/100+1))+"").fontcolor("#00ff00"),i=(dS.ceil(.12*a*(6.1*n/100+1))+"").fontcolor("#00ff00"),o=(dS.ceil(.11*a)+"").fontcolor("#00ff00");NG.tooltipname.innerHTML="Vizier's Shielding",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.viziersShielding)+" Mana Points<br>Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Abjuration<br><br>Vizier's Shielding buffs your armor by "+i+", your health by "+t+", and all resistances by "+o+" for "+e+" minutes."})}),zy.viziersShieldingFinish=function(){if(!1!==Lb()){Qa("spellDoneBuff"),zy.drawMyMp(-oH),fa("You are shielded by strands of flowing ether.",3),!0===RB&&(Zy-=NB,nk-=jB,ik-=zB,ok-=YB,rk-=KB,lk-=WB,sk-=OB),XB.kill(),XB=cS.delayedCall(3240,jg);var e=Ne();NB=dS.ceil(.75*e*(11.3*ia()/100+1)),jB=dS.ceil(.12*e*(6.1*ia()/100+1));var a=dS.ceil(.11*e);Zy+=NB,nk+=jB,ik+=zB=a,ok+=YB=a,rk+=KB=a,lk+=WB=a,sk+=OB=a,RB=!0,zy.drawMyHp(),ny();UB.kill(),UB=cS.delayedCall(3240,function(){wi("hpbuffIcon")}),Bi("Vizier's Shielding","hpbuffIcon",324e4,-544),Au("teal","easeInBack",25,5,150,3)}},e(function(){$NG.window3.on("mouseenter","#fireball",function(){var e=15;Yy.talent10>=20&&(e/=2);var a=Rt(3+4.3*Re(),.8,"fire","Fireball");NG.tooltipname.innerHTML="Fireball",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.fireball)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+Q(e)+" Seconds<br><br>Fireball hits your target and adjacent targets for "+a[0]+" to "+a[1]+" fire damage."})}),zy.fireballFinish=function(e,a){if(!1!==Lb()){if(a===E)a=bL;if("High"===kw.videoSetting&&Wg(a),!e){var n=15e3;Yy.talent10>=20&&(n=7500),qi("fireball",!0),Ei("fireball","-700% -100%"),cS.delayedCall(n/1e3,Yg),jy(mS.getElementById("fireball"),n/1e3,"fireball"),zy.drawMyMp(-oH)}cS.delayedCall(.25,function(){Qa("spellDoneBoom");for(var e=a-1;e<=a+1;e++)if(-1!==e&&5!==e){var n=yc(3+4.3*Re(),.8);zy.myMagicDamage("fire",n,e,ee(),"Fireball"),Lp("fire",n,e)}})}},e(function(){$NG.window3.on("mouseenter","#deepfreeze",function(){var e=24;Yy.talent7>=20&&(e/=2);var a="your target";Yy.talent6>=20&&(a="three targets");var n=Rt(1.9*Qe(),.88,"cold","Deep Freeze"),t=(t=((3e3+42*Qe())/1e3).toFixed(1)).fontcolor("#00ff00"),i="100%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Deep Freeze",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.deepFreeze)+" Mana Points<br>Spell Type: Alteration<br>Cooldown: "+Q(e)+" Seconds<br><br>Deep Freeze hits "+a+" for "+n[0]+" to "+n[1]+" cold damage.<br><br>Effect: Encases "+a+" in a cone of ice for "+t+" seconds. Encased targets cannot attack and take "+i+" more damage the next time you hit them, but the encasement shatters."})}),e(function(){$NG.window3.on("mouseenter","#chainlightning",function(){var e=20;Yy.talent3>=20&&(e/=2);var a=Rt(4.8*Re(),.62,"lightning","Chain Lightning"),n=Rt(7.3*Re(),.62,"lightning","Chain Lightning");NG.tooltipname.innerHTML="Chain Lightning",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.chainLightning)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+Q(e)+" Seconds<br><br>Chain Lightning hits your primary target and chains to adjacent targets up to 6 times for "+a[0]+" to "+a[1]+" lightning damage.<br><br>If Chain Lightning only hits one target, it will hit for "+n[0]+" to "+n[1]+" lightning damage."})}),zy.chainLightningFinish=function(){function e(n){function t(){i=1;var e=n-2;if(n>=0&&n<=4){if(""===Wy[n].name)return;if(e>=0&&e<=4&&""===Wy[e].name)return}n-=2,0!==Ab()&&cS.delayedCall(.1,function(){a(n)})}if(5!==n||0!==i){if(!(5===n&&i>=1))if(""!==Wy[n].name||0!==i){if((1!==i||""!==Wy[n].name)&&5!==n){var o=yc(4.8*Re(),.62);"High"===kw.videoSetting&&Zg(n),Qa("lightning"+~~(3*dS.random()+1)),zy.myMagicDamage("lightning",o,n,ee(),"Chain Lightning"),Lp("lightning",o,n),n+=1,cS.delayedCall(.2,function(){e(n)})}}else t()}else t()}function a(n){function t(){i=1;var a=n+2;if(n>=0&&n<=4){if(""===Wy[a].name)return;if(a>=0&&a<=4&&""===Wy[a].name)return}n+=2,0!==Ab()&&cS.delayedCall(.1,function(){e(n)})}if(-1!==n||0!==i){if(!(-1===n&&i>=1))if(""!==Wy[n].name||0!==i){if((1!==i||""!==Wy[n].name)&&-1!==n){var o=yc(4.8*Re(),.62);"High"===kw.videoSetting&&Zg(n),Qa("lightning"+~~(3*dS.random()+1)),zy.myMagicDamage("lightning",o,n,ee(),"Chain Lightning"),Lp("lightning",o,n),n-=1,cS.delayedCall(.2,function(){a(n)})}}else t()}else t()}if(!1!==Lb()){qi("chainlightning",!0),Ei("chainlightning","-900% -100%");var n=2e4;Yy.talent3>=20&&(n=1e4),cS.delayedCall(n/1e3,Ug),jy(mS.getElementById("chainlightning"),n/1e3,"chainlightning"),zy.drawMyMp(-oH);var t=bL,i=0;(1===Ab()||Ab()>1&&0===t&&""===Wy[1].name||Ab()>1&&3===t&&""===Wy[2].name)&&cS.delayedCall(.5,function(){var e=yc(7.3*Re(),.62);"High"===kw.videoSetting&&Zg(t),Qa("lightning"+~~(3*dS.random()+1)),zy.myMagicDamage("lightning",e,t,ee(),"Chain Lightning"),Lp("lightning",e,t)}),(0===t||1===t)&&Ab()>1&&cS.delayedCall(.5,function(){e(t)}),(2===t||3===t||4===t)&&Ab()>1&&cS.delayedCall(.5,function(){a(t)})}},e(function(){$NG.window3.on("mouseenter","#glacialspike",function(){var e=15;Yy.talent7>=20&&(e/=2);var a=Rt(2*Re(),.84,"cold","Glacial Spike"),n="7".fontcolor("#00ff00"),t="25%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Glacial Spike",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.glacialSpike)+" Mana Points<br>Cast Time: "+ld(2e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+Q(e)+" Seconds<br><br>Glacial Spike hits your target for "+a[0]+" to "+a[1]+" cold damage.<br><br>Effect: Freezes your target and adjacent targets for "+n+" seconds. Frozen targets take "+t+" additional damage."})}),zy.glacialSpikeFinish=function(e){if(e||!1!==Lb()){Qa("icespike1");var a=bL;if("High"===kw.videoSetting&&function(e){var a=Gw[e].offsetLeft+Wy[e].cX-400,n=Gw[e].offsetTop+Wy[e].cY-400,t=sy("glacialSpike",5,240,368,800,800,!0),i=ly("tealparticle50");t.image.onload=function(){cS.to(t,.25,{scaleX:.375,scaleY:.375,x:a+400,y:n+400,rotation:360,ease:pS.lin,onComplete:function(){function e(t){var o=a+388+(700*dS.random()-350),r=n+388+(350*dS.random()-225),l=ry(i,5,o,r);cS.to(l,.75,{x:o+12+20*dS.random()-10,y:r+50,scaleX:0,scaleY:0,onComplete:function(){oy(5,l)}}),t<40&&e(++t)}oy(5,t),e(0)}})}}(a),!e){qi("glacialspike",!0),Ei("glacialspike","-1000% -100%");var n=15e3;Yy.talent7>=20&&(n/=2),cS.delayedCall(n/1e3,ap),jy(mS.getElementById("glacialspike"),n/1e3,"glacialspike"),zy.drawMyMp(-oH)}cS.delayedCall(.25,function(){for(var n=a-1;n<=a+1;n++)if(-1!==n&&5!==n){var t=yc(2*Re(),.84),i=7e3,o=-320;e&&(t=yc(693,.84),i=4e3,o=-32),zy.myMagicDamage("cold",t,n,ee(),"Glacial Spike"),Lp("cold",t,n),ip(n,i,o)}})}},e(function(){$NG.window3.on("mouseenter","#iceblock",function(){var e="90".fontcolor("#ff0000"),a=(dS.ceil(Qe()/5)+"").fontcolor("#00ff00"),n=(dS.ceil(Qe()/5)+"").fontcolor("#00ff00"),t="10".fontcolor("#00ff00");NG.tooltipname.innerHTML="Ice Block",NG.tooltipmsg.innerHTML="Spell Type: Alteration<br>Cooldown: "+e+" Seconds<br><br>Ice Block surrounds you in a protective block of ice for "+t+" seconds. You cannot take damage throughout the duration and you recover "+a+" health and "+n+" mana every second. Ice Block can be used while feared or stunned."})}),e(function(){$NG.window3.on("mouseenter","#icecomet",function(){var e=25;Yy.talent7>=20&&(e/=2);var a=Rt(6*Re(),.87,"cold","Ice Comet"),n="33%".fontcolor("#00ff00"),t="8".fontcolor("#00ff00");NG.tooltipname.innerHTML="Ice Comet",NG.tooltipmsg.innerHTML="Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Evocation<br>Cooldown: "+Q(e)+" Seconds<br><br>Ice Comet hits your target for "+a[0]+" to "+a[1]+" cold damage.<br><br>Effect: Your target is slowed "+n+" for "+t+" seconds."})}),zy.iceCometFinish=function(){if(!1!==Lb()){Qa("meteorlaunch",0,2e3);var e=bL;"High"===kw.videoSetting&&function(e){function a(e){var n=sy("tealLight3",5,t-1980,-1077,2560,1844);n.image.onload=function(){cS.to(n,2,{startAt:{alpha:0},alpha:.4,ease:pS.Qin,onComplete:function(){oy(5,n)}})},++e<4&&cS.delayedCall(0,function(){a(e)},0)}function n(e){var a=t+(700*dS.random()-350),r=i+(350*dS.random()-225),l=ry(o,5,a,r);cS.to(l,1.2,{x:a+12+40*dS.random()-20,y:r+50,scaleX:0,scaleY:0,onComplete:function(){oy(5,l)}}),++e<80&&cS.delayedCall(.033,function(){n(e)})}var t=Gw[e].offsetLeft+Wy[e].cX,i=Gw[e].offsetTop+Wy[e].cY;if(!Wy[e].name)var t=244*e+240,i=467;a(0);var o=ly("tealparticle50"),r=sy("iceComet",5,t-2e3,i-2e3,600,600);r.image.onload=function(){cS.to(r,.5,{startAt:{alpha:1},delay:1.5,x:t-450,y:i-300,ease:pS.lin,onComplete:function(){oy(5,r),n(0),du(1,20,0,25),fp(t,1e3)}})}}(e),qi("icecomet",!0),Ei("icecomet","-1200% -100%");var a=25e3;Yy.talent7>=20&&(a=12500),cS.delayedCall(a/1e3,mp),jy(mS.getElementById("icecomet"),a/1e3,"icecomet"),zy.drawMyMp(-oH),cS.delayedCall(2,function(){if(Wy[e].name){Qa("spellDoneSlam");var a=yc(6*Re(),.87);zy.myMagicDamage("cold",a,e,ee(),"Ice Comet"),Lp("cold",a,e),hu(e,8e3,-384),Qa("spellDoneSlam")}})}},e(function(){$NG.window3.on("mouseenter","#counterspell",function(){var e=24;Yy.talent10>=20&&(e/=2);var a="6".fontcolor("#00ff00");NG.tooltipname.innerHTML="Counterspell",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.counterspell)+" Mana Points<br>Spell Type: Alteration<br>Cooldown: "+Q(e)+" Seconds<br><br>Counterspell silences a casting target for "+a+" seconds."})}),e(function(){$NG.window3.on("mouseenter","#harnessEther",function(){var e="45".fontcolor("#ff0000"),a=4.1*ra(),n=(~~(100+Fe()/2+a)+"%").fontcolor("#00ff00");NG.tooltipname.innerHTML="Harness Ether",NG.tooltipmsg.innerHTML="Cost: "+Q(qH.cost.harnessEther)+" Mana Points<br>Spell Type: Conjuration<br>Cooldown: "+e+" Seconds<br><br>Amplify the damage of your next spell by "+n+". While the effect is active, your mana recovers at "+Q("250%")+" regeneration rate."})}),e(function(){$NG.window3.on("mouseenter","#meteor",function(){var e=45;Yy.talent10>=20&&(e/=2);var a=Rt(9.5*Fe(),.82,"fire","Meteor"),n=Rt(.18*Fe(),.65,"fire","Meteor"),t=(".5".fontcolor("#00ff00"),"8".fontcolor("#00ff00"));NG.tooltipname.innerHTML="Meteor",NG.tooltipmsg.innerHTML="Cast Time: "+ld(3e3)+" Seconds<br>Spell Type: Conjuration<br>Cooldown: "+Q(e)+" Seconds<br><br>Meteor hits all targets for "+a[0]+" to "+a[1]+" fire damage. In its wake, meteor leaves a pool of lava inflicting "+n[0]+" to "+n[1]+" fire damage twice per second for "+t+" seconds."})}),zy.meteorFinish=function(){if(!1!==Lb()){Qa("meteorlaunch",0,2500),Mp(),qi("meteor",!0),Ei("meteor","-1500% -100%");var e=45e3;Yy.talent10>=20&&(e=22500),cS.delayedCall(e/1e3,wp),jy(mS.getElementById("meteor"),e/1e3,"meteor"),zy.drawMyMp(-oH),cS.delayedCall(2.5,function(){function e(a,n){if(""!==Wy[n].name){Qa("explode"+~~(3*dS.random()+1));var t=yc(.18*Fe(),.65);zy.myMagicDamage("fire",t,n,ee(),"Meteor")}(a+=1)<=16&&cS.delayedCall(.5,function(){e(a,n)})}for(Qa("spellDoneBoom"),n=0;n<=4;n++)if(""!==Wy[n].name){var a=yc(9.5*Fe(),.82);zy.myMagicDamage("fire",a,n,ee(),"Meteor"),Lp("fire",a,n),Ht(n)}for(var n=0;n<=4;n++)e(0,n)})}},e(function(){$NG.window3.on("mouseenter","#mirrorimages",function(){var e=30;Yy.talent3>=20&&(e/=2);var a=10;Ze()>0&&(a=1*P(.8*Ze())+a),NG.tooltipname.innerHTML="Mirror Images",NG.tooltipmsg.innerHTML="Spell Type: Alteration<br>Cooldown: "+Q(e)+" Seconds<br><br>Create five Mirror Images to fight on your behalf. Each Mirror Image casts the same spells as you for "+Q(a+"%")+" of your damage. Mirror Images also absorb a single hit, which kills them instantly. You cannot have more than 5 Mirror Images at once."})}),zy.updateRootStatus=function(e){if(Wy[e].rootStatus>0){var a=dS.ceil(5*dS.random()),n=0;a>=2&&a<=3&&(n=2),a>=4&&(n=1),Wy[e].rootStatus-=n,cS.to(mS.getElementById("rootIcon"+e),.5,{height:"-=10",force3D:!0,ease:pS.lin})}},e(function(){$NG.gameView.on("mouseenter","#secondwindId",function(){"25".fontcolor("#00ff00");var e="12".fontcolor("#00ff00");NG.tooltipname.innerHTML="Second Wind",NG.tooltipmsg.innerHTML="Cooldown: "+Q("120")+" Seconds<br><br>Reach deep within your soul to find an additional reserve of energy. Enhances all damage and reduces all damage taken by "+Q("25%")+". Triggers health and mana regeneration for "+e+" seconds."})}),e(function(){$NG.gameView.on("mouseenter","#divineaegisId",function(){var e="2".fontcolor("#ff0000"),a="20".fontcolor("#00ff00");NG.tooltipname.innerHTML="Divine Aegis",NG.tooltipmsg.innerHTML="Cooldown: "+e+" Minutes<br><br>Surround yourself with a chromatic aegis that makes you highly resistant to all magic for "+a+" seconds."})}),e(function(){$NG.gameView.on("mouseenter","#ancestralrampageId",function(){var e="12".fontcolor("#00ff00"),a="100%".fontcolor("#00ff00");NG.tooltipname.innerHTML="Ancestral Rampage",NG.tooltipmsg.innerHTML="Cooldown: "+Q("120")+" Seconds<br><br>Inspired by your ancestral pride, your bolstered might increases all damage by "+a+" for "+e+" seconds."})}),e(function(){$NG.gameView.on("mouseenter","#tunaresglowId",function(){(10+~~(Ee()/5*3)+"").fontcolor("#00ff00"),"20".fontcolor("#00ff00");NG.tooltipname.innerHTML="Camouflage",NG.tooltipmsg.innerHTML="Cooldown: "+Q("120")+" Seconds<br><br>Disappear from combat for six seconds. If you attack while evading, you will ambush your target and stun them for five seconds and inflict an additional "+Q("90%")+" damage.<br><br>Effect: Camouflage makes mobs unable to target you. DoTs will still hit you and cancel Camouflage."})}),e(function(){$NG.gameView.on("mouseenter","#karanasinfusionId",function(){var e=~~(.04*Yy.maxHp);NG.tooltipname.innerHTML="Hybrid Vigor",NG.tooltipmsg.innerHTML="Cooldown: "+Q("120")+" Seconds<br><br>Breaks out of stun and fear effects and regenerates "+Q(e)+" health every second for 7 seconds."})}),e(function(){$NG.gameView.on("mouseenter","#sanguinetormentId",function(){var e="12".fontcolor("#00ff00");NG.tooltipname.innerHTML="Sanguine Torment",NG.tooltipmsg.innerHTML="Cooldown: "+Q("120")+" Seconds<br><br>Your attacks are imbued with vampiric power. All damage inflicted leeches health for "+e+" seconds."})}),e(function(){$NG.gameView.on("mouseenter","#granitevisageId",function(){NG.tooltipname.innerHTML="Granite Visage",NG.tooltipmsg.innerHTML="Cooldown: "+Q("120")+" Seconds<br><br>Your countenance hardens and your skin resembles granite. All physical damage is reduced by "+Q("25%")+" for "+Q("12")+" seconds."})}),e(function(){$NG.gameView.on("mouseenter","#halflinghideId",function(){NG.tooltipname.innerHTML="Hide",NG.tooltipmsg.innerHTML="Attacking while hidden will increase your initial attacks' damage by "+Q("60%")+" and stun your target for 5 seconds."})}),e(function(){$NG.gameView.on("mouseenter","#shortcircuitId",function(){"50%".fontcolor("#00ff00"),"7".fontcolor("#00ff00");NG.tooltipname.innerHTML="Warp Field",NG.tooltipmsg.innerHTML="Cooldown: "+Q(120)+" Seconds<br><br>You trap your target in a Warp Field, making them unable to attack or be attacked for 20-25 seconds."})}),zy.petPhysical=function(a,n,t,i){if(!0===Wy[n].stasisFieldStatus)return a=0,void bi(a,n);var o=0;if(!0===Wy[n].frozenStatus&&(o+=25),"Shadow Knight"===Yy.job?o+=6.6*oa():"Bard"===Yy.job?(o+=12.8*ia(),Yy.talent9>=20&&Qm(n,2,1e3)):"Shaman"===Yy.job?o+=8.6*oa():"Necromancer"===Yy.job?(o+=4.7*ea(),Yy.talent6>=1&&.5===fL&&(o+=6.5*aa())):"Enchanter"===Yy.job?o+=13.5*ea():"Magician"===Yy.job&&(o+=6.2*ea(),Yy.talent6>=1&&.4===fL&&(o+=5.8*aa())),o+=2*(zy.conjurationEquip+zy.allSkillsEquip),a=dS.ceil(a+a*(o/100)),"Shadow Knight"===Yy.job||"Necromancer"===Yy.job||"Shaman"===Yy.job||"Magician"===Yy.job||!0===i){if(!i&&((a=dS.ceil(a*zy.mobDefense(n)))<=3&&(a=dS.ceil(4*dS.random())),""===qD))return;Wy[n].runeHp>0&&(Wy[n].runeHp-=a,Wy[n].runeHp<=0&&e("#MruneIcon"+n).remove(),Qa("blockBlunt")),Wy[n].runeHp<=0&&(!0===i&&fa(zy.familiarName+" bites "+Wy[n].name+" for "+a+" damage."),Wy[n].hp-=a,Qa("flshhit1"),dS.random()>.8&&!i&&("Magician"===Yy.job&&Qa("elem_att3"),"Necromancer"!==Yy.job&&"Shadow Knight"!==Yy.job||Qa("skeleton_att"),"Shaman"===Yy.job&&Qa("wolf_att2"))),bi(a,n),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+n).remove()),0!==Wy[n].thornsActive||i||(ND-=dS.ceil(Wy[n].level/10)),0!==Wy[n].lavaShieldActive||i||(ND-=dS.ceil(Wy[n].level/6)),zy.drawMonsterHp(n),zy.checkForDeadMonsters()}else{if((a=dS.ceil(a*zy.mobDefense(n)))<.3*Wy[hT].level&&(a=dS.ceil(.3*Wy[hT].level)),a<=3&&(a=dS.ceil(4*dS.random())),""===qD&&"Cleric"!==Yy.job)return;Wy[n].runeHp>0&&(fa(Wy[n].name+"'s skin absorbs the blow.",3),Wy[n].runeHp-=a,Wy[n].runeHp<=0&&e("#MruneIcon"+n).remove(),Qa("blockBlunt")),Wy[n].runeHp<=0&&(Wy[n].hp-=a,Qa("flshhit1")),bi(a,n),!0===Wy[n].sleepStatus&&(Wy[n].sleepStatus=!1,e("#sleepIcon"+n).remove()),0===Wy[n].thornsActive&&(Wy[hT].hp-=dS.ceil(Wy[n].level/10)),0===Wy[n].lavaShieldActive&&(Wy[hT].hp-=dS.ceil(Wy[n].level/6)),zy.drawMonsterHp(n),zy.checkForDeadMonsters()}},zy.WarriorSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"shockwaveId"===e&&uo(),"absorbspellId"===e&&To(),"enrageId"===e&&Qo(),"furiousscornId"===e&&xo(),"triageId"===e&&zo(),"bulwarkId"===e&&Oo(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"warriorkickId"===e&&Yi(),"slamId"===e&&no(),"avengingstrikeId"===e&&oo(),"hemorrhageId"===e&&lo(),"pummelId"===e&&bo(),"subjugateId"===e&&yo(),"decisiveblowId"===e&&Io(),"frenziedrampageId"===e&&Ao(),"intrepidmightId"===e&&Uo()},zy.MonkSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"feigndeathId"===e&&Ur(),"mendId"===e&&ll(),"stonefistsId"===e&&vl(),"innerpeaceId"===e&&Nl(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"tigerstrikeId"===e&&Or(),"eaglestrikeId"===e&&al(),"cheetahstrikeId"===e&&ml(),"cobrastrikeId"===e&&Il(),"dragonstrikeId"===e&&Pl(),"cranekickId"===e&&Xr(),"windmillkickId"===e&&il(),"ancestralflurryId"===e&&hl(),"flyingkickId"===e&&xl(),"chakrablastId"===e&&Tl(),"intimidationId"===e&&Ll()},zy.RogueSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"roguehideId"===e&&Hr(),""!==racialSkillId&&e===racialSkillId&&Qb(),"evadeId"===e&&ir(),"coldbloodId"===e&&gr(),"illusivemistId"===e&&Mr(),"ancientwillId"===e&&Rr(),"runId"===e&&et(),"shadowstrikeId"===e&&Jo(),"sonicstrikeId"===e&&sr(),"hyperstrikeId"===e&&kr(),"widowstrikeId"===e&&Ar(),"miragestrikeId"===e&&zr(),"lacerateId"===e&&ar(),"backstabId"===e&&ur(),"staggershotId"===e&&Dr(),"lobotomizeId"===e&&qr(),"prowlinggashId"===e&&Wr(),"flashpowderId"===e&&vr()},zy.PaladinSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"valorId"===e&&Hs(),"spiritarmorId"===e&&xs(),"divineprovidenceId"===e&&Gs(),"symbolofryltanId"===e&&Ps(),"layhandsId"===e&&ns(),"greaterhealingId"===e&&ss(),"yaulpId"===e&&Ss(),"cleanseId"===e&&Is(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"palslamId"===e&&Kl(),"rebukeId"===e&&Vl(),"purgeId"===e&&$l(),"vengeanceId"===e&&Zl(),"holymightId"===e&&ms(),"palrootId"===e&&hs(),"ardentjudgment"===e&&bs(),"flashoflightId"===e&&Ds()},zy.RangerSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"rangertrackId"===e&&wu(),"thistlecoatId"===e&&vd(),"feetlikecatId"===e&&kd(),"shieldofbramblesId"===e&&fd(),"rangersowId"===e&&Id(),"weaponshieldId"===e&&bd(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"rangerkickId"===e&&Ns(),"rapidshotId"===e&&js(),"countershotId"===e&&Ys(),"trueshotarrowId"===e&&Ws(),"volleyshotId"===e&&_s(),"lighthealingId"===e&&Zs(),"wardersrift"===e&&td(),"igniteId"===e&&rd(),"snareId"===e&&md(),"faerieflameId"===e&&sd()},zy.ShadowKnightSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"summondeadId"===e&&Fd(),"vampiricembraceId"===e&&mc(),"resistcoldId"===e&&fc(),"shdfeigndeathId"===e&&sc(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"shdslamId"===e&&Td(),"crescentcleaveId"===e&&Bd(),"deathstrikeId"===e&&Hd(),"gaspingfrenzyId"===e&&Ed(),"harmtouchId"===e&&Pd(),"shdlifetapId"===e&&zd(),"doomingdarknessId"===e&&Kd(),"heatbloodId"===e&&Od(),"strengthendeadId"===e&&_d(),"shdfearId"===e&&Zd(),"siphonstrengthId"===e&&ic(),"shadowvortexId"===e&&dc()},zy.BardSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"rangertrackId"===e&&wu(),"chantofbattle"===e&&gc(),"chordsofdissonance"===e&&bc(),"accelerando"===e&&kc(),"hymnofrestoration"===e&&Ic(),"anthemdearms"===e&&Cc(),"elementalrhythms"===e&&Bc(),"lucidlullaby"===e&&Lc(),"dissension"===e&&Ac(),"chorusofclarity"===e&&xc(),"euphonichymn"===e&&qc(),"shieldofsongs"===e&&Pc(),"desperatedirge"===e&&Rc(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"consonantchain"===e&&Hc(),"songofthesirens"===e&&Nc(),"boastfulbellow"===e&&Tc()},zy.ClericSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"resolution"===e&&$c(),"armoroffaith"===e&&um(),"divinesanctuary"===e&&hm(),"symbolofnaltron"===e&&pm(),"superiorhealing"===e&&_c(),"guardianangel"===e&&km(),"markofjudgement"===e&&Bm(),"benediction"===e&&Am(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"smite"===e&&zc(),"soundofforce"===e&&Oc(),"bindingearth"===e&&em(),"expelcorruption"===e&&tm(),"martyrsblessing"===e&&mm(),"searingrevelation"===e&&lm(),"holywrath"===e&&wm()},zy.DruidSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"rangertrackId"===e&&wu(),"skinlikenature"===e&&jm(),"shieldofspikes"===e&&$m(),"drusow"===e&&eu(),"chloroplast"===e&&cu(),"druhealing"===e&&Nm(),"earthquake"===e&&su(),"hurricane"===e&&fu(),"sylvangrasp"===e&&bu(),"driftingdeath"===e&&Jm(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"starfire"===e&&Em(),"dronesofdoom"===e&&qm(),"tornado"===e&&Wm(),"engulfingroots"===e&&_m(),"lightningblast"===e&&iu(),"volcano"===e&&ku()},zy.ShamanSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"calloftheancients"===e&&Hu(),"guardianspirit"===e&&mf(),"shmsow"===e&&Vu(),"talismanofaltuna"===e&&af(),"shmhealing"===e&&Du(),"cannibalize"===e&&ju(),"reclaimblood"===e&&ef(),"poisonnova"===e&&Ku(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"froststrike"===e&&Cu(),"scourge"===e&&Mu(),"togorsinsects"===e&&qu(),"enstill"===e&&Xu(),"affliction"===e&&$u(),"glacialimpact"===e&&rf(),"devouringplague"===e&&df()},zy.NecromancerSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"invokedeath"===e&&ff(),"archshielding"===e&&wf(),"augmentdeath"===e&&Hf(),"diamondskin"===e&&Pf(),"howlingterror"===e&&_f(),"feigndeath"===e&&Bf(),"corpseexplosion"===e&&gf(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"bonespirit"===e&&uf(),"cascadingdarkness"===e&&hf(),"invokefear"===e&&yf(),"drainsoul"===e&&If(),"igniteblood"===e&&xf(),"bondofdeath"===e&&Nf(),"asystole"===e&&zf(),"detonatesoul"===e&&Wf()},zy.EnchanterSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"discordantbarrier"===e&&ch(),"enchantweapon"===e&&ph(),"adorninggrace"===e&&vh(),"clarity"===e&&Eh(),"colorshift"===e&&oh(),"mysticrune"===e&&Dh(),"gravityflux"===e&&wh(),"alacrity"===e&&kh(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"chaosflux"===e&&$f(),"gaspingembrace"===e&&Uf(),"cajolingwhispers"===e&&ah(),"mesmerize"===e&&sh(),"shiftlessdeeds"===e&&hh(),"tashania"===e&&xh(),"enthrall"===e&&Ph()},zy.MagicianSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"earthelemental"===e&&Rh(),"airelemental"===e&&Fh(),"fireelemental"===e&&Nh(),"frostelemental"===e&&jh(),"shieldoflava"===e&&zh(),"phantomplate"===e&&Vh(),"elementalarmor"===e&&tg(),"burnout"===e&&ag(),"manashield"===e&&lg(),"alteredstate"===e&&Lg(),"psionicstorm"===e&&mg(),"reclaimelements"===e&&gg(),"armageddon"===e&&Sg(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"lavabolt"===e&&Qh(),"firestorm"===e&&Oh(),"frozenorb"===e&&Jh(),"elementalfury"===e&&vg(),"stasisfield"===e&&Mg()},zy.WizardSkillMap=function(e){"addmonsterId"===e&&ui(),"toggleattackId"===e&&Si(),"viziersshielding"===e&&Ng(),"mirrorimages"===e&&Dp(),"harnessEther"===e&&Sp(),""!==racialSkillId&&e===racialSkillId&&Qb(),"runId"===e&&et(),"icebolt"===e&&Hg(),"chargedbolts"===e&&Eg(),"frostnova"===e&&Pg(),"magicmissiles"===e&&Fg(),"fireball"===e&&Kg(),"deepfreeze"===e&&Vg(),"chainlightning"===e&&Jg(),"glacialspike"===e&&np(),"iceblock"===e&&lp(),"icecomet"===e&&up(),"counterspell"===e&&pp(),"meteor"===e&&Cp()},e("#questJournal").on("click",".QT",function(){var a=e(this).text(),n=e(this).data("subzone");Av(a=a.replace("- ",""),n)}),QL={edenburg1:!1,salubrin1:!1,salubrin3:!1,tendolin1:!1,greenthorn1:!1,greenthorn2:!1,greenthorn3:!1,grotto1:!1,grotto2:!1,grotto3:!1,lanfeld1:!1,lanfeld2:!1,lanfeld3:!1,aspen1:!1,braxxen1:!1,braxxen2:!1,braxxen3:!1,marshlands1:!1,marshlands2:!1,marshlands3:!1,arcturin1:!1,arcturin1:!1,arcturin1:!1,artremia1:!1,fahnlir1:!1,fahnlir2:!1,fahnlir3:!1,ruins1:!1,ruins2:!1,ruins3:!1,temple1:!1,temple2:!1,temple3:!1,fenwoven1:!1,viston1:!1,viston2:!1,viston3:!1,viston4:!1,galeblast1:!1,galeblast2:!1,galeblast3:!1,galeblast4:!1,ashenflow1:!1,ashenflow2:!1,ashenflow3:!1,ashenflow4:!1,dire1:!1,nimgaul1:!1},e("#cityWrap").on("click","#training",function(){Fa();var a=e("#trainingOptions");"-700px"===a.css("left")&&(a.css("left",320),e("#trainOK").css("left",528))}).on("click",".trainingButton",function(){function a(e){!0===n?(e.style.border="1px solid #f00",n=!1):(e.style.border="1px solid #600",n=!0),Fk=cS.delayedCall(.1,function(){a(e)})}Qk=e(this).text(),Ev(),fa(cw+' says, "Train '+Qk+" for "+Rk+' gold?"'),ha(cw+' says, "Train '+Qk+" for "+Rk+' gold?"');var n=!0;Fk.kill(),$NG.trainingButton.css("border","1px solid #111"),a(this)}),e("#cityWrap").on("click","#trainOK",function(){if(!0!==LS){var a=Qk;if(""!==a)if(Yy.gold<_I)xy("You don't have enough gold.");else{var n;"One-Hand Slashing"===a&&(n=dt()),"Two-Hand Slashing"===a&&(n=ct()),"One-Hand Blunt"===a&&(n=lt()),"Two-Hand Blunt"===a&&(n=st()),"Piercing"===a&&(n=rt()),"Hand to Hand"===a&&(n=mt()),"Offense"===a&&(n=ft()),"Dual Wield"===a&&(n=ht()),"Double Attack"===a&&(n=gt()),"Defense"===a&&(n=ut()),"Dodge"===a&&(n=pt()),"Parry"===a&&(n=bt()),"Riposte"===a&&(n=vt()),"Alteration"===a&&(n=yt()),"Evocation"===a&&(n=It()),"Conjuration"===a&&(n=St()),"Abjuration"===a&&(n=kt()),"Channeling"===a&&(n=wt()),!1!==n?(LS=!0,e.ajax({url:"/classic/php/town1.php",data:{run:"trainSkill",cost:_I,name:Yy.name}}).done(function(n){Qa("buyitem"),fa("You spent "+_I+" gold to train "+a+".",5),Yy.gold-=_I,e("#inventoryGoldAmount").text(Yy.gold),e("#cityGold").html("<div id='goldIcon' class='goldIcon'></div> "+Yy.gold),ny(),gS.my(),Ev(),fa(cw+' says, "Train '+a+" for "+Rk+' gold?"'),ha(cw+' says, "Train '+a+" for "+Rk+' gold?"'),LS=!1}).fail(function(){Tv()})):xy("You cannot train that skill any higher right now.")}else xy("Select a skill to train first!")}}).on("click","#upgrade",function(){e("#upgradeOK").text("Ok"),e("#upgradeCANCEL").text("Cancel"),Fa(),TI=!1,VI=!0,UI=!1,JI=!0,e("#upgradeConfirm").css("left",350),e("#upgradePrompt").html("Upgrade An Item"),e("#upgradeConfirm2").html("Select an item in your inventory. Weapons, cloth armor, leather armor, chain armor, plate armor, off-hand items, and shields may be upgraded."),1==gH&&py()}).on("click","#upgradeOK",function(){return Yy.gold<Rk?(xy("You don't have enough gold."),void Fa()):!0===TI?(zy.lockScreen(),void e.ajax({url:"/classic/php/town1.php",data:{run:"resetTalents",cost:Rk,name:Yy.name}}).done(function(a){"ok"===a.split("|")[0]&&(Yy.gold-=Rk,fa(cw+" resets your talents for "+Rk+" gold.",5),mS.getElementById("cityGold").innerHTML="<div id='goldIcon' class='goldIcon'></div> "+Yy.gold,e("#inventoryGoldAmount").text(Yy.gold),Gv(),Qa("buyitem"),e("#upgradeConfirm").css("left",-700),gS.my()),zy.unlockScreen()}).fail(function(){Tv()})):(UI&&(JI=!0),void qv())}).on("click","#upgradeCANCEL",function(){if(UI)return Yy.gold<Rk?(xy("You don't have enough gold."),void Fa()):(JI=!1,void qv());Fa(),VI=!1}).on("click","#merchant",function(){Fa(),ZI=!0,e("#merchantContainer").css("left",330),1==gH&&py()}).on("click","#sellOK",function(){Pv()}).on("click","#buyOK",function(){if(aw){var a=Xk=Kv();if(!1===a)return void xy("There is no room in your inventory.");if(Rk>Yy.gold)return void xy("You don't have enough gold.");bS.item[Ok].name&&e.ajax({url:"/classic/php/town1.php",data:{run:"buyItem",cost:Rk,name:Yy.name}}).done(function(n){!function(a){aw=!1,Qa("buyitem"),Yy.gold-=Rk,mS.getElementById("cityGold").innerHTML="<div id='goldIcon' class='goldIcon'></div> "+Yy.gold,e("#inventoryGoldAmount").text(Yy.gold),fa("You purchased "+qy(bS.item[Ok].name,bS.item[Ok].rarity)+" for "+Rk+" gold.",5);for(var n in bS.item[Ok])bS.item[a][n]=bS.item[Ok][n];My(a),bS.item[Ok].name="",bS.item[Ok].xPos=0,bS.item[Ok].yPos=0,ky(Ok),Ba(),aw=!1,gS.item(a)}(a)})}else xy("You must select an item to buy first.")}),e("#cityWrap").on("click","#exitCity",function(){Fa(),fa(cw+' says, "Thank you for stopping by, '+Yy.name+". Be sure to check our wares after our next shipment arrives."),e("#cityWindow").css("left",-700)}),e("#cityWrap").on("click","#cityNPC",function(){Fa(),fa(cw+' says, "Hello, '+Yy.name+'. How can I help you?"'),e("#cityWindow").css("left",10)}),e(function(){e("#worldMap").on("click",".zoneSelectButton",function(){if(!(Yy.hp<=0||!0===US)){var a=e(this).text(),n="",t=0;-1!==a.indexOf("1")?(n=a.replace(" 1",""),t=1):-1!==a.indexOf("2")?(n=a.replace(" 2",""),t=2):-1!==a.indexOf("3")?(n=a.replace(" 3",""),t=3):-1!==a.indexOf("4")?(n=a.replace(" 4",""),t=4):(t=0,n=a);var i=qn()+" "+Pn();n!==qn()||t!==Pn()?""!==n?(Gn(n,t),$NG.zoneSelectButton.css({"background-position":"-5px -85px"})):xy("Select a zone first!"):xy(0!==t?"You are already located in "+i+"!":"You are already located in "+qn()+"!")}}).on("mouseenter",".zoneSelectButton",function(){var e=this.textContent;Dy(e=(e=(e=(e=e.replace(" 1","")).replace(" 2","")).replace(" 3","")).replace(" 4",""))})}),e("#window1").on("mousedown",".talentButton",function(){DI=e(this).attr("id"),v(function(){gS.my()},1e3)}).on("mouseenter",".talentButton",function(){DI=e(this).attr("id"),ey()}).on("click","#talent1",function(){"Warrior"===Yy.job&&Yy.level<3||(Zv()>0&&Yy.talent1<20&&(Yy.talent1++,"Paladin"===Yy.job&&Yy.talent1>=20&&U(),"Bard"===Yy.job&&(U(),HI=fn()),ny(),ay()),"Wizard"===Yy.job&&gn())}).on("click","#talent2",function(){Yy.talent1>0&&Yy.level>11&&Zv()>0&&Yy.talent2<20&&(Yy.talent2++,"Bard"!==Yy.job&&"Ranger"!==Yy.job||zy.drawMyHp(),"Cleric"===Yy.job&&(zy.drawMyHp(),U()),ny(),ay())}).on("click","#talent3",function(){Yy.talent1>0&&Yy.talent2>0&&Yy.level>23&&Zv()>0&&Yy.talent3<20&&(Yy.talent3++,"Paladin"===Yy.job&&(U(),HI=fn()),ny(),ay())}).on("click","#talent4",function(){Yy.talent1>0&&Yy.talent2>0&&Yy.talent3>0&&Yy.level>35&&Zv()>0&&Yy.talent4<20&&(Yy.talent4++,ny(),ay())}).on("click","#talent5",function(){Zv()>0&&Yy.talent5<20&&(Yy.talent5++,ny(),ay())}).on("click","#talent6",function(){Yy.talent5>0&&Yy.level>11&&Zv()>0&&Yy.talent6<20&&(Yy.talent6++,ny(),ay())}).on("click","#talent7",function(){Yy.talent5>0&&Yy.talent6>0&&Yy.level>23&&Zv()>0&&Yy.talent7<20&&(Yy.talent7++,ny(),ay())}).on("click","#talent8",function(){Yy.talent5>0&&Yy.talent6>0&&Yy.talent7>0&&Yy.level>35&&Zv()>0&&Yy.talent8<20&&(Yy.talent8++,"Paladin"===Yy.job&&U(),ny(),ay())}).on("click","#talent9",function(){Zv()>0&&Yy.talent9<20&&(Yy.talent9++,ny(),ay())}).on("click","#talent10",function(){Yy.talent9>0&&Yy.level>11&&Zv()>0&&Yy.talent10<20&&(Yy.talent10++,ny(),ay()),"Wizard"===Yy.job&&gn()}).on("click","#talent11",function(){Yy.talent9>0&&Yy.talent10>0&&Yy.level>23&&Zv()>0&&Yy.talent11<20&&(Yy.talent11++,ny(),ay()),"Rogue"===Yy.job&&(U(),HI=fn())}).on("click","#talent12",function(){Yy.talent9>0&&Yy.talent10>0&&Yy.talent11>0&&Yy.level>35&&Zv()>0&&Yy.talent12<20&&(Yy.talent12++,ny(),ay())});var PH={},QH={},RH={};PH.tn=["","Kick","Pummel","Bulwark","Shockwave","Slam","Hemorrhage","Absorb Spell","Intrepid Might","Avenging Strike","Enrage","Subjugate","Decisive Blow"],PH.tal=["","Improve Kick's damage and its interrupt rate","Improve Pummel by using a shield to increase its damage","Improve Bulwark's damage reduction","Improve Shockwave's damage using a special technique with your shield","Convert Slam to hit 3 targets","Improve Hemorrhage's damage","Convert Absorb Spell to Reflect. Reflect causes spell damage on all enemies based on monster spell damage.","Improve Intrepid Might's damage","Improve Avenging Strike's damage","After Using Enrage, your next physical attack's damage is amplified","Improve Subjugate's damage","Improve Decisive Blow's damage"],QH.tn=["","Eagle Strike","Stone Fist Reversal","Inner Peace","Chakra Blast","Windmill Kick","Cheetah Strike","Flying Kick","Dragon Strike","Tiger Strike","Crane Kick","Ancestral Flurry","Intimidation"],QH.tal=["","Improve Eagle Strike's damage","Improve Stone Fist Reversal's damage","Reduce damage taken while Inner Peace is active","Improve Chakra Blast's damage","Improve Windmill Kick's damage","Improve Cheetah Strike's damage","Improve Flying Kick's damage and all elemental damage","Improve Dragon Strike's damage","Improve Tiger Strike's damage","Improve Crane Kick's damage","Improve Ancestral Flurry's damage","Feared targets received amplified physical damage"],RH.tn=["","Lacerate","Evade","Sonic Strike","Mirage Strike","Shadow Strike","Backstab","Cold Blood","Stagger Shot","Hyper Strike","Illusive Mist","Widow Strike","Prowling Gash"],RH.tal=["","Improve Lacerate's damage","Improve all damage while Evade is active","Improve Sonic Strike's damage","Improve Mirage Strike's damage","Improve Shadow Strike's damage","Improve Backstab's damage","Reduce Cold Blood's Cooldown","Improve Stagger Shot's damage","Improve Hyper Strike's skill haste bonus","Increase all damage while in illusive form","Improve Widow Strike's damage","Improve Prowling Gash's damage"],MH.tn=["","Slam","Lay Hands","Greater Healing","Valor","Rebuke","Vengeance","Ardent Judgment","Divine Providence","Purge","Holy Might","Yaulp","Flash of Light"],MH.tal=["","Improve Slam's damage","Reduce Lay Hands's cooldown","Improve Greater Healing's healing power","Improve Valor's armor and health bonuses","Improve Rebuke's damage","Improve Vengeance's damage","Improve Ardent Judgment's damage","Improve Divine Providence's power","Improve Purge's damage","Improve Holy Might's damage","Improve Yaulp's damage","Flash of light strikes your target with arcane damage"],TH.tn=["","Crescent Cleave","Death Strike","Resist Cold","Shadow Vortex","Slam","Life Tap","Harm Touch","Dooming Darkness","Gasping Frenzy","Summon Dead","Fear","Heat Blood"],TH.tal=["","Improve Crescent Cleave's damage","Improve Death Strike's damage","Add a banshee aura to Resist Cold, causing damage to anyone that strikes you.","Improve Shadow Vortex's damage reduction","Improve Slam's damage","Improve Life Tap's damage","Improve Harm Touch's damage","Improve Dooming Darkness's damage","Improve Gasping Frenzy's damage","Improve your minion's damage","Improve damage on feared targets","Improve Heat Blood's damage"],BH.tn=["","Kick","Thistlecoat","Snare","Warder's Rift","Counter Shot","Trueshot Arrow","Faerie Flame","Ignite","Rapid Shot","Feet Like Cat","Spirit of the Wolf","Volley Shot"],BH.tal=["","Improve Kick's damage and its interrupt rate","Adds a Health Bonus to Thistlecoat","Converts auto attack into a rapid flurry of hits","Reduce the damage mitigation of Warder's Rift for your own attacks.","Improve Counter Shot damage","Improve Trueshot Arrow's damage","Improve Faerie Flame's Damage","Improve Ignite's damage","Improve Rapid Shot's damage","Feet Like Cat will also add skill haste","Improve Spirit of the Wolf by adding a lightning strike chance to your arrows","Improve Volley Shot's damage"],DH.tn=["","Chant of Battle","Hymn of Restoration","Anthem De Arms","Euphonic Hymn","Chords of Dissonance","Elemental Rhythms","Chords of Clarity","Desperate Dirge","Song of the Sirens","Boastful Bellow","Consonant Chain","Shield of Songs"],DH.tal=["","Chant of Battle adds physical damage","Improve Hymn of Restoration's healing power and your maximum health","Improve Anthem De Arms's haste and add attack power","Improve Euphonic Hymn's physical damage enhancement","Improve Chords of Dissonance's damage","Improve Elemental Rhythms's resistances","Improve Chords of Clarity's mana regeneration","Improve Desperate Dirge's damage","Improve Song of the Sirens's charmed pet damage","Improve Boastful Bellow's damage","Improve Consonant Chain's slow power","Improve Shield of Songs's shield health"],LH.tn=["","Drones of Doom","Greater Healing","Engulfing Roots","Skin Like Nature","Tornado","Earthquake","Hurricane","Sylvan Creep","Starfire","Drifting Death","Lightning Blast","Volcano"],LH.tal=["","Improve Drones of Doom's damage","Improve Greater Healing","Add Poison Effect To Rooted Mobs","Improve Skin Like Nature's Health Bonus","Improve Tornado's damage","Improve Earthquake's damage","Improve Hurricane's damage","Improve Sylvan Creep's damage","Improve Starfire's damage","Improve Drifting Death's damage","Improve Lightning Blast's damage","Improve Volcano's damage"],HH.tn=["","Smite","Resolution","Binding Earth","Holy Wrath","Sound of Force","Martyr's Blessing","Armor of Faith","Guardian Angel","Expel Corruption","Searing Revelation","Mark of Judgement","Benediction"],HH.tal=["","Improve Smite's damage","Improve Resolution by adding casting haste and health","Add holy damage over time to Binding Earth","Improve Holy Wrath's damage","Improve Sound of Force's damage. Converts auto attack into a rapid flurry of hits","Martyr's Blessing enhances all damage inflicted and received while the skill is active","Improve Armor of Faith's armor bonus and add an attack haste effect.","Improve Guardian Angel's shield strength","Improve Expel Corruption's damage","Add damage component to Searing Revelation","Add Holy Nova explosion to Mark of Judgement","Improve Benediction by adding explosive holy damage"],AH.tn=["","Frost Strike","Togor's Insects","Enstill","Glacial Impact","Scourge","Poison Nova","Affliction","Devouring Plague","Call of the Ancients","Guardian Spirit","Spirit of the Wolf","Reclaim Blood"],AH.tal=["","Improve Frost Strike's damage","Improve Togor's Insects by adding poison damage while the effect is active","Improve Enstill by adding arcane damage while the effect is active","Improve Glacial Impact's damage","Improve Scourge's damage","Improve Poison Nova's damage","Improve Affliction's damage","Improve Devouring Plague's damage","Improve Call of the Ancients's buff power","Improve Guardian Spirit's health and damage","Improve Spirit of the Wolf's attack bonus","Improve Reclaim Blood's healing power"],xH.tn=["","Drain Soul","Ignite Blood","Bond of Death","Howling Terror","Invoke Death","Augment Death","Corpse Explosion","Detonate Soul","Bone Spirit","Cascading Darkness","Invoke Fear","Asystole"],xH.tal=["","Improve Drain Soul's damage","Improve Ignite Blood's damage","Improve Bond of Death's damage","Improve Howling Terror by adding cold damage over time to all feared targets","Improve Invoke Death by adding health and damage to your pet","Improve Augment Death's damage and healing","Improve Corpse Explosion's damage","Improve Detonate Soul's damage","Improve Bone Spirit's damage","Improve Cascading Darkness's damage","Improve Invoke Fear by enhancing all damage on feared targets","Improve Asystole's damage"],EH.tn=["","Chaos Flux","Color Shift","Discordant Barrier","Mystic Rune","Cajoling Whispers","Shiftless Deeds","Enchant Weapon","Alacrity","Gasping Embrace","Mesmerize","Gravity Flux","Tashania"],EH.tal=["","Improve Chaos Flux's damage","Improve Color Shift by adding arcane damage","Improve Discordant Barrier's armor and health","Improve Mystic Rune's shield power","Improve charmed mob's damage","Improve Shiftless Deeds by adding cold damage over time","Improve Enchant Weapon's damage","Improve Alacrity by adding additional hits to auto attack","Improve Gasping Embrace's damage","Convert Mesmerize into Jubilee, a dazzling explosion that inflicts arcane damage. Jubilee does not mesmerize.","Improve Gravity Flux's damage","Improve Tashania by adding arcane damage over time"],GH.tn=["","Lava Bolt","Shield of Lava","Firestorm","Armageddon","Summon Elemental","Burnout","Reclaim Elements","Elemental Fury","Phantom Plate","Frozen Orb","Elemental Armor","Psionic Storm"],GH.tal=["","Improve Lava Bolt's damage","Improve Shield of Lava's damage","Improve Firestorm's damage","Improve Armageddon's damage","Improve summoned elementals' health and damage","Improve Burnout's damage and healing","Improve Reclaim Elements's healing","Improve Elemental Fury's damage","Improve Phantom Plate's armor and health bonus","Improve Frozen Orb's damage","Improve Elemental Armor's resistances","Improve Psionic Storm's damage"],qH.tn=["","Charged Bolts","Arcane Missiles","Chain Lightning","Mirror Images","Ice Bolt","Deep Freeze","Glacial Spike","Ice Comet","Vizier's Shielding","Fireball","Harness Ether","Meteor"],qH.tal=["","Improve Charged Bolts' damage","Improve Arcane Missiles' damage","Improve Chain Lightning's damage","Improve Mirror Images' damage","Improve Ice Bolt's damage","Improve Deep Freeze's damage","Improve Glacial Spike's damage","Improve Ice Comet's damage","Improve Vizier's Shielding's armor and health","Improve Fireball's damage","Improve Harness Ether's damage amplification","Improve Meteor's damage"];var FH="<p class='red'>Required Level: 12</p>",NH="<p class='red'>Required Level: 24</p>",jH="<p class='red'>Required Level: 36</p>";zy.warriorTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+PH.tn[1]+"</p>";n=PH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+n+"</p>","Warrior"===Yy.job&&Yy.level<3&&(e+='<p class="red">Level 3 Required</p>');else{var a=3*(t=$e());a>60&&(a=60),e+="<p>"+n+"</p><p>Current Skill Level: "+t+"<br>Damage: +"+2*t+" percent<br>Interrupt Chance: +"+a+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Drain Mana<br><br>+1 Pummel Talent<br>+1 Bulwark Talent<br>+1 Shockwave Talent'}else if("talent2"===DI){e='<p class="green">'+PH.tn[2]+"</p>";n=PH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=Ue())+"<br>Damage: +"+P(2.6*t)+" percent of shield's armor value</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Riposte While Invincible<br><br>+1 Kick Talent<br>+1 Bulwark Talent<br>+1 Shockwave Talent'}else if("talent3"===DI){e='<p class="green">'+PH.tn[3]+"</p>";n=PH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=Je())+"<br>Damage Reduction: +"+t+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>+5 to Bulwark Duration<br><br>+1 Kick Talent<br>+1 Pummel Talent<br>+2 Shockwave Talent'}else if("talent4"===DI){e='<p class="green">'+PH.tn[4]+"</p>";n=PH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=Ze())+"<br>Damage: +"+P(1.75*t)+" percent of shield's armor value</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Shockwave Double Hits<br><br>+2 Kick Talent<br>+2 Pummel Talent<br>+2 Bulwark Talent'}else if("talent5"===DI){e='<p class="green">'+PH.tn[5]+"</p>";n=PH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=ea())+"<br>Damage: +"+P(1.25*t)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>A Small Shockwave Hits All Targets<br><br>+1 Hemorrhage Talent<br>+1 Absorb Spell Talent<br>+1 Intrepid Might Talent'}else if("talent6"===DI){e='<p class="green">'+PH.tn[6]+"</p>";n=PH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=aa())+"<br>Damage: +"+P(2.1*t)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Hemorrhage Hits 3 Targets<br><br>+1 Slam Talent<br>+1 Absorb Spell Talent<br>+1 Intrepid Might Talent'}else if("talent7"===DI){e='<p class="green">'+PH.tn[7]+"</p>";n=PH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=na())+"<br>Damage: +"+20*t+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Half Absorb Spell Cooldown<br><br>+1 Slam Talent<br>+1 Hemorrhage Talent<br>+2 Intrepid Might Talent'}else if("talent8"===DI){e='<p class="green">'+PH.tn[8]+"</p>";n=PH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=ta())+"<br>Damage: +"+P(2.7*t)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>+5 Auto Attacks<br><br>+2 Slam Talent<br>+2 Hemorrhage Talent<br>+2 Absorb Spell Talent'}else if("talent9"===DI){e='<p class="green">'+PH.tn[9]+"</p>";n=PH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=ia())+"<br>Damage: +"+t+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+5 Percent Damage Bonus<br><br>+1 Enrage Talent<br>+1 Subjugate Talent<br>+1 Decisive Blow Talent'}else if("talent10"===DI){e='<p class="green">'+PH.tn[10]+"</p>";n=PH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=oa())+"<br>Damage Amplification: +"+10*t+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Enrage Triggers Frenzy<br><br>+1 Avenging Strike Talent<br>+1 Subjugate Talent<br>+1 Decisive Blow Talent'}else if("talent11"===DI){e='<p class="green">'+PH.tn[11]+"</p>";n=PH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=ra())+"<br>Damage: +"+P(2.4*t)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>8% Chance Hemorrhage Damage Activates Subjugate<br><br>+1 Avenging Strike Talent<br>+1 Enrage Talent<br>+2 Decisive Blow Talent'}else if("talent12"===DI){e='<p class="green">'+PH.tn[12]+"</p>";var n=PH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+n+"</p>";else{var t=la();e+="<p>"+n+"</p><p>Current Skill Level: "+t+"<br>Damage: +"+P(1.8*t)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Decisive Blow Double-Hits With Arcane Damage<br><br>+2 Avenging Strike Talent<br>+2 Enrage Talent<br>+2 Subjugate Talent'}return e},zy.monkTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+QH.tn[1]+"</p>";a=QH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+5*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Stun Target For 3 Seconds<br><br>+1 Stone Fist Reversal Talent<br>+1 Inner Peace Talent<br>+1 Chakra Blast Talent'}else if("talent2"===DI){e='<p class="green">'+QH.tn[2]+"</p>";a=QH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Damage: +"+P(6.6*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Magical Attacks Also Countered<br><br>+1 Eagle Strike Talent<br>+1 Inner Peace Talent<br>+1 Chakra Blast Talent'}else if("talent3"===DI){e='<p class="green">'+QH.tn[3]+"</p>";a=QH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Damage Reduction: +"+P(1.6*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Fear Duration Doubled<br>Cooldown Reduced 15 Seconds<br><br>+1 Eagle Strike Talent<br>+1 Stone Fist Reversal Talent<br>+2 Chakra Blast Talent'}else if("talent4"===DI){e='<p class="green">'+QH.tn[4]+"</p>";a=QH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage: +"+P(1.9*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Arcane Chi Blast On All Targets<br><br>+2 Eagle Strike Talent<br>+2 Stone Fist Reversal Talent<br>+2 Inner Peace Talent'}else if("talent5"===DI){e='<p class="green">'+QH.tn[5]+"</p>";a=QH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+P(2.25*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Wave of Frost Strikes All Targets<br><br>+1 Cheetah Strike Talent<br>+1 Flying Kick Talent<br>+1 Dragon Strike Talent'}else if("talent6"===DI){e='<p class="green">'+QH.tn[6]+"</p>";a=QH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+2*n+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Cone of Lightning Attack<br><br>+1 Windmill Kick Talent<br>+1 Flying Kick Talent<br>+1 Dragon Strike Talent'}else if("talent7"===DI){e='<p class="green">'+QH.tn[7]+"</p>";a=QH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Damage: +"+P(1.8*n)+" percent<br>Elemental Damage: +"+P(1.5*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Fire, Cold, and Lightning Strikes Hit Your Target<br><br>+1 Windmill Kick Talent<br>+1 Cheetah Strike Talent<br>+2 Dragon Strike Talent'}else if("talent8"===DI){e='<p class="green">'+QH.tn[8]+"</p>";a=QH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(7.3*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>+30 All Resists<br><br>+2 Windmill Kick Talent<br>+2 Cheetah Strike Talent<br>+2 Flying Kick Talent'}else if("talent9"===DI){e='<p class="green">'+QH.tn[9]+"</p>";a=QH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Damage: +"+n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+5 Percent Damage<br><br>+1 Crane Kick Talent<br>+1 Ancestral Flurry Talent<br>+1 Intimidation Talent'}else if("talent10"===DI){e='<p class="green">'+QH.tn[10]+"</p>";a=QH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(2.5*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Kick Target Twice<br><br>+1 Tiger Strike Talent<br>+1 Ancestral Flurry Talent<br>+1 Intimidation Talent'}else if("talent11"===DI){e='<p class="green">'+QH.tn[11]+"</p>";a=QH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+P(1.8*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Immune to Iron Maiden and Thorns<br><br>+1 Tiger Strike Talent<br>+1 Crane Kick Talent<br>+2 Intimidation Talent'}else if("talent12"===DI){e='<p class="green">'+QH.tn[12]+"</p>";var a=QH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage Amplified: +"+P(1.2*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Immune to Fear<br><br>+2 Tiger Strike Talent<br>+2 Crane Kick Talent<br>+2 Ancestral Flurry Talent'}return e},zy.rogueTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+RH.tn[1]+"</p>";a=RH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+P(3.3*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Leech 20% of Lacerate Damage, But Add a 12-Second Cooldown<br><br>+1 Evade Talent<br>+1 Sonic Strike Talent<br>+1 Mirage Strike Talent'}else if("talent2"===DI){e='<p class="green">'+RH.tn[2]+"</p>";a=RH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Damage: +"+P(1.25*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Evade Lasts Full Duration<br><br>+1 Lacerate Talent<br>+1 Sonic Strike Talent<br>+1 Mirage Strike Talent'}else if("talent3"===DI){e='<p class="green">'+RH.tn[3]+"</p>";a=RH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Damage: +"+P(2.8*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Chaos Flux<br><br>+1 Lacerate Talent<br>+1 Evade Talent<br>+2 Mirage Strike Talent'}else if("talent4"===DI){e='<p class="green">'+RH.tn[4]+"</p>";a=RH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage: +"+P(3.3*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Reduce Cooldown By 2 Seconds<br><br>+2 Lacerate Talent<br>+2 Evade Talent<br>+2 Sonic Strike Talent'}else if("talent5"===DI){e='<p class="green">'+RH.tn[5]+"</p>";a=RH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+5 Percent Damage Bonus<br><br>+1 Backstab Talent<br>+1 Cold Blood Talent<br>+1 Stagger Shot Talent'}else if("talent6"===DI){e='<p class="green">'+RH.tn[6]+"</p>";a=RH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(1.75*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Backstab Double Hits<br><br>+1 Shadow Strike Talent<br>+1 Cold Blood Talent<br>+1 Stagger Shot Talent'}else if("talent7"===DI){e='<p class="green">'+RH.tn[7]+"</p>";a=RH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Cooldown Reduced: +"+P(.75*n)+" seconds</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>5% Chance to Assassinate<br><br>+1 Shadow Strike Talent<br>+1 Backstab Talent<br>+2 Stagger Shot Talent'}else if("talent8"===DI){e='<p class="green">'+RH.tn[8]+"</p>";a=RH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(6.3*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Causes Snare Effect<br><br>+2 Shadow Strike Talent<br>+2 Backstab Talent<br>+2 Cold Blood Talent'}else if("talent9"===DI){e='<p class="green">'+RH.tn[9]+"</p>";a=RH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Skill Haste Bonus: +"+P(.666*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Increase Dodge Chance By 8%<br><br>+1 Illusive Mist Talent<br>+1 Widow Strike Talent<br>+1 Prowling Gash Talent'}else if("talent10"===DI){e='<p class="green">'+RH.tn[10]+"</p>";a=RH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(1.2*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Flash Powder Ignites, Striking 3 Targets With Fire Damage<br><br>+1 Hyper Strike Talent<br>+1 Widow Strike Talent<br>+1 Prowling Gash Talent'}else if("talent11"===DI){e='<p class="green">'+RH.tn[11]+"</p>";a=RH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+P(7.25*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Enchant Weapons With Poison Damage<br><br>+1 Hyper Strike Talent<br>+1 Illusive Mist Talent<br>+2 Prowling Gash Talent'}else if("talent12"===DI){e='<p class="green">'+RH.tn[12]+"</p>";var a=RH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: +"+P(3.3*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Reduce Cooldown to 12 Seconds<br>Double The Number Of Hits<br><br>+2 Hyper Strike Talent<br>+2 Illusive Mist Talent<br>+2 Widow Strike Talent'}return e},zy.paladinTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+MH.tn[1]+"</p>";a=MH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+P(1.3*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+50 Fear Resistance<br><br>+1 Lay Hands Talent<br>+1 Greater Healing Talent<br>+1 Valor Talent'}else if("talent2"===DI){e='<p class="green">'+MH.tn[2]+"</p>";a=MH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Cooldown: -"+P(5*n)+" seconds</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Counter-Attack Physical Damage For 20 Seconds<br><br>+1 Slam Talent<br>+1 Greater Healing Talent<br>+1 Valor Talent'}else if("talent3"===DI){e='<p class="green">'+MH.tn[3]+"</p>";a=MH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Healing: +"+P(1.35*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Enchant Weapons With Arcane Damage<br><br>+1 Slam Talent<br>+1 Lay Hands Talent<br>+2 Valor Talent'}else if("talent4"===DI){e='<p class="green">'+MH.tn[4]+"</p>";a=MH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Health: +"+P(10.75*n)+" percent<br><br>Armor: +"+P(5.1*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Parry, Dodge, and Riposte Trigger Repudiation<br><br>+2 Slam Talent<br>+2 Lay Hands Talent<br>+2 Greater Healing Talent'}else if("talent5"===DI){e='<p class="green">'+MH.tn[5]+"</p>";a=MH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+P(2.75*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Lightning Strikes 5 Targets<br><br>+1 Vengeance Talent<br>+1 Ardent Judgment Talent<br>+1 Divine Providence Talent'}else if("talent6"===DI){e='<p class="green">'+MH.tn[6]+"</p>";a=MH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(2.2*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>A Beam of Holy Light Strikes All Targets<br><br>+1 Rebuke Talent<br>+1 Ardent Judgment Talent<br>+1 Divine Providence Talent'}else if("talent7"===DI){e='<p class="green">'+MH.tn[7]+"</p>";a=MH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Damage: +"+P(3.5*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Blind Targets Take Additional 30% damage<br><br>+1 Rebuke Talent<br>+1 Vengeance Talent<br>+2 Divine Providence Talent'}else if("talent8"===DI){e='<p class="green">'+MH.tn[8]+"</p>";a=MH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Poison Resist: +"+P(2.6*n)+" percent<br>Lightning Resist: +"+P(2.6*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>+20% Skill Haste<br><br>+2 Rebuke Talent<br>+2 Vengeance Talent<br>+2 Ardent Judgment Talent'}else if("talent9"===DI){e='<p class="green">'+MH.tn[9]+"</p>";a=MH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Damage: +"+1*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+5 Percent Damage Bonus<br><br>+1 Holy Might Talent<br>+1 Yaulp Talent<br>+1 Flash of Light Talent'}else if("talent10"===DI){e='<p class="green">'+MH.tn[10]+"</p>";a=MH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(4.5*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>+40 Percent Damage Bonus On Stunned Targets<br><br>+1 Purge Talent<br>+1 Yaulp Talent<br>+1 Flash of Light Talent'}else if("talent11"===DI){e='<p class="green">'+MH.tn[11]+"</p>";a=MH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+n+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Yaulp Creates a Magical Shield That Absorbs Health<br><br>+1 Purge Talent<br>+1 Holy Might Talent<br>+2 Flash of Light Talent'}else if("talent12"===DI){e='<p class="green">'+MH.tn[12]+"</p>";var a=MH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: "+P(6.9*n)+" percent of attack power</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br>Cooldown Reduced 30 Seconds<br><br>+2 Purge Talent<br>+2 Holy Might Talent<br>+2 Yaulp Talent'}return e},zy.shadowKnightTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+TH.tn[1]+"</p>";a=TH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+5 Percent Damage<br><br>+1 Death Strike Talent<br>+1 Resist Cold Talent<br>+1 Shadow Vortex Talent'}else if("talent2"===DI){e='<p class="green">'+TH.tn[2]+"</p>";a=TH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Damage: +"+P(1.8*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Causes Bleed Effect<br><br>+1 Crescent Cleave Talent<br>+1 Resist Cold Talent<br>+1 Shadow Vortex Talent'}else if("talent3"===DI){e='<p class="green">'+TH.tn[3]+"</p>";a=TH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Thorns: +"+P(1.7*n)+" damage</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>All Physical Damage Slows Target<br>Resistant to Cold Effects<br><br>+1 Crescent Cleave Talent<br>+1 Death Strike Talent<br>+2 Shadow Vortex Talent'}else if("talent4"===DI){e='<p class="green">'+TH.tn[4]+"</p>";a=TH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage Reduction: +"+P(.4*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>8% Chance Physical Damage Negated<br><br>+2 Crescent Cleave Talent<br>+2 Death Strike Talent<br>+2 Resist Cold Talent'}else if("talent5"===DI){e='<p class="green">'+TH.tn[5]+"</p>";a=TH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+P(2.5*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+ 50 Stun Reduction<br><br>+1 Life Tap Talent<br>+1 Harm Touch Talent<br>+1 Dooming Darkness Talent'}else if("talent6"===DI){e='<p class="green">'+TH.tn[6]+"</p>";a=TH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(1.75*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Reduce Cooldown By 10 Seconds<br><br>+1 Slam Talent<br>+1 Harm Touch Talent<br>+1 Dooming Darkness Talent'}else if("talent7"===DI){e='<p class="green">'+TH.tn[7]+"</p>";a=TH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Damage: +"+P(5*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Cooldown Reduced By 40 Seconds<br>Hits 3 Targets<br><br>+1 Slam Talent<br>+1 Life Tap Talent<br>+2 Dooming Darkness Talent'}else if("talent8"===DI){e='<p class="green">'+TH.tn[8]+"</p>";a=TH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(3.6*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits All Targets<br><br>+2 Slam Talent<br>+2 Life Tap Talent<br>+2 Harm Touch Talent'}else if("talent9"===DI){e='<p class="green">'+TH.tn[9]+"</p>";a=TH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Damage: +"+P(1.6*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Doubles Pet Health<br><br>+1 Summon Dead Talent<br>+1 Fear Talent<br>+1 Heat Blood Talent'}else if("talent10"===DI){e='<p class="green">'+TH.tn[10]+"</p>";a=TH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Pet Damage: +"+P(6.6*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>35% Chance Pet Mimes Your Physical Attacks<br><br>+1 Gasping Frenzy Talent<br>+1 Fear Talent<br>+1 Heat Blood Talent'}else if("talent11"===DI){e='<p class="green">'+TH.tn[11]+"</p>";a=TH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+P(.85*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Reduce Strengthen Dead Cooldown By 45 Seconds<br><br>+1 Gasping Frenzy Talent<br>+1 Summon Dead Talent<br>+2 Heat Blood Talent'}else if("talent12"===DI){e='<p class="green">'+TH.tn[12]+"</p>";var a=TH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: +"+P(5.7*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Boiling Mobs Take 15% More Damage<br><br>+2 Gasping Frenzy Talent<br>+2 Summon Dead Talent<br>+2 Fear Talent'}return e},zy.rangerTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+BH.tn[1]+"</p>";n=BH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+n+"</p>";else{var a=3*(t=$e());a>60&&(a=60),e+="<p>"+n+"</p><p>Current Skill Level: "+t+"<br>Damage: +"+P(2.4*t)+" percent<br>Interrupt Chance: +"+a+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>50% Chance To Disarm Target, Reducing Next Attack By 75%<br><br>+1 Thistlecoat Talent<br>+1 Snare Talent<br>+1 Warder\'s Rift Talent'}else if("talent2"===DI){e='<p class="green">'+BH.tn[2]+"</p>";n=BH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=Ue())+"<br>Health: +"+P(1.42*t)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>75% Chance To Reflect Damage<br><br>+1 Kick Talent<br>+1 Snare Talent<br>+1 Warder\'s Rift Talent'}else if("talent3"===DI){e='<p class="green">'+BH.tn[3]+"</p>";n=BH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=Je())+"<br>Auto Attack: +"+dS.ceil(t/5.8)+" hits</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>+12 Percent Parry and Riposte<br><br>+1 Kick Talent<br>+1 Thistlecoat Talent<br>+2 Warder\'s Rift Talent'}else if("talent4"===DI){e='<p class="green">'+BH.tn[4]+"</p>";n=BH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=Ze())+"<br>Reduce Mitigation: +"+P(1.25*t)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Successful Parry Triggers Regen<br><br>+2 Kick Talent<br>+2 Thistlecoat Talent<br>+2 Snare Talent'}else if("talent5"===DI){e='<p class="green">'+BH.tn[5]+"</p>";n=BH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=ea())+"<br>Damage: +"+P(1.5*t)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Stuns Target For 1.5 Seconds<br><br>+1 Trueshot Arrow Talent<br>+1 Faerie Flame Talent<br>+1 Ignite Talent'}else if("talent6"===DI){e='<p class="green">'+BH.tn[6]+"</p>";n=BH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=aa())+"<br>Damage: +"+P(2.1*t)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Ignore Target Defenses<br><br>+1 Counter Shot Talent<br>+1 Faerie Flame Talent<br>+1 Ignite Talent'}else if("talent7"===DI){e='<p class="green">'+BH.tn[7]+"</p>";n=BH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=na())+"<br>Damage: +"+P(3.1*t)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Trueshot Arrow Fires Third Arrow That Hits 3 Targets<br><br>+1 Counter Shot Talent<br>+1 Trueshot Arrow Talent<br>+2 Ignite Talent'}else if("talent8"===DI){e='<p class="green">'+BH.tn[8]+"</p>";n=BH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=ta())+"<br>Damage: +"+P(4.2*t)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>30% Chance Arrows Cause Explosive Damage<br><br>+2 Counter Shot Talent<br>+2 Trueshot Arrow Talent<br>+2 Faerie Flame Talent'}else if("talent9"===DI){e='<p class="green">'+BH.tn[9]+"</p>";n=BH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=ia())+"<br>Damage: +"+t+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+5 Percent Damage Bonus<br><br>+1 Feet Like Cat Talent<br>+1 Spirit of the Wolf Talent<br>+1 Volley Shot Talent'}else if("talent10"===DI){e='<p class="green">'+BH.tn[10]+"</p>";n=BH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=oa())+"<br>Skill Haste: +"+P(.75*t)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Increase Number Of Volley Shot Arrows By 50%<br><br>+1 Rapid Shot Talent<br>+1 Spirit of the Wolf Talent<br>+1 Volley Shot Talent'}else if("talent11"===DI){e='<p class="green">'+BH.tn[11]+"</p>";n=BH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+n+"</p>";else{e+="<p>"+n+"</p><p>Current Skill Level: "+(t=ra())+"<br>Lightning Chance: +"+P(1.2*t)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>+12 Percent To Dual Wield And Double Attack<br><br>+1 Rapid Shot Talent<br>+1 Feet Like Cat Talent<br>+2 Volley Shot Talent'}else if("talent12"===DI){e='<p class="green">'+BH.tn[12]+"</p>";var n=BH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+n+"</p>";else{var t=la();e+="<p>"+n+"</p><p>Current Skill Level: "+t+"<br>Damage: +"+P(1.33*t)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Rapid Shot Fires Extra Shot<br><br>+2 Rapid Shot Talent<br>+2 Feet Like Cat Talent<br>+2 Spirit of the Wolf Talent'}return e},zy.bardTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+DH.tn[1]+"</p>";a=DH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+P(3.5*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Enchant Your Weapons With An Arcane Melody<br><br>+1 Hymn of Restoration Talent<br>+1 Anthem De Arms Talent<br>+1 Euphonic Hymn Talent'}else if("talent2"===DI){e='<p class="green">'+DH.tn[2]+"</p>";a=DH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Healing: +"+P(1.35*n)+" percent<br>Maximum Health: +"+P(1.55*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>15% Chance Weapons Channel Arcane Energy<br><br>+1 Chant of Battle Talent<br>+1 Anthem De Arms Talent<br>+1 Euphonic Hymn Talent'}else if("talent3"===DI){e='<p class="green">'+DH.tn[3]+"</p>";a=DH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Haste: +"+P(1.15*n)+" percent<br>Attack Power: +"+P(1.68*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>15% chance to Frenzy when you take damage<br><br>+1 Chant of Battle Talent<br>+1 Hymn of Restoration Talent<br>+2 Euphonic Hymn Talent'}else if("talent4"===DI){e='<p class="green">'+DH.tn[4]+"</p>";a=DH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage: +"+P(4.75*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>8% Chance Weapons Cast Sonic Disruption<br><br>+2 Chant of Battle Talent<br>+2 Hymn of Restoration Talent<br>+2 Anthem De Arms Talent'}else if("talent5"===DI){e='<p class="green">'+DH.tn[5]+"</p>";a=DH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+P(4.7*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Double Song Duration<br><br>+1 Elemental Rhythms Talent<br>+1 Chords of Clarity Talent<br>+1 Desperate Dirge Talent'}else if("talent6"===DI){e='<p class="green">'+DH.tn[6]+"</p>";a=DH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Resistances: +"+P(2.3*n)+"</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Boost Max Resistances to 340<br><br>+1 Chords of Dissonance Talent<br>+1 Chords of Clarity Talent<br>+1 Desperate Dirge Talent'}else if("talent7"===DI){e='<p class="green">'+DH.tn[7]+"</p>";a=DH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Mana regeneration: +"+P(5.3*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Song Damage Has A 15% Chance To Stun<br><br>+1 Chords of Dissonance Talent<br>+1 Elemental Rhythms Talent<br>+2 Desperate Dirge Talent'}else if("talent8"===DI){e='<p class="green">'+DH.tn[8]+"</p>";a=DH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(3.6*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Song Damage Has A 8% Chance To Restore Health<br><br>+2 Chords of Dissonance Talent<br>+2 Elemental Rhythms Talent<br>+2 Chords of Clarity Talent'}else if("talent9"===DI){e='<p class="green">'+DH.tn[9]+"</p>";a=DH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Pet Damage: +"+P(12.8*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Charmed Minions Cause Bleed Damage<br><br>+1 Boastful Bellow Talent<br>+1 Consonant Chain Talent<br>+1 Shield of Songs Talent'}else if("talent10"===DI){e='<p class="green">'+DH.tn[10]+"</p>";a=DH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(4.75*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Charmed Pets Use Frenzy<br><br>+1 Song of the Sirens Talent<br>+1 Consonant Chain Talent<br>+1 Shield of Songs Talent'}else if("talent11"===DI){e='<p class="green">'+DH.tn[11]+"</p>";a=DH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Slow: +"+P(1.2*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Consonant Chain Poisons Target While Active<br><br>+1 Song of the Sirens Talent<br>+1 Boastful Bellow Talent<br>+2 Shield of Songs Talent'}else if("talent12"===DI){e='<p class="green">'+DH.tn[12]+"</p>";var a=DH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Shield Health: +"+P(3.15*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>+10% Chance Pet Covers Damage<br><br>+2 Song of the Sirens Talent<br>+2 Boastful Bellow Talent<br>+2 Consonant Chain Talent'}return e},zy.druidTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+LH.tn[1]+"</p>";a=LH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+P(6.2*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Reduce Affected Mobs\' Damage By 10%<br><br>+1 Greater Healing Talent<br>+1 Engulfing Roots Talent<br>+1 Skin Like Nature Talent'}else if("talent2"===DI){e='<p class="green">'+LH.tn[2]+"</p>";a=LH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Healing: +"+P(1.25*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Add Regen Effect<br><br>+1 Drones of Doom Talent<br>+1 Engulfing Roots Talent<br>+1 Skin Like Nature Talent'}else if("talent3"===DI){e='<p class="green">'+LH.tn[3]+"</p>";a=LH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Damage: +"+P(6.5*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Roots Affect Flying Mobs<br><br>+1 Drones of Doom Talent<br>+1 Greater Healing Talent<br>+2 Skin Like Nature Talent'}else if("talent4"===DI){e='<p class="green">'+LH.tn[4]+"</p>";a=LH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Health: +"+P(9.5*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>+Lightning, Cold, and Fire Absorb Bonus<br><br>+2 Drones of Doom Talent<br>+2 Greater Healing Talent<br>+2 Engulfing Roots Talent'}else if("talent5"===DI){e='<p class="green">'+LH.tn[5]+"</p>";a=LH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+P(3*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Remove Tornado\'s Cooldown<br><br>+1 Earthquake Talent<br>+1 Hurricane Talent<br>+1 Sylvan Creep Talent'}else if("talent6"===DI){e='<p class="green">'+LH.tn[6]+"</p>";a=LH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(3.75*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>8% Chance to Stun Targets<br>Cooldown Reduced 12 Seconds<br><br>+1 Tornado Talent<br>+1 Hurricane Talent<br>+1 Sylvan Creep Talent'}else if("talent7"===DI){e='<p class="green">'+LH.tn[7]+"</p>";a=LH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Damage: +"+P(4.15*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>12% Chance To Freeze Targets<br><br>+1 Tornado Talent<br>+1 Earthquake Talent<br>+2 Sylvan Creep Talent'}else if("talent8"===DI){e='<p class="green">'+LH.tn[8]+"</p>";a=LH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(6.7*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Cooldown Reduced to 30<br><br>+2 Tornado Talent<br>+2 Earthquake Talent<br>+2 Hurricane Talent'}else if("talent9"===DI){e='<p class="green">'+LH.tn[9]+"</p>";a=LH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Damage: +"+2*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+10 Percent Damage Bonus<br><br>+1 Drifting Death Talent<br>+1 Lightning Blast Talent<br>+1 Volcano Talent'}else if("talent10"===DI){e='<p class="green">'+LH.tn[10]+"</p>";a=LH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(2.5*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Ignore Resists Of Affected Mobs<br><br>+1 Starfire Talent<br>+1 Lightning Blast Talent<br>+1 Volcano Talent'}else if("talent11"===DI){e='<p class="green">'+LH.tn[11]+"</p>";a=LH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+P(6.8*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Stuns All Targets<br><br>+1 Starfire Talent<br>+1 Drifting Death Talent<br>+2 Volcano Talent'}else if("talent12"===DI){e='<p class="green">'+LH.tn[12]+"</p>";var a=LH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: +"+P(6.2*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Volcano Summons Thunderstorm<br>Reduce Cooldown to 30<br><br>+2 Starfire Talent<br>+2 Drifting Death Talent<br>+2 Lightning Blast Talent'}return e},zy.clericTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+HH.tn[1]+"</p>";a=HH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+2*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+10 Percent Damage Bonus<br><br>+1 Resolution Talent<br>+1 Binding Earth Talent<br>+1 Holy Wrath Talent'}else if("talent2"===DI){e='<p class="green">'+HH.tn[2]+"</p>";a=HH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Health: +"+P(12.5*n)+" percent<br>Casting Haste: +"+P(1.4*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Miracle Saves You From Death. Cannot Happen More Than Once Every 5 Minutes.<br><br>+1 Smite Talent<br>+1 Binding Earth Talent<br>+1 Holy Wrath Talent'}else if("talent3"===DI){e='<p class="green">'+HH.tn[3]+"</p>";a=HH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Damage: +"+P(1.85*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Holy Wrath Cooldown Reduced to 24 Seconds<br><br>+1 Smite Talent<br>+1 Resolution Talent<br>+2 Holy Wrath Talent'}else if("talent4"===DI){e='<p class="green">'+HH.tn[4]+"</p>";a=HH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage: +"+P(9.5*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+2 Smite Talent<br>+2 Resolution Talent<br>+2 Binding Earth Talent'}else if("talent5"===DI){e='<p class="green">'+HH.tn[5]+"</p>";a=HH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+P(8.4*n)+" percent<br>Auto Attack: +"+dS.ceil(n/4)+" hits</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>15% Chance Auto Attack Triggers Divine Justice<br><br>+1 Martyr\'s Blessing Talent<br>+1 Armor of Faith Talent<br>+1 Guardian Angel Talent'}else if("talent6"===DI){e='<p class="green">'+HH.tn[6]+"</p>";a=HH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(12.5*n)+" percent<br>Damage Received: +"+P(6.3*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Ignore Barrier and Sanctuary Effects<br><br>+1 Sound of Force Talent<br>+1 Armor of Faith Talent<br>+1 Guardian Angel Talent'}else if("talent7"===DI){e='<p class="green">'+HH.tn[7]+"</p>";a=HH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Haste: +"+P(1.6*n)+" percent<br>Armor: +"+P(11.3*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>8% Chance Auto Attack Triggers Fist of the Heavens<br><br>+1 Sound of Force Talent<br>+1 Martyr\'s Blessing Talent<br>+2 Guardian Angel Talent'}else if("talent8"===DI){e='<p class="green">'+HH.tn[8]+"</p>";a=HH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Absorbs: +"+P(2.25*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+="<p class=\"green\">Skill Level 20 Bonus:</p>22% Chance Auto Attack Triggers Vicar's Wrath While Shield Is Active<br><br>+2 Sound of Force Talent<br>+2 Martyr's Blessing Talent<br>+2 Armor of Faith Talent"}else if("talent9"===DI){e='<p class="green">'+HH.tn[9]+"</p>";a=HH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Damage: +"+P(6.2*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+1 Searing Revelation Talent<br>+1 Mark of Judgement Talent<br>+1 Benediction Talent'}else if("talent10"===DI){e='<p class="green">'+HH.tn[10]+"</p>";a=HH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(7.78*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>24% Chance Mobs Act Confused<br><br>+1 Expel Corruption Talent<br>+1 Mark of Judgement Talent<br>+1 Benediction Talent'}else if("talent11"===DI){e='<p class="green">'+HH.tn[11]+"</p>";a=HH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+P(5.2*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Cooldown Reduced to 20<br><br>+1 Expel Corruption Talent<br>+1 Searing Revelation Talent<br>+2 Benediction Talent'}else if("talent12"===DI){e='<p class="green">'+HH.tn[12]+"</p>";var a=HH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: +"+P(9.5*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Spells Always Benefit From Mark of Judgement Status Effects<br><br>+2 Expel Corruption Talent<br>+2 Searing Revelation Talent<br>+2 Mark of Judgement Talent'}return e},zy.shamanTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+AH.tn[1]+"</p>";a=AH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+2*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+10 Percent Damage Bonus<br><br>+1 Togor\'s Insects Talent<br>+1 Enstill Talent<br>+1 Glacial Impact Talent'}else if("talent2"===DI){e='<p class="green">'+AH.tn[2]+"</p>";a=AH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Damage: +"+P(3.3*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits All Targets<br><br>+1 Frost Strike Talent<br>+1 Enstill Talent<br>+1 Glacial Impact Talent'}else if("talent3"===DI){e='<p class="green">'+AH.tn[3]+"</p>";a=AH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Damage: +"+P(4.7*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Root Recovers Health and Mana From Slain Targets<br><br>+1 Frost Strike Talent<br>+1 Togor\'s Insects Talent<br>+2 Glacial Impact Talent'}else if("talent4"===DI){e='<p class="green">'+AH.tn[4]+"</p>";a=AH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage: +"+P(5.5*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+2 Frost Strike Talent<br>+2 Togor\'s Insects Talent<br>+2 Enstill Talent'}else if("talent5"===DI){e='<p class="green">'+AH.tn[5]+"</p>";a=AH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+P(6.5*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Counter Fear With Glacial Impact<br><br>+1 Poison Nova Talent<br>+1 Affliction Talent<br>+1 Devouring Plague Talent'}else if("talent6"===DI){e='<p class="green">'+AH.tn[6]+"</p>";a=AH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(6.2*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Adds Additional Poison Damage Over Time<br><br>+1 Scourge Talent<br>+1 Affliction Talent<br>+1 Devouring Plague Talent'}else if("talent7"===DI){e='<p class="green">'+AH.tn[7]+"</p>";a=AH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Damage: +"+P(4.2*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+1 Scourge Talent<br>+1 Poison Nova Talent<br>+2 Devouring Plague Talent'}else if("talent8"===DI){e='<p class="green">'+AH.tn[8]+"</p>";a=AH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(4.8*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Devouring Plague Steals Mana<br><br>+2 Scourge Talent<br>+2 Poison Nova Talent<br>+2 Affliction Talent'}else if("talent9"===DI){e='<p class="green">'+AH.tn[9]+"</p>";a=AH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Buff Enhancement: +"+P(2.6*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+42 Percent Attack Haste<br><br>+1 Guardian Spirit Talent<br>+1 Spirit of the Wolf Talent<br>+1 Reclaim Blood Talent'}else if("talent10"===DI){e='<p class="green">'+AH.tn[10]+"</p>";a=AH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Health: +"+P(14.7*n)+" percent<br>Damage: +"+P(8.6*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>7% Chance To Maul Victims<br><br>+1 Call of the Ancients Talent<br>+1 Spirit of the Wolf Talent<br>+1 Reclaim Blood Talent'}else if("talent11"===DI){e='<p class="green">'+AH.tn[11]+"</p>";a=AH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Attack Power Bonus: +"+P(5.8*n)+" percent<br>Auto Attack: +"+dS.ceil(n/5.8)+" hits</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Pet Attacks Hit Twice<br><br>+1 Call of the Ancients Talent<br>+1 Guardian Spirit Talent<br>+2 Reclaim Blood Talent'}else if("talent12"===DI){e='<p class="green">'+AH.tn[12]+"</p>";var a=AH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Healing Power: +"+P(2.4*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Bloodlust Effect<br><br>+2 Call of the Ancients Talent<br>+2 Guardian Spirit Talent<br>+2 Spirit of the Wolf Talent'}return e},zy.necromancerTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+xH.tn[1]+"</p>";a=xH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+P(2.8*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>45-Second Bleed Effect<br><br>+1 Ignite Blood Talent<br>+1 Bond of Death Talent<br>+1 Howling Terror Talent'}else if("talent2"===DI){e='<p class="green">'+xH.tn[2]+"</p>";a=xH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Damage: +"+P(4.7*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Hit All Targets<br><br>+1 Drain Soul Talent<br>+1 Bond of Death Talent<br>+1 Howling Terror Talent'}else if("talent3"===DI){e='<p class="green">'+xH.tn[3]+"</p>";a=xH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Damage: +"+P(3.6*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+1 Drain Soul Talent<br>+1 Ignite Blood Talent<br>+2 Howling Terror Talent'}else if("talent4"===DI){e='<p class="green">'+xH.tn[4]+"</p>";a=xH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage: +"+P(5.4*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Bone Spirit Converted To Explosive Fireball Attack<br>Immune to Fear<br><br>+2 Drain Soul Talent<br>+2 Ignite Blood Talent<br>+2 Bond of Death Talent'}else if("talent5"===DI){e='<p class="green">'+xH.tn[5]+"</p>";a=xH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Health: +"+P(16.3*n)+" percent<br>Damage: +"+P(4.7*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Bone Spirit Revives Your Pet<br>Pet Learns Bash<br><br>+1 Augment Death Talent<br>+1 Corpse Explosion Talent<br>+1 Detonate Soul Talent'}else if("talent6"===DI){e='<p class="green">'+xH.tn[6]+"</p>";a=xH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(6.5*n)+" percent<br>Healing: +"+P(2.25*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Pet Cleaves Targets<br><br>+1 Invoke Death Talent<br>+1 Corpse Explosion Talent<br>+1 Detonate Soul Talent'}else if("talent7"===DI){e='<p class="green">'+xH.tn[7]+"</p>";a=xH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Damage: +"+P(5.7*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Poison Damage Has 24% Chance To Activate Corpse Explosion<br><br>+1 Invoke Death Talent<br>+1 Augment Death Talent<br>+2 Detonate Soul Talent'}else if("talent8"===DI){e='<p class="green">'+xH.tn[8]+"</p>";a=xH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(7.8*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>+7 Percent Pet Taunt Rate<br>Explosion Chills All Targets<br><br>+2 Invoke Death Talent<br>+2 Augment Death Talent<br>+2 Corpse Explosion Talent'}else if("talent9"===DI){e='<p class="green">'+xH.tn[9]+"</p>";a=xH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Damage: +"+2*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+10 Percent Damage Bonus<br><br>+1 Cascading Darkness Talent<br>+1 Invoke Fear Talent<br>+1 Asystole Talent'}else if("talent10"===DI){e='<p class="green">'+xH.tn[10]+"</p>";a=xH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(5.8*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Boost Mana Regeneration By 60%<br><br>+1 Bone Spirit Talent<br>+1 Invoke Fear Talent<br>+1 Asystole Talent'}else if("talent11"===DI){e='<p class="green">'+xH.tn[11]+"</p>";a=xH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+P(1.33*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>20% Chance To Counter Physical Damage With Bone Spirit<br><br>+1 Bone Spirit Talent<br>+1 Cascading Darkness Talent<br>+2 Asystole Talent'}else if("talent12"===DI){e='<p class="green">'+xH.tn[12]+"</p>";var a=xH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: +"+P(5.2*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>15% Bonus To All Magic Damage While Shields Are Active<br>Diamond Skin Does Not Expire<br>Diamond Skin Cooldown Reduced to 60 Seconds<br><br>+2 Bone Spirit Talent<br>+2 Cascading Darkness Talent<br>+2 Invoke Fear Talent'}return e},zy.enchanterTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+EH.tn[1]+"</p>";a=EH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+2*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+10 Percent Damage Bonus<br><br>+1 Color Shift Talent<br>+1 Discordant Barrier Talent<br>+1 Mystic Rune Talent'}else if("talent2"===DI){e='<p class="green">'+EH.tn[2]+"</p>";a=EH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Damage: +"+P(8.7*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>35% Chance Of Whirl Till You Hurl, Increasing Stun Duration by 60%<br><br>+1 Chaos Flux Talent<br>+1 Discordant Barrier Talent<br>+1 Mystic Rune Talent'}else if("talent3"===DI){e='<p class="green">'+EH.tn[3]+"</p>";a=EH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Armor: +"+P(6.8*n)+" percent<br>Health: +"+P(8.3*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>+15 Percent Damage Reduction<br><br>+1 Chaos Flux Talent<br>+1 Color Shift Talent<br>+2 Mystic Rune Talent'}else if("talent4"===DI){e='<p class="green">'+EH.tn[4]+"</p>";a=EH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Shield Health: +"+P(2.1*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>While Shields Are Active Damage Is Increased By 20%<br><br>+2 Chaos Flux Talent<br>+2 Color Shift Talent<br>+2 Discordant Barrier Talent'}else if("talent5"===DI){e='<p class="green">'+EH.tn[5]+"</p>";a=EH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Pet Damage: +"+P(13.5*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+16 Percent Pet Taunt Rate<br><br>+1 Shiftless Deeds Talent<br>+1 Enchant Weapon Talent<br>+1 Alacrity Talent'}else if("talent6"===DI){e='<p class="green">'+EH.tn[6]+"</p>";a=EH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(5.6*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+1 Cajoling Whispers Talent<br>+1 Enchant Weapon Talent<br>+1 Alacrity Talent'}else if("talent7"===DI){e='<p class="green">'+EH.tn[7]+"</p>";a=EH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Damage: +"+P(6.2*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Enchant Weapon Double Hits With Random Elemental Type<br><br>+1 Cajoling Whispers Talent<br>+1 Shiftless Deeds Talent<br>+2 Alacrity Talent'}else if("talent8"===DI){e='<p class="green">'+EH.tn[8]+"</p>";a=EH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Auto Attack: +"+dS.ceil(n/4)+" hits</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Charmed Pets Rapidly Regenerate<br>Charm Never Breaks<br><br>+2 Cajoling Whispers Talent<br>+2 Shiftless Deeds Talent<br>+2 Enchant Weapon Talent'}else if("talent9"===DI){e='<p class="green">'+EH.tn[9]+"</p>";a=EH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Damage: +"+P(5.9*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+1 Mesmerize Talent<br>+1 Gravity Flux Talent<br>+1 Tashania Talent'}else if("talent10"===DI){e='<p class="green">'+EH.tn[10]+"</p>";a=EH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(18.5*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>+35 Percent Casting Haste<br><br>+1 Gasping Embrace Talent<br>+1 Gravity Flux Talent<br>+1 Tashania Talent'}else if("talent11"===DI){e='<p class="green">'+EH.tn[11]+"</p>";a=EH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+P(6.3*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Psychic Beam Melts Target Upon Spell Completion<br>Cooldown Reduced to 12 Seconds<br><br>+1 Gasping Embrace Talent<br>+1 Mesmerize Talent<br>+2 Tashania Talent'}else if("talent12"===DI){e='<p class="green">'+EH.tn[12]+"</p>";var a=EH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: +"+P(6.8*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Magic Ignores Sanctuary<br><br>+2 Gasping Embrace Talent<br>+2 Mesmerize Talent<br>+2 Gravity Flux Talent'}return e},zy.magicianTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+GH.tn[1]+"</p>";a=GH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+2*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+10 Percent Damage Bonus<br><br>+1 Shield of Lava Talent<br>+1 Firestorm Talent<br>+1 Armageddon Talent'}else if("talent2"===DI){e='<p class="green">'+GH.tn[2]+"</p>";a=GH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Damage: +"+P(12.8*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Burning Aura<br><br>+1 Lava Bolt Talent<br>+1 Firestorm Talent<br>+1 Armageddon Talent'}else if("talent3"===DI){e='<p class="green">'+GH.tn[3]+"</p>";a=GH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Damage: +"+P(6.3*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Double The Number of Hits<br><br>+1 Lava Bolt Talent<br>+1 Shield of Lava Talent<br>+2 Armageddon Talent'}else if("talent4"===DI){e='<p class="green">'+GH.tn[4]+"</p>";a=GH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage: +"+P(5.4*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>All Fire Damage Penetrates Resistances<br><br>+2 Lava Bolt Talent<br>+2 Shield of Lava Talent<br>+2 Firestorm Talent'}else if("talent5"===DI){e='<p class="green">'+GH.tn[5]+"</p>";a=GH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Health: +"+P(13.1*n)+" percent<br>Damage: +"+P(6.2*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Lava Bolt Revives Your Pet<br><br>+1 Burnout Talent<br>+1 Reclaim Elements Talent<br>+1 Elemental Fury Talent'}else if("talent6"===DI){e='<p class="green">'+GH.tn[6]+"</p>";a=GH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(5.8*n)+" percent<br>Healing: +"+P(2.65*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Pet Hits 3 Targets<br><br>+1 Summon Elemental Talent<br>+1 Reclaim Elements Talent<br>+1 Elemental Fury Talent'}else if("talent7"===DI){e='<p class="green">'+GH.tn[7]+"</p>";a=GH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Healing: +"+P(2.2*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Enhance All Healing By 12%<br><br>+1 Summon Elemental Talent<br>+1 Burnout Talent<br>+2 Elemental Fury Talent'}else if("talent8"===DI){e='<p class="green">'+GH.tn[8]+"</p>";a=GH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(7.3*n)+" damage</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Reduce Elemental Fury\'s Cooldown to 20 Seconds<br><br>+2 Summon Elemental Talent<br>+2 Burnout Talent<br>+2 Reclaim Elements Talent'}else if("talent9"===DI){e='<p class="green">'+GH.tn[9]+"</p>";a=GH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Armor: +"+P(11.1*n)+" percent<br>Health: +"+P(9.7*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+65 Percent Mana Regeneration<br><br>+1 Frozen Orb Talent<br>+1 Elemental Armor Talent<br>+1 Psionic Storm Talent'}else if("talent10"===DI){e='<p class="green">'+GH.tn[10]+"</p>";a=GH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(4.8*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Freezes Targets<br><br>+1 Phantom Plate Talent<br>+1 Elemental Armor Talent<br>+1 Psionic Storm Talent'}else if("talent11"===DI){e='<p class="green">'+GH.tn[11]+"</p>";a=GH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Resistances: +"+P(3.3*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>+35 Percent Casting Haste<br><br>+1 Phantom Plate Talent<br>+1 Frozen Orb Talent<br>+2 Psionic Storm Talent'}else if("talent12"===DI){e='<p class="green">'+GH.tn[12]+"</p>";var a=GH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: +"+P(6.1*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+2 Phantom Plate Talent<br>+2 Frozen Orb Talent<br>+2 Elemental Armor Talent'}return e},zy.wizardTalentTooltips=function(){var e="";if("talent1"===DI){e='<p class="green">'+qH.tn[1]+"</p>";a=qH.tal[1];if(0===Yy.talent1)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=$e())+"<br>Damage: +"+P(4.2*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>Convert Ice Bolt To Static Bolt<br><br>+1 Arcane Missiles Talent<br>+1 Chain Lightning Talent<br>+1 Mirror Images Talent'}else if("talent2"===DI){e='<p class="green">'+qH.tn[2]+"</p>";a=qH.tal[2];if(0===Yy.talent2)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ue())+"<br>Damage: +"+P(4.9*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Perfect Channeling<br><br>+1 Charged Bolts Talent<br>+1 Chain Lightning Talent<br>+1 Mirror Images Talent'}else if("talent3"===DI){e='<p class="green">'+qH.tn[3]+"</p>";a=qH.tal[3];if(0===Yy.talent3)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Je())+"<br>Damage: +"+P(6.3*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Reduce Mirror Images and Lightning Spells\' Cooldowns By 50%<br><br>+1 Charged Bolts Talent<br>+1 Arcane Missiles Talent<br>+2 Mirror Images Talent'}else if("talent4"===DI){e='<p class="green">'+qH.tn[4]+"</p>";a=qH.tal[4];if(0===Yy.talent4)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=Ze())+"<br>Damage: +"+P(.8*n)+" percent of damage</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Enhance Lightning Damage By 15%<br><br>+2 Charged Bolts Talent<br>+2 Arcane Missiles Talent<br>+2 Chain Lightning Talent'}else if("talent5"===DI){e='<p class="green">'+qH.tn[5]+"</p>";a=qH.tal[5];if(0===Yy.talent5)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ea())+"<br>Damage: +"+2*n+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+10% Damage Bonus to Ice Bolt<br><br>+1 Deep Freeze Talent<br>+1 Glacial Spike Talent<br>+1 Ice Comet Talent'}else if("talent6"===DI){e='<p class="green">'+qH.tn[6]+"</p>";a=qH.tal[6];if(0===Yy.talent6)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=aa())+"<br>Damage: +"+P(4.5*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+='<p class="green">Skill Level 20 Bonus:</p>Hits 3 Targets<br><br>+1 Ice Bolt Talent<br>+1 Glacial Spike Talent<br>+1 Ice Comet Talent'}else if("talent7"===DI){e='<p class="green">'+qH.tn[7]+"</p>";a=qH.tal[7];if(0===Yy.talent7)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=na())+"<br>Damage: +"+P(5.3*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>Reduce Damage-Based Cold Spells\' Cooldowns By 50%<br><br>+1 Ice Bolt Talent<br>+1 Deep Freeze Talent<br>+2 Ice Comet Talent'}else if("talent8"===DI){e='<p class="green">'+qH.tn[8]+"</p>";a=qH.tal[8];if(0===Yy.talent8)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ta())+"<br>Damage: +"+P(6.5*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Enhance Cold Damage By 15%<br><br>+2 Ice Bolt Talent<br>+2 Deep Freeze Talent<br>+2 Glacial Spike Talent'}else if("talent9"===DI){e='<p class="green">'+qH.tn[9]+"</p>";a=qH.tal[9];if(0===Yy.talent9)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ia())+"<br>Armor: +"+P(6.1*n)+" percent<br>Health: +"+P(11.3*n)+" percent</p>"}e+='<p class="green">Skill Level 20 Bonus:</p>+35 Percent Casting Haste<br><br>+1 Fireball Talent<br>+1 Harness Ether Talent<br>+1 Meteor Talent'}else if("talent10"===DI){e='<p class="green">'+qH.tn[10]+"</p>";a=qH.tal[10];if(0===Yy.talent10)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=oa())+"<br>Damage: +"+P(5.9*n)+" percent</p>"}Yy.level<12&&(e+=FH),e+="<p class=\"green\">Skill Level 20 Bonus:</p>Convert Ice Bolt To Fire Bolt<br>Reduce Counterspell and Fire Spells' Cooldowns By 50%<br><br>+1 Vizier's Shielding Talent<br>+1 Harness Ether Talent<br>+1 Meteor Talent"}else if("talent11"===DI){e='<p class="green">'+qH.tn[11]+"</p>";a=qH.tal[11];if(0===Yy.talent11)e+='<p class="red">'+a+"</p>";else{e+="<p>"+a+"</p><p>Current Skill Level: "+(n=ra())+"<br>Damage: +"+P(4.1*n)+" percent</p>"}Yy.level<24&&(e+=NH),e+='<p class="green">Skill Level 20 Bonus:</p>While Effect Is Active, All Mana Gained Is Doubled<br><br>+1 Vizier\'s Shielding Talent<br>+1 Fireball Talent<br>+2 Meteor Talent'}else if("talent12"===DI){e='<p class="green">'+qH.tn[12]+"</p>";var a=qH.tal[12];if(0===Yy.talent12)e+='<p class="red">'+a+"</p>";else{var n=la();e+="<p>"+a+"</p><p>Current Skill Level: "+n+"<br>Damage: +"+P(6.7*n)+" percent</p>"}Yy.level<36&&(e+=jH),e+='<p class="green">Skill Level 20 Bonus:</p>Enhance Fire Damage By 15%<br><br>+2 Vizier\'s Shielding Talent<br>+2 Fireball Talent<br>+2 Harness Ether Talent'}return e},e("#gameView").on("click","#inventoryGold, #bankGold",function(){if(!0===KI||kw.ks>=6){var a=mS.getElementById("goldInputWrap"),n=mS.getElementById("goldInput");if("none"===a.style.display){var t,i,o;if("inventoryGold"===e(this).attr("id")){if(Yy.gold<=0)return;t=1*e("#inventoryGoldAmount").text(),sw="deposit",i=e("#inventoryWindow"),o=e("#inventoryGold")}else{if(kw.gold<=0)return;t=0,sw="withdrawal",i=e("#bank"),o=e("#bankGold")}var r=parseInt(i.css("left"),10)+parseInt(o.css("left"),10)+50,l=parseInt(i.css("top"),10)+parseInt(o.css("top"),10)-27;l<0&&(l=0),n.value=0,a.style.display="block",a.style.left=r+"px",a.style.top=l+"px",e("#goldInput").val(t).focus().select()}else a.style.display="none",sw=""}else Nn("You can only deposit gold in town.")}),e("#goldInput").on("change keyup keydown blur",function(){var e=mS.getElementById("goldInput"),a=parseInt(e.value,10);"deposit"===sw?a>Yy.gold&&(e.value=Yy.gold):a>kw.gold&&(e.value=kw.gold)}),e("#goldInput").on("keypress",function(e){var a=e,n=a.keyCode||a.which;n=String.fromCharCode(n);/[0-9]|\./.test(n)||(a.returnValue=!1,a.preventDefault&&a.preventDefault())}),e("#gameView").on("click",".transferGold",function(){mS.getElementById("goldInputWrap").style.display="none";var a=parseInt(mS.getElementById("goldInput").value,10);a>0&&("deposit"===sw?a<=Yy.gold&&(zy.lockScreen(!0),e.ajax({url:"/classic/php/town1.php",data:{run:"depositGold",amount:a,name:Yy.name}}).done(function(e){"no"!=e&&(ty(e),Qa("buyitem")),zy.unlockScreen()}).fail(function(){Tv()})):a<=kw.gold&&(zy.lockScreen(!0),e.ajax({url:"/classic/php/town1.php",data:{run:"withdrawGold",amount:a,name:Yy.name}}).done(function(e){"no"!=e&&(ty(e),Qa("buyitem")),zy.unlockScreen()}).fail(function(){Tv()}))),sw=""});var zH={d:{chaosflux:!1,toggleattackId:!1,gaspingembrace:!1,cajolingwhispers:!1,colorshift:!1,mesmerize:!1,discordantbarrier:!1,shiftlessdeeds:!1,enchantweapon:!1,adorninggrace:!1,alacrity:!1,gravityflux:!1,mysticrune:!1,tashania:!1,clarity:!1,enthrall:!1,chargedbolts:!1,frostnova:!1,magicmissiles:!1,fireball:!1,deepfreeze:!1,chainlightning:!1,glacialspike:!1,iceblock:!1,icecomet:!1,counterspell:!1,harnessEther:!1,meteor:!1,mirrorimages:!1,icebolt:!1,viziersshielding:!1,firestorm:!1,frozenorb:!1,burnout:!1,manashield:!1,psionicstorm:!1,reclaimelements:!1,elementalfury:!1,armageddon:!1,stasisfield:!1,alteredstate:!1,lavabolt:!1,earthelemental:!1,airelemental:!1,fireelemental:!1,frostelemental:!1,shieldoflava:!1,phantomplate:!1,elementalarmor:!1,cascadingdarkness:!1,invokefear:!1,drainsoul:!1,feigndeath:!1,augmentdeath:!1,igniteblood:!1,corpseexplosion:!1,bondofdeath:!1,diamondskin:!1,asystole:!1,detonatesoul:!1,howlingterror:!1,bonespirit:!1,archshielding:!1,feigndeath:!1,invokedeath:!1,scourge:!1,shmhealing:!1,togorsinsects:!1,cannibalize:!1,enstill:!1,poisonnova:!1,affliction:!1,reclaimblood:!1,glacialimpact:!1,devouringplague:!1,froststrike:!1,calloftheancients:!1,guardianspirit:!1,shmsow:!1,talismanofaltuna:!1,smite:!1,soundofforce:!1,superiorhealing:!1,bindingearth:!1,expelcorruption:!1,searingrevelation:!1,martyrsblessing:!1,guardianangel:!1,holywrath:!1,markofjudgement:!1,benediction:!1,resolution:!1,armoroffaith:!1,divinesanctuary:!1,symbolofnaltron:!1,dronesofdoom:!1,druhealing:!1,engulfingroots:!1,driftingdeath:!1,lightningblast:!1,earthquake:!1,hurricane:!1,sylvangrasp:!1,volcano:!1,tornado:!1,starfire:!1,skinlikenature:!1,shieldofspikes:!1,chloroplast:!1,drusow:!1,chordsofdissonance:!1,chantofbattle:!1,accelerando:!1,hymnofrestoration:!1,songofthesirens:!1,elementalrhythms:!1,lucidlullaby:!1,consonantchain:!1,dissension:!1,chorusofclarity:!1,anthemdearms:!1,euphonichymn:!1,shieldofsongs:!1,desperatedirge:!1,boastfulbellow:!1,rangerkickId:!1,rapidshotId:!1,countershotId:!1,trueshotarrowId:!1,volleyshotId:!1,lighthealingId:!1,faerieflameId:!1,igniteId:!1,snareId:!1,wardersrift:!1,weaponshieldId:!1,shieldofbramblesId:!1,thistlecoatId:!1,feetlikecatId:!1,rangersowId:!1,rangertrackId:!1,shdslamId:!1,crescentcleaveId:!1,deathstrikeId:!1,gaspingfrenzyId:!1,harmtouchId:!1,resistcoldId:!1,addmonsterId:!1,shdlifetapId:!1,doomingdarknessId:!1,heatbloodId:!1,strengthendeadId:!1,shdfearId:!1,siphonstrengthId:!1,shdfeigndeathId:!1,shadowvortexId:!1,shdfeigndeathId:!1,vampiricembraceId:!1,summondeadId:!1,palslamId:!1,rebukeId:!1,purgeId:!1,vengeanceId:!1,layhandsId:!1,greaterhealingId:!1,holymightId:!1,palrootId:!1,ardentjudgment:!1,yaulpId:!1,cleanseId:!1,flashoflightId:!1,valorId:!1,spiritarmorId:!1,divineprovidenceId:!1,symbolofryltanId:!1,tigerstrikeId:!1,eaglestrikeId:!1,cheetahstrikeId:!1,cobrastrikeId:!1,dragonstrikeId:!1,cranekickId:!1,windmillkickId:!1,ancestralflurryId:!1,flyingkickId:!1,chakrablastId:!1,feigndeathId:!1,mendId:!1,stonefistsId:!1,intimidationId:!1,innerpeaceId:!1,shadowstrikeId:!1,sonicstrikeId:!1,hyperstrikeId:!1,widowstrikeId:!1,miragestrikeId:!1,lacerateId:!1,backstabId:!1,staggershotId:!1,lobotomizeId:!1,prowlinggashId:!1,evadeId:!1,coldbloodId:!1,flashpowderId:!1,illusivemistId:!1,ancientwillId:!1,warriorkickId:!1,slamId:!1,avengingstrikeId:!1,hemorrhageId:!1,shockwaveId:!1,pummelId:!1,subjugateId:!1,decisiveblowId:!1,absorbspellId:!1,frenziedrampageId:!1,enrageId:!1,furiousscornId:!1,triageId:!1,bulwarkId:!1,intrepidmightId:!1,secondwindId:!1,divineaegisId:!1,ancestralrampageId:!1,tunaresglowId:!1,karanasinfusionId:!1,sanguinetormentId:!1,granitevisageId:!1,shortcircuitId:!1,runId:!1,toggleattackId:!1,addmonsterId:!1},cd:{chaosflux:!1,toggleattackId:!1,gaspingembrace:!1,cajolingwhispers:!1,colorshift:!1,mesmerize:!1,discordantbarrier:!1,shiftlessdeeds:!1,enchantweapon:!1,adorninggrace:!1,alacrity:!1,gravityflux:!1,mysticrune:!1,tashania:!1,clarity:!1,enthrall:!1,chargedbolts:!1,frostnova:!1,magicmissiles:!1,fireball:!1,deepfreeze:!1,chainlightning:!1,glacialspike:!1,iceblock:!1,icecomet:!1,counterspell:!1,harnessEther:!1,meteor:!1,mirrorimages:!1,icebolt:!1,viziersshielding:!1,firestorm:!1,frozenorb:!1,burnout:!1,manashield:!1,psionicstorm:!1,reclaimelements:!1,elementalfury:!1,armageddon:!1,stasisfield:!1,alteredstate:!1,lavabolt:!1,earthelemental:!1,airelemental:!1,fireelemental:!1,frostelemental:!1,shieldoflava:!1,phantomplate:!1,elementalarmor:!1,cascadingdarkness:!1,invokefear:!1,drainsoul:!1,feigndeath:!1,augmentdeath:!1,igniteblood:!1,corpseexplosion:!1,bondofdeath:!1,diamondskin:!1,asystole:!1,detonatesoul:!1,howlingterror:!1,bonespirit:!1,archshielding:!1,feigndeath:!1,invokedeath:!1,scourge:!1,shmhealing:!1,togorsinsects:!1,cannibalize:!1,enstill:!1,poisonnova:!1,affliction:!1,reclaimblood:!1,glacialimpact:!1,devouringplague:!1,froststrike:!1,calloftheancients:!1,guardianspirit:!1,shmsow:!1,talismanofaltuna:!1,smite:!1,soundofforce:!1,superiorhealing:!1,bindingearth:!1,expelcorruption:!1,searingrevelation:!1,martyrsblessing:!1,guardianangel:!1,holywrath:!1,markofjudgement:!1,benediction:!1,resolution:!1,armoroffaith:!1,divinesanctuary:!1,symbolofnaltron:!1,dronesofdoom:!1,druhealing:!1,engulfingroots:!1,driftingdeath:!1,lightningblast:!1,earthquake:!1,hurricane:!1,sylvangrasp:!1,volcano:!1,tornado:!1,starfire:!1,skinlikenature:!1,shieldofspikes:!1,chloroplast:!1,drusow:!1,chordsofdissonance:!1,chantofbattle:!1,accelerando:!1,hymnofrestoration:!1,songofthesirens:!1,elementalrhythms:!1,lucidlullaby:!1,consonantchain:!1,dissension:!1,chorusofclarity:!1,anthemdearms:!1,euphonichymn:!1,shieldofsongs:!1,desperatedirge:!1,boastfulbellow:!1,rangerkickId:!1,rapidshotId:!1,countershotId:!1,trueshotarrowId:!1,volleyshotId:!1,lighthealingId:!1,faerieflameId:!1,igniteId:!1,snareId:!1,wardersrift:!1,weaponshieldId:!1,shieldofbramblesId:!1,thistlecoatId:!1,feetlikecatId:!1,rangersowId:!1,rangertrackId:!1,shdslamId:!1,crescentcleaveId:!1,deathstrikeId:!1,gaspingfrenzyId:!1,harmtouchId:!1,resistcoldId:!1,addmonsterId:!1,shdlifetapId:!1,doomingdarknessId:!1,heatbloodId:!1,strengthendeadId:!1,shdfearId:!1,siphonstrengthId:!1,shdfeigndeathId:!1,shadowvortexId:!1,shdfeigndeathId:!1,vampiricembraceId:!1,summondeadId:!1,palslamId:!1,rebukeId:!1,purgeId:!1,vengeanceId:!1,layhandsId:!1,greaterhealingId:!1,holymightId:!1,palrootId:!1,ardentjudgment:!1,yaulpId:!1,cleanseId:!1,flashoflightId:!1,valorId:!1,spiritarmorId:!1,divineprovidenceId:!1,symbolofryltanId:!1,tigerstrikeId:!1,eaglestrikeId:!1,cheetahstrikeId:!1,cobrastrikeId:!1,dragonstrikeId:!1,cranekickId:!1,windmillkickId:!1,ancestralflurryId:!1,flyingkickId:!1,chakrablastId:!1,feigndeathId:!1,mendId:!1,stonefistsId:!1,intimidationId:!1,innerpeaceId:!1,shadowstrikeId:!1,sonicstrikeId:!1,hyperstrikeId:!1,widowstrikeId:!1,miragestrikeId:!1,lacerateId:!1,backstabId:!1,staggershotId:!1,lobotomizeId:!1,prowlinggashId:!1,evadeId:!1,coldbloodId:!1,flashpowderId:!1,illusivemistId:!1,ancientwillId:!1,warriorkickId:!1,slamId:!1,avengingstrikeId:!1,hemorrhageId:!1,shockwaveId:!1,pummelId:!1,subjugateId:!1,decisiveblowId:!1,absorbspellId:!1,frenziedrampageId:!1,enrageId:!1,furiousscornId:!1,triageId:!1,bulwarkId:!1,intrepidmightId:!1},o:{chordsofdissonance:!1,chantofbattle:!1,accelerando:!1,hymnofrestoration:!1,songofthesirens:!1,elementalrhythms:!1,lucidlullaby:!1,consonantchain:!1,dissension:!1,chorusofclarity:!1,anthemdearms:!1,euphonichymn:!1,shieldofsongs:!1,desperatedirge:!1,boastfulbellow:!1}};e(n).ready(function(){e("#window3").on("click","#roguehideId",function(){Hr()}).on("click","#rangertrackId",function(){wu()}).on("click","#thistlecoatId",function(){vd()}).on("click","#feetlikecatId",function(){kd()}).on("click","#shieldofbramblesId",function(){fd()}).on("click","#rangersowId",function(){Id()}).on("click","#valorId",function(){Hs()}).on("click","#spiritarmorId",function(){xs()}).on("click","#divineprovidenceId",function(){Gs()}).on("click","#symbolofryltanId",function(){Ps()}).on("click","#summondeadId",function(){Fd()}).on("click","#vampiricembraceId",function(){mc()}).on("click","#resistcoldId",function(){fc()}).on("click","#resolution",function(){$c()}).on("click","#armoroffaith",function(){um()}).on("click","#divinesanctuary",function(){hm()}).on("click","#symbolofnaltron",function(){pm()}).on("click","#skinlikenature",function(){jm()}).on("click","#shieldofspikes",function(){$m()}).on("click","#drusow",function(){eu()}).on("click","#chloroplast",function(){cu()}).on("click","#calloftheancients",function(){Hu()}).on("click","#shmsow",function(){Vu()}).on("click","#guardianspirit",function(){mf()}).on("click","#talismanofaltuna",function(){af()}).on("click","#invokedeath",function(){ff()}).on("click","#archshielding",function(){wf()}).on("click","#discordantbarrier",function(){ch()}).on("click","#enchantweapon",function(){ph()}).on("click","#adorninggrace",function(){vh()}).on("click","#clarity",function(){Eh()}).on("click","#earthelemental",function(){Rh()}).on("click","#airelemental",function(){Fh()}).on("click","#fireelemental",function(){Nh()}).on("click","#frostelemental",function(){jh()}).on("click","#shieldoflava",function(){zh()}).on("click","#phantomplate",function(){Vh()}).on("click","#elementalarmor",function(){tg()}).on("click","#viziersshielding",function(){Ng()}).on("click","#warriorkickId",function(){Yi()}).on("click","#slamId",function(){no()}).on("click","#avengingstrikeId",function(){oo()}).on("click","#hemorrhageId",function(){lo()}).on("click","#shockwaveId",function(){uo()}).on("click","#pummelId",function(){bo()}).on("click","#subjugateId",function(){yo()}).on("click","#decisiveblowId",function(){Io()}).on("click","#absorbspellId",function(){To()}).on("click","#frenziedrampageId",function(){Ao()}).on("click","#enrageId",function(){Qo()}).on("click","#furiousscornId",function(){xo()}).on("click","#triageId",function(){zo()}).on("click","#bulwarkId",function(){Oo()}).on("click","#intrepidmightId",function(){Uo()}).on("click","#tigerstrikeId",function(){Or()}).on("click","#eaglestrikeId",function(){al()}).on("click","#cheetahstrikeId",function(){ml()}).on("click","#cobrastrikeId",function(){Il()}).on("click","#dragonstrikeId",function(){Pl()}).on("click","#cranekickId",function(){Xr()}).on("click","#windmillkickId",function(){il()}).on("click","#ancestralflurryId",function(){hl()}).on("click","#flyingkickId",function(){xl()}).on("click","#chakrablastId",function(){Tl()}).on("click","#feigndeathId",function(){Ur()}).on("click","#mendId",function(){ll()}).on("click","#stonefistsId",function(){vl()}).on("click","#intimidationId",function(){Ll()}).on("click","#innerpeaceId",function(){Nl()}).on("click","#shadowstrikeId",function(){Jo()}).on("click","#sonicstrikeId",function(){sr()}).on("click","#hyperstrikeId",function(){kr()}).on("click","#widowstrikeId",function(){Ar()}).on("click","#miragestrikeId",function(){zr()}).on("click","#lacerateId",function(){ar()}).on("click","#backstabId",function(){ur()}).on("click","#staggershotId",function(){Dr()}).on("click","#lobotomizeId",function(){qr()}).on("click","#prowlinggashId",function(){Wr()}).on("click","#evadeId",function(){ir()}).on("click","#coldbloodId",function(){gr()}).on("click","#flashpowderId",function(){vr()}).on("click","#illusivemistId",function(){Mr()}).on("click","#ancientwillId",function(){Rr()}).on("click","#palslamId",function(){Kl()}).on("click","#rebukeId",function(){Vl()}).on("click","#purgeId",function(){$l()}).on("click","#vengeanceId",function(){Zl()}).on("click","#layhandsId",function(){ns()}).on("click","#greaterhealingId",function(){ss()}).on("click","#holymightId",function(){ms()}).on("click","#palrootId",function(){hs()}).on("click","#ardentjudgment",function(){bs()}).on("click","#yaulpId",function(){Ss()}).on("click","#flashoflightId",function(){Ds()}).on("click","#cleanseId",function(){Is()}).on("click","#rangerkickId",function(){Ns()}).on("click","#rapidshotId",function(){js()}).on("click","#countershotId",function(){Ys()}).on("click","#trueshotarrowId",function(){Ws()}).on("click","#volleyshotId",function(){_s()}).on("click","#lighthealingId",function(){Zs()}).on("click","#wardersrift",function(){td()}).on("click","#igniteId",function(){rd()}).on("click","#snareId",function(){md()}).on("click","#faerieflameId",function(){sd()}).on("click","#weaponshieldId",function(){bd()}).on("click","#shdslamId",function(){Td()}).on("click","#crescentcleaveId",function(){Bd()}).on("click","#deathstrikeId",function(){Hd()}).on("click","#gaspingfrenzyId",function(){Ed()}).on("click","#harmtouchId",function(){Pd()}).on("click","#shdlifetapId",function(){zd()}).on("click","#doomingdarknessId",function(){Kd()}).on("click","#heatbloodId",function(){Od()}).on("click","#strengthendeadId",function(){_d()}).on("click","#shdfearId",function(){Zd()}).on("click","#siphonstrengthId",function(){ic()}).on("click","#shdfeigndeathId",function(){sc()}).on("click","#shadowvortexId",function(){dc()}).on("click","#chordsofdissonance",function(){bc()}).on("click","#chantofbattle",function(){gc()}).on("click","#accelerando",function(){kc()}).on("click","#hymnofrestoration",function(){Ic()}).on("click","#anthemdearms",function(){Cc()}).on("click","#boastfulbellow",function(){Tc()}).on("click","#elementalrhythms",function(){Bc()}).on("click","#lucidlullaby",function(){Lc()}).on("click","#consonantchain",function(){Hc()}).on("click","#innerpeaceId",function(){Nl()}).on("click","#dissension",function(){Ac()}).on("click","#chorusofclarity",function(){xc()}).on("click","#songofthesirens",function(){Nc()}).on("click","#euphonichymn",function(){qc()}).on("click","#shieldofsongs",function(){Pc()}).on("click","#desperatedirge",function(){Rc()}).on("click","#smite",function(){zc()}).on("click","#soundofforce",function(){Oc()}).on("click","#superiorhealing",function(){_c()}).on("click","#bindingearth",function(){em()}).on("click","#expelcorruption",function(){tm()}).on("click","#searingrevelation",function(){lm()}).on("click","#martyrsblessing",function(){mm()}).on("click","#guardianangel",function(){km()}).on("click","#holywrath",function(){wm()}).on("click","#markofjudgement",function(){Bm()}).on("click","#benediction",function(){Am()}).on("click","#starfire",function(){Em()}).on("click","#dronesofdoom",function(){qm()}).on("click","#druhealing",function(){Nm()}).on("click","#tornado",function(){Wm()}).on("click","#engulfingroots",function(){_m()}).on("click","#driftingdeath",function(){Jm()}).on("click","#lightningblast",function(){iu()}).on("click","#earthquake",function(){su()}).on("click","#hurricane",function(){fu()}).on("click","#sylvangrasp",function(){bu()}).on("click","#volcano",function(){ku()}).on("click","#froststrike",function(){Cu()}).on("click","#scourge",function(){Mu()}).on("click","#shmhealing",function(){Du()}).on("click","#togorsinsects",function(){qu()}).on("click","#cannibalize",function(){ju()}).on("click","#enstill",function(){Xu()}).on("click","#poisonnova",function(){Ku()}).on("click","#affliction",function(){$u()}).on("click","#reclaimblood",function(){ef()}).on("click","#glacialimpact",function(){rf()}).on("click","#devouringplague",function(){df()}).on("click","#bonespirit",function(){uf()}).on("click","#cascadingdarkness",function(){hf()}).on("click","#invokefear",function(){yf()}).on("click","#drainsoul",function(){If()}).on("click","#feigndeath",function(){Bf()}).on("click","#augmentdeath",function(){Hf()}).on("click","#igniteblood",function(){xf()}).on("click","#corpseexplosion",function(){gf()}).on("click","#bondofdeath",function(){Nf()}).on("click","#diamondskin",function(){Pf()}).on("click","#asystole",function(){zf()}).on("click","#detonatesoul",function(){Wf()}).on("click","#howlingterror",function(){_f()}).on("click","#chaosflux",function(){$f()}).on("click","#gaspingembrace",function(){Uf()}).on("click","#cajolingwhispers",function(){ah()}).on("click","#colorshift",function(){oh()}).on("click","#mesmerize",function(){sh()}).on("click","#shiftlessdeeds",function(){hh()}).on("click","#alacrity",function(){kh()}).on("click","#gravityflux",function(){wh()}).on("click","#mysticrune",function(){Dh()}).on("click","#tashania",function(){xh()}).on("click","#enthrall",function(){Ph()}).on("click","#lavabolt",function(){Qh()}).on("click","#firestorm",function(){Oh()}).on("click","#frozenorb",function(){Jh()}).on("click","#burnout",function(){ag()}).on("click","#manashield",function(){lg()}).on("click","#psionicstorm",function(){mg()}).on("click","#reclaimelements",function(){gg()}).on("click","#elementalfury",function(){vg()}).on("click","#armageddon",function(){Sg()}).on("click","#stasisfield",function(){Mg()}).on("click","#alteredstate",function(){Lg()}).on("click","#icebolt",function(){Hg()}).on("click","#chargedbolts",function(){Eg()}).on("click","#frostnova",function(){Pg()}).on("click","#magicmissiles",function(){Fg()}).on("click","#fireball",function(){Kg()}).on("click","#deepfreeze",function(){Vg()}).on("click","#chainlightning",function(){Jg()}).on("click","#glacialspike",function(){np()}).on("click","#iceblock",function(){lp()}).on("click","#icecomet",function(){up()}).on("click","#counterspell",function(){pp()}).on("click","#harnessEther",function(){Sp()}).on("click","#meteor",function(){Cp()}).on("click","#mirrorimages",function(){Dp()}),e("#gameView").on("click","#addmonsterId",function(){ui()}).on("click","#runId",function(){et()}).on("click","#toggleattackId",function(){Si()}).on("click","#secondwindId",function(){Np()}).on("click","#divineaegisId",function(){Kp()}).on("click","#ancestralrampageId",function(){Vp()}).on("click","#tunaresglowId",function(){Up()}).on("click","#karanasinfusionId",function(){eb()}).on("click","#sanguinetormentId",function(){ib()}).on("click","#granitevisageId",function(){sb()}).on("click","#shortcircuitId",function(){ub()}).on("click","#togglepetattackId",function(){Ii()}).on("click","#halflinghideId",function(){db()})}),e(n).ready(function(){e("#mobPic0,#mobPic1,#mobPic2,#mobPic3,#mobPic4").on("click",function(){if(!0!==US)if(!0!==aH)if(0!==zy.blindStatus){var e=!1,a=bL,n=this.id,t=parseInt(n.slice(-1));if(bL=t,!1===ya()&&2===t)return nS.kill(),tS.kill(),nS=cS.delayedCall(0,Ct),tS=cS.delayedCall(0,Mt),ki(0),void hi(!0);bL===a&&(e=!0,"Warrior"===Yy.job?oo():"Monk"===Yy.job?Or():"Rogue"===Yy.job?Jo():"Paladin"===Yy.job?$l():"Shadow Knight"===Yy.job?Bd():"Ranger"===Yy.job?js():"Bard"===Yy.job?bc():"Druid"===Yy.job?Em():"Cleric"===Yy.job?zc():"Shaman"===Yy.job?Cu():"Necromancer"===Yy.job?uf():"Enchanter"===Yy.job?$f():"Magician"===Yy.job?Qh():"Wizard"===Yy.job&&Hg()),""!==Wy[bL].name?yy(e):bL=a}else fa("You cannot change targets while lost in a Globe of Darkness.");else fa("You cannot change targets while confused.")})}),e(B).on("blur",function(){gw.kill(),NG.tooltip.style.visibility="hidden"}),e(B).on("focus",function(){Jn()}),e(function(){e("#gameView").on("click","#destroyItem",function(){Qa("button_2"),""!==Wk?kw.ks<=6&&"Off"===kw.fastDestroy&&"Destroy"===this.textContent?this.textContent="CONFIRM?":!0===e("#"+Wk).hasClass("inventory")?(By(),kw.ks>=7?this.textContent="Sell":this.textContent="Destroy"):(xy("You can only destroy items in your inventory."),Ba()):xy("You must select an item to destroy.")})}),e("#gameView").on("mouseenter",".buttons, .NCbuttons, .nonglobal, .allskill",function(){var a=e("#window3a li:visible").index(e(this))+1,n='<div id="tooltipButton">Hotkey: [ ';a>=11&&(n+="Shift ",a-=10),10===a&&(a=0),a+="";var t=this.id;"addmonsterId"===t?a="D":"toggleattackId"===t?a="A":"runId"===t?(n+="Shift ",a="S"):"halflinghideId"!==t&&"secondwindId"!==t&&"divineaegisId"!==t&&"ancestralrampageId"!==t&&"tunaresglowId"!==t&&"karanasinfusionId"!==t&&"sanguinetormentId"!==t&&"granitevisageId"!==t&&"shortcircuitId"!==t||(a="S"),uI.kill(),uI=cS.delayedCall(.25,function(){var e=NG.tooltipmsg.innerHTML;NG.tooltipmsg.innerHTML=F(n+a+" ]</div>")+e})}),e(n).on("keyup",function(a){if(!1===tI){if(("Game"===zy.view||"Intro"===zy.view)&&32===a.keyCode)return Ta(),!1;if("Game"===zy.view&&!sw){if(a.keyCode>=49&&a.keyCode<=57||48===a.keyCode){if(0===sH)return!1;var n=e("#window3a li:visible");if(a.shiftKey||a.ctrlKey){if(a.shiftKey){if(49===a.keyCode){t=n.eq(10).attr("id");return zy[wH.SkillMap](t),!1}if(50===a.keyCode){t=n.eq(11).attr("id");return zy[wH.SkillMap](t),!1}if(51===a.keyCode){t=n.eq(12).attr("id");return zy[wH.SkillMap](t),!1}if(52===a.keyCode){t=n.eq(13).attr("id");return zy[wH.SkillMap](t),!1}if(53===a.keyCode){t=n.eq(14).attr("id");return zy[wH.SkillMap](t),!1}if(54===a.keyCode){t=n.eq(15).attr("id");return zy[wH.SkillMap](t),!1}if(55===a.keyCode){t=n.eq(16).attr("id");return zy[wH.SkillMap](t),!1}if(56===a.keyCode){t=n.eq(17).attr("id");return zy[wH.SkillMap](t),!1}if(57===a.keyCode){t=n.eq(18).attr("id");return zy[wH.SkillMap](t),!1}if(48===a.keyCode){t=n.eq(19).attr("id");return zy[wH.SkillMap](t),!1}}}else{if(49===a.keyCode){t=n.eq(0).attr("id");return zy[wH.SkillMap](t),!1}if(50===a.keyCode){t=n.eq(1).attr("id");return zy[wH.SkillMap](t),!1}if(51===a.keyCode){t=n.eq(2).attr("id");return zy[wH.SkillMap](t),!1}if(52===a.keyCode){t=n.eq(3).attr("id");return zy[wH.SkillMap](t),!1}if(53===a.keyCode){t=n.eq(4).attr("id");return zy[wH.SkillMap](t),!1}if(54===a.keyCode){t=n.eq(5).attr("id");return zy[wH.SkillMap](t),!1}if(55===a.keyCode){t=n.eq(6).attr("id");return zy[wH.SkillMap](t),!1}if(56===a.keyCode){t=n.eq(7).attr("id");return zy[wH.SkillMap](t),!1}if(57===a.keyCode){t=n.eq(8).attr("id");return zy[wH.SkillMap](t),!1}if(48===a.keyCode){var t=n.eq(9).attr("id");return zy[wH.SkillMap](t),!1}}}"block"===NG.ttItem.style.display&&Ey(lI)}}}),e(n).on("keydown",function(a){if("Game"===zy.view&&!1===tI){if(a.shiftKey&&!a.CtrlKey&&"block"===NG.ttItem.style.display&&("inventory"!==dI&&"bank"!==dI||("helmet"===sI?Ey(e("#helmet"),!0):"neck"===sI?Ey(e("#neck"),!0):"ring"===sI?Ey(e("#ring1"),!0):"shoulders"===sI?Ey(e("#shoulders"),!0):"back"===sI?Ey(e("#back"),!0):"chest"===sI?Ey(e("#chest"),!0):"bracers"===sI?Ey(e("#bracers"),!0):"gloves"===sI?Ey(e("#gloves"),!0):"belt"===sI?Ey(e("#belt"),!0):"legs"===sI?Ey(e("#legs"),!0):"boots"===sI?Ey(e("#boots"),!0):"weapons"===sI?Ey(e("#weapon1"),!0):"shield"===sI?Ey(e("#weapon2"),!0):"range"===sI&&Ey(e("#range"),!0))),81===a.keyCode&&(Pk||fy()),a.ctrlKey&&65===a.keyCode&&!Pk)return!1;if(68===a.keyCode&&"Game"===zy.view&&(Pk||ui()),a.ctrlKey&&65===a.keyCode&&0!==fk&&!Pk)return!1;if(a.shiftKey||a.ctrlKey||65!==a.keyCode||Pk||Si(),a.shiftKey&&65===a.keyCode&&(Pk||Ii()),a.ctrlKey&&87===a.keyCode)return!1;if(a.ctrlKey&&49===a.keyCode)return!1;if(a.ctrlKey&&50===a.keyCode)return!1;if(a.ctrlKey&&51===a.keyCode)return!1;if(a.ctrlKey&&52===a.keyCode)return!1;if(a.ctrlKey&&53===a.keyCode)return!1;if(a.shiftKey&&82===a.keyCode&&!Pk)return et(),!1;if(!a.shiftKey&&82===a.keyCode&&!Pk)return!1;if(83===a.keyCode&&!Pk)return Qb(),!1;if(!a.shiftKey&&9===a.keyCode)return 0!==Ab()&&(0===zy.blindStatus?(fa("You cannot change targets while lost in a Globe of Darkness."),!1):!0!==aH&&(by(),!1));if(a.shiftKey&&9===a.keyCode)return 0!==Ab()&&(0===zy.blindStatus?(fa("You cannot change targets while lost in a Globe of Darkness."),!1):!0!==aH&&(vy(),!1));!1===Pk&&(88===a.keyCode&&uy(),67===a.keyCode&&cy(),73!==a.keyCode&&71!==a.keyCode&&70!==a.keyCode&&69!==a.keyCode||py(),66!==a.keyCode&&86!==a.keyCode||my(),77!==a.keyCode&&90!==a.keyCode||gy(),84===a.keyCode&&Ay(!0))}return 27===a.keyCode&&(tI||(!1===US?"Game"===zy.view&&(cS.pauseAll(),US=!0,mS.getElementById("paused").style.display="block",0===pH&&gy()):Hy())),(32!==a.keyCode||!1!==tI)&&(!(a.ctrlKey&&a.keyCode>=54&&a.keyCode<=56)&&void 0)}),e(n).ready(function(){e("#spellbardiv").on("click",function(){!1!==zk&&Ta()})}),e(function(){e("#options").on("click",".lootFilter",function(){Qa("button_2");var a=this.id,n=e(this),t=this.textContent;if("None"===t){i="Normal";Lmy[a]=i,n.html(i)}else if("Normal"===t){i="Exceptional";Lmy[a]=i,n.html(i)}else if("Exceptional"===t){i="All";Lmy[a]=i,n.html(i)}else{var i="None";Lmy[a]=i,n.html(i)}gS.Lmy()}).on("click","#weatherStatus",function(){Qa("button_2");var a=e("#weatherStatus");"High"===a.html()?(kw.videoSetting="Medium",a.html("Medium")):"Medium"===a.html()?(kw.videoSetting="Low",a.html("Low")):"Low"===a.html()&&(kw.videoSetting="High",a.html("High")),gS.GLB()}).on("click","#autoAttackOption",function(){Qa("button_2");var a=e("#autoAttackOption");"On"===a.html()?(Lmy.autoAttackOption="Off",a.html("Off")):(Lmy.autoAttackOption="On",a.html("On")),gS.GLB()}).on("click","#spamFilter",function(){Qa("button_2");var a=e("#spamFilter");"On"===a.html()?(kw.chatMyHit="Off",a.html("Off")):(kw.chatMyHit="On",a.html("On")),gS.GLB()}).on("click","#showCombatLog",function(){Qa("button_2");var a=e("#showCombatLog");"On"===a.html()?(kw.showCombatLog="Off",a.html("Off"),e("#chatId, #combatId").css("display","none")):(kw.showCombatLog="On",a.html("On"),e("#chatId, #combatId").css("display","block")),gS.GLB()}).on("click","#debugMode",function(){Qa("button_2");var a=e("#debugMode");"On"===a.html()?(kw.debugMode="Off",a.html("Off")):(kw.debugMode="On",a.html("On")),gS.GLB()}).on("click","#audioUp",function(){kw.soundStatus+=10,kw.soundStatus>100&&(kw.soundStatus=100),e("#soundStatus").html(kw.soundStatus),gS.GLB(),Qa("button_2")}).on("click","#audioDown",function(){kw.soundStatus-=10,kw.soundStatus<=0&&(kw.soundStatus=0),e("#soundStatus").html(kw.soundStatus),gS.GLB(),Qa("button_2")}).on("click","#audioUp2",function(){kw.musicStatus+=10,kw.musicStatus>100&&(kw.musicStatus=100);var a=kw.musicStatus;mS.getElementById("bgmusic").volume=dS.round(a/100*.5*1*100)/100,mS.getElementById("bgamb1").volume=dS.round(a/100*.2*1*100)/100,mS.getElementById("bgamb2").volume=dS.round(a/100*.2*1*100)/100,e("#musicStatus").html(a),gS.GLB(),Qa("button_2")}).on("click","#audioDown2",function(){kw.musicStatus-=10,kw.musicStatus<=0&&(kw.musicStatus=0);var a=kw.musicStatus;mS.getElementById("bgmusic").volume=dS.round(a/100*.5*1*100)/100,mS.getElementById("bgamb1").volume=dS.round(a/100*.2*1*100)/100,mS.getElementById("bgamb2").volume=dS.round(a/100*.2*1*100)/100,e("#musicStatus").html(a),gS.GLB(),Qa("button_2")}).on("click","#tooltipStatus",function(){Qa("button_2"),"Long"===kw.tooltipMode?(kw.tooltipMode="Short",e("#tooltipStatus").html("Short"),e("#tooltipmsg").css("display","none")):"Short"===kw.tooltipMode?(kw.tooltipMode="Off",e("#tooltipStatus").html("Off"),e("#tooltipmsg").css("display","none")):"Off"===kw.tooltipMode&&(kw.tooltipMode="Long",e("#tooltipStatus").html("Long"),e("#tooltipmsg").css("display","block")),gS.GLB()}).on("click","#hideMenu",function(){Qa("button_2"),"Off"===kw.hideMenu?(e("#hideMenu").html("On"),kw.hideMenu="On",cS.to(mS.getElementById("window5Id"),1,{delay:5,opacity:0})):(e("#hideMenu").html("Off"),kw.hideMenu="Off",cS.set(mS.getElementById("window5Id"),{opacity:1})),gS.GLB()}).on("click","#fastDestroy",function(){Qa("button_2");var a=e("#fastDestroy");"On"===a.text()?(kw.fastDestroy="Off",a.html("Off")):(kw.fastDestroy="On",a.html("On")),gS.GLB()})}),e(n).ready(function(){e(n).on({mouseenter:function(a){pk=!0,rw=a.pageX-$NG.gameView.offset().left,lw=a.pageY,Ey(e(this))},mouseleave:function(){pk=!1,NG.ttItem.style.display="none"}},".equipment,.inventory,.bank,.city"),e("#gameView").on("mouseenter","#window2zoneday,#window3,#window6",function(){NG.ttItem.style.display="none"}),e("#gameView").on("mouseenter",".buttons, .NCbuttons",function(e){NG.tooltip.style.visibility="hidden";var a=this.parentNode.parentNode.id;gw.kill(),gw=cS.delayedCall(1,function(){Ly(a)})}),$NG.window3.on("mouseleave",function(){gw.kill(),NG.tooltip.style.visibility="hidden"}).on("mouseenter",".spacers",function(){gw.kill(),NG.tooltip.style.visibility="hidden"}),e("#window6").on("mouseleave",function(){gw.kill(),NG.tooltip.style.visibility="hidden"}),e("#gameView").on("mouseenter",".buffIcons, .mobBuffIcons0, .mobBuffIcons1, .mobBuffIcons2, .mobBuffIcons3",function(a){NG.tooltipname.innerHTML=e(this).data("Name"),NG.tooltipmsg.style.display="none";Ly(this.parentNode.parentNode.id)}).on("mouseleave",".buffIcons,.mobBuffIcons0,.mobBuffIcons1,.mobBuffIcons2,.mobBuffIcons3",function(){Yt()})}),e("#gameView").on("click","#townPortal",function(){Ab()>0?Nn("You must leave combat first!"):function(){var e="",a=0,n=qn(),t=Pn();"Edenburg"===n?e="Salubrin Forest":"Salubrin Forest"===n?e="Tendolin Meadows":"Tendolin Meadows"===n?(e="Greenthorn Cavern",a=1):"Greenthorn Cavern"===n?(e="Greenthorn Cavern",1===t?a=2:2===t?a=3:3===t&&(e="Riven Grotto",a=1)):"Riven Grotto"===n?(e="Riven Grotto",1===t?a=2:2===t?a=3:3===t&&(e="Lanfeld Outpost",a=1)):"Lanfeld Outpost"===n?(e="Lanfeld Outpost",1===t?a=2:2===t?a=3:3===t&&(e="Aspen Grove",a=0)):"Aspen Grove"===n?(e="Braxxen's Bastille",a=1):"Braxxen's Bastille"===n?(e="Braxxen's Bastille",1===t?a=2:2===t?a=3:3===t&&(e="Kordata Marshlands",a=1)):"Kordata Marshlands"===n?(e="Kordata Marshlands",1===t?a=2:2===t?a=3:3===t&&(e="Arcturin's Crypt",a=1)):"Arcturin's Crypt"===n?(e="Arcturin's Crypt",1===t?a=2:2===t?a=3:3===t&&(e="Artremia",a=0)):"Artremia"===n?(e="Fahlnir Citadel",a=1):"Fahlnir Citadel"===n?(e="Fahlnir Citadel",1===t?a=2:2===t?a=3:3===t&&(e="Kordata Ruins",a=1)):"Kordata Ruins"===n?(e="Kordata Ruins",1===t?a=2:2===t?a=3:3===t&&(e="Temple of Prenssor",a=1)):"Temple of Prenssor"===n?(e="Temple of Prenssor",1===t?a=2:2===t?a=3:3===t&&(e="Fenwoven",a=0)):"Fenwoven"===n?(e="Viston's Redoubt",a=1):"Viston's Redoubt"===n?(e="Viston's Redoubt",1===t?a=2:2===t?a=3:3===t?a=4:4===t&&(e="Galeblast Fortress",a=1)):"Galeblast Fortress"===n?(e="Galeblast Fortress",1===t?a=2:2===t?a=3:3===t?a=4:4===t&&(e="Ashenflow Peak",a=1)):"Ashenflow Peak"===n?(e="Ashenflow Peak",1===t?a=2:2===t?a=3:3===t?a=4:4===t&&(e="Dire Sanctum",a=0)):"Dire Sanctum"===n&&(e="Nimgaul",a=0),Gn(e,a)}()}),e(n).ready(function(){e("#gameView").on("click","#myName",function(){Yy.level>=20?Yy.lastName||(e("#lastNameWrap").css("display","block"),e("#lastName").val("").focus(),Pk=!0):xy("You cannot change your surname until level 20.")}),e("#window2zoneday,#buffWindow").on("click",function(e){var a=Ca();e.target===this&&!1===KI&&!1===ya()&&!1===a&&ui()}),e("#gameView").on("focus","#lastName",function(){Pk=!0}).on("blur","#lastName",function(){Pk=!1})}),e("#worldMap").on("click",".zoneSelectHeader",function(){var a=e(this).html();"I"===a?iI=1:"II"===a?iI=2:"III"===a?iI=3:"IV"===a&&(iI=4),hy()}),e("#lore").on("click",function(){VS.length>0&&(VS.shift(),Ry())}),e("#introText").on("click",function(){VS.length>0&&(VS.shift(),Ry())}),e("#paused").on("click",function(){Hy()}),e(function(){e("html").on("contextmenu",function(e){NS||e.preventDefault()}),e("#gameView").on("click",".winHeader",function(){var e=this.id;zy.draggingWindows||("bankHeader"===e?my():"statHeader"===e?cy():"invHeader"===e?py():"questHeader"===e?fy():"optionHeader"===e?uy():"battleReportHead"===e&&Ma())})});var YH=[],KH=0;!function(){for(var e=0;e<=49;e++)YH[e]=""}(),uw=!0}($,Math,document,location,TweenMax,TimelineMax,Power0,Power1,Power2,Power3,Power4,Back,Elastic,Bounce,SteppedEase,Circ,Expo,Sine,setTimeout,setInterval,clearTimeout,clearInterval,void 0===window.webkitRequestAnimationFrame||webkitRequestAnimationFrame,void 0===window.webkitCancelAnimationFrame||webkitCancelAnimationFrame,getComputedStyle,requestAnimationFrame,cancelAnimationFrame,window,Array,JSON,Date,Object);